(self["webpackJsonp"] = self["webpackJsonp"] || []).push([["panel-lovelace"],{

/***/ "./src/cast/const.ts":
/*!***************************!*\
  !*** ./src/cast/const.ts ***!
  \***************************/
/*! exports provided: CAST_DEV, CAST_APP_ID, CAST_NS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_DEV", function() { return CAST_DEV; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_APP_ID", function() { return CAST_APP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_NS", function() { return CAST_NS; });
/* harmony import */ var _dev_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dev_const */ "./src/cast/dev_const.ts");

// Guard dev mode with `__dev__` so it can only ever be enabled in dev mode.
const CAST_DEV =  true && true;
const CAST_APP_ID = CAST_DEV ? _dev_const__WEBPACK_IMPORTED_MODULE_0__["CAST_DEV_APP_ID"] : "B12CE3CA";
const CAST_NS = "urn:x-cast:com.nabucasa.hast";


/***/ }),

/***/ "./src/cast/dev_const.ts":
/*!*******************************!*\
  !*** ./src/cast/dev_const.ts ***!
  \*******************************/
/*! exports provided: CAST_DEV_APP_ID, CAST_DEV_HASS_URL */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_DEV_APP_ID", function() { return CAST_DEV_APP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_DEV_HASS_URL", function() { return CAST_DEV_HASS_URL; });
// Replace this with your own unpublished cast app that points at your local dev
const CAST_DEV_APP_ID = "5FE44367";
// Chromecast SDK will only load on localhost and HTTPS
// So during local development we have to send our dev IP address,
// but then run the UI on localhost.
const CAST_DEV_HASS_URL = "http://192.168.1.234:8123";


/***/ }),

/***/ "./src/cast/receiver_messages.ts":
/*!***************************************!*\
  !*** ./src/cast/receiver_messages.ts ***!
  \***************************************/
/*! exports provided: castSendAuth, castSendShowLovelaceView, castSendShowDemo, ensureConnectedCastSession */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "castSendAuth", function() { return castSendAuth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "castSendShowLovelaceView", function() { return castSendShowLovelaceView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "castSendShowDemo", function() { return castSendShowDemo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ensureConnectedCastSession", function() { return ensureConnectedCastSession; });
/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./const */ "./src/cast/const.ts");
/* harmony import */ var _dev_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dev_const */ "./src/cast/dev_const.ts");
// Nessages to be processed inside the Cast Receiver app


const castSendAuth = (cast, auth) => cast.sendMessage({
    type: "connect",
    refreshToken: auth.data.refresh_token,
    clientId: auth.data.clientId,
    hassUrl: _const__WEBPACK_IMPORTED_MODULE_0__["CAST_DEV"] ? _dev_const__WEBPACK_IMPORTED_MODULE_1__["CAST_DEV_HASS_URL"] : auth.data.hassUrl,
});
const castSendShowLovelaceView = (cast, viewPath) => cast.sendMessage({
    type: "show_lovelace_view",
    viewPath,
});
const castSendShowDemo = (cast) => cast.sendMessage({
    type: "show_demo",
});
const ensureConnectedCastSession = (cast, auth) => {
    if (cast.castConnectedToOurHass) {
        return;
    }
    return new Promise((resolve) => {
        const unsub = cast.addEventListener("connection-changed", () => {
            if (cast.castConnectedToOurHass) {
                unsub();
                resolve();
            }
        });
        castSendAuth(cast, auth);
    });
};


/***/ }),

/***/ "./src/common/dom/load_resource.ts":
/*!*****************************************!*\
  !*** ./src/common/dom/load_resource.ts ***!
  \*****************************************/
/*! exports provided: loadCSS, loadJS, loadImg, loadModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCSS", function() { return loadCSS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadJS", function() { return loadJS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadImg", function() { return loadImg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadModule", function() { return loadModule; });
// Load a resource and get a promise when loading done.
// From: https://davidwalsh.name/javascript-loader
const _load = (tag, url, type) => {
    // This promise will be used by Promise.all to determine success or failure
    return new Promise((resolve, reject) => {
        const element = document.createElement(tag);
        let attr = "src";
        let parent = "body";
        // Important success and error for the promise
        element.onload = () => resolve(url);
        element.onerror = () => reject(url);
        // Need to set different attributes depending on tag type
        switch (tag) {
            case "script":
                element.async = true;
                if (type) {
                    element.type = type;
                }
                break;
            case "link":
                element.type = "text/css";
                element.rel = "stylesheet";
                attr = "href";
                parent = "head";
        }
        // Inject into document to kick off loading
        element[attr] = url;
        document[parent].appendChild(element);
    });
};
const loadCSS = (url) => _load("link", url);
const loadJS = (url) => _load("script", url);
const loadImg = (url) => _load("img", url);
const loadModule = (url) => _load("script", url, "module");


/***/ }),

/***/ "./src/common/dom/scroll-to-target.ts":
/*!********************************************!*\
  !*** ./src/common/dom/scroll-to-target.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return scrollToTarget; });
/**
 * Scroll to a specific y coordinate.
 *
 * Copied from paper-scroll-header-panel.
 *
 * @method scroll
 * @param {number} top The coordinate to scroll to, along the y-axis.
 * @param {boolean} smooth true if the scroll position should be smoothly adjusted.
 */
function scrollToTarget(element, target) {
    // the scroll event will trigger _updateScrollState directly,
    // However, _updateScrollState relies on the previous `scrollTop` to update the states.
    // Calling _updateScrollState will ensure that the states are synced correctly.
    const top = 0;
    const scroller = target;
    const easingFn = function easeOutQuad(t, b, c, d) {
        /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */
        t /= d;
        return -c * t * (t - 2) + b;
        /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */
    };
    const animationId = Math.random();
    const duration = 200;
    const startTime = Date.now();
    const currentScrollTop = scroller.scrollTop;
    const deltaScrollTop = top - currentScrollTop;
    element._currentAnimationId = animationId;
    (function updateFrame() {
        const now = Date.now();
        const elapsedTime = now - startTime;
        if (elapsedTime > duration) {
            scroller.scrollTop = top;
        }
        else if (element._currentAnimationId === animationId) {
            scroller.scrollTop = easingFn(elapsedTime, currentScrollTop, deltaScrollTop, duration);
            requestAnimationFrame(updateFrame.bind(element));
        }
    }.call(element));
}


/***/ }),

/***/ "./src/common/dom/setup-leaflet-map.ts":
/*!*********************************************!*\
  !*** ./src/common/dom/setup-leaflet-map.ts ***!
  \*********************************************/
/*! exports provided: setupLeafletMap, createTileLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupLeafletMap", function() { return setupLeafletMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createTileLayer", function() { return createTileLayer; });
const setupLeafletMap = async (mapElement, darkMode = false) => {
    if (!mapElement.parentNode) {
        throw new Error("Cannot setup Leaflet map on disconnected element");
    }
    // tslint:disable-next-line
    const Leaflet = (await __webpack_require__.e(/*! import() | leaflet */ "vendors~leaflet").then(__webpack_require__.t.bind(null, /*! leaflet */ "./node_modules/leaflet/dist/leaflet-src.js", 7)));
    Leaflet.Icon.Default.imagePath = "/static/images/leaflet/images/";
    const map = Leaflet.map(mapElement);
    const style = document.createElement("link");
    style.setAttribute("href", "/static/images/leaflet/leaflet.css");
    style.setAttribute("rel", "stylesheet");
    mapElement.parentNode.appendChild(style);
    map.setView([52.3731339, 4.8903147], 13);
    createTileLayer(Leaflet, darkMode).addTo(map);
    return [map, Leaflet];
};
const createTileLayer = (leaflet, darkMode) => {
    return leaflet.tileLayer(`https://{s}.basemaps.cartocdn.com/${darkMode ? "dark_all" : "light_all"}/{z}/{x}/{y}${leaflet.Browser.retina ? "@2x.png" : ".png"}`, {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: "abcd",
        minZoom: 0,
        maxZoom: 20,
    });
};


/***/ }),

/***/ "./src/common/entity/valid_entity_id.ts":
/*!**********************************************!*\
  !*** ./src/common/entity/valid_entity_id.ts ***!
  \**********************************************/
/*! exports provided: isValidEntityId, createValidEntityId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidEntityId", function() { return isValidEntityId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createValidEntityId", function() { return createValidEntityId; });
const validEntityId = /^(\w+)\.(\w+)$/;
const isValidEntityId = (entityId) => validEntityId.test(entityId);
const createValidEntityId = (input) => input
    .toLowerCase()
    .replace(/\s|\'/g, "_") // replace spaces and quotes with underscore
    .replace(/\W/g, "") // remove not allowed chars
    .replace(/_{2,}/g, "_") // replace multiple underscores with 1
    .replace(/_$/, ""); // remove underscores at the end


/***/ }),

/***/ "./src/common/string/compare.ts":
/*!**************************************!*\
  !*** ./src/common/string/compare.ts ***!
  \**************************************/
/*! exports provided: compare, caseInsensitiveCompare */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compare", function() { return compare; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "caseInsensitiveCompare", function() { return caseInsensitiveCompare; });
const compare = (a, b) => {
    if (a < b) {
        return -1;
    }
    if (a > b) {
        return 1;
    }
    return 0;
};
const caseInsensitiveCompare = (a, b) => compare(a.toLowerCase(), b.toLowerCase());


/***/ }),

/***/ "./src/common/util/debounce.ts":
/*!*************************************!*\
  !*** ./src/common/util/debounce.ts ***!
  \*************************************/
/*! exports provided: debounce */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return debounce; });
// From: https://davidwalsh.name/javascript-debounce-function
// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.
// tslint:disable-next-line: ban-types
const debounce = (func, wait, immediate = false) => {
    let timeout;
    // @ts-ignore
    return function (...args) {
        // tslint:disable:no-this-assignment
        // @ts-ignore
        const context = this;
        const later = () => {
            timeout = null;
            if (!immediate) {
                func.apply(context, args);
            }
        };
        const callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) {
            func.apply(context, args);
        }
    };
};


/***/ }),

/***/ "./src/common/util/parse-aspect-ratio.ts":
/*!***********************************************!*\
  !*** ./src/common/util/parse-aspect-ratio.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return parseAspectRatio; });
// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78
// Ignore everything else
const parseOrThrow = (num) => {
    const parsed = parseFloat(num);
    if (isNaN(parsed)) {
        throw new Error(`${num} is not a number`);
    }
    return parsed;
};
function parseAspectRatio(input) {
    if (!input) {
        return null;
    }
    try {
        if (input.endsWith("%")) {
            return { w: 100, h: parseOrThrow(input.substr(0, input.length - 1)) };
        }
        const arr = input.replace(":", "x").split("x");
        if (arr.length === 0) {
            return null;
        }
        return arr.length === 1
            ? { w: parseOrThrow(arr[0]), h: 1 }
            : { w: parseOrThrow(arr[0]), h: parseOrThrow(arr[1]) };
    }
    catch (err) {
        // Ignore the error
    }
    return null;
}


/***/ }),

/***/ "./src/common/util/render-status.ts":
/*!******************************************!*\
  !*** ./src/common/util/render-status.ts ***!
  \******************************************/
/*! exports provided: afterNextRender, nextRender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "afterNextRender", function() { return afterNextRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextRender", function() { return nextRender; });
const afterNextRender = (cb) => {
    requestAnimationFrame(() => setTimeout(cb, 0));
};
const nextRender = () => {
    return new Promise((resolve) => {
        afterNextRender(resolve);
    });
};


/***/ }),

/***/ "./src/common/util/subscribe-one.ts":
/*!******************************************!*\
  !*** ./src/common/util/subscribe-one.ts ***!
  \******************************************/
/*! exports provided: subscribeOne */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeOne", function() { return subscribeOne; });
const subscribeOne = async (conn, subscribe) => new Promise((resolve) => {
    const unsub = subscribe(conn, (items) => {
        unsub();
        resolve(items);
    });
});


/***/ }),

/***/ "./src/components/buttons/ha-call-service-button.js":
/*!**********************************************************!*\
  !*** ./src/components/buttons/ha-call-service-button.js ***!
  \**********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/* harmony import */ var _ha_progress_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ha-progress-button */ "./src/components/buttons/ha-progress-button.js");
/* harmony import */ var _mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../mixins/events-mixin */ "./src/mixins/events-mixin.js");






/*
 * @appliesMixin EventsMixin
 */
class HaCallServiceButton extends Object(_mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__["EventsMixin"])(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__["PolymerElement"]) {
  static get template() {
    return _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__["html"]`
      <ha-progress-button
        id="progress"
        progress="[[progress]]"
        on-click="buttonTapped"
        ><slot></slot
      ></ha-progress-button>
    `;
  }

  static get properties() {
    return {
      hass: {
        type: Object,
      },

      progress: {
        type: Boolean,
        value: false,
      },

      domain: {
        type: String,
      },

      service: {
        type: String,
      },

      serviceData: {
        type: Object,
        value: {},
      },

      confirmation: {
        type: String,
      },
    };
  }

  buttonTapped() {
    if (this.confirmation && !window.confirm(this.confirmation)) {
      return;
    }
    this.progress = true;
    var el = this;
    var eventData = {
      domain: this.domain,
      service: this.service,
      serviceData: this.serviceData,
    };

    this.hass
      .callService(this.domain, this.service, this.serviceData)
      .then(
        function() {
          el.progress = false;
          el.$.progress.actionSuccess();
          eventData.success = true;
        },
        function() {
          el.progress = false;
          el.$.progress.actionError();
          eventData.success = false;
        }
      )
      .then(function() {
        el.fire("hass-service-called", eventData);
      });
  }
}

customElements.define("ha-call-service-button", HaCallServiceButton);


/***/ }),

/***/ "./src/components/buttons/ha-progress-button.js":
/*!******************************************************!*\
  !*** ./src/components/buttons/ha-progress-button.js ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _material_mwc_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @material/mwc-button */ "./node_modules/@material/mwc-button/mwc-button.js");
/* harmony import */ var _polymer_paper_spinner_paper_spinner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/paper-spinner/paper-spinner */ "./node_modules/@polymer/paper-spinner/paper-spinner.js");
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");





class HaProgressButton extends _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_3__["PolymerElement"] {
  static get template() {
    return _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_2__["html"]`
      <style>
        .container {
          position: relative;
          display: inline-block;
        }

        mwc-button {
          transition: all 1s;
        }

        .success mwc-button {
          --mdc-theme-primary: white;
          background-color: var(--google-green-500);
          transition: none;
        }

        .error mwc-button {
          --mdc-theme-primary: white;
          background-color: var(--google-red-500);
          transition: none;
        }

        .progress {
          @apply --layout;
          @apply --layout-center-center;
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
        }
      </style>
      <div class="container" id="container">
        <mwc-button
          id="button"
          disabled="[[computeDisabled(disabled, progress)]]"
          on-click="buttonTapped"
        >
          <slot></slot>
        </mwc-button>
        <template is="dom-if" if="[[progress]]">
          <div class="progress"><paper-spinner active=""></paper-spinner></div>
        </template>
      </div>
    `;
  }

  static get properties() {
    return {
      hass: {
        type: Object,
      },

      progress: {
        type: Boolean,
        value: false,
      },

      disabled: {
        type: Boolean,
        value: false,
      },
    };
  }

  tempClass(className) {
    var classList = this.$.container.classList;
    classList.add(className);
    setTimeout(() => {
      classList.remove(className);
    }, 1000);
  }

  ready() {
    super.ready();
    this.addEventListener("click", (ev) => this.buttonTapped(ev));
  }

  buttonTapped(ev) {
    if (this.progress) ev.stopPropagation();
  }

  actionSuccess() {
    this.tempClass("success");
  }

  actionError() {
    this.tempClass("error");
  }

  computeDisabled(disabled, progress) {
    return disabled || progress;
  }
}

customElements.define("ha-progress-button", HaProgressButton);


/***/ }),

/***/ "./src/components/ha-date-input.ts":
/*!*****************************************!*\
  !*** ./src/components/ha-date-input.ts ***!
  \*****************************************/
/*! exports provided: HaDateInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HaDateInput", function() { return HaDateInput; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_input_paper_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-input/paper-input */ "./node_modules/@polymer/paper-input/paper-input.js");



let HaDateInput = class HaDateInput extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    constructor() {
        super(...arguments);
        this.disabled = false;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        display: block;
        font-family: var(--paper-font-common-base_-_font-family);
        -webkit-font-smoothing: var(
          --paper-font-common-base_-_-webkit-font-smoothing
        );
      }

      paper-input {
        width: 30px;
        text-align: center;
        --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;
        --paper-input-container-input_-_-moz-appearance: textfield;
        --paper-input-container-shared-input-style_-_appearance: textfield;
        --paper-input-container-input-webkit-spinner_-_-webkit-appearance: none;
        --paper-input-container-input-webkit-spinner_-_margin: 0;
        --paper-input-container-input-webkit-spinner_-_display: none;
      }

      paper-input#year {
        width: 50px;
      }

      .date-input-wrap {
        display: flex;
        flex-direction: row;
      }
    `;
    }
    render() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <div class="date-input-wrap">
        <paper-input
          id="year"
          type="number"
          .value=${this.year}
          @change=${this._formatYear}
          maxlength="4"
          max="9999"
          min="0"
          .disabled=${this.disabled}
          no-label-float
        >
          <span suffix="" slot="suffix">-</span>
        </paper-input>
        <paper-input
          id="month"
          type="number"
          .value=${this.month}
          @change=${this._formatMonth}
          maxlength="2"
          max="12"
          min="1"
          .disabled=${this.disabled}
          no-label-float
        >
          <span suffix="" slot="suffix">-</span>
        </paper-input>
        <paper-input
          id="day"
          type="number"
          .value=${this.day}
          @change=${this._formatDay}
          maxlength="2"
          max="31"
          min="1"
          .disabled=${this.disabled}
          no-label-float
        >
        </paper-input>
      </div>
    `;
    }
    _formatYear() {
        const yearElement = this.shadowRoot.getElementById("year");
        this.year = yearElement.value;
    }
    _formatMonth() {
        const monthElement = this.shadowRoot.getElementById("month");
        this.month = ("0" + monthElement.value).slice(-2);
    }
    _formatDay() {
        const dayElement = this.shadowRoot.getElementById("day");
        this.day = ("0" + dayElement.value).slice(-2);
    }
    get value() {
        return `${this.year}-${this.month}-${this.day}`;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HaDateInput.prototype, "year", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HaDateInput.prototype, "month", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HaDateInput.prototype, "day", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])({ type: Boolean })
], HaDateInput.prototype, "disabled", void 0);
HaDateInput = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("ha-date-input")
], HaDateInput);



/***/ }),

/***/ "./src/components/ha-paper-dropdown-menu.ts":
/*!**************************************************!*\
  !*** ./src/components/ha-paper-dropdown-menu.ts ***!
  \**************************************************/
/*! exports provided: HaPaperDropdownClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HaPaperDropdownClass", function() { return HaPaperDropdownClass; });
/* harmony import */ var _polymer_paper_dropdown_menu_paper_dropdown_menu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/paper-dropdown-menu/paper-dropdown-menu */ "./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu.js");

const paperDropdownClass = customElements.get("paper-dropdown-menu");
// patches paper drop down to properly support RTL - https://github.com/PolymerElements/paper-dropdown-menu/issues/183
class HaPaperDropdownClass extends paperDropdownClass {
    ready() {
        super.ready();
        // wait to check for direction since otherwise direction is wrong even though top level is RTL
        setTimeout(() => {
            if (window.getComputedStyle(this).direction === "rtl") {
                this.style.textAlign = "right";
            }
        }, 100);
    }
}
customElements.define("ha-paper-dropdown-menu", HaPaperDropdownClass);


/***/ }),

/***/ "./src/components/ha-paper-icon-button-arrow-next.ts":
/*!***********************************************************!*\
  !*** ./src/components/ha-paper-icon-button-arrow-next.ts ***!
  \***********************************************************/
/*! exports provided: HaPaperIconButtonArrowNext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HaPaperIconButtonArrowNext", function() { return HaPaperIconButtonArrowNext; });
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");

const paperIconButtonClass = customElements.get("paper-icon-button");
class HaPaperIconButtonArrowNext extends paperIconButtonClass {
    connectedCallback() {
        super.connectedCallback();
        // wait to check for direction since otherwise direction is wrong even though top level is RTL
        setTimeout(() => {
            this.icon =
                window.getComputedStyle(this).direction === "ltr"
                    ? "hass:arrow-right"
                    : "hass:arrow-left";
        }, 100);
    }
}
customElements.define("ha-paper-icon-button-arrow-next", HaPaperIconButtonArrowNext);


/***/ }),

/***/ "./src/components/paper-time-input.js":
/*!********************************************!*\
  !*** ./src/components/paper-time-input.js ***!
  \********************************************/
/*! exports provided: PaperTimeInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaperTimeInput", function() { return PaperTimeInput; });
/* harmony import */ var _polymer_paper_input_paper_input__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/paper-input/paper-input */ "./node_modules/@polymer/paper-input/paper-input.js");
/* harmony import */ var _polymer_paper_listbox_paper_listbox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/paper-listbox/paper-listbox */ "./node_modules/@polymer/paper-listbox/paper-listbox.js");
/* harmony import */ var _polymer_paper_item_paper_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-item/paper-item */ "./node_modules/@polymer/paper-item/paper-item.js");
/* harmony import */ var _polymer_paper_dropdown_menu_paper_dropdown_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/paper-dropdown-menu/paper-dropdown-menu */ "./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu.js");
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/**
Adapted from paper-time-input from
https://github.com/ryanburns23/paper-time-input
MIT Licensed. Copyright (c) 2017 Ryan Burns

`<paper-time-input>` Polymer element to accept a time with paper-input & paper-dropdown-menu
Inspired by the time input in google forms

### Styling

`<paper-time-input>` provides the following custom properties and mixins for styling:

Custom property | Description | Default
----------------|-------------|----------
`--paper-time-input-dropdown-ripple-color` | dropdown ripple color | `--primary-color`
`--paper-time-input-cotnainer` | Mixin applied to the inputs | `{}`
`--paper-time-dropdown-input-cotnainer` | Mixin applied to the dropdown input | `{}`
*/







class PaperTimeInput extends _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_5__["PolymerElement"] {
  static get template() {
    return _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_4__["html"]`
      <style>
        :host {
          display: block;
          @apply --paper-font-common-base;
        }

        paper-input {
          width: 30px;
          text-align: center;
          --paper-input-container-input: {
            /* Damn you firefox
             * Needed to hide spin num in firefox
             * http://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-input-s-spin-box
             */
            -moz-appearance: textfield;
            @apply --paper-time-input-cotnainer;
          }
          --paper-input-container-input-webkit-spinner: {
            -webkit-appearance: none;
            margin: 0;
            display: none;
          }
          --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;
        }

        paper-dropdown-menu {
          width: 55px;
          padding: 0;
          /* Force ripple to use the whole container */
          --paper-dropdown-menu-ripple: {
            color: var(
              --paper-time-input-dropdown-ripple-color,
              var(--primary-color)
            );
          }
          --paper-input-container-input: {
            @apply --paper-font-button;
            text-align: center;
            padding-left: 5px;
            @apply --paper-time-dropdown-input-cotnainer;
          }
          --paper-input-container-underline: {
            border-color: transparent;
          }
          --paper-input-container-underline-focus: {
            border-color: transparent;
          }
        }

        paper-item {
          cursor: pointer;
          text-align: center;
          font-size: 14px;
        }

        paper-listbox {
          padding: 0;
        }

        label {
          @apply --paper-font-caption;
        }

        .time-input-wrap {
          @apply --layout-horizontal;
          @apply --layout-no-wrap;
        }

        [hidden] {
          display: none !important;
        }
      </style>

      <label hidden$="[[hideLabel]]">[[label]]</label>
      <div class="time-input-wrap">
        <!-- Hour Input -->
        <paper-input
          id="hour"
          type="number"
          value="{{hour}}"
          on-change="_shouldFormatHour"
          required=""
          auto-validate="[[autoValidate]]"
          prevent-invalid-input=""
          maxlength="2"
          max="[[_computeHourMax(format)]]"
          min="0"
          no-label-float=""
          disabled="[[disabled]]"
        >
          <span suffix="" slot="suffix">:</span>
        </paper-input>

        <!-- Min Input -->
        <paper-input
          id="min"
          type="number"
          value="{{min}}"
          on-change="_formatMin"
          required=""
          auto-validate="[[autoValidate]]"
          prevent-invalid-input=""
          maxlength="2"
          max="59"
          min="0"
          no-label-float=""
          disabled="[[disabled]]"
        >
        </paper-input>

        <!-- Dropdown Menu -->
        <paper-dropdown-menu
          id="dropdown"
          required=""
          hidden$="[[_equal(format, 24)]]"
          no-label-float=""
          disabled="[[disabled]]"
        >
          <paper-listbox
            attr-for-selected="name"
            selected="{{amPm}}"
            slot="dropdown-content"
          >
            <paper-item name="AM">AM</paper-item>
            <paper-item name="PM">PM</paper-item>
          </paper-listbox>
        </paper-dropdown-menu>
      </div>
    `;
  }

  static get properties() {
    return {
      /**
       * Label for the input
       */
      label: {
        type: String,
        value: "Time",
      },
      /**
       * auto validate time inputs
       */
      autoValidate: {
        type: Boolean,
        value: true,
      },
      /**
       * hides the label
       */
      hideLabel: {
        type: Boolean,
        value: false,
      },
      /**
       * 12 or 24 hr format
       */
      format: {
        type: Number,
        value: 12,
      },
      /**
       * disables the inputs
       */
      disabled: {
        type: Boolean,
        value: false,
      },
      /**
       * hour
       */
      hour: {
        type: String,
        notify: true,
      },
      /**
       * minute
       */
      min: {
        type: String,
        notify: true,
      },
      /**
       * AM or PM
       */
      amPm: {
        type: String,
        notify: true,
        value: "AM",
      },
      /**
       * Formatted time string
       */
      value: {
        type: String,
        notify: true,
        readOnly: true,
        computed: "_computeTime(min, hour, amPm)",
      },
    };
  }

  /**
   * Validate the inputs
   * @return {boolean}
   */
  validate() {
    var valid = true;
    // Validate hour & min fields
    if (!this.$.hour.validate() | !this.$.min.validate()) {
      valid = false;
    }
    // Validate AM PM if 12 hour time
    if (this.format === 12 && !this.$.dropdown.validate()) {
      valid = false;
    }
    return valid;
  }

  /**
   * Create time string
   */
  _computeTime(min, hour, amPm) {
    if (hour && min) {
      // No ampm on 24 hr time
      if (this.format === 24) {
        amPm = "";
      }
      return hour + ":" + min + " " + amPm;
    }
    return undefined;
  }

  /**
   * Format min
   */
  _formatMin() {
    if (this.min.toString().length === 1) {
      this.min = this.min < 10 ? "0" + this.min : this.min;
    }
  }

  /**
   * Hour needs a leading zero in 24hr format
   */
  _shouldFormatHour() {
    if (this.format === 24 && this.hour.toString().length === 1) {
      this.hour = this.hour < 10 ? "0" + this.hour : this.hour;
    }
  }

  /**
   * 24 hour format has a max hr of 23
   */
  _computeHourMax(format) {
    if (format === 12) {
      return format;
    }
    return 23;
  }

  _equal(n1, n2) {
    return n1 === n2;
  }
}

customElements.define("paper-time-input", PaperTimeInput);


/***/ }),

/***/ "./src/data/alarm_control_panel.ts":
/*!*****************************************!*\
  !*** ./src/data/alarm_control_panel.ts ***!
  \*****************************************/
/*! exports provided: FORMAT_TEXT, FORMAT_NUMBER, callAlarmAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FORMAT_TEXT", function() { return FORMAT_TEXT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FORMAT_NUMBER", function() { return FORMAT_NUMBER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "callAlarmAction", function() { return callAlarmAction; });
const FORMAT_TEXT = "text";
const FORMAT_NUMBER = "number";
const callAlarmAction = (hass, entity, action, code) => {
    hass.callService("alarm_control_panel", "alarm_" + action, {
        entity_id: entity,
        code,
    });
};


/***/ }),

/***/ "./src/data/area_registry.ts":
/*!***********************************!*\
  !*** ./src/data/area_registry.ts ***!
  \***********************************/
/*! exports provided: createAreaRegistryEntry, updateAreaRegistryEntry, deleteAreaRegistryEntry, subscribeAreaRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createAreaRegistryEntry", function() { return createAreaRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateAreaRegistryEntry", function() { return updateAreaRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteAreaRegistryEntry", function() { return deleteAreaRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeAreaRegistry", function() { return subscribeAreaRegistry; });
/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ "./node_modules/home-assistant-js-websocket/dist/haws.es.js");
/* harmony import */ var _common_string_compare__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/string/compare */ "./src/common/string/compare.ts");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/util/debounce */ "./src/common/util/debounce.ts");



const createAreaRegistryEntry = (hass, values) => hass.callWS(Object.assign({ type: "config/area_registry/create" }, values));
const updateAreaRegistryEntry = (hass, areaId, updates) => hass.callWS(Object.assign({ type: "config/area_registry/update", area_id: areaId }, updates));
const deleteAreaRegistryEntry = (hass, areaId) => hass.callWS({
    type: "config/area_registry/delete",
    area_id: areaId,
});
const fetchAreaRegistry = (conn) => conn
    .sendMessagePromise({
    type: "config/area_registry/list",
})
    .then((areas) => areas.sort((ent1, ent2) => Object(_common_string_compare__WEBPACK_IMPORTED_MODULE_1__["compare"])(ent1.name, ent2.name)));
const subscribeAreaRegistryUpdates = (conn, store) => conn.subscribeEvents(Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_2__["debounce"])(() => fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)), 500, true), "area_registry_updated");
const subscribeAreaRegistry = (conn, onChange) => Object(home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__["createCollection"])("_areaRegistry", fetchAreaRegistry, subscribeAreaRegistryUpdates, conn, onChange);


/***/ }),

/***/ "./src/data/device_registry.ts":
/*!*************************************!*\
  !*** ./src/data/device_registry.ts ***!
  \*************************************/
/*! exports provided: updateDeviceRegistryEntry, subscribeDeviceRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateDeviceRegistryEntry", function() { return updateDeviceRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeDeviceRegistry", function() { return subscribeDeviceRegistry; });
/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ "./node_modules/home-assistant-js-websocket/dist/haws.es.js");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/util/debounce */ "./src/common/util/debounce.ts");


const updateDeviceRegistryEntry = (hass, deviceId, updates) => hass.callWS(Object.assign({ type: "config/device_registry/update", device_id: deviceId }, updates));
const fetchDeviceRegistry = (conn) => conn.sendMessagePromise({
    type: "config/device_registry/list",
});
const subscribeDeviceRegistryUpdates = (conn, store) => conn.subscribeEvents(Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_1__["debounce"])(() => fetchDeviceRegistry(conn).then((devices) => store.setState(devices, true)), 500, true), "device_registry_updated");
const subscribeDeviceRegistry = (conn, onChange) => Object(home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__["createCollection"])("_dr", fetchDeviceRegistry, subscribeDeviceRegistryUpdates, conn, onChange);


/***/ }),

/***/ "./src/data/entity.ts":
/*!****************************!*\
  !*** ./src/data/entity.ts ***!
  \****************************/
/*! exports provided: UNAVAILABLE, ENTITY_COMPONENT_DOMAINS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UNAVAILABLE", function() { return UNAVAILABLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENTITY_COMPONENT_DOMAINS", function() { return ENTITY_COMPONENT_DOMAINS; });
const UNAVAILABLE = "unavailable";
const ENTITY_COMPONENT_DOMAINS = [
    "air_quality",
    "alarm_control_panel",
    "alert",
    "automation",
    "binary_sensor",
    "calendar",
    "camera",
    "counter",
    "cover",
    "dominos",
    "fan",
    "geo_location",
    "group",
    "history_graph",
    "image_processing",
    "input_boolean",
    "input_datetime",
    "input_number",
    "input_select",
    "input_text",
    "light",
    "lock",
    "mailbox",
    "media_player",
    "person",
    "plant",
    "remember_the_milk",
    "remote",
    "scene",
    "script",
    "sensor",
    "switch",
    "timer",
    "utility_meter",
    "vacuum",
    "weather",
    "wink",
    "zha",
    "zwave",
];


/***/ }),

/***/ "./src/data/entity_registry.ts":
/*!*************************************!*\
  !*** ./src/data/entity_registry.ts ***!
  \*************************************/
/*! exports provided: computeEntityRegistryName, updateEntityRegistryEntry, removeEntityRegistryEntry, subscribeEntityRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeEntityRegistryName", function() { return computeEntityRegistryName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateEntityRegistryEntry", function() { return updateEntityRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeEntityRegistryEntry", function() { return removeEntityRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeEntityRegistry", function() { return subscribeEntityRegistry; });
/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ "./node_modules/home-assistant-js-websocket/dist/haws.es.js");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/util/debounce */ "./src/common/util/debounce.ts");



const computeEntityRegistryName = (hass, entry) => {
    if (entry.name) {
        return entry.name;
    }
    const state = hass.states[entry.entity_id];
    return state ? Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_1__["computeStateName"])(state) : null;
};
const updateEntityRegistryEntry = (hass, entityId, updates) => hass.callWS(Object.assign({ type: "config/entity_registry/update", entity_id: entityId }, updates));
const removeEntityRegistryEntry = (hass, entityId) => hass.callWS({
    type: "config/entity_registry/remove",
    entity_id: entityId,
});
const fetchEntityRegistry = (conn) => conn.sendMessagePromise({
    type: "config/entity_registry/list",
});
const subscribeEntityRegistryUpdates = (conn, store) => conn.subscribeEvents(Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_2__["debounce"])(() => fetchEntityRegistry(conn).then((entities) => store.setState(entities, true)), 500, true), "entity_registry_updated");
const subscribeEntityRegistry = (conn, onChange) => Object(home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__["createCollection"])("_entityRegistry", fetchEntityRegistry, subscribeEntityRegistryUpdates, conn, onChange);


/***/ }),

/***/ "./src/data/input_datetime.ts":
/*!************************************!*\
  !*** ./src/data/input_datetime.ts ***!
  \************************************/
/*! exports provided: setInputDateTimeValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setInputDateTimeValue", function() { return setInputDateTimeValue; });
const setInputDateTimeValue = (hass, entityId, time = undefined, date = undefined) => {
    const param = { entity_id: entityId, time, date };
    hass.callService(entityId.split(".", 1)[0], "set_datetime", param);
};


/***/ }),

/***/ "./src/data/input_text.ts":
/*!********************************!*\
  !*** ./src/data/input_text.ts ***!
  \********************************/
/*! exports provided: setValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setValue", function() { return setValue; });
const setValue = (hass, entity, value) => hass.callService(entity.split(".", 1)[0], "set_value", {
    value,
    entity_id: entity,
});


/***/ }),

/***/ "./src/data/light.ts":
/*!***************************!*\
  !*** ./src/data/light.ts ***!
  \***************************/
/*! exports provided: SUPPORT_BRIGHTNESS, SUPPORT_COLOR_TEMP, SUPPORT_EFFECT, SUPPORT_FLASH, SUPPORT_COLOR, SUPPORT_TRANSITION, SUPPORT_WHITE_VALUE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_BRIGHTNESS", function() { return SUPPORT_BRIGHTNESS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_COLOR_TEMP", function() { return SUPPORT_COLOR_TEMP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_EFFECT", function() { return SUPPORT_EFFECT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_FLASH", function() { return SUPPORT_FLASH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_COLOR", function() { return SUPPORT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_TRANSITION", function() { return SUPPORT_TRANSITION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_WHITE_VALUE", function() { return SUPPORT_WHITE_VALUE; });
const SUPPORT_BRIGHTNESS = 1;
const SUPPORT_COLOR_TEMP = 2;
const SUPPORT_EFFECT = 4;
const SUPPORT_FLASH = 8;
const SUPPORT_COLOR = 16;
const SUPPORT_TRANSITION = 32;
const SUPPORT_WHITE_VALUE = 128;


/***/ }),

/***/ "./src/data/lovelace.ts":
/*!******************************!*\
  !*** ./src/data/lovelace.ts ***!
  \******************************/
/*! exports provided: fetchConfig, saveConfig, subscribeLovelaceUpdates, getLovelaceCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchConfig", function() { return fetchConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveConfig", function() { return saveConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeLovelaceUpdates", function() { return subscribeLovelaceUpdates; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLovelaceCollection", function() { return getLovelaceCollection; });
/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ "./node_modules/home-assistant-js-websocket/dist/haws.es.js");

const fetchConfig = (conn, force) => conn.sendMessagePromise({
    type: "lovelace/config",
    force,
});
const saveConfig = (hass, config) => hass.callWS({
    type: "lovelace/config/save",
    config,
});
const subscribeLovelaceUpdates = (conn, onChange) => conn.subscribeEvents(onChange, "lovelace_updated");
const getLovelaceCollection = (conn) => Object(home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__["getCollection"])(conn, "_lovelace", (conn2) => fetchConfig(conn2, false), (_conn, store) => subscribeLovelaceUpdates(conn, () => fetchConfig(conn, false).then((config) => store.setState(config, true))));


/***/ }),

/***/ "./src/data/shopping-list.ts":
/*!***********************************!*\
  !*** ./src/data/shopping-list.ts ***!
  \***********************************/
/*! exports provided: fetchItems, updateItem, clearItems, addItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchItems", function() { return fetchItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateItem", function() { return updateItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearItems", function() { return clearItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addItem", function() { return addItem; });
const fetchItems = (hass) => hass.callWS({
    type: "shopping_list/items",
});
const updateItem = (hass, itemId, item) => hass.callWS(Object.assign({ type: "shopping_list/items/update", item_id: itemId }, item));
const clearItems = (hass) => hass.callWS({
    type: "shopping_list/items/clear",
});
const addItem = (hass, name) => hass.callWS({
    type: "shopping_list/items/add",
    name,
});


/***/ }),

/***/ "./src/data/ws-templates.ts":
/*!**********************************!*\
  !*** ./src/data/ws-templates.ts ***!
  \**********************************/
/*! exports provided: subscribeRenderTemplate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeRenderTemplate", function() { return subscribeRenderTemplate; });
const subscribeRenderTemplate = (conn, onChange, params) => {
    return conn.subscribeMessage((msg) => onChange(msg.result), Object.assign({ type: "render_template" }, params));
};


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-alarm-panel-card.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-alarm-panel-card.ts ***!
  \***********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_label_badge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-label-badge */ "./src/components/ha-label-badge.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/alarm_control_panel */ "./src/data/alarm_control_panel.ts");







const ICONS = {
    armed_away: "hass:shield-lock",
    armed_custom_bypass: "hass:security",
    armed_home: "hass:shield-home",
    armed_night: "hass:shield-home",
    disarmed: "hass:shield-check",
    pending: "hass:shield-outline",
    triggered: "hass:bell-ring",
};
const BUTTONS = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "", "0", "clear"];
let HuiAlarmPanelCard = class HuiAlarmPanelCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-alarm-panel-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-alarm-panel-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-alarm-panel-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-alarm-panel-card-editor.ts"));
        return document.createElement("hui-alarm-panel-card-editor");
    }
    static getStubConfig() {
        return { states: ["arm_home", "arm_away"], entity: "" };
    }
    getCardSize() {
        if (!this._config || !this.hass) {
            return 0;
        }
        const stateObj = this.hass.states[this._config.entity];
        return !stateObj || stateObj.attributes.code_format !== _data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__["FORMAT_NUMBER"]
            ? 3
            : 8;
    }
    setConfig(config) {
        if (!config ||
            !config.entity ||
            config.entity.split(".")[0] !== "alarm_control_panel") {
            throw new Error("Invalid card configuration");
        }
        const defaults = {
            states: ["arm_away", "arm_home"],
        };
        this._config = Object.assign(Object.assign({}, defaults), config);
        this._code = "";
    }
    shouldUpdate(changedProps) {
        if (changedProps.has("_config") || changedProps.has("_code")) {
            return true;
        }
        const oldHass = changedProps.get("hass");
        if (oldHass) {
            return (oldHass.states[this._config.entity] !==
                this.hass.states[this._config.entity]);
        }
        return true;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card
        .header="${this._config.name ||
            stateObj.attributes.friendly_name ||
            this._label(stateObj.state)}"
      >
        <ha-label-badge
          class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({ [stateObj.state]: true })}"
          .icon="${ICONS[stateObj.state] || "hass:shield-outline"}"
          .label="${this._stateIconLabel(stateObj.state)}"
        ></ha-label-badge>
        <div id="armActions" class="actions">
          ${(stateObj.state === "disarmed"
            ? this._config.states
            : ["disarm"]).map((state) => {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <mwc-button
                .action="${state}"
                @click="${this._handleActionClick}"
                outlined
              >
                ${this._label(state)}
              </mwc-button>
            `;
        })}
        </div>
        ${!stateObj.attributes.code_format
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <paper-input
                id="alarmCode"
                label="Alarm Code"
                type="password"
                .value="${this._code}"
              ></paper-input>
            `}
        ${stateObj.attributes.code_format !== _data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__["FORMAT_NUMBER"]
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div id="keypad">
                ${BUTTONS.map((value) => {
                return value === ""
                    ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                        <mwc-button disabled></mwc-button>
                      `
                    : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                        <mwc-button
                          .value="${value}"
                          @click="${this._handlePadClick}"
                          dense
                        >
                          ${value === "clear"
                        ? this._label("clear_code")
                        : value}
                        </mwc-button>
                      `;
            })}
              </div>
            `}
      </ha-card>
    `;
    }
    _stateIconLabel(state) {
        const stateLabel = state.split("_").pop();
        return stateLabel === "disarmed" ||
            stateLabel === "triggered" ||
            !stateLabel
            ? ""
            : stateLabel;
    }
    _label(state) {
        return (this.hass.localize(`state.alarm_control_panel.${state}`) ||
            this.hass.localize(`ui.card.alarm_control_panel.${state}`));
    }
    _handlePadClick(e) {
        const val = e.currentTarget.value;
        this._code = val === "clear" ? "" : this._code + val;
    }
    _handleActionClick(e) {
        const input = this.shadowRoot.querySelector("#alarmCode");
        const code = this._code ||
            (input && input.value && input.value.length > 0 ? input.value : "");
        Object(_data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__["callAlarmAction"])(this.hass, this._config.entity, e.currentTarget.action, code);
        this._code = "";
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-card {
        padding-bottom: 16px;
        position: relative;
        --alarm-color-disarmed: var(--label-badge-green);
        --alarm-color-pending: var(--label-badge-yellow);
        --alarm-color-triggered: var(--label-badge-red);
        --alarm-color-armed: var(--label-badge-red);
        --alarm-color-autoarm: rgba(0, 153, 255, 0.1);
        --alarm-state-color: var(--alarm-color-armed);
        --base-unit: 15px;
        font-size: calc(var(--base-unit));
      }

      ha-label-badge {
        --ha-label-badge-color: var(--alarm-state-color);
        --label-badge-text-color: var(--alarm-state-color);
        --label-badge-background-color: var(--paper-card-background-color);
        color: var(--alarm-state-color);
        position: absolute;
        right: 12px;
        top: 12px;
      }

      .disarmed {
        --alarm-state-color: var(--alarm-color-disarmed);
      }

      .triggered {
        --alarm-state-color: var(--alarm-color-triggered);
        animation: pulse 1s infinite;
      }

      .arming {
        --alarm-state-color: var(--alarm-color-pending);
        animation: pulse 1s infinite;
      }

      .pending {
        --alarm-state-color: var(--alarm-color-pending);
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0% {
          --ha-label-badge-color: var(--alarm-state-color);
        }
        100% {
          --ha-label-badge-color: rgba(255, 153, 0, 0.3);
        }
      }

      paper-input {
        margin: 0 auto 8px;
        max-width: 150px;
        font-size: calc(var(--base-unit));
        text-align: center;
      }

      .state {
        margin-left: 16px;
        font-size: calc(var(--base-unit) * 0.9);
        position: relative;
        bottom: 16px;
        color: var(--alarm-state-color);
        animation: none;
      }

      #keypad {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin: auto;
        width: 300px;
      }

      #keypad mwc-button {
        margin-bottom: 5%;
        width: 30%;
        padding: calc(var(--base-unit));
        font-size: calc(var(--base-unit) * 1.1);
        box-sizing: border-box;
      }

      .actions {
        margin: 0 8px;
        padding-top: 20px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        font-size: calc(var(--base-unit) * 1);
      }

      .actions mwc-button {
        min-width: calc(var(--base-unit) * 9);
        margin: 0 4px 4px;
      }

      mwc-button#disarm {
        color: var(--google-red-500);
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiAlarmPanelCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiAlarmPanelCard.prototype, "_config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiAlarmPanelCard.prototype, "_code", void 0);
HuiAlarmPanelCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-alarm-panel-card")
], HuiAlarmPanelCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-conditional-card.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-conditional-card.ts ***!
  \***********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lovelace/common/validate-condition */ "./src/panels/lovelace/common/validate-condition.ts");



class HuiConditionalCard extends HTMLElement {
    setConfig(config) {
        if (!config.card ||
            !config.conditions ||
            !Array.isArray(config.conditions) ||
            !Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_2__["validateConditionalConfig"])(config.conditions)) {
            throw new Error("Error in card configuration.");
        }
        if (this._card && this._card.parentElement) {
            this.removeChild(this._card);
        }
        this._config = config;
        this._card = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_0__["createCardElement"])(config.card);
        this.update();
    }
    set hass(hass) {
        this._hass = hass;
        this.update();
    }
    getCardSize() {
        return Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_1__["computeCardSize"])(this._card);
    }
    update() {
        if (!this._card || !this._hass) {
            return;
        }
        const visible = this._config && Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_2__["checkConditionsMet"])(this._config.conditions, this._hass);
        if (visible) {
            this._card.hass = this._hass;
            if (!this._card.parentElement) {
                this.appendChild(this._card);
            }
        }
        else if (this._card.parentElement) {
            this.removeChild(this._card);
        }
        // This will hide the complete card so it won't get styled by parent
        this.style.setProperty("display", visible ? "" : "none");
    }
}
customElements.define("hui-conditional-card", HuiConditionalCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-entities-card.ts":
/*!********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-entities-card.ts ***!
  \********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_entities_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-entities-toggle */ "./src/panels/lovelace/components/hui-entities-toggle.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_create_row_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/create-row-element */ "./src/panels/lovelace/common/create-row-element.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");










let HuiEntitiesCard = class HuiEntitiesCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-entities-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-entities-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-entities-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-entities-card-editor.ts"));
        return document.createElement("hui-entities-card-editor");
    }
    static getStubConfig() {
        return { entities: [] };
    }
    set hass(hass) {
        this._hass = hass;
        this.shadowRoot.querySelectorAll("#states > div > *").forEach((element) => {
            element.hass = hass;
        });
        const entitiesToggle = this.shadowRoot.querySelector("hui-entities-toggle");
        if (entitiesToggle) {
            entitiesToggle.hass = hass;
        }
    }
    getCardSize() {
        if (!this._config) {
            return 0;
        }
        // +1 for the header
        return (this._config.title ? 1 : 0) + this._config.entities.length;
    }
    setConfig(config) {
        const entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_6__["processConfigEntities"])(config.entities);
        this._config = Object.assign({ theme: "default" }, config);
        this._configEntities = entities;
    }
    updated(changedProperties) {
        super.updated(changedProperties);
        if (this._hass && this._config) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_9__["default"])(this, this._hass.themes, this._config.theme);
        }
    }
    render() {
        if (!this._config || !this._hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const { show_header_toggle, title } = this._config;
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card>
        ${!title && !show_header_toggle
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div class="card-header">
                <div class="name">${title}</div>
                ${show_header_toggle === false
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``
                : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                      <hui-entities-toggle
                        .hass="${this._hass}"
                        .entities="${this._configEntities.map((conf) => conf.entity)}"
                      ></hui-entities-toggle>
                    `}
              </div>
            `}
        <div id="states" class="card-content">
          ${this._configEntities.map((entityConf) => this.renderEntity(entityConf))}
        </div>
      </ha-card>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .card-header {
        display: flex;
        justify-content: space-between;
      }

      .card-header .name {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .card-header hui-entities-toggle {
        margin: -4px 0;
      }

      #states > * {
        margin: 8px 0;
      }

      #states > div > * {
        overflow: hidden;
      }

      .state-card-dialog {
        cursor: pointer;
      }
    `;
    }
    renderEntity(entityConf) {
        const element = Object(_common_create_row_element__WEBPACK_IMPORTED_MODULE_7__["createRowElement"])(entityConf);
        if (this._hass) {
            element.hass = this._hass;
        }
        if (entityConf.entity &&
            !_common_const__WEBPACK_IMPORTED_MODULE_5__["DOMAINS_HIDE_MORE_INFO"].includes(Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_8__["computeDomain"])(entityConf.entity))) {
            element.classList.add("state-card-dialog");
            element.addEventListener("click", () => this._handleClick(entityConf));
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <div>${element}</div>
    `;
    }
    _handleClick(entityConf) {
        const entityId = entityConf.entity;
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_4__["fireEvent"])(this, "hass-more-info", { entityId });
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiEntitiesCard.prototype, "_config", void 0);
HuiEntitiesCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-entities-card")
], HuiEntitiesCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-entity-button-card.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-entity-button-card.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var _material_mwc_ripple__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material/mwc-ripple */ "./node_modules/@material/mwc-ripple/mwc-ripple.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ "./src/common/entity/compute_state_domain.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");















let HuiEntityButtonCard = class HuiEntityButtonCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-entity-button-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-entity-button-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-entity-button-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-entity-button-card-editor.ts"));
        return document.createElement("hui-entity-button-card-editor");
    }
    static getStubConfig() {
        return {
            tap_action: { action: "toggle" },
            hold_action: { action: "more-info" },
            show_icon: true,
            show_name: true,
        };
    }
    getCardSize() {
        return 2;
    }
    setConfig(config) {
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_6__["isValidEntityId"])(config.entity)) {
            throw new Error("Invalid Entity");
        }
        this._config = Object.assign({ theme: "default", hold_action: { action: "more-info" }, show_icon: true, show_name: true }, config);
        if (_common_const__WEBPACK_IMPORTED_MODULE_14__["DOMAINS_TOGGLE"].has(Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_11__["computeDomain"])(config.entity))) {
            this._config = Object.assign({ tap_action: {
                    action: "toggle",
                } }, this._config);
        }
        else {
            this._config = Object.assign({ tap_action: {
                    action: "more-info",
                } }, this._config);
        }
    }
    shouldUpdate(changedProps) {
        if (changedProps.has("_config")) {
            return true;
        }
        const oldHass = changedProps.get("hass");
        if (oldHass) {
            return (oldHass.states[this._config.entity] !==
                this.hass.states[this._config.entity]);
        }
        return true;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card
        @ha-click="${this._handleTap}"
        @ha-hold="${this._handleHold}"
        .longPress="${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__["longPress"])()}"
      >
        ${this._config.show_icon
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-icon
                data-domain="${Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_8__["computeStateDomain"])(stateObj)}"
                data-state="${stateObj.state}"
                .icon="${this._config.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_7__["stateIcon"])(stateObj)}"
                style="${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__["styleMap"])({
                filter: this._computeBrightness(stateObj),
                color: this._computeColor(stateObj),
                height: this._config.icon_height
                    ? this._config.icon_height
                    : "auto",
            })}"
              ></ha-icon>
            `
            : ""}
        ${this._config.show_name
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <span>
                ${this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_9__["computeStateName"])(stateObj)}
              </span>
            `
            : ""}
        <mwc-ripple></mwc-ripple>
      </ha-card>
    `;
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (!this._config || !this.hass) {
            return;
        }
        const oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_10__["default"])(this, this.hass.themes, this._config.theme);
        }
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-card {
        cursor: pointer;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 4% 0;
        font-size: 1.2rem;
      }

      ha-icon {
        width: 40%;
        height: auto;
        color: var(--paper-item-icon-color, #44739e);
      }

      ha-icon[data-domain="light"][data-state="on"],
      ha-icon[data-domain="switch"][data-state="on"],
      ha-icon[data-domain="binary_sensor"][data-state="on"],
      ha-icon[data-domain="fan"][data-state="on"],
      ha-icon[data-domain="sun"][data-state="above_horizon"] {
        color: var(--paper-item-icon-active-color, #fdd835);
      }

      ha-icon[data-state="unavailable"] {
        color: var(--state-icon-unavailable-color);
      }
    `;
    }
    _computeBrightness(stateObj) {
        if (!stateObj.attributes.brightness) {
            return "";
        }
        const brightness = stateObj.attributes.brightness;
        return `brightness(${(brightness + 245) / 5}%)`;
    }
    _computeColor(stateObj) {
        if (!stateObj.attributes.hs_color) {
            return "";
        }
        const [hue, sat] = stateObj.attributes.hs_color;
        if (sat <= 10) {
            return "";
        }
        return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;
    }
    _handleTap() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, this._config, false);
    }
    _handleHold() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, this._config, true);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiEntityButtonCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiEntityButtonCard.prototype, "_config", void 0);
HuiEntityButtonCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-entity-button-card")
], HuiEntityButtonCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-entity-filter-card.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-entity-filter-card.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_evaluate_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/evaluate-filter */ "./src/panels/lovelace/common/evaluate-filter.ts");



class EntityFilterCard extends HTMLElement {
    getCardSize() {
        return this._element ? this._element.getCardSize() : 1;
    }
    setConfig(config) {
        if (!config.entities || !Array.isArray(config.entities)) {
            throw new Error("entities must be specified.");
        }
        if (!(config.state_filter && Array.isArray(config.state_filter)) &&
            !config.entities.every((entity) => typeof entity === "object" &&
                entity.state_filter &&
                Array.isArray(entity.state_filter))) {
            throw new Error("Incorrect filter config.");
        }
        this._config = config;
        this._configEntities = undefined;
        this._baseCardConfig = Object.assign({ type: "entities", entities: [] }, this._config.card);
        if (this.lastChild) {
            this.removeChild(this.lastChild);
            this._element = undefined;
        }
    }
    set hass(hass) {
        if (!hass || !this._config) {
            return;
        }
        if (!this.haveEntitiesChanged(hass)) {
            this._hass = hass;
            return;
        }
        this._hass = hass;
        if (!this._configEntities) {
            this._configEntities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_1__["processConfigEntities"])(this._config.entities);
        }
        const entitiesList = this._configEntities.filter((entityConf) => {
            const stateObj = hass.states[entityConf.entity];
            if (!stateObj) {
                return false;
            }
            if (entityConf.state_filter) {
                for (const filter of entityConf.state_filter) {
                    if (Object(_common_evaluate_filter__WEBPACK_IMPORTED_MODULE_2__["evaluateFilter"])(stateObj, filter)) {
                        return true;
                    }
                }
            }
            else {
                for (const filter of this._config.state_filter) {
                    if (Object(_common_evaluate_filter__WEBPACK_IMPORTED_MODULE_2__["evaluateFilter"])(stateObj, filter)) {
                        return true;
                    }
                }
            }
            return false;
        });
        if (entitiesList.length === 0 && this._config.show_empty === false) {
            this.style.display = "none";
            return;
        }
        const element = this._cardElement();
        if (!element) {
            return;
        }
        if (element.tagName !== "HUI-ERROR-CARD") {
            const isSame = this._oldEntities &&
                entitiesList.length === this._oldEntities.length &&
                entitiesList.every((entity, idx) => entity === this._oldEntities[idx]);
            if (!isSame) {
                this._oldEntities = entitiesList;
                element.setConfig(Object.assign(Object.assign({}, this._baseCardConfig), { entities: entitiesList }));
            }
            element.isPanel = this.isPanel;
            element.hass = hass;
        }
        // Attach element if it has never been attached.
        if (!this.lastChild) {
            this.appendChild(element);
        }
        this.style.display = "block";
    }
    haveEntitiesChanged(hass) {
        if (!this._hass) {
            return true;
        }
        if (!this._configEntities) {
            return true;
        }
        for (const config of this._configEntities) {
            if (this._hass.states[config.entity] !== hass.states[config.entity] ||
                this._hass.localize !== hass.localize) {
                return true;
            }
        }
        return false;
    }
    _cardElement() {
        if (!this._element && this._config) {
            const element = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_0__["createCardElement"])(this._baseCardConfig);
            this._element = element;
        }
        return this._element;
    }
}
customElements.define("hui-entity-filter-card", EntityFilterCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-error-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-error-card.ts ***!
  \*****************************************************/
/*! exports provided: createErrorCardElement, createErrorCardConfig, HuiErrorCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createErrorCardElement", function() { return createErrorCardElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createErrorCardConfig", function() { return createErrorCardConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiErrorCard", function() { return HuiErrorCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


const createErrorCardElement = (config) => {
    const el = document.createElement("hui-error-card");
    el.setConfig(config);
    return el;
};
const createErrorCardConfig = (error, origConfig) => ({
    type: "error",
    error,
    origConfig,
});
let HuiErrorCard = class HuiErrorCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    getCardSize() {
        return 4;
    }
    setConfig(config) {
        this._config = config;
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      ${this._config.error}
      <pre>${this._toStr(this._config.origConfig)}</pre>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        display: block;
        background-color: #ef5350;
        color: white;
        padding: 8px;
        font-weight: 500;
        user-select: text;
        cursor: default;
      }
    `;
    }
    _toStr(config) {
        return JSON.stringify(config, null, 2);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiErrorCard.prototype, "_config", void 0);
HuiErrorCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-error-card")
], HuiErrorCard);



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-gauge-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-gauge-card.ts ***!
  \*****************************************************/
/*! exports provided: severityMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "severityMap", function() { return severityMap; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");










const severityMap = {
    red: "var(--label-badge-red)",
    green: "var(--label-badge-green)",
    yellow: "var(--label-badge-yellow)",
    normal: "var(--label-badge-blue)",
};
let HuiGaugeCard = class HuiGaugeCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    constructor() {
        super(...arguments);
        this._baseUnit = "50px";
    }
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-gauge-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-gauge-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-gauge-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-gauge-card-editor.ts"));
        return document.createElement("hui-gauge-card-editor");
    }
    static getStubConfig() {
        return { entity: "" };
    }
    getCardSize() {
        return 2;
    }
    setConfig(config) {
        if (!config || !config.entity) {
            throw new Error("Invalid card configuration");
        }
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_5__["isValidEntityId"])(config.entity)) {
            throw new Error("Invalid Entity");
        }
        this._config = Object.assign({ min: 0, max: 100, theme: "default" }, config);
    }
    connectedCallback() {
        super.connectedCallback();
        this._setBaseUnit();
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        const state = Number(stateObj.state);
        if (isNaN(state)) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_non_numeric", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card
        @click="${this._handleClick}"
        style=${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__["styleMap"])({
            "--base-unit": this._baseUnit,
        })}
      >
        <div class="container">
          <div class="gauge-a"></div>
          <div class="gauge-b"></div>
          <div
            class="gauge-c"
            style=${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__["styleMap"])({
            transform: `rotate(${this._translateTurn(state)}turn)`,
            "background-color": this._computeSeverity(state),
        })}
          ></div>
          <div class="gauge-data">
            <div id="percent">
              ${stateObj.state}
              ${this._config.unit ||
            stateObj.attributes.unit_of_measurement ||
            ""}
            </div>
            <div id="name">
              ${this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__["computeStateName"])(stateObj)}
            </div>
          </div>
        </div>
      </ha-card>
    `;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_9__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    firstUpdated() {
        this._updated = true;
        this._setBaseUnit();
        this.classList.add("init");
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (!this._config || !this.hass) {
            return;
        }
        const oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__["default"])(this, this.hass.themes, this._config.theme);
        }
    }
    _setBaseUnit() {
        if (!this.isConnected || !this._updated) {
            return;
        }
        const baseUnit = this._computeBaseUnit();
        if (baseUnit !== "0px") {
            this._baseUnit = baseUnit;
        }
    }
    _computeSeverity(numberValue) {
        const sections = this._config.severity;
        if (!sections) {
            return severityMap.normal;
        }
        const sectionsArray = Object.keys(sections);
        const sortable = sectionsArray.map((severity) => [
            severity,
            sections[severity],
        ]);
        for (const severity of sortable) {
            if (severityMap[severity[0]] == null || isNaN(severity[1])) {
                return severityMap.normal;
            }
        }
        sortable.sort((a, b) => a[1] - b[1]);
        if (numberValue >= sortable[0][1] && numberValue < sortable[1][1]) {
            return severityMap[sortable[0][0]];
        }
        if (numberValue >= sortable[1][1] && numberValue < sortable[2][1]) {
            return severityMap[sortable[1][0]];
        }
        if (numberValue >= sortable[2][1]) {
            return severityMap[sortable[2][0]];
        }
        return severityMap.normal;
    }
    _translateTurn(value) {
        const { min, max } = this._config;
        const maxTurnValue = Math.min(Math.max(value, min), max);
        return (5 * (maxTurnValue - min)) / (max - min) / 10;
    }
    _computeBaseUnit() {
        return this.clientWidth < 200 ? this.clientWidth / 5 + "px" : "50px";
    }
    _handleClick() {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__["fireEvent"])(this, "hass-more-info", { entityId: this._config.entity });
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-card {
        height: calc(var(--base-unit) * 3);
        position: relative;
        cursor: pointer;
      }
      .container {
        width: calc(var(--base-unit) * 4);
        height: calc(var(--base-unit) * 2);
        position: absolute;
        top: calc(var(--base-unit) * 1.5);
        left: 50%;
        overflow: hidden;
        text-align: center;
        transform: translate(-50%, -50%);
      }
      .gauge-a {
        z-index: 1;
        position: absolute;
        background-color: var(--primary-background-color);
        width: calc(var(--base-unit) * 4);
        height: calc(var(--base-unit) * 2);
        top: 0%;
        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)
          0px 0px;
      }
      .gauge-b {
        z-index: 3;
        position: absolute;
        background-color: var(--paper-card-background-color);
        width: calc(var(--base-unit) * 2.5);
        height: calc(var(--base-unit) * 1.25);
        top: calc(var(--base-unit) * 0.75);
        margin-left: calc(var(--base-unit) * 0.75);
        margin-right: auto;
        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)
          0px 0px;
      }
      .gauge-c {
        z-index: 2;
        position: absolute;
        background-color: var(--label-badge-blue);
        width: calc(var(--base-unit) * 4);
        height: calc(var(--base-unit) * 2);
        top: calc(var(--base-unit) * 2);
        margin-left: auto;
        margin-right: auto;
        border-radius: 0px 0px calc(var(--base-unit) * 2)
          calc(var(--base-unit) * 2);
        transform-origin: center top;
      }
      .init .gauge-c {
        transition: all 1.3s ease-in-out;
      }
      .gauge-data {
        z-index: 4;
        color: var(--primary-text-color);
        line-height: calc(var(--base-unit) * 0.3);
        position: absolute;
        width: calc(var(--base-unit) * 4);
        height: calc(var(--base-unit) * 2.1);
        top: calc(var(--base-unit) * 1.2);
        margin-left: auto;
        margin-right: auto;
      }
      .init .gauge-data {
        transition: all 1s ease-out;
      }
      .gauge-data #percent {
        font-size: calc(var(--base-unit) * 0.55);
      }
      .gauge-data #name {
        padding-top: calc(var(--base-unit) * 0.15);
        font-size: calc(var(--base-unit) * 0.3);
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiGaugeCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiGaugeCard.prototype, "_baseUnit", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiGaugeCard.prototype, "_config", void 0);
HuiGaugeCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-gauge-card")
], HuiGaugeCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-glance-card.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-glance-card.ts ***!
  \******************************************************/
/*! exports provided: HuiGlanceCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiGlanceCard", function() { return HuiGlanceCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/datetime/relative_time */ "./src/common/datetime/relative_time.ts");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");














let HuiGlanceCard = class HuiGlanceCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-glance-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-glance-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-glance-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-glance-card-editor.ts"));
        return document.createElement("hui-glance-card-editor");
    }
    static getStubConfig() {
        return { entities: [] };
    }
    getCardSize() {
        return ((this._config.title ? 1 : 0) +
            Math.ceil(this._configEntities.length / 5));
    }
    setConfig(config) {
        this._config = Object.assign({ theme: "default" }, config);
        const entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_12__["processConfigEntities"])(config.entities);
        for (const entity of entities) {
            if ((entity.tap_action &&
                entity.tap_action.action === "call-service" &&
                !entity.tap_action.service) ||
                (entity.hold_action &&
                    entity.hold_action.action === "call-service" &&
                    !entity.hold_action.service)) {
                throw new Error('Missing required property "service" when tap_action or hold_action is call-service');
            }
        }
        const columns = config.columns || Math.min(config.entities.length, 5);
        this.style.setProperty("--glance-column-width", `${100 / columns}%`);
        this._configEntities = entities;
        if (this.hass) {
            this.requestUpdate();
        }
    }
    shouldUpdate(changedProps) {
        if (changedProps.has("_config")) {
            return true;
        }
        const oldHass = changedProps.get("hass");
        if (oldHass && this._configEntities) {
            for (const entity of this._configEntities) {
                if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                    return true;
                }
            }
            return false;
        }
        return true;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const { title } = this._config;
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card .header="${title}">
        <div class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({ entities: true, "no-header": !title })}">
          ${this._configEntities.map((entityConf) => this.renderEntity(entityConf))}
        </div>
      </ha-card>
    `;
    }
    updated(changedProperties) {
        super.updated(changedProperties);
        if (!this._config || !this.hass) {
            return;
        }
        const oldHass = changedProperties.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_4__["default"])(this, this.hass.themes, this._config.theme);
        }
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .entities {
        display: flex;
        padding: 0 16px 4px;
        flex-wrap: wrap;
      }
      .entities.no-header {
        padding-top: 16px;
      }
      .entity {
        box-sizing: border-box;
        padding: 0 4px;
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        margin-bottom: 12px;
        width: var(--glance-column-width, 20%);
      }
      .entity div {
        width: 100%;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .name {
        min-height: var(--paper-font-body1_-_line-height, 20px);
      }
      state-badge {
        margin: 8px 0;
      }
    `;
    }
    renderEntity(entityConf) {
        const stateObj = this.hass.states[entityConf.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning-element
          label=${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", entityConf.entity)}
        ></hui-warning-element>
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <div
        class="entity"
        .entityConf="${entityConf}"
        @ha-click="${this._handleTap}"
        @ha-hold="${this._handleHold}"
        .longPress="${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_11__["longPress"])()}"
      >
        ${this._config.show_name !== false
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div class="name">
                ${"name" in entityConf
                ? entityConf.name
                : Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__["computeStateName"])(stateObj)}
              </div>
            `
            : ""}
        ${this._config.show_icon !== false
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <state-badge
                .hass=${this.hass}
                .stateObj=${stateObj}
                .overrideIcon=${entityConf.icon}
                .overrideImage=${entityConf.image}
              ></state-badge>
            `
            : ""}
        ${this._config.show_state !== false
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div>
                ${entityConf.show_last_changed
                ? Object(_common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__["default"])(new Date(stateObj.last_changed), this.hass.localize)
                : Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)}
              </div>
            `
            : ""}
      </div>
    `;
    }
    _handleTap(ev) {
        const config = ev.currentTarget.entityConf;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, config, false);
    }
    _handleHold(ev) {
        const config = ev.currentTarget.entityConf;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, config, true);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiGlanceCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiGlanceCard.prototype, "_config", void 0);
HuiGlanceCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-glance-card")
], HuiGlanceCard);



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-history-graph-card.js":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-history-graph-card.js ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_state_history_charts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/state-history-charts */ "./src/components/state-history-charts.js");
/* harmony import */ var _data_ha_state_history_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../data/ha-state-history-data */ "./src/data/ha-state-history-data.js");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");









class HuiHistoryGraphCard extends _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__["PolymerElement"] {
  static async getConfigElement() {
    await Promise.all(/*! import() | hui-history-graph-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-history-graph-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-history-graph-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-history-graph-card-editor.ts"));
    return document.createElement("hui-history-graph-card-editor");
  }

  static getStubConfig() {
    return { entities: [] };
  }

  static get template() {
    return _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__["html"]`
      <style>
        .content {
          padding: 16px;
        }
        [header] .content {
          padding-top: 0;
        }
      </style>

      <ha-card header$="[[_config.title]]">
        <div class="content">
          <ha-state-history-data
            hass="[[hass]]"
            filter-type="recent-entity"
            entity-id="[[_entities]]"
            data="{{_stateHistory}}"
            is-loading="{{_stateHistoryLoading}}"
            cache-config="[[_cacheConfig]]"
          ></ha-state-history-data>
          <state-history-charts
            hass="[[hass]]"
            history-data="[[_stateHistory]]"
            is-loading-data="[[_stateHistoryLoading]]"
            names="[[_names]]"
            up-to-now
            no-single
          ></state-history-charts>
        </div>
      </ha-card>
    `;
  }

  static get properties() {
    return {
      hass: Object,
      _config: Object,
      _names: Object,
      _entities: Array,

      _stateHistory: Object,
      _stateHistoryLoading: Boolean,
      _cacheConfig: Object,
    };
  }

  getCardSize() {
    return 4;
  }

  setConfig(config) {
    const entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_5__["processConfigEntities"])(config.entities);

    this._config = config;

    const _entities = [];
    const _names = {};
    entities.forEach((entity) => {
      _entities.push(entity.entity);
      if (entity.name) {
        _names[entity.entity] = entity.name;
      }
    });

    this.setProperties({
      _cacheConfig: {
        cacheKey: _entities.join(),
        hoursToShow: config.hours_to_show || 24,
        refresh: config.refresh_interval || 0,
      },
      _entities,
      _names,
    });
  }
}

customElements.define("hui-history-graph-card", HuiHistoryGraphCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-horizontal-stack-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-horizontal-stack-card.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _hui_stack_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hui-stack-card */ "./src/panels/lovelace/cards/hui-stack-card.ts");



class HuiHorizontalStackCard extends _hui_stack_card__WEBPACK_IMPORTED_MODULE_2__["HuiStackCard"] {
    getCardSize() {
        let totalSize = 0;
        if (this._cards) {
            for (const element of this._cards) {
                const elementSize = Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_1__["computeCardSize"])(element);
                totalSize = elementSize > totalSize ? elementSize : totalSize;
            }
        }
        return totalSize;
    }
    renderStyle() {
        return lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] `
      <style>
        #root {
          display: flex;
        }
        #root > * {
          flex: 1 1 0;
          margin: 0 4px;
          min-width: 0;
        }
        #root > *:first-child {
          margin-left: 0;
        }
        #root > *:last-child {
          margin-right: 0;
        }
      </style>
    `;
    }
}
customElements.define("hui-horizontal-stack-card", HuiHorizontalStackCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-iframe-card.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-iframe-card.ts ***!
  \******************************************************/
/*! exports provided: HuiIframeCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiIframeCard", function() { return HuiIframeCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");




let HuiIframeCard = class HuiIframeCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-iframe-card-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-iframe-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-iframe-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-iframe-card-editor.ts"));
        return document.createElement("hui-iframe-card-editor");
    }
    static getStubConfig() {
        return { url: "https://www.home-assistant.io", aspect_ratio: "50%" };
    }
    getCardSize() {
        if (!this._config) {
            return 3;
        }
        const aspectRatio = this._config.aspect_ratio
            ? Number(this._config.aspect_ratio.replace("%", ""))
            : 50;
        return 1 + aspectRatio / 25;
    }
    setConfig(config) {
        if (!config.url) {
            throw new Error("URL required");
        }
        this._config = config;
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const aspectRatio = this._config.aspect_ratio || "50%";
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card .header="${this._config.title}">
        <div
          id="root"
          style="${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_3__["styleMap"])({
            "padding-top": aspectRatio,
        })}"
        >
          <iframe src="${this._config.url}"></iframe>
        </div>
      </ha-card>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-card {
        overflow: hidden;
      }

      #root {
        width: 100%;
        position: relative;
      }

      iframe {
        position: absolute;
        border: none;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiIframeCard.prototype, "_config", void 0);
HuiIframeCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-iframe-card")
], HuiIframeCard);



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-legacy-wrapper-card.js":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-legacy-wrapper-card.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LegacyWrapperCard; });
/* harmony import */ var _hui_error_card__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");



class LegacyWrapperCard extends HTMLElement {
  constructor(tag, domain) {
    super();
    this._tag = tag.toUpperCase();
    this._domain = domain;
    this._element = null;
  }

  getCardSize() {
    return 3;
  }

  setConfig(config) {
    if (!config.entity) {
      throw new Error("No entity specified");
    }

    if (Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__["computeDomain"])(config.entity) !== this._domain) {
      throw new Error(
        `Specified entity needs to be of domain ${this._domain}.`
      );
    }

    this._config = config;
  }

  set hass(hass) {
    const entityId = this._config.entity;

    if (entityId in hass.states) {
      this._ensureElement(this._tag);
      this.lastChild.hass = hass;
      this.lastChild.stateObj = hass.states[entityId];
      this.lastChild.config = this._config;
    } else {
      this._ensureElement("HUI-ERROR-CARD");
      this.lastChild.setConfig(
        Object(_hui_error_card__WEBPACK_IMPORTED_MODULE_0__["createErrorCardConfig"])(
          `No state available for ${entityId}`,
          this._config
        )
      );
    }
  }

  _ensureElement(tag) {
    if (this.lastChild && this.lastChild.tagName === tag) return;

    if (this.lastChild) {
      this.removeChild(this.lastChild);
    }

    this.appendChild(document.createElement(tag));
  }
}


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-light-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-light-card.ts ***!
  \*****************************************************/
/*! exports provided: HuiLightCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiLightCard", function() { return HuiLightCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _thomasloven_round_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @thomasloven/round-slider */ "./node_modules/@thomasloven/round-slider/src/main.js");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _components_hui_unavailable__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/hui-unavailable */ "./src/panels/lovelace/components/hui-unavailable.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../common/entity/toggle-entity */ "./src/panels/lovelace/common/entity/toggle-entity.ts");
/* harmony import */ var _common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../common/entity/supports-feature */ "./src/common/entity/supports-feature.ts");
/* harmony import */ var _data_light__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../data/light */ "./src/data/light.ts");

















let HuiLightCard = class HuiLightCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-light-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-light-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-light-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-light-card-editor.ts"));
        return document.createElement("hui-light-card-editor");
    }
    static getStubConfig() {
        return { entity: "" };
    }
    getCardSize() {
        return 2;
    }
    setConfig(config) {
        if (!config.entity || config.entity.split(".")[0] !== "light") {
            throw new Error("Specify an entity from within the light domain.");
        }
        this._config = Object.assign({ theme: "default" }, config);
    }
    render() {
        if (!this.hass || !this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        const brightness = Math.round((stateObj.attributes.brightness / 254) * 100) || 0;
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      ${this.renderStyle()}
      <ha-card>
        ${stateObj.state === "unavailable"
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <hui-unavailable
                .text="${this.hass.localize("state.default.unavailable")}"
              ></hui-unavailable>
            `
            : ""}
        <paper-icon-button
          icon="hass:dots-vertical"
          class="more-info"
          @click="${this._handleMoreInfo}"
        ></paper-icon-button>

        <div id="light">
          ${Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_15__["supportsFeature"])(stateObj, _data_light__WEBPACK_IMPORTED_MODULE_16__["SUPPORT_BRIGHTNESS"])
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <round-slider
                  min="1"
                  .value=${brightness}
                  @value-changing=${this._dragEvent}
                  @value-changed=${this._setBrightness}
                ></round-slider>
              `
            : ""}
          <ha-icon
            class="light-icon"
            data-state="${stateObj.state}"
            .icon="${this._config.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_4__["stateIcon"])(stateObj)}"
            style="${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_12__["styleMap"])({
            filter: this._computeBrightness(stateObj),
            color: this._computeColor(stateObj),
        })}"
            @click="${this._handleTap}"
          ></ha-icon>
        </div>

        <div id="tooltip">
          <div class="brightness" @ha-click="${this._handleTap}">
            ${brightness} %
          </div>
          <div class="name">
            ${this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__["computeStateName"])(stateObj)}
          </div>
        </div>
      </ha-card>
    `;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_13__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (!this._config || !this.hass) {
            return;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return;
        }
        const oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__["default"])(this, this.hass.themes, this._config.theme);
        }
    }
    renderStyle() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <style>
        :host {
          display: block;
        }

        ha-card {
          position: relative;
          overflow: hidden;
          --name-font-size: 1.2rem;
          --brightness-font-size: 1.2rem;
          --rail-border-color: transparent;
        }

        #tooltip {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 100%;
          text-align: center;
        }

        #light {
          margin: auto;
          padding-top: 0;
          padding-bottom: 32px;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 160px;
          width: 160px;
        }
        #light round-slider {
          margin: 0 auto;
          display: inline-block;
          --round-slider-path-color: var(--disabled-text-color);
          --round-slider-bar-color: var(--primary-color);
          z-index: 20;
        }

        .light-icon {
          position: absolute;
          margin: 0 auto;
          width: 76px;
          height: 76px;
          color: var(--paper-item-icon-color, #44739e);
          cursor: pointer;
          z-index: 20;
        }

        .light-icon[data-state="on"] {
          color: var(--paper-item-icon-active-color, #fdd835);
        }

        .light-icon[data-state="unavailable"] {
          color: var(--state-icon-unavailable-color);
        }

        .name {
          position: absolute;
          top: 160px;
          left: 50%;
          transform: translate(-50%);
          font-size: var(--name-font-size);
        }

        .brightness {
          font-size: var(--brightness-font-size);
          position: absolute;
          margin: 0 auto;
          top: 135px;
          left: 50%;
          transform: translate(-50%);
          opacity: 0;
          transition: opacity 0.5s ease-in-out;
          -moz-transition: opacity 0.5s ease-in-out;
          -webkit-transition: opacity 0.5s ease-in-out;
          cursor: pointer;
          pointer-events: none;
        }

        .show_brightness {
          opacity: 1;
        }

        .more-info {
          position: absolute;
          cursor: pointer;
          top: 0;
          right: 0;
          z-index: 25;
          color: var(--secondary-text-color);
        }
      </style>
    `;
    }
    _dragEvent(e) {
        this.shadowRoot.querySelector(".brightness").innerHTML =
            e.detail.value + "%";
        this._showBrightness();
        this._hideBrightness();
    }
    _showBrightness() {
        clearTimeout(this._brightnessTimout);
        this.shadowRoot.querySelector(".brightness").classList.add("show_brightness");
    }
    _hideBrightness() {
        this._brightnessTimout = window.setTimeout(() => {
            this.shadowRoot.querySelector(".brightness").classList.remove("show_brightness");
        }, 500);
    }
    _setBrightness(e) {
        this.hass.callService("light", "turn_on", {
            entity_id: this._config.entity,
            brightness_pct: e.detail.value,
        });
    }
    _computeBrightness(stateObj) {
        if (!stateObj.attributes.brightness) {
            return "";
        }
        const brightness = stateObj.attributes.brightness;
        return `brightness(${(brightness + 245) / 5}%)`;
    }
    _computeColor(stateObj) {
        if (!stateObj.attributes.hs_color) {
            return "";
        }
        const [hue, sat] = stateObj.attributes.hs_color;
        if (sat <= 10) {
            return "";
        }
        return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;
    }
    _handleTap() {
        Object(_common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_14__["toggleEntity"])(this.hass, this._config.entity);
    }
    _handleMoreInfo() {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_11__["fireEvent"])(this, "hass-more-info", {
            entityId: this._config.entity,
        });
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiLightCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiLightCard.prototype, "_config", void 0);
HuiLightCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-light-card")
], HuiLightCard);



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-map-card.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-map-card.ts ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _map_ha_entity_marker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../map/ha-entity-marker */ "./src/panels/map/ha-entity-marker.js");
/* harmony import */ var _common_dom_setup_leaflet_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/dom/setup-leaflet-map */ "./src/common/dom/setup-leaflet-map.ts");
/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ "./src/common/entity/compute_state_domain.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/util/debounce */ "./src/common/util/debounce.ts");
/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ "./src/common/util/parse-aspect-ratio.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");












let HuiMapCard = class HuiMapCard extends lit_element__WEBPACK_IMPORTED_MODULE_2__["LitElement"] {
    constructor() {
        super(...arguments);
        this.isPanel = false;
        this._debouncedResizeListener = Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_7__["debounce"])(() => {
            if (!this._leafletMap) {
                return;
            }
            this._leafletMap.invalidateSize();
        }, 100, false);
        this._mapItems = [];
        this._connected = false;
    }
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-map-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-map-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-map-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-map-card-editor.ts"));
        return document.createElement("hui-map-card-editor");
    }
    static getStubConfig() {
        return { entities: [] };
    }
    setConfig(config) {
        if (!config) {
            throw new Error("Error in card configuration.");
        }
        if (!config.entities && !config.geo_location_sources) {
            throw new Error("Either entities or geo_location_sources must be defined");
        }
        if (config.entities && !Array.isArray(config.entities)) {
            throw new Error("Entities need to be an array");
        }
        if (config.geo_location_sources &&
            !Array.isArray(config.geo_location_sources)) {
            throw new Error("Geo_location_sources needs to be an array");
        }
        this._config = config;
        this._configEntities = config.entities
            ? Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__["processConfigEntities"])(config.entities)
            : [];
    }
    getCardSize() {
        if (!this._config) {
            return 3;
        }
        const ratio = Object(_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_8__["default"])(this._config.aspect_ratio);
        const ar = ratio && ratio.w > 0 && ratio.h > 0
            ? `${((100 * ratio.h) / ratio.w).toFixed(2)}`
            : "100";
        return 1 + Math.floor(Number(ar) / 25) || 3;
    }
    connectedCallback() {
        super.connectedCallback();
        this._connected = true;
        if (this.hasUpdated) {
            this.loadMap();
            this._attachObserver();
        }
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        this._connected = false;
        if (this._leafletMap) {
            this._leafletMap.remove();
            this._leafletMap = undefined;
            this.Leaflet = undefined;
        }
        if (this._resizeObserver) {
            this._resizeObserver.unobserve(this._mapEl);
        }
        else {
            window.removeEventListener("resize", this._debouncedResizeListener);
        }
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_2__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_2__["html"] `
      <ha-card id="card" .header=${this._config.title}>
        <div id="root">
          <div
            id="map"
            class=${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_11__["classMap"])({ dark: this._config.dark_mode === true })}
          ></div>
          <paper-icon-button
            @click=${this._fitMap}
            icon="hass:image-filter-center-focus"
            title="Reset focus"
          ></paper-icon-button>
        </div>
      </ha-card>
    `;
    }
    shouldUpdate(changedProps) {
        if (!changedProps.has("hass") || changedProps.size > 1) {
            return true;
        }
        const oldHass = changedProps.get("hass");
        if (!oldHass || !this._configEntities) {
            return true;
        }
        // Check if any state has changed
        for (const entity of this._configEntities) {
            if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                return true;
            }
        }
        return false;
    }
    firstUpdated(changedProps) {
        super.firstUpdated(changedProps);
        this.loadMap();
        const root = this.shadowRoot.getElementById("root");
        if (!this._config || this.isPanel || !root) {
            return;
        }
        if (this._connected) {
            this._attachObserver();
        }
        const ratio = Object(_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_8__["default"])(this._config.aspect_ratio);
        root.style.paddingBottom =
            ratio && ratio.w > 0 && ratio.h > 0
                ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`
                : (root.style.paddingBottom = "100%");
    }
    updated(changedProps) {
        if (changedProps.has("hass")) {
            this._drawEntities();
        }
        if (changedProps.has("_config") &&
            changedProps.get("_config") !== undefined) {
            this.updateMap(changedProps.get("_config"));
        }
    }
    get _mapEl() {
        return this.shadowRoot.getElementById("map");
    }
    async loadMap() {
        [this._leafletMap, this.Leaflet] = await Object(_common_dom_setup_leaflet_map__WEBPACK_IMPORTED_MODULE_4__["setupLeafletMap"])(this._mapEl, this._config !== undefined ? this._config.dark_mode === true : false);
        this._drawEntities();
        this._leafletMap.invalidateSize();
        this._fitMap();
    }
    updateMap(oldConfig) {
        const map = this._leafletMap;
        const config = this._config;
        const Leaflet = this.Leaflet;
        if (!map || !config || !Leaflet) {
            return;
        }
        if (config.dark_mode !== oldConfig.dark_mode) {
            Object(_common_dom_setup_leaflet_map__WEBPACK_IMPORTED_MODULE_4__["createTileLayer"])(Leaflet, config.dark_mode === true).addTo(map);
        }
        if (config.entities !== oldConfig.entities ||
            config.geo_location_sources !== oldConfig.geo_location_sources) {
            this._drawEntities();
        }
        map.invalidateSize();
        this._fitMap();
    }
    _fitMap() {
        if (!this._leafletMap || !this.Leaflet || !this._config || !this.hass) {
            return;
        }
        const zoom = this._config.default_zoom;
        if (this._mapItems.length === 0) {
            this._leafletMap.setView(new this.Leaflet.LatLng(this.hass.config.latitude, this.hass.config.longitude), zoom || 14);
            return;
        }
        const bounds = this.Leaflet.latLngBounds(this._mapItems ? this._mapItems.map((item) => item.getLatLng()) : []);
        this._leafletMap.fitBounds(bounds.pad(0.5));
        if (zoom && this._leafletMap.getZoom() > zoom) {
            this._leafletMap.setZoom(zoom);
        }
    }
    _drawEntities() {
        const hass = this.hass;
        const map = this._leafletMap;
        const config = this._config;
        const Leaflet = this.Leaflet;
        if (!hass || !map || !config || !Leaflet) {
            return;
        }
        if (this._mapItems) {
            this._mapItems.forEach((marker) => marker.remove());
        }
        const mapItems = (this._mapItems = []);
        const allEntities = this._configEntities.concat();
        // Calculate visible geo location sources
        if (config.geo_location_sources) {
            const includesAll = config.geo_location_sources.includes("all");
            for (const entityId of Object.keys(hass.states)) {
                const stateObj = hass.states[entityId];
                if (Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__["computeDomain"])(entityId) === "geo_location" &&
                    (includesAll ||
                        config.geo_location_sources.includes(stateObj.attributes.source))) {
                    allEntities.push({ entity: entityId });
                }
            }
        }
        for (const entity of allEntities) {
            const entityId = entity.entity;
            const stateObj = hass.states[entityId];
            if (!stateObj) {
                continue;
            }
            const title = Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__["computeStateName"])(stateObj);
            const { latitude, longitude, passive, icon, radius, entity_picture: entityPicture, gps_accuracy: gpsAccuracy, } = stateObj.attributes;
            if (!(latitude && longitude)) {
                continue;
            }
            if (Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__["computeStateDomain"])(stateObj) === "zone") {
                // DRAW ZONE
                if (passive) {
                    continue;
                }
                // create marker with the icon
                mapItems.push(Leaflet.marker([latitude, longitude], {
                    icon: Leaflet.divIcon({
                        html: icon ? `<ha-icon icon="${icon}"></ha-icon>` : title,
                        iconSize: [24, 24],
                        className: "",
                    }),
                    interactive: false,
                    title,
                }));
                // create circle around it
                mapItems.push(Leaflet.circle([latitude, longitude], {
                    interactive: false,
                    color: "#FF9800",
                    radius,
                }));
                continue;
            }
            // DRAW ENTITY
            // create icon
            const entityName = title
                .split(" ")
                .map((part) => part[0])
                .join("")
                .substr(0, 3);
            // create market with the icon
            mapItems.push(Leaflet.marker([latitude, longitude], {
                icon: Leaflet.divIcon({
                    // Leaflet clones this element before adding it to the map. This messes up
                    // our Polymer object and we can't pass data through. Thus we hack like this.
                    html: `
              <ha-entity-marker
                entity-id="${entityId}"
                entity-name="${entityName}"
                entity-picture="${entityPicture || ""}"
              ></ha-entity-marker>
            `,
                    iconSize: [48, 48],
                    className: "",
                }),
                title: Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__["computeStateName"])(stateObj),
            }));
            // create circle around if entity has accuracy
            if (gpsAccuracy) {
                mapItems.push(Leaflet.circle([latitude, longitude], {
                    interactive: false,
                    color: "#0288D1",
                    radius: gpsAccuracy,
                }));
            }
        }
        this._mapItems.forEach((marker) => map.addLayer(marker));
    }
    _attachObserver() {
        // Observe changes to map size and invalidate to prevent broken rendering
        // Uses ResizeObserver in Chrome, otherwise window resize event
        // @ts-ignore
        if (typeof ResizeObserver === "function") {
            // @ts-ignore
            this._resizeObserver = new ResizeObserver(() => this._debouncedResizeListener());
            this._resizeObserver.observe(this._mapEl);
        }
        else {
            window.addEventListener("resize", this._debouncedResizeListener);
        }
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_2__["css"] `
      :host([ispanel]) ha-card {
        left: 0;
        top: 0;
        width: 100%;
        /**
       * In panel mode we want a full height map. Since parent #view
       * only sets min-height, we need absolute positioning here
       */
        height: 100%;
        position: absolute;
      }

      ha-card {
        overflow: hidden;
      }

      #map {
        z-index: 0;
        border: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fafaf8;
      }

      #map.dark {
        background: #090909;
      }

      paper-icon-button {
        position: absolute;
        top: 75px;
        left: 7px;
      }

      #root {
        position: relative;
      }

      :host([ispanel]) #root {
        height: 100%;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
], HuiMapCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])({ type: Boolean, reflect: true })
], HuiMapCard.prototype, "isPanel", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
], HuiMapCard.prototype, "_config", void 0);
HuiMapCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["customElement"])("hui-map-card")
], HuiMapCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-markdown-card.ts":
/*!********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-markdown-card.ts ***!
  \********************************************************/
/*! exports provided: HuiMarkdownCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiMarkdownCard", function() { return HuiMarkdownCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_markdown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-markdown */ "./src/components/ha-markdown.ts");
/* harmony import */ var _data_ws_templates__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../data/ws-templates */ "./src/data/ws-templates.ts");






let HuiMarkdownCard = class HuiMarkdownCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    constructor() {
        super(...arguments);
        this._content = "";
    }
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-markdown-card-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-markdown-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-markdown-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-markdown-card-editor.ts"));
        return document.createElement("hui-markdown-card-editor");
    }
    static getStubConfig() {
        return {
            content: "The **Markdown** card allows you to write any text. You can style it **bold**, *italicized*, ~strikethrough~ etc. You can do images, links, and more.\n\nFor more information see the [Markdown Cheatsheet](https://commonmark.org/help).",
        };
    }
    getCardSize() {
        return this._config === undefined
            ? 3
            : this._config.card_size === undefined
                ? this._config.content.split("\n").length + (this._config.title ? 1 : 0)
                : this._config.card_size;
    }
    setConfig(config) {
        if (!config.content) {
            throw new Error("Invalid Configuration: Content Required");
        }
        this._config = config;
        this._disconnect().then(() => {
            if (this._hass) {
                this._connect();
            }
        });
    }
    disconnectedCallback() {
        this._disconnect();
    }
    set hass(hass) {
        this._hass = hass;
        this._connect();
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card .header="${this._config.title}">
        <ha-markdown
          class="markdown ${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "no-header": !this._config.title,
        })}"
          .content="${this._content}"
        ></ha-markdown>
      </ha-card>
    `;
    }
    async _connect() {
        if (!this._unsubRenderTemplate && this._hass && this._config) {
            this._unsubRenderTemplate = Object(_data_ws_templates__WEBPACK_IMPORTED_MODULE_5__["subscribeRenderTemplate"])(this._hass.connection, (result) => {
                this._content = result;
            }, {
                template: this._config.content,
                entity_ids: this._config.entity_id,
                variables: { config: this._config },
            });
            this._unsubRenderTemplate.catch(() => {
                this._content = this._config.content;
                this._unsubRenderTemplate = undefined;
            });
        }
    }
    async _disconnect() {
        if (this._unsubRenderTemplate) {
            try {
                const unsub = await this._unsubRenderTemplate;
                this._unsubRenderTemplate = undefined;
                await unsub();
            }
            catch (e) {
                if (e.code === "not_found") {
                    // If we get here, the connection was probably already closed. Ignore.
                }
                else {
                    throw e;
                }
            }
        }
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-markdown {
        display: block;
        padding: 0 16px 16px;
        -ms-user-select: initial;
        -webkit-user-select: initial;
        -moz-user-select: initial;
      }
      .markdown.no-header {
        padding-top: 16px;
      }
      ha-markdown > *:first-child {
        margin-top: 0;
      }
      ha-markdown > *:last-child {
        margin-bottom: 0;
      }
      ha-markdown a {
        color: var(--primary-color);
      }
      ha-markdown img {
        max-width: 100%;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiMarkdownCard.prototype, "_config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiMarkdownCard.prototype, "_content", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiMarkdownCard.prototype, "_unsubRenderTemplate", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiMarkdownCard.prototype, "_hass", void 0);
HuiMarkdownCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-markdown-card")
], HuiMarkdownCard);



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-media-control-card.js":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-media-control-card.js ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _cards_ha_media_player_card__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../cards/ha-media_player-card */ "./src/cards/ha-media_player-card.js");
/* harmony import */ var _hui_legacy_wrapper_card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hui-legacy-wrapper-card */ "./src/panels/lovelace/cards/hui-legacy-wrapper-card.js");




class HuiMediaControlCard extends _hui_legacy_wrapper_card__WEBPACK_IMPORTED_MODULE_1__["default"] {
  static async getConfigElement() {
    await Promise.all(/*! import() | hui-media-control-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-media-control-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-media-control-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-media-control-card-editor.ts"));
    return document.createElement("hui-media-control-card-editor");
  }

  static getStubConfig() {
    return { entity: "" };
  }

  constructor() {
    super("ha-media_player-card", "media_player");
  }
}

customElements.define("hui-media-control-card", HuiMediaControlCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-card.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-card.ts ***!
  \*******************************************************/
/*! exports provided: HuiPictureCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiPictureCard", function() { return HuiPictureCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");






let HuiPictureCard = class HuiPictureCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-picture-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-picture-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-picture-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-picture-card-editor.ts"));
        return document.createElement("hui-picture-card-editor");
    }
    static getStubConfig() {
        return {
            image: "https://www.home-assistant.io/images/merchandise/shirt-frontpage.png",
            tap_action: { action: "none" },
            hold_action: { action: "none" },
        };
    }
    getCardSize() {
        return 3;
    }
    setConfig(config) {
        if (!config || !config.image) {
            throw new Error("Invalid Configuration: 'image' required");
        }
        this._config = config;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card
        @ha-click="${this._handleTap}"
        @ha-hold="${this._handleHold}"
        .longPress="${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__["longPress"])()}"
        class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_3__["classMap"])({
            clickable: Boolean(this._config.tap_action || this._config.hold_action),
        })}"
      >
        <img src="${this.hass.hassUrl(this._config.image)}" />
      </ha-card>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-card {
        overflow: hidden;
      }

      ha-card.clickable {
        cursor: pointer;
      }

      img {
        display: block;
        width: 100%;
      }
    `;
    }
    _handleTap() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, false);
    }
    _handleHold() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, true);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPictureCard.prototype, "_config", void 0);
HuiPictureCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-card")
], HuiPictureCard);



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-elements-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-elements-card.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./picture-elements/create-styled-hui-element */ "./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts");



let HuiPictureElementsCard = class HuiPictureElementsCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    set hass(hass) {
        this._hass = hass;
        for (const el of Array.from(this.shadowRoot.querySelectorAll("#root > *"))) {
            const element = el;
            element.hass = this._hass;
        }
    }
    getCardSize() {
        return 4;
    }
    setConfig(config) {
        if (!config) {
            throw new Error("Invalid Configuration");
        }
        else if (!(config.image || config.camera_image || config.state_image) ||
            (config.state_image && !config.entity)) {
            throw new Error("Invalid Configuration: image required");
        }
        else if (!Array.isArray(config.elements)) {
            throw new Error("Invalid Configuration: elements required");
        }
        this._config = config;
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card .header="${this._config.title}">
        <div id="root">
          <hui-image
            .hass=${this._hass}
            .image=${this._config.image}
            .stateImage=${this._config.state_image}
            .stateFilter=${this._config.state_filter}
            .cameraImage=${this._config.camera_image}
            .cameraView=${this._config.camera_view}
            .entity=${this._config.entity}
            .aspectRatio=${this._config.aspect_ratio}
          ></hui-image>
          ${this._config.elements.map((elementConfig) => {
            const element = Object(_picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_2__["createStyledHuiElement"])(elementConfig);
            element.hass = this._hass;
            return element;
        })}
        </div>
      </ha-card>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      #root {
        position: relative;
      }

      .element {
        position: absolute;
        transform: translate(-50%, -50%);
      }

      ha-card {
        overflow: hidden;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPictureElementsCard.prototype, "_config", void 0);
HuiPictureElementsCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-elements-card")
], HuiPictureElementsCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-entity-card.ts":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-entity-card.ts ***!
  \**************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-image */ "./src/panels/lovelace/components/hui-image.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _data_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../data/entity */ "./src/data/entity.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");













let HuiPictureEntityCard = class HuiPictureEntityCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-picture-entity-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-picture-entity-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-picture-entity-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-picture-entity-card-editor.ts"));
        return document.createElement("hui-picture-entity-card-editor");
    }
    static getStubConfig() {
        return {
            entity: "",
            image: "https://www.home-assistant.io/images/merchandise/shirt-frontpage.png",
        };
    }
    getCardSize() {
        return 3;
    }
    setConfig(config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        if (Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__["computeDomain"])(config.entity) !== "camera" &&
            (!config.image && !config.state_image && !config.camera_image)) {
            throw new Error("No image source configured.");
        }
        this._config = Object.assign({ show_name: true, show_state: true }, config);
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_12__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        const name = this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__["computeStateName"])(stateObj);
        const state = Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_8__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language);
        let footer = "";
        if (this._config.show_name && this._config.show_state) {
            footer = lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <div class="footer both">
          <div>${name}</div>
          <div>${state}</div>
        </div>
      `;
        }
        else if (this._config.show_name) {
            footer = lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <div class="footer">${name}</div>
      `;
        }
        else if (this._config.show_state) {
            footer = lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <div class="footer state">${state}</div>
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card>
        <hui-image
          .hass=${this.hass}
          .image=${this._config.image}
          .stateImage=${this._config.state_image}
          .stateFilter=${this._config.state_filter}
          .cameraImage=${Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__["computeDomain"])(this._config.entity) === "camera"
            ? this._config.entity
            : this._config.camera_image}
          .cameraView=${this._config.camera_view}
          .entity=${this._config.entity}
          .aspectRatio=${this._config.aspect_ratio}
          @ha-click=${this._handleTap}
          @ha-hold=${this._handleHold}
          .longPress=${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_9__["longPress"])()}
          class=${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            clickable: stateObj.state !== _data_entity__WEBPACK_IMPORTED_MODULE_11__["UNAVAILABLE"],
        })}
        ></hui-image>
        ${footer}
      </ha-card>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-card {
        min-height: 75px;
        overflow: hidden;
        position: relative;
      }

      hui-image.clickable {
        cursor: pointer;
      }

      .footer {
        /* start paper-font-common-nowrap style */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        /* end paper-font-common-nowrap style */

        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.3);
        padding: 16px;
        font-size: 16px;
        line-height: 16px;
        color: white;
      }

      .both {
        display: flex;
        justify-content: space-between;
      }

      .state {
        text-align: right;
      }
    `;
    }
    _handleTap() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_10__["handleClick"])(this, this.hass, this._config, false);
    }
    _handleHold() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_10__["handleClick"])(this, this.hass, this._config, true);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPictureEntityCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPictureEntityCard.prototype, "_config", void 0);
HuiPictureEntityCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-entity-card")
], HuiPictureEntityCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-glance-card.ts":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-glance-card.ts ***!
  \**************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_image__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/hui-image */ "./src/panels/lovelace/components/hui-image.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
















const STATES_OFF = new Set(["closed", "locked", "not_home", "off"]);
let HuiPictureGlanceCard = class HuiPictureGlanceCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-picture-glance-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-picture-glance-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-picture-glance-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-picture-glance-card-editor.ts"));
        return document.createElement("hui-picture-glance-card-editor");
    }
    static getStubConfig() {
        return {
            image: "https://www.home-assistant.io/images/merchandise/shirt-frontpage.png",
            entities: [],
        };
    }
    getCardSize() {
        return 3;
    }
    setConfig(config) {
        if (!config ||
            !config.entities ||
            !Array.isArray(config.entities) ||
            !(config.image || config.camera_image || config.state_image) ||
            (config.state_image && !config.entity)) {
            throw new Error("Invalid card configuration");
        }
        const entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_13__["processConfigEntities"])(config.entities);
        this._entitiesDialog = [];
        this._entitiesToggle = [];
        entities.forEach((item) => {
            if (config.force_dialog ||
                !_common_const__WEBPACK_IMPORTED_MODULE_11__["DOMAINS_TOGGLE"].has(Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__["computeDomain"])(item.entity))) {
                this._entitiesDialog.push(item);
            }
            else {
                this._entitiesToggle.push(item);
            }
        });
        this._config = config;
    }
    shouldUpdate(changedProps) {
        if (Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_15__["hasConfigOrEntityChanged"])(this, changedProps)) {
            return true;
        }
        const oldHass = changedProps.get("hass");
        if (this._entitiesDialog) {
            for (const entity of this._entitiesDialog) {
                if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                    return true;
                }
            }
        }
        if (this._entitiesToggle) {
            for (const entity of this._entitiesToggle) {
                if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                    return true;
                }
            }
        }
        return false;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card>
        <hui-image
          class=${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            clickable: Boolean(this._config.tap_action ||
                this._config.hold_action ||
                this._config.camera_image),
        })}
          @ha-click=${this._handleTap}
          @ha-hold=${this._handleHold}
          .longPress=${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__["longPress"])()}
          .config=${this._config}
          .hass=${this.hass}
          .image=${this._config.image}
          .stateImage=${this._config.state_image}
          .stateFilter=${this._config.state_filter}
          .cameraImage=${this._config.camera_image}
          .cameraView=${this._config.camera_view}
          .entity=${this._config.entity}
          .aspectRatio=${this._config.aspect_ratio}
        ></hui-image>
        <div class="box">
          ${this._config.title
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <div class="title">${this._config.title + "hha"}</div>
              `
            : ""}
          <div>
            ${this._entitiesDialog.map((entityConf) => this.renderEntity(entityConf, true))}
          </div>
          <div>
            ${this._entitiesToggle.map((entityConf) => this.renderEntity(entityConf, false))}
          </div>
        </div>
      </ha-card>
    `;
    }
    renderEntity(entityConf, dialog) {
        const stateObj = this.hass.states[entityConf.entity];
        entityConf = Object.assign({ tap_action: { action: dialog ? "more-info" : "toggle" } }, entityConf);
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning-element
          label=${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", entityConf.entity)}
        ></hui-warning-element>
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-icon
        @ha-click=${this._handleTap}
        @ha-hold=${this._handleHold}
        .longPress=${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__["longPress"])()}
        .config=${entityConf}
        class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "state-on": !STATES_OFF.has(stateObj.state),
        })}"
        .icon="${entityConf.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__["stateIcon"])(stateObj)}"
        title="${`
            ${Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__["computeStateName"])(stateObj)} : ${Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)}
          `}"
      ></ha-icon>
    `;
    }
    _handleTap(ev) {
        const config = ev.currentTarget.config;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_14__["handleClick"])(this, this.hass, config, false);
    }
    _handleHold(ev) {
        const config = ev.currentTarget.config;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_14__["handleClick"])(this, this.hass, config, true);
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-card {
        position: relative;
        min-height: 48px;
        overflow: hidden;
      }

      hui-image.clickable {
        cursor: pointer;
      }

      .box {
        /* start paper-font-common-nowrap style */
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        /* end paper-font-common-nowrap style */

        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.3);
        padding: 4px 8px;
        font-size: 16px;
        line-height: 40px;
        color: white;
        display: flex;
        justify-content: space-between;
      }

      .box .title {
        font-weight: 500;
        margin-left: 8px;
      }

      ha-icon {
        cursor: pointer;
        padding: 8px;
        color: #a9a9a9;
      }

      ha-icon.state-on {
        color: white;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPictureGlanceCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPictureGlanceCard.prototype, "_config", void 0);
HuiPictureGlanceCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-glance-card")
], HuiPictureGlanceCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-plant-status-card.ts":
/*!************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-plant-status-card.ts ***!
  \************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







const SENSORS = {
    moisture: "hass:water",
    temperature: "hass:thermometer",
    brightness: "hass:white-balance-sunny",
    conductivity: "hass:emoticon-poop",
    battery: "hass:battery",
};
let HuiPlantStatusCard = class HuiPlantStatusCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-plant-status-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-plant-status-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-plant-status-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-plant-status-card-editor.ts"));
        return document.createElement("hui-plant-status-card-editor");
    }
    static getStubConfig() {
        return { entity: "" };
    }
    getCardSize() {
        return 3;
    }
    setConfig(config) {
        if (!config.entity || config.entity.split(".")[0] !== "plant") {
            throw new Error("Specify an entity from within the plant domain.");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this.hass || !this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card
        class="${stateObj.attributes.entity_picture ? "has-plant-image" : ""}"
      >
        <div
          class="banner"
          style="background-image:url(${stateObj.attributes.entity_picture})"
        >
          <div class="header">
            ${this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__["computeStateName"])(stateObj)}
          </div>
        </div>
        <div class="content">
          ${this.computeAttributes(stateObj).map((item) => lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div
                class="attributes"
                @click="${this._handleMoreInfo}"
                .value="${item}"
              >
                <div>
                  <ha-icon
                    icon="${this.computeIcon(item, stateObj.attributes.battery)}"
                  ></ha-icon>
                </div>
                <div
                  class="${stateObj.attributes.problem.indexOf(item) === -1
            ? ""
            : "problem"}"
                >
                  ${stateObj.attributes[item]}
                </div>
                <div class="uom">
                  ${stateObj.attributes.unit_of_measurement_dict[item] || ""}
                </div>
              </div>
            `)}
        </div>
      </ha-card>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .banner {
        display: flex;
        align-items: flex-end;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        padding-top: 12px;
      }

      .has-plant-image .banner {
        padding-top: 30%;
      }

      .header {
        /* start paper-font-headline style */
        font-family: "Roboto", "Noto", sans-serif;
        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */
        text-rendering: optimizeLegibility;
        font-size: 24px;
        font-weight: 400;
        letter-spacing: -0.012em;
        /* end paper-font-headline style */

        line-height: 40px;
        padding: 8px 16px;
      }

      .has-plant-image .header {
        font-size: 16px;
        font-weight: 500;
        line-height: 16px;
        padding: 16px;
        color: white;
        width: 100%;
        background: rgba(0, 0, 0, var(--dark-secondary-opacity));
      }

      .content {
        display: flex;
        justify-content: space-between;
        padding: 16px 32px 24px 32px;
      }

      .has-plant-image .content {
        padding-bottom: 16px;
      }

      ha-icon {
        color: var(--paper-item-icon-color);
        margin-bottom: 8px;
      }

      .attributes {
        cursor: pointer;
      }

      .attributes div {
        text-align: center;
      }

      .problem {
        color: var(--google-red-500);
        font-weight: bold;
      }

      .uom {
        color: var(--secondary-text-color);
      }
    `;
    }
    computeAttributes(stateObj) {
        return Object.keys(SENSORS).filter((key) => key in stateObj.attributes);
    }
    computeIcon(attr, batLvl) {
        const icon = SENSORS[attr];
        if (attr === "battery") {
            if (batLvl <= 5) {
                return `${icon}-alert`;
            }
            if (batLvl < 95) {
                return `${icon}-${Math.round(batLvl / 10 - 0.01) * 10}`;
            }
        }
        return icon;
    }
    _handleMoreInfo(ev) {
        const target = ev.currentTarget;
        const stateObj = this.hass.states[this._config.entity];
        if (target.value) {
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_5__["fireEvent"])(this, "hass-more-info", {
                entityId: stateObj.attributes.sensors[target.value],
            });
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPlantStatusCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiPlantStatusCard.prototype, "_config", void 0);
HuiPlantStatusCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-plant-status-card")
], HuiPlantStatusCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-sensor-card.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-sensor-card.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_spinner_paper_spinner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-spinner/paper-spinner */ "./node_modules/@polymer/paper-spinner/paper-spinner.js");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _data_history__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../data/history */ "./src/data/history.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");












const midPoint = (_Ax, _Ay, _Bx, _By) => {
    const _Zx = (_Ax - _Bx) / 2 + _Bx;
    const _Zy = (_Ay - _By) / 2 + _By;
    return [_Zx, _Zy];
};
const getPath = (coords) => {
    let next;
    let Z;
    const X = 0;
    const Y = 1;
    let path = "";
    let last = coords.filter(Boolean)[0];
    path += `M ${last[X]},${last[Y]}`;
    for (const coord of coords) {
        next = coord;
        Z = midPoint(last[X], last[Y], next[X], next[Y]);
        path += ` ${Z[X]},${Z[Y]}`;
        path += ` Q${next[X]},${next[Y]}`;
        last = next;
    }
    path += ` ${next[X]},${next[Y]}`;
    return path;
};
const calcPoints = (history, hours, width, detail, min, max) => {
    const coords = [];
    const margin = 5;
    const height = 80;
    width -= 10;
    let yRatio = (max - min) / height;
    yRatio = yRatio !== 0 ? yRatio : height;
    let xRatio = width / (hours - (detail === 1 ? 1 : 0));
    xRatio = isFinite(xRatio) ? xRatio : width;
    const getCoords = (item, i, offset = 0, depth = 1) => {
        if (depth > 1) {
            return item.forEach((subItem, index) => getCoords(subItem, i, index, depth - 1));
        }
        const average = item.reduce((sum, entry) => sum + parseFloat(entry.state), 0) /
            item.length;
        const x = xRatio * (i + offset / 6) + margin;
        const y = height - (average - min) / yRatio + margin * 2;
        return coords.push([x, y]);
    };
    history.forEach((item, i) => getCoords(item, i, 0, detail));
    if (coords.length === 1) {
        coords[1] = [width + margin, coords[0][1]];
    }
    coords.push([width + margin, coords[coords.length - 1][1]]);
    return coords;
};
const coordinates = (history, hours, width, detail) => {
    history.forEach((item) => (item.state = Number(item.state)));
    history = history.filter((item) => !Number.isNaN(item.state));
    const min = Math.min.apply(Math, history.map((item) => item.state));
    const max = Math.max.apply(Math, history.map((item) => item.state));
    const now = new Date().getTime();
    const reduce = (res, item, point) => {
        const age = now - new Date(item.last_changed).getTime();
        let key = Math.abs(age / (1000 * 3600) - hours);
        if (point) {
            key = (key - Math.floor(key)) * 60;
            key = Number((Math.round(key / 10) * 10).toString()[0]);
        }
        else {
            key = Math.floor(key);
        }
        if (!res[key]) {
            res[key] = [];
        }
        res[key].push(item);
        return res;
    };
    history = history.reduce((res, item) => reduce(res, item, false), []);
    if (detail > 1) {
        history = history.map((entry) => entry.reduce((res, item) => reduce(res, item, true), []));
    }
    return calcPoints(history, hours, width, detail, min, max);
};
let HuiSensorCard = class HuiSensorCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-sensor-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-sensor-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-sensor-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-sensor-card-editor.ts"));
        return document.createElement("hui-sensor-card-editor");
    }
    static getStubConfig() {
        return { entity: "" };
    }
    setConfig(config) {
        if (!config.entity || config.entity.split(".")[0] !== "sensor") {
            throw new Error("Specify an entity from within the sensor domain.");
        }
        const cardConfig = Object.assign({ detail: 1, theme: "default", hours_to_show: 24 }, config);
        cardConfig.hours_to_show = Number(cardConfig.hours_to_show);
        cardConfig.detail =
            cardConfig.detail === 1 || cardConfig.detail === 2
                ? cardConfig.detail
                : 1;
        this._config = cardConfig;
    }
    getCardSize() {
        return 3;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        let graph;
        if (stateObj && this._config.graph === "line") {
            if (!stateObj.attributes.unit_of_measurement) {
                return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
          <hui-warning
            >Entity: ${this._config.entity} - Has no Unit of Measurement and
            therefore can not display a line graph.</hui-warning
          >
        `;
            }
            else if (!this._history) {
                graph = lit_element__WEBPACK_IMPORTED_MODULE_1__["svg"] `
          <svg width="100%" height="100%" viewBox="0 0 500 100"></svg>
        `;
            }
            else {
                graph = lit_element__WEBPACK_IMPORTED_MODULE_1__["svg"] `
          <svg width="100%" height="100%" viewBox="0 0 500 100">
            <path
              d="${this._history}"
              fill="none"
              stroke="var(--accent-color)"
              stroke-width="5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        `;
            }
        }
        else {
            graph = "";
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card @click="${this._handleClick}">
        <div class="flex">
          <div class="icon">
            <ha-icon
              .icon="${this._config.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__["stateIcon"])(stateObj)}"
            ></ha-icon>
          </div>
          <div class="header">
            <span class="name"
              >${this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__["computeStateName"])(stateObj)}</span
            >
          </div>
        </div>
        <div class="flex info">
          <span id="value">${stateObj.state}</span>
          <span id="measurement"
            >${this._config.unit ||
            stateObj.attributes.unit_of_measurement}</span
          >
        </div>
        <div class="graph"><div>${graph}</div></div>
      </ha-card>
    `;
    }
    firstUpdated() {
        this._date = new Date();
    }
    shouldUpdate(changedProps) {
        if (changedProps.has("_history")) {
            return true;
        }
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_11__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (!this._config || this._config.graph !== "line" || !this.hass) {
            return;
        }
        const oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_3__["default"])(this, this.hass.themes, this._config.theme);
        }
        const minute = 60000;
        if (changedProps.has("_config")) {
            this._getHistory();
        }
        else if (Date.now() - this._date.getTime() >= minute) {
            this._getHistory();
        }
    }
    _handleClick() {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_9__["fireEvent"])(this, "hass-more-info", { entityId: this._config.entity });
    }
    async _getHistory() {
        const endTime = new Date();
        const startTime = new Date();
        startTime.setHours(endTime.getHours() - this._config.hours_to_show);
        const stateHistory = await Object(_data_history__WEBPACK_IMPORTED_MODULE_10__["fetchRecent"])(this.hass, this._config.entity, startTime, endTime);
        if (stateHistory.length < 1 || stateHistory[0].length < 1) {
            return;
        }
        const coords = coordinates(stateHistory[0], this._config.hours_to_show, 500, this._config.detail);
        this._history = getPath(coords);
        this._date = new Date();
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        display: flex;
        flex-direction: column;
      }

      ha-card {
        display: flex;
        flex-direction: column;
        flex: 1;
        padding: 16px;
        position: relative;
        cursor: pointer;
      }

      .flex {
        display: flex;
      }

      .header {
        align-items: center;
        display: flex;
        min-width: 0;
        opacity: 0.8;
        position: relative;
      }

      .name {
        display: block;
        display: -webkit-box;
        font-size: 1.2rem;
        font-weight: 500;
        max-height: 1.4rem;
        margin-top: 2px;
        opacity: 0.8;
        overflow: hidden;
        text-overflow: ellipsis;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        word-wrap: break-word;
        word-break: break-all;
      }

      .icon {
        color: var(--paper-item-icon-color, #44739e);
        display: inline-block;
        flex: 0 0 40px;
        line-height: 40px;
        position: relative;
        text-align: center;
        width: 40px;
      }

      .info {
        flex-wrap: wrap;
        margin: 16px 0 16px 8px;
      }

      #value {
        display: inline-block;
        font-size: 2rem;
        font-weight: 400;
        line-height: 1em;
        margin-right: 4px;
      }

      #measurement {
        align-self: flex-end;
        display: inline-block;
        font-size: 1.3rem;
        line-height: 1.2em;
        margin-top: 0.1em;
        opacity: 0.6;
        vertical-align: bottom;
      }

      .graph {
        align-self: flex-end;
        margin: auto;
        margin-bottom: 0px;
        position: relative;
        width: 100%;
      }

      .graph > div {
        align-self: flex-end;
        margin: auto 8px;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSensorCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSensorCard.prototype, "_config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSensorCard.prototype, "_history", void 0);
HuiSensorCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-sensor-card")
], HuiSensorCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-shopping-list-card.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-shopping-list-card.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_repeat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/repeat */ "./node_modules/lit-html/directives/repeat.js");
/* harmony import */ var _polymer_paper_checkbox_paper_checkbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/paper-checkbox/paper-checkbox */ "./node_modules/@polymer/paper-checkbox/paper-checkbox.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _data_shopping_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/shopping-list */ "./src/data/shopping-list.ts");







let HuiShoppingListCard = class HuiShoppingListCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-shopping-list-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-shopping-list-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-shopping-list-editor */ "./src/panels/lovelace/editor/config-elements/hui-shopping-list-editor.ts"));
        return document.createElement("hui-shopping-list-card-editor");
    }
    static getStubConfig() {
        return {};
    }
    getCardSize() {
        return (this._config ? (this._config.title ? 1 : 0) : 0) + 3;
    }
    setConfig(config) {
        this._config = config;
        this._uncheckedItems = [];
        this._checkedItems = [];
        this._fetchData();
    }
    connectedCallback() {
        super.connectedCallback();
        if (this.hass) {
            this._unsubEvents = this.hass.connection.subscribeEvents(() => this._fetchData(), "shopping_list_updated");
            this._fetchData();
        }
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        if (this._unsubEvents) {
            this._unsubEvents.then((unsub) => unsub());
        }
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card .header="${this._config.title}">
        <div class="addRow">
          <ha-icon
            class="addButton"
            @click="${this._addItem}"
            icon="hass:plus"
            .title="${this.hass.localize("ui.panel.lovelace.cards.shopping-list.add_item")}"
          >
          </ha-icon>
          <paper-item-body>
            <paper-input
              no-label-float
              class="addBox"
              placeholder="${this.hass.localize("ui.panel.lovelace.cards.shopping-list.add_item")}"
              @keydown="${this._addKeyPress}"
            ></paper-input>
          </paper-item-body>
        </div>
        ${Object(lit_html_directives_repeat__WEBPACK_IMPORTED_MODULE_2__["repeat"])(this._uncheckedItems, (item) => item.id, (item, index) => lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div class="editRow">
                <paper-checkbox
                  slot="item-icon"
                  id="${index}"
                  ?checked="${item.complete}"
                  .itemId="${item.id}"
                  @click="${this._completeItem}"
                  tabindex="0"
                ></paper-checkbox>
                <paper-item-body>
                  <paper-input
                    no-label-float
                    .value="${item.name}"
                    .itemId="${item.id}"
                    @change="${this._saveEdit}"
                  ></paper-input>
                </paper-item-body>
              </div>
            `)}
        ${this._checkedItems.length > 0
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div class="divider"></div>
              <div class="checked">
                <span class="label">
                  ${this.hass.localize("ui.panel.lovelace.cards.shopping-list.checked_items")}
                </span>
                <ha-icon
                  class="clearall"
                  @click="${this._clearItems}"
                  icon="hass:notification-clear-all"
                  .title="${this.hass.localize("ui.panel.lovelace.cards.shopping-list.clear_items")}"
                >
                </ha-icon>
              </div>
              ${Object(lit_html_directives_repeat__WEBPACK_IMPORTED_MODULE_2__["repeat"])(this._checkedItems, (item) => item.id, (item, index) => lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                    <div class="editRow">
                      <paper-checkbox
                        slot="item-icon"
                        id="${index}"
                        ?checked="${item.complete}"
                        .itemId="${item.id}"
                        @click="${this._completeItem}"
                        tabindex="0"
                      ></paper-checkbox>
                      <paper-item-body>
                        <paper-input
                          no-label-float
                          .value="${item.name}"
                          .itemId="${item.id}"
                          @change="${this._saveEdit}"
                        ></paper-input>
                      </paper-item-body>
                    </div>
                  `)}
            `
            : ""}
      </ha-card>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .editRow,
      .addRow {
        display: flex;
        flex-direction: row;
      }

      .addButton {
        padding: 9px 15px 11px 15px;
        cursor: pointer;
      }

      paper-item-body {
        width: 75%;
      }

      paper-checkbox {
        padding: 11px 11px 11px 18px;
      }

      paper-input {
        --paper-input-container-underline: {
          display: none;
        }
        --paper-input-container-underline-focus: {
          display: none;
        }
        --paper-input-container-underline-disabled: {
          display: none;
        }
        position: relative;
        top: 1px;
      }

      .checked {
        margin-left: 17px;
        margin-bottom: 11px;
        margin-top: 11px;
      }

      .label {
        color: var(--primary-color);
      }

      .divider {
        height: 1px;
        background-color: var(--divider-color);
        margin: 10px;
      }

      .clearall {
        cursor: pointer;
        margin-bottom: 3px;
        float: right;
        padding-right: 10px;
      }

      .addRow > ha-icon {
        color: var(--secondary-text-color);
      }
    `;
    }
    async _fetchData() {
        if (this.hass) {
            const checkedItems = [];
            const uncheckedItems = [];
            const items = await Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["fetchItems"])(this.hass);
            for (const key in items) {
                if (items[key].complete) {
                    checkedItems.push(items[key]);
                }
                else {
                    uncheckedItems.push(items[key]);
                }
            }
            this._checkedItems = checkedItems;
            this._uncheckedItems = uncheckedItems;
        }
    }
    _completeItem(ev) {
        Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["updateItem"])(this.hass, ev.target.itemId, {
            complete: ev.target.checked,
        }).catch(() => this._fetchData());
    }
    _saveEdit(ev) {
        Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["updateItem"])(this.hass, ev.target.itemId, {
            name: ev.target.value,
        }).catch(() => this._fetchData());
        ev.target.blur();
    }
    _clearItems() {
        if (this.hass) {
            Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["clearItems"])(this.hass).catch(() => this._fetchData());
        }
    }
    get _newItem() {
        return this.shadowRoot.querySelector(".addBox");
    }
    _addItem(ev) {
        const newItem = this._newItem;
        if (newItem.value.length > 0) {
            Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["addItem"])(this.hass, newItem.value).catch(() => this._fetchData());
        }
        newItem.value = "";
        if (ev) {
            newItem.focus();
        }
    }
    _addKeyPress(ev) {
        if (ev.keyCode === 13) {
            this._addItem(null);
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiShoppingListCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiShoppingListCard.prototype, "_config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiShoppingListCard.prototype, "_uncheckedItems", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiShoppingListCard.prototype, "_checkedItems", void 0);
HuiShoppingListCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-shopping-list-card")
], HuiShoppingListCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-stack-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-stack-card.ts ***!
  \*****************************************************/
/*! exports provided: HuiStackCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiStackCard", function() { return HuiStackCard; });
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");


class HuiStackCard extends lit_element__WEBPACK_IMPORTED_MODULE_0__["LitElement"] {
    static get properties() {
        return {
            _config: {},
        };
    }
    set hass(hass) {
        this._hass = hass;
        if (!this._cards) {
            return;
        }
        for (const element of this._cards) {
            element.hass = this._hass;
        }
    }
    setConfig(config) {
        if (!config || !config.cards || !Array.isArray(config.cards)) {
            throw new Error("Card config incorrect");
        }
        this._config = config;
        this._cards = config.cards.map((card) => {
            const element = this._createCardElement(card);
            return element;
        });
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] `
      ${this.renderStyle()}
      ${this._config.title
            ? lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] `
            <div class="card-header">${this._config.title}</div>
          `
            : ""}
      <div id="root">${this._cards}</div>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_0__["css"] `
      .card-header {
        color: var(--ha-card-header-color, --primary-text-color);
        font-family: var(--ha-card-header-font-family, inherit);
        font-size: var(--ha-card-header-font-size, 24px);
        letter-spacing: -0.012em;
        line-height: 32px;
        display: block;
        padding: 24px 16px 16px;
      }
    `;
    }
    _createCardElement(cardConfig) {
        const element = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_1__["createCardElement"])(cardConfig);
        if (this._hass) {
            element.hass = this._hass;
        }
        element.addEventListener("ll-rebuild", (ev) => {
            ev.stopPropagation();
            this._rebuildCard(element, cardConfig);
        }, { once: true });
        return element;
    }
    _rebuildCard(cardElToReplace, config) {
        const newCardEl = this._createCardElement(config);
        cardElToReplace.parentElement.replaceChild(newCardEl, cardElToReplace);
        this._cards = this._cards.map((curCardEl) => curCardEl === cardElToReplace ? newCardEl : curCardEl);
    }
}


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-thermostat-card.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-thermostat-card.ts ***!
  \**********************************************************/
/*! exports provided: HuiThermostatCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiThermostatCard", function() { return HuiThermostatCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _resources_jquery_roundslider_ondemand__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../resources/jquery.roundslider.ondemand */ "./src/resources/jquery.roundslider.ondemand.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _data_climate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../data/climate */ "./src/data/climate.ts");














const thermostatConfig = {
    radius: 150,
    circleShape: "pie",
    startAngle: 315,
    width: 5,
    lineCap: "round",
    handleSize: "+10",
    showTooltip: false,
    animation: false,
};
const modeIcons = {
    auto: "hass:calendar-repeat",
    heat_cool: "hass:autorenew",
    heat: "hass:fire",
    cool: "hass:snowflake",
    off: "hass:power",
    fan_only: "hass:fan",
    dry: "hass:water-percent",
};
let HuiThermostatCard = class HuiThermostatCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-thermostat-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-thermostat-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-thermostat-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-thermostat-card-editor.ts"));
        return document.createElement("hui-thermostat-card-editor");
    }
    static getStubConfig() {
        return { entity: "" };
    }
    getCardSize() {
        return 4;
    }
    setConfig(config) {
        if (!config.entity || config.entity.split(".")[0] !== "climate") {
            throw new Error("Specify an entity from within the climate domain.");
        }
        this._config = Object.assign({ theme: "default" }, config);
    }
    connectedCallback() {
        super.connectedCallback();
        if (this._updated && !this._loaded) {
            this._initialLoad();
        }
    }
    render() {
        if (!this.hass || !this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        const mode = stateObj.state in modeIcons ? stateObj.state : "unknown-mode";
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      ${this.renderStyle()}
      <ha-card
        class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            [mode]: true,
            large: this._broadCard,
            small: !this._broadCard,
        })}"
      >
        <div id="root">
          <paper-icon-button
            icon="hass:dots-vertical"
            class="more-info"
            @click="${this._handleMoreInfo}"
          ></paper-icon-button>
          <div id="thermostat"></div>
          <div id="tooltip">
            <div class="title">
              ${this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_8__["computeStateName"])(stateObj)}
            </div>
            <div class="current-temperature">
              <span class="current-temperature-text">
                ${stateObj.attributes.current_temperature}
                ${stateObj.attributes.current_temperature
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                      <span class="uom"
                        >${this.hass.config.unit_system.temperature}</span
                      >
                    `
            : ""}
              </span>
            </div>
            <div class="climate-info">
              <div id="set-temperature"></div>
              <div class="current-mode">
                ${stateObj.attributes.hvac_action
            ? this.hass.localize(`state_attributes.climate.hvac_action.${stateObj.attributes.hvac_action}`)
            : this.hass.localize(`state.climate.${stateObj.state}`)}
                ${stateObj.attributes.preset_mode &&
            stateObj.attributes.preset_mode !== _data_climate__WEBPACK_IMPORTED_MODULE_13__["CLIMATE_PRESET_NONE"]
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                      -
                      ${this.hass.localize(`state_attributes.climate.preset_mode.${stateObj.attributes.preset_mode}`) || stateObj.attributes.preset_mode}
                    `
            : ""}
              </div>
              <div class="modes">
                ${(stateObj.attributes.hvac_modes || [])
            .concat()
            .sort(_data_climate__WEBPACK_IMPORTED_MODULE_13__["compareClimateHvacModes"])
            .map((modeItem) => this._renderIcon(modeItem, mode))}
              </div>
            </div>
          </div>
        </div>
      </ha-card>
    `;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_9__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    firstUpdated() {
        this._updated = true;
        if (this.isConnected && !this._loaded) {
            this._initialLoad();
        }
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (!this._config || !this.hass || !changedProps.has("hass")) {
            return;
        }
        const oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_7__["default"])(this, this.hass.themes, this._config.theme);
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return;
        }
        if (this._jQuery &&
            // If jQuery changed, we just rendered in firstUpdated
            !changedProps.has("_jQuery") &&
            (!oldHass || oldHass.states[this._config.entity] !== stateObj)) {
            const [sliderValue, uiValue, sliderType] = this._genSliderValue(stateObj);
            this._jQuery("#thermostat", this.shadowRoot).roundSlider({
                sliderType,
                value: sliderValue,
                disabled: sliderValue === null,
                min: stateObj.attributes.min_temp,
                max: stateObj.attributes.max_temp,
            });
            this._updateSetTemp(uiValue);
        }
    }
    get _stepSize() {
        const stateObj = this.hass.states[this._config.entity];
        if (stateObj.attributes.target_temp_step) {
            return stateObj.attributes.target_temp_step;
        }
        return this.hass.config.unit_system.temperature === _common_const__WEBPACK_IMPORTED_MODULE_11__["UNIT_F"] ? 1 : 0.5;
    }
    async _initialLoad() {
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            // Card will require refresh to work again
            return;
        }
        this._loaded = true;
        await this.updateComplete;
        let radius = this.clientWidth / 3.2;
        this._broadCard = this.clientWidth > 390;
        if (radius === 0) {
            radius = 100;
        }
        this.shadowRoot.querySelector("#thermostat").style.height = radius * 2 + "px";
        const loaded = await Object(_resources_jquery_roundslider_ondemand__WEBPACK_IMPORTED_MODULE_10__["loadRoundslider"])();
        this._roundSliderStyle = loaded.roundSliderStyle;
        this._jQuery = loaded.jQuery;
        const [sliderValue, uiValue, sliderType] = this._genSliderValue(stateObj);
        this._jQuery("#thermostat", this.shadowRoot).roundSlider(Object.assign(Object.assign({}, thermostatConfig), { radius, min: stateObj.attributes.min_temp, max: stateObj.attributes.max_temp, sliderType, change: (value) => this._setTemperature(value), drag: (value) => this._dragEvent(value), value: sliderValue, disabled: sliderValue === null, step: this._stepSize }));
        this._updateSetTemp(uiValue);
    }
    _genSliderValue(stateObj) {
        let sliderType;
        let sliderValue;
        let uiValue;
        if (stateObj.state === "unavailable") {
            sliderType = "min-range";
            sliderValue = null;
            uiValue = this.hass.localize("state.default.unavailable");
        }
        else if (stateObj.attributes.target_temp_low &&
            stateObj.attributes.target_temp_high) {
            sliderType = "range";
            sliderValue = `${stateObj.attributes.target_temp_low}, ${stateObj.attributes.target_temp_high}`;
            uiValue = this.formatTemp([
                String(stateObj.attributes.target_temp_low),
                String(stateObj.attributes.target_temp_high),
            ], false);
        }
        else {
            sliderType = "min-range";
            sliderValue = Number.isFinite(Number(stateObj.attributes.temperature))
                ? stateObj.attributes.temperature
                : null;
            uiValue = sliderValue !== null ? String(sliderValue) : "";
        }
        return [sliderValue, uiValue, sliderType];
    }
    _updateSetTemp(value) {
        this.shadowRoot.querySelector("#set-temperature").innerHTML = value;
    }
    _dragEvent(e) {
        this._updateSetTemp(this.formatTemp(String(e.value).split(","), true));
    }
    _setTemperature(e) {
        const stateObj = this.hass.states[this._config.entity];
        if (stateObj.attributes.target_temp_low &&
            stateObj.attributes.target_temp_high) {
            if (e.handle.index === 1) {
                this.hass.callService("climate", "set_temperature", {
                    entity_id: this._config.entity,
                    target_temp_low: e.handle.value,
                    target_temp_high: stateObj.attributes.target_temp_high,
                });
            }
            else {
                this.hass.callService("climate", "set_temperature", {
                    entity_id: this._config.entity,
                    target_temp_low: stateObj.attributes.target_temp_low,
                    target_temp_high: e.handle.value,
                });
            }
        }
        else {
            this.hass.callService("climate", "set_temperature", {
                entity_id: this._config.entity,
                temperature: e.value,
            });
        }
    }
    _renderIcon(mode, currentMode) {
        if (!modeIcons[mode]) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-icon
        class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({ "selected-icon": currentMode === mode })}"
        .mode="${mode}"
        .icon="${modeIcons[mode]}"
        @click="${this._handleModeClick}"
      ></ha-icon>
    `;
    }
    _handleMoreInfo() {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_12__["fireEvent"])(this, "hass-more-info", {
            entityId: this._config.entity,
        });
    }
    _handleModeClick(e) {
        this.hass.callService("climate", "set_hvac_mode", {
            entity_id: this._config.entity,
            hvac_mode: e.currentTarget.mode,
        });
    }
    formatTemp(temps, spaceStepSize) {
        temps = temps.filter(Boolean);
        // If we are sliding the slider, append 0 to the temperatures if we're
        // having a 0.5 step size, so that the text doesn't jump while sliding
        if (spaceStepSize) {
            const stepSize = this._stepSize;
            temps = temps.map((val) => val.includes(".") || stepSize === 1 ? val : `${val}.0`);
        }
        return temps.join("-");
    }
    renderStyle() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      ${this._roundSliderStyle}
      <style>
        :host {
          display: block;
        }
        ha-card {
          overflow: hidden;
          --rail-border-color: transparent;
          --auto-color: green;
          --eco-color: springgreen;
          --cool-color: #2b9af9;
          --heat-color: #ff8100;
          --manual-color: #44739e;
          --off-color: #8a8a8a;
          --fan_only-color: #8a8a8a;
          --dry-color: #efbd07;
          --idle-color: #8a8a8a;
          --unknown-color: #bac;
        }
        #root {
          position: relative;
          overflow: hidden;
        }
        .auto,
        .heat_cool {
          --mode-color: var(--auto-color);
        }
        .cool {
          --mode-color: var(--cool-color);
        }
        .heat {
          --mode-color: var(--heat-color);
        }
        .manual {
          --mode-color: var(--manual-color);
        }
        .off {
          --mode-color: var(--off-color);
        }
        .fan_only {
          --mode-color: var(--fan_only-color);
        }
        .eco {
          --mode-color: var(--eco-color);
        }
        .dry {
          --mode-color: var(--dry-color);
        }
        .idle {
          --mode-color: var(--idle-color);
        }
        .unknown-mode {
          --mode-color: var(--unknown-color);
        }
        .no-title {
          --title-position-top: 33% !important;
        }
        .large {
          --thermostat-padding-top: 25px;
          --thermostat-margin-bottom: 25px;
          --title-font-size: 28px;
          --title-position-top: 27%;
          --climate-info-position-top: 81%;
          --set-temperature-font-size: 25px;
          --current-temperature-font-size: 71px;
          --current-temperature-position-top: 10%;
          --current-temperature-text-padding-left: 15px;
          --uom-font-size: 20px;
          --uom-margin-left: -18px;
          --current-mode-font-size: 18px;
          --set-temperature-margin-bottom: -5px;
        }
        .small {
          --thermostat-padding-top: 15px;
          --thermostat-margin-bottom: 15px;
          --title-font-size: 18px;
          --title-position-top: 28%;
          --climate-info-position-top: 79%;
          --set-temperature-font-size: 16px;
          --current-temperature-font-size: 25px;
          --current-temperature-position-top: 5%;
          --current-temperature-text-padding-left: 7px;
          --uom-font-size: 12px;
          --uom-margin-left: -5px;
          --current-mode-font-size: 14px;
          --set-temperature-margin-bottom: 0px;
        }
        #thermostat {
          margin: 0 auto var(--thermostat-margin-bottom);
          padding-top: var(--thermostat-padding-top);
        }
        #thermostat .rs-range-color {
          background-color: var(--mode-color, var(--disabled-text-color));
        }
        #thermostat .rs-path-color {
          background-color: var(--disabled-text-color);
        }
        #thermostat .rs-handle {
          background-color: var(--paper-card-background-color, white);
          padding: 10px;
          margin: -10px 0 0 -8px !important;
          border: 2px solid var(--disabled-text-color);
        }
        #thermostat .rs-handle.rs-focus {
          border-color: var(--mode-color, var(--disabled-text-color));
        }
        #thermostat .rs-handle:after {
          border-color: var(--mode-color, var(--disabled-text-color));
          background-color: var(--mode-color, var(--disabled-text-color));
        }
        #thermostat .rs-border {
          border-color: var(--rail-border-color);
        }
        #thermostat .rs-bar.rs-transition.rs-first,
        .rs-bar.rs-transition.rs-second {
          z-index: 20 !important;
        }
        #thermostat .rs-readonly {
          z-index: 10;
          top: auto;
        }
        #thermostat .rs-inner.rs-bg-color.rs-border,
        #thermostat .rs-overlay.rs-transition.rs-bg-color {
          background-color: var(--paper-card-background-color, white);
        }
        #tooltip {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 100%;
          text-align: center;
          z-index: 15;
          color: var(--primary-text-color);
        }
        #set-temperature {
          font-size: var(--set-temperature-font-size);
          margin-bottom: var(--set-temperature-margin-bottom);
          min-height: 1.2em;
        }
        .title {
          font-size: var(--title-font-size);
          position: absolute;
          top: var(--title-position-top);
          left: 50%;
          transform: translate(-50%, -50%);
        }
        .climate-info {
          position: absolute;
          top: var(--climate-info-position-top);
          left: 50%;
          transform: translate(-50%, -50%);
          width: 100%;
        }
        .current-mode {
          font-size: var(--current-mode-font-size);
          color: var(--secondary-text-color);
        }
        .modes {
          margin-top: 16px;
        }
        .modes ha-icon {
          color: var(--disabled-text-color);
          cursor: pointer;
          display: inline-block;
          margin: 0 10px;
        }
        .modes ha-icon.selected-icon {
          color: var(--mode-color);
        }
        .current-temperature {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: var(--current-temperature-font-size);
        }
        .current-temperature-text {
          padding-left: var(--current-temperature-text-padding-left);
        }
        .uom {
          font-size: var(--uom-font-size);
          vertical-align: top;
          margin-left: var(--uom-margin-left);
        }
        .more-info {
          position: absolute;
          cursor: pointer;
          top: 0;
          right: 0;
          z-index: 25;
          color: var(--secondary-text-color);
        }
      </style>
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiThermostatCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiThermostatCard.prototype, "_config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiThermostatCard.prototype, "_roundSliderStyle", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiThermostatCard.prototype, "_jQuery", void 0);
HuiThermostatCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-thermostat-card")
], HuiThermostatCard);



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-vertical-stack-card.ts":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-vertical-stack-card.ts ***!
  \**************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _hui_stack_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hui-stack-card */ "./src/panels/lovelace/cards/hui-stack-card.ts");



class HuiVerticalStackCard extends _hui_stack_card__WEBPACK_IMPORTED_MODULE_2__["HuiStackCard"] {
    getCardSize() {
        let totalSize = 0;
        if (!this._cards) {
            return totalSize;
        }
        for (const element of this._cards) {
            totalSize += Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_1__["computeCardSize"])(element);
        }
        return totalSize;
    }
    renderStyle() {
        return lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] `
      <style>
        #root {
          display: flex;
          flex-direction: column;
        }
        #root > * {
          margin: 4px 0 4px 0;
        }
        #root > *:first-child {
          margin-top: 0;
        }
        #root > *:last-child {
          margin-bottom: 0;
        }
      </style>
    `;
    }
}
customElements.define("hui-vertical-stack-card", HuiVerticalStackCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-weather-forecast-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-weather-forecast-card.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/dom/toggle_attribute */ "./src/common/dom/toggle_attribute.ts");










const cardinalDirections = [
    "N",
    "NNE",
    "NE",
    "ENE",
    "E",
    "ESE",
    "SE",
    "SSE",
    "S",
    "SSW",
    "SW",
    "WSW",
    "W",
    "WNW",
    "NW",
    "NNW",
    "N",
];
const weatherIcons = {
    "clear-night": "hass:weather-night",
    cloudy: "hass:weather-cloudy",
    exceptional: "hass:alert-circle-outline",
    fog: "hass:weather-fog",
    hail: "hass:weather-hail",
    lightning: "hass:weather-lightning",
    "lightning-rainy": "hass:weather-lightning-rainy",
    partlycloudy: "hass:weather-partly-cloudy",
    pouring: "hass:weather-pouring",
    rainy: "hass:weather-rainy",
    snowy: "hass:weather-snowy",
    "snowy-rainy": "hass:weather-snowy-rainy",
    sunny: "hass:weather-sunny",
    windy: "hass:weather-windy",
    "windy-variant": "hass:weather-windy-variant",
};
let HuiWeatherForecastCard = class HuiWeatherForecastCard extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static async getConfigElement() {
        await Promise.all(/*! import() | hui-weather-forecast-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-weather-forecast-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-weather-forecast-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-weather-forecast-card-editor.ts"));
        return document.createElement("hui-weather-forecast-card-editor");
    }
    static getStubConfig() {
        return { entity: "" };
    }
    getCardSize() {
        return 4;
    }
    setConfig(config) {
        if (!config || !config.entity) {
            throw new Error("Invalid card configuration");
        }
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_4__["isValidEntityId"])(config.entity)) {
            throw new Error("Invalid Entity");
        }
        this._config = config;
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (changedProps.has("hass")) {
            Object(_common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_9__["toggleAttribute"])(this, "rtl", Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__["computeRTL"])(this.hass));
        }
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        const forecast = stateObj.attributes.forecast
            ? stateObj.attributes.forecast.slice(0, 5)
            : undefined;
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-card @click="${this.handleClick}">
        <div class="header">
          ${this.hass.localize(`state.weather.${stateObj.state}`) ||
            stateObj.state}
          <div class="name">
            ${(this._config && this._config.name) || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__["computeStateName"])(stateObj)}
          </div>
        </div>
        <div class="content">
          <div class="now">
            <div class="main">
              ${stateObj.state in weatherIcons
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                    <ha-icon icon="${weatherIcons[stateObj.state]}"></ha-icon>
                  `
            : ""}
              <div class="temp">
                ${stateObj.attributes.temperature}<span
                  >${this.getUnit("temperature")}</span
                >
              </div>
            </div>
            <div class="attributes">
              ${this._showValue(stateObj.attributes.pressure)
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                    <div>
                      ${this.hass.localize("ui.card.weather.attributes.air_pressure")}:
                      <span class="measurand">
                        ${stateObj.attributes.pressure}
                        ${this.getUnit("air_pressure")}
                      </span>
                    </div>
                  `
            : ""}
              ${this._showValue(stateObj.attributes.humidity)
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                    <div>
                      ${this.hass.localize("ui.card.weather.attributes.humidity")}:
                      <span class="measurand"
                        >${stateObj.attributes.humidity} %</span
                      >
                    </div>
                  `
            : ""}
              ${this._showValue(stateObj.attributes.wind_speed)
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                    <div>
                      ${this.hass.localize("ui.card.weather.attributes.wind_speed")}:
                      <span class="measurand">
                        ${stateObj.attributes.wind_speed}
                        ${this.getUnit("length")}/h
                      </span>
                      ${this.getWindBearing(stateObj.attributes.wind_bearing)}
                    </div>
                  `
            : ""}
            </div>
          </div>
          ${forecast
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <div class="forecast">
                  ${forecast.map((item) => lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                      <div>
                        <div class="weekday">
                          ${new Date(item.datetime).toLocaleDateString(this.hass.language, { weekday: "short" })}<br />
                          ${!this._showValue(item.templow)
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                                ${new Date(item.datetime).toLocaleTimeString(this.hass.language, { hour: "numeric" })}
                              `
                : ""}
                        </div>
                        ${this._showValue(item.condition)
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                              <div class="icon">
                                <ha-icon
                                  .icon="${weatherIcons[item.condition]}"
                                ></ha-icon>
                              </div>
                            `
                : ""}
                        ${this._showValue(item.temperature)
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                              <div class="temp">
                                ${item.temperature}
                                ${this.getUnit("temperature")}
                              </div>
                            `
                : ""}
                        ${this._showValue(item.templow)
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                              <div class="templow">
                                ${item.templow} ${this.getUnit("temperature")}
                              </div>
                            `
                : ""}
                        ${this._showValue(item.precipitation)
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                              <div class="precipitation">
                                ${item.precipitation}
                                ${this.getUnit("precipitation")}
                              </div>
                            `
                : ""}
                      </div>
                    `)}
                </div>
              `
            : ""}
        </div>
      </ha-card>
    `;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    handleClick() {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__["fireEvent"])(this, "hass-more-info", { entityId: this._config.entity });
    }
    getUnit(measure) {
        const lengthUnit = this.hass.config.unit_system.length || "";
        switch (measure) {
            case "air_pressure":
                return lengthUnit === "km" ? "hPa" : "inHg";
            case "length":
                return lengthUnit;
            case "precipitation":
                return lengthUnit === "km" ? "mm" : "in";
            default:
                return this.hass.config.unit_system[measure] || "";
        }
    }
    windBearingToText(degree) {
        const degreenum = parseInt(degree, 10);
        if (isFinite(degreenum)) {
            // tslint:disable-next-line: no-bitwise
            return cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];
        }
        return degree;
    }
    getWindBearing(bearing) {
        if (bearing != null) {
            const cardinalDirection = this.windBearingToText(bearing);
            return `(${this.hass.localize(`ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`) || cardinalDirection})`;
        }
        return ``;
    }
    _showValue(item) {
        return typeof item !== "undefined" && item !== null;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        cursor: pointer;
      }

      .content {
        padding: 0 20px 20px;
      }

      ha-icon {
        color: var(--paper-item-icon-color);
      }

      .header {
        font-family: var(--paper-font-headline_-_font-family);
        -webkit-font-smoothing: var(
          --paper-font-headline_-_-webkit-font-smoothing
        );
        font-size: var(--paper-font-headline_-_font-size);
        font-weight: var(--paper-font-headline_-_font-weight);
        letter-spacing: var(--paper-font-headline_-_letter-spacing);
        line-height: var(--paper-font-headline_-_line-height);
        text-rendering: var(
          --paper-font-common-expensive-kerning_-_text-rendering
        );
        opacity: var(--dark-primary-opacity);
        padding: 24px 16px 16px;
        display: flex;
        align-items: baseline;
      }

      .name {
        margin-left: 16px;
        font-size: 16px;
        color: var(--secondary-text-color);
      }

      :host([rtl]) .name {
        margin-left: 0px;
        margin-right: 16px;
      }

      .now {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }

      .main {
        display: flex;
        align-items: center;
        margin-right: 32px;
      }

      :host([rtl]) .main {
        margin-right: 0px;
      }

      .main ha-icon {
        --iron-icon-height: 72px;
        --iron-icon-width: 72px;
        margin-right: 8px;
      }

      :host([rtl]) .main ha-icon {
        margin-right: 0px;
      }

      .main .temp {
        font-size: 52px;
        line-height: 1em;
        position: relative;
      }

      :host([rtl]) .main .temp {
        direction: ltr;
        margin-right: 28px;
      }

      .main .temp span {
        font-size: 24px;
        line-height: 1em;
        position: absolute;
        top: 4px;
      }

      .measurand {
        display: inline-block;
      }

      :host([rtl]) .measurand {
        direction: ltr;
      }

      .forecast {
        margin-top: 16px;
        display: flex;
        justify-content: space-between;
      }

      .forecast div {
        flex: 0 0 auto;
        text-align: center;
      }

      .forecast .icon {
        margin: 4px 0;
        text-align: center;
      }

      :host([rtl]) .forecast .temp {
        direction: ltr;
      }

      .weekday {
        font-weight: bold;
      }

      .attributes,
      .templow,
      .precipitation {
        color: var(--secondary-text-color);
      }

      :host([rtl]) .precipitation {
        direction: ltr;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiWeatherForecastCard.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiWeatherForecastCard.prototype, "_config", void 0);
HuiWeatherForecastCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-weather-forecast-card")
], HuiWeatherForecastCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts":
/*!*********************************************************************************!*\
  !*** ./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts ***!
  \*********************************************************************************/
/*! exports provided: createStyledHuiElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createStyledHuiElement", function() { return createStyledHuiElement; });
/* harmony import */ var _common_create_hui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/create-hui-element */ "./src/panels/lovelace/common/create-hui-element.ts");

function createStyledHuiElement(elementConfig) {
    const element = Object(_common_create_hui_element__WEBPACK_IMPORTED_MODULE_0__["createHuiElement"])(elementConfig);
    // keep conditional card as a transparent container so let its position remain static
    if (element.tagName !== "HUI-CONDITIONAL-ELEMENT") {
        element.classList.add("element");
    }
    if (elementConfig.style) {
        Object.keys(elementConfig.style).forEach((prop) => {
            element.style.setProperty(prop, elementConfig.style[prop]);
        });
    }
    return element;
}


/***/ }),

/***/ "./src/panels/lovelace/common/call-service.ts":
/*!****************************************************!*\
  !*** ./src/panels/lovelace/common/call-service.ts ***!
  \****************************************************/
/*! exports provided: callService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "callService", function() { return callService; });
const callService = (config, hass) => {
    const entityId = config.entity;
    const [domain, service] = config.service.split(".", 2);
    const serviceData = Object.assign({ entity_id: entityId }, config.service_data);
    hass.callService(domain, service, serviceData);
};


/***/ }),

/***/ "./src/panels/lovelace/common/compute-card-size.ts":
/*!*********************************************************!*\
  !*** ./src/panels/lovelace/common/compute-card-size.ts ***!
  \*********************************************************/
/*! exports provided: computeCardSize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeCardSize", function() { return computeCardSize; });
const computeCardSize = (card) => {
    return typeof card.getCardSize === "function" ? card.getCardSize() : 1;
};


/***/ }),

/***/ "./src/panels/lovelace/common/compute-tooltip.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/common/compute-tooltip.ts ***!
  \*******************************************************/
/*! exports provided: computeTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTooltip", function() { return computeTooltip; });
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");

const computeTooltip = (hass, config) => {
    if (config.title === null) {
        return "";
    }
    if (config.title) {
        return config.title;
    }
    let stateName = "";
    let tooltip = "";
    if (config.entity) {
        stateName =
            config.entity in hass.states
                ? Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_0__["computeStateName"])(hass.states[config.entity])
                : config.entity;
    }
    const tapTooltip = config.tap_action
        ? computeActionTooltip(hass, stateName, config.tap_action, false)
        : "";
    const holdTooltip = config.hold_action
        ? computeActionTooltip(hass, stateName, config.hold_action, true)
        : "";
    const newline = tapTooltip && holdTooltip ? "\n" : "";
    tooltip = tapTooltip + newline + holdTooltip;
    return tooltip;
};
function computeActionTooltip(hass, state, config, isHold) {
    if (!config || !config.action || config.action === "none") {
        return "";
    }
    let tooltip = (isHold
        ? hass.localize("ui.panel.lovelace.cards.picture-elements.hold")
        : hass.localize("ui.panel.lovelace.cards.picture-elements.tap")) + " ";
    switch (config.action) {
        case "navigate":
            tooltip += `${hass.localize("ui.panel.lovelace.cards.picture-elements.navigate_to", "location", config.navigation_path)}`;
            break;
        case "url":
            tooltip += `${hass.localize("ui.panel.lovelace.cards.picture-elements.url", "url_path", config.url_path)}`;
            break;
        case "toggle":
            tooltip += `${hass.localize("ui.panel.lovelace.cards.picture-elements.toggle", "name", state)}`;
            break;
        case "call-service":
            tooltip += `${hass.localize("ui.panel.lovelace.cards.picture-elements.call_service", "name", config.service)}`;
            break;
        case "more-info":
            tooltip += `${hass.localize("ui.panel.lovelace.cards.picture-elements.more_info", "name", state)}`;
            break;
    }
    return tooltip;
}


/***/ }),

/***/ "./src/panels/lovelace/common/create-card-element.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/common/create-card-element.ts ***!
  \***********************************************************/
/*! exports provided: createCardElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createCardElement", function() { return createCardElement; });
/* harmony import */ var deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deep-clone-simple */ "./node_modules/deep-clone-simple/index.js");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _cards_hui_alarm_panel_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../cards/hui-alarm-panel-card */ "./src/panels/lovelace/cards/hui-alarm-panel-card.ts");
/* harmony import */ var _cards_hui_conditional_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../cards/hui-conditional-card */ "./src/panels/lovelace/cards/hui-conditional-card.ts");
/* harmony import */ var _cards_hui_entities_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../cards/hui-entities-card */ "./src/panels/lovelace/cards/hui-entities-card.ts");
/* harmony import */ var _cards_hui_entity_button_card__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cards/hui-entity-button-card */ "./src/panels/lovelace/cards/hui-entity-button-card.ts");
/* harmony import */ var _cards_hui_entity_filter_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../cards/hui-entity-filter-card */ "./src/panels/lovelace/cards/hui-entity-filter-card.ts");
/* harmony import */ var _cards_hui_error_card__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../cards/hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");
/* harmony import */ var _cards_hui_glance_card__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../cards/hui-glance-card */ "./src/panels/lovelace/cards/hui-glance-card.ts");
/* harmony import */ var _cards_hui_history_graph_card__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../cards/hui-history-graph-card */ "./src/panels/lovelace/cards/hui-history-graph-card.js");
/* harmony import */ var _cards_hui_horizontal_stack_card__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../cards/hui-horizontal-stack-card */ "./src/panels/lovelace/cards/hui-horizontal-stack-card.ts");
/* harmony import */ var _cards_hui_iframe_card__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../cards/hui-iframe-card */ "./src/panels/lovelace/cards/hui-iframe-card.ts");
/* harmony import */ var _cards_hui_light_card__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../cards/hui-light-card */ "./src/panels/lovelace/cards/hui-light-card.ts");
/* harmony import */ var _cards_hui_map_card__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../cards/hui-map-card */ "./src/panels/lovelace/cards/hui-map-card.ts");
/* harmony import */ var _cards_hui_markdown_card__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../cards/hui-markdown-card */ "./src/panels/lovelace/cards/hui-markdown-card.ts");
/* harmony import */ var _cards_hui_media_control_card__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../cards/hui-media-control-card */ "./src/panels/lovelace/cards/hui-media-control-card.js");
/* harmony import */ var _cards_hui_picture_card__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../cards/hui-picture-card */ "./src/panels/lovelace/cards/hui-picture-card.ts");
/* harmony import */ var _cards_hui_picture_elements_card__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../cards/hui-picture-elements-card */ "./src/panels/lovelace/cards/hui-picture-elements-card.ts");
/* harmony import */ var _cards_hui_picture_entity_card__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../cards/hui-picture-entity-card */ "./src/panels/lovelace/cards/hui-picture-entity-card.ts");
/* harmony import */ var _cards_hui_picture_glance_card__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../cards/hui-picture-glance-card */ "./src/panels/lovelace/cards/hui-picture-glance-card.ts");
/* harmony import */ var _cards_hui_plant_status_card__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../cards/hui-plant-status-card */ "./src/panels/lovelace/cards/hui-plant-status-card.ts");
/* harmony import */ var _cards_hui_sensor_card__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../cards/hui-sensor-card */ "./src/panels/lovelace/cards/hui-sensor-card.ts");
/* harmony import */ var _cards_hui_vertical_stack_card__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../cards/hui-vertical-stack-card */ "./src/panels/lovelace/cards/hui-vertical-stack-card.ts");
/* harmony import */ var _cards_hui_shopping_list_card__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../cards/hui-shopping-list-card */ "./src/panels/lovelace/cards/hui-shopping-list-card.ts");
/* harmony import */ var _cards_hui_thermostat_card__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../cards/hui-thermostat-card */ "./src/panels/lovelace/cards/hui-thermostat-card.ts");
/* harmony import */ var _cards_hui_weather_forecast_card__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../cards/hui-weather-forecast-card */ "./src/panels/lovelace/cards/hui-weather-forecast-card.ts");
/* harmony import */ var _cards_hui_gauge_card__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../cards/hui-gauge-card */ "./src/panels/lovelace/cards/hui-gauge-card.ts");



























const CARD_TYPES = new Set([
    "alarm-panel",
    "conditional",
    "entities",
    "entity-button",
    "entity-filter",
    "error",
    "gauge",
    "glance",
    "history-graph",
    "horizontal-stack",
    "iframe",
    "light",
    "map",
    "markdown",
    "media-control",
    "picture",
    "picture-elements",
    "picture-entity",
    "picture-glance",
    "plant-status",
    "sensor",
    "shopping-list",
    "thermostat",
    "vertical-stack",
    "weather-forecast",
]);
const CUSTOM_TYPE_PREFIX = "custom:";
const TIMEOUT = 2000;
const _createElement = (tag, config) => {
    const element = document.createElement(tag);
    try {
        element.setConfig(Object(deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__["default"])(config));
    }
    catch (err) {
        // tslint:disable-next-line
        console.error(tag, err);
        return _createErrorElement(err.message, config);
    }
    return element;
};
const _createErrorElement = (error, config) => Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_7__["createErrorCardElement"])(Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_7__["createErrorCardConfig"])(error, config));
const createCardElement = (config) => {
    if (!config || typeof config !== "object" || !config.type) {
        return _createErrorElement("No card type configured.", config);
    }
    if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {
        const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);
        if (customElements.get(tag)) {
            return _createElement(tag, config);
        }
        const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);
        element.style.display = "None";
        const timer = window.setTimeout(() => {
            element.style.display = "";
        }, TIMEOUT);
        customElements.whenDefined(tag).then(() => {
            clearTimeout(timer);
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__["fireEvent"])(element, "ll-rebuild");
        });
        return element;
    }
    if (!CARD_TYPES.has(config.type)) {
        return _createErrorElement(`Unknown card type encountered: ${config.type}.`, config);
    }
    return _createElement(`hui-${config.type}-card`, config);
};


/***/ }),

/***/ "./src/panels/lovelace/common/create-hui-element.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/common/create-hui-element.ts ***!
  \**********************************************************/
/*! exports provided: createHuiElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createHuiElement", function() { return createHuiElement; });
/* harmony import */ var deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deep-clone-simple */ "./node_modules/deep-clone-simple/index.js");
/* harmony import */ var _elements_hui_conditional_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../elements/hui-conditional-element */ "./src/panels/lovelace/elements/hui-conditional-element.ts");
/* harmony import */ var _elements_hui_icon_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../elements/hui-icon-element */ "./src/panels/lovelace/elements/hui-icon-element.ts");
/* harmony import */ var _elements_hui_image_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../elements/hui-image-element */ "./src/panels/lovelace/elements/hui-image-element.ts");
/* harmony import */ var _elements_hui_service_button_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../elements/hui-service-button-element */ "./src/panels/lovelace/elements/hui-service-button-element.ts");
/* harmony import */ var _elements_hui_state_badge_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../elements/hui-state-badge-element */ "./src/panels/lovelace/elements/hui-state-badge-element.ts");
/* harmony import */ var _elements_hui_state_icon_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../elements/hui-state-icon-element */ "./src/panels/lovelace/elements/hui-state-icon-element.ts");
/* harmony import */ var _elements_hui_state_label_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../elements/hui-state-label-element */ "./src/panels/lovelace/elements/hui-state-label-element.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _cards_hui_error_card__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../cards/hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");










const CUSTOM_TYPE_PREFIX = "custom:";
const ELEMENT_TYPES = new Set([
    "conditional",
    "icon",
    "image",
    "service-button",
    "state-badge",
    "state-icon",
    "state-label",
]);
const TIMEOUT = 2000;
const _createElement = (tag, config) => {
    const element = document.createElement(tag);
    try {
        element.setConfig(Object(deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__["default"])(config));
    }
    catch (err) {
        // tslint:disable-next-line
        console.error(tag, err);
        return _createErrorElement(err.message, config);
    }
    return element;
};
const _createErrorElement = (error, config) => Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_9__["createErrorCardElement"])(Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_9__["createErrorCardConfig"])(error, config));
function _hideErrorElement(element) {
    element.style.display = "None";
    return window.setTimeout(() => {
        element.style.display = "";
    }, TIMEOUT);
}
const createHuiElement = (config) => {
    if (!config || typeof config !== "object" || !config.type) {
        return _createErrorElement("No element type configured.", config);
    }
    if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {
        const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);
        if (customElements.get(tag)) {
            return _createElement(tag, config);
        }
        const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);
        const timer = _hideErrorElement(element);
        customElements.whenDefined(tag).then(() => {
            clearTimeout(timer);
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__["fireEvent"])(element, "ll-rebuild");
        });
        return element;
    }
    if (!ELEMENT_TYPES.has(config.type)) {
        return _createErrorElement(`Unknown element type encountered: ${config.type}.`, config);
    }
    return _createElement(`hui-${config.type}-element`, config);
};


/***/ }),

/***/ "./src/panels/lovelace/common/create-row-element.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/common/create-row-element.ts ***!
  \**********************************************************/
/*! exports provided: createRowElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRowElement", function() { return createRowElement; });
/* harmony import */ var deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deep-clone-simple */ "./node_modules/deep-clone-simple/index.js");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _cards_hui_error_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../cards/hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");
/* harmony import */ var _entity_rows_hui_climate_entity_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entity-rows/hui-climate-entity-row */ "./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts");
/* harmony import */ var _entity_rows_hui_cover_entity_row__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entity-rows/hui-cover-entity-row */ "./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts");
/* harmony import */ var _entity_rows_hui_group_entity_row__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entity-rows/hui-group-entity-row */ "./src/panels/lovelace/entity-rows/hui-group-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_datetime_entity_row__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entity-rows/hui-input-datetime-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_number_entity_row__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../entity-rows/hui-input-number-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_select_entity_row__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../entity-rows/hui-input-select-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_text_entity_row__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../entity-rows/hui-input-text-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts");
/* harmony import */ var _entity_rows_hui_lock_entity_row__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entity-rows/hui-lock-entity-row */ "./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts");
/* harmony import */ var _entity_rows_hui_media_player_entity_row__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entity-rows/hui-media-player-entity-row */ "./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts");
/* harmony import */ var _entity_rows_hui_scene_entity_row__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entity-rows/hui-scene-entity-row */ "./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts");
/* harmony import */ var _entity_rows_hui_script_entity_row__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entity-rows/hui-script-entity-row */ "./src/panels/lovelace/entity-rows/hui-script-entity-row.ts");
/* harmony import */ var _entity_rows_hui_sensor_entity_row__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../entity-rows/hui-sensor-entity-row */ "./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts");
/* harmony import */ var _entity_rows_hui_text_entity_row__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../entity-rows/hui-text-entity-row */ "./src/panels/lovelace/entity-rows/hui-text-entity-row.ts");
/* harmony import */ var _entity_rows_hui_timer_entity_row__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../entity-rows/hui-timer-entity-row */ "./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts");
/* harmony import */ var _entity_rows_hui_toggle_entity_row__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../entity-rows/hui-toggle-entity-row */ "./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts");
/* harmony import */ var _special_rows_hui_call_service_row__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../special-rows/hui-call-service-row */ "./src/panels/lovelace/special-rows/hui-call-service-row.ts");
/* harmony import */ var _special_rows_hui_divider_row__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../special-rows/hui-divider-row */ "./src/panels/lovelace/special-rows/hui-divider-row.ts");
/* harmony import */ var _special_rows_hui_section_row__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../special-rows/hui-section-row */ "./src/panels/lovelace/special-rows/hui-section-row.ts");
/* harmony import */ var _special_rows_hui_weblink_row__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../special-rows/hui-weblink-row */ "./src/panels/lovelace/special-rows/hui-weblink-row.ts");
/* harmony import */ var _special_rows_hui_cast_row__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../special-rows/hui-cast-row */ "./src/panels/lovelace/special-rows/hui-cast-row.ts");























const CUSTOM_TYPE_PREFIX = "custom:";
const SPECIAL_TYPES = new Set([
    "call-service",
    "divider",
    "section",
    "weblink",
    "cast",
    "select",
]);
const DOMAIN_TO_ELEMENT_TYPE = {
    alert: "toggle",
    automation: "toggle",
    climate: "climate",
    cover: "cover",
    fan: "toggle",
    group: "group",
    input_boolean: "toggle",
    input_number: "input-number",
    input_select: "input-select",
    input_text: "input-text",
    light: "toggle",
    lock: "lock",
    media_player: "media-player",
    remote: "toggle",
    scene: "scene",
    script: "script",
    sensor: "sensor",
    timer: "timer",
    switch: "toggle",
    vacuum: "toggle",
    // Temporary. Once climate is rewritten,
    // water heater should get it's own row.
    water_heater: "climate",
    input_datetime: "input-datetime",
};
const TIMEOUT = 2000;
const _createElement = (tag, config) => {
    const element = document.createElement(tag);
    try {
        element.setConfig(Object(deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__["default"])(config));
    }
    catch (err) {
        // tslint:disable-next-line
        console.error(tag, err);
        return _createErrorElement(err.message, config);
    }
    return element;
};
const _createErrorElement = (error, config) => Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_2__["createErrorCardElement"])(Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_2__["createErrorCardConfig"])(error, config));
const _hideErrorElement = (element) => {
    element.style.display = "None";
    return window.setTimeout(() => {
        element.style.display = "";
    }, TIMEOUT);
};
const createRowElement = (config) => {
    let tag;
    if (!config ||
        typeof config !== "object" ||
        (!config.entity && !config.type)) {
        return _createErrorElement("Invalid config given.", config);
    }
    const type = config.type || "default";
    if (SPECIAL_TYPES.has(type)) {
        return _createElement(`hui-${type}-row`, config);
    }
    if (type.startsWith(CUSTOM_TYPE_PREFIX)) {
        tag = type.substr(CUSTOM_TYPE_PREFIX.length);
        if (customElements.get(tag)) {
            return _createElement(tag, config);
        }
        const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);
        const timer = _hideErrorElement(element);
        customElements.whenDefined(tag).then(() => {
            clearTimeout(timer);
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__["fireEvent"])(element, "ll-rebuild");
        });
        return element;
    }
    if (!config.entity) {
        return _createErrorElement("Invalid config given.", config);
    }
    const domain = config.entity.split(".", 1)[0];
    tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || "text"}-entity-row`;
    return _createElement(tag, config);
};


/***/ }),

/***/ "./src/panels/lovelace/common/directives/long-press-directive.ts":
/*!***********************************************************************!*\
  !*** ./src/panels/lovelace/common/directives/long-press-directive.ts ***!
  \***********************************************************************/
/*! exports provided: longPressBind, longPress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "longPressBind", function() { return longPressBind; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "longPress", function() { return longPress; });
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/lit-html.js");
/* harmony import */ var _material_mwc_ripple__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material/mwc-ripple */ "./node_modules/@material/mwc-ripple/mwc-ripple.js");


const isTouch = "ontouchstart" in window ||
    navigator.maxTouchPoints > 0 ||
    navigator.msMaxTouchPoints > 0;
class LongPress extends HTMLElement {
    constructor() {
        super();
        this.holdTime = 500;
        this.ripple = document.createElement("mwc-ripple");
        this.timer = undefined;
        this.held = false;
        this.cooldownStart = false;
        this.cooldownEnd = false;
    }
    connectedCallback() {
        Object.assign(this.style, {
            position: "absolute",
            width: isTouch ? "100px" : "50px",
            height: isTouch ? "100px" : "50px",
            transform: "translate(-50%, -50%)",
            pointerEvents: "none",
        });
        this.appendChild(this.ripple);
        this.ripple.primary = true;
        [
            "touchcancel",
            "mouseout",
            "mouseup",
            "touchmove",
            "mousewheel",
            "wheel",
            "scroll",
        ].forEach((ev) => {
            document.addEventListener(ev, () => {
                clearTimeout(this.timer);
                this.stopAnimation();
                this.timer = undefined;
            }, { passive: true });
        });
    }
    bind(element) {
        if (element.longPress) {
            return;
        }
        element.longPress = true;
        element.addEventListener("contextmenu", (ev) => {
            const e = ev || window.event;
            if (e.preventDefault) {
                e.preventDefault();
            }
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            e.cancelBubble = true;
            e.returnValue = false;
            return false;
        });
        const clickStart = (ev) => {
            if (this.cooldownStart) {
                return;
            }
            this.held = false;
            let x;
            let y;
            if (ev.touches) {
                x = ev.touches[0].pageX;
                y = ev.touches[0].pageY;
            }
            else {
                x = ev.pageX;
                y = ev.pageY;
            }
            this.timer = window.setTimeout(() => {
                this.startAnimation(x, y);
                this.held = true;
            }, this.holdTime);
            this.cooldownStart = true;
            window.setTimeout(() => (this.cooldownStart = false), 100);
        };
        const clickEnd = (ev) => {
            if (this.cooldownEnd ||
                (["touchend", "touchcancel"].includes(ev.type) &&
                    this.timer === undefined)) {
                return;
            }
            clearTimeout(this.timer);
            this.stopAnimation();
            this.timer = undefined;
            if (this.held) {
                element.dispatchEvent(new Event("ha-hold"));
            }
            else {
                element.dispatchEvent(new Event("ha-click"));
            }
            this.cooldownEnd = true;
            window.setTimeout(() => (this.cooldownEnd = false), 100);
        };
        element.addEventListener("touchstart", clickStart, { passive: true });
        element.addEventListener("touchend", clickEnd);
        element.addEventListener("touchcancel", clickEnd);
        // iOS 13 sends a complete normal touchstart-touchend series of events followed by a mousedown-click series.
        // That might be a bug, but until it's fixed, this should make long-press work.
        // If it's not a bug that is fixed, this might need updating with the next iOS version.
        // Note that all events (both touch and mouse) must be listened for in order to work on computers with both mouse and touchscreen.
        const isIOS13 = window.navigator.userAgent.match(/iPhone OS 13_/);
        if (!isIOS13) {
            element.addEventListener("mousedown", clickStart, { passive: true });
            element.addEventListener("click", clickEnd);
        }
    }
    startAnimation(x, y) {
        Object.assign(this.style, {
            left: `${x}px`,
            top: `${y}px`,
            display: null,
        });
        this.ripple.disabled = false;
        this.ripple.active = true;
        this.ripple.unbounded = true;
    }
    stopAnimation() {
        this.ripple.active = false;
        this.ripple.disabled = true;
        this.style.display = "none";
    }
}
customElements.define("long-press", LongPress);
const getLongPress = () => {
    const body = document.body;
    if (body.querySelector("long-press")) {
        return body.querySelector("long-press");
    }
    const longpress = document.createElement("long-press");
    body.appendChild(longpress);
    return longpress;
};
const longPressBind = (element) => {
    const longpress = getLongPress();
    if (!longpress) {
        return;
    }
    longpress.bind(element);
};
const longPress = Object(lit_html__WEBPACK_IMPORTED_MODULE_0__["directive"])(() => (part) => {
    longPressBind(part.committer.element);
});


/***/ }),

/***/ "./src/panels/lovelace/common/entity/toggle-entity.ts":
/*!************************************************************!*\
  !*** ./src/panels/lovelace/common/entity/toggle-entity.ts ***!
  \************************************************************/
/*! exports provided: toggleEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toggleEntity", function() { return toggleEntity; });
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _turn_on_off_entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./turn-on-off-entity */ "./src/panels/lovelace/common/entity/turn-on-off-entity.ts");


const toggleEntity = (hass, entityId) => {
    const turnOn = _common_const__WEBPACK_IMPORTED_MODULE_0__["STATES_OFF"].includes(hass.states[entityId].state);
    return Object(_turn_on_off_entity__WEBPACK_IMPORTED_MODULE_1__["turnOnOffEntity"])(hass, entityId, turnOn);
};


/***/ }),

/***/ "./src/panels/lovelace/common/entity/turn-on-off-entities.ts":
/*!*******************************************************************!*\
  !*** ./src/panels/lovelace/common/entity/turn-on-off-entities.ts ***!
  \*******************************************************************/
/*! exports provided: turnOnOffEntities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "turnOnOffEntities", function() { return turnOnOffEntities; });
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../common/const */ "./src/common/const.ts");


const turnOnOffEntities = (hass, entityIds, turnOn = true) => {
    const domainsToCall = {};
    entityIds.forEach((entityId) => {
        if (_common_const__WEBPACK_IMPORTED_MODULE_1__["STATES_OFF"].includes(hass.states[entityId].state) === turnOn) {
            const stateDomain = Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__["computeDomain"])(entityId);
            const serviceDomain = ["cover", "lock"].includes(stateDomain)
                ? stateDomain
                : "homeassistant";
            if (!(serviceDomain in domainsToCall)) {
                domainsToCall[serviceDomain] = [];
            }
            domainsToCall[serviceDomain].push(entityId);
        }
    });
    Object.keys(domainsToCall).forEach((domain) => {
        let service;
        switch (domain) {
            case "lock":
                service = turnOn ? "unlock" : "lock";
                break;
            case "cover":
                service = turnOn ? "open_cover" : "close_cover";
                break;
            default:
                service = turnOn ? "turn_on" : "turn_off";
        }
        const entities = domainsToCall[domain];
        hass.callService(domain, service, { entity_id: entities });
    });
};


/***/ }),

/***/ "./src/panels/lovelace/common/entity/turn-on-off-entity.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/common/entity/turn-on-off-entity.ts ***!
  \*****************************************************************/
/*! exports provided: turnOnOffEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "turnOnOffEntity", function() { return turnOnOffEntity; });
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");

const turnOnOffEntity = (hass, entityId, turnOn = true) => {
    const stateDomain = Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__["computeDomain"])(entityId);
    const serviceDomain = stateDomain === "group" ? "homeassistant" : stateDomain;
    let service;
    switch (stateDomain) {
        case "lock":
            service = turnOn ? "unlock" : "lock";
            break;
        case "cover":
            service = turnOn ? "open_cover" : "close_cover";
            break;
        default:
            service = turnOn ? "turn_on" : "turn_off";
    }
    return hass.callService(serviceDomain, service, { entity_id: entityId });
};


/***/ }),

/***/ "./src/panels/lovelace/common/evaluate-filter.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/common/evaluate-filter.ts ***!
  \*******************************************************/
/*! exports provided: evaluateFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "evaluateFilter", function() { return evaluateFilter; });
const evaluateFilter = (stateObj, filter) => {
    const operator = filter.operator || "==";
    const value = filter.value || filter;
    const state = filter.attribute
        ? stateObj.attributes[filter.attribute]
        : stateObj.state;
    switch (operator) {
        case "==":
            return state === value;
        case "<=":
            return state <= value;
        case "<":
            return state < value;
        case ">=":
            return state >= value;
        case ">":
            return state > value;
        case "!=":
            return state !== value;
        case "regex": {
            return state.match(value);
        }
        default:
            return false;
    }
};


/***/ }),

/***/ "./src/panels/lovelace/common/generate-lovelace-config.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/common/generate-lovelace-config.ts ***!
  \****************************************************************/
/*! exports provided: generateDefaultViewConfig, generateLovelaceConfigFromHass, generateLovelaceConfigFromData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateDefaultViewConfig", function() { return generateDefaultViewConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateLovelaceConfigFromHass", function() { return generateLovelaceConfigFromHass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateLovelaceConfigFromData", function() { return generateLovelaceConfigFromData; });
/* harmony import */ var _common_entity_extract_views__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/entity/extract_views */ "./src/common/entity/extract_views.ts");
/* harmony import */ var _common_entity_get_view_entities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/get_view_entities */ "./src/common/entity/get_view_entities.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/split_by_groups */ "./src/common/entity/split_by_groups.ts");
/* harmony import */ var _common_entity_compute_object_id__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_object_id */ "./src/common/entity/compute_object_id.ts");
/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ "./src/common/entity/compute_state_domain.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _data_area_registry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../data/area_registry */ "./src/data/area_registry.ts");
/* harmony import */ var _common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/util/subscribe-one */ "./src/common/util/subscribe-one.ts");
/* harmony import */ var _data_device_registry__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../data/device_registry */ "./src/data/device_registry.ts");
/* harmony import */ var _data_entity_registry__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../data/entity_registry */ "./src/data/entity_registry.ts");











const DEFAULT_VIEW_ENTITY_ID = "group.default_view";
const DOMAINS_BADGES = [
    "binary_sensor",
    "person",
    "device_tracker",
    "mailbox",
    "sensor",
    "sun",
    "timer",
];
const HIDE_DOMAIN = new Set([
    "persistent_notification",
    "configurator",
    "geo_location",
]);
let subscribedRegistries = false;
const splitByAreas = (areaEntries, deviceEntries, entityEntries, entities) => {
    const allEntities = Object.assign({}, entities);
    const areasWithEntities = [];
    for (const area of areaEntries) {
        const areaEntities = [];
        const areaDevices = new Set(deviceEntries
            .filter((device) => device.area_id === area.area_id)
            .map((device) => device.id));
        for (const entity of entityEntries) {
            if (areaDevices.has(
            // @ts-ignore
            entity.device_id) &&
                entity.entity_id in allEntities) {
                areaEntities.push(allEntities[entity.entity_id]);
                delete allEntities[entity.entity_id];
            }
        }
        if (areaEntities.length > 0) {
            areasWithEntities.push([area, areaEntities]);
        }
    }
    return {
        areasWithEntities,
        otherEntities: allEntities,
    };
};
const computeCards = (states, entityCardOptions) => {
    const cards = [];
    // For entity card
    const entities = [];
    for (const [entityId, stateObj] of states) {
        const domain = Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__["computeDomain"])(entityId);
        if (domain === "alarm_control_panel") {
            cards.push({
                type: "alarm-panel",
                entity: entityId,
            });
        }
        else if (domain === "camera") {
            cards.push({
                type: "picture-entity",
                entity: entityId,
            });
        }
        else if (domain === "climate") {
            cards.push({
                type: "thermostat",
                entity: entityId,
            });
        }
        else if (domain === "history_graph" && stateObj) {
            cards.push({
                type: "history-graph",
                entities: stateObj.attributes.entity_id,
                hours_to_show: stateObj.attributes.hours_to_show,
                title: stateObj.attributes.friendly_name,
                refresh_interval: stateObj.attributes.refresh,
            });
        }
        else if (domain === "media_player") {
            cards.push({
                type: "media-control",
                entity: entityId,
            });
        }
        else if (domain === "plant") {
            cards.push({
                type: "plant-status",
                entity: entityId,
            });
        }
        else if (domain === "weather") {
            cards.push({
                type: "weather-forecast",
                entity: entityId,
            });
        }
        else if (domain === "weblink" && stateObj) {
            const conf = {
                type: "weblink",
                url: stateObj.state,
                name: Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__["computeStateName"])(stateObj),
            };
            if ("icon" in stateObj.attributes) {
                conf.icon = stateObj.attributes.icon;
            }
            entities.push(conf);
        }
        else {
            entities.push(entityId);
        }
    }
    if (entities.length > 0) {
        cards.unshift(Object.assign({ type: "entities", entities }, entityCardOptions));
    }
    return cards;
};
const computeDefaultViewStates = (entities) => {
    const states = {};
    Object.keys(entities).forEach((entityId) => {
        const stateObj = entities[entityId];
        if (!stateObj.attributes.hidden &&
            !HIDE_DOMAIN.has(Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__["computeStateDomain"])(stateObj))) {
            states[entityId] = entities[entityId];
        }
    });
    return states;
};
const generateDefaultViewConfig = (areaEntries, deviceEntries, entityEntries, entities, localize) => {
    const states = computeDefaultViewStates(entities);
    const path = "default_view";
    const title = "Home";
    const icon = undefined;
    // In the case of a default view, we want to use the group order attribute
    const groupOrders = {};
    Object.keys(states).forEach((entityId) => {
        const stateObj = states[entityId];
        if (stateObj.attributes.order) {
            groupOrders[entityId] = stateObj.attributes.order;
        }
    });
    const splittedByAreas = splitByAreas(areaEntries, deviceEntries, entityEntries, states);
    const config = generateViewConfig(localize, path, title, icon, splittedByAreas.otherEntities, groupOrders);
    const areaCards = [];
    splittedByAreas.areasWithEntities.forEach(([area, areaEntities]) => {
        areaCards.push(...computeCards(areaEntities.map((entity) => [entity.entity_id, entity]), {
            title: area.name,
            show_header_toggle: true,
        }));
    });
    config.cards.unshift(...areaCards);
    return config;
};
const generateViewConfig = (localize, path, title, icon, entities, groupOrders) => {
    const splitted = Object(_common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_3__["splitByGroups"])(entities);
    splitted.groups.sort((gr1, gr2) => groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id]);
    const badgeEntities = {};
    const ungroupedEntitites = {};
    // Organize ungrouped entities in badges/ungrouped things
    Object.keys(splitted.ungrouped).forEach((entityId) => {
        const state = splitted.ungrouped[entityId];
        const domain = Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__["computeStateDomain"])(state);
        const coll = DOMAINS_BADGES.includes(domain)
            ? badgeEntities
            : ungroupedEntitites;
        if (!(domain in coll)) {
            coll[domain] = [];
        }
        coll[domain].push(state.entity_id);
    });
    let badges = [];
    DOMAINS_BADGES.forEach((domain) => {
        if (domain in badgeEntities) {
            badges = badges.concat(badgeEntities[domain]);
        }
    });
    let cards = [];
    splitted.groups.forEach((groupEntity) => {
        cards = cards.concat(computeCards(groupEntity.attributes.entity_id.map((entityId) => [entityId, entities[entityId]]), {
            title: Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__["computeStateName"])(groupEntity),
            show_header_toggle: groupEntity.attributes.control !== "hidden",
        }));
    });
    Object.keys(ungroupedEntitites)
        .sort()
        .forEach((domain) => {
        cards = cards.concat(computeCards(ungroupedEntitites[domain].map((entityId) => [entityId, entities[entityId]]), {
            title: localize(`domain.${domain}`),
        }));
    });
    const view = {
        path,
        title,
        badges,
        cards,
    };
    if (icon) {
        view.icon = icon;
    }
    return view;
};
const generateLovelaceConfigFromHass = async (hass) => {
    // We want to keep the registry subscriptions alive after generating the UI
    // so that we don't serve up stale data after changing areas.
    if (!subscribedRegistries) {
        subscribedRegistries = true;
        Object(_data_area_registry__WEBPACK_IMPORTED_MODULE_7__["subscribeAreaRegistry"])(hass.connection, () => undefined);
        Object(_data_device_registry__WEBPACK_IMPORTED_MODULE_9__["subscribeDeviceRegistry"])(hass.connection, () => undefined);
        Object(_data_entity_registry__WEBPACK_IMPORTED_MODULE_10__["subscribeEntityRegistry"])(hass.connection, () => undefined);
    }
    const [areaEntries, deviceEntries, entityEntries] = await Promise.all([
        Object(_common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_8__["subscribeOne"])(hass.connection, _data_area_registry__WEBPACK_IMPORTED_MODULE_7__["subscribeAreaRegistry"]),
        Object(_common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_8__["subscribeOne"])(hass.connection, _data_device_registry__WEBPACK_IMPORTED_MODULE_9__["subscribeDeviceRegistry"]),
        Object(_common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_8__["subscribeOne"])(hass.connection, _data_entity_registry__WEBPACK_IMPORTED_MODULE_10__["subscribeEntityRegistry"]),
    ]);
    return generateLovelaceConfigFromData(hass.config, areaEntries, deviceEntries, entityEntries, hass.states, hass.localize);
};
const generateLovelaceConfigFromData = async (config, areaEntries, deviceEntries, entityEntries, entities, localize) => {
    const viewEntities = Object(_common_entity_extract_views__WEBPACK_IMPORTED_MODULE_0__["extractViews"])(entities);
    const views = viewEntities.map((viewEntity) => {
        const states = Object(_common_entity_get_view_entities__WEBPACK_IMPORTED_MODULE_1__["getViewEntities"])(entities, viewEntity);
        // In the case of a normal view, we use group order as specified in view
        const groupOrders = {};
        Object.keys(states).forEach((entityId, idx) => {
            groupOrders[entityId] = idx;
        });
        return generateViewConfig(localize, Object(_common_entity_compute_object_id__WEBPACK_IMPORTED_MODULE_4__["computeObjectId"])(viewEntity.entity_id), Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__["computeStateName"])(viewEntity), viewEntity.attributes.icon, states, groupOrders);
    });
    let title = config.location_name;
    // User can override default view. If they didn't, we will add one
    // that contains all entities.
    if (viewEntities.length === 0 ||
        viewEntities[0].entity_id !== DEFAULT_VIEW_ENTITY_ID) {
        views.unshift(generateDefaultViewConfig(areaEntries, deviceEntries, entityEntries, entities, localize));
        // Add map of geo locations to default view if loaded
        if (config.components.includes("geo_location")) {
            if (views[0] && views[0].cards) {
                views[0].cards.push({
                    type: "map",
                    geo_location_sources: ["all"],
                });
            }
        }
        // Make sure we don't have Home as title and first tab.
        if (views.length > 1 && title === "Home") {
            title = "";
        }
    }
    // User has no entities
    if (views.length === 1 && views[0].cards.length === 0) {
        __webpack_require__.e(/*! import() | hui-empty-state-card */ "hui-empty-state-card").then(__webpack_require__.bind(null, /*! ../cards/hui-empty-state-card */ "./src/panels/lovelace/cards/hui-empty-state-card.ts"));
        views[0].cards.push({
            type: "custom:hui-empty-state-card",
        });
    }
    return {
        title,
        views,
    };
};


/***/ }),

/***/ "./src/panels/lovelace/common/handle-click.ts":
/*!****************************************************!*\
  !*** ./src/panels/lovelace/common/handle-click.ts ***!
  \****************************************************/
/*! exports provided: handleClick */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleClick", function() { return handleClick; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_navigate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/navigate */ "./src/common/navigate.ts");
/* harmony import */ var _src_panels_lovelace_common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../src/panels/lovelace/common/entity/toggle-entity */ "./src/panels/lovelace/common/entity/toggle-entity.ts");
/* harmony import */ var _data_haptics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../data/haptics */ "./src/data/haptics.ts");




const handleClick = (node, hass, config, hold) => {
    let actionConfig;
    if (hold && config.hold_action) {
        actionConfig = config.hold_action;
    }
    else if (!hold && config.tap_action) {
        actionConfig = config.tap_action;
    }
    if (!actionConfig) {
        actionConfig = {
            action: "more-info",
        };
    }
    switch (actionConfig.action) {
        case "more-info":
            if (config.entity || config.camera_image) {
                Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(node, "hass-more-info", {
                    entityId: config.entity ? config.entity : config.camera_image,
                });
            }
            break;
        case "navigate":
            if (actionConfig.navigation_path) {
                Object(_common_navigate__WEBPACK_IMPORTED_MODULE_1__["navigate"])(node, actionConfig.navigation_path);
            }
            break;
        case "url":
            if (actionConfig.url_path) {
                window.open(actionConfig.url_path);
            }
            break;
        case "toggle":
            if (config.entity) {
                Object(_src_panels_lovelace_common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_2__["toggleEntity"])(hass, config.entity);
            }
            break;
        case "call-service": {
            if (!actionConfig.service) {
                Object(_data_haptics__WEBPACK_IMPORTED_MODULE_3__["forwardHaptic"])("failure");
                return;
            }
            const [domain, service] = actionConfig.service.split(".", 2);
            hass.callService(domain, service, actionConfig.service_data);
        }
    }
    Object(_data_haptics__WEBPACK_IMPORTED_MODULE_3__["forwardHaptic"])("light");
};


/***/ }),

/***/ "./src/panels/lovelace/common/has-changed.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/common/has-changed.ts ***!
  \***************************************************/
/*! exports provided: hasConfigOrEntityChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasConfigOrEntityChanged", function() { return hasConfigOrEntityChanged; });
// Check if config or Entity changed
function hasConfigOrEntityChanged(element, changedProps) {
    if (changedProps.has("_config")) {
        return true;
    }
    const oldHass = changedProps.get("hass");
    if (!oldHass) {
        return true;
    }
    return (oldHass.states[element._config.entity] !==
        element.hass.states[element._config.entity] ||
        oldHass.localize !== element.hass.localize);
}


/***/ }),

/***/ "./src/panels/lovelace/common/load-resources.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/common/load-resources.ts ***!
  \******************************************************/
/*! exports provided: loadLovelaceResources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadLovelaceResources", function() { return loadLovelaceResources; });
/* harmony import */ var _common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/dom/load_resource */ "./src/common/dom/load_resource.ts");

// CSS and JS should only be imported once. Modules and HTML are safe.
const CSS_CACHE = {};
const JS_CACHE = {};
const loadLovelaceResources = (resources, hassUrl) => resources.forEach((resource) => {
    const normalizedUrl = new URL(resource.url, hassUrl).toString();
    switch (resource.type) {
        case "css":
            if (normalizedUrl in CSS_CACHE) {
                break;
            }
            CSS_CACHE[normalizedUrl] = Object(_common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__["loadCSS"])(normalizedUrl);
            break;
        case "js":
            if (normalizedUrl in JS_CACHE) {
                break;
            }
            JS_CACHE[normalizedUrl] = Object(_common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__["loadJS"])(normalizedUrl);
            break;
        case "module":
            Object(_common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__["loadModule"])(normalizedUrl);
            break;
        case "html":
            __webpack_require__.e(/*! import() | import-href-polyfill */ "import-href-polyfill").then(__webpack_require__.bind(null, /*! ../../../resources/html-import/import-href */ "./src/resources/html-import/import-href.js")).then(({ importHref }) => importHref(normalizedUrl));
            break;
        default:
            // tslint:disable-next-line
            console.warn(`Unknown resource type specified: ${resource.type}`);
    }
});


/***/ }),

/***/ "./src/panels/lovelace/common/process-config-entities.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/common/process-config-entities.ts ***!
  \***************************************************************/
/*! exports provided: processConfigEntities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "processConfigEntities", function() { return processConfigEntities; });
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
// Parse array of entity objects from config

const processConfigEntities = (entities) => {
    if (!entities || !Array.isArray(entities)) {
        throw new Error("Entities need to be an array");
    }
    return entities.map((entityConf, index) => {
        if (typeof entityConf === "object" &&
            !Array.isArray(entityConf) &&
            entityConf.type) {
            return entityConf;
        }
        let config;
        if (typeof entityConf === "string") {
            // tslint:disable-next-line:no-object-literal-type-assertion
            config = { entity: entityConf };
        }
        else if (typeof entityConf === "object" && !Array.isArray(entityConf)) {
            if (!entityConf.entity) {
                throw new Error(`Entity object at position ${index} is missing entity field.`);
            }
            config = entityConf;
        }
        else {
            throw new Error(`Invalid entity specified at position ${index}.`);
        }
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_0__["isValidEntityId"])(config.entity)) {
            throw new Error(`Invalid entity ID at position ${index}: ${config.entity}`);
        }
        return config;
    });
};


/***/ }),

/***/ "./src/panels/lovelace/common/validate-condition.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/common/validate-condition.ts ***!
  \**********************************************************/
/*! exports provided: checkConditionsMet, validateConditionalConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkConditionsMet", function() { return checkConditionsMet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "validateConditionalConfig", function() { return validateConditionalConfig; });
function checkConditionsMet(conditions, hass) {
    return conditions.every((c) => {
        const state = hass.states[c.entity]
            ? hass.states[c.entity].state
            : "unavailable";
        return c.state ? state === c.state : state !== c.state_not;
    });
}
function validateConditionalConfig(conditions) {
    return conditions.every((c) => (c.entity && (c.state || c.state_not)));
}


/***/ }),

/***/ "./src/panels/lovelace/components/hui-entities-toggle.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-entities-toggle.ts ***!
  \***************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_switch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-switch */ "./src/components/ha-switch.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_entity_turn_on_off_entities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/entity/turn-on-off-entities */ "./src/panels/lovelace/common/entity/turn-on-off-entities.ts");
/* harmony import */ var _data_haptics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../data/haptics */ "./src/data/haptics.ts");






let HuiEntitiesToggle = class HuiEntitiesToggle extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    updated(changedProperties) {
        super.updated(changedProperties);
        if (changedProperties.has("entities")) {
            this._toggleEntities = this.entities.filter((entityId) => entityId in this.hass.states &&
                _common_const__WEBPACK_IMPORTED_MODULE_3__["DOMAINS_TOGGLE"].has(entityId.split(".", 1)[0]));
        }
    }
    render() {
        if (!this._toggleEntities) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-switch
        aria-label="Toggle entities."
        ?checked="${this._toggleEntities.some((entityId) => {
            const stateObj = this.hass.states[entityId];
            return stateObj && stateObj.state === "on";
        })}"
        @change="${this._callService}"
      ></ha-switch>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        width: 38px;
        display: block;
      }
      ha-switch {
        padding: 13px 5px;
        margin: -4px -5px;
      }
    `;
    }
    _callService(ev) {
        Object(_data_haptics__WEBPACK_IMPORTED_MODULE_5__["forwardHaptic"])("light");
        const turnOn = ev.target.checked;
        Object(_common_entity_turn_on_off_entities__WEBPACK_IMPORTED_MODULE_4__["turnOnOffEntities"])(this.hass, this._toggleEntities, turnOn);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiEntitiesToggle.prototype, "entities", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiEntitiesToggle.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiEntitiesToggle.prototype, "_toggleEntities", void 0);
HuiEntitiesToggle = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-entities-toggle")
], HuiEntitiesToggle);


/***/ }),

/***/ "./src/panels/lovelace/components/hui-generic-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-generic-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_ha_relative_time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-relative-time */ "./src/components/ha-relative-time.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/toggle_attribute */ "./src/common/dom/toggle_attribute.ts");









class HuiGenericEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_2__["LitElement"] {
    constructor() {
        super(...arguments);
        this.showSecondary = true;
    }
    render() {
        if (!this.hass || !this.config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_2__["html"] ``;
        }
        const stateObj = this.config.entity
            ? this.hass.states[this.config.entity]
            : undefined;
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_2__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this.config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_2__["html"] `
      <state-badge
        .hass=${this.hass}
        .stateObj=${stateObj}
        .overrideIcon=${this.config.icon}
        .overrideImage=${this.config.image}
      ></state-badge>
      <div class="flex">
        <div class="info">
          ${this.config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_1__["computeStateName"])(stateObj)}
          <div class="secondary">
            ${!this.showSecondary
            ? lit_element__WEBPACK_IMPORTED_MODULE_2__["html"] `
                  <slot name="secondary"></slot>
                `
            : this.config.secondary_info === "entity-id"
                ? stateObj.entity_id
                : this.config.secondary_info === "last-changed"
                    ? lit_element__WEBPACK_IMPORTED_MODULE_2__["html"] `
                  <ha-relative-time
                    .hass=${this.hass}
                    .datetime=${stateObj.last_changed}
                  ></ha-relative-time>
                `
                    : ""}
          </div>
        </div>

        <slot></slot>
      </div>
    `;
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (changedProps.has("hass")) {
            Object(_common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_8__["toggleAttribute"])(this, "rtl", Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__["computeRTL"])(this.hass));
        }
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_2__["css"] `
      :host {
        display: flex;
        align-items: center;
      }
      .flex {
        flex: 1;
        margin-left: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        min-width: 0;
      }
      .info {
        flex: 1 0 60px;
      }
      .info,
      .info > * {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .flex ::slotted(*) {
        margin-left: 8px;
        min-width: 0;
      }
      .flex ::slotted([slot="secondary"]) {
        margin-left: 0;
      }
      .secondary,
      ha-relative-time {
        display: block;
        color: var(--secondary-text-color);
      }
      state-badge {
        flex: 0 0 40px;
      }
      :host([rtl]) .flex {
        margin-left: 0;
        margin-right: 16px;
      }
      :host([rtl]) .flex ::slotted(*) {
        margin-left: 0;
        margin-right: 8px;
      }
    `;
    }
}
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
], HuiGenericEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
], HuiGenericEntityRow.prototype, "config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
], HuiGenericEntityRow.prototype, "showSecondary", void 0);
customElements.define("hui-generic-entity-row", HuiGenericEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/components/hui-image.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/components/hui-image.ts ***!
  \*****************************************************/
/*! exports provided: HuiImage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiImage", function() { return HuiImage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ "./src/common/util/parse-aspect-ratio.ts");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/camera */ "./src/data/camera.ts");







const UPDATE_INTERVAL = 10000;
const DEFAULT_FILTER = "grayscale(100%)";
let HuiImage = class HuiImage extends lit_element__WEBPACK_IMPORTED_MODULE_3__["LitElement"] {
    connectedCallback() {
        super.connectedCallback();
        this._attached = true;
        if (this.cameraImage && this.cameraView !== "live") {
            this._startUpdateCameraInterval();
        }
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        this._attached = false;
        this._stopUpdateCameraInterval();
    }
    render() {
        const ratio = this.aspectRatio ? Object(_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_2__["default"])(this.aspectRatio) : null;
        const stateObj = this.hass && this.entity ? this.hass.states[this.entity] : undefined;
        const state = stateObj ? stateObj.state : "unavailable";
        // Figure out image source to use
        let imageSrc;
        let cameraObj;
        // Track if we are we using a fallback image, used for filter.
        let imageFallback = !this.stateImage;
        if (this.cameraImage) {
            if (this.cameraView === "live") {
                cameraObj =
                    this.hass && this.hass.states[this.cameraImage];
            }
            else {
                imageSrc = this._cameraImageSrc;
            }
        }
        else if (this.stateImage) {
            const stateImage = this.stateImage[state];
            if (stateImage) {
                imageSrc = stateImage;
            }
            else {
                imageSrc = this.image;
                imageFallback = true;
            }
        }
        else {
            imageSrc = this.image;
        }
        if (imageSrc) {
            imageSrc = this.hass.hassUrl(imageSrc);
        }
        // Figure out filter to use
        let filter = this.filter || "";
        if (this.stateFilter && this.stateFilter[state]) {
            filter = this.stateFilter[state];
        }
        if (!filter && this.entity) {
            const isOff = !stateObj || _common_const__WEBPACK_IMPORTED_MODULE_1__["STATES_OFF"].includes(state);
            filter = isOff && imageFallback ? DEFAULT_FILTER : "";
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_3__["html"] `
      <div
        style=${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__["styleMap"])({
            paddingBottom: ratio && ratio.w > 0 && ratio.h > 0
                ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`
                : "",
        })}
        class=${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_5__["classMap"])({
            ratio: Boolean(ratio && ratio.w > 0 && ratio.h > 0),
        })}
      >
        ${this.cameraImage && this.cameraView === "live"
            ? lit_element__WEBPACK_IMPORTED_MODULE_3__["html"] `
              <ha-camera-stream
                .hass="${this.hass}"
                .stateObj="${cameraObj}"
              ></ha-camera-stream>
            `
            : lit_element__WEBPACK_IMPORTED_MODULE_3__["html"] `
              <img
                id="image"
                src=${imageSrc}
                @error=${this._onImageError}
                @load=${this._onImageLoad}
                style=${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__["styleMap"])({
                filter,
                display: this._loadError ? "none" : "block",
            })}
              />
            `}
        <div
          id="brokenImage"
          style=${Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__["styleMap"])({
            height: `${this._lastImageHeight || "100"}px`,
            display: this._loadError ? "block" : "none",
        })}
        ></div>
      </div>
    `;
    }
    updated(changedProps) {
        if (changedProps.has("cameraImage") && this.cameraView !== "live") {
            this._updateCameraImageSrc();
            this._startUpdateCameraInterval();
            return;
        }
    }
    _startUpdateCameraInterval() {
        this._stopUpdateCameraInterval();
        if (this.cameraImage && this._attached) {
            this._cameraUpdater = window.setInterval(() => this._updateCameraImageSrc(), UPDATE_INTERVAL);
        }
    }
    _stopUpdateCameraInterval() {
        if (this._cameraUpdater) {
            clearInterval(this._cameraUpdater);
        }
    }
    _onImageError() {
        this._loadError = true;
    }
    async _onImageLoad() {
        this._loadError = false;
        await this.updateComplete;
        this._lastImageHeight = this._image.offsetHeight;
    }
    async _updateCameraImageSrc() {
        if (!this.hass || !this.cameraImage) {
            return;
        }
        const cameraState = this.hass.states[this.cameraImage];
        if (!cameraState) {
            this._onImageError();
            return;
        }
        this._cameraImageSrc = await Object(_data_camera__WEBPACK_IMPORTED_MODULE_6__["fetchThumbnailUrlWithCache"])(this.hass, this.cameraImage);
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_3__["css"] `
      img {
        display: block;
        height: auto;
        transition: filter 0.2s linear;
        width: 100%;
      }

      .ratio {
        position: relative;
        width: 100%;
        height: 0;
      }

      .ratio img,
      .ratio div {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #brokenImage {
        background: grey url("/static/images/image-broken.svg") center/36px
          no-repeat;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "entity", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "image", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "stateImage", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "cameraImage", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "cameraView", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "aspectRatio", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "filter", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "stateFilter", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "_loadError", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
], HuiImage.prototype, "_cameraImageSrc", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["query"])("img")
], HuiImage.prototype, "_image", void 0);
HuiImage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["customElement"])("hui-image")
], HuiImage);



/***/ }),

/***/ "./src/panels/lovelace/components/hui-timestamp-display.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-timestamp-display.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_datetime_format_date__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/datetime/format_date */ "./src/common/datetime/format_date.ts");
/* harmony import */ var _common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/datetime/format_date_time */ "./src/common/datetime/format_date_time.ts");
/* harmony import */ var _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/datetime/format_time */ "./src/common/datetime/format_time.ts");
/* harmony import */ var _common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/datetime/relative_time */ "./src/common/datetime/relative_time.ts");






const FORMATS = {
    date: _common_datetime_format_date__WEBPACK_IMPORTED_MODULE_2__["default"],
    datetime: _common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__["default"],
    time: _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_4__["default"],
};
const INTERVAL_FORMAT = ["relative", "total"];
let HuiTimestampDisplay = class HuiTimestampDisplay extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    connectedCallback() {
        super.connectedCallback();
        this._connected = true;
        this._startInterval();
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        this._connected = false;
        this._clearInterval();
    }
    render() {
        if (!this.ts || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        if (isNaN(this.ts.getTime())) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        Invalid date
      `;
        }
        const format = this._format;
        if (INTERVAL_FORMAT.includes(format)) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        ${this._relative}
      `;
        }
        if (format in FORMATS) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        ${FORMATS[format](this.ts, this.hass.language)}
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      Invalid format
    `;
    }
    updated(changedProperties) {
        super.updated(changedProperties);
        if (!changedProperties.has("format") || !this._connected) {
            return;
        }
        if (INTERVAL_FORMAT.includes("relative")) {
            this._startInterval();
        }
        else {
            this._clearInterval();
        }
    }
    get _format() {
        return this.format || "relative";
    }
    _startInterval() {
        this._clearInterval();
        if (this._connected && INTERVAL_FORMAT.includes(this._format)) {
            this._updateRelative();
            this._interval = window.setInterval(() => this._updateRelative(), 1000);
        }
    }
    _clearInterval() {
        if (this._interval) {
            clearInterval(this._interval);
            this._interval = undefined;
        }
    }
    _updateRelative() {
        if (this.ts && this.hass.localize) {
            this._relative =
                this._format === "relative"
                    ? Object(_common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__["default"])(this.ts, this.hass.localize)
                    : (this._relative = Object(_common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__["default"])(new Date(), this.hass.localize, {
                        compareTime: this.ts,
                        includeTense: false,
                    }));
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTimestampDisplay.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTimestampDisplay.prototype, "ts", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTimestampDisplay.prototype, "format", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTimestampDisplay.prototype, "_relative", void 0);
HuiTimestampDisplay = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-timestamp-display")
], HuiTimestampDisplay);


/***/ }),

/***/ "./src/panels/lovelace/components/hui-unavailable.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/components/hui-unavailable.ts ***!
  \***********************************************************/
/*! exports provided: HuiUnavailable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiUnavailable", function() { return HuiUnavailable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


let HuiUnavailable = class HuiUnavailable extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    render() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <div class="disabled-overlay">
        <div>${this.text}</div>
      </div>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .disabled-overlay {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--state-icon-unavailable-color);
        opacity: 0.5;
        z-index: 50;
      }

      .disabled-overlay div {
        position: absolute;
        top: 50%;
        left: 50%;
        font-size: 24px;
        color: var(--primary-text-color);
        transform: translate(-50%, -50%);
        -ms-transform: translate(-50%, -50%);
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiUnavailable.prototype, "text", void 0);
HuiUnavailable = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-unavailable")
], HuiUnavailable);



/***/ }),

/***/ "./src/panels/lovelace/components/hui-warning-element.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-warning-element.ts ***!
  \***************************************************************/
/*! exports provided: HuiWarningElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiWarningElement", function() { return HuiWarningElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");



let HuiWarningElement = class HuiWarningElement extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    render() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-icon icon="hass:alert" .title="${this.label}"></ha-icon>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-icon {
        color: #fce588;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiWarningElement.prototype, "label", void 0);
HuiWarningElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-warning-element")
], HuiWarningElement);



/***/ }),

/***/ "./src/panels/lovelace/components/hui-warning.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/components/hui-warning.ts ***!
  \*******************************************************/
/*! exports provided: HuiWarning */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiWarning", function() { return HuiWarning; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


let HuiWarning = class HuiWarning extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    render() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <slot></slot>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        display: block;
        color: black;
        background-color: #fce588;
        padding: 8px;
      }
    `;
    }
};
HuiWarning = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-warning")
], HuiWarning);



/***/ }),

/***/ "./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts":
/*!*************************************************************************!*\
  !*** ./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts ***!
  \*************************************************************************/
/*! exports provided: showEditCardDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showEditCardDialog", function() { return showEditCardDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

let registeredDialog = false;
const dialogShowEvent = "show-edit-card";
const dialogTag = "hui-dialog-edit-card";
const registerEditCardDialog = (element) => Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
    dialogShowEvent,
    dialogTag,
    dialogImport: () => Promise.all(/*! import() | hui-dialog-edit-card */[__webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e(7), __webpack_require__.e("hui-dialog-edit-card")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-edit-card */ "./src/panels/lovelace/editor/card-editor/hui-dialog-edit-card.ts")),
});
const showEditCardDialog = (element, editCardDialogParams) => {
    if (!registeredDialog) {
        registeredDialog = true;
        registerEditCardDialog(element);
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, editCardDialogParams);
};


/***/ }),

/***/ "./src/panels/lovelace/editor/config-util.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/editor/config-util.ts ***!
  \***************************************************/
/*! exports provided: addCard, replaceCard, deleteCard, swapCard, moveCard, addView, replaceView, swapView, deleteView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addCard", function() { return addCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceCard", function() { return replaceCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteCard", function() { return deleteCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "swapCard", function() { return swapCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moveCard", function() { return moveCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addView", function() { return addView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceView", function() { return replaceView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "swapView", function() { return swapView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteView", function() { return deleteView; });
const addCard = (config, path, cardConfig) => {
    const [viewIndex] = path;
    const views = [];
    config.views.forEach((viewConf, index) => {
        if (index !== viewIndex) {
            views.push(config.views[index]);
            return;
        }
        const cards = viewConf.cards
            ? [...viewConf.cards, cardConfig]
            : [cardConfig];
        views.push(Object.assign(Object.assign({}, viewConf), { cards }));
    });
    return Object.assign(Object.assign({}, config), { views });
};
const replaceCard = (config, path, cardConfig) => {
    const [viewIndex, cardIndex] = path;
    const views = [];
    config.views.forEach((viewConf, index) => {
        if (index !== viewIndex) {
            views.push(config.views[index]);
            return;
        }
        views.push(Object.assign(Object.assign({}, viewConf), { cards: (viewConf.cards || []).map((origConf, ind) => ind === cardIndex ? cardConfig : origConf) }));
    });
    return Object.assign(Object.assign({}, config), { views });
};
const deleteCard = (config, path) => {
    const [viewIndex, cardIndex] = path;
    const views = [];
    config.views.forEach((viewConf, index) => {
        if (index !== viewIndex) {
            views.push(config.views[index]);
            return;
        }
        views.push(Object.assign(Object.assign({}, viewConf), { cards: (viewConf.cards || []).filter((_origConf, ind) => ind !== cardIndex) }));
    });
    return Object.assign(Object.assign({}, config), { views });
};
const swapCard = (config, path1, path2) => {
    const card1 = config.views[path1[0]].cards[path1[1]];
    const card2 = config.views[path2[0]].cards[path2[1]];
    const origView1 = config.views[path1[0]];
    const newView1 = Object.assign(Object.assign({}, origView1), { cards: origView1.cards.map((origCard, index) => index === path1[1] ? card2 : origCard) });
    const origView2 = path1[0] === path2[0] ? newView1 : config.views[path2[0]];
    const newView2 = Object.assign(Object.assign({}, origView2), { cards: origView2.cards.map((origCard, index) => index === path2[1] ? card1 : origCard) });
    return Object.assign(Object.assign({}, config), { views: config.views.map((origView, index) => index === path2[0] ? newView2 : index === path1[0] ? newView1 : origView) });
};
const moveCard = (config, fromPath, toPath) => {
    if (fromPath[0] === toPath[0]) {
        throw new Error("You can not move a card to the view it is in.");
    }
    const fromView = config.views[fromPath[0]];
    const card = fromView.cards[fromPath[1]];
    const newView1 = Object.assign(Object.assign({}, fromView), { cards: (fromView.cards || []).filter((_origConf, ind) => ind !== fromPath[1]) });
    const toView = config.views[toPath[0]];
    const cards = toView.cards ? [...toView.cards, card] : [card];
    const newView2 = Object.assign(Object.assign({}, toView), { cards });
    return Object.assign(Object.assign({}, config), { views: config.views.map((origView, index) => index === toPath[0]
            ? newView2
            : index === fromPath[0]
                ? newView1
                : origView) });
};
const addView = (config, viewConfig) => (Object.assign(Object.assign({}, config), { views: config.views.concat(viewConfig) }));
const replaceView = (config, viewIndex, viewConfig) => (Object.assign(Object.assign({}, config), { views: config.views.map((origView, index) => index === viewIndex ? viewConfig : origView) }));
const swapView = (config, path1, path2) => {
    const view1 = config.views[path1];
    const view2 = config.views[path2];
    return Object.assign(Object.assign({}, config), { views: config.views.map((origView, index) => index === path2 ? view1 : index === path1 ? view2 : origView) });
};
const deleteView = (config, viewIndex) => (Object.assign(Object.assign({}, config), { views: config.views.filter((_origView, index) => index !== viewIndex) }));


/***/ }),

/***/ "./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts":
/*!*********************************************************************************!*\
  !*** ./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts ***!
  \*********************************************************************************/
/*! exports provided: showEditLovelaceDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showEditLovelaceDialog", function() { return showEditLovelaceDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

let registeredDialog = false;
const dialogShowEvent = "show-edit-lovelace";
const dialogTag = "hui-dialog-edit-lovelace";
const registerEditLovelaceDialog = (element) => Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
    dialogShowEvent,
    dialogTag,
    dialogImport: () => Promise.all(/*! import() | hui-dialog-edit-lovelace */[__webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("hui-dialog-edit-lovelace")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-edit-lovelace */ "./src/panels/lovelace/editor/lovelace-editor/hui-dialog-edit-lovelace.ts")),
});
const showEditLovelaceDialog = (element, lovelace) => {
    if (!registeredDialog) {
        registeredDialog = true;
        registerEditLovelaceDialog(element);
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, lovelace);
};


/***/ }),

/***/ "./src/panels/lovelace/editor/show-save-config-dialog.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/editor/show-save-config-dialog.ts ***!
  \***************************************************************/
/*! exports provided: showSaveDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showSaveDialog", function() { return showSaveDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

const dialogShowEvent = "show-save-config";
const dialogTag = "hui-dialog-save-config";
let registeredDialog = false;
const showSaveDialog = (element, saveDialogParams) => {
    if (!registeredDialog) {
        registeredDialog = true;
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
            dialogShowEvent,
            dialogTag,
            dialogImport: () => Promise.all(/*! import() | hui-dialog-save-config */[__webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("hui-dialog-save-config")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-save-config */ "./src/panels/lovelace/editor/hui-dialog-save-config.ts")),
        });
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, saveDialogParams);
};


/***/ }),

/***/ "./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts":
/*!*************************************************************************!*\
  !*** ./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts ***!
  \*************************************************************************/
/*! exports provided: showEditViewDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showEditViewDialog", function() { return showEditViewDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

let registeredDialog = false;
const dialogShowEvent = "show-edit-view";
const dialogTag = "hui-dialog-edit-view";
const registerEditViewDialog = (element) => Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
    dialogShowEvent,
    dialogTag,
    dialogImport: () => Promise.all(/*! import() | hui-dialog-edit-view */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("vendors~hui-dialog-edit-view"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-dialog-edit-view")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-edit-view */ "./src/panels/lovelace/editor/view-editor/hui-dialog-edit-view.ts")),
});
const showEditViewDialog = (element, editViewDialogParams) => {
    if (!registeredDialog) {
        registeredDialog = true;
        registerEditViewDialog(element);
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, editViewDialogParams);
};


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-conditional-element.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-conditional-element.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lovelace/common/validate-condition */ "./src/panels/lovelace/common/validate-condition.ts");
/* harmony import */ var _cards_picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cards/picture-elements/create-styled-hui-element */ "./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts");


class HuiConditionalElement extends HTMLElement {
    constructor() {
        super(...arguments);
        this._elements = [];
    }
    setConfig(config) {
        if (!config.conditions ||
            !Array.isArray(config.conditions) ||
            !config.elements ||
            !Array.isArray(config.elements) ||
            !Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_0__["validateConditionalConfig"])(config.conditions)) {
            throw new Error("Error in card configuration.");
        }
        if (this._elements.length > 0) {
            this._elements.map((el) => {
                if (el.parentElement) {
                    el.parentElement.removeChild(el);
                }
            });
            this._elements = [];
        }
        this._config = config;
        this._config.elements.map((elementConfig) => {
            this._elements.push(Object(_cards_picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_1__["createStyledHuiElement"])(elementConfig));
        });
        this.updateElements();
    }
    set hass(hass) {
        this._hass = hass;
        this.updateElements();
    }
    updateElements() {
        if (!this._hass || !this._config) {
            return;
        }
        const visible = Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_0__["checkConditionsMet"])(this._config.conditions, this._hass);
        this._elements.map((el) => {
            if (visible) {
                el.hass = this._hass;
                if (!el.parentElement) {
                    this.appendChild(el);
                }
            }
            else if (el.parentElement) {
                el.parentElement.removeChild(el);
            }
        });
    }
}
customElements.define("hui-conditional-element", HuiConditionalElement);


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-icon-element.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-icon-element.ts ***!
  \**********************************************************/
/*! exports provided: HuiIconElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiIconElement", function() { return HuiIconElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");






let HuiIconElement = class HuiIconElement extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config.icon) {
            throw Error("Invalid Configuration: 'icon' required");
        }
        this._config = config;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-icon
        .icon="${this._config.icon}"
        .title="${Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__["computeTooltip"])(this.hass, this._config)}"
        @ha-click="${this._handleTap}"
        @ha-hold="${this._handleHold}"
        .longPress="${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__["longPress"])()}"
      ></ha-icon>
    `;
    }
    _handleTap() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, false);
    }
    _handleHold() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, true);
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        cursor: pointer;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiIconElement.prototype, "_config", void 0);
HuiIconElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-icon-element")
], HuiIconElement);



/***/ }),

/***/ "./src/panels/lovelace/elements/hui-image-element.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-image-element.ts ***!
  \***********************************************************/
/*! exports provided: HuiImageElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiImageElement", function() { return HuiImageElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-image */ "./src/panels/lovelace/components/hui-image.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");






let HuiImageElement = class HuiImageElement extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw Error("Error in element configuration");
        }
        this.classList.toggle("clickable", config.tap_action && config.tap_action.action !== "none");
        this._config = config;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-image
        .hass="${this.hass}"
        .entity="${this._config.entity}"
        .image="${this._config.image}"
        .stateImage="${this._config.state_image}"
        .cameraImage="${this._config.camera_image}"
        .filter="${this._config.filter}"
        .stateFilter="${this._config.state_filter}"
        .title="${Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__["computeTooltip"])(this.hass, this._config)}"
        .aspectRatio="${this._config.aspect_ratio}"
        @ha-click="${this._handleTap}"
        @ha-hold="${this._handleHold}"
        .longPress="${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__["longPress"])()}"
      ></hui-image>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host(.clickable) {
        cursor: pointer;
        overflow: hidden;
        -webkit-touch-callout: none !important;
      }
      hui-image {
        -webkit-user-select: none !important;
      }
    `;
    }
    _handleTap() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, false);
    }
    _handleHold() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, true);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiImageElement.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiImageElement.prototype, "_config", void 0);
HuiImageElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-image-element")
], HuiImageElement);



/***/ }),

/***/ "./src/panels/lovelace/elements/hui-service-button-element.ts":
/*!********************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-service-button-element.ts ***!
  \********************************************************************/
/*! exports provided: HuiServiceButtonElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiServiceButtonElement", function() { return HuiServiceButtonElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_buttons_ha_call_service_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/buttons/ha-call-service-button */ "./src/components/buttons/ha-call-service-button.js");



let HuiServiceButtonElement = class HuiServiceButtonElement extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    static get properties() {
        return { _config: {} };
    }
    setConfig(config) {
        if (!config || !config.service) {
            throw Error("Invalid Configuration: 'service' required");
        }
        [this._domain, this._service] = config.service.split(".", 2);
        if (!this._domain) {
            throw Error("Invalid Configuration: 'service' does not have a domain");
        }
        if (!this._service) {
            throw Error("Invalid Configuration: 'service' does not have a service name");
        }
        this._config = config;
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-call-service-button
        .hass="${this.hass}"
        .domain="${this._domain}"
        .service="${this._service}"
        .serviceData="${this._config.service_data}"
        >${this._config.title}</ha-call-service-button
      >
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-call-service-button {
        color: var(--primary-color);
        white-space: nowrap;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiServiceButtonElement.prototype, "_config", void 0);
HuiServiceButtonElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-service-button-element")
], HuiServiceButtonElement);



/***/ }),

/***/ "./src/panels/lovelace/elements/hui-state-badge-element.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-state-badge-element.ts ***!
  \*****************************************************************/
/*! exports provided: HuiStateBadgeElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiStateBadgeElement", function() { return HuiStateBadgeElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_ha_state_label_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/entity/ha-state-label-badge */ "./src/components/entity/ha-state-label-badge.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






let HuiStateBadgeElement = class HuiStateBadgeElement extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config.entity) {
            throw Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning-element
          label="${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}"
        ></hui-warning-element>
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-state-label-badge
        .hass="${this.hass}"
        .state="${stateObj}"
        .title="${this._config.title === undefined
            ? Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__["computeStateName"])(stateObj)
            : this._config.title === null
                ? ""
                : this._config.title}"
      ></ha-state-label-badge>
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiStateBadgeElement.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiStateBadgeElement.prototype, "_config", void 0);
HuiStateBadgeElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-state-badge-element")
], HuiStateBadgeElement);



/***/ }),

/***/ "./src/panels/lovelace/elements/hui-state-icon-element.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-state-icon-element.ts ***!
  \****************************************************************/
/*! exports provided: HuiStateIconElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiStateIconElement", function() { return HuiStateIconElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








let HuiStateIconElement = class HuiStateIconElement extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config.entity) {
            throw Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning-element
          label=${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}
        ></hui-warning-element>
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <state-badge
        .stateObj="${stateObj}"
        .title="${Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_4__["computeTooltip"])(this.hass, this._config)}"
        @ha-click="${this._handleClick}"
        @ha-hold="${this._handleHold}"
        .longPress="${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_6__["longPress"])()}"
        .overrideIcon=${this._config.icon}
      ></state-badge>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        cursor: pointer;
      }
    `;
    }
    _handleClick() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_5__["handleClick"])(this, this.hass, this._config, false);
    }
    _handleHold() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_5__["handleClick"])(this, this.hass, this._config, true);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiStateIconElement.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiStateIconElement.prototype, "_config", void 0);
HuiStateIconElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-state-icon-element")
], HuiStateIconElement);



/***/ }),

/***/ "./src/panels/lovelace/elements/hui-state-label-element.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-state-label-element.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_ha_state_label_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/entity/ha-state-label-badge */ "./src/components/entity/ha-state-label-badge.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");









let HuiStateLabelElement = class HuiStateLabelElement extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config.entity) {
            throw Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_8__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning-element
          label=${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}
        ></hui-warning-element>
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <div
        .title="${Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_5__["computeTooltip"])(this.hass, this._config)}"
        @ha-click="${this._handleTap}"
        @ha-hold="${this._handleHold}"
        .longPress="${Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_7__["longPress"])()}"
      >
        ${this._config.prefix}${stateObj
            ? Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)
            : "-"}${this._config.suffix}
      </div>
    `;
    }
    _handleTap() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_6__["handleClick"])(this, this.hass, this._config, false);
    }
    _handleHold() {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_6__["handleClick"])(this, this.hass, this._config, true);
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        cursor: pointer;
      }
      div {
        padding: 8px;
        white-space: nowrap;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiStateLabelElement.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiStateLabelElement.prototype, "_config", void 0);
HuiStateLabelElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-state-label-element")
], HuiStateLabelElement);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts":
/*!*******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts ***!
  \*******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_climate_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-climate-state */ "./src/components/ha-climate-state.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






let HuiClimateEntityRow = class HuiClimateEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this.hass || !this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        <ha-climate-state
          .hass="${this.hass}"
          .stateObj="${stateObj}"
        ></ha-climate-state>
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-climate-state {
        text-align: right;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiClimateEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiClimateEntityRow.prototype, "_config", void 0);
HuiClimateEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-climate-entity-row")
], HuiClimateEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_ha_cover_controls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-cover-controls */ "./src/components/ha-cover-controls.js");
/* harmony import */ var _components_ha_cover_tilt_controls__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-cover-tilt-controls */ "./src/components/ha-cover-tilt-controls.js");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _util_cover_model__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../util/cover-model */ "./src/util/cover-model.js");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








let HuiCoverEntityRow = class HuiCoverEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        ${Object(_util_cover_model__WEBPACK_IMPORTED_MODULE_6__["isTiltOnly"])(stateObj)
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-cover-tilt-controls
                .hass="${this.hass}"
                .stateObj="${stateObj}"
              ></ha-cover-tilt-controls>
            `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-cover-controls
                .hass="${this.hass}"
                .stateObj="${stateObj}"
              ></ha-cover-controls>
            `}
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      ha-cover-controls,
      ha-cover-tilt-controls {
        margin-right: -0.57em;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiCoverEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiCoverEntityRow.prototype, "_config", void 0);
HuiCoverEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-cover-entity-row")
], HuiCoverEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-group-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-group-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








let HuiGroupEntityRow = class HuiGroupEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        ${this._computeCanToggle(stateObj.attributes.entity_id)
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-entity-toggle
                .hass="${this.hass}"
                .stateObj="${stateObj}"
              ></ha-entity-toggle>
            `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div>
                ${Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)}
              </div>
            `}
      </hui-generic-entity-row>
    `;
    }
    _computeCanToggle(entityIds) {
        return entityIds.some((entityId) => _common_const__WEBPACK_IMPORTED_MODULE_6__["DOMAINS_TOGGLE"].has(entityId.split(".", 1)[0]));
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiGroupEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiGroupEntityRow.prototype, "_config", void 0);
HuiGroupEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-group-entity-row")
], HuiGroupEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts":
/*!**************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts ***!
  \**************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_paper_time_input_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/paper-time-input.js */ "./src/components/paper-time-input.js");
/* harmony import */ var _components_ha_date_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-date-input */ "./src/components/ha-date-input.ts");
/* harmony import */ var _data_input_datetime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../data/input_datetime */ "./src/data/input_datetime.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







let HuiInputDatetimeEntityRow = class HuiInputDatetimeEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        ${stateObj.attributes.has_date
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-date-input
                .year=${stateObj.attributes.year}
                .month=${("0" + stateObj.attributes.month).slice(-2)}
                .day=${("0" + stateObj.attributes.day).slice(-2)}
                @change=${this._selectedValueChanged}
                @click=${this._stopEventPropagation}
              ></ha-date-input>
              ${stateObj.attributes.has_time ? "," : ""}
            `
            : ``}
        ${stateObj.attributes.has_time
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <paper-time-input
                .hour=${stateObj.state === "unknown"
                ? ""
                : ("0" + stateObj.attributes.hour).slice(-2)}
                .min=${stateObj.state === "unknown"
                ? ""
                : ("0" + stateObj.attributes.minute).slice(-2)}
                .amPm=${false}
                @change=${this._selectedValueChanged}
                @click=${this._stopEventPropagation}
                hide-label
                format="24"
              ></paper-time-input>
            `
            : ``}
      </hui-generic-entity-row>
    `;
    }
    _stopEventPropagation(ev) {
        ev.stopPropagation();
    }
    get _timeInputEl() {
        return this.shadowRoot.querySelector("paper-time-input");
    }
    get _dateInputEl() {
        return this.shadowRoot.querySelector("ha-date-input");
    }
    _selectedValueChanged(ev) {
        const stateObj = this.hass.states[this._config.entity];
        const time = this._timeInputEl !== null
            ? this._timeInputEl.value.trim() + ":00"
            : undefined;
        const date = this._dateInputEl !== null ? this._dateInputEl.value : undefined;
        if (time !== stateObj.state) {
            Object(_data_input_datetime__WEBPACK_IMPORTED_MODULE_5__["setInputDateTimeValue"])(this.hass, stateObj.entity_id, time, date);
        }
        ev.target.blur();
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputDatetimeEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputDatetimeEntityRow.prototype, "_config", void 0);
HuiInputDatetimeEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-datetime-entity-row")
], HuiInputDatetimeEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts":
/*!************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts ***!
  \************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_ha_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-slider */ "./src/components/ha-slider.js");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _data_input_text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/input_text */ "./src/data/input_text.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








let HuiInputNumberEntityRow = class HuiInputNumberEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    connectedCallback() {
        super.connectedCallback();
        if (this._updated && !this._loaded) {
            this._initialLoad();
        }
    }
    firstUpdated() {
        this._updated = true;
        if (this.isConnected && !this._loaded) {
            this._initialLoad();
        }
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        <div>
          ${stateObj.attributes.mode === "slider"
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <div class="flex">
                  <ha-slider
                    .dir="${Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_5__["computeRTLDirection"])(this.hass)}"
                    .step="${Number(stateObj.attributes.step)}"
                    .min="${Number(stateObj.attributes.min)}"
                    .max="${Number(stateObj.attributes.max)}"
                    .value="${Number(stateObj.state)}"
                    pin
                    @change="${this._selectedValueChanged}"
                    ignore-bar-touch
                    id="input"
                  ></ha-slider>
                  <span class="state">
                    ${Number(stateObj.state)}
                    ${stateObj.attributes.unit_of_measurement}
                  </span>
                </div>
              `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <paper-input
                  no-label-float
                  auto-validate
                  .pattern="[0-9]+([\\.][0-9]+)?"
                  .step="${Number(stateObj.attributes.step)}"
                  .min="${Number(stateObj.attributes.min)}"
                  .max="${Number(stateObj.attributes.max)}"
                  .value="${Number(stateObj.state)}"
                  type="number"
                  @change="${this._selectedValueChanged}"
                  id="input"
                ></paper-input>
              `}
        </div>
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .flex {
        display: flex;
        align-items: center;
      }
      .state {
        min-width: 45px;
        text-align: end;
      }
      paper-input {
        text-align: end;
      }
    `;
    }
    async _initialLoad() {
        this._loaded = true;
        await this.updateComplete;
        const element = this.shadowRoot.querySelector(".state");
        if (!element || !this.parentElement) {
            return;
        }
        element.hidden = this.parentElement.clientWidth <= 350;
    }
    get _inputElement() {
        // linter recommended the following syntax
        return this.shadowRoot.getElementById("input");
    }
    _selectedValueChanged() {
        const element = this._inputElement;
        const stateObj = this.hass.states[this._config.entity];
        if (element.value !== stateObj.state) {
            Object(_data_input_text__WEBPACK_IMPORTED_MODULE_6__["setValue"])(this.hass, stateObj.entity_id, element.value);
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputNumberEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputNumberEntityRow.prototype, "_config", void 0);
HuiInputNumberEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-number-entity-row")
], HuiInputNumberEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts":
/*!************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts ***!
  \************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_item_paper_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-item/paper-item */ "./node_modules/@polymer/paper-item/paper-item.js");
/* harmony import */ var _polymer_paper_listbox_paper_listbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/paper-listbox/paper-listbox */ "./node_modules/@polymer/paper-listbox/paper-listbox.js");
/* harmony import */ var _components_ha_paper_dropdown_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-paper-dropdown-menu */ "./src/components/ha-paper-dropdown-menu.ts");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _data_input_select__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../data/input-select */ "./src/data/input-select.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _data_haptics__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../data/haptics */ "./src/data/haptics.ts");
/* harmony import */ var _common_dom_stop_propagation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/dom/stop_propagation */ "./src/common/dom/stop_propagation.ts");












let HuiInputSelectEntityRow = class HuiInputSelectEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_9__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this.hass || !this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <state-badge .stateObj="${stateObj}"></state-badge>
      <ha-paper-dropdown-menu
        .label=${this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__["computeStateName"])(stateObj)}
        .value=${stateObj.state}
        @iron-select=${this._selectedChanged}
        @click=${_common_dom_stop_propagation__WEBPACK_IMPORTED_MODULE_11__["stopPropagation"]}
      >
        <paper-listbox slot="dropdown-content">
          ${stateObj.attributes.options.map((option) => lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <paper-item>${option}</paper-item>
            `)}
        </paper-listbox>
      </ha-paper-dropdown-menu>
    `;
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (!this.hass || !this._config) {
            return;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return;
        }
        // Update selected after rendering the items or else it won't work in Firefox
        this.shadowRoot.querySelector("paper-listbox").selected = stateObj.attributes.options.indexOf(stateObj.state);
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        display: flex;
        align-items: center;
      }
      ha-paper-dropdown-menu {
        margin-left: 16px;
        flex: 1;
      }

      paper-item {
        cursor: pointer;
        min-width: 200px;
      }
    `;
    }
    _selectedChanged(ev) {
        const stateObj = this.hass.states[this._config.entity];
        const option = ev.target.selectedItem.innerText.trim();
        if (option === stateObj.state) {
            return;
        }
        Object(_data_haptics__WEBPACK_IMPORTED_MODULE_10__["forwardHaptic"])("light");
        Object(_data_input_select__WEBPACK_IMPORTED_MODULE_8__["setInputSelectOption"])(this.hass, stateObj.entity_id, option);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputSelectEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputSelectEntityRow.prototype, "_config", void 0);
HuiInputSelectEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-select-entity-row")
], HuiInputSelectEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts":
/*!**********************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts ***!
  \**********************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _data_input_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../data/input_text */ "./src/data/input_text.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






let HuiInputTextEntityRow = class HuiInputTextEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        <paper-input
          no-label-float
          .value="${stateObj.state}"
          .minlength="${stateObj.attributes.min}"
          .maxlength="${stateObj.attributes.max}"
          .autoValidate="${stateObj.attributes.pattern}"
          .pattern="${stateObj.attributes.pattern}"
          .type="${stateObj.attributes.mode}"
          @change="${this._selectedValueChanged}"
          placeholder="(empty value)"
        ></paper-input>
      </hui-generic-entity-row>
    `;
    }
    get _inputEl() {
        return this.shadowRoot.querySelector("paper-input");
    }
    _selectedValueChanged(ev) {
        const element = this._inputEl;
        const stateObj = this.hass.states[this._config.entity];
        if (element.value !== stateObj.state) {
            Object(_data_input_text__WEBPACK_IMPORTED_MODULE_4__["setValue"])(this.hass, stateObj.entity_id, element.value);
        }
        ev.target.blur();
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputTextEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiInputTextEntityRow.prototype, "_config", void 0);
HuiInputTextEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-text-entity-row")
], HuiInputTextEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");





let HuiLockEntityRow = class HuiLockEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_4__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        <mwc-button @click="${this._callService}">
          ${stateObj.state === "locked"
            ? this.hass.localize("ui.card.lock.unlock")
            : this.hass.localize("ui.card.lock.lock")}
        </mwc-button>
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      mwc-button {
        margin-right: -0.57em;
      }
    `;
    }
    _callService(ev) {
        ev.stopPropagation();
        const stateObj = this.hass.states[this._config.entity];
        this.hass.callService("lock", stateObj.state === "locked" ? "unlock" : "lock", { entity_id: stateObj.entity_id });
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiLockEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiLockEntityRow.prototype, "_config", void 0);
HuiLockEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-lock-entity-row")
], HuiLockEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts":
/*!************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts ***!
  \************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/supports-feature */ "./src/common/entity/supports-feature.ts");
/* harmony import */ var _data_media_player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/media-player */ "./src/data/media-player.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








let HuiMediaPlayerEntityRow = class HuiMediaPlayerEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this.hass || !this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row
        .hass="${this.hass}"
        .config="${this._config}"
        .showSecondary=${false}
      >
        ${_data_media_player__WEBPACK_IMPORTED_MODULE_6__["OFF_STATES"].includes(stateObj.state)
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div>
                ${this.hass.localize(`state.media_player.${stateObj.state}`) ||
                this.hass.localize(`state.default.${stateObj.state}`) ||
                stateObj.state}
              </div>
            `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div class="controls">
                ${stateObj.state !== "playing" &&
                !Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__["supportsFeature"])(stateObj, _data_media_player__WEBPACK_IMPORTED_MODULE_6__["SUPPORTS_PLAY"])
                ? ""
                : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                      <paper-icon-button
                        icon="${this._computeControlIcon(stateObj)}"
                        @click="${this._playPause}"
                      ></paper-icon-button>
                    `}
                ${Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__["supportsFeature"])(stateObj, _data_media_player__WEBPACK_IMPORTED_MODULE_6__["SUPPORT_NEXT_TRACK"])
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                      <paper-icon-button
                        icon="hass:skip-next"
                        @click="${this._nextTrack}"
                      ></paper-icon-button>
                    `
                : ""}
              </div>
              <div slot="secondary">${this._computeMediaTitle(stateObj)}</div>
            `}
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .controls {
        white-space: nowrap;
      }
    `;
    }
    _computeControlIcon(stateObj) {
        if (stateObj.state !== "playing") {
            return "hass:play";
        }
        // tslint:disable-next-line:no-bitwise
        return Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__["supportsFeature"])(stateObj, _data_media_player__WEBPACK_IMPORTED_MODULE_6__["SUPPORT_PAUSE"])
            ? "hass:pause"
            : "hass:stop";
    }
    _computeMediaTitle(stateObj) {
        let prefix;
        let suffix;
        switch (stateObj.attributes.media_content_type) {
            case "music":
                prefix = stateObj.attributes.media_artist;
                suffix = stateObj.attributes.media_title;
                break;
            case "tvshow":
                prefix = stateObj.attributes.media_series_title;
                suffix = stateObj.attributes.media_title;
                break;
            default:
                prefix =
                    stateObj.attributes.media_title ||
                        stateObj.attributes.app_name ||
                        stateObj.state;
                suffix = "";
        }
        return prefix && suffix ? `${prefix}: ${suffix}` : prefix || suffix || "";
    }
    _playPause(ev) {
        ev.stopPropagation();
        this.hass.callService("media_player", "media_play_pause", {
            entity_id: this._config.entity,
        });
    }
    _nextTrack(ev) {
        ev.stopPropagation();
        this.hass.callService("media_player", "media_next_track", {
            entity_id: this._config.entity,
        });
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiMediaPlayerEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiMediaPlayerEntityRow.prototype, "_config", void 0);
HuiMediaPlayerEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-media-player-entity-row")
], HuiMediaPlayerEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






let HuiSceneEntityRow = class HuiSceneEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        ${stateObj.attributes.can_cancel
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-entity-toggle
                .hass="${this.hass}"
                .stateObj="${stateObj}"
              ></ha-entity-toggle>
            `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <mwc-button @click="${this._callService}">
                ${this.hass.localize("ui.card.scene.activate")}
              </mwc-button>
            `}
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      mwc-button {
        margin-right: -0.57em;
      }
    `;
    }
    _callService(ev) {
        ev.stopPropagation();
        this.hass.callService("scene", "turn_on", {
            entity_id: this._config.entity,
        });
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSceneEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSceneEntityRow.prototype, "_config", void 0);
HuiSceneEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-scene-entity-row")
], HuiSceneEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-script-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-script-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






let HuiScriptEntityRow = class HuiScriptEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        ${stateObj.attributes.can_cancel
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-entity-toggle
                .hass="${this.hass}"
                .stateObj="${stateObj}"
              ></ha-entity-toggle>
            `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <mwc-button @click="${this._callService}">
                ${this.hass.localize("ui.card.script.execute")}
              </mwc-button>
            `}
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      mwc-button {
        margin-right: -0.57em;
      }
    `;
    }
    _callService(ev) {
        ev.stopPropagation();
        this.hass.callService("script", "turn_on", {
            entity_id: this._config.entity,
        });
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiScriptEntityRow.prototype, "_config", void 0);
HuiScriptEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-script-entity-row")
], HuiScriptEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_timestamp_display__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-timestamp-display */ "./src/panels/lovelace/components/hui-timestamp-display.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");







let HuiSensorEntityRow = class HuiSensorEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        <div>
          ${stateObj.attributes.device_class === "timestamp" &&
            stateObj.state !== "unavailable"
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <hui-timestamp-display
                  .hass="${this.hass}"
                  .ts="${new Date(stateObj.state)}"
                  .format="${this._config.format}"
                ></hui-timestamp-display>
              `
            : Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_6__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)}
        </div>
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      div {
        text-align: right;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSensorEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSensorEntityRow.prototype, "_config", void 0);
HuiSensorEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-sensor-entity-row")
], HuiSensorEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-text-entity-row.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-text-entity-row.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






let HuiTextEntityRow = class HuiTextEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        <div>
          ${Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)}
        </div>
      </hui-generic-entity-row>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      div {
        text-align: right;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTextEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTextEntityRow.prototype, "_config", void 0);
HuiTextEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-text-entity-row")
], HuiTextEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_timer_time_remaining__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/timer_time_remaining */ "./src/common/entity/timer_time_remaining.ts");
/* harmony import */ var _common_datetime_seconds_to_duration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/datetime/seconds_to_duration */ "./src/common/datetime/seconds_to_duration.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







let HuiTimerEntityRow = class HuiTimerEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    disconnectedCallback() {
        super.disconnectedCallback();
        this._clearInterval();
    }
    connectedCallback() {
        super.connectedCallback();
        if (this._config && this._config.entity) {
            const stateObj = this.hass.states[this._config.entity];
            if (stateObj) {
                this._startInterval(stateObj);
            }
        }
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        <div>${this._computeDisplay(stateObj)}</div>
      </hui-generic-entity-row>
    `;
    }
    shouldUpdate(changedProps) {
        if (changedProps.has("_timeRemaining")) {
            return true;
        }
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (changedProps.has("hass")) {
            const stateObj = this.hass.states[this._config.entity];
            const oldHass = changedProps.get("hass");
            const oldStateObj = oldHass
                ? oldHass.states[this._config.entity]
                : undefined;
            if (oldStateObj !== stateObj) {
                this._startInterval(stateObj);
            }
            else if (!stateObj) {
                this._clearInterval();
            }
        }
    }
    _clearInterval() {
        if (this._interval) {
            window.clearInterval(this._interval);
            this._interval = undefined;
        }
    }
    _startInterval(stateObj) {
        this._clearInterval();
        this._calculateRemaining(stateObj);
        if (stateObj.state === "active") {
            this._interval = window.setInterval(() => this._calculateRemaining(stateObj), 1000);
        }
    }
    _calculateRemaining(stateObj) {
        this._timeRemaining = Object(_common_entity_timer_time_remaining__WEBPACK_IMPORTED_MODULE_4__["timerTimeRemaining"])(stateObj);
    }
    _computeDisplay(stateObj) {
        if (!stateObj) {
            return null;
        }
        if (stateObj.state === "idle" || this._timeRemaining === 0) {
            return this.hass.localize("state.timer." + stateObj.state);
        }
        let display = Object(_common_datetime_seconds_to_duration__WEBPACK_IMPORTED_MODULE_5__["default"])(this._timeRemaining || 0);
        if (stateObj.state === "paused") {
            display += ` (${this.hass.localize("state.timer.paused")})`;
        }
        return display;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTimerEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTimerEntityRow.prototype, "_config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiTimerEntityRow.prototype, "_timeRemaining", void 0);
HuiTimerEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-timer-entity-row")
], HuiTimerEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







let HuiToggleEntityRow = class HuiToggleEntityRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    }
    shouldUpdate(changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    }
    render() {
        if (!this._config || !this.hass) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
        <hui-warning
          >${this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity)}</hui-warning
        >
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}">
        ${stateObj.state === "on" || stateObj.state === "off"
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <ha-entity-toggle
                .hass="${this.hass}"
                .stateObj="${stateObj}"
              ></ha-entity-toggle>
            `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div>
                ${Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)}
              </div>
            `}
      </hui-generic-entity-row>
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiToggleEntityRow.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiToggleEntityRow.prototype, "_config", void 0);
HuiToggleEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-toggle-entity-row")
], HuiToggleEntityRow);


/***/ }),

/***/ "./src/panels/lovelace/ha-panel-lovelace.ts":
/*!**************************************************!*\
  !*** ./src/panels/lovelace/ha-panel-lovelace.ts ***!
  \**************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _material_mwc_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material/mwc-button */ "./node_modules/@material/mwc-button/mwc-button.js");
/* harmony import */ var _data_lovelace__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/lovelace */ "./src/data/lovelace.ts");
/* harmony import */ var _layouts_hass_loading_screen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../layouts/hass-loading-screen */ "./src/layouts/hass-loading-screen.ts");
/* harmony import */ var _layouts_hass_error_screen__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../layouts/hass-error-screen */ "./src/layouts/hass-error-screen.ts");
/* harmony import */ var _hui_root__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hui-root */ "./src/panels/lovelace/hui-root.ts");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _editor_show_save_config_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./editor/show-save-config-dialog */ "./src/panels/lovelace/editor/show-save-config-dialog.ts");
/* harmony import */ var _common_generate_lovelace_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./common/generate-lovelace-config */ "./src/panels/lovelace/common/generate-lovelace-config.ts");
/* harmony import */ var _util_toast__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../util/toast */ "./src/util/toast.ts");










let editorLoaded = false;
class LovelacePanel extends lit_element__WEBPACK_IMPORTED_MODULE_6__["LitElement"] {
    constructor() {
        super();
        this._state = "loading";
        this._ignoreNextUpdateEvent = false;
        this._closeEditor = this._closeEditor.bind(this);
    }
    render() {
        const state = this._state;
        if (state === "loaded") {
            return lit_element__WEBPACK_IMPORTED_MODULE_6__["html"] `
        <hui-root
          .hass="${this.hass}"
          .lovelace="${this.lovelace}"
          .route="${this.route}"
          .columns="${this._columns}"
          .narrow=${this.narrow}
          @config-refresh="${this._forceFetchConfig}"
        ></hui-root>
      `;
        }
        if (state === "error") {
            return lit_element__WEBPACK_IMPORTED_MODULE_6__["html"] `
        <hass-error-screen title="Lovelace" .error="${this._errorMsg}">
          <mwc-button on-click="_forceFetchConfig"
            >${this.hass.localize("ui.panel.lovelace.reload_lovelace")}</mwc-button
          >
        </hass-error-screen>
      `;
        }
        if (state === "yaml-editor") {
            return lit_element__WEBPACK_IMPORTED_MODULE_6__["html"] `
        <hui-editor
          .hass="${this.hass}"
          .lovelace="${this.lovelace}"
          .closeEditor="${this._closeEditor}"
        ></hui-editor>
      `;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_6__["html"] `
      <hass-loading-screen
        rootnav
        .hass=${this.hass}
        .narrow=${this.narrow}
      ></hass-loading-screen>
    `;
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (changedProps.has("narrow")) {
            this._updateColumns();
            return;
        }
        if (!changedProps.has("hass")) {
            return;
        }
        const oldHass = changedProps.get("hass");
        if (oldHass && this.hass.dockedSidebar !== oldHass.dockedSidebar) {
            this._updateColumns();
        }
    }
    firstUpdated() {
        this._fetchConfig(false);
        // we don't want to unsub as we want to stay informed of updates
        Object(_data_lovelace__WEBPACK_IMPORTED_MODULE_2__["subscribeLovelaceUpdates"])(this.hass.connection, () => this._lovelaceChanged());
        // reload lovelace on reconnect so we are sure we have the latest config
        window.addEventListener("connection-status", (ev) => {
            if (ev.detail === "connected") {
                this._fetchConfig(false);
            }
        });
        this._updateColumns = this._updateColumns.bind(this);
        this.mqls = [300, 600, 900, 1200].map((width) => {
            const mql = matchMedia(`(min-width: ${width}px)`);
            mql.addListener(this._updateColumns);
            return mql;
        });
        this._updateColumns();
    }
    connectedCallback() {
        super.connectedCallback();
        if (this.lovelace &&
            this.hass &&
            this.lovelace.language !== this.hass.language) {
            // language has been changed, rebuild UI
            this._setLovelaceConfig(this.lovelace.config, this.lovelace.mode);
        }
        else if (this.lovelace && this.lovelace.mode === "generated") {
            // When lovelace is generated, we re-generate each time a user goes
            // to the states panel to make sure new entities are shown.
            this._state = "loading";
            this._regenerateConfig();
        }
    }
    async _regenerateConfig() {
        const conf = await Object(_common_generate_lovelace_config__WEBPACK_IMPORTED_MODULE_8__["generateLovelaceConfigFromHass"])(this.hass);
        this._setLovelaceConfig(conf, "generated");
        this._state = "loaded";
    }
    _closeEditor() {
        this._state = "loaded";
    }
    _updateColumns() {
        const matchColumns = this.mqls.reduce((cols, mql) => cols + Number(mql.matches), 0);
        // Do -1 column if the menu is docked and open
        this._columns = Math.max(1, matchColumns -
            Number(!this.narrow && this.hass.dockedSidebar === "docked"));
    }
    _lovelaceChanged() {
        if (this._ignoreNextUpdateEvent) {
            this._ignoreNextUpdateEvent = false;
            return;
        }
        Object(_util_toast__WEBPACK_IMPORTED_MODULE_9__["showToast"])(this, {
            message: this.hass.localize("ui.panel.lovelace.changed_toast.message"),
            action: {
                action: () => this._fetchConfig(false),
                text: this.hass.localize("ui.panel.lovelace.changed_toast.refresh"),
            },
            duration: 0,
            dismissable: false,
        });
    }
    _forceFetchConfig() {
        this._fetchConfig(true);
    }
    async _fetchConfig(forceDiskRefresh) {
        let conf;
        let confMode = this.panel.config.mode;
        let confProm;
        const llWindow = window;
        // On first load, we speed up loading page by having LL promise ready
        if (llWindow.llConfProm) {
            confProm = llWindow.llConfProm;
            llWindow.llConfProm = undefined;
        }
        else {
            // Refreshing a YAML config can trigger an update event. We will ignore
            // all update events while fetching the config and for 2 seconds after the cnofig is back.
            // We ignore because we already have the latest config.
            if (this.lovelace && this.lovelace.mode === "yaml") {
                this._ignoreNextUpdateEvent = true;
            }
            confProm = Object(_data_lovelace__WEBPACK_IMPORTED_MODULE_2__["fetchConfig"])(this.hass.connection, forceDiskRefresh);
        }
        try {
            conf = await confProm;
        }
        catch (err) {
            if (err.code !== "config_not_found") {
                // tslint:disable-next-line
                console.log(err);
                this._state = "error";
                this._errorMsg = err.message;
                return;
            }
            conf = await Object(_common_generate_lovelace_config__WEBPACK_IMPORTED_MODULE_8__["generateLovelaceConfigFromHass"])(this.hass);
            confMode = "generated";
        }
        finally {
            // Ignore updates for another 2 seconds.
            if (this.lovelace && this.lovelace.mode === "yaml") {
                setTimeout(() => {
                    this._ignoreNextUpdateEvent = false;
                }, 2000);
            }
        }
        this._state = "loaded";
        this._setLovelaceConfig(conf, confMode);
    }
    _checkLovelaceConfig(config) {
        // Somehow there can be badges with value null, we remove those
        config.views.forEach((view) => {
            if (view.badges) {
                view.badges = view.badges.filter(Boolean);
            }
        });
    }
    _setLovelaceConfig(config, mode) {
        this._checkLovelaceConfig(config);
        this.lovelace = {
            config,
            mode,
            editMode: this.lovelace ? this.lovelace.editMode : false,
            language: this.hass.language,
            enableFullEditMode: () => {
                if (!editorLoaded) {
                    editorLoaded = true;
                    Promise.all(/*! import() | lovelace-yaml-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e(7), __webpack_require__.e("lovelace-yaml-editor")]).then(__webpack_require__.bind(null, /*! ./hui-editor */ "./src/panels/lovelace/hui-editor.ts"));
                }
                this._state = "yaml-editor";
            },
            setEditMode: (editMode) => {
                if (!editMode || this.lovelace.mode !== "generated") {
                    this._updateLovelace({ editMode });
                    return;
                }
                Object(_editor_show_save_config_dialog__WEBPACK_IMPORTED_MODULE_7__["showSaveDialog"])(this, {
                    lovelace: this.lovelace,
                });
            },
            saveConfig: async (newConfig) => {
                const { config: previousConfig, mode: previousMode } = this.lovelace;
                this._checkLovelaceConfig(newConfig);
                try {
                    // Optimistic update
                    this._updateLovelace({
                        config: newConfig,
                        mode: "storage",
                    });
                    this._ignoreNextUpdateEvent = true;
                    await Object(_data_lovelace__WEBPACK_IMPORTED_MODULE_2__["saveConfig"])(this.hass, newConfig);
                }
                catch (err) {
                    // tslint:disable-next-line
                    console.error(err);
                    // Rollback the optimistic update
                    this._updateLovelace({
                        config: previousConfig,
                        mode: previousMode,
                    });
                    throw err;
                }
            },
        };
    }
    _updateLovelace(props) {
        this.lovelace = Object.assign(Object.assign({}, this.lovelace), props);
    }
}
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "panel", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "narrow", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "route", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "_columns", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "_state", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "_errorMsg", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
], LovelacePanel.prototype, "lovelace", void 0);
customElements.define("ha-panel-lovelace", LovelacePanel);


/***/ }),

/***/ "./src/panels/lovelace/hui-root.ts":
/*!*****************************************!*\
  !*** ./src/panels/lovelace/hui-root.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _polymer_app_layout_app_header_layout_app_header_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/app-layout/app-header-layout/app-header-layout */ "./node_modules/@polymer/app-layout/app-header-layout/app-header-layout.js");
/* harmony import */ var _polymer_app_layout_app_header_app_header__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polymer/app-layout/app-header/app-header */ "./node_modules/@polymer/app-layout/app-header/app-header.js");
/* harmony import */ var _polymer_app_layout_app_scroll_effects_effects_waterfall__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polymer/app-layout/app-scroll-effects/effects/waterfall */ "./node_modules/@polymer/app-layout/app-scroll-effects/effects/waterfall.js");
/* harmony import */ var _polymer_app_layout_app_toolbar_app_toolbar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polymer/app-layout/app-toolbar/app-toolbar */ "./node_modules/@polymer/app-layout/app-toolbar/app-toolbar.js");
/* harmony import */ var _polymer_app_route_app_route__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @polymer/app-route/app-route */ "./node_modules/@polymer/app-route/app-route.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _material_mwc_button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material/mwc-button */ "./node_modules/@material/mwc-button/mwc-button.js");
/* harmony import */ var _polymer_paper_item_paper_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @polymer/paper-item/paper-item */ "./node_modules/@polymer/paper-item/paper-item.js");
/* harmony import */ var _polymer_paper_listbox_paper_listbox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @polymer/paper-listbox/paper-listbox */ "./node_modules/@polymer/paper-listbox/paper-listbox.js");
/* harmony import */ var _polymer_paper_menu_button_paper_menu_button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @polymer/paper-menu-button/paper-menu-button */ "./node_modules/@polymer/paper-menu-button/paper-menu-button.js");
/* harmony import */ var _polymer_paper_tabs_paper_tab__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @polymer/paper-tabs/paper-tab */ "./node_modules/@polymer/paper-tabs/paper-tab.js");
/* harmony import */ var _polymer_paper_tabs_paper_tabs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @polymer/paper-tabs/paper-tabs */ "./node_modules/@polymer/paper-tabs/paper-tabs.js");
/* harmony import */ var _common_dom_scroll_to_target__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../common/dom/scroll-to-target */ "./src/common/dom/scroll-to-target.ts");
/* harmony import */ var _layouts_ha_app_layout__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../layouts/ha-app-layout */ "./src/layouts/ha-app-layout.js");
/* harmony import */ var _components_ha_start_voice_button__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../components/ha-start-voice-button */ "./src/components/ha-start-voice-button.js");
/* harmony import */ var _components_ha_paper_icon_button_arrow_next__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../components/ha-paper-icon-button-arrow-next */ "./src/components/ha-paper-icon-button-arrow-next.ts");
/* harmony import */ var _components_ha_paper_icon_button_arrow_prev__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../components/ha-paper-icon-button-arrow-prev */ "./src/components/ha-paper-icon-button-arrow-prev.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../common/util/debounce */ "./src/common/util/debounce.ts");
/* harmony import */ var _common_navigate__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../common/navigate */ "./src/common/navigate.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _editor_config_util__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./editor/config-util */ "./src/panels/lovelace/editor/config-util.ts");
/* harmony import */ var _views_hui_view__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./views/hui-view */ "./src/panels/lovelace/views/hui-view.ts");
/* harmony import */ var _views_hui_panel_view__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./views/hui-panel-view */ "./src/panels/lovelace/views/hui-panel-view.ts");
/* harmony import */ var _editor_view_editor_show_edit_view_dialog__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./editor/view-editor/show-edit-view-dialog */ "./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts");
/* harmony import */ var _editor_lovelace_editor_show_edit_lovelace_dialog__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./editor/lovelace-editor/show-edit-lovelace-dialog */ "./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts");
/* harmony import */ var _common_util_render_status__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../common/util/render-status */ "./src/common/util/render-status.ts");
/* harmony import */ var _resources_styles__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../resources/styles */ "./src/resources/styles.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_load_resources__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./common/load-resources */ "./src/panels/lovelace/common/load-resources.ts");


























// Not a duplicate import, this one is for type
// tslint:disable-next-line








class HUIRoot extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    constructor() {
        super();
        // The view can trigger a re-render when it knows that certain
        // web components have been loaded.
        this._debouncedConfigChanged = Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_21__["debounce"])(() => this._selectView(this._curView, true), 100, false);
    }
    firstUpdated(changedProperties) {
        super.firstUpdated(changedProperties);
        this.classList.toggle("disable-text-select", /Chrome/.test(navigator.userAgent) && /Android/.test(navigator.userAgent));
    }
    render() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
    <app-route .route="${this.route}" pattern="/:view" data="${this._routeData}" @data-changed="${this._routeDataChanged}"></app-route>
    <ha-app-layout id="layout">
      <app-header slot="header" effects="waterfall" class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "edit-mode": this._editMode,
        })}" fixed condenses>
        ${this._editMode
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <app-toolbar class="edit-mode">
                  <paper-icon-button
                    icon="hass:close"
                    @click="${this._editModeDisable}"
                  ></paper-icon-button>
                  <div main-title>
                    ${this.config.title ||
                this.hass.localize("ui.panel.lovelace.editor.header")}
                    <paper-icon-button
                      icon="hass:pencil"
                      class="edit-icon"
                      @click="${this._editLovelace}"
                    ></paper-icon-button>
                  </div>
                  <paper-icon-button
                    icon="hass:help-circle"
                    title="Help"
                    @click="${this._handleHelp}"
                  ></paper-icon-button>
                  <paper-menu-button
                    no-animations
                    horizontal-align="right"
                    horizontal-offset="-5"
                  >
                    <paper-icon-button
                      aria-label="Open Lovelace menu"
                      icon="hass:dots-vertical"
                      slot="dropdown-trigger"
                    ></paper-icon-button>
                    <paper-listbox
                      @iron-select="${this._deselect}"
                      slot="dropdown-content"
                    >
                      ${ false /* No unused entities available in the demo */
                ? undefined
                : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                            <paper-item
                              aria-label=${this.hass.localize("ui.panel.lovelace.menu.unused_entities")}
                              @tap="${this._handleUnusedEntities}"
                            >
                              ${this.hass.localize("ui.panel.lovelace.menu.unused_entities")}
                            </paper-item>
                          `}
                      <paper-item @tap="${this.lovelace.enableFullEditMode}">
                        ${this.hass.localize("ui.panel.lovelace.editor.menu.raw_editor")}
                      </paper-item>
                    </paper-listbox>
                  </paper-menu-button>
                </app-toolbar>
              `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <app-toolbar>
                  <ha-menu-button
                    .hass=${this.hass}
                    .narrow=${this.narrow}
                  ></ha-menu-button>
                  <div main-title>${this.config.title || ""}</div>
                  <ha-start-voice-button
                    .hass="${this.hass}"
                  ></ha-start-voice-button>
                  <paper-menu-button
                    no-animations
                    horizontal-align="right"
                    horizontal-offset="-5"
                  >
                    <paper-icon-button
                      icon="hass:dots-vertical"
                      slot="dropdown-trigger"
                    ></paper-icon-button>
                    <paper-listbox
                      @iron-select="${this._deselect}"
                      slot="dropdown-content"
                    >
                      ${this._yamlMode
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                            <paper-item
                              aria-label=${this.hass.localize("ui.panel.lovelace.menu.refresh")}
                              @tap="${this._handleRefresh}"
                            >
                              ${this.hass.localize("ui.panel.lovelace.menu.refresh")}
                            </paper-item>
                            <paper-item
                              aria-label=${this.hass.localize("ui.panel.lovelace.menu.unused_entities")}
                              @tap="${this._handleUnusedEntities}"
                            >
                              ${this.hass.localize("ui.panel.lovelace.menu.unused_entities")}
                            </paper-item>
                          `
                : ""}
                      ${this.hass.user.is_admin
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                            <paper-item
                              aria-label=${this.hass.localize("ui.panel.lovelace.menu.configure_ui")}
                              @tap="${this._editModeEnable}"
                            >
                              ${this.hass.localize("ui.panel.lovelace.menu.configure_ui")}
                            </paper-item>
                          `
                : ""}
                      <paper-item
                        aria-label=${this.hass.localize("ui.panel.lovelace.menu.help")}
                        @tap="${this._handleHelp}"
                      >
                        ${this.hass.localize("ui.panel.lovelace.menu.help")}
                      </paper-item>
                    </paper-listbox>
                  </paper-menu-button>
                </app-toolbar>
              `}

        ${this.lovelace.config.views.length > 1 || this._editMode
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                <div sticky>
                  <paper-tabs
                    scrollable
                    .selected="${this._curView}"
                    @iron-activate="${this._handleViewSelected}"
                    dir="${Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_31__["computeRTLDirection"])(this.hass)}"
                  >
                    ${this.lovelace.config.views.map((view) => lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                        <paper-tab
                          aria-label="${view.title}"
                          class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
                "hide-tab": Boolean(!this._editMode &&
                    view.visible !== undefined &&
                    ((Array.isArray(view.visible) &&
                        !view.visible.some((e) => e.user === this.hass.user.id)) ||
                        view.visible === false)),
            })}"
                        >
                          ${this._editMode
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                                <ha-paper-icon-button-arrow-prev
                                  title="Move view left"
                                  class="edit-icon view"
                                  @click="${this._moveViewLeft}"
                                  ?disabled="${this._curView === 0}"
                                ></ha-paper-icon-button-arrow-prev>
                              `
                : ""}
                          ${view.icon
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                                <ha-icon
                                  title="${view.title}"
                                  .icon="${view.icon}"
                                ></ha-icon>
                              `
                : view.title || "Unnamed view"}
                          ${this._editMode
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                                <ha-icon
                                  title="Edit view"
                                  class="edit-icon view"
                                  icon="hass:pencil"
                                  @click="${this._editView}"
                                ></ha-icon>
                                <ha-paper-icon-button-arrow-next
                                  title="Move view right"
                                  class="edit-icon view"
                                  @click="${this._moveViewRight}"
                                  ?disabled="${this._curView +
                    1 ===
                    this.lovelace.config.views.length}"
                                ></ha-paper-icon-button-arrow-next>
                              `
                : ""}
                        </paper-tab>
                      `)}
                    ${this._editMode
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
                          <paper-icon-button
                            id="add-view"
                            @click="${this._addView}"
                            title="${this.hass.localize("ui.panel.lovelace.editor.edit_view.add")}"
                            icon="hass:plus"
                          ></paper-icon-button>
                        `
                : ""}
                  </paper-tabs>
                </div>
              `
            : ""}
      </app-header>
      <div id='view' class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "tabs-hidden": this.lovelace.config.views.length < 2,
        })}" @ll-rebuild='${this._debouncedConfigChanged}'></div>
    </app-header-layout>
    `;
    }
    static get styles() {
        return [
            _resources_styles__WEBPACK_IMPORTED_MODULE_30__["haStyle"],
            lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
        :host {
          --dark-color: #455a64;
          --text-dark-color: #fff;
        }

        :host(.disable-text-select) {
          -ms-user-select: none;
          -webkit-user-select: none;
          -moz-user-select: none;
        }

        ha-app-layout {
          min-height: 100%;
        }
        paper-menu-button {
          padding: 0;
        }
        paper-tabs {
          margin-left: 12px;
          --paper-tabs-selection-bar-color: var(--text-primary-color, #fff);
          text-transform: uppercase;
        }
        .edit-mode {
          background-color: var(--dark-color, #455a64);
          color: var(--text-dark-color);
        }
        .edit-mode div[main-title] {
          pointer-events: auto;
        }
        paper-tab.iron-selected .edit-icon {
          display: inline-flex;
        }
        .edit-icon {
          color: var(--accent-color);
          padding-left: 8px;
        }
        .edit-icon[disabled] {
          color: var(--disabled-text-color);
        }
        .edit-icon.view {
          display: none;
        }
        #add-view {
          position: absolute;
          height: 44px;
        }
        #add-view ha-icon {
          background-color: var(--accent-color);
          border-radius: 5px;
          margin-top: 4px;
        }
        app-toolbar a {
          color: var(--text-primary-color, white);
        }
        mwc-button.warning:not([disabled]) {
          color: var(--google-red-500);
        }
        #view {
          min-height: calc(100vh - 112px);
          /**
          * Since we only set min-height, if child nodes need percentage
          * heights they must use absolute positioning so we need relative
          * positioning here.
          *
          * https://www.w3.org/TR/CSS2/visudet.html#the-height-property
          */
          position: relative;
          display: flex;
        }
        #view > * {
          /**
          * The view could get larger than the window in Firefox
          * to prevent that we set the max-width to 100%
          * flex-grow: 1 and flex-basis: 100% should make sure the view
          * stays full width.
          *
          * https://github.com/home-assistant/home-assistant-polymer/pull/3806
          */
          flex: 1 1 100%;
          max-width: 100%;
        }
        #view.tabs-hidden {
          min-height: calc(100vh - 64px);
        }
        paper-item {
          cursor: pointer;
        }
        .hide-tab {
          display: none;
        }
      `,
        ];
    }
    updated(changedProperties) {
        super.updated(changedProperties);
        const view = this._viewRoot;
        const huiView = view.lastChild;
        if (changedProperties.has("columns") &&
            huiView &&
            huiView instanceof _views_hui_view__WEBPACK_IMPORTED_MODULE_25__["HUIView"]) {
            huiView.columns = this.columns;
        }
        if (changedProperties.has("hass") && huiView) {
            huiView.hass = this.hass;
        }
        let newSelectView;
        let force = false;
        if (changedProperties.has("route")) {
            const views = this.config && this.config.views;
            if (this.route.path === "" &&
                this.route.prefix === "/lovelace" &&
                views) {
                Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, `/lovelace/${views[0].path || 0}`, true);
                newSelectView = 0;
            }
            else if (this._routeData.view === "hass-unused-entities") {
                newSelectView = "hass-unused-entities";
            }
            else if (this._routeData.view) {
                const selectedView = this._routeData.view;
                const selectedViewInt = parseInt(selectedView, 10);
                let index = 0;
                for (let i = 0; i < views.length; i++) {
                    if (views[i].path === selectedView || i === selectedViewInt) {
                        index = i;
                        break;
                    }
                }
                newSelectView = index;
            }
        }
        if (changedProperties.has("lovelace")) {
            const oldLovelace = changedProperties.get("lovelace");
            if (!oldLovelace || oldLovelace.config !== this.lovelace.config) {
                if (this.lovelace.config.resources) {
                    Object(_common_load_resources__WEBPACK_IMPORTED_MODULE_32__["loadLovelaceResources"])(this.lovelace.config.resources, this.hass.auth.data.hassUrl);
                }
                // On config change, recreate the current view from scratch.
                force = true;
                // Recalculate to see if we need to adjust content area for tab bar
                Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
            }
            if (!oldLovelace || oldLovelace.editMode !== this.lovelace.editMode) {
                // Leave unused entities when leaving edit mode
                if (this.lovelace.mode === "storage" &&
                    this._routeData.view === "hass-unused-entities") {
                    const views = this.config && this.config.views;
                    Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, `/lovelace/${views[0].path || 0}`);
                    newSelectView = 0;
                }
                // On edit mode change, recreate the current view from scratch
                force = true;
                // Recalculate to see if we need to adjust content area for tab bar
                Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
            }
        }
        if (newSelectView !== undefined || force) {
            if (force && newSelectView === undefined) {
                newSelectView = this._curView;
            }
            // Will allow for ripples to start rendering
            Object(_common_util_render_status__WEBPACK_IMPORTED_MODULE_29__["afterNextRender"])(() => this._selectView(newSelectView, force));
        }
    }
    get config() {
        return this.lovelace.config;
    }
    get _yamlMode() {
        return this.lovelace.mode === "yaml";
    }
    get _editMode() {
        return this.lovelace.editMode;
    }
    get _layout() {
        return this.shadowRoot.getElementById("layout");
    }
    get _viewRoot() {
        return this.shadowRoot.getElementById("view");
    }
    _routeDataChanged(ev) {
        this._routeData = ev.detail.value;
    }
    _handleRefresh() {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "config-refresh");
    }
    _handleUnusedEntities() {
        Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, `/lovelace/hass-unused-entities`);
    }
    _deselect(ev) {
        ev.target.selected = null;
    }
    _handleHelp() {
        window.open("https://www.home-assistant.io/lovelace/", "_blank");
    }
    _editModeEnable() {
        if (this._yamlMode) {
            window.alert("The edit UI is not available when in YAML mode.");
            return;
        }
        this.lovelace.setEditMode(true);
        if (this.config.views.length < 2) {
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
        }
    }
    _editModeDisable() {
        this.lovelace.setEditMode(false);
        if (this.config.views.length < 2) {
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
        }
    }
    _editLovelace() {
        Object(_editor_lovelace_editor_show_edit_lovelace_dialog__WEBPACK_IMPORTED_MODULE_28__["showEditLovelaceDialog"])(this, this.lovelace);
    }
    _editView() {
        Object(_editor_view_editor_show_edit_view_dialog__WEBPACK_IMPORTED_MODULE_27__["showEditViewDialog"])(this, {
            lovelace: this.lovelace,
            viewIndex: this._curView,
        });
    }
    _moveViewLeft() {
        const lovelace = this.lovelace;
        const oldIndex = this._curView;
        const newIndex = this._curView - 1;
        this._curView = newIndex;
        lovelace.saveConfig(Object(_editor_config_util__WEBPACK_IMPORTED_MODULE_24__["swapView"])(lovelace.config, oldIndex, newIndex));
    }
    _moveViewRight() {
        const lovelace = this.lovelace;
        const oldIndex = this._curView;
        const newIndex = this._curView + 1;
        this._curView = newIndex;
        lovelace.saveConfig(Object(_editor_config_util__WEBPACK_IMPORTED_MODULE_24__["swapView"])(lovelace.config, oldIndex, newIndex));
    }
    _addView() {
        Object(_editor_view_editor_show_edit_view_dialog__WEBPACK_IMPORTED_MODULE_27__["showEditViewDialog"])(this, {
            lovelace: this.lovelace,
        });
    }
    _handleViewSelected(ev) {
        const viewIndex = ev.detail.selected;
        if (viewIndex !== this._curView) {
            const path = this.config.views[viewIndex].path || viewIndex;
            Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, `/lovelace/${path}`);
        }
        Object(_common_dom_scroll_to_target__WEBPACK_IMPORTED_MODULE_15__["default"])(this, this._layout.header.scrollTarget);
    }
    _selectView(viewIndex, force) {
        if (!force && this._curView === viewIndex) {
            return;
        }
        viewIndex = viewIndex === undefined ? 0 : viewIndex;
        this._curView = viewIndex;
        if (force) {
            this._viewCache = {};
        }
        // Recreate a new element to clear the applied themes.
        const root = this._viewRoot;
        if (root.lastChild) {
            root.removeChild(root.lastChild);
        }
        if (viewIndex === "hass-unused-entities") {
            const unusedEntities = document.createElement("hui-unused-entities");
            // Wait for promise to resolve so that the element has been upgraded.
            Promise.all(/*! import() | hui-unused-entities */[__webpack_require__.e("vendors~hui-unused-entities~panel-config-devices~panel-config-entity-registry~panel-config-integrations"), __webpack_require__.e("hui-unused-entities~panel-config-devices~panel-config-entity-registry~panel-config-integrations"), __webpack_require__.e("hui-unused-entities")]).then(__webpack_require__.bind(null, /*! ./editor/unused-entities/hui-unused-entities */ "./src/panels/lovelace/editor/unused-entities/hui-unused-entities.ts")).then(() => {
                unusedEntities.hass = this.hass;
                unusedEntities.lovelace = this.lovelace;
                unusedEntities.narrow = this.narrow;
            });
            if (this.config.background) {
                unusedEntities.style.setProperty("--lovelace-background", this.config.background);
            }
            root.append(unusedEntities);
            return;
        }
        let view;
        const viewConfig = this.config.views[viewIndex];
        if (!viewConfig) {
            this._editModeEnable();
            return;
        }
        if (!force && this._viewCache[viewIndex]) {
            view = this._viewCache[viewIndex];
        }
        else {
            if (viewConfig.panel && viewConfig.cards && viewConfig.cards.length > 0) {
                view = document.createElement("hui-panel-view");
                view.config = viewConfig;
            }
            else {
                view = document.createElement("hui-view");
                view.lovelace = this.lovelace;
                view.columns = this.columns;
                view.index = viewIndex;
            }
            this._viewCache[viewIndex] = view;
        }
        view.hass = this.hass;
        const configBackground = viewConfig.background || this.config.background;
        if (configBackground) {
            view.style.setProperty("--lovelace-background", configBackground);
        }
        root.append(view);
    }
}
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIRoot.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIRoot.prototype, "lovelace", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIRoot.prototype, "columns", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIRoot.prototype, "narrow", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIRoot.prototype, "route", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIRoot.prototype, "_routeData", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIRoot.prototype, "_curView", void 0);
customElements.define("hui-root", HUIRoot);


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-call-service-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-call-service-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _material_mwc_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material/mwc-button */ "./node_modules/@material/mwc-button/mwc-button.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_call_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/call-service */ "./src/panels/lovelace/common/call-service.ts");





let HuiCallServiceRow = class HuiCallServiceRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config || !config.name || !config.service) {
            throw new Error("Error in card configuration.");
        }
        this._config = Object.assign({ icon: "hass:remote", action_name: "Run" }, config);
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-icon .icon="${this._config.icon}"></ha-icon>
      <div class="flex">
        <div>${this._config.name}</div>
        <mwc-button @click="${this._callService}"
          >${this._config.action_name}</mwc-button
        >
      </div>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        display: flex;
        align-items: center;
      }
      ha-icon {
        padding: 8px;
        color: var(--paper-item-icon-color);
      }
      .flex {
        flex: 1;
        overflow: hidden;
        margin-left: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .flex div {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      mwc-button {
        margin-right: -0.57em;
      }
    `;
    }
    _callService() {
        Object(_common_call_service__WEBPACK_IMPORTED_MODULE_4__["callService"])(this._config, this.hass);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiCallServiceRow.prototype, "_config", void 0);
HuiCallServiceRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-call-service-row")
], HuiCallServiceRow);


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-cast-row.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-cast-row.ts ***!
  \**********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _cast_receiver_messages__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../cast/receiver_messages */ "./src/cast/receiver_messages.ts");





let HuiCastRow = class HuiCastRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    constructor() {
        super(...arguments);
        this._noHTTPS = false;
    }
    setConfig(config) {
        if (!config || config.view === undefined || config.view === null) {
            throw new Error("Invalid Configuration: 'view' required");
        }
        this._config = Object.assign({ icon: "hass:television", name: " Cast" }, config);
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const active = this._castManager &&
            this._castManager.status &&
            this._config.view === this._castManager.status.lovelacePath;
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <ha-icon .icon="${this._config.icon}"></ha-icon>
      <div class="flex">
        <div class="name">${this._config.name}</div>
        ${this._noHTTPS
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              Cast requires HTTPS
            `
            : this._castManager === undefined
                ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``
                : this._castManager === null
                    ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              Cast API unavailable
            `
                    : this._castManager.castState === "NO_DEVICES_AVAILABLE"
                        ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              No devices found
            `
                        : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
              <div class="controls">
                <google-cast-launcher></google-cast-launcher>
                <mwc-button
                  @click=${this._sendLovelace}
                  class=${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({ inactive: !Boolean(active) })}
                  .unelevated=${active}
                  .disabled=${!this._castManager.status}
                >
                  SHOW
                </mwc-button>
              </div>
            `}
      </div>
    `;
    }
    firstUpdated(changedProps) {
        super.firstUpdated(changedProps);
        if (location.protocol === "http:" && location.hostname !== "localhost") {
            this._noHTTPS = true;
        }
        __webpack_require__.e(/*! import() */ 19).then(__webpack_require__.bind(null, /*! ../../../cast/cast_manager */ "./src/cast/cast_manager.ts")).then(({ getCastManager }) => getCastManager(this.hass.auth).then((mgr) => {
            this._castManager = mgr;
            mgr.addEventListener("connection-changed", () => {
                this.requestUpdate();
            });
            mgr.addEventListener("state-changed", () => {
                this.requestUpdate();
            });
        }, () => {
            this._castManager = null;
        }));
    }
    updated(changedProps) {
        super.updated(changedProps);
        if (this._config && this._config.hide_if_unavailable) {
            this.style.display =
                !this._castManager ||
                    this._castManager.castState === "NO_DEVICES_AVAILABLE"
                    ? "none"
                    : "";
        }
    }
    async _sendLovelace() {
        await Object(_cast_receiver_messages__WEBPACK_IMPORTED_MODULE_4__["ensureConnectedCastSession"])(this._castManager, this.hass.auth);
        Object(_cast_receiver_messages__WEBPACK_IMPORTED_MODULE_4__["castSendShowLovelaceView"])(this._castManager, this._config.view);
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      :host {
        display: flex;
        align-items: center;
      }
      ha-icon {
        padding: 8px;
        color: var(--paper-item-icon-color);
      }
      .flex {
        flex: 1;
        margin-left: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .name {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .controls {
        display: flex;
        align-items: center;
      }
      google-cast-launcher {
        margin-right: 0.57em;
        cursor: pointer;
        display: inline-block;
        height: 24px;
        width: 24px;
      }
      .inactive {
        padding: 0 4px;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiCastRow.prototype, "_config", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiCastRow.prototype, "_castManager", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiCastRow.prototype, "_noHTTPS", void 0);
HuiCastRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-cast-row")
], HuiCastRow);


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-divider-row.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-divider-row.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


let HuiDividerRow = class HuiDividerRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Error in card configuration.");
        }
        this._config = Object.assign({ style: {
                height: "1px",
                "background-color": "var(--secondary-text-color)",
            } }, config);
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        const el = document.createElement("div");
        Object.keys(this._config.style).forEach((prop) => {
            el.style.setProperty(prop, this._config.style[prop]);
        });
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      ${el}
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiDividerRow.prototype, "_config", void 0);
HuiDividerRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-divider-row")
], HuiDividerRow);


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-section-row.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-section-row.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");



let HuiSectionRow = class HuiSectionRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config) {
            throw new Error("Error in card configuration.");
        }
        this._config = config;
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <div class="divider"></div>
      ${this._config.label
            ? lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
            <div class="label">${this._config.label}</div>
          `
            : lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``}
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      .label {
        color: var(--primary-color);
        margin-left: 8px;
        margin-bottom: 16px;
        margin-top: 16px;
      }
      .divider {
        height: 1px;
        background-color: var(--secondary-text-color);
        opacity: 0.25;
        margin-left: -16px;
        margin-right: -16px;
        margin-top: 8px;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiSectionRow.prototype, "_config", void 0);
HuiSectionRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-section-row")
], HuiSectionRow);


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-weblink-row.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-weblink-row.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");



let HuiWeblinkRow = class HuiWeblinkRow extends lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"] {
    setConfig(config) {
        if (!config || !config.url) {
            throw new Error("Invalid Configuration: 'url' required");
        }
        this._config = Object.assign({ icon: "hass:link", name: config.url }, config);
    }
    render() {
        if (!this._config) {
            return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] ``;
        }
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["html"] `
      <a
        href=${this._config.url}
        target=${this._config.url.indexOf("://") !== -1 ? "_blank" : ""}
      >
        <ha-icon .icon="${this._config.icon}"></ha-icon>
        <div>${this._config.name}</div>
      </a>
    `;
    }
    static get styles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_1__["css"] `
      a {
        display: flex;
        align-items: center;
        color: var(--primary-color);
      }
      ha-icon {
        padding: 8px;
        color: var(--paper-item-icon-color);
      }
      div {
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-left: 16px;
      }
    `;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HuiWeblinkRow.prototype, "_config", void 0);
HuiWeblinkRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-weblink-row")
], HuiWeblinkRow);


/***/ }),

/***/ "./src/panels/lovelace/views/hui-panel-view.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/views/hui-panel-view.ts ***!
  \*****************************************************/
/*! exports provided: HUIPanelView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HUIPanelView", function() { return HUIPanelView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");




let HUIPanelView = class HUIPanelView extends lit_element__WEBPACK_IMPORTED_MODULE_1__["UpdatingElement"] {
    firstUpdated(changedProperties) {
        super.firstUpdated(changedProperties);
        this.style.setProperty("background", "var(--lovelace-background)");
    }
    update(changedProperties) {
        super.update(changedProperties);
        const hass = this.hass;
        const hassChanged = changedProperties.has("hass");
        const oldHass = changedProperties.get("hass");
        const configChanged = changedProperties.has("config");
        if (configChanged) {
            this._createCard();
        }
        else if (hassChanged) {
            this.lastChild.hass = this.hass;
        }
        if (configChanged ||
            (hassChanged &&
                oldHass &&
                (hass.themes !== oldHass.themes ||
                    hass.selectedTheme !== oldHass.selectedTheme))) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_2__["default"])(this, hass.themes, this.config.theme);
        }
    }
    _createCard() {
        if (this.lastChild) {
            this.removeChild(this.lastChild);
        }
        const card = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_3__["createCardElement"])(this.config.cards[0]);
        card.hass = this.hass;
        card.isPanel = true;
        this.append(card);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIPanelView.prototype, "hass", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
], HUIPanelView.prototype, "config", void 0);
HUIPanelView = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-panel-view")
], HUIPanelView);



/***/ }),

/***/ "./src/panels/lovelace/views/hui-view.ts":
/*!***********************************************!*\
  !*** ./src/panels/lovelace/views/hui-view.ts ***!
  \***********************************************/
/*! exports provided: HUIView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HUIView", function() { return HUIView; });
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_ha_state_label_badge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/entity/ha-state-label-badge */ "./src/components/entity/ha-state-label-badge.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _editor_card_editor_show_edit_card_dialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../editor/card-editor/show-edit-card-dialog */ "./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");









let editCodeLoaded = false;
// Find column with < 5 entities, else column with lowest count
const getColumnIndex = (columnEntityCount, size) => {
    let minIndex = 0;
    for (let i = 0; i < columnEntityCount.length; i++) {
        if (columnEntityCount[i] < 5) {
            minIndex = i;
            break;
        }
        if (columnEntityCount[i] < columnEntityCount[minIndex]) {
            minIndex = i;
        }
    }
    columnEntityCount[minIndex] += size;
    return minIndex;
};
class HUIView extends lit_element__WEBPACK_IMPORTED_MODULE_0__["LitElement"] {
    constructor() {
        super();
        this._cards = [];
        this._badges = [];
    }
    static get properties() {
        return {
            hass: {},
            lovelace: {},
            columns: { type: Number },
            index: { type: Number },
            _cards: {},
            _badges: {},
        };
    }
    // Public to make demo happy
    createCardElement(cardConfig) {
        const element = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_4__["createCardElement"])(cardConfig);
        element.hass = this.hass;
        element.addEventListener("ll-rebuild", (ev) => {
            // In edit mode let it go to hui-root and rebuild whole view.
            if (!this.lovelace.editMode) {
                ev.stopPropagation();
                this._rebuildCard(element, cardConfig);
            }
        }, { once: true });
        return element;
    }
    render() {
        return lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] `
      ${this.renderStyles()}
      <div id="badges"></div>
      <div id="columns"></div>
      ${this.lovelace.editMode
            ? lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] `
            <ha-fab
              icon="hass:plus"
              title="${this.hass.localize("ui.panel.lovelace.editor.edit_card.add")}"
              @click="${this._addCard}"
              class="${Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_3__["classMap"])({
                rtl: Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__["computeRTL"])(this.hass),
            })}"
            ></ha-fab>
          `
            : ""}
    `;
    }
    renderStyles() {
        return lit_element__WEBPACK_IMPORTED_MODULE_0__["html"] `
      <style>
        :host {
          display: block;
          box-sizing: border-box;
          padding: 4px 4px 0;
          transform: translateZ(0);
          position: relative;
          background: var(--lovelace-background);
        }

        #badges {
          margin: 8px 16px;
          font-size: 85%;
          text-align: center;
        }

        #columns {
          display: flex;
          flex-direction: row;
          justify-content: center;
        }

        .column {
          flex-basis: 0;
          flex-grow: 1;
          max-width: 500px;
        }

        .column > * {
          display: block;
          margin: 4px 4px 8px;
        }

        ha-fab {
          position: sticky;
          float: right;
          bottom: 16px;
          right: 16px;
          z-index: 1;
        }

        ha-fab.rtl {
          float: left;
          right: auto;
          left: 16px;
        }

        @media (max-width: 500px) {
          :host {
            padding-left: 0;
            padding-right: 0;
          }

          .column > * {
            margin-left: 0;
            margin-right: 0;
          }
        }

        @media (max-width: 599px) {
          .column {
            max-width: 600px;
          }
        }
      </style>
    `;
    }
    updated(changedProperties) {
        super.updated(changedProperties);
        const hass = this.hass;
        const lovelace = this.lovelace;
        if (lovelace.editMode && !editCodeLoaded) {
            editCodeLoaded = true;
            __webpack_require__.e(/*! import() | hui-view-editable */ "hui-view-editable").then(__webpack_require__.bind(null, /*! ./hui-view-editable */ "./src/panels/lovelace/views/hui-view-editable.ts"));
        }
        const hassChanged = changedProperties.has("hass");
        let editModeChanged = false;
        let configChanged = false;
        if (changedProperties.has("index")) {
            configChanged = true;
        }
        else if (changedProperties.has("lovelace")) {
            const oldLovelace = changedProperties.get("lovelace");
            editModeChanged =
                !oldLovelace || lovelace.editMode !== oldLovelace.editMode;
            configChanged = !oldLovelace || lovelace.config !== oldLovelace.config;
        }
        if (configChanged) {
            this._createBadges(lovelace.config.views[this.index]);
        }
        else if (hassChanged) {
            this._badges.forEach((badge) => {
                const { element, entityId } = badge;
                element.hass = hass;
                element.state = hass.states[entityId];
            });
        }
        if (configChanged || editModeChanged || changedProperties.has("columns")) {
            this._createCards(lovelace.config.views[this.index]);
        }
        else if (hassChanged) {
            this._cards.forEach((element) => {
                element.hass = this.hass;
            });
        }
        const oldHass = changedProperties.get("hass");
        if (configChanged ||
            editModeChanged ||
            (hassChanged &&
                oldHass &&
                (hass.themes !== oldHass.themes ||
                    hass.selectedTheme !== oldHass.selectedTheme))) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_2__["default"])(this, hass.themes, lovelace.config.views[this.index].theme);
        }
    }
    _addCard() {
        Object(_editor_card_editor_show_edit_card_dialog__WEBPACK_IMPORTED_MODULE_6__["showEditCardDialog"])(this, {
            lovelace: this.lovelace,
            path: [this.index],
        });
    }
    _createBadges(config) {
        const root = this.shadowRoot.getElementById("badges");
        while (root.lastChild) {
            root.removeChild(root.lastChild);
        }
        if (!config || !config.badges || !Array.isArray(config.badges)) {
            root.style.display = "none";
            this._badges = [];
            return;
        }
        const elements = [];
        const badges = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_8__["processConfigEntities"])(config.badges);
        for (const badge of badges) {
            const element = document.createElement("ha-state-label-badge");
            const entityId = badge.entity;
            element.hass = this.hass;
            element.state = this.hass.states[entityId];
            element.name = badge.name;
            element.icon = badge.icon;
            element.image = badge.image;
            elements.push({ element, entityId });
            root.appendChild(element);
        }
        this._badges = elements;
        root.style.display = elements.length > 0 ? "block" : "none";
    }
    _createCards(config) {
        const root = this.shadowRoot.getElementById("columns");
        while (root.lastChild) {
            root.removeChild(root.lastChild);
        }
        if (!config || !config.cards || !Array.isArray(config.cards)) {
            this._cards = [];
            return;
        }
        const elements = [];
        const elementsToAppend = [];
        config.cards.forEach((cardConfig, cardIndex) => {
            const element = this.createCardElement(cardConfig);
            elements.push(element);
            if (!this.lovelace.editMode) {
                elementsToAppend.push(element);
                return;
            }
            const wrapper = document.createElement("hui-card-options");
            wrapper.hass = this.hass;
            wrapper.lovelace = this.lovelace;
            wrapper.path = [this.index, cardIndex];
            wrapper.appendChild(element);
            elementsToAppend.push(wrapper);
        });
        let columns = [];
        const columnEntityCount = [];
        for (let i = 0; i < this.columns; i++) {
            columns.push([]);
            columnEntityCount.push(0);
        }
        elements.forEach((el, index) => {
            const cardSize = Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_5__["computeCardSize"])(el);
            // Element to append might be the wrapped card when we're editing.
            columns[getColumnIndex(columnEntityCount, cardSize)].push(elementsToAppend[index]);
        });
        // Remove empty columns
        columns = columns.filter((val) => val.length > 0);
        columns.forEach((column) => {
            const columnEl = document.createElement("div");
            columnEl.classList.add("column");
            column.forEach((el) => columnEl.appendChild(el));
            root.appendChild(columnEl);
        });
        this._cards = elements;
    }
    _rebuildCard(cardElToReplace, config) {
        const newCardEl = this.createCardElement(config);
        cardElToReplace.parentElement.replaceChild(newCardEl, cardElToReplace);
        this._cards = this._cards.map((curCardEl) => curCardEl === cardElToReplace ? newCardEl : curCardEl);
    }
}
customElements.define("hui-view", HUIView);


/***/ }),

/***/ "./src/panels/map/ha-entity-marker.js":
/*!********************************************!*\
  !*** ./src/panels/map/ha-entity-marker.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _polymer_iron_image_iron_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/iron-image/iron-image */ "./node_modules/@polymer/iron-image/iron-image.js");
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/* harmony import */ var _mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../mixins/events-mixin */ "./src/mixins/events-mixin.js");






/*
 * @appliesMixin EventsMixin
 */
class HaEntityMarker extends Object(_mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__["EventsMixin"])(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_2__["PolymerElement"]) {
  static get template() {
    return _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_1__["html"]`
      <style include="iron-positioning"></style>
      <style>
        .marker {
          vertical-align: top;
          position: relative;
          display: block;
          margin: 0 auto;
          width: 2.5em;
          text-align: center;
          height: 2.5em;
          line-height: 2.5em;
          font-size: 1.5em;
          border-radius: 50%;
          border: 0.1em solid
            var(--ha-marker-color, var(--default-primary-color));
          color: rgb(76, 76, 76);
          background-color: white;
        }
        iron-image {
          border-radius: 50%;
        }
      </style>

      <div class="marker">
        <template is="dom-if" if="[[entityName]]"
          >[[entityName]]</template
        >
        <template is="dom-if" if="[[entityPicture]]">
          <iron-image
            sizing="cover"
            class="fit"
            src="[[entityPicture]]"
          ></iron-image>
        </template>
      </div>
    `;
  }

  static get properties() {
    return {
      hass: {
        type: Object,
      },

      entityId: {
        type: String,
        value: "",
      },

      entityName: {
        type: String,
        value: null,
      },

      entityPicture: {
        type: String,
        value: null,
      },
    };
  }

  ready() {
    super.ready();
    this.addEventListener("click", (ev) => this.badgeTap(ev));
  }

  badgeTap(ev) {
    ev.stopPropagation();
    if (this.entityId) {
      this.fire("hass-more-info", { entityId: this.entityId });
    }
  }
}

customElements.define("ha-entity-marker", HaEntityMarker);


/***/ }),

/***/ "./src/resources/jquery.roundslider.ondemand.ts":
/*!******************************************************!*\
  !*** ./src/resources/jquery.roundslider.ondemand.ts ***!
  \******************************************************/
/*! exports provided: loadRoundslider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadRoundslider", function() { return loadRoundslider; });
let loaded;
const loadRoundslider = async () => {
    if (!loaded) {
        loaded = Promise.all(/*! import() | jquery-roundslider */[__webpack_require__.e("vendors~jquery-roundslider"), __webpack_require__.e("jquery-roundslider")]).then(__webpack_require__.bind(null, /*! ./jquery.roundslider */ "./src/resources/jquery.roundslider.js"));
    }
    return loaded;
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFuZWwtbG92ZWxhY2UuY2h1bmsuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY2FzdC9jb25zdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FzdC9kZXZfY29uc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nhc3QvcmVjZWl2ZXJfbWVzc2FnZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kb20vbG9hZF9yZXNvdXJjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RvbS9zY3JvbGwtdG8tdGFyZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZG9tL3NldHVwLWxlYWZsZXQtbWFwLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZW50aXR5L3ZhbGlkX2VudGl0eV9pZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3N0cmluZy9jb21wYXJlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9kZWJvdW5jZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9yZW5kZXItc3RhdHVzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9zdWJzY3JpYmUtb25lLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2J1dHRvbnMvaGEtY2FsbC1zZXJ2aWNlLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9idXR0b25zL2hhLXByb2dyZXNzLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9oYS1kYXRlLWlucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2hhLXBhcGVyLWRyb3Bkb3duLW1lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvaGEtcGFwZXItaWNvbi1idXR0b24tYXJyb3ctbmV4dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wYXBlci10aW1lLWlucHV0LmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2FsYXJtX2NvbnRyb2xfcGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEvYXJlYV9yZWdpc3RyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9kZXZpY2VfcmVnaXN0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEvZW50aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2VudGl0eV9yZWdpc3RyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9pbnB1dF9kYXRldGltZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9pbnB1dF90ZXh0LnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2xpZ2h0LnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2xvdmVsYWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL3Nob3BwaW5nLWxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEvd3MtdGVtcGxhdGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWFsYXJtLXBhbmVsLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktY29uZGl0aW9uYWwtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1lbnRpdGllcy1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWVudGl0eS1idXR0b24tY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1lbnRpdHktZmlsdGVyLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktZXJyb3ItY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1nYXVnZS1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWdsYW5jZS1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWhpc3RvcnktZ3JhcGgtY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1ob3Jpem9udGFsLXN0YWNrLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktaWZyYW1lLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktbGVnYWN5LXdyYXBwZXItY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1saWdodC1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLW1hcC1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLW1hcmtkb3duLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktbWVkaWEtY29udHJvbC1jYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXBpY3R1cmUtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1waWN0dXJlLWVsZW1lbnRzLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktcGljdHVyZS1lbnRpdHktY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1waWN0dXJlLWdsYW5jZS1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXBsYW50LXN0YXR1cy1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXNlbnNvci1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXNob3BwaW5nLWxpc3QtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1zdGFjay1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXRoZXJtb3N0YXQtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS12ZXJ0aWNhbC1zdGFjay1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXdlYXRoZXItZm9yZWNhc3QtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL3BpY3R1cmUtZWxlbWVudHMvY3JlYXRlLXN0eWxlZC1odWktZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9jYWxsLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vY29tcHV0ZS1jYXJkLXNpemUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vY29tcHV0ZS10b29sdGlwLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2NyZWF0ZS1jYXJkLWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vY3JlYXRlLWh1aS1lbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2NyZWF0ZS1yb3ctZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9kaXJlY3RpdmVzL2xvbmctcHJlc3MtZGlyZWN0aXZlLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2VudGl0eS90b2dnbGUtZW50aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2VudGl0eS90dXJuLW9uLW9mZi1lbnRpdGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9lbnRpdHkvdHVybi1vbi1vZmYtZW50aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2V2YWx1YXRlLWZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9nZW5lcmF0ZS1sb3ZlbGFjZS1jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vaGFuZGxlLWNsaWNrLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2hhcy1jaGFuZ2VkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2xvYWQtcmVzb3VyY2VzLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL3ZhbGlkYXRlLWNvbmRpdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWVudGl0aWVzLXRvZ2dsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWltYWdlLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tcG9uZW50cy9odWktdGltZXN0YW1wLWRpc3BsYXkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21wb25lbnRzL2h1aS11bmF2YWlsYWJsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLXdhcm5pbmctZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLXdhcm5pbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lZGl0b3IvY2FyZC1lZGl0b3Ivc2hvdy1lZGl0LWNhcmQtZGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL2NvbmZpZy11dGlsLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL2xvdmVsYWNlLWVkaXRvci9zaG93LWVkaXQtbG92ZWxhY2UtZGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL3Nob3ctc2F2ZS1jb25maWctZGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL3ZpZXctZWRpdG9yL3Nob3ctZWRpdC12aWV3LWRpYWxvZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VsZW1lbnRzL2h1aS1jb25kaXRpb25hbC1lbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWxlbWVudHMvaHVpLWljb24tZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VsZW1lbnRzL2h1aS1pbWFnZS1lbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWxlbWVudHMvaHVpLXNlcnZpY2UtYnV0dG9uLWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbGVtZW50cy9odWktc3RhdGUtYmFkZ2UtZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VsZW1lbnRzL2h1aS1zdGF0ZS1pY29uLWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbGVtZW50cy9odWktc3RhdGUtbGFiZWwtZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1jbGltYXRlLWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktY292ZXItZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1ncm91cC1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLWlucHV0LWRhdGV0aW1lLWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktaW5wdXQtbnVtYmVyLWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktaW5wdXQtc2VsZWN0LWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktaW5wdXQtdGV4dC1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLWxvY2stZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1tZWRpYS1wbGF5ZXItZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1zY2VuZS1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXNjcmlwdC1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXNlbnNvci1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXRleHQtZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS10aW1lci1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXRvZ2dsZS1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvaGEtcGFuZWwtbG92ZWxhY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9odWktcm9vdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3NwZWNpYWwtcm93cy9odWktY2FsbC1zZXJ2aWNlLXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3NwZWNpYWwtcm93cy9odWktY2FzdC1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9zcGVjaWFsLXJvd3MvaHVpLWRpdmlkZXItcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2Uvc3BlY2lhbC1yb3dzL2h1aS1zZWN0aW9uLXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3NwZWNpYWwtcm93cy9odWktd2VibGluay1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS92aWV3cy9odWktcGFuZWwtdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3ZpZXdzL2h1aS12aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbWFwL2hhLWVudGl0eS1tYXJrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlcy9qcXVlcnkucm91bmRzbGlkZXIub25kZW1hbmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ0FTVF9ERVZfQVBQX0lEIH0gZnJvbSBcIi4vZGV2X2NvbnN0XCI7XG5cbi8vIEd1YXJkIGRldiBtb2RlIHdpdGggYF9fZGV2X19gIHNvIGl0IGNhbiBvbmx5IGV2ZXIgYmUgZW5hYmxlZCBpbiBkZXYgbW9kZS5cbmV4cG9ydCBjb25zdCBDQVNUX0RFViA9IF9fREVWX18gJiYgdHJ1ZTtcblxuZXhwb3J0IGNvbnN0IENBU1RfQVBQX0lEID0gQ0FTVF9ERVYgPyBDQVNUX0RFVl9BUFBfSUQgOiBcIkIxMkNFM0NBXCI7XG5leHBvcnQgY29uc3QgQ0FTVF9OUyA9IFwidXJuOngtY2FzdDpjb20ubmFidWNhc2EuaGFzdFwiO1xuIiwiLy8gUmVwbGFjZSB0aGlzIHdpdGggeW91ciBvd24gdW5wdWJsaXNoZWQgY2FzdCBhcHAgdGhhdCBwb2ludHMgYXQgeW91ciBsb2NhbCBkZXZcbmV4cG9ydCBjb25zdCBDQVNUX0RFVl9BUFBfSUQgPSBcIjVGRTQ0MzY3XCI7XG5cbi8vIENocm9tZWNhc3QgU0RLIHdpbGwgb25seSBsb2FkIG9uIGxvY2FsaG9zdCBhbmQgSFRUUFNcbi8vIFNvIGR1cmluZyBsb2NhbCBkZXZlbG9wbWVudCB3ZSBoYXZlIHRvIHNlbmQgb3VyIGRldiBJUCBhZGRyZXNzLFxuLy8gYnV0IHRoZW4gcnVuIHRoZSBVSSBvbiBsb2NhbGhvc3QuXG5leHBvcnQgY29uc3QgQ0FTVF9ERVZfSEFTU19VUkwgPSBcImh0dHA6Ly8xOTIuMTY4LjEuMjM0OjgxMjNcIjtcbiIsIi8vIE5lc3NhZ2VzIHRvIGJlIHByb2Nlc3NlZCBpbnNpZGUgdGhlIENhc3QgUmVjZWl2ZXIgYXBwXG5cbmltcG9ydCB7IEF1dGggfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBDYXN0TWFuYWdlciB9IGZyb20gXCIuL2Nhc3RfbWFuYWdlclwiO1xuXG5pbXBvcnQgeyBCYXNlQ2FzdE1lc3NhZ2UgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgQ0FTVF9ERVYgfSBmcm9tIFwiLi9jb25zdFwiO1xuaW1wb3J0IHsgQ0FTVF9ERVZfSEFTU19VUkwgfSBmcm9tIFwiLi9kZXZfY29uc3RcIjtcblxuZXhwb3J0IGludGVyZmFjZSBHZXRTdGF0dXNNZXNzYWdlIGV4dGVuZHMgQmFzZUNhc3RNZXNzYWdlIHtcbiAgdHlwZTogXCJnZXRfc3RhdHVzXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdE1lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2FzdE1lc3NhZ2Uge1xuICB0eXBlOiBcImNvbm5lY3RcIjtcbiAgcmVmcmVzaFRva2VuOiBzdHJpbmc7XG4gIGNsaWVudElkOiBzdHJpbmcgfCBudWxsO1xuICBoYXNzVXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hvd0xvdmVsYWNlVmlld01lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2FzdE1lc3NhZ2Uge1xuICB0eXBlOiBcInNob3dfbG92ZWxhY2Vfdmlld1wiO1xuICB2aWV3UGF0aDogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaG93RGVtb01lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2FzdE1lc3NhZ2Uge1xuICB0eXBlOiBcInNob3dfZGVtb1wiO1xufVxuXG5leHBvcnQgdHlwZSBIYXNzTWVzc2FnZSA9XG4gIHwgU2hvd0RlbW9NZXNzYWdlXG4gIHwgR2V0U3RhdHVzTWVzc2FnZVxuICB8IENvbm5lY3RNZXNzYWdlXG4gIHwgU2hvd0xvdmVsYWNlVmlld01lc3NhZ2U7XG5cbmV4cG9ydCBjb25zdCBjYXN0U2VuZEF1dGggPSAoY2FzdDogQ2FzdE1hbmFnZXIsIGF1dGg6IEF1dGgpID0+XG4gIGNhc3Quc2VuZE1lc3NhZ2Uoe1xuICAgIHR5cGU6IFwiY29ubmVjdFwiLFxuICAgIHJlZnJlc2hUb2tlbjogYXV0aC5kYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgY2xpZW50SWQ6IGF1dGguZGF0YS5jbGllbnRJZCxcbiAgICBoYXNzVXJsOiBDQVNUX0RFViA/IENBU1RfREVWX0hBU1NfVVJMIDogYXV0aC5kYXRhLmhhc3NVcmwsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY2FzdFNlbmRTaG93TG92ZWxhY2VWaWV3ID0gKFxuICBjYXN0OiBDYXN0TWFuYWdlcixcbiAgdmlld1BhdGg6IFNob3dMb3ZlbGFjZVZpZXdNZXNzYWdlW1widmlld1BhdGhcIl1cbikgPT5cbiAgY2FzdC5zZW5kTWVzc2FnZSh7XG4gICAgdHlwZTogXCJzaG93X2xvdmVsYWNlX3ZpZXdcIixcbiAgICB2aWV3UGF0aCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBjYXN0U2VuZFNob3dEZW1vID0gKGNhc3Q6IENhc3RNYW5hZ2VyKSA9PlxuICBjYXN0LnNlbmRNZXNzYWdlKHtcbiAgICB0eXBlOiBcInNob3dfZGVtb1wiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGVuc3VyZUNvbm5lY3RlZENhc3RTZXNzaW9uID0gKGNhc3Q6IENhc3RNYW5hZ2VyLCBhdXRoOiBBdXRoKSA9PiB7XG4gIGlmIChjYXN0LmNhc3RDb25uZWN0ZWRUb091ckhhc3MpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCB1bnN1YiA9IGNhc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb24tY2hhbmdlZFwiLCAoKSA9PiB7XG4gICAgICBpZiAoY2FzdC5jYXN0Q29ubmVjdGVkVG9PdXJIYXNzKSB7XG4gICAgICAgIHVuc3ViKCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNhc3RTZW5kQXV0aChjYXN0LCBhdXRoKTtcbiAgfSk7XG59O1xuIiwiLy8gTG9hZCBhIHJlc291cmNlIGFuZCBnZXQgYSBwcm9taXNlIHdoZW4gbG9hZGluZyBkb25lLlxuLy8gRnJvbTogaHR0cHM6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1sb2FkZXJcblxuY29uc3QgX2xvYWQgPSAoXG4gIHRhZzogXCJsaW5rXCIgfCBcInNjcmlwdFwiIHwgXCJpbWdcIixcbiAgdXJsOiBzdHJpbmcsXG4gIHR5cGU/OiBcIm1vZHVsZVwiXG4pID0+IHtcbiAgLy8gVGhpcyBwcm9taXNlIHdpbGwgYmUgdXNlZCBieSBQcm9taXNlLmFsbCB0byBkZXRlcm1pbmUgc3VjY2VzcyBvciBmYWlsdXJlXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBsZXQgYXR0ciA9IFwic3JjXCI7XG4gICAgbGV0IHBhcmVudCA9IFwiYm9keVwiO1xuXG4gICAgLy8gSW1wb3J0YW50IHN1Y2Nlc3MgYW5kIGVycm9yIGZvciB0aGUgcHJvbWlzZVxuICAgIGVsZW1lbnQub25sb2FkID0gKCkgPT4gcmVzb2x2ZSh1cmwpO1xuICAgIGVsZW1lbnQub25lcnJvciA9ICgpID0+IHJlamVjdCh1cmwpO1xuXG4gICAgLy8gTmVlZCB0byBzZXQgZGlmZmVyZW50IGF0dHJpYnV0ZXMgZGVwZW5kaW5nIG9uIHRhZyB0eXBlXG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgXCJzY3JpcHRcIjpcbiAgICAgICAgKGVsZW1lbnQgYXMgSFRNTFNjcmlwdEVsZW1lbnQpLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAoZWxlbWVudCBhcyBIVE1MU2NyaXB0RWxlbWVudCkudHlwZSA9IHR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibGlua1wiOlxuICAgICAgICAoZWxlbWVudCBhcyBIVE1MTGlua0VsZW1lbnQpLnR5cGUgPSBcInRleHQvY3NzXCI7XG4gICAgICAgIChlbGVtZW50IGFzIEhUTUxMaW5rRWxlbWVudCkucmVsID0gXCJzdHlsZXNoZWV0XCI7XG4gICAgICAgIGF0dHIgPSBcImhyZWZcIjtcbiAgICAgICAgcGFyZW50ID0gXCJoZWFkXCI7XG4gICAgfVxuXG4gICAgLy8gSW5qZWN0IGludG8gZG9jdW1lbnQgdG8ga2ljayBvZmYgbG9hZGluZ1xuICAgIGVsZW1lbnRbYXR0cl0gPSB1cmw7XG4gICAgZG9jdW1lbnRbcGFyZW50XS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9hZENTUyA9ICh1cmw6IHN0cmluZykgPT4gX2xvYWQoXCJsaW5rXCIsIHVybCk7XG5leHBvcnQgY29uc3QgbG9hZEpTID0gKHVybDogc3RyaW5nKSA9PiBfbG9hZChcInNjcmlwdFwiLCB1cmwpO1xuZXhwb3J0IGNvbnN0IGxvYWRJbWcgPSAodXJsOiBzdHJpbmcpID0+IF9sb2FkKFwiaW1nXCIsIHVybCk7XG5leHBvcnQgY29uc3QgbG9hZE1vZHVsZSA9ICh1cmw6IHN0cmluZykgPT4gX2xvYWQoXCJzY3JpcHRcIiwgdXJsLCBcIm1vZHVsZVwiKTtcbiIsIi8qKlxuICogU2Nyb2xsIHRvIGEgc3BlY2lmaWMgeSBjb29yZGluYXRlLlxuICpcbiAqIENvcGllZCBmcm9tIHBhcGVyLXNjcm9sbC1oZWFkZXItcGFuZWwuXG4gKlxuICogQG1ldGhvZCBzY3JvbGxcbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVGhlIGNvb3JkaW5hdGUgdG8gc2Nyb2xsIHRvLCBhbG9uZyB0aGUgeS1heGlzLlxuICogQHBhcmFtIHtib29sZWFufSBzbW9vdGggdHJ1ZSBpZiB0aGUgc2Nyb2xsIHBvc2l0aW9uIHNob3VsZCBiZSBzbW9vdGhseSBhZGp1c3RlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2Nyb2xsVG9UYXJnZXQoZWxlbWVudCwgdGFyZ2V0KSB7XG4gIC8vIHRoZSBzY3JvbGwgZXZlbnQgd2lsbCB0cmlnZ2VyIF91cGRhdGVTY3JvbGxTdGF0ZSBkaXJlY3RseSxcbiAgLy8gSG93ZXZlciwgX3VwZGF0ZVNjcm9sbFN0YXRlIHJlbGllcyBvbiB0aGUgcHJldmlvdXMgYHNjcm9sbFRvcGAgdG8gdXBkYXRlIHRoZSBzdGF0ZXMuXG4gIC8vIENhbGxpbmcgX3VwZGF0ZVNjcm9sbFN0YXRlIHdpbGwgZW5zdXJlIHRoYXQgdGhlIHN0YXRlcyBhcmUgc3luY2VkIGNvcnJlY3RseS5cbiAgY29uc3QgdG9wID0gMDtcbiAgY29uc3Qgc2Nyb2xsZXIgPSB0YXJnZXQ7XG4gIGNvbnN0IGVhc2luZ0ZuID0gZnVuY3Rpb24gZWFzZU91dFF1YWQodCwgYiwgYywgZCkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduLCBzcGFjZS1pbmZpeC1vcHMsIG5vLW1peGVkLW9wZXJhdG9ycyAqL1xuICAgIHQgLz0gZDtcbiAgICByZXR1cm4gLWMgKiB0ICogKHQgLSAyKSArIGI7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1wYXJhbS1yZWFzc2lnbiwgc3BhY2UtaW5maXgtb3BzLCBuby1taXhlZC1vcGVyYXRvcnMgKi9cbiAgfTtcbiAgY29uc3QgYW5pbWF0aW9uSWQgPSBNYXRoLnJhbmRvbSgpO1xuICBjb25zdCBkdXJhdGlvbiA9IDIwMDtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgY3VycmVudFNjcm9sbFRvcCA9IHNjcm9sbGVyLnNjcm9sbFRvcDtcbiAgY29uc3QgZGVsdGFTY3JvbGxUb3AgPSB0b3AgLSBjdXJyZW50U2Nyb2xsVG9wO1xuICBlbGVtZW50Ll9jdXJyZW50QW5pbWF0aW9uSWQgPSBhbmltYXRpb25JZDtcbiAgKGZ1bmN0aW9uIHVwZGF0ZUZyYW1lKCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgZWxhcHNlZFRpbWUgPSBub3cgLSBzdGFydFRpbWU7XG4gICAgaWYgKGVsYXBzZWRUaW1lID4gZHVyYXRpb24pIHtcbiAgICAgIHNjcm9sbGVyLnNjcm9sbFRvcCA9IHRvcDtcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQuX2N1cnJlbnRBbmltYXRpb25JZCA9PT0gYW5pbWF0aW9uSWQpIHtcbiAgICAgIHNjcm9sbGVyLnNjcm9sbFRvcCA9IGVhc2luZ0ZuKFxuICAgICAgICBlbGFwc2VkVGltZSxcbiAgICAgICAgY3VycmVudFNjcm9sbFRvcCxcbiAgICAgICAgZGVsdGFTY3JvbGxUb3AsXG4gICAgICAgIGR1cmF0aW9uXG4gICAgICApO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZUZyYW1lLmJpbmQoZWxlbWVudCkpO1xuICAgIH1cbiAgfS5jYWxsKGVsZW1lbnQpKTtcbn1cbiIsImltcG9ydCB7IE1hcCB9IGZyb20gXCJsZWFmbGV0XCI7XG5cbi8vIFNldHMgdXAgYSBMZWFmbGV0IG1hcCBvbiB0aGUgcHJvdmlkZWQgRE9NIGVsZW1lbnRcbmV4cG9ydCB0eXBlIExlYWZsZXRNb2R1bGVUeXBlID0gdHlwZW9mIGltcG9ydChcImxlYWZsZXRcIik7XG5cbmV4cG9ydCBjb25zdCBzZXR1cExlYWZsZXRNYXAgPSBhc3luYyAoXG4gIG1hcEVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICBkYXJrTW9kZSA9IGZhbHNlXG4pOiBQcm9taXNlPFtNYXAsIExlYWZsZXRNb2R1bGVUeXBlXT4gPT4ge1xuICBpZiAoIW1hcEVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzZXR1cCBMZWFmbGV0IG1hcCBvbiBkaXNjb25uZWN0ZWQgZWxlbWVudFwiKTtcbiAgfVxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgY29uc3QgTGVhZmxldCA9IChhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJsZWFmbGV0XCIgKi8gXCJsZWFmbGV0XCIpKSBhcyBMZWFmbGV0TW9kdWxlVHlwZTtcbiAgTGVhZmxldC5JY29uLkRlZmF1bHQuaW1hZ2VQYXRoID0gXCIvc3RhdGljL2ltYWdlcy9sZWFmbGV0L2ltYWdlcy9cIjtcblxuICBjb25zdCBtYXAgPSBMZWFmbGV0Lm1hcChtYXBFbGVtZW50KTtcbiAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgc3R5bGUuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcIi9zdGF0aWMvaW1hZ2VzL2xlYWZsZXQvbGVhZmxldC5jc3NcIik7XG4gIHN0eWxlLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XG4gIG1hcEVsZW1lbnQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIG1hcC5zZXRWaWV3KFs1Mi4zNzMxMzM5LCA0Ljg5MDMxNDddLCAxMyk7XG4gIGNyZWF0ZVRpbGVMYXllcihMZWFmbGV0LCBkYXJrTW9kZSkuYWRkVG8obWFwKTtcblxuICByZXR1cm4gW21hcCwgTGVhZmxldF07XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVGlsZUxheWVyID0gKFxuICBsZWFmbGV0OiBMZWFmbGV0TW9kdWxlVHlwZSxcbiAgZGFya01vZGU6IGJvb2xlYW5cbikgPT4ge1xuICByZXR1cm4gbGVhZmxldC50aWxlTGF5ZXIoXG4gICAgYGh0dHBzOi8ve3N9LmJhc2VtYXBzLmNhcnRvY2RuLmNvbS8ke1xuICAgICAgZGFya01vZGUgPyBcImRhcmtfYWxsXCIgOiBcImxpZ2h0X2FsbFwiXG4gICAgfS97en0ve3h9L3t5fSR7bGVhZmxldC5Ccm93c2VyLnJldGluYSA/IFwiQDJ4LnBuZ1wiIDogXCIucG5nXCJ9YCxcbiAgICB7XG4gICAgICBhdHRyaWJ1dGlvbjpcbiAgICAgICAgJyZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4sICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+JyxcbiAgICAgIHN1YmRvbWFpbnM6IFwiYWJjZFwiLFxuICAgICAgbWluWm9vbTogMCxcbiAgICAgIG1heFpvb206IDIwLFxuICAgIH1cbiAgKTtcbn07XG4iLCJjb25zdCB2YWxpZEVudGl0eUlkID0gL14oXFx3KylcXC4oXFx3KykkLztcblxuZXhwb3J0IGNvbnN0IGlzVmFsaWRFbnRpdHlJZCA9IChlbnRpdHlJZDogc3RyaW5nKSA9PlxuICB2YWxpZEVudGl0eUlkLnRlc3QoZW50aXR5SWQpO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVmFsaWRFbnRpdHlJZCA9IChpbnB1dDogc3RyaW5nKSA9PlxuICBpbnB1dFxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL1xcc3xcXCcvZywgXCJfXCIpIC8vIHJlcGxhY2Ugc3BhY2VzIGFuZCBxdW90ZXMgd2l0aCB1bmRlcnNjb3JlXG4gICAgLnJlcGxhY2UoL1xcVy9nLCBcIlwiKSAvLyByZW1vdmUgbm90IGFsbG93ZWQgY2hhcnNcbiAgICAucmVwbGFjZSgvX3syLH0vZywgXCJfXCIpIC8vIHJlcGxhY2UgbXVsdGlwbGUgdW5kZXJzY29yZXMgd2l0aCAxXG4gICAgLnJlcGxhY2UoL18kLywgXCJcIik7IC8vIHJlbW92ZSB1bmRlcnNjb3JlcyBhdCB0aGUgZW5kXG4iLCJleHBvcnQgY29uc3QgY29tcGFyZSA9IChhOiBzdHJpbmcsIGI6IHN0cmluZykgPT4ge1xuICBpZiAoYSA8IGIpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKGEgPiBiKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICByZXR1cm4gMDtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXNlSW5zZW5zaXRpdmVDb21wYXJlID0gKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PlxuICBjb21wYXJlKGEudG9Mb3dlckNhc2UoKSwgYi50b0xvd2VyQ2FzZSgpKTtcbiIsIi8vIEZyb206IGh0dHBzOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtZGVib3VuY2UtZnVuY3Rpb25cblxuLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4vLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBiYW4tdHlwZXNcbmV4cG9ydCBjb25zdCBkZWJvdW5jZSA9IDxUIGV4dGVuZHMgRnVuY3Rpb24+KFxuICBmdW5jOiBULFxuICB3YWl0LFxuICBpbW1lZGlhdGUgPSBmYWxzZVxuKTogVCA9PiB7XG4gIGxldCB0aW1lb3V0O1xuICAvLyBAdHMtaWdub3JlXG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGU6bm8tdGhpcy1hc3NpZ25tZW50XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzO1xuICAgIGNvbnN0IGxhdGVyID0gKCkgPT4ge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIGlmIChjYWxsTm93KSB7XG4gICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH1cbiAgfTtcbn07XG4iLCIvLyBIYW5kbGUgMTZ4OSwgMTY6OSwgMS43OHgxLCAxLjc4OjEsIDEuNzhcbi8vIElnbm9yZSBldmVyeXRoaW5nIGVsc2VcbmNvbnN0IHBhcnNlT3JUaHJvdyA9IChudW0pID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdChudW0pO1xuICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtudW19IGlzIG5vdCBhIG51bWJlcmApO1xuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUFzcGVjdFJhdGlvKGlucHV0OiBzdHJpbmcpIHtcbiAgaWYgKCFpbnB1dCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKGlucHV0LmVuZHNXaXRoKFwiJVwiKSkge1xuICAgICAgcmV0dXJuIHsgdzogMTAwLCBoOiBwYXJzZU9yVGhyb3coaW5wdXQuc3Vic3RyKDAsIGlucHV0Lmxlbmd0aCAtIDEpKSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFyciA9IGlucHV0LnJlcGxhY2UoXCI6XCIsIFwieFwiKS5zcGxpdChcInhcIik7XG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBhcnIubGVuZ3RoID09PSAxXG4gICAgICA/IHsgdzogcGFyc2VPclRocm93KGFyclswXSksIGg6IDEgfVxuICAgICAgOiB7IHc6IHBhcnNlT3JUaHJvdyhhcnJbMF0pLCBoOiBwYXJzZU9yVGhyb3coYXJyWzFdKSB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBJZ25vcmUgdGhlIGVycm9yXG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG4iLCJleHBvcnQgY29uc3QgYWZ0ZXJOZXh0UmVuZGVyID0gKGNiOiAoKSA9PiB2b2lkKTogdm9pZCA9PiB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBzZXRUaW1lb3V0KGNiLCAwKSk7XG59O1xuXG5leHBvcnQgY29uc3QgbmV4dFJlbmRlciA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgYWZ0ZXJOZXh0UmVuZGVyKHJlc29sdmUpO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgeyBVbnN1YnNjcmliZUZ1bmMsIENvbm5lY3Rpb24gfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVPbmUgPSBhc3luYyA8VD4oXG4gIGNvbm46IENvbm5lY3Rpb24sXG4gIHN1YnNjcmliZTogKGNvbm46IENvbm5lY3Rpb24sIG9uQ2hhbmdlOiAoaXRlbXM6IFQpID0+IHZvaWQpID0+IFVuc3Vic2NyaWJlRnVuY1xuKSA9PlxuICBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSkgPT4ge1xuICAgIGNvbnN0IHVuc3ViID0gc3Vic2NyaWJlKGNvbm4sIChpdGVtcykgPT4ge1xuICAgICAgdW5zdWIoKTtcbiAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgIH0pO1xuICB9KTtcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWdcIjtcbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BvbHltZXIvcG9seW1lci1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4vaGEtcHJvZ3Jlc3MtYnV0dG9uXCI7XG5pbXBvcnQgeyBFdmVudHNNaXhpbiB9IGZyb20gXCIuLi8uLi9taXhpbnMvZXZlbnRzLW1peGluXCI7XG5cbi8qXG4gKiBAYXBwbGllc01peGluIEV2ZW50c01peGluXG4gKi9cbmNsYXNzIEhhQ2FsbFNlcnZpY2VCdXR0b24gZXh0ZW5kcyBFdmVudHNNaXhpbihQb2x5bWVyRWxlbWVudCkge1xuICBzdGF0aWMgZ2V0IHRlbXBsYXRlKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLXByb2dyZXNzLWJ1dHRvblxuICAgICAgICBpZD1cInByb2dyZXNzXCJcbiAgICAgICAgcHJvZ3Jlc3M9XCJbW3Byb2dyZXNzXV1cIlxuICAgICAgICBvbi1jbGljaz1cImJ1dHRvblRhcHBlZFwiXG4gICAgICAgID48c2xvdD48L3Nsb3RcbiAgICAgID48L2hhLXByb2dyZXNzLWJ1dHRvbj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBoYXNzOiB7XG4gICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgIH0sXG5cbiAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIH0sXG5cbiAgICAgIGRvbWFpbjoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB9LFxuXG4gICAgICBzZXJ2aWNlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIH0sXG5cbiAgICAgIHNlcnZpY2VEYXRhOiB7XG4gICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgICAgdmFsdWU6IHt9LFxuICAgICAgfSxcblxuICAgICAgY29uZmlybWF0aW9uOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGJ1dHRvblRhcHBlZCgpIHtcbiAgICBpZiAodGhpcy5jb25maXJtYXRpb24gJiYgIXdpbmRvdy5jb25maXJtKHRoaXMuY29uZmlybWF0aW9uKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnByb2dyZXNzID0gdHJ1ZTtcbiAgICB2YXIgZWwgPSB0aGlzO1xuICAgIHZhciBldmVudERhdGEgPSB7XG4gICAgICBkb21haW46IHRoaXMuZG9tYWluLFxuICAgICAgc2VydmljZTogdGhpcy5zZXJ2aWNlLFxuICAgICAgc2VydmljZURhdGE6IHRoaXMuc2VydmljZURhdGEsXG4gICAgfTtcblxuICAgIHRoaXMuaGFzc1xuICAgICAgLmNhbGxTZXJ2aWNlKHRoaXMuZG9tYWluLCB0aGlzLnNlcnZpY2UsIHRoaXMuc2VydmljZURhdGEpXG4gICAgICAudGhlbihcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWwucHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICBlbC4kLnByb2dyZXNzLmFjdGlvblN1Y2Nlc3MoKTtcbiAgICAgICAgICBldmVudERhdGEuc3VjY2VzcyA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsLnByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgZWwuJC5wcm9ncmVzcy5hY3Rpb25FcnJvcigpO1xuICAgICAgICAgIGV2ZW50RGF0YS5zdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBlbC5maXJlKFwiaGFzcy1zZXJ2aWNlLWNhbGxlZFwiLCBldmVudERhdGEpO1xuICAgICAgfSk7XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwiaGEtY2FsbC1zZXJ2aWNlLWJ1dHRvblwiLCBIYUNhbGxTZXJ2aWNlQnV0dG9uKTtcbiIsImltcG9ydCBcIkBtYXRlcmlhbC9td2MtYnV0dG9uXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1zcGlubmVyL3BhcGVyLXNwaW5uZXJcIjtcbmltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWdcIjtcbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BvbHltZXIvcG9seW1lci1lbGVtZW50XCI7XG5cbmNsYXNzIEhhUHJvZ3Jlc3NCdXR0b24gZXh0ZW5kcyBQb2x5bWVyRWxlbWVudCB7XG4gIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c3R5bGU+XG4gICAgICAgIC5jb250YWluZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIH1cblxuICAgICAgICBtd2MtYnV0dG9uIHtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMXM7XG4gICAgICAgIH1cblxuICAgICAgICAuc3VjY2VzcyBtd2MtYnV0dG9uIHtcbiAgICAgICAgICAtLW1kYy10aGVtZS1wcmltYXJ5OiB3aGl0ZTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1nb29nbGUtZ3JlZW4tNTAwKTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLmVycm9yIG13Yy1idXR0b24ge1xuICAgICAgICAgIC0tbWRjLXRoZW1lLXByaW1hcnk6IHdoaXRlO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWdvb2dsZS1yZWQtNTAwKTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLnByb2dyZXNzIHtcbiAgICAgICAgICBAYXBwbHkgLS1sYXlvdXQ7XG4gICAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWNlbnRlci1jZW50ZXI7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIiBpZD1cImNvbnRhaW5lclwiPlxuICAgICAgICA8bXdjLWJ1dHRvblxuICAgICAgICAgIGlkPVwiYnV0dG9uXCJcbiAgICAgICAgICBkaXNhYmxlZD1cIltbY29tcHV0ZURpc2FibGVkKGRpc2FibGVkLCBwcm9ncmVzcyldXVwiXG4gICAgICAgICAgb24tY2xpY2s9XCJidXR0b25UYXBwZWRcIlxuICAgICAgICA+XG4gICAgICAgICAgPHNsb3Q+PC9zbG90PlxuICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgIDx0ZW1wbGF0ZSBpcz1cImRvbS1pZlwiIGlmPVwiW1twcm9ncmVzc11dXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzXCI+PHBhcGVyLXNwaW5uZXIgYWN0aXZlPVwiXCI+PC9wYXBlci1zcGlubmVyPjwvZGl2PlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzczoge1xuICAgICAgICB0eXBlOiBPYmplY3QsXG4gICAgICB9LFxuXG4gICAgICBwcm9ncmVzczoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICB9LFxuXG4gICAgICBkaXNhYmxlZDoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICB0ZW1wQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgdmFyIGNsYXNzTGlzdCA9IHRoaXMuJC5jb250YWluZXIuY2xhc3NMaXN0O1xuICAgIGNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9LCAxMDAwKTtcbiAgfVxuXG4gIHJlYWR5KCkge1xuICAgIHN1cGVyLnJlYWR5KCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2KSA9PiB0aGlzLmJ1dHRvblRhcHBlZChldikpO1xuICB9XG5cbiAgYnV0dG9uVGFwcGVkKGV2KSB7XG4gICAgaWYgKHRoaXMucHJvZ3Jlc3MpIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgYWN0aW9uU3VjY2VzcygpIHtcbiAgICB0aGlzLnRlbXBDbGFzcyhcInN1Y2Nlc3NcIik7XG4gIH1cblxuICBhY3Rpb25FcnJvcigpIHtcbiAgICB0aGlzLnRlbXBDbGFzcyhcImVycm9yXCIpO1xuICB9XG5cbiAgY29tcHV0ZURpc2FibGVkKGRpc2FibGVkLCBwcm9ncmVzcykge1xuICAgIHJldHVybiBkaXNhYmxlZCB8fCBwcm9ncmVzcztcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJoYS1wcm9ncmVzcy1idXR0b25cIiwgSGFQcm9ncmVzc0J1dHRvbik7XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBjc3MsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0XCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZHVwbGljYXRlLWltcG9ydHNcbmltcG9ydCB7IFBhcGVySW5wdXRFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0XCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaGEtZGF0ZS1pbnB1dFwiKVxuZXhwb3J0IGNsYXNzIEhhRGF0ZUlucHV0IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB5ZWFyPzogc3RyaW5nO1xuICBAcHJvcGVydHkoKSBwdWJsaWMgbW9udGg/OiBzdHJpbmc7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBkYXk/OiBzdHJpbmc7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSkgcHVibGljIGRpc2FibGVkID0gZmFsc2U7XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1wYXBlci1mb250LWNvbW1vbi1iYXNlXy1fZm9udC1mYW1pbHkpO1xuICAgICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiB2YXIoXG4gICAgICAgICAgLS1wYXBlci1mb250LWNvbW1vbi1iYXNlXy1fLXdlYmtpdC1mb250LXNtb290aGluZ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1pbnB1dCB7XG4gICAgICAgIHdpZHRoOiAzMHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXNoYXJlZC1pbnB1dC1zdHlsZV8tXy13ZWJraXQtYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dF8tXy1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1zaGFyZWQtaW5wdXQtc3R5bGVfLV9hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XG4gICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0LXdlYmtpdC1zcGlubmVyXy1fLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dC13ZWJraXQtc3Bpbm5lcl8tX21hcmdpbjogMDtcbiAgICAgICAgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LXNwaW5uZXJfLV9kaXNwbGF5OiBub25lO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1pbnB1dCN5ZWFyIHtcbiAgICAgICAgd2lkdGg6IDUwcHg7XG4gICAgICB9XG5cbiAgICAgIC5kYXRlLWlucHV0LXdyYXAge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLWlucHV0LXdyYXBcIj5cbiAgICAgICAgPHBhcGVyLWlucHV0XG4gICAgICAgICAgaWQ9XCJ5ZWFyXCJcbiAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAudmFsdWU9JHt0aGlzLnllYXJ9XG4gICAgICAgICAgQGNoYW5nZT0ke3RoaXMuX2Zvcm1hdFllYXJ9XG4gICAgICAgICAgbWF4bGVuZ3RoPVwiNFwiXG4gICAgICAgICAgbWF4PVwiOTk5OVwiXG4gICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgLmRpc2FibGVkPSR7dGhpcy5kaXNhYmxlZH1cbiAgICAgICAgICBuby1sYWJlbC1mbG9hdFxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gc3VmZml4PVwiXCIgc2xvdD1cInN1ZmZpeFwiPi08L3NwYW4+XG4gICAgICAgIDwvcGFwZXItaW5wdXQ+XG4gICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgIGlkPVwibW9udGhcIlxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIC52YWx1ZT0ke3RoaXMubW9udGh9XG4gICAgICAgICAgQGNoYW5nZT0ke3RoaXMuX2Zvcm1hdE1vbnRofVxuICAgICAgICAgIG1heGxlbmd0aD1cIjJcIlxuICAgICAgICAgIG1heD1cIjEyXCJcbiAgICAgICAgICBtaW49XCIxXCJcbiAgICAgICAgICAuZGlzYWJsZWQ9JHt0aGlzLmRpc2FibGVkfVxuICAgICAgICAgIG5vLWxhYmVsLWZsb2F0XG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBzdWZmaXg9XCJcIiBzbG90PVwic3VmZml4XCI+LTwvc3Bhbj5cbiAgICAgICAgPC9wYXBlci1pbnB1dD5cbiAgICAgICAgPHBhcGVyLWlucHV0XG4gICAgICAgICAgaWQ9XCJkYXlcIlxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIC52YWx1ZT0ke3RoaXMuZGF5fVxuICAgICAgICAgIEBjaGFuZ2U9JHt0aGlzLl9mb3JtYXREYXl9XG4gICAgICAgICAgbWF4bGVuZ3RoPVwiMlwiXG4gICAgICAgICAgbWF4PVwiMzFcIlxuICAgICAgICAgIG1pbj1cIjFcIlxuICAgICAgICAgIC5kaXNhYmxlZD0ke3RoaXMuZGlzYWJsZWR9XG4gICAgICAgICAgbm8tbGFiZWwtZmxvYXRcbiAgICAgICAgPlxuICAgICAgICA8L3BhcGVyLWlucHV0PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2Zvcm1hdFllYXIoKSB7XG4gICAgY29uc3QgeWVhckVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFxuICAgICAgXCJ5ZWFyXCJcbiAgICApIGFzIFBhcGVySW5wdXRFbGVtZW50O1xuICAgIHRoaXMueWVhciA9IHllYXJFbGVtZW50LnZhbHVlITtcbiAgfVxuXG4gIHByaXZhdGUgX2Zvcm1hdE1vbnRoKCkge1xuICAgIGNvbnN0IG1vbnRoRWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcIm1vbnRoXCJcbiAgICApIGFzIFBhcGVySW5wdXRFbGVtZW50O1xuICAgIHRoaXMubW9udGggPSAoXCIwXCIgKyBtb250aEVsZW1lbnQudmFsdWUhKS5zbGljZSgtMik7XG4gIH1cblxuICBwcml2YXRlIF9mb3JtYXREYXkoKSB7XG4gICAgY29uc3QgZGF5RWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcImRheVwiXG4gICAgKSBhcyBQYXBlcklucHV0RWxlbWVudDtcbiAgICB0aGlzLmRheSA9IChcIjBcIiArIGRheUVsZW1lbnQudmFsdWUhKS5zbGljZSgtMik7XG4gIH1cblxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMueWVhcn0tJHt0aGlzLm1vbnRofS0ke3RoaXMuZGF5fWA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImhhLWRhdGUtaW5wdXRcIjogSGFEYXRlSW5wdXQ7XG4gIH1cbn1cbiIsImltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWRyb3Bkb3duLW1lbnUvcGFwZXItZHJvcGRvd24tbWVudVwiO1xuaW1wb3J0IHsgQ29uc3RydWN0b3IgfSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BvbHltZXJcIjtcblxuY29uc3QgcGFwZXJEcm9wZG93bkNsYXNzID0gY3VzdG9tRWxlbWVudHMuZ2V0KFxuICBcInBhcGVyLWRyb3Bkb3duLW1lbnVcIlxuKSBhcyBDb25zdHJ1Y3RvcjxQb2x5bWVyRWxlbWVudD47XG5cbi8vIHBhdGNoZXMgcGFwZXIgZHJvcCBkb3duIHRvIHByb3Blcmx5IHN1cHBvcnQgUlRMIC0gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXJFbGVtZW50cy9wYXBlci1kcm9wZG93bi1tZW51L2lzc3Vlcy8xODNcbmV4cG9ydCBjbGFzcyBIYVBhcGVyRHJvcGRvd25DbGFzcyBleHRlbmRzIHBhcGVyRHJvcGRvd25DbGFzcyB7XG4gIHB1YmxpYyByZWFkeSgpIHtcbiAgICBzdXBlci5yZWFkeSgpO1xuICAgIC8vIHdhaXQgdG8gY2hlY2sgZm9yIGRpcmVjdGlvbiBzaW5jZSBvdGhlcndpc2UgZGlyZWN0aW9uIGlzIHdyb25nIGV2ZW4gdGhvdWdoIHRvcCBsZXZlbCBpcyBSVExcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKS5kaXJlY3Rpb24gPT09IFwicnRsXCIpIHtcbiAgICAgICAgdGhpcy5zdHlsZS50ZXh0QWxpZ24gPSBcInJpZ2h0XCI7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaGEtcGFwZXItZHJvcGRvd24tbWVudVwiOiBIYVBhcGVyRHJvcGRvd25DbGFzcztcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJoYS1wYXBlci1kcm9wZG93bi1tZW51XCIsIEhhUGFwZXJEcm9wZG93bkNsYXNzKTtcbiIsImltcG9ydCB7IENvbnN0cnVjdG9yIH0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1pY29uLWJ1dHRvbi9wYXBlci1pY29uLWJ1dHRvblwiO1xuLy8gTm90IGR1cGxpY2F0ZSwgdGhpcyBpcyBmb3IgdHlwaW5nLlxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG5pbXBvcnQgeyBQYXBlckljb25CdXR0b25FbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BhcGVyLWljb24tYnV0dG9uL3BhcGVyLWljb24tYnV0dG9uXCI7XG5cbmNvbnN0IHBhcGVySWNvbkJ1dHRvbkNsYXNzID0gY3VzdG9tRWxlbWVudHMuZ2V0KFxuICBcInBhcGVyLWljb24tYnV0dG9uXCJcbikgYXMgQ29uc3RydWN0b3I8UGFwZXJJY29uQnV0dG9uRWxlbWVudD47XG5cbmV4cG9ydCBjbGFzcyBIYVBhcGVySWNvbkJ1dHRvbkFycm93TmV4dCBleHRlbmRzIHBhcGVySWNvbkJ1dHRvbkNsYXNzIHtcbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG5cbiAgICAvLyB3YWl0IHRvIGNoZWNrIGZvciBkaXJlY3Rpb24gc2luY2Ugb3RoZXJ3aXNlIGRpcmVjdGlvbiBpcyB3cm9uZyBldmVuIHRob3VnaCB0b3AgbGV2ZWwgaXMgUlRMXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmljb24gPVxuICAgICAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKS5kaXJlY3Rpb24gPT09IFwibHRyXCJcbiAgICAgICAgICA/IFwiaGFzczphcnJvdy1yaWdodFwiXG4gICAgICAgICAgOiBcImhhc3M6YXJyb3ctbGVmdFwiO1xuICAgIH0sIDEwMCk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImhhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LW5leHRcIjogSGFQYXBlckljb25CdXR0b25BcnJvd05leHQ7XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFxuICBcImhhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LW5leHRcIixcbiAgSGFQYXBlckljb25CdXR0b25BcnJvd05leHRcbik7XG4iLCIvKipcbkFkYXB0ZWQgZnJvbSBwYXBlci10aW1lLWlucHV0IGZyb21cbmh0dHBzOi8vZ2l0aHViLmNvbS9yeWFuYnVybnMyMy9wYXBlci10aW1lLWlucHV0XG5NSVQgTGljZW5zZWQuIENvcHlyaWdodCAoYykgMjAxNyBSeWFuIEJ1cm5zXG5cbmA8cGFwZXItdGltZS1pbnB1dD5gIFBvbHltZXIgZWxlbWVudCB0byBhY2NlcHQgYSB0aW1lIHdpdGggcGFwZXItaW5wdXQgJiBwYXBlci1kcm9wZG93bi1tZW51XG5JbnNwaXJlZCBieSB0aGUgdGltZSBpbnB1dCBpbiBnb29nbGUgZm9ybXNcblxuIyMjIFN0eWxpbmdcblxuYDxwYXBlci10aW1lLWlucHV0PmAgcHJvdmlkZXMgdGhlIGZvbGxvd2luZyBjdXN0b20gcHJvcGVydGllcyBhbmQgbWl4aW5zIGZvciBzdHlsaW5nOlxuXG5DdXN0b20gcHJvcGVydHkgfCBEZXNjcmlwdGlvbiB8IERlZmF1bHRcbi0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tXG5gLS1wYXBlci10aW1lLWlucHV0LWRyb3Bkb3duLXJpcHBsZS1jb2xvcmAgfCBkcm9wZG93biByaXBwbGUgY29sb3IgfCBgLS1wcmltYXJ5LWNvbG9yYFxuYC0tcGFwZXItdGltZS1pbnB1dC1jb3RuYWluZXJgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgaW5wdXRzIHwgYHt9YFxuYC0tcGFwZXItdGltZS1kcm9wZG93bi1pbnB1dC1jb3RuYWluZXJgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgZHJvcGRvd24gaW5wdXQgfCBge31gXG4qL1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWxpc3Rib3gvcGFwZXItbGlzdGJveFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaXRlbS9wYXBlci1pdGVtXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1kcm9wZG93bi1tZW51L3BhcGVyLWRyb3Bkb3duLW1lbnVcIjtcbmltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWdcIjtcbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BvbHltZXIvcG9seW1lci1lbGVtZW50XCI7XG5cbmV4cG9ydCBjbGFzcyBQYXBlclRpbWVJbnB1dCBleHRlbmRzIFBvbHltZXJFbGVtZW50IHtcbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgOmhvc3Qge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLWJhc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwYXBlci1pbnB1dCB7XG4gICAgICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0OiB7XG4gICAgICAgICAgICAvKiBEYW1uIHlvdSBmaXJlZm94XG4gICAgICAgICAgICAgKiBOZWVkZWQgdG8gaGlkZSBzcGluIG51bSBpbiBmaXJlZm94XG4gICAgICAgICAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM3OTA5MzUvY2FuLWktaGlkZS10aGUtaHRtbDUtbnVtYmVyLWlucHV0LXMtc3Bpbi1ib3hcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLW1vei1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XG4gICAgICAgICAgICBAYXBwbHkgLS1wYXBlci10aW1lLWlucHV0LWNvdG5haW5lcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LXNwaW5uZXI6IHtcbiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXNoYXJlZC1pbnB1dC1zdHlsZV8tXy13ZWJraXQtYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFwZXItZHJvcGRvd24tbWVudSB7XG4gICAgICAgICAgd2lkdGg6IDU1cHg7XG4gICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAvKiBGb3JjZSByaXBwbGUgdG8gdXNlIHRoZSB3aG9sZSBjb250YWluZXIgKi9cbiAgICAgICAgICAtLXBhcGVyLWRyb3Bkb3duLW1lbnUtcmlwcGxlOiB7XG4gICAgICAgICAgICBjb2xvcjogdmFyKFxuICAgICAgICAgICAgICAtLXBhcGVyLXRpbWUtaW5wdXQtZHJvcGRvd24tcmlwcGxlLWNvbG9yLFxuICAgICAgICAgICAgICB2YXIoLS1wcmltYXJ5LWNvbG9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQ6IHtcbiAgICAgICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtYnV0dG9uO1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiA1cHg7XG4gICAgICAgICAgICBAYXBwbHkgLS1wYXBlci10aW1lLWRyb3Bkb3duLWlucHV0LWNvdG5haW5lcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLS1wYXBlci1pbnB1dC1jb250YWluZXItdW5kZXJsaW5lOiB7XG4gICAgICAgICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci11bmRlcmxpbmUtZm9jdXM6IHtcbiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcGFwZXItaXRlbSB7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cblxuICAgICAgICBwYXBlci1saXN0Ym94IHtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFiZWwge1xuICAgICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY2FwdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC50aW1lLWlucHV0LXdyYXAge1xuICAgICAgICAgIEBhcHBseSAtLWxheW91dC1ob3Jpem9udGFsO1xuICAgICAgICAgIEBhcHBseSAtLWxheW91dC1uby13cmFwO1xuICAgICAgICB9XG5cbiAgICAgICAgW2hpZGRlbl0ge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cblxuICAgICAgPGxhYmVsIGhpZGRlbiQ9XCJbW2hpZGVMYWJlbF1dXCI+W1tsYWJlbF1dPC9sYWJlbD5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLWlucHV0LXdyYXBcIj5cbiAgICAgICAgPCEtLSBIb3VyIElucHV0IC0tPlxuICAgICAgICA8cGFwZXItaW5wdXRcbiAgICAgICAgICBpZD1cImhvdXJcIlxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIHZhbHVlPVwie3tob3VyfX1cIlxuICAgICAgICAgIG9uLWNoYW5nZT1cIl9zaG91bGRGb3JtYXRIb3VyXCJcbiAgICAgICAgICByZXF1aXJlZD1cIlwiXG4gICAgICAgICAgYXV0by12YWxpZGF0ZT1cIltbYXV0b1ZhbGlkYXRlXV1cIlxuICAgICAgICAgIHByZXZlbnQtaW52YWxpZC1pbnB1dD1cIlwiXG4gICAgICAgICAgbWF4bGVuZ3RoPVwiMlwiXG4gICAgICAgICAgbWF4PVwiW1tfY29tcHV0ZUhvdXJNYXgoZm9ybWF0KV1dXCJcbiAgICAgICAgICBtaW49XCIwXCJcbiAgICAgICAgICBuby1sYWJlbC1mbG9hdD1cIlwiXG4gICAgICAgICAgZGlzYWJsZWQ9XCJbW2Rpc2FibGVkXV1cIlxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gc3VmZml4PVwiXCIgc2xvdD1cInN1ZmZpeFwiPjo8L3NwYW4+XG4gICAgICAgIDwvcGFwZXItaW5wdXQ+XG5cbiAgICAgICAgPCEtLSBNaW4gSW5wdXQgLS0+XG4gICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgIGlkPVwibWluXCJcbiAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICB2YWx1ZT1cInt7bWlufX1cIlxuICAgICAgICAgIG9uLWNoYW5nZT1cIl9mb3JtYXRNaW5cIlxuICAgICAgICAgIHJlcXVpcmVkPVwiXCJcbiAgICAgICAgICBhdXRvLXZhbGlkYXRlPVwiW1thdXRvVmFsaWRhdGVdXVwiXG4gICAgICAgICAgcHJldmVudC1pbnZhbGlkLWlucHV0PVwiXCJcbiAgICAgICAgICBtYXhsZW5ndGg9XCIyXCJcbiAgICAgICAgICBtYXg9XCI1OVwiXG4gICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgbm8tbGFiZWwtZmxvYXQ9XCJcIlxuICAgICAgICAgIGRpc2FibGVkPVwiW1tkaXNhYmxlZF1dXCJcbiAgICAgICAgPlxuICAgICAgICA8L3BhcGVyLWlucHV0PlxuXG4gICAgICAgIDwhLS0gRHJvcGRvd24gTWVudSAtLT5cbiAgICAgICAgPHBhcGVyLWRyb3Bkb3duLW1lbnVcbiAgICAgICAgICBpZD1cImRyb3Bkb3duXCJcbiAgICAgICAgICByZXF1aXJlZD1cIlwiXG4gICAgICAgICAgaGlkZGVuJD1cIltbX2VxdWFsKGZvcm1hdCwgMjQpXV1cIlxuICAgICAgICAgIG5vLWxhYmVsLWZsb2F0PVwiXCJcbiAgICAgICAgICBkaXNhYmxlZD1cIltbZGlzYWJsZWRdXVwiXG4gICAgICAgID5cbiAgICAgICAgICA8cGFwZXItbGlzdGJveFxuICAgICAgICAgICAgYXR0ci1mb3Itc2VsZWN0ZWQ9XCJuYW1lXCJcbiAgICAgICAgICAgIHNlbGVjdGVkPVwie3thbVBtfX1cIlxuICAgICAgICAgICAgc2xvdD1cImRyb3Bkb3duLWNvbnRlbnRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxwYXBlci1pdGVtIG5hbWU9XCJBTVwiPkFNPC9wYXBlci1pdGVtPlxuICAgICAgICAgICAgPHBhcGVyLWl0ZW0gbmFtZT1cIlBNXCI+UE08L3BhcGVyLWl0ZW0+XG4gICAgICAgICAgPC9wYXBlci1saXN0Ym94PlxuICAgICAgICA8L3BhcGVyLWRyb3Bkb3duLW1lbnU+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIExhYmVsIGZvciB0aGUgaW5wdXRcbiAgICAgICAqL1xuICAgICAgbGFiZWw6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICB2YWx1ZTogXCJUaW1lXCIsXG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBhdXRvIHZhbGlkYXRlIHRpbWUgaW5wdXRzXG4gICAgICAgKi9cbiAgICAgIGF1dG9WYWxpZGF0ZToge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIGhpZGVzIHRoZSBsYWJlbFxuICAgICAgICovXG4gICAgICBoaWRlTGFiZWw6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogMTIgb3IgMjQgaHIgZm9ybWF0XG4gICAgICAgKi9cbiAgICAgIGZvcm1hdDoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIHZhbHVlOiAxMixcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIGRpc2FibGVzIHRoZSBpbnB1dHNcbiAgICAgICAqL1xuICAgICAgZGlzYWJsZWQ6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogaG91clxuICAgICAgICovXG4gICAgICBob3VyOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgbm90aWZ5OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogbWludXRlXG4gICAgICAgKi9cbiAgICAgIG1pbjoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIG5vdGlmeTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEFNIG9yIFBNXG4gICAgICAgKi9cbiAgICAgIGFtUG06IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBub3RpZnk6IHRydWUsXG4gICAgICAgIHZhbHVlOiBcIkFNXCIsXG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBGb3JtYXR0ZWQgdGltZSBzdHJpbmdcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBub3RpZnk6IHRydWUsXG4gICAgICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgICAgICBjb21wdXRlZDogXCJfY29tcHV0ZVRpbWUobWluLCBob3VyLCBhbVBtKVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHRoZSBpbnB1dHNcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHZhbGlkYXRlKCkge1xuICAgIHZhciB2YWxpZCA9IHRydWU7XG4gICAgLy8gVmFsaWRhdGUgaG91ciAmIG1pbiBmaWVsZHNcbiAgICBpZiAoIXRoaXMuJC5ob3VyLnZhbGlkYXRlKCkgfCAhdGhpcy4kLm1pbi52YWxpZGF0ZSgpKSB7XG4gICAgICB2YWxpZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBWYWxpZGF0ZSBBTSBQTSBpZiAxMiBob3VyIHRpbWVcbiAgICBpZiAodGhpcy5mb3JtYXQgPT09IDEyICYmICF0aGlzLiQuZHJvcGRvd24udmFsaWRhdGUoKSkge1xuICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aW1lIHN0cmluZ1xuICAgKi9cbiAgX2NvbXB1dGVUaW1lKG1pbiwgaG91ciwgYW1QbSkge1xuICAgIGlmIChob3VyICYmIG1pbikge1xuICAgICAgLy8gTm8gYW1wbSBvbiAyNCBociB0aW1lXG4gICAgICBpZiAodGhpcy5mb3JtYXQgPT09IDI0KSB7XG4gICAgICAgIGFtUG0gPSBcIlwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhvdXIgKyBcIjpcIiArIG1pbiArIFwiIFwiICsgYW1QbTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgbWluXG4gICAqL1xuICBfZm9ybWF0TWluKCkge1xuICAgIGlmICh0aGlzLm1pbi50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5taW4gPSB0aGlzLm1pbiA8IDEwID8gXCIwXCIgKyB0aGlzLm1pbiA6IHRoaXMubWluO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIb3VyIG5lZWRzIGEgbGVhZGluZyB6ZXJvIGluIDI0aHIgZm9ybWF0XG4gICAqL1xuICBfc2hvdWxkRm9ybWF0SG91cigpIHtcbiAgICBpZiAodGhpcy5mb3JtYXQgPT09IDI0ICYmIHRoaXMuaG91ci50b1N0cmluZygpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5ob3VyID0gdGhpcy5ob3VyIDwgMTAgPyBcIjBcIiArIHRoaXMuaG91ciA6IHRoaXMuaG91cjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogMjQgaG91ciBmb3JtYXQgaGFzIGEgbWF4IGhyIG9mIDIzXG4gICAqL1xuICBfY29tcHV0ZUhvdXJNYXgoZm9ybWF0KSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gMTIpIHtcbiAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgfVxuICAgIHJldHVybiAyMztcbiAgfVxuXG4gIF9lcXVhbChuMSwgbjIpIHtcbiAgICByZXR1cm4gbjEgPT09IG4yO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcInBhcGVyLXRpbWUtaW5wdXRcIiwgUGFwZXJUaW1lSW5wdXQpO1xuIiwiaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgRk9STUFUX1RFWFQgPSBcInRleHRcIjtcbmV4cG9ydCBjb25zdCBGT1JNQVRfTlVNQkVSID0gXCJudW1iZXJcIjtcblxuZXhwb3J0IGNvbnN0IGNhbGxBbGFybUFjdGlvbiA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5OiBzdHJpbmcsXG4gIGFjdGlvbjpcbiAgICB8IFwiYXJtX2F3YXlcIlxuICAgIHwgXCJhcm1faG9tZVwiXG4gICAgfCBcImFybV9uaWdodFwiXG4gICAgfCBcImFybV9jdXN0b21fYnlwYXNzXCJcbiAgICB8IFwiZGlzYXJtXCIsXG4gIGNvZGU6IHN0cmluZ1xuKSA9PiB7XG4gIGhhc3MhLmNhbGxTZXJ2aWNlKFwiYWxhcm1fY29udHJvbF9wYW5lbFwiLCBcImFsYXJtX1wiICsgYWN0aW9uLCB7XG4gICAgZW50aXR5X2lkOiBlbnRpdHksXG4gICAgY29kZSxcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgY3JlYXRlQ29sbGVjdGlvbiwgQ29ubmVjdGlvbiB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNvbXBhcmUgfSBmcm9tIFwiLi4vY29tbW9uL3N0cmluZy9jb21wYXJlXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gXCIuLi9jb21tb24vdXRpbC9kZWJvdW5jZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFyZWFSZWdpc3RyeUVudHJ5IHtcbiAgYXJlYV9pZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXJlYVJlZ2lzdHJ5RW50cnlNdXRhYmxlUGFyYW1zIHtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQXJlYVJlZ2lzdHJ5RW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHZhbHVlczogQXJlYVJlZ2lzdHJ5RW50cnlNdXRhYmxlUGFyYW1zXG4pID0+XG4gIGhhc3MuY2FsbFdTPEFyZWFSZWdpc3RyeUVudHJ5Pih7XG4gICAgdHlwZTogXCJjb25maWcvYXJlYV9yZWdpc3RyeS9jcmVhdGVcIixcbiAgICAuLi52YWx1ZXMsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlQXJlYVJlZ2lzdHJ5RW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGFyZWFJZDogc3RyaW5nLFxuICB1cGRhdGVzOiBQYXJ0aWFsPEFyZWFSZWdpc3RyeUVudHJ5TXV0YWJsZVBhcmFtcz5cbikgPT5cbiAgaGFzcy5jYWxsV1M8QXJlYVJlZ2lzdHJ5RW50cnk+KHtcbiAgICB0eXBlOiBcImNvbmZpZy9hcmVhX3JlZ2lzdHJ5L3VwZGF0ZVwiLFxuICAgIGFyZWFfaWQ6IGFyZWFJZCxcbiAgICAuLi51cGRhdGVzLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUFyZWFSZWdpc3RyeUVudHJ5ID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQsIGFyZWFJZDogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJjb25maWcvYXJlYV9yZWdpc3RyeS9kZWxldGVcIixcbiAgICBhcmVhX2lkOiBhcmVhSWQsXG4gIH0pO1xuXG5jb25zdCBmZXRjaEFyZWFSZWdpc3RyeSA9IChjb25uKSA9PlxuICBjb25uXG4gICAgLnNlbmRNZXNzYWdlUHJvbWlzZSh7XG4gICAgICB0eXBlOiBcImNvbmZpZy9hcmVhX3JlZ2lzdHJ5L2xpc3RcIixcbiAgICB9KVxuICAgIC50aGVuKChhcmVhcykgPT4gYXJlYXMuc29ydCgoZW50MSwgZW50MikgPT4gY29tcGFyZShlbnQxLm5hbWUsIGVudDIubmFtZSkpKTtcblxuY29uc3Qgc3Vic2NyaWJlQXJlYVJlZ2lzdHJ5VXBkYXRlcyA9IChjb25uLCBzdG9yZSkgPT5cbiAgY29ubi5zdWJzY3JpYmVFdmVudHMoXG4gICAgZGVib3VuY2UoXG4gICAgICAoKSA9PlxuICAgICAgICBmZXRjaEFyZWFSZWdpc3RyeShjb25uKS50aGVuKChhcmVhcykgPT4gc3RvcmUuc2V0U3RhdGUoYXJlYXMsIHRydWUpKSxcbiAgICAgIDUwMCxcbiAgICAgIHRydWVcbiAgICApLFxuICAgIFwiYXJlYV9yZWdpc3RyeV91cGRhdGVkXCJcbiAgKTtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZUFyZWFSZWdpc3RyeSA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgb25DaGFuZ2U6IChhcmVhczogQXJlYVJlZ2lzdHJ5RW50cnlbXSkgPT4gdm9pZFxuKSA9PlxuICBjcmVhdGVDb2xsZWN0aW9uPEFyZWFSZWdpc3RyeUVudHJ5W10+KFxuICAgIFwiX2FyZWFSZWdpc3RyeVwiLFxuICAgIGZldGNoQXJlYVJlZ2lzdHJ5LFxuICAgIHN1YnNjcmliZUFyZWFSZWdpc3RyeVVwZGF0ZXMsXG4gICAgY29ubixcbiAgICBvbkNoYW5nZVxuICApO1xuIiwiaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ29sbGVjdGlvbiwgQ29ubmVjdGlvbiB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsL2RlYm91bmNlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlUmVnaXN0cnlFbnRyeSB7XG4gIGlkOiBzdHJpbmc7XG4gIGNvbmZpZ19lbnRyaWVzOiBzdHJpbmdbXTtcbiAgY29ubmVjdGlvbnM6IEFycmF5PFtzdHJpbmcsIHN0cmluZ10+O1xuICBtYW51ZmFjdHVyZXI6IHN0cmluZztcbiAgbW9kZWw/OiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIHN3X3ZlcnNpb24/OiBzdHJpbmc7XG4gIHZpYV9kZXZpY2VfaWQ/OiBzdHJpbmc7XG4gIGFyZWFfaWQ/OiBzdHJpbmc7XG4gIG5hbWVfYnlfdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXZpY2VSZWdpc3RyeUVudHJ5TXV0YWJsZVBhcmFtcyB7XG4gIGFyZWFfaWQ/OiBzdHJpbmcgfCBudWxsO1xuICBuYW1lX2J5X3VzZXI/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlRGV2aWNlUmVnaXN0cnlFbnRyeSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZGV2aWNlSWQ6IHN0cmluZyxcbiAgdXBkYXRlczogUGFydGlhbDxEZXZpY2VSZWdpc3RyeUVudHJ5TXV0YWJsZVBhcmFtcz5cbikgPT5cbiAgaGFzcy5jYWxsV1M8RGV2aWNlUmVnaXN0cnlFbnRyeT4oe1xuICAgIHR5cGU6IFwiY29uZmlnL2RldmljZV9yZWdpc3RyeS91cGRhdGVcIixcbiAgICBkZXZpY2VfaWQ6IGRldmljZUlkLFxuICAgIC4uLnVwZGF0ZXMsXG4gIH0pO1xuXG5jb25zdCBmZXRjaERldmljZVJlZ2lzdHJ5ID0gKGNvbm4pID0+XG4gIGNvbm4uc2VuZE1lc3NhZ2VQcm9taXNlKHtcbiAgICB0eXBlOiBcImNvbmZpZy9kZXZpY2VfcmVnaXN0cnkvbGlzdFwiLFxuICB9KTtcblxuY29uc3Qgc3Vic2NyaWJlRGV2aWNlUmVnaXN0cnlVcGRhdGVzID0gKGNvbm4sIHN0b3JlKSA9PlxuICBjb25uLnN1YnNjcmliZUV2ZW50cyhcbiAgICBkZWJvdW5jZShcbiAgICAgICgpID0+XG4gICAgICAgIGZldGNoRGV2aWNlUmVnaXN0cnkoY29ubikudGhlbigoZGV2aWNlcykgPT5cbiAgICAgICAgICBzdG9yZS5zZXRTdGF0ZShkZXZpY2VzLCB0cnVlKVxuICAgICAgICApLFxuICAgICAgNTAwLFxuICAgICAgdHJ1ZVxuICAgICksXG4gICAgXCJkZXZpY2VfcmVnaXN0cnlfdXBkYXRlZFwiXG4gICk7XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVEZXZpY2VSZWdpc3RyeSA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgb25DaGFuZ2U6IChkZXZpY2VzOiBEZXZpY2VSZWdpc3RyeUVudHJ5W10pID0+IHZvaWRcbikgPT5cbiAgY3JlYXRlQ29sbGVjdGlvbjxEZXZpY2VSZWdpc3RyeUVudHJ5W10+KFxuICAgIFwiX2RyXCIsXG4gICAgZmV0Y2hEZXZpY2VSZWdpc3RyeSxcbiAgICBzdWJzY3JpYmVEZXZpY2VSZWdpc3RyeVVwZGF0ZXMsXG4gICAgY29ubixcbiAgICBvbkNoYW5nZVxuICApO1xuIiwiZXhwb3J0IGNvbnN0IFVOQVZBSUxBQkxFID0gXCJ1bmF2YWlsYWJsZVwiO1xuXG5leHBvcnQgY29uc3QgRU5USVRZX0NPTVBPTkVOVF9ET01BSU5TID0gW1xuICBcImFpcl9xdWFsaXR5XCIsXG4gIFwiYWxhcm1fY29udHJvbF9wYW5lbFwiLFxuICBcImFsZXJ0XCIsXG4gIFwiYXV0b21hdGlvblwiLFxuICBcImJpbmFyeV9zZW5zb3JcIixcbiAgXCJjYWxlbmRhclwiLFxuICBcImNhbWVyYVwiLFxuICBcImNvdW50ZXJcIixcbiAgXCJjb3ZlclwiLFxuICBcImRvbWlub3NcIixcbiAgXCJmYW5cIixcbiAgXCJnZW9fbG9jYXRpb25cIixcbiAgXCJncm91cFwiLFxuICBcImhpc3RvcnlfZ3JhcGhcIixcbiAgXCJpbWFnZV9wcm9jZXNzaW5nXCIsXG4gIFwiaW5wdXRfYm9vbGVhblwiLFxuICBcImlucHV0X2RhdGV0aW1lXCIsXG4gIFwiaW5wdXRfbnVtYmVyXCIsXG4gIFwiaW5wdXRfc2VsZWN0XCIsXG4gIFwiaW5wdXRfdGV4dFwiLFxuICBcImxpZ2h0XCIsXG4gIFwibG9ja1wiLFxuICBcIm1haWxib3hcIixcbiAgXCJtZWRpYV9wbGF5ZXJcIixcbiAgXCJwZXJzb25cIixcbiAgXCJwbGFudFwiLFxuICBcInJlbWVtYmVyX3RoZV9taWxrXCIsXG4gIFwicmVtb3RlXCIsXG4gIFwic2NlbmVcIixcbiAgXCJzY3JpcHRcIixcbiAgXCJzZW5zb3JcIixcbiAgXCJzd2l0Y2hcIixcbiAgXCJ0aW1lclwiLFxuICBcInV0aWxpdHlfbWV0ZXJcIixcbiAgXCJ2YWN1dW1cIixcbiAgXCJ3ZWF0aGVyXCIsXG4gIFwid2lua1wiLFxuICBcInpoYVwiLFxuICBcInp3YXZlXCIsXG5dO1xuIiwiaW1wb3J0IHsgY3JlYXRlQ29sbGVjdGlvbiwgQ29ubmVjdGlvbiB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsL2RlYm91bmNlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW50aXR5UmVnaXN0cnlFbnRyeSB7XG4gIGVudGl0eV9pZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHBsYXRmb3JtOiBzdHJpbmc7XG4gIGNvbmZpZ19lbnRyeV9pZD86IHN0cmluZztcbiAgZGV2aWNlX2lkPzogc3RyaW5nO1xuICBkaXNhYmxlZF9ieTogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRpdHlSZWdpc3RyeUVudHJ5VXBkYXRlUGFyYW1zIHtcbiAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gIGRpc2FibGVkX2J5Pzogc3RyaW5nIHwgbnVsbDtcbiAgbmV3X2VudGl0eV9pZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVFbnRpdHlSZWdpc3RyeU5hbWUgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudHJ5OiBFbnRpdHlSZWdpc3RyeUVudHJ5XG4pOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICByZXR1cm4gZW50cnkubmFtZTtcbiAgfVxuICBjb25zdCBzdGF0ZSA9IGhhc3Muc3RhdGVzW2VudHJ5LmVudGl0eV9pZF07XG4gIHJldHVybiBzdGF0ZSA/IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGUpIDogbnVsbDtcbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVFbnRpdHlSZWdpc3RyeUVudHJ5ID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBlbnRpdHlJZDogc3RyaW5nLFxuICB1cGRhdGVzOiBQYXJ0aWFsPEVudGl0eVJlZ2lzdHJ5RW50cnlVcGRhdGVQYXJhbXM+XG4pOiBQcm9taXNlPEVudGl0eVJlZ2lzdHJ5RW50cnk+ID0+XG4gIGhhc3MuY2FsbFdTPEVudGl0eVJlZ2lzdHJ5RW50cnk+KHtcbiAgICB0eXBlOiBcImNvbmZpZy9lbnRpdHlfcmVnaXN0cnkvdXBkYXRlXCIsXG4gICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgICAuLi51cGRhdGVzLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZUVudGl0eVJlZ2lzdHJ5RW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwiY29uZmlnL2VudGl0eV9yZWdpc3RyeS9yZW1vdmVcIixcbiAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICB9KTtcblxuY29uc3QgZmV0Y2hFbnRpdHlSZWdpc3RyeSA9IChjb25uKSA9PlxuICBjb25uLnNlbmRNZXNzYWdlUHJvbWlzZSh7XG4gICAgdHlwZTogXCJjb25maWcvZW50aXR5X3JlZ2lzdHJ5L2xpc3RcIixcbiAgfSk7XG5cbmNvbnN0IHN1YnNjcmliZUVudGl0eVJlZ2lzdHJ5VXBkYXRlcyA9IChjb25uLCBzdG9yZSkgPT5cbiAgY29ubi5zdWJzY3JpYmVFdmVudHMoXG4gICAgZGVib3VuY2UoXG4gICAgICAoKSA9PlxuICAgICAgICBmZXRjaEVudGl0eVJlZ2lzdHJ5KGNvbm4pLnRoZW4oKGVudGl0aWVzKSA9PlxuICAgICAgICAgIHN0b3JlLnNldFN0YXRlKGVudGl0aWVzLCB0cnVlKVxuICAgICAgICApLFxuICAgICAgNTAwLFxuICAgICAgdHJ1ZVxuICAgICksXG4gICAgXCJlbnRpdHlfcmVnaXN0cnlfdXBkYXRlZFwiXG4gICk7XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeSA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgb25DaGFuZ2U6IChlbnRpdGllczogRW50aXR5UmVnaXN0cnlFbnRyeVtdKSA9PiB2b2lkXG4pID0+XG4gIGNyZWF0ZUNvbGxlY3Rpb248RW50aXR5UmVnaXN0cnlFbnRyeVtdPihcbiAgICBcIl9lbnRpdHlSZWdpc3RyeVwiLFxuICAgIGZldGNoRW50aXR5UmVnaXN0cnksXG4gICAgc3Vic2NyaWJlRW50aXR5UmVnaXN0cnlVcGRhdGVzLFxuICAgIGNvbm4sXG4gICAgb25DaGFuZ2VcbiAgKTtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IHNldElucHV0RGF0ZVRpbWVWYWx1ZSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZyxcbiAgdGltZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBkYXRlOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbikgPT4ge1xuICBjb25zdCBwYXJhbSA9IHsgZW50aXR5X2lkOiBlbnRpdHlJZCwgdGltZSwgZGF0ZSB9O1xuICBoYXNzLmNhbGxTZXJ2aWNlKGVudGl0eUlkLnNwbGl0KFwiLlwiLCAxKVswXSwgXCJzZXRfZGF0ZXRpbWVcIiwgcGFyYW0pO1xufTtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IHNldFZhbHVlID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQsIGVudGl0eTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxTZXJ2aWNlKGVudGl0eS5zcGxpdChcIi5cIiwgMSlbMF0sIFwic2V0X3ZhbHVlXCIsIHtcbiAgICB2YWx1ZSxcbiAgICBlbnRpdHlfaWQ6IGVudGl0eSxcbiAgfSk7XG4iLCJleHBvcnQgY29uc3QgU1VQUE9SVF9CUklHSFRORVNTID0gMTtcbmV4cG9ydCBjb25zdCBTVVBQT1JUX0NPTE9SX1RFTVAgPSAyO1xuZXhwb3J0IGNvbnN0IFNVUFBPUlRfRUZGRUNUID0gNDtcbmV4cG9ydCBjb25zdCBTVVBQT1JUX0ZMQVNIID0gODtcbmV4cG9ydCBjb25zdCBTVVBQT1JUX0NPTE9SID0gMTY7XG5leHBvcnQgY29uc3QgU1VQUE9SVF9UUkFOU0lUSU9OID0gMzI7XG5leHBvcnQgY29uc3QgU1VQUE9SVF9XSElURV9WQUxVRSA9IDEyODtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb24sIGdldENvbGxlY3Rpb24gfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VDb25maWcge1xuICB0aXRsZT86IHN0cmluZztcbiAgdmlld3M6IExvdmVsYWNlVmlld0NvbmZpZ1tdO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICByZXNvdXJjZXM/OiBBcnJheTx7IHR5cGU6IFwiY3NzXCIgfCBcImpzXCIgfCBcIm1vZHVsZVwiIHwgXCJodG1sXCI7IHVybDogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvdmVsYWNlVmlld0NvbmZpZyB7XG4gIGluZGV4PzogbnVtYmVyO1xuICB0aXRsZT86IHN0cmluZztcbiAgYmFkZ2VzPzogc3RyaW5nW107XG4gIGNhcmRzPzogTG92ZWxhY2VDYXJkQ29uZmlnW107XG4gIHBhdGg/OiBzdHJpbmc7XG4gIGljb24/OiBzdHJpbmc7XG4gIHRoZW1lPzogc3RyaW5nO1xuICBwYW5lbD86IGJvb2xlYW47XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIHZpc2libGU/OiBib29sZWFuIHwgU2hvd1ZpZXdDb25maWdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaG93Vmlld0NvbmZpZyB7XG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VDYXJkQ29uZmlnIHtcbiAgaW5kZXg/OiBudW1iZXI7XG4gIHZpZXdfaW5kZXg/OiBudW1iZXI7XG4gIHR5cGU6IHN0cmluZztcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvZ2dsZUFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJ0b2dnbGVcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYWxsU2VydmljZUFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJjYWxsLXNlcnZpY2VcIjtcbiAgc2VydmljZTogc3RyaW5nO1xuICBzZXJ2aWNlX2RhdGE/OiB7XG4gICAgZW50aXR5X2lkPzogc3RyaW5nIHwgW3N0cmluZ107XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5hdmlnYXRlQWN0aW9uQ29uZmlnIHtcbiAgYWN0aW9uOiBcIm5hdmlnYXRlXCI7XG4gIG5hdmlnYXRpb25fcGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVybEFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJ1cmxcIjtcbiAgdXJsX3BhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb3JlSW5mb0FjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJtb3JlLWluZm9cIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb0FjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJub25lXCI7XG59XG5cbmV4cG9ydCB0eXBlIEFjdGlvbkNvbmZpZyA9XG4gIHwgVG9nZ2xlQWN0aW9uQ29uZmlnXG4gIHwgQ2FsbFNlcnZpY2VBY3Rpb25Db25maWdcbiAgfCBOYXZpZ2F0ZUFjdGlvbkNvbmZpZ1xuICB8IFVybEFjdGlvbkNvbmZpZ1xuICB8IE1vcmVJbmZvQWN0aW9uQ29uZmlnXG4gIHwgTm9BY3Rpb25Db25maWc7XG5cbmV4cG9ydCBjb25zdCBmZXRjaENvbmZpZyA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgZm9yY2U6IGJvb2xlYW5cbik6IFByb21pc2U8TG92ZWxhY2VDb25maWc+ID0+XG4gIGNvbm4uc2VuZE1lc3NhZ2VQcm9taXNlKHtcbiAgICB0eXBlOiBcImxvdmVsYWNlL2NvbmZpZ1wiLFxuICAgIGZvcmNlLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHNhdmVDb25maWcgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWdcbik6IFByb21pc2U8dm9pZD4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwibG92ZWxhY2UvY29uZmlnL3NhdmVcIixcbiAgICBjb25maWcsXG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlTG92ZWxhY2VVcGRhdGVzID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBvbkNoYW5nZTogKCkgPT4gdm9pZFxuKSA9PiBjb25uLnN1YnNjcmliZUV2ZW50cyhvbkNoYW5nZSwgXCJsb3ZlbGFjZV91cGRhdGVkXCIpO1xuXG5leHBvcnQgY29uc3QgZ2V0TG92ZWxhY2VDb2xsZWN0aW9uID0gKGNvbm46IENvbm5lY3Rpb24pID0+XG4gIGdldENvbGxlY3Rpb24oXG4gICAgY29ubixcbiAgICBcIl9sb3ZlbGFjZVwiLFxuICAgIChjb25uMikgPT4gZmV0Y2hDb25maWcoY29ubjIsIGZhbHNlKSxcbiAgICAoX2Nvbm4sIHN0b3JlKSA9PlxuICAgICAgc3Vic2NyaWJlTG92ZWxhY2VVcGRhdGVzKGNvbm4sICgpID0+XG4gICAgICAgIGZldGNoQ29uZmlnKGNvbm4sIGZhbHNlKS50aGVuKChjb25maWcpID0+IHN0b3JlLnNldFN0YXRlKGNvbmZpZywgdHJ1ZSkpXG4gICAgICApXG4gICk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2luZG93V2l0aExvdmVsYWNlUHJvbSBleHRlbmRzIFdpbmRvdyB7XG4gIGxsQ29uZlByb20/OiBQcm9taXNlPExvdmVsYWNlQ29uZmlnPjtcbn1cbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTaG9wcGluZ0xpc3RJdGVtIHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBjb21wbGV0ZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGZldGNoSXRlbXMgPSAoaGFzczogSG9tZUFzc2lzdGFudCk6IFByb21pc2U8U2hvcHBpbmdMaXN0SXRlbVtdPiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJzaG9wcGluZ19saXN0L2l0ZW1zXCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlSXRlbSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgaXRlbUlkOiBudW1iZXIsXG4gIGl0ZW06IHtcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGNvbXBsZXRlPzogYm9vbGVhbjtcbiAgfVxuKTogUHJvbWlzZTxTaG9wcGluZ0xpc3RJdGVtPiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJzaG9wcGluZ19saXN0L2l0ZW1zL3VwZGF0ZVwiLFxuICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAuLi5pdGVtLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGNsZWFySXRlbXMgPSAoaGFzczogSG9tZUFzc2lzdGFudCk6IFByb21pc2U8dm9pZD4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwic2hvcHBpbmdfbGlzdC9pdGVtcy9jbGVhclwiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGFkZEl0ZW0gPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIG5hbWU6IHN0cmluZ1xuKTogUHJvbWlzZTxTaG9wcGluZ0xpc3RJdGVtPiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJzaG9wcGluZ19saXN0L2l0ZW1zL2FkZFwiLFxuICAgIG5hbWUsXG4gIH0pO1xuIiwiaW1wb3J0IHsgQ29ubmVjdGlvbiwgVW5zdWJzY3JpYmVGdW5jIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5pbnRlcmZhY2UgUmVuZGVyVGVtcGxhdGVSZXN1bHQge1xuICByZXN1bHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZVJlbmRlclRlbXBsYXRlID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBvbkNoYW5nZTogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkLFxuICBwYXJhbXM6IHtcbiAgICB0ZW1wbGF0ZTogc3RyaW5nO1xuICAgIGVudGl0eV9pZHM/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICB2YXJpYWJsZXM/OiBvYmplY3Q7XG4gIH1cbik6IFByb21pc2U8VW5zdWJzY3JpYmVGdW5jPiA9PiB7XG4gIHJldHVybiBjb25uLnN1YnNjcmliZU1lc3NhZ2UoXG4gICAgKG1zZzogUmVuZGVyVGVtcGxhdGVSZXN1bHQpID0+IG9uQ2hhbmdlKG1zZy5yZXN1bHQpLFxuICAgIHsgdHlwZTogXCJyZW5kZXJfdGVtcGxhdGVcIiwgLi4ucGFyYW1zIH1cbiAgKTtcbn07XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIENTU1Jlc3VsdCxcbiAgY3NzLFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtbGFiZWwtYmFkZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQge1xuICBjYWxsQWxhcm1BY3Rpb24sXG4gIEZPUk1BVF9OVU1CRVIsXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2FsYXJtX2NvbnRyb2xfcGFuZWxcIjtcbmltcG9ydCB7IEFsYXJtUGFuZWxDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IFBhcGVySW5wdXRFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0XCI7XG5cbmNvbnN0IElDT05TID0ge1xuICBhcm1lZF9hd2F5OiBcImhhc3M6c2hpZWxkLWxvY2tcIixcbiAgYXJtZWRfY3VzdG9tX2J5cGFzczogXCJoYXNzOnNlY3VyaXR5XCIsXG4gIGFybWVkX2hvbWU6IFwiaGFzczpzaGllbGQtaG9tZVwiLFxuICBhcm1lZF9uaWdodDogXCJoYXNzOnNoaWVsZC1ob21lXCIsXG4gIGRpc2FybWVkOiBcImhhc3M6c2hpZWxkLWNoZWNrXCIsXG4gIHBlbmRpbmc6IFwiaGFzczpzaGllbGQtb3V0bGluZVwiLFxuICB0cmlnZ2VyZWQ6IFwiaGFzczpiZWxsLXJpbmdcIixcbn07XG5cbmNvbnN0IEJVVFRPTlMgPSBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCJcIiwgXCIwXCIsIFwiY2xlYXJcIl07XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWFsYXJtLXBhbmVsLWNhcmRcIilcbmNsYXNzIEh1aUFsYXJtUGFuZWxDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpIHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktYWxhcm0tcGFuZWwtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLWFsYXJtLXBhbmVsLWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLWFsYXJtLXBhbmVsLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCkge1xuICAgIHJldHVybiB7IHN0YXRlczogW1wiYXJtX2hvbWVcIiwgXCJhcm1fYXdheVwiXSwgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogQWxhcm1QYW5lbENhcmRDb25maWc7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29kZT86IHN0cmluZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICByZXR1cm4gIXN0YXRlT2JqIHx8IHN0YXRlT2JqLmF0dHJpYnV0ZXMuY29kZV9mb3JtYXQgIT09IEZPUk1BVF9OVU1CRVJcbiAgICAgID8gM1xuICAgICAgOiA4O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEFsYXJtUGFuZWxDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKFxuICAgICAgIWNvbmZpZyB8fFxuICAgICAgIWNvbmZpZy5lbnRpdHkgfHxcbiAgICAgIGNvbmZpZy5lbnRpdHkuc3BsaXQoXCIuXCIpWzBdICE9PSBcImFsYXJtX2NvbnRyb2xfcGFuZWxcIlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjYXJkIGNvbmZpZ3VyYXRpb25cIik7XG4gICAgfVxuXG4gICAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgICBzdGF0ZXM6IFtcImFybV9hd2F5XCIsIFwiYXJtX2hvbWVcIl0sXG4gICAgfTtcblxuICAgIHRoaXMuX2NvbmZpZyA9IHsgLi4uZGVmYXVsdHMsIC4uLmNvbmZpZyB9O1xuICAgIHRoaXMuX2NvZGUgPSBcIlwiO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpIHx8IGNoYW5nZWRQcm9wcy5oYXMoXCJfY29kZVwiKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG4gICAgaWYgKG9sZEhhc3MpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIG9sZEhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XSAhPT1cbiAgICAgICAgdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZFxuICAgICAgICAuaGVhZGVyPVwiJHt0aGlzLl9jb25maWcubmFtZSB8fFxuICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMuZnJpZW5kbHlfbmFtZSB8fFxuICAgICAgICAgIHRoaXMuX2xhYmVsKHN0YXRlT2JqLnN0YXRlKX1cIlxuICAgICAgPlxuICAgICAgICA8aGEtbGFiZWwtYmFkZ2VcbiAgICAgICAgICBjbGFzcz1cIiR7Y2xhc3NNYXAoeyBbc3RhdGVPYmouc3RhdGVdOiB0cnVlIH0pfVwiXG4gICAgICAgICAgLmljb249XCIke0lDT05TW3N0YXRlT2JqLnN0YXRlXSB8fCBcImhhc3M6c2hpZWxkLW91dGxpbmVcIn1cIlxuICAgICAgICAgIC5sYWJlbD1cIiR7dGhpcy5fc3RhdGVJY29uTGFiZWwoc3RhdGVPYmouc3RhdGUpfVwiXG4gICAgICAgID48L2hhLWxhYmVsLWJhZGdlPlxuICAgICAgICA8ZGl2IGlkPVwiYXJtQWN0aW9uc1wiIGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICAgICR7KHN0YXRlT2JqLnN0YXRlID09PSBcImRpc2FybWVkXCJcbiAgICAgICAgICAgID8gdGhpcy5fY29uZmlnLnN0YXRlcyFcbiAgICAgICAgICAgIDogW1wiZGlzYXJtXCJdXG4gICAgICAgICAgKS5tYXAoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgICAgPG13Yy1idXR0b25cbiAgICAgICAgICAgICAgICAuYWN0aW9uPVwiJHtzdGF0ZX1cIlxuICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5faGFuZGxlQWN0aW9uQ2xpY2t9XCJcbiAgICAgICAgICAgICAgICBvdXRsaW5lZFxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgJHt0aGlzLl9sYWJlbChzdGF0ZSl9XG4gICAgICAgICAgICAgIDwvbXdjLWJ1dHRvbj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICAkeyFzdGF0ZU9iai5hdHRyaWJ1dGVzLmNvZGVfZm9ybWF0XG4gICAgICAgICAgPyBodG1sYGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwiYWxhcm1Db2RlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIkFsYXJtIENvZGVcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgLnZhbHVlPVwiJHt0aGlzLl9jb2RlfVwiXG4gICAgICAgICAgICAgID48L3BhcGVyLWlucHV0PlxuICAgICAgICAgICAgYH1cbiAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmNvZGVfZm9ybWF0ICE9PSBGT1JNQVRfTlVNQkVSXG4gICAgICAgICAgPyBodG1sYGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgaWQ9XCJrZXlwYWRcIj5cbiAgICAgICAgICAgICAgICAke0JVVFRPTlMubWFwKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxtd2MtYnV0dG9uIGRpc2FibGVkPjwvbXdjLWJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxtd2MtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7dmFsdWV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVQYWRDbGlja31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZW5zZVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAke3ZhbHVlID09PSBcImNsZWFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2xhYmVsKFwiY2xlYXJfY29kZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgfVxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9zdGF0ZUljb25MYWJlbChzdGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGF0ZUxhYmVsID0gc3RhdGUuc3BsaXQoXCJfXCIpLnBvcCgpO1xuICAgIHJldHVybiBzdGF0ZUxhYmVsID09PSBcImRpc2FybWVkXCIgfHxcbiAgICAgIHN0YXRlTGFiZWwgPT09IFwidHJpZ2dlcmVkXCIgfHxcbiAgICAgICFzdGF0ZUxhYmVsXG4gICAgICA/IFwiXCJcbiAgICAgIDogc3RhdGVMYWJlbDtcbiAgfVxuXG4gIHByaXZhdGUgX2xhYmVsKHN0YXRlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmhhc3MhLmxvY2FsaXplKGBzdGF0ZS5hbGFybV9jb250cm9sX3BhbmVsLiR7c3RhdGV9YCkgfHxcbiAgICAgIHRoaXMuaGFzcyEubG9jYWxpemUoYHVpLmNhcmQuYWxhcm1fY29udHJvbF9wYW5lbC4ke3N0YXRlfWApXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVBhZENsaWNrKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB2YWwgPSAoZS5jdXJyZW50VGFyZ2V0ISBhcyBhbnkpLnZhbHVlO1xuICAgIHRoaXMuX2NvZGUgPSB2YWwgPT09IFwiY2xlYXJcIiA/IFwiXCIgOiB0aGlzLl9jb2RlICsgdmFsO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlQWN0aW9uQ2xpY2soZTogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjYWxhcm1Db2RlXCJcbiAgICApIGFzIFBhcGVySW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGNvZGUgPVxuICAgICAgdGhpcy5fY29kZSB8fFxuICAgICAgKGlucHV0ICYmIGlucHV0LnZhbHVlICYmIGlucHV0LnZhbHVlLmxlbmd0aCA+IDAgPyBpbnB1dC52YWx1ZSA6IFwiXCIpO1xuICAgIGNhbGxBbGFybUFjdGlvbihcbiAgICAgIHRoaXMuaGFzcyEsXG4gICAgICB0aGlzLl9jb25maWchLmVudGl0eSxcbiAgICAgIChlLmN1cnJlbnRUYXJnZXQhIGFzIGFueSkuYWN0aW9uLFxuICAgICAgY29kZVxuICAgICk7XG4gICAgdGhpcy5fY29kZSA9IFwiXCI7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDE2cHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgLS1hbGFybS1jb2xvci1kaXNhcm1lZDogdmFyKC0tbGFiZWwtYmFkZ2UtZ3JlZW4pO1xuICAgICAgICAtLWFsYXJtLWNvbG9yLXBlbmRpbmc6IHZhcigtLWxhYmVsLWJhZGdlLXllbGxvdyk7XG4gICAgICAgIC0tYWxhcm0tY29sb3ItdHJpZ2dlcmVkOiB2YXIoLS1sYWJlbC1iYWRnZS1yZWQpO1xuICAgICAgICAtLWFsYXJtLWNvbG9yLWFybWVkOiB2YXIoLS1sYWJlbC1iYWRnZS1yZWQpO1xuICAgICAgICAtLWFsYXJtLWNvbG9yLWF1dG9hcm06IHJnYmEoMCwgMTUzLCAyNTUsIDAuMSk7XG4gICAgICAgIC0tYWxhcm0tc3RhdGUtY29sb3I6IHZhcigtLWFsYXJtLWNvbG9yLWFybWVkKTtcbiAgICAgICAgLS1iYXNlLXVuaXQ6IDE1cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogY2FsYyh2YXIoLS1iYXNlLXVuaXQpKTtcbiAgICAgIH1cblxuICAgICAgaGEtbGFiZWwtYmFkZ2Uge1xuICAgICAgICAtLWhhLWxhYmVsLWJhZGdlLWNvbG9yOiB2YXIoLS1hbGFybS1zdGF0ZS1jb2xvcik7XG4gICAgICAgIC0tbGFiZWwtYmFkZ2UtdGV4dC1jb2xvcjogdmFyKC0tYWxhcm0tc3RhdGUtY29sb3IpO1xuICAgICAgICAtLWxhYmVsLWJhZGdlLWJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhcGVyLWNhcmQtYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1hbGFybS1zdGF0ZS1jb2xvcik7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcmlnaHQ6IDEycHg7XG4gICAgICAgIHRvcDogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmRpc2FybWVkIHtcbiAgICAgICAgLS1hbGFybS1zdGF0ZS1jb2xvcjogdmFyKC0tYWxhcm0tY29sb3ItZGlzYXJtZWQpO1xuICAgICAgfVxuXG4gICAgICAudHJpZ2dlcmVkIHtcbiAgICAgICAgLS1hbGFybS1zdGF0ZS1jb2xvcjogdmFyKC0tYWxhcm0tY29sb3ItdHJpZ2dlcmVkKTtcbiAgICAgICAgYW5pbWF0aW9uOiBwdWxzZSAxcyBpbmZpbml0ZTtcbiAgICAgIH1cblxuICAgICAgLmFybWluZyB7XG4gICAgICAgIC0tYWxhcm0tc3RhdGUtY29sb3I6IHZhcigtLWFsYXJtLWNvbG9yLXBlbmRpbmcpO1xuICAgICAgICBhbmltYXRpb246IHB1bHNlIDFzIGluZmluaXRlO1xuICAgICAgfVxuXG4gICAgICAucGVuZGluZyB7XG4gICAgICAgIC0tYWxhcm0tc3RhdGUtY29sb3I6IHZhcigtLWFsYXJtLWNvbG9yLXBlbmRpbmcpO1xuICAgICAgICBhbmltYXRpb246IHB1bHNlIDFzIGluZmluaXRlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHB1bHNlIHtcbiAgICAgICAgMCUge1xuICAgICAgICAgIC0taGEtbGFiZWwtYmFkZ2UtY29sb3I6IHZhcigtLWFsYXJtLXN0YXRlLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAxMDAlIHtcbiAgICAgICAgICAtLWhhLWxhYmVsLWJhZGdlLWNvbG9yOiByZ2JhKDI1NSwgMTUzLCAwLCAwLjMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhcGVyLWlucHV0IHtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG8gOHB4O1xuICAgICAgICBtYXgtd2lkdGg6IDE1MHB4O1xuICAgICAgICBmb250LXNpemU6IGNhbGModmFyKC0tYmFzZS11bml0KSk7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnN0YXRlIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMC45KTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBib3R0b206IDE2cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1hbGFybS1zdGF0ZS1jb2xvcik7XG4gICAgICAgIGFuaW1hdGlvbjogbm9uZTtcbiAgICAgIH1cblxuICAgICAgI2tleXBhZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgfVxuXG4gICAgICAja2V5cGFkIG13Yy1idXR0b24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA1JTtcbiAgICAgICAgd2lkdGg6IDMwJTtcbiAgICAgICAgcGFkZGluZzogY2FsYyh2YXIoLS1iYXNlLXVuaXQpKTtcbiAgICAgICAgZm9udC1zaXplOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAxLjEpO1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgfVxuXG4gICAgICAuYWN0aW9ucyB7XG4gICAgICAgIG1hcmdpbjogMCA4cHg7XG4gICAgICAgIHBhZGRpbmctdG9wOiAyMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBmb250LXNpemU6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDEpO1xuICAgICAgfVxuXG4gICAgICAuYWN0aW9ucyBtd2MtYnV0dG9uIHtcbiAgICAgICAgbWluLXdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA5KTtcbiAgICAgICAgbWFyZ2luOiAwIDRweCA0cHg7XG4gICAgICB9XG5cbiAgICAgIG13Yy1idXR0b24jZGlzYXJtIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWdvb2dsZS1yZWQtNTAwKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktYWxhcm0tcGFuZWwtY2FyZFwiOiBIdWlBbGFybVBhbmVsQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQ2FyZEVsZW1lbnQgfSBmcm9tIFwiLi4vY29tbW9uL2NyZWF0ZS1jYXJkLWVsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVDYXJkU2l6ZSB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS1jYXJkLXNpemVcIjtcbmltcG9ydCB7XG4gIGNoZWNrQ29uZGl0aW9uc01ldCxcbiAgdmFsaWRhdGVDb25kaXRpb25hbENvbmZpZyxcbn0gZnJvbSBcIi4uLy4uL2xvdmVsYWNlL2NvbW1vbi92YWxpZGF0ZS1jb25kaXRpb25cIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgQ29uZGl0aW9uYWxDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuY2xhc3MgSHVpQ29uZGl0aW9uYWxDYXJkIGV4dGVuZHMgSFRNTEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwcml2YXRlIF9oYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHJpdmF0ZSBfY29uZmlnPzogQ29uZGl0aW9uYWxDYXJkQ29uZmlnO1xuICBwcml2YXRlIF9jYXJkPzogTG92ZWxhY2VDYXJkO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnKSB7XG4gICAgaWYgKFxuICAgICAgIWNvbmZpZy5jYXJkIHx8XG4gICAgICAhY29uZmlnLmNvbmRpdGlvbnMgfHxcbiAgICAgICFBcnJheS5pc0FycmF5KGNvbmZpZy5jb25kaXRpb25zKSB8fFxuICAgICAgIXZhbGlkYXRlQ29uZGl0aW9uYWxDb25maWcoY29uZmlnLmNvbmRpdGlvbnMpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBpbiBjYXJkIGNvbmZpZ3VyYXRpb24uXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jYXJkICYmIHRoaXMuX2NhcmQucGFyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLl9jYXJkKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fY2FyZCA9IGNyZWF0ZUNhcmRFbGVtZW50KGNvbmZpZy5jYXJkKTtcblxuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBzZXQgaGFzcyhoYXNzOiBIb21lQXNzaXN0YW50KSB7XG4gICAgdGhpcy5faGFzcyA9IGhhc3M7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCkge1xuICAgIHJldHVybiBjb21wdXRlQ2FyZFNpemUodGhpcy5fY2FyZCEpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9jYXJkIHx8ICF0aGlzLl9oYXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdmlzaWJsZSA9XG4gICAgICB0aGlzLl9jb25maWcgJiYgY2hlY2tDb25kaXRpb25zTWV0KHRoaXMuX2NvbmZpZy5jb25kaXRpb25zLCB0aGlzLl9oYXNzKTtcblxuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICB0aGlzLl9jYXJkLmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgICAgaWYgKCF0aGlzLl9jYXJkLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl9jYXJkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2NhcmQucGFyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLl9jYXJkKTtcbiAgICB9XG4gICAgLy8gVGhpcyB3aWxsIGhpZGUgdGhlIGNvbXBsZXRlIGNhcmQgc28gaXQgd29uJ3QgZ2V0IHN0eWxlZCBieSBwYXJlbnRcbiAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCB2aXNpYmxlID8gXCJcIiA6IFwibm9uZVwiKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWNvbmRpdGlvbmFsLWNhcmRcIjogSHVpQ29uZGl0aW9uYWxDYXJkO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1jb25kaXRpb25hbC1jYXJkXCIsIEh1aUNvbmRpdGlvbmFsQ2FyZCk7XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZW50aXRpZXMtdG9nZ2xlXCI7XG5cbmltcG9ydCB7IGZpcmVFdmVudCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2ZpcmVfZXZlbnRcIjtcbmltcG9ydCB7IERPTUFJTlNfSElERV9NT1JFX0lORk8gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3cgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBwcm9jZXNzQ29uZmlnRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBjcmVhdGVSb3dFbGVtZW50IH0gZnJvbSBcIi4uL2NvbW1vbi9jcmVhdGUtcm93LWVsZW1lbnRcIjtcbmltcG9ydCB7IEVudGl0aWVzQ2FyZENvbmZpZywgRW50aXRpZXNDYXJkRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZW50aXRpZXMtY2FyZFwiKVxuY2xhc3MgSHVpRW50aXRpZXNDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1lbnRpdGllcy1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktZW50aXRpZXMtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZW50aXRpZXMtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4geyBlbnRpdGllczogW10gfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHByb3RlY3RlZCBfY29uZmlnPzogRW50aXRpZXNDYXJkQ29uZmlnO1xuXG4gIHByb3RlY3RlZCBfaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgcHJvdGVjdGVkIF9jb25maWdFbnRpdGllcz86IEVudGl0aWVzQ2FyZEVudGl0eUNvbmZpZ1tdO1xuXG4gIHNldCBoYXNzKGhhc3M6IEhvbWVBc3Npc3RhbnQpIHtcbiAgICB0aGlzLl9oYXNzID0gaGFzcztcbiAgICB0aGlzLnNoYWRvd1Jvb3QhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIjc3RhdGVzID4gZGl2ID4gKlwiKS5mb3JFYWNoKFxuICAgICAgKGVsZW1lbnQ6IHVua25vd24pID0+IHtcbiAgICAgICAgKGVsZW1lbnQgYXMgRW50aXR5Um93KS5oYXNzID0gaGFzcztcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IGVudGl0aWVzVG9nZ2xlID0gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCJodWktZW50aXRpZXMtdG9nZ2xlXCJcbiAgICApO1xuICAgIGlmIChlbnRpdGllc1RvZ2dsZSkge1xuICAgICAgKGVudGl0aWVzVG9nZ2xlIGFzIGFueSkuaGFzcyA9IGhhc3M7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICAvLyArMSBmb3IgdGhlIGhlYWRlclxuICAgIHJldHVybiAodGhpcy5fY29uZmlnLnRpdGxlID8gMSA6IDApICsgdGhpcy5fY29uZmlnLmVudGl0aWVzLmxlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdGllc0NhcmRDb25maWcpOiB2b2lkIHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpO1xuXG4gICAgdGhpcy5fY29uZmlnID0geyB0aGVtZTogXCJkZWZhdWx0XCIsIC4uLmNvbmZpZyB9O1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gZW50aXRpZXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAodGhpcy5faGFzcyAmJiB0aGlzLl9jb25maWcpIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KHRoaXMsIHRoaXMuX2hhc3MudGhlbWVzLCB0aGlzLl9jb25maWcudGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5faGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG4gICAgY29uc3QgeyBzaG93X2hlYWRlcl90b2dnbGUsIHRpdGxlIH0gPSB0aGlzLl9jb25maWc7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICAkeyF0aXRsZSAmJiAhc2hvd19oZWFkZXJfdG9nZ2xlXG4gICAgICAgICAgPyBodG1sYGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuYW1lXCI+JHt0aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAke3Nob3dfaGVhZGVyX3RvZ2dsZSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgID8gaHRtbGBgXG4gICAgICAgICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgPGh1aS1lbnRpdGllcy10b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLl9oYXNzfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAuZW50aXRpZXM9XCIke3RoaXMuX2NvbmZpZ0VudGl0aWVzIS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChjb25mKSA9PiBjb25mLmVudGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cIlxuICAgICAgICAgICAgICAgICAgICAgID48L2h1aS1lbnRpdGllcy10b2dnbGU+XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYH1cbiAgICAgICAgPGRpdiBpZD1cInN0YXRlc1wiIGNsYXNzPVwiY2FyZC1jb250ZW50XCI+XG4gICAgICAgICAgJHt0aGlzLl9jb25maWdFbnRpdGllcyEubWFwKChlbnRpdHlDb25mKSA9PlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJFbnRpdHkoZW50aXR5Q29uZilcbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmNhcmQtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1oZWFkZXIgLm5hbWUge1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIH1cblxuICAgICAgLmNhcmQtaGVhZGVyIGh1aS1lbnRpdGllcy10b2dnbGUge1xuICAgICAgICBtYXJnaW46IC00cHggMDtcbiAgICAgIH1cblxuICAgICAgI3N0YXRlcyA+ICoge1xuICAgICAgICBtYXJnaW46IDhweCAwO1xuICAgICAgfVxuXG4gICAgICAjc3RhdGVzID4gZGl2ID4gKiB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5zdGF0ZS1jYXJkLWRpYWxvZyB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnRpdHkoZW50aXR5Q29uZjogRW50aXRpZXNDYXJkRW50aXR5Q29uZmlnKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVSb3dFbGVtZW50KGVudGl0eUNvbmYpO1xuICAgIGlmICh0aGlzLl9oYXNzKSB7XG4gICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBlbnRpdHlDb25mLmVudGl0eSAmJlxuICAgICAgIURPTUFJTlNfSElERV9NT1JFX0lORk8uaW5jbHVkZXMoY29tcHV0ZURvbWFpbihlbnRpdHlDb25mLmVudGl0eSkpXG4gICAgKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzdGF0ZS1jYXJkLWRpYWxvZ1wiKTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUNsaWNrKGVudGl0eUNvbmYpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXY+JHtlbGVtZW50fTwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVDbGljayhlbnRpdHlDb25mOiBFbnRpdGllc0NhcmRFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBjb25zdCBlbnRpdHlJZCA9IGVudGl0eUNvbmYuZW50aXR5O1xuICAgIGZpcmVFdmVudCh0aGlzLCBcImhhc3MtbW9yZS1pbmZvXCIsIHsgZW50aXR5SWQgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1lbnRpdGllcy1jYXJkXCI6IEh1aUVudGl0aWVzQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgSGFzc0VudGl0eSB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IHN0eWxlTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvc3R5bGUtbWFwXCI7XG5pbXBvcnQgXCJAbWF0ZXJpYWwvbXdjLXJpcHBsZVwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgaXNWYWxpZEVudGl0eUlkIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvdmFsaWRfZW50aXR5X2lkXCI7XG5pbXBvcnQgeyBzdGF0ZUljb24gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9zdGF0ZV9pY29uXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IGFwcGx5VGhlbWVzT25FbGVtZW50IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2FwcGx5X3RoZW1lc19vbl9lbGVtZW50XCI7XG5pbXBvcnQgeyBjb21wdXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9kb21haW5cIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCwgTGlnaHRFbnRpdHkgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IERPTUFJTlNfVE9HR0xFIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgRW50aXR5QnV0dG9uQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWVudGl0eS1idXR0b24tY2FyZFwiKVxuY2xhc3MgSHVpRW50aXR5QnV0dG9uQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktZW50aXR5LWJ1dHRvbi1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktZW50aXR5LWJ1dHRvbi1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1lbnRpdHktYnV0dG9uLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhcF9hY3Rpb246IHsgYWN0aW9uOiBcInRvZ2dsZVwiIH0sXG4gICAgICBob2xkX2FjdGlvbjogeyBhY3Rpb246IFwibW9yZS1pbmZvXCIgfSxcbiAgICAgIHNob3dfaWNvbjogdHJ1ZSxcbiAgICAgIHNob3dfbmFtZTogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUJ1dHRvbkNhcmRDb25maWc7XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDI7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5QnV0dG9uQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghaXNWYWxpZEVudGl0eUlkKGNvbmZpZy5lbnRpdHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEVudGl0eVwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSB7XG4gICAgICB0aGVtZTogXCJkZWZhdWx0XCIsXG4gICAgICBob2xkX2FjdGlvbjogeyBhY3Rpb246IFwibW9yZS1pbmZvXCIgfSxcbiAgICAgIHNob3dfaWNvbjogdHJ1ZSxcbiAgICAgIHNob3dfbmFtZTogdHJ1ZSxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9O1xuXG4gICAgaWYgKERPTUFJTlNfVE9HR0xFLmhhcyhjb21wdXRlRG9tYWluKGNvbmZpZy5lbnRpdHkpKSkge1xuICAgICAgdGhpcy5fY29uZmlnID0ge1xuICAgICAgICB0YXBfYWN0aW9uOiB7XG4gICAgICAgICAgYWN0aW9uOiBcInRvZ2dsZVwiLFxuICAgICAgICB9LFxuICAgICAgICAuLi50aGlzLl9jb25maWcsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jb25maWcgPSB7XG4gICAgICAgIHRhcF9hY3Rpb246IHtcbiAgICAgICAgICBhY3Rpb246IFwibW9yZS1pbmZvXCIsXG4gICAgICAgIH0sXG4gICAgICAgIC4uLnRoaXMuX2NvbmZpZyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcbiAgICBpZiAob2xkSGFzcykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgb2xkSGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldICE9PVxuICAgICAgICB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkXG4gICAgICAgIEBoYS1jbGljaz1cIiR7dGhpcy5faGFuZGxlVGFwfVwiXG4gICAgICAgIEBoYS1ob2xkPVwiJHt0aGlzLl9oYW5kbGVIb2xkfVwiXG4gICAgICAgIC5sb25nUHJlc3M9XCIke2xvbmdQcmVzcygpfVwiXG4gICAgICA+XG4gICAgICAgICR7dGhpcy5fY29uZmlnLnNob3dfaWNvblxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWljb25cbiAgICAgICAgICAgICAgICBkYXRhLWRvbWFpbj1cIiR7Y29tcHV0ZVN0YXRlRG9tYWluKHN0YXRlT2JqKX1cIlxuICAgICAgICAgICAgICAgIGRhdGEtc3RhdGU9XCIke3N0YXRlT2JqLnN0YXRlfVwiXG4gICAgICAgICAgICAgICAgLmljb249XCIke3RoaXMuX2NvbmZpZy5pY29uIHx8IHN0YXRlSWNvbihzdGF0ZU9iail9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIiR7c3R5bGVNYXAoe1xuICAgICAgICAgICAgICAgICAgZmlsdGVyOiB0aGlzLl9jb21wdXRlQnJpZ2h0bmVzcyhzdGF0ZU9iaiksXG4gICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5fY29tcHV0ZUNvbG9yKHN0YXRlT2JqKSxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5fY29uZmlnLmljb25faGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5fY29uZmlnLmljb25faGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIDogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgfSl9XCJcbiAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICR7dGhpcy5fY29uZmlnLnNob3dfbmFtZVxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgPG13Yy1yaXBwbGU+PC9td2MtcmlwcGxlPlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG4gICAgaWYgKCFvbGRIYXNzIHx8IG9sZEhhc3MudGhlbWVzICE9PSB0aGlzLmhhc3MudGhlbWVzKSB7XG4gICAgICBhcHBseVRoZW1lc09uRWxlbWVudCh0aGlzLCB0aGlzLmhhc3MudGhlbWVzLCB0aGlzLl9jb25maWcudGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNCUgMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjJyZW07XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24ge1xuICAgICAgICB3aWR0aDogNDAlO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pdGVtLWljb24tY29sb3IsICM0NDczOWUpO1xuICAgICAgfVxuXG4gICAgICBoYS1pY29uW2RhdGEtZG9tYWluPVwibGlnaHRcIl1bZGF0YS1zdGF0ZT1cIm9uXCJdLFxuICAgICAgaGEtaWNvbltkYXRhLWRvbWFpbj1cInN3aXRjaFwiXVtkYXRhLXN0YXRlPVwib25cIl0sXG4gICAgICBoYS1pY29uW2RhdGEtZG9tYWluPVwiYmluYXJ5X3NlbnNvclwiXVtkYXRhLXN0YXRlPVwib25cIl0sXG4gICAgICBoYS1pY29uW2RhdGEtZG9tYWluPVwiZmFuXCJdW2RhdGEtc3RhdGU9XCJvblwiXSxcbiAgICAgIGhhLWljb25bZGF0YS1kb21haW49XCJzdW5cIl1bZGF0YS1zdGF0ZT1cImFib3ZlX2hvcml6b25cIl0ge1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWFjdGl2ZS1jb2xvciwgI2ZkZDgzNSk7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb25bZGF0YS1zdGF0ZT1cInVuYXZhaWxhYmxlXCJdIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXN0YXRlLWljb24tdW5hdmFpbGFibGUtY29sb3IpO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlQnJpZ2h0bmVzcyhzdGF0ZU9iajogSGFzc0VudGl0eSB8IExpZ2h0RW50aXR5KTogc3RyaW5nIHtcbiAgICBpZiAoIXN0YXRlT2JqLmF0dHJpYnV0ZXMuYnJpZ2h0bmVzcykge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGNvbnN0IGJyaWdodG5lc3MgPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmJyaWdodG5lc3M7XG4gICAgcmV0dXJuIGBicmlnaHRuZXNzKCR7KGJyaWdodG5lc3MgKyAyNDUpIC8gNX0lKWA7XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlQ29sb3Ioc3RhdGVPYmo6IEhhc3NFbnRpdHkgfCBMaWdodEVudGl0eSk6IHN0cmluZyB7XG4gICAgaWYgKCFzdGF0ZU9iai5hdHRyaWJ1dGVzLmhzX2NvbG9yKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgY29uc3QgW2h1ZSwgc2F0XSA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuaHNfY29sb3I7XG4gICAgaWYgKHNhdCA8PSAxMCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIHJldHVybiBgaHNsKCR7aHVlfSwgMTAwJSwgJHsxMDAgLSBzYXQgLyAyfSUpYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVRhcCgpIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKCkge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIHRydWUpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktZW50aXR5LWJ1dHRvbi1jYXJkXCI6IEh1aUVudGl0eUJ1dHRvbkNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUNhcmRFbGVtZW50IH0gZnJvbSBcIi4uL2NvbW1vbi9jcmVhdGUtY2FyZC1lbGVtZW50XCI7XG5pbXBvcnQgeyBwcm9jZXNzQ29uZmlnRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZENvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2xvdmVsYWNlXCI7XG5pbXBvcnQgeyBFbnRpdHlGaWx0ZXJFbnRpdHlDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eUZpbHRlckNhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgZXZhbHVhdGVGaWx0ZXIgfSBmcm9tIFwiLi4vY29tbW9uL2V2YWx1YXRlLWZpbHRlclwiO1xuXG5jbGFzcyBFbnRpdHlGaWx0ZXJDYXJkIGV4dGVuZHMgSFRNTEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgaXNQYW5lbD86IGJvb2xlYW47XG4gIHByaXZhdGUgX2VsZW1lbnQ/OiBMb3ZlbGFjZUNhcmQ7XG4gIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUZpbHRlckNhcmRDb25maWc7XG4gIHByaXZhdGUgX2NvbmZpZ0VudGl0aWVzPzogRW50aXR5RmlsdGVyRW50aXR5Q29uZmlnW107XG4gIHByaXZhdGUgX2Jhc2VDYXJkQ29uZmlnPzogTG92ZWxhY2VDYXJkQ29uZmlnO1xuICBwcml2YXRlIF9oYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHJpdmF0ZSBfb2xkRW50aXRpZXM/OiBFbnRpdHlGaWx0ZXJFbnRpdHlDb25maWdbXTtcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudCA/IHRoaXMuX2VsZW1lbnQuZ2V0Q2FyZFNpemUoKSA6IDE7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5RmlsdGVyQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0aWVzIHx8ICFBcnJheS5pc0FycmF5KGNvbmZpZy5lbnRpdGllcykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImVudGl0aWVzIG11c3QgYmUgc3BlY2lmaWVkLlwiKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhKGNvbmZpZy5zdGF0ZV9maWx0ZXIgJiYgQXJyYXkuaXNBcnJheShjb25maWcuc3RhdGVfZmlsdGVyKSkgJiZcbiAgICAgICFjb25maWcuZW50aXRpZXMuZXZlcnkoXG4gICAgICAgIChlbnRpdHkpID0+XG4gICAgICAgICAgdHlwZW9mIGVudGl0eSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgIGVudGl0eS5zdGF0ZV9maWx0ZXIgJiZcbiAgICAgICAgICBBcnJheS5pc0FycmF5KGVudGl0eS5zdGF0ZV9maWx0ZXIpXG4gICAgICApXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3QgZmlsdGVyIGNvbmZpZy5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2Jhc2VDYXJkQ29uZmlnID0ge1xuICAgICAgdHlwZTogXCJlbnRpdGllc1wiLFxuICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgLi4udGhpcy5fY29uZmlnLmNhcmQsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmxhc3RDaGlsZCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLmxhc3RDaGlsZCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNldCBoYXNzKGhhc3M6IEhvbWVBc3Npc3RhbnQpIHtcbiAgICBpZiAoIWhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5oYXZlRW50aXRpZXNDaGFuZ2VkKGhhc3MpKSB7XG4gICAgICB0aGlzLl9oYXNzID0gaGFzcztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9oYXNzID0gaGFzcztcblxuICAgIGlmICghdGhpcy5fY29uZmlnRW50aXRpZXMpIHtcbiAgICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gcHJvY2Vzc0NvbmZpZ0VudGl0aWVzKHRoaXMuX2NvbmZpZy5lbnRpdGllcyk7XG4gICAgfVxuXG4gICAgY29uc3QgZW50aXRpZXNMaXN0ID0gdGhpcy5fY29uZmlnRW50aXRpZXMuZmlsdGVyKChlbnRpdHlDb25mKSA9PiB7XG4gICAgICBjb25zdCBzdGF0ZU9iaiA9IGhhc3Muc3RhdGVzW2VudGl0eUNvbmYuZW50aXR5XTtcblxuICAgICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnRpdHlDb25mLnN0YXRlX2ZpbHRlcikge1xuICAgICAgICBmb3IgKGNvbnN0IGZpbHRlciBvZiBlbnRpdHlDb25mLnN0YXRlX2ZpbHRlcikge1xuICAgICAgICAgIGlmIChldmFsdWF0ZUZpbHRlcihzdGF0ZU9iaiwgZmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGZpbHRlciBvZiB0aGlzLl9jb25maWchLnN0YXRlX2ZpbHRlcikge1xuICAgICAgICAgIGlmIChldmFsdWF0ZUZpbHRlcihzdGF0ZU9iaiwgZmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGlmIChlbnRpdGllc0xpc3QubGVuZ3RoID09PSAwICYmIHRoaXMuX2NvbmZpZy5zaG93X2VtcHR5ID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50KCk7XG5cbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZWxlbWVudC50YWdOYW1lICE9PSBcIkhVSS1FUlJPUi1DQVJEXCIpIHtcbiAgICAgIGNvbnN0IGlzU2FtZSA9XG4gICAgICAgIHRoaXMuX29sZEVudGl0aWVzICYmXG4gICAgICAgIGVudGl0aWVzTGlzdC5sZW5ndGggPT09IHRoaXMuX29sZEVudGl0aWVzLmxlbmd0aCAmJlxuICAgICAgICBlbnRpdGllc0xpc3QuZXZlcnkoKGVudGl0eSwgaWR4KSA9PiBlbnRpdHkgPT09IHRoaXMuX29sZEVudGl0aWVzIVtpZHhdKTtcblxuICAgICAgaWYgKCFpc1NhbWUpIHtcbiAgICAgICAgdGhpcy5fb2xkRW50aXRpZXMgPSBlbnRpdGllc0xpc3Q7XG4gICAgICAgIGVsZW1lbnQuc2V0Q29uZmlnKHsgLi4udGhpcy5fYmFzZUNhcmRDb25maWchLCBlbnRpdGllczogZW50aXRpZXNMaXN0IH0pO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50LmlzUGFuZWwgPSB0aGlzLmlzUGFuZWw7XG4gICAgICBlbGVtZW50Lmhhc3MgPSBoYXNzO1xuICAgIH1cblxuICAgIC8vIEF0dGFjaCBlbGVtZW50IGlmIGl0IGhhcyBuZXZlciBiZWVuIGF0dGFjaGVkLlxuICAgIGlmICghdGhpcy5sYXN0Q2hpbGQpIHtcbiAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9XG5cbiAgcHJpdmF0ZSBoYXZlRW50aXRpZXNDaGFuZ2VkKGhhc3M6IEhvbWVBc3Npc3RhbnQpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuX2hhc3MpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fY29uZmlnRW50aXRpZXMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgY29uZmlnIG9mIHRoaXMuX2NvbmZpZ0VudGl0aWVzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2hhc3Muc3RhdGVzW2NvbmZpZy5lbnRpdHldICE9PSBoYXNzLnN0YXRlc1tjb25maWcuZW50aXR5XSB8fFxuICAgICAgICB0aGlzLl9oYXNzLmxvY2FsaXplICE9PSBoYXNzLmxvY2FsaXplXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2FyZEVsZW1lbnQoKTogTG92ZWxhY2VDYXJkIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuX2VsZW1lbnQgJiYgdGhpcy5fY29uZmlnKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZEVsZW1lbnQodGhpcy5fYmFzZUNhcmRDb25maWchKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktZW50aXR5LWZpbHRlci1jYXJkXCIsIEVudGl0eUZpbHRlckNhcmQpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCB7IExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkQ29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVycm9yQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFcnJvckNhcmRFbGVtZW50ID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZXJyb3ItY2FyZFwiKTtcbiAgZWwuc2V0Q29uZmlnKGNvbmZpZyk7XG4gIHJldHVybiBlbDtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFcnJvckNhcmRDb25maWcgPSAoZXJyb3IsIG9yaWdDb25maWcpID0+ICh7XG4gIHR5cGU6IFwiZXJyb3JcIixcbiAgZXJyb3IsXG4gIG9yaWdDb25maWcsXG59KTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZXJyb3ItY2FyZFwiKVxuZXhwb3J0IGNsYXNzIEh1aUVycm9yQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRXJyb3JDYXJkQ29uZmlnO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiA0O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVycm9yQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5fY29uZmlnLmVycm9yfVxuICAgICAgPHByZT4ke3RoaXMuX3RvU3RyKHRoaXMuX2NvbmZpZy5vcmlnQ29uZmlnKX08L3ByZT5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VmNTM1MDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIHVzZXItc2VsZWN0OiB0ZXh0O1xuICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX3RvU3RyKGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29uZmlnLCBudWxsLCAyKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWVycm9yLWNhcmRcIjogSHVpRXJyb3JDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgaXNWYWxpZEVudGl0eUlkIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvdmFsaWRfZW50aXR5X2lkXCI7XG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IEdhdWdlQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBzZXZlcml0eU1hcCA9IHtcbiAgcmVkOiBcInZhcigtLWxhYmVsLWJhZGdlLXJlZClcIixcbiAgZ3JlZW46IFwidmFyKC0tbGFiZWwtYmFkZ2UtZ3JlZW4pXCIsXG4gIHllbGxvdzogXCJ2YXIoLS1sYWJlbC1iYWRnZS15ZWxsb3cpXCIsXG4gIG5vcm1hbDogXCJ2YXIoLS1sYWJlbC1iYWRnZS1ibHVlKVwiLFxufTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZ2F1Z2UtY2FyZFwiKVxuY2xhc3MgSHVpR2F1Z2VDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1nYXVnZS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktZ2F1Z2UtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZ2F1Z2UtY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfYmFzZVVuaXQgPSBcIjUwcHhcIjtcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogR2F1Z2VDYXJkQ29uZmlnO1xuXG4gIHByaXZhdGUgX3VwZGF0ZWQ/OiBib29sZWFuO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAyO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEdhdWdlQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNhcmQgY29uZmlndXJhdGlvblwiKTtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkRW50aXR5SWQoY29uZmlnLmVudGl0eSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgRW50aXR5XCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSB7IG1pbjogMCwgbWF4OiAxMDAsIHRoZW1lOiBcImRlZmF1bHRcIiwgLi4uY29uZmlnIH07XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9zZXRCYXNlVW5pdCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlID0gTnVtYmVyKHN0YXRlT2JqLnN0YXRlKTtcblxuICAgIGlmIChpc05hTihzdGF0ZSkpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vbl9udW1lcmljXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVDbGlja31cIlxuICAgICAgICBzdHlsZT0ke3N0eWxlTWFwKHtcbiAgICAgICAgICBcIi0tYmFzZS11bml0XCI6IHRoaXMuX2Jhc2VVbml0LFxuICAgICAgICB9KX1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYXVnZS1hXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhdWdlLWJcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImdhdWdlLWNcIlxuICAgICAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogYHJvdGF0ZSgke3RoaXMuX3RyYW5zbGF0ZVR1cm4oc3RhdGUpfXR1cm4pYCxcbiAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IHRoaXMuX2NvbXB1dGVTZXZlcml0eShzdGF0ZSksXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhdWdlLWRhdGFcIj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJwZXJjZW50XCI+XG4gICAgICAgICAgICAgICR7c3RhdGVPYmouc3RhdGV9XG4gICAgICAgICAgICAgICR7dGhpcy5fY29uZmlnLnVuaXQgfHxcbiAgICAgICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLnVuaXRfb2ZfbWVhc3VyZW1lbnQgfHxcbiAgICAgICAgICAgICAgICBcIlwifVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwibmFtZVwiPlxuICAgICAgICAgICAgICAke3RoaXMuX2NvbmZpZy5uYW1lIHx8IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKCk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZWQgPSB0cnVlO1xuICAgIHRoaXMuX3NldEJhc2VVbml0KCk7XG4gICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiaW5pdFwiKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFvbGRIYXNzIHx8IG9sZEhhc3MudGhlbWVzICE9PSB0aGlzLmhhc3MudGhlbWVzKSB7XG4gICAgICBhcHBseVRoZW1lc09uRWxlbWVudCh0aGlzLCB0aGlzLmhhc3MudGhlbWVzLCB0aGlzLl9jb25maWcudGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3NldEJhc2VVbml0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCB8fCAhdGhpcy5fdXBkYXRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBiYXNlVW5pdCA9IHRoaXMuX2NvbXB1dGVCYXNlVW5pdCgpO1xuICAgIGlmIChiYXNlVW5pdCAhPT0gXCIwcHhcIikge1xuICAgICAgdGhpcy5fYmFzZVVuaXQgPSBiYXNlVW5pdDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlU2V2ZXJpdHkobnVtYmVyVmFsdWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3Qgc2VjdGlvbnMgPSB0aGlzLl9jb25maWchLnNldmVyaXR5O1xuXG4gICAgaWYgKCFzZWN0aW9ucykge1xuICAgICAgcmV0dXJuIHNldmVyaXR5TWFwLm5vcm1hbDtcbiAgICB9XG5cbiAgICBjb25zdCBzZWN0aW9uc0FycmF5ID0gT2JqZWN0LmtleXMoc2VjdGlvbnMpO1xuICAgIGNvbnN0IHNvcnRhYmxlID0gc2VjdGlvbnNBcnJheS5tYXAoKHNldmVyaXR5KSA9PiBbXG4gICAgICBzZXZlcml0eSxcbiAgICAgIHNlY3Rpb25zW3NldmVyaXR5XSxcbiAgICBdKTtcblxuICAgIGZvciAoY29uc3Qgc2V2ZXJpdHkgb2Ygc29ydGFibGUpIHtcbiAgICAgIGlmIChzZXZlcml0eU1hcFtzZXZlcml0eVswXV0gPT0gbnVsbCB8fCBpc05hTihzZXZlcml0eVsxXSkpIHtcbiAgICAgICAgcmV0dXJuIHNldmVyaXR5TWFwLm5vcm1hbDtcbiAgICAgIH1cbiAgICB9XG4gICAgc29ydGFibGUuc29ydCgoYSwgYikgPT4gYVsxXSAtIGJbMV0pO1xuXG4gICAgaWYgKG51bWJlclZhbHVlID49IHNvcnRhYmxlWzBdWzFdICYmIG51bWJlclZhbHVlIDwgc29ydGFibGVbMV1bMV0pIHtcbiAgICAgIHJldHVybiBzZXZlcml0eU1hcFtzb3J0YWJsZVswXVswXV07XG4gICAgfVxuICAgIGlmIChudW1iZXJWYWx1ZSA+PSBzb3J0YWJsZVsxXVsxXSAmJiBudW1iZXJWYWx1ZSA8IHNvcnRhYmxlWzJdWzFdKSB7XG4gICAgICByZXR1cm4gc2V2ZXJpdHlNYXBbc29ydGFibGVbMV1bMF1dO1xuICAgIH1cbiAgICBpZiAobnVtYmVyVmFsdWUgPj0gc29ydGFibGVbMl1bMV0pIHtcbiAgICAgIHJldHVybiBzZXZlcml0eU1hcFtzb3J0YWJsZVsyXVswXV07XG4gICAgfVxuICAgIHJldHVybiBzZXZlcml0eU1hcC5ub3JtYWw7XG4gIH1cblxuICBwcml2YXRlIF90cmFuc2xhdGVUdXJuKHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMuX2NvbmZpZyE7XG4gICAgY29uc3QgbWF4VHVyblZhbHVlID0gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiEpLCBtYXghKTtcbiAgICByZXR1cm4gKDUgKiAobWF4VHVyblZhbHVlIC0gbWluISkpIC8gKG1heCEgLSBtaW4hKSAvIDEwO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZUJhc2VVbml0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50V2lkdGggPCAyMDAgPyB0aGlzLmNsaWVudFdpZHRoIC8gNSArIFwicHhcIiA6IFwiNTBweFwiO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgZmlyZUV2ZW50KHRoaXMsIFwiaGFzcy1tb3JlLWluZm9cIiwgeyBlbnRpdHlJZDogdGhpcy5fY29uZmlnIS5lbnRpdHkgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAzKTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgd2lkdGg6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDQpO1xuICAgICAgICBoZWlnaHQ6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDIpO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMS41KTtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgfVxuICAgICAgLmdhdWdlLWEge1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICAgIHdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA0KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKTtcbiAgICAgICAgdG9wOiAwJTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMi41KSBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyLjUpXG4gICAgICAgICAgMHB4IDBweDtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1iIHtcbiAgICAgICAgei1pbmRleDogMztcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYXBlci1jYXJkLWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgICB3aWR0aDogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMi41KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAxLjI1KTtcbiAgICAgICAgdG9wOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAwLjc1KTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDAuNzUpO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDIuNSkgY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMi41KVxuICAgICAgICAgIDBweCAwcHg7XG4gICAgICB9XG4gICAgICAuZ2F1Z2UtYyB7XG4gICAgICAgIHotaW5kZXg6IDI7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGFiZWwtYmFkZ2UtYmx1ZSk7XG4gICAgICAgIHdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA0KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKTtcbiAgICAgICAgdG9wOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMHB4IDBweCBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKVxuICAgICAgICAgIGNhbGModmFyKC0tYmFzZS11bml0KSAqIDIpO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgdG9wO1xuICAgICAgfVxuICAgICAgLmluaXQgLmdhdWdlLWMge1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMS4zcyBlYXNlLWluLW91dDtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1kYXRhIHtcbiAgICAgICAgei1pbmRleDogNDtcbiAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAwLjMpO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA0KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyLjEpO1xuICAgICAgICB0b3A6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDEuMik7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICB9XG4gICAgICAuaW5pdCAuZ2F1Z2UtZGF0YSB7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAxcyBlYXNlLW91dDtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1kYXRhICNwZXJjZW50IHtcbiAgICAgICAgZm9udC1zaXplOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAwLjU1KTtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1kYXRhICNuYW1lIHtcbiAgICAgICAgcGFkZGluZy10b3A6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDAuMTUpO1xuICAgICAgICBmb250LXNpemU6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDAuMyk7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWdhdWdlLWNhcmRcIjogSHVpR2F1Z2VDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuXG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcbmltcG9ydCByZWxhdGl2ZVRpbWUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9yZWxhdGl2ZV90aW1lXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvZW50aXR5L3N0YXRlLWJhZGdlXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZy1lbGVtZW50XCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IEdsYW5jZUNhcmRDb25maWcsIEdsYW5jZUNvbmZpZ0VudGl0eSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWdsYW5jZS1jYXJkXCIpXG5leHBvcnQgY2xhc3MgSHVpR2xhbmNlQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktZ2xhbmNlLWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS1nbGFuY2UtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZ2xhbmNlLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXRpZXM6IFtdIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogR2xhbmNlQ2FyZENvbmZpZztcblxuICBwcml2YXRlIF9jb25maWdFbnRpdGllcz86IEdsYW5jZUNvbmZpZ0VudGl0eVtdO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAoXG4gICAgICAodGhpcy5fY29uZmlnIS50aXRsZSA/IDEgOiAwKSArXG4gICAgICBNYXRoLmNlaWwodGhpcy5fY29uZmlnRW50aXRpZXMhLmxlbmd0aCAvIDUpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBHbGFuY2VDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgdGhpcy5fY29uZmlnID0geyB0aGVtZTogXCJkZWZhdWx0XCIsIC4uLmNvbmZpZyB9O1xuICAgIGNvbnN0IGVudGl0aWVzID0gcHJvY2Vzc0NvbmZpZ0VudGl0aWVzPEdsYW5jZUNvbmZpZ0VudGl0eT4oY29uZmlnLmVudGl0aWVzKTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIChlbnRpdHkudGFwX2FjdGlvbiAmJlxuICAgICAgICAgIGVudGl0eS50YXBfYWN0aW9uLmFjdGlvbiA9PT0gXCJjYWxsLXNlcnZpY2VcIiAmJlxuICAgICAgICAgICFlbnRpdHkudGFwX2FjdGlvbi5zZXJ2aWNlKSB8fFxuICAgICAgICAoZW50aXR5LmhvbGRfYWN0aW9uICYmXG4gICAgICAgICAgZW50aXR5LmhvbGRfYWN0aW9uLmFjdGlvbiA9PT0gXCJjYWxsLXNlcnZpY2VcIiAmJlxuICAgICAgICAgICFlbnRpdHkuaG9sZF9hY3Rpb24uc2VydmljZSlcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJzZXJ2aWNlXCIgd2hlbiB0YXBfYWN0aW9uIG9yIGhvbGRfYWN0aW9uIGlzIGNhbGwtc2VydmljZSdcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjb2x1bW5zID0gY29uZmlnLmNvbHVtbnMgfHwgTWF0aC5taW4oY29uZmlnLmVudGl0aWVzLmxlbmd0aCwgNSk7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZ2xhbmNlLWNvbHVtbi13aWR0aFwiLCBgJHsxMDAgLyBjb2x1bW5zfSVgKTtcblxuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gZW50aXRpZXM7XG5cbiAgICBpZiAodGhpcy5oYXNzKSB7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9jb25maWdcIikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuICAgIGlmIChvbGRIYXNzICYmIHRoaXMuX2NvbmZpZ0VudGl0aWVzKSB7XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLl9jb25maWdFbnRpdGllcykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgb2xkSGFzcy5zdGF0ZXNbZW50aXR5LmVudGl0eV0gIT09IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eS5lbnRpdHldXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIGNvbnN0IHsgdGl0bGUgfSA9IHRoaXMuX2NvbmZpZztcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQgLmhlYWRlcj1cIiR7dGl0bGV9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCIke2NsYXNzTWFwKHsgZW50aXRpZXM6IHRydWUsIFwibm8taGVhZGVyXCI6ICF0aXRsZSB9KX1cIj5cbiAgICAgICAgICAke3RoaXMuX2NvbmZpZ0VudGl0aWVzIS5tYXAoKGVudGl0eUNvbmYpID0+XG4gICAgICAgICAgICB0aGlzLnJlbmRlckVudGl0eShlbnRpdHlDb25mKVxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wZXJ0aWVzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcbiAgICBpZiAoIW9sZEhhc3MgfHwgb2xkSGFzcy50aGVtZXMgIT09IHRoaXMuaGFzcy50aGVtZXMpIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KHRoaXMsIHRoaXMuaGFzcy50aGVtZXMsIHRoaXMuX2NvbmZpZy50aGVtZSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmVudGl0aWVzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgcGFkZGluZzogMCAxNnB4IDRweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuICAgICAgLmVudGl0aWVzLm5vLWhlYWRlciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgICAgfVxuICAgICAgLmVudGl0eSB7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIHBhZGRpbmc6IDAgNHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgIHdpZHRoOiB2YXIoLS1nbGFuY2UtY29sdW1uLXdpZHRoLCAyMCUpO1xuICAgICAgfVxuICAgICAgLmVudGl0eSBkaXYge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIH1cbiAgICAgIC5uYW1lIHtcbiAgICAgICAgbWluLWhlaWdodDogdmFyKC0tcGFwZXItZm9udC1ib2R5MV8tX2xpbmUtaGVpZ2h0LCAyMHB4KTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLWJhZGdlIHtcbiAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnRpdHkoZW50aXR5Q29uZik6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eUNvbmYuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmctZWxlbWVudFxuICAgICAgICAgIGxhYmVsPSR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgZW50aXR5Q29uZi5lbnRpdHlcbiAgICAgICAgICApfVxuICAgICAgICA+PC9odWktd2FybmluZy1lbGVtZW50PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJlbnRpdHlcIlxuICAgICAgICAuZW50aXR5Q29uZj1cIiR7ZW50aXR5Q29uZn1cIlxuICAgICAgICBAaGEtY2xpY2s9XCIke3RoaXMuX2hhbmRsZVRhcH1cIlxuICAgICAgICBAaGEtaG9sZD1cIiR7dGhpcy5faGFuZGxlSG9sZH1cIlxuICAgICAgICAubG9uZ1ByZXNzPVwiJHtsb25nUHJlc3MoKX1cIlxuICAgICAgPlxuICAgICAgICAke3RoaXMuX2NvbmZpZyEuc2hvd19uYW1lICE9PSBmYWxzZVxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5hbWVcIj5cbiAgICAgICAgICAgICAgICAke1wibmFtZVwiIGluIGVudGl0eUNvbmZcbiAgICAgICAgICAgICAgICAgID8gZW50aXR5Q29uZi5uYW1lXG4gICAgICAgICAgICAgICAgICA6IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICR7dGhpcy5fY29uZmlnIS5zaG93X2ljb24gIT09IGZhbHNlXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8c3RhdGUtYmFkZ2VcbiAgICAgICAgICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgICAgICAgICAuc3RhdGVPYmo9JHtzdGF0ZU9ian1cbiAgICAgICAgICAgICAgICAub3ZlcnJpZGVJY29uPSR7ZW50aXR5Q29uZi5pY29ufVxuICAgICAgICAgICAgICAgIC5vdmVycmlkZUltYWdlPSR7ZW50aXR5Q29uZi5pbWFnZX1cbiAgICAgICAgICAgICAgPjwvc3RhdGUtYmFkZ2U+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBcIlwifVxuICAgICAgICAke3RoaXMuX2NvbmZpZyEuc2hvd19zdGF0ZSAhPT0gZmFsc2VcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgJHtlbnRpdHlDb25mLnNob3dfbGFzdF9jaGFuZ2VkXG4gICAgICAgICAgICAgICAgICA/IHJlbGF0aXZlVGltZShcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShzdGF0ZU9iai5sYXN0X2NoYW5nZWQpLFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcyEubG9jYWxpemVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgOiBjb21wdXRlU3RhdGVEaXNwbGF5KFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcyEubG9jYWxpemUsXG4gICAgICAgICAgICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sYW5ndWFnZVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVGFwKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29uZmlnID0gKGV2LmN1cnJlbnRUYXJnZXQgYXMgYW55KS5lbnRpdHlDb25mIGFzIEdsYW5jZUNvbmZpZ0VudGl0eTtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCBjb25maWcsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhvbGQoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWcgPSAoZXYuY3VycmVudFRhcmdldCBhcyBhbnkpLmVudGl0eUNvbmYgYXMgR2xhbmNlQ29uZmlnRW50aXR5O1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIGNvbmZpZywgdHJ1ZSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1nbGFuY2UtY2FyZFwiOiBIdWlHbGFuY2VDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSBcIkBwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnXCI7XG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gXCJAcG9seW1lci9wb2x5bWVyL3BvbHltZXItZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvc3RhdGUtaGlzdG9yeS1jaGFydHNcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2RhdGEvaGEtc3RhdGUtaGlzdG9yeS1kYXRhXCI7XG5cbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcblxuY2xhc3MgSHVpSGlzdG9yeUdyYXBoQ2FyZCBleHRlbmRzIFBvbHltZXJFbGVtZW50IHtcbiAgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKSB7XG4gICAgYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLWhpc3RvcnktZ3JhcGgtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLWhpc3RvcnktZ3JhcGgtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktaGlzdG9yeS1ncmFwaC1jYXJkLWVkaXRvclwiKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRTdHViQ29uZmlnKCkge1xuICAgIHJldHVybiB7IGVudGl0aWVzOiBbXSB9O1xuICB9XG5cbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgLmNvbnRlbnQge1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgW2hlYWRlcl0gLmNvbnRlbnQge1xuICAgICAgICAgIHBhZGRpbmctdG9wOiAwO1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuXG4gICAgICA8aGEtY2FyZCBoZWFkZXIkPVwiW1tfY29uZmlnLnRpdGxlXV1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgICAgICA8aGEtc3RhdGUtaGlzdG9yeS1kYXRhXG4gICAgICAgICAgICBoYXNzPVwiW1toYXNzXV1cIlxuICAgICAgICAgICAgZmlsdGVyLXR5cGU9XCJyZWNlbnQtZW50aXR5XCJcbiAgICAgICAgICAgIGVudGl0eS1pZD1cIltbX2VudGl0aWVzXV1cIlxuICAgICAgICAgICAgZGF0YT1cInt7X3N0YXRlSGlzdG9yeX19XCJcbiAgICAgICAgICAgIGlzLWxvYWRpbmc9XCJ7e19zdGF0ZUhpc3RvcnlMb2FkaW5nfX1cIlxuICAgICAgICAgICAgY2FjaGUtY29uZmlnPVwiW1tfY2FjaGVDb25maWddXVwiXG4gICAgICAgICAgPjwvaGEtc3RhdGUtaGlzdG9yeS1kYXRhPlxuICAgICAgICAgIDxzdGF0ZS1oaXN0b3J5LWNoYXJ0c1xuICAgICAgICAgICAgaGFzcz1cIltbaGFzc11dXCJcbiAgICAgICAgICAgIGhpc3RvcnktZGF0YT1cIltbX3N0YXRlSGlzdG9yeV1dXCJcbiAgICAgICAgICAgIGlzLWxvYWRpbmctZGF0YT1cIltbX3N0YXRlSGlzdG9yeUxvYWRpbmddXVwiXG4gICAgICAgICAgICBuYW1lcz1cIltbX25hbWVzXV1cIlxuICAgICAgICAgICAgdXAtdG8tbm93XG4gICAgICAgICAgICBuby1zaW5nbGVcbiAgICAgICAgICA+PC9zdGF0ZS1oaXN0b3J5LWNoYXJ0cz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzczogT2JqZWN0LFxuICAgICAgX2NvbmZpZzogT2JqZWN0LFxuICAgICAgX25hbWVzOiBPYmplY3QsXG4gICAgICBfZW50aXRpZXM6IEFycmF5LFxuXG4gICAgICBfc3RhdGVIaXN0b3J5OiBPYmplY3QsXG4gICAgICBfc3RhdGVIaXN0b3J5TG9hZGluZzogQm9vbGVhbixcbiAgICAgIF9jYWNoZUNvbmZpZzogT2JqZWN0LFxuICAgIH07XG4gIH1cblxuICBnZXRDYXJkU2l6ZSgpIHtcbiAgICByZXR1cm4gNDtcbiAgfVxuXG4gIHNldENvbmZpZyhjb25maWcpIHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpO1xuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuXG4gICAgY29uc3QgX2VudGl0aWVzID0gW107XG4gICAgY29uc3QgX25hbWVzID0ge307XG4gICAgZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICBfZW50aXRpZXMucHVzaChlbnRpdHkuZW50aXR5KTtcbiAgICAgIGlmIChlbnRpdHkubmFtZSkge1xuICAgICAgICBfbmFtZXNbZW50aXR5LmVudGl0eV0gPSBlbnRpdHkubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc2V0UHJvcGVydGllcyh7XG4gICAgICBfY2FjaGVDb25maWc6IHtcbiAgICAgICAgY2FjaGVLZXk6IF9lbnRpdGllcy5qb2luKCksXG4gICAgICAgIGhvdXJzVG9TaG93OiBjb25maWcuaG91cnNfdG9fc2hvdyB8fCAyNCxcbiAgICAgICAgcmVmcmVzaDogY29uZmlnLnJlZnJlc2hfaW50ZXJ2YWwgfHwgMCxcbiAgICAgIH0sXG4gICAgICBfZW50aXRpZXMsXG4gICAgICBfbmFtZXMsXG4gICAgfSk7XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwiaHVpLWhpc3RvcnktZ3JhcGgtY2FyZFwiLCBIdWlIaXN0b3J5R3JhcGhDYXJkKTtcbiIsImltcG9ydCB7IGh0bWwsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCB7IGNvbXB1dGVDYXJkU2l6ZSB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS1jYXJkLXNpemVcIjtcbmltcG9ydCB7IEh1aVN0YWNrQ2FyZCB9IGZyb20gXCIuL2h1aS1zdGFjay1jYXJkXCI7XG5cbmNsYXNzIEh1aUhvcml6b250YWxTdGFja0NhcmQgZXh0ZW5kcyBIdWlTdGFja0NhcmQge1xuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICBsZXQgdG90YWxTaXplID0gMDtcblxuICAgIGlmICh0aGlzLl9jYXJkcykge1xuICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuX2NhcmRzKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gY29tcHV0ZUNhcmRTaXplKGVsZW1lbnQpO1xuICAgICAgICB0b3RhbFNpemUgPSBlbGVtZW50U2l6ZSA+IHRvdGFsU2l6ZSA/IGVsZW1lbnRTaXplIDogdG90YWxTaXplO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b3RhbFNpemU7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyU3R5bGUoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPHN0eWxlPlxuICAgICAgICAjcm9vdCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgfVxuICAgICAgICAjcm9vdCA+ICoge1xuICAgICAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgICAgIG1hcmdpbjogMCA0cHg7XG4gICAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICB9XG4gICAgICAgICNyb290ID4gKjpmaXJzdC1jaGlsZCB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgI3Jvb3QgPiAqOmxhc3QtY2hpbGQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaG9yaXR6b250YWwtc3RhY2stY2FyZFwiOiBIdWlIb3Jpem9udGFsU3RhY2tDYXJkO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1ob3Jpem9udGFsLXN0YWNrLWNhcmRcIiwgSHVpSG9yaXpvbnRhbFN0YWNrQ2FyZCk7XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jYXJkXCI7XG5cbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuaW1wb3J0IHsgSWZyYW1lQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWlmcmFtZS1jYXJkXCIpXG5leHBvcnQgY2xhc3MgSHVpSWZyYW1lQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktaWZyYW1lLWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS1pZnJhbWUtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktaWZyYW1lLWNhcmQtZWRpdG9yXCIpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7IHVybDogXCJodHRwczovL3d3dy5ob21lLWFzc2lzdGFudC5pb1wiLCBhc3BlY3RfcmF0aW86IFwiNTAlXCIgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHByb3RlY3RlZCBfY29uZmlnPzogSWZyYW1lQ2FyZENvbmZpZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIDM7XG4gICAgfVxuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gdGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpb1xuICAgICAgPyBOdW1iZXIodGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpby5yZXBsYWNlKFwiJVwiLCBcIlwiKSlcbiAgICAgIDogNTA7XG4gICAgcmV0dXJuIDEgKyBhc3BlY3RSYXRpbyAvIDI1O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IElmcmFtZUNhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy51cmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVSTCByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3QgYXNwZWN0UmF0aW8gPSB0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvIHx8IFwiNTAlXCI7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIC5oZWFkZXI9XCIke3RoaXMuX2NvbmZpZy50aXRsZX1cIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGlkPVwicm9vdFwiXG4gICAgICAgICAgc3R5bGU9XCIke3N0eWxlTWFwKHtcbiAgICAgICAgICAgIFwicGFkZGluZy10b3BcIjogYXNwZWN0UmF0aW8sXG4gICAgICAgICAgfSl9XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxpZnJhbWUgc3JjPVwiJHt0aGlzLl9jb25maWcudXJsfVwiPjwvaWZyYW1lPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGEtY2FyZCB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgICNyb290IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgaWZyYW1lIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaWZyYW1lLWNhcmRcIjogSHVpSWZyYW1lQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRXJyb3JDYXJkQ29uZmlnIH0gZnJvbSBcIi4vaHVpLWVycm9yLWNhcmRcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMZWdhY3lXcmFwcGVyQ2FyZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IodGFnLCBkb21haW4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3RhZyA9IHRhZy50b1VwcGVyQ2FzZSgpO1xuICAgIHRoaXMuX2RvbWFpbiA9IGRvbWFpbjtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldENhcmRTaXplKCkge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgc2V0Q29uZmlnKGNvbmZpZykge1xuICAgIGlmICghY29uZmlnLmVudGl0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZW50aXR5IHNwZWNpZmllZFwiKTtcbiAgICB9XG5cbiAgICBpZiAoY29tcHV0ZURvbWFpbihjb25maWcuZW50aXR5KSAhPT0gdGhpcy5fZG9tYWluKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBTcGVjaWZpZWQgZW50aXR5IG5lZWRzIHRvIGJlIG9mIGRvbWFpbiAke3RoaXMuX2RvbWFpbn0uYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBzZXQgaGFzcyhoYXNzKSB7XG4gICAgY29uc3QgZW50aXR5SWQgPSB0aGlzLl9jb25maWcuZW50aXR5O1xuXG4gICAgaWYgKGVudGl0eUlkIGluIGhhc3Muc3RhdGVzKSB7XG4gICAgICB0aGlzLl9lbnN1cmVFbGVtZW50KHRoaXMuX3RhZyk7XG4gICAgICB0aGlzLmxhc3RDaGlsZC5oYXNzID0gaGFzcztcbiAgICAgIHRoaXMubGFzdENoaWxkLnN0YXRlT2JqID0gaGFzcy5zdGF0ZXNbZW50aXR5SWRdO1xuICAgICAgdGhpcy5sYXN0Q2hpbGQuY29uZmlnID0gdGhpcy5fY29uZmlnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbnN1cmVFbGVtZW50KFwiSFVJLUVSUk9SLUNBUkRcIik7XG4gICAgICB0aGlzLmxhc3RDaGlsZC5zZXRDb25maWcoXG4gICAgICAgIGNyZWF0ZUVycm9yQ2FyZENvbmZpZyhcbiAgICAgICAgICBgTm8gc3RhdGUgYXZhaWxhYmxlIGZvciAke2VudGl0eUlkfWAsXG4gICAgICAgICAgdGhpcy5fY29uZmlnXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgX2Vuc3VyZUVsZW1lbnQodGFnKSB7XG4gICAgaWYgKHRoaXMubGFzdENoaWxkICYmIHRoaXMubGFzdENoaWxkLnRhZ05hbWUgPT09IHRhZykgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMubGFzdENoaWxkKSB7XG4gICAgICB0aGlzLnJlbW92ZUNoaWxkKHRoaXMubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICB0aGlzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKSk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgcHJvcGVydHksXG4gIGN1c3RvbUVsZW1lbnQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaWNvbi1idXR0b24vcGFwZXItaWNvbi1idXR0b25cIjtcbmltcG9ydCBcIkB0aG9tYXNsb3Zlbi9yb3VuZC1zbGlkZXJcIjtcblxuaW1wb3J0IHsgc3RhdGVJY29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3RhdGVfaWNvblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IGFwcGx5VGhlbWVzT25FbGVtZW50IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2FwcGx5X3RoZW1lc19vbl9lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS11bmF2YWlsYWJsZVwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCwgTGlnaHRFbnRpdHkgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyB0b2dnbGVFbnRpdHkgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS90b2dnbGUtZW50aXR5XCI7XG5pbXBvcnQgeyBMaWdodENhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgc3VwcG9ydHNGZWF0dXJlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3VwcG9ydHMtZmVhdHVyZVwiO1xuaW1wb3J0IHsgU1VQUE9SVF9CUklHSFRORVNTIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbGlnaHRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktbGlnaHQtY2FyZFwiKVxuZXhwb3J0IGNsYXNzIEh1aUxpZ2h0Q2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktbGlnaHQtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLWxpZ2h0LWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLWxpZ2h0LWNhcmQtZWRpdG9yXCIpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7IGVudGl0eTogXCJcIiB9O1xuICB9XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IExpZ2h0Q2FyZENvbmZpZztcblxuICBwcml2YXRlIF9icmlnaHRuZXNzVGltb3V0PzogbnVtYmVyO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAyO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IExpZ2h0Q2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0eSB8fCBjb25maWcuZW50aXR5LnNwbGl0KFwiLlwiKVswXSAhPT0gXCJsaWdodFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTcGVjaWZ5IGFuIGVudGl0eSBmcm9tIHdpdGhpbiB0aGUgbGlnaHQgZG9tYWluLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSB7IHRoZW1lOiBcImRlZmF1bHRcIiwgLi4uY29uZmlnIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldIGFzIExpZ2h0RW50aXR5O1xuICAgIGNvbnN0IGJyaWdodG5lc3MgPVxuICAgICAgTWF0aC5yb3VuZCgoc3RhdGVPYmouYXR0cmlidXRlcy5icmlnaHRuZXNzIC8gMjU0KSAqIDEwMCkgfHwgMDtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5yZW5kZXJTdHlsZSgpfVxuICAgICAgPGhhLWNhcmQ+XG4gICAgICAgICR7c3RhdGVPYmouc3RhdGUgPT09IFwidW5hdmFpbGFibGVcIlxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGh1aS11bmF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIC50ZXh0PVwiJHt0aGlzLmhhc3MubG9jYWxpemUoXCJzdGF0ZS5kZWZhdWx0LnVuYXZhaWxhYmxlXCIpfVwiXG4gICAgICAgICAgICAgID48L2h1aS11bmF2YWlsYWJsZT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgIDxwYXBlci1pY29uLWJ1dHRvblxuICAgICAgICAgIGljb249XCJoYXNzOmRvdHMtdmVydGljYWxcIlxuICAgICAgICAgIGNsYXNzPVwibW9yZS1pbmZvXCJcbiAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2hhbmRsZU1vcmVJbmZvfVwiXG4gICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuXG4gICAgICAgIDxkaXYgaWQ9XCJsaWdodFwiPlxuICAgICAgICAgICR7c3VwcG9ydHNGZWF0dXJlKHN0YXRlT2JqLCBTVVBQT1JUX0JSSUdIVE5FU1MpXG4gICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgPHJvdW5kLXNsaWRlclxuICAgICAgICAgICAgICAgICAgbWluPVwiMVwiXG4gICAgICAgICAgICAgICAgICAudmFsdWU9JHticmlnaHRuZXNzfVxuICAgICAgICAgICAgICAgICAgQHZhbHVlLWNoYW5naW5nPSR7dGhpcy5fZHJhZ0V2ZW50fVxuICAgICAgICAgICAgICAgICAgQHZhbHVlLWNoYW5nZWQ9JHt0aGlzLl9zZXRCcmlnaHRuZXNzfVxuICAgICAgICAgICAgICAgID48L3JvdW5kLXNsaWRlcj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICBjbGFzcz1cImxpZ2h0LWljb25cIlxuICAgICAgICAgICAgZGF0YS1zdGF0ZT1cIiR7c3RhdGVPYmouc3RhdGV9XCJcbiAgICAgICAgICAgIC5pY29uPVwiJHt0aGlzLl9jb25maWcuaWNvbiB8fCBzdGF0ZUljb24oc3RhdGVPYmopfVwiXG4gICAgICAgICAgICBzdHlsZT1cIiR7c3R5bGVNYXAoe1xuICAgICAgICAgICAgICBmaWx0ZXI6IHRoaXMuX2NvbXB1dGVCcmlnaHRuZXNzKHN0YXRlT2JqKSxcbiAgICAgICAgICAgICAgY29sb3I6IHRoaXMuX2NvbXB1dGVDb2xvcihzdGF0ZU9iaiksXG4gICAgICAgICAgICB9KX1cIlxuICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGlkPVwidG9vbHRpcFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJicmlnaHRuZXNzXCIgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCI+XG4gICAgICAgICAgICAke2JyaWdodG5lc3N9ICVcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZVwiPlxuICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuICAgIGlmICghb2xkSGFzcyB8fCBvbGRIYXNzLnRoZW1lcyAhPT0gdGhpcy5oYXNzLnRoZW1lcykge1xuICAgICAgYXBwbHlUaGVtZXNPbkVsZW1lbnQodGhpcywgdGhpcy5oYXNzLnRoZW1lcywgdGhpcy5fY29uZmlnLnRoZW1lKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0eWxlKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgOmhvc3Qge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB9XG5cbiAgICAgICAgaGEtY2FyZCB7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgLS1uYW1lLWZvbnQtc2l6ZTogMS4ycmVtO1xuICAgICAgICAgIC0tYnJpZ2h0bmVzcy1mb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgICAtLXJhaWwtYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgfVxuXG4gICAgICAgICN0b29sdGlwIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgICNsaWdodCB7XG4gICAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmctdG9wOiAwO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAzMnB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBoZWlnaHQ6IDE2MHB4O1xuICAgICAgICAgIHdpZHRoOiAxNjBweDtcbiAgICAgICAgfVxuICAgICAgICAjbGlnaHQgcm91bmQtc2xpZGVyIHtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgLS1yb3VuZC1zbGlkZXItcGF0aC1jb2xvcjogdmFyKC0tZGlzYWJsZWQtdGV4dC1jb2xvcik7XG4gICAgICAgICAgLS1yb3VuZC1zbGlkZXItYmFyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgICB6LWluZGV4OiAyMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5saWdodC1pY29uIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgd2lkdGg6IDc2cHg7XG4gICAgICAgICAgaGVpZ2h0OiA3NnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pdGVtLWljb24tY29sb3IsICM0NDczOWUpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB6LWluZGV4OiAyMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5saWdodC1pY29uW2RhdGEtc3RhdGU9XCJvblwiXSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWl0ZW0taWNvbi1hY3RpdmUtY29sb3IsICNmZGQ4MzUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLmxpZ2h0LWljb25bZGF0YS1zdGF0ZT1cInVuYXZhaWxhYmxlXCJdIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tc3RhdGUtaWNvbi11bmF2YWlsYWJsZS1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICAubmFtZSB7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHRvcDogMTYwcHg7XG4gICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tbmFtZS1mb250LXNpemUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJyaWdodG5lc3Mge1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tYnJpZ2h0bmVzcy1mb250LXNpemUpO1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICB0b3A6IDEzNXB4O1xuICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlKTtcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlLWluLW91dDtcbiAgICAgICAgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlLWluLW91dDtcbiAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlLWluLW91dDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuc2hvd19icmlnaHRuZXNzIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLm1vcmUtaW5mbyB7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgei1pbmRleDogMjU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfZHJhZ0V2ZW50KGU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcIi5icmlnaHRuZXNzXCIpIS5pbm5lckhUTUwgPVxuICAgICAgZS5kZXRhaWwudmFsdWUgKyBcIiVcIjtcbiAgICB0aGlzLl9zaG93QnJpZ2h0bmVzcygpO1xuICAgIHRoaXMuX2hpZGVCcmlnaHRuZXNzKCk7XG4gIH1cblxuICBwcml2YXRlIF9zaG93QnJpZ2h0bmVzcygpOiB2b2lkIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fYnJpZ2h0bmVzc1RpbW91dCk7XG4gICAgdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwiLmJyaWdodG5lc3NcIikhLmNsYXNzTGlzdC5hZGQoXG4gICAgICBcInNob3dfYnJpZ2h0bmVzc1wiXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hpZGVCcmlnaHRuZXNzKCk6IHZvaWQge1xuICAgIHRoaXMuX2JyaWdodG5lc3NUaW1vdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNoYWRvd1Jvb3QhLnF1ZXJ5U2VsZWN0b3IoXCIuYnJpZ2h0bmVzc1wiKSEuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgICAgXCJzaG93X2JyaWdodG5lc3NcIlxuICAgICAgKTtcbiAgICB9LCA1MDApO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0QnJpZ2h0bmVzcyhlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwibGlnaHRcIiwgXCJ0dXJuX29uXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICBicmlnaHRuZXNzX3BjdDogZS5kZXRhaWwudmFsdWUsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlQnJpZ2h0bmVzcyhzdGF0ZU9iajogTGlnaHRFbnRpdHkpOiBzdHJpbmcge1xuICAgIGlmICghc3RhdGVPYmouYXR0cmlidXRlcy5icmlnaHRuZXNzKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgY29uc3QgYnJpZ2h0bmVzcyA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuYnJpZ2h0bmVzcztcbiAgICByZXR1cm4gYGJyaWdodG5lc3MoJHsoYnJpZ2h0bmVzcyArIDI0NSkgLyA1fSUpYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbXB1dGVDb2xvcihzdGF0ZU9iajogTGlnaHRFbnRpdHkpOiBzdHJpbmcge1xuICAgIGlmICghc3RhdGVPYmouYXR0cmlidXRlcy5oc19jb2xvcikge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGNvbnN0IFtodWUsIHNhdF0gPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmhzX2NvbG9yO1xuICAgIGlmIChzYXQgPD0gMTApIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gYGhzbCgke2h1ZX0sIDEwMCUsICR7MTAwIC0gc2F0IC8gMn0lKWA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVUYXAoKSB7XG4gICAgdG9nZ2xlRW50aXR5KHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEuZW50aXR5ISk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVNb3JlSW5mbygpIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJoYXNzLW1vcmUtaW5mb1wiLCB7XG4gICAgICBlbnRpdHlJZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1saWdodC1jYXJkXCI6IEh1aUxpZ2h0Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaWNvbi1idXR0b24vcGFwZXItaWNvbi1idXR0b25cIjtcbmltcG9ydCB7IExheWVyLCBNYXJrZXIsIENpcmNsZSwgTWFwIH0gZnJvbSBcImxlYWZsZXRcIjtcbmltcG9ydCB7XG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjc3MsXG4gIGh0bWwsXG4gIHByb3BlcnR5LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgQ1NTUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vbWFwL2hhLWVudGl0eS1tYXJrZXJcIjtcblxuaW1wb3J0IHtcbiAgc2V0dXBMZWFmbGV0TWFwLFxuICBjcmVhdGVUaWxlTGF5ZXIsXG4gIExlYWZsZXRNb2R1bGVUeXBlLFxufSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9zZXR1cC1sZWFmbGV0LW1hcFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kb21haW5cIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL2RlYm91bmNlXCI7XG5pbXBvcnQgcGFyc2VBc3BlY3RSYXRpbyBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvXCI7XG5pbXBvcnQgeyBjb21wdXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9kb21haW5cIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IE1hcENhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktbWFwLWNhcmRcIilcbmNsYXNzIEh1aU1hcENhcmQgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VDYXJkIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRDb25maWdFbGVtZW50KCkge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1tYXAtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLW1hcC1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1tYXAtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKSB7XG4gICAgcmV0dXJuIHsgZW50aXRpZXM6IFtdIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgcmVmbGVjdDogdHJ1ZSB9KVxuICBwdWJsaWMgaXNQYW5lbCA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSgpXG4gIHByaXZhdGUgX2NvbmZpZz86IE1hcENhcmRDb25maWc7XG4gIHByaXZhdGUgX2NvbmZpZ0VudGl0aWVzPzogRW50aXR5Q29uZmlnW107XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICBwcml2YXRlIExlYWZsZXQ/OiBMZWFmbGV0TW9kdWxlVHlwZTtcbiAgcHJpdmF0ZSBfbGVhZmxldE1hcD86IE1hcDtcbiAgLy8gQHRzLWlnbm9yZVxuICBwcml2YXRlIF9yZXNpemVPYnNlcnZlcj86IFJlc2l6ZU9ic2VydmVyO1xuICBwcml2YXRlIF9kZWJvdW5jZWRSZXNpemVMaXN0ZW5lciA9IGRlYm91bmNlKFxuICAgICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fbGVhZmxldE1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9sZWFmbGV0TWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgfSxcbiAgICAxMDAsXG4gICAgZmFsc2VcbiAgKTtcbiAgcHJpdmF0ZSBfbWFwSXRlbXM6IEFycmF5PE1hcmtlciB8IENpcmNsZT4gPSBbXTtcbiAgcHJpdmF0ZSBfY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IE1hcENhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgaW4gY2FyZCBjb25maWd1cmF0aW9uLlwiKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5lbnRpdGllcyAmJiAhY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRWl0aGVyIGVudGl0aWVzIG9yIGdlb19sb2NhdGlvbl9zb3VyY2VzIG11c3QgYmUgZGVmaW5lZFwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmVudGl0aWVzICYmICFBcnJheS5pc0FycmF5KGNvbmZpZy5lbnRpdGllcykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVudGl0aWVzIG5lZWQgdG8gYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcyAmJlxuICAgICAgIUFycmF5LmlzQXJyYXkoY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VvX2xvY2F0aW9uX3NvdXJjZXMgbmVlZHMgdG8gYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gY29uZmlnLmVudGl0aWVzXG4gICAgICA/IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpXG4gICAgICA6IFtdO1xuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiAzO1xuICAgIH1cbiAgICBjb25zdCByYXRpbyA9IHBhcnNlQXNwZWN0UmF0aW8odGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpbyk7XG4gICAgY29uc3QgYXIgPVxuICAgICAgcmF0aW8gJiYgcmF0aW8udyA+IDAgJiYgcmF0aW8uaCA+IDBcbiAgICAgICAgPyBgJHsoKDEwMCAqIHJhdGlvLmgpIC8gcmF0aW8udykudG9GaXhlZCgyKX1gXG4gICAgICAgIDogXCIxMDBcIjtcbiAgICByZXR1cm4gMSArIE1hdGguZmxvb3IoTnVtYmVyKGFyKSAvIDI1KSB8fCAzO1xuICB9XG5cbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLmxvYWRNYXAoKTtcbiAgICAgIHRoaXMuX2F0dGFjaE9ic2VydmVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5fbGVhZmxldE1hcCkge1xuICAgICAgdGhpcy5fbGVhZmxldE1hcC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2xlYWZsZXRNYXAgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLkxlYWZsZXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Jlc2l6ZU9ic2VydmVyKSB7XG4gICAgICB0aGlzLl9yZXNpemVPYnNlcnZlci51bm9ic2VydmUodGhpcy5fbWFwRWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLl9kZWJvdW5jZWRSZXNpemVMaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIGlkPVwiY2FyZFwiIC5oZWFkZXI9JHt0aGlzLl9jb25maWcudGl0bGV9PlxuICAgICAgICA8ZGl2IGlkPVwicm9vdFwiPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGlkPVwibWFwXCJcbiAgICAgICAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoeyBkYXJrOiB0aGlzLl9jb25maWcuZGFya19tb2RlID09PSB0cnVlIH0pfVxuICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgIEBjbGljaz0ke3RoaXMuX2ZpdE1hcH1cbiAgICAgICAgICAgIGljb249XCJoYXNzOmltYWdlLWZpbHRlci1jZW50ZXItZm9jdXNcIlxuICAgICAgICAgICAgdGl0bGU9XCJSZXNldCBmb2N1c1wiXG4gICAgICAgICAgPjwvcGFwZXItaWNvbi1idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wcykge1xuICAgIGlmICghY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikgfHwgY2hhbmdlZFByb3BzLnNpemUgPiAxKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcblxuICAgIGlmICghb2xkSGFzcyB8fCAhdGhpcy5fY29uZmlnRW50aXRpZXMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGFueSBzdGF0ZSBoYXMgY2hhbmdlZFxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuX2NvbmZpZ0VudGl0aWVzKSB7XG4gICAgICBpZiAob2xkSGFzcy5zdGF0ZXNbZW50aXR5LmVudGl0eV0gIT09IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eS5lbnRpdHldKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIHRoaXMubG9hZE1hcCgpO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKTtcblxuICAgIGlmICghdGhpcy5fY29uZmlnIHx8IHRoaXMuaXNQYW5lbCB8fCAhcm9vdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuX2F0dGFjaE9ic2VydmVyKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmF0aW8gPSBwYXJzZUFzcGVjdFJhdGlvKHRoaXMuX2NvbmZpZy5hc3BlY3RfcmF0aW8pO1xuXG4gICAgcm9vdC5zdHlsZS5wYWRkaW5nQm90dG9tID1cbiAgICAgIHJhdGlvICYmIHJhdGlvLncgPiAwICYmIHJhdGlvLmggPiAwXG4gICAgICAgID8gYCR7KCgxMDAgKiByYXRpby5oKSAvIHJhdGlvLncpLnRvRml4ZWQoMil9JWBcbiAgICAgICAgOiAocm9vdC5zdHlsZS5wYWRkaW5nQm90dG9tID0gXCIxMDAlXCIpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiaGFzc1wiKSkge1xuICAgICAgdGhpcy5fZHJhd0VudGl0aWVzKCk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpICYmXG4gICAgICBjaGFuZ2VkUHJvcHMuZ2V0KFwiX2NvbmZpZ1wiKSAhPT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICB0aGlzLnVwZGF0ZU1hcChjaGFuZ2VkUHJvcHMuZ2V0KFwiX2NvbmZpZ1wiKSBhcyBNYXBDYXJkQ29uZmlnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBfbWFwRWwoKTogSFRNTERpdkVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwibWFwXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkTWFwKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFt0aGlzLl9sZWFmbGV0TWFwLCB0aGlzLkxlYWZsZXRdID0gYXdhaXQgc2V0dXBMZWFmbGV0TWFwKFxuICAgICAgdGhpcy5fbWFwRWwsXG4gICAgICB0aGlzLl9jb25maWcgIT09IHVuZGVmaW5lZCA/IHRoaXMuX2NvbmZpZy5kYXJrX21vZGUgPT09IHRydWUgOiBmYWxzZVxuICAgICk7XG4gICAgdGhpcy5fZHJhd0VudGl0aWVzKCk7XG4gICAgdGhpcy5fbGVhZmxldE1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuICAgIHRoaXMuX2ZpdE1hcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVNYXAob2xkQ29uZmlnOiBNYXBDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5fbGVhZmxldE1hcDtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLl9jb25maWc7XG4gICAgY29uc3QgTGVhZmxldCA9IHRoaXMuTGVhZmxldDtcbiAgICBpZiAoIW1hcCB8fCAhY29uZmlnIHx8ICFMZWFmbGV0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb25maWcuZGFya19tb2RlICE9PSBvbGRDb25maWcuZGFya19tb2RlKSB7XG4gICAgICBjcmVhdGVUaWxlTGF5ZXIoTGVhZmxldCwgY29uZmlnLmRhcmtfbW9kZSA9PT0gdHJ1ZSkuYWRkVG8obWFwKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY29uZmlnLmVudGl0aWVzICE9PSBvbGRDb25maWcuZW50aXRpZXMgfHxcbiAgICAgIGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcyAhPT0gb2xkQ29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzXG4gICAgKSB7XG4gICAgICB0aGlzLl9kcmF3RW50aXRpZXMoKTtcbiAgICB9XG4gICAgbWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgdGhpcy5fZml0TWFwKCk7XG4gIH1cblxuICBwcml2YXRlIF9maXRNYXAoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9sZWFmbGV0TWFwIHx8ICF0aGlzLkxlYWZsZXQgfHwgIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHpvb20gPSB0aGlzLl9jb25maWcuZGVmYXVsdF96b29tO1xuICAgIGlmICh0aGlzLl9tYXBJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2xlYWZsZXRNYXAuc2V0VmlldyhcbiAgICAgICAgbmV3IHRoaXMuTGVhZmxldC5MYXRMbmcoXG4gICAgICAgICAgdGhpcy5oYXNzLmNvbmZpZy5sYXRpdHVkZSxcbiAgICAgICAgICB0aGlzLmhhc3MuY29uZmlnLmxvbmdpdHVkZVxuICAgICAgICApLFxuICAgICAgICB6b29tIHx8IDE0XG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuTGVhZmxldC5sYXRMbmdCb3VuZHMoXG4gICAgICB0aGlzLl9tYXBJdGVtcyA/IHRoaXMuX21hcEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5nZXRMYXRMbmcoKSkgOiBbXVxuICAgICk7XG4gICAgdGhpcy5fbGVhZmxldE1hcC5maXRCb3VuZHMoYm91bmRzLnBhZCgwLjUpKTtcblxuICAgIGlmICh6b29tICYmIHRoaXMuX2xlYWZsZXRNYXAuZ2V0Wm9vbSgpID4gem9vbSkge1xuICAgICAgdGhpcy5fbGVhZmxldE1hcC5zZXRab29tKHpvb20pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2RyYXdFbnRpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCBoYXNzID0gdGhpcy5oYXNzO1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuX2xlYWZsZXRNYXA7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5fY29uZmlnO1xuICAgIGNvbnN0IExlYWZsZXQgPSB0aGlzLkxlYWZsZXQ7XG4gICAgaWYgKCFoYXNzIHx8ICFtYXAgfHwgIWNvbmZpZyB8fCAhTGVhZmxldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9tYXBJdGVtcykge1xuICAgICAgdGhpcy5fbWFwSXRlbXMuZm9yRWFjaCgobWFya2VyKSA9PiBtYXJrZXIucmVtb3ZlKCkpO1xuICAgIH1cbiAgICBjb25zdCBtYXBJdGVtczogTGF5ZXJbXSA9ICh0aGlzLl9tYXBJdGVtcyA9IFtdKTtcblxuICAgIGNvbnN0IGFsbEVudGl0aWVzID0gdGhpcy5fY29uZmlnRW50aXRpZXMhLmNvbmNhdCgpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHZpc2libGUgZ2VvIGxvY2F0aW9uIHNvdXJjZXNcbiAgICBpZiAoY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICBjb25zdCBpbmNsdWRlc0FsbCA9IGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcy5pbmNsdWRlcyhcImFsbFwiKTtcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgT2JqZWN0LmtleXMoaGFzcy5zdGF0ZXMpKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlT2JqID0gaGFzcy5zdGF0ZXNbZW50aXR5SWRdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY29tcHV0ZURvbWFpbihlbnRpdHlJZCkgPT09IFwiZ2VvX2xvY2F0aW9uXCIgJiZcbiAgICAgICAgICAoaW5jbHVkZXNBbGwgfHxcbiAgICAgICAgICAgIGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcy5pbmNsdWRlcyhzdGF0ZU9iai5hdHRyaWJ1dGVzLnNvdXJjZSkpXG4gICAgICAgICkge1xuICAgICAgICAgIGFsbEVudGl0aWVzLnB1c2goeyBlbnRpdHk6IGVudGl0eUlkIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgYWxsRW50aXRpZXMpIHtcbiAgICAgIGNvbnN0IGVudGl0eUlkID0gZW50aXR5LmVudGl0eTtcbiAgICAgIGNvbnN0IHN0YXRlT2JqID0gaGFzcy5zdGF0ZXNbZW50aXR5SWRdO1xuICAgICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRpdGxlID0gY29tcHV0ZVN0YXRlTmFtZShzdGF0ZU9iaik7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGxhdGl0dWRlLFxuICAgICAgICBsb25naXR1ZGUsXG4gICAgICAgIHBhc3NpdmUsXG4gICAgICAgIGljb24sXG4gICAgICAgIHJhZGl1cyxcbiAgICAgICAgZW50aXR5X3BpY3R1cmU6IGVudGl0eVBpY3R1cmUsXG4gICAgICAgIGdwc19hY2N1cmFjeTogZ3BzQWNjdXJhY3ksXG4gICAgICB9ID0gc3RhdGVPYmouYXR0cmlidXRlcztcblxuICAgICAgaWYgKCEobGF0aXR1ZGUgJiYgbG9uZ2l0dWRlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXB1dGVTdGF0ZURvbWFpbihzdGF0ZU9iaikgPT09IFwiem9uZVwiKSB7XG4gICAgICAgIC8vIERSQVcgWk9ORVxuICAgICAgICBpZiAocGFzc2l2ZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3JlYXRlIG1hcmtlciB3aXRoIHRoZSBpY29uXG4gICAgICAgIG1hcEl0ZW1zLnB1c2goXG4gICAgICAgICAgTGVhZmxldC5tYXJrZXIoW2xhdGl0dWRlLCBsb25naXR1ZGVdLCB7XG4gICAgICAgICAgICBpY29uOiBMZWFmbGV0LmRpdkljb24oe1xuICAgICAgICAgICAgICBodG1sOiBpY29uID8gYDxoYS1pY29uIGljb249XCIke2ljb259XCI+PC9oYS1pY29uPmAgOiB0aXRsZSxcbiAgICAgICAgICAgICAgaWNvblNpemU6IFsyNCwgMjRdLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGludGVyYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gY3JlYXRlIGNpcmNsZSBhcm91bmQgaXRcbiAgICAgICAgbWFwSXRlbXMucHVzaChcbiAgICAgICAgICBMZWFmbGV0LmNpcmNsZShbbGF0aXR1ZGUsIGxvbmdpdHVkZV0sIHtcbiAgICAgICAgICAgIGludGVyYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbG9yOiBcIiNGRjk4MDBcIixcbiAgICAgICAgICAgIHJhZGl1cyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBEUkFXIEVOVElUWVxuICAgICAgLy8gY3JlYXRlIGljb25cbiAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSB0aXRsZVxuICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgIC5tYXAoKHBhcnQpID0+IHBhcnRbMF0pXG4gICAgICAgIC5qb2luKFwiXCIpXG4gICAgICAgIC5zdWJzdHIoMCwgMyk7XG5cbiAgICAgIC8vIGNyZWF0ZSBtYXJrZXQgd2l0aCB0aGUgaWNvblxuICAgICAgbWFwSXRlbXMucHVzaChcbiAgICAgICAgTGVhZmxldC5tYXJrZXIoW2xhdGl0dWRlLCBsb25naXR1ZGVdLCB7XG4gICAgICAgICAgaWNvbjogTGVhZmxldC5kaXZJY29uKHtcbiAgICAgICAgICAgIC8vIExlYWZsZXQgY2xvbmVzIHRoaXMgZWxlbWVudCBiZWZvcmUgYWRkaW5nIGl0IHRvIHRoZSBtYXAuIFRoaXMgbWVzc2VzIHVwXG4gICAgICAgICAgICAvLyBvdXIgUG9seW1lciBvYmplY3QgYW5kIHdlIGNhbid0IHBhc3MgZGF0YSB0aHJvdWdoLiBUaHVzIHdlIGhhY2sgbGlrZSB0aGlzLlxuICAgICAgICAgICAgaHRtbDogYFxuICAgICAgICAgICAgICA8aGEtZW50aXR5LW1hcmtlclxuICAgICAgICAgICAgICAgIGVudGl0eS1pZD1cIiR7ZW50aXR5SWR9XCJcbiAgICAgICAgICAgICAgICBlbnRpdHktbmFtZT1cIiR7ZW50aXR5TmFtZX1cIlxuICAgICAgICAgICAgICAgIGVudGl0eS1waWN0dXJlPVwiJHtlbnRpdHlQaWN0dXJlIHx8IFwiXCJ9XCJcbiAgICAgICAgICAgICAgPjwvaGEtZW50aXR5LW1hcmtlcj5cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICBpY29uU2l6ZTogWzQ4LCA0OF0sXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiXCIsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGl0bGU6IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgLy8gY3JlYXRlIGNpcmNsZSBhcm91bmQgaWYgZW50aXR5IGhhcyBhY2N1cmFjeVxuICAgICAgaWYgKGdwc0FjY3VyYWN5KSB7XG4gICAgICAgIG1hcEl0ZW1zLnB1c2goXG4gICAgICAgICAgTGVhZmxldC5jaXJjbGUoW2xhdGl0dWRlLCBsb25naXR1ZGVdLCB7XG4gICAgICAgICAgICBpbnRlcmFjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBjb2xvcjogXCIjMDI4OEQxXCIsXG4gICAgICAgICAgICByYWRpdXM6IGdwc0FjY3VyYWN5LFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbWFwSXRlbXMuZm9yRWFjaCgobWFya2VyKSA9PiBtYXAuYWRkTGF5ZXIobWFya2VyKSk7XG4gIH1cblxuICBwcml2YXRlIF9hdHRhY2hPYnNlcnZlcigpOiB2b2lkIHtcbiAgICAvLyBPYnNlcnZlIGNoYW5nZXMgdG8gbWFwIHNpemUgYW5kIGludmFsaWRhdGUgdG8gcHJldmVudCBicm9rZW4gcmVuZGVyaW5nXG4gICAgLy8gVXNlcyBSZXNpemVPYnNlcnZlciBpbiBDaHJvbWUsIG90aGVyd2lzZSB3aW5kb3cgcmVzaXplIGV2ZW50XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKHR5cGVvZiBSZXNpemVPYnNlcnZlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0aGlzLl9yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PlxuICAgICAgICB0aGlzLl9kZWJvdW5jZWRSZXNpemVMaXN0ZW5lcigpXG4gICAgICApO1xuICAgICAgdGhpcy5fcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLl9tYXBFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuX2RlYm91bmNlZFJlc2l6ZUxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdChbaXNwYW5lbF0pIGhhLWNhcmQge1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAvKipcbiAgICAgICAqIEluIHBhbmVsIG1vZGUgd2Ugd2FudCBhIGZ1bGwgaGVpZ2h0IG1hcC4gU2luY2UgcGFyZW50ICN2aWV3XG4gICAgICAgKiBvbmx5IHNldHMgbWluLWhlaWdodCwgd2UgbmVlZCBhYnNvbHV0ZSBwb3NpdGlvbmluZyBoZXJlXG4gICAgICAgKi9cbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB9XG5cbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICAjbWFwIHtcbiAgICAgICAgei1pbmRleDogMDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogI2ZhZmFmODtcbiAgICAgIH1cblxuICAgICAgI21hcC5kYXJrIHtcbiAgICAgICAgYmFja2dyb3VuZDogIzA5MDkwOTtcbiAgICAgIH1cblxuICAgICAgcGFwZXItaWNvbi1idXR0b24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogNzVweDtcbiAgICAgICAgbGVmdDogN3B4O1xuICAgICAgfVxuXG4gICAgICAjcm9vdCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2lzcGFuZWxdKSAjcm9vdCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktbWFwLWNhcmRcIjogSHVpTWFwQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuaW1wb3J0IHsgVW5zdWJzY3JpYmVGdW5jIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtbWFya2Rvd25cIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IE1hcmtkb3duQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBzdWJzY3JpYmVSZW5kZXJUZW1wbGF0ZSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3dzLXRlbXBsYXRlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1tYXJrZG93bi1jYXJkXCIpXG5leHBvcnQgY2xhc3MgSHVpTWFya2Rvd25DYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1tYXJrZG93bi1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktbWFya2Rvd24tY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktbWFya2Rvd24tY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudDpcbiAgICAgICAgXCJUaGUgKipNYXJrZG93bioqIGNhcmQgYWxsb3dzIHlvdSB0byB3cml0ZSBhbnkgdGV4dC4gWW91IGNhbiBzdHlsZSBpdCAqKmJvbGQqKiwgKml0YWxpY2l6ZWQqLCB+c3RyaWtldGhyb3VnaH4gZXRjLiBZb3UgY2FuIGRvIGltYWdlcywgbGlua3MsIGFuZCBtb3JlLlxcblxcbkZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSB0aGUgW01hcmtkb3duIENoZWF0c2hlZXRdKGh0dHBzOi8vY29tbW9ubWFyay5vcmcvaGVscCkuXCIsXG4gICAgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IE1hcmtkb3duQ2FyZENvbmZpZztcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29udGVudD86IHN0cmluZyA9IFwiXCI7XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX3Vuc3ViUmVuZGVyVGVtcGxhdGU/OiBQcm9taXNlPFVuc3Vic2NyaWJlRnVuYz47XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2hhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jb25maWcgPT09IHVuZGVmaW5lZFxuICAgICAgPyAzXG4gICAgICA6IHRoaXMuX2NvbmZpZy5jYXJkX3NpemUgPT09IHVuZGVmaW5lZFxuICAgICAgPyB0aGlzLl9jb25maWcuY29udGVudC5zcGxpdChcIlxcblwiKS5sZW5ndGggKyAodGhpcy5fY29uZmlnLnRpdGxlID8gMSA6IDApXG4gICAgICA6IHRoaXMuX2NvbmZpZy5jYXJkX3NpemU7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogTWFya2Rvd25DYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcuY29udGVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiBDb250ZW50IFJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9kaXNjb25uZWN0KCkudGhlbigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5faGFzcykge1xuICAgICAgICB0aGlzLl9jb25uZWN0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5fZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgcHVibGljIHNldCBoYXNzKGhhc3MpIHtcbiAgICB0aGlzLl9oYXNzID0gaGFzcztcbiAgICB0aGlzLl9jb25uZWN0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZCAuaGVhZGVyPVwiJHt0aGlzLl9jb25maWcudGl0bGV9XCI+XG4gICAgICAgIDxoYS1tYXJrZG93blxuICAgICAgICAgIGNsYXNzPVwibWFya2Rvd24gJHtjbGFzc01hcCh7XG4gICAgICAgICAgICBcIm5vLWhlYWRlclwiOiAhdGhpcy5fY29uZmlnLnRpdGxlLFxuICAgICAgICAgIH0pfVwiXG4gICAgICAgICAgLmNvbnRlbnQ9XCIke3RoaXMuX2NvbnRlbnR9XCJcbiAgICAgICAgPjwvaGEtbWFya2Rvd24+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2Nvbm5lY3QoKSB7XG4gICAgaWYgKCF0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlICYmIHRoaXMuX2hhc3MgJiYgdGhpcy5fY29uZmlnKSB7XG4gICAgICB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlID0gc3Vic2NyaWJlUmVuZGVyVGVtcGxhdGUoXG4gICAgICAgIHRoaXMuX2hhc3MuY29ubmVjdGlvbixcbiAgICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NvbnRlbnQgPSByZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy5fY29uZmlnLmNvbnRlbnQsXG4gICAgICAgICAgZW50aXR5X2lkczogdGhpcy5fY29uZmlnLmVudGl0eV9pZCxcbiAgICAgICAgICB2YXJpYWJsZXM6IHsgY29uZmlnOiB0aGlzLl9jb25maWcgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHRoaXMuX3Vuc3ViUmVuZGVyVGVtcGxhdGUuY2F0Y2goKCkgPT4ge1xuICAgICAgICB0aGlzLl9jb250ZW50ID0gdGhpcy5fY29uZmlnIS5jb250ZW50O1xuICAgICAgICB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZGlzY29ubmVjdCgpIHtcbiAgICBpZiAodGhpcy5fdW5zdWJSZW5kZXJUZW1wbGF0ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdW5zdWIgPSBhd2FpdCB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlO1xuICAgICAgICB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICBhd2FpdCB1bnN1YigpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZS5jb2RlID09PSBcIm5vdF9mb3VuZFwiKSB7XG4gICAgICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHRoZSBjb25uZWN0aW9uIHdhcyBwcm9iYWJseSBhbHJlYWR5IGNsb3NlZC4gSWdub3JlLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1tYXJrZG93biB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBwYWRkaW5nOiAwIDE2cHggMTZweDtcbiAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBpbml0aWFsO1xuICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBpbml0aWFsO1xuICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBpbml0aWFsO1xuICAgICAgfVxuICAgICAgLm1hcmtkb3duLm5vLWhlYWRlciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgICAgfVxuICAgICAgaGEtbWFya2Rvd24gPiAqOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgIH1cbiAgICAgIGhhLW1hcmtkb3duID4gKjpsYXN0LWNoaWxkIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgIH1cbiAgICAgIGhhLW1hcmtkb3duIGEge1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICB9XG4gICAgICBoYS1tYXJrZG93biBpbWcge1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLW1hcmtkb3duLWNhcmRcIjogSHVpTWFya2Rvd25DYXJkO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuLi8uLi8uLi9jYXJkcy9oYS1tZWRpYV9wbGF5ZXItY2FyZFwiO1xuXG5pbXBvcnQgTGVnYWN5V3JhcHBlckNhcmQgZnJvbSBcIi4vaHVpLWxlZ2FjeS13cmFwcGVyLWNhcmRcIjtcblxuY2xhc3MgSHVpTWVkaWFDb250cm9sQ2FyZCBleHRlbmRzIExlZ2FjeVdyYXBwZXJDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKSB7XG4gICAgYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLW1lZGlhLWNvbnRyb2wtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLW1lZGlhLWNvbnRyb2wtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktbWVkaWEtY29udHJvbC1jYXJkLWVkaXRvclwiKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRTdHViQ29uZmlnKCkge1xuICAgIHJldHVybiB7IGVudGl0eTogXCJcIiB9O1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJoYS1tZWRpYV9wbGF5ZXItY2FyZFwiLCBcIm1lZGlhX3BsYXllclwiKTtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktbWVkaWEtY29udHJvbC1jYXJkXCIsIEh1aU1lZGlhQ29udHJvbENhcmQpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuXG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQsIExvdmVsYWNlQ2FyZEVkaXRvciB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IGxvbmdQcmVzcyB9IGZyb20gXCIuLi9jb21tb24vZGlyZWN0aXZlcy9sb25nLXByZXNzLWRpcmVjdGl2ZVwiO1xuaW1wb3J0IHsgUGljdHVyZUNhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1waWN0dXJlLWNhcmRcIilcbmV4cG9ydCBjbGFzcyBIdWlQaWN0dXJlQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktcGljdHVyZS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktcGljdHVyZS1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1waWN0dXJlLWNhcmQtZWRpdG9yXCIpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICBpbWFnZTpcbiAgICAgICAgXCJodHRwczovL3d3dy5ob21lLWFzc2lzdGFudC5pby9pbWFnZXMvbWVyY2hhbmRpc2Uvc2hpcnQtZnJvbnRwYWdlLnBuZ1wiLFxuICAgICAgdGFwX2FjdGlvbjogeyBhY3Rpb246IFwibm9uZVwiIH0sXG4gICAgICBob2xkX2FjdGlvbjogeyBhY3Rpb246IFwibm9uZVwiIH0sXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcm90ZWN0ZWQgX2NvbmZpZz86IFBpY3R1cmVDYXJkQ29uZmlnO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFBpY3R1cmVDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5pbWFnZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnaW1hZ2UnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgQGhhLWhvbGQ9XCIke3RoaXMuX2hhbmRsZUhvbGR9XCJcbiAgICAgICAgLmxvbmdQcmVzcz1cIiR7bG9uZ1ByZXNzKCl9XCJcbiAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHtcbiAgICAgICAgICBjbGlja2FibGU6IEJvb2xlYW4oXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGFwX2FjdGlvbiB8fCB0aGlzLl9jb25maWcuaG9sZF9hY3Rpb25cbiAgICAgICAgICApLFxuICAgICAgICB9KX1cIlxuICAgICAgPlxuICAgICAgICA8aW1nIHNyYz1cIiR7dGhpcy5oYXNzLmhhc3NVcmwodGhpcy5fY29uZmlnLmltYWdlKX1cIiAvPlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgaGEtY2FyZC5jbGlja2FibGUge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIGltZyB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVGFwKCkge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhvbGQoKSB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgdHJ1ZSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1waWN0dXJlLWNhcmRcIjogSHVpUGljdHVyZUNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVTdHlsZWRIdWlFbGVtZW50IH0gZnJvbSBcIi4vcGljdHVyZS1lbGVtZW50cy9jcmVhdGUtc3R5bGVkLWh1aS1lbGVtZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudENvbmZpZywgTG92ZWxhY2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnRzL3R5cGVzXCI7XG5pbXBvcnQgeyBQaWN0dXJlRWxlbWVudHNDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktcGljdHVyZS1lbGVtZW50cy1jYXJkXCIpXG5jbGFzcyBIdWlQaWN0dXJlRWxlbWVudHNDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IFBpY3R1cmVFbGVtZW50c0NhcmRDb25maWc7XG5cbiAgcHJpdmF0ZSBfaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgc2V0IGhhc3MoaGFzczogSG9tZUFzc2lzdGFudCkge1xuICAgIHRoaXMuX2hhc3MgPSBoYXNzO1xuICAgIGZvciAoY29uc3QgZWwgb2YgQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvckFsbChcIiNyb290ID4gKlwiKVxuICAgICkpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbCBhcyBMb3ZlbGFjZUVsZW1lbnQ7XG4gICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiA0O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFBpY3R1cmVFbGVtZW50c0NhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uXCIpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAhKGNvbmZpZy5pbWFnZSB8fCBjb25maWcuY2FtZXJhX2ltYWdlIHx8IGNvbmZpZy5zdGF0ZV9pbWFnZSkgfHxcbiAgICAgIChjb25maWcuc3RhdGVfaW1hZ2UgJiYgIWNvbmZpZy5lbnRpdHkpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246IGltYWdlIHJlcXVpcmVkXCIpO1xuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoY29uZmlnLmVsZW1lbnRzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiBlbGVtZW50cyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZCAuaGVhZGVyPVwiJHt0aGlzLl9jb25maWcudGl0bGV9XCI+XG4gICAgICAgIDxkaXYgaWQ9XCJyb290XCI+XG4gICAgICAgICAgPGh1aS1pbWFnZVxuICAgICAgICAgICAgLmhhc3M9JHt0aGlzLl9oYXNzfVxuICAgICAgICAgICAgLmltYWdlPSR7dGhpcy5fY29uZmlnLmltYWdlfVxuICAgICAgICAgICAgLnN0YXRlSW1hZ2U9JHt0aGlzLl9jb25maWcuc3RhdGVfaW1hZ2V9XG4gICAgICAgICAgICAuc3RhdGVGaWx0ZXI9JHt0aGlzLl9jb25maWcuc3RhdGVfZmlsdGVyfVxuICAgICAgICAgICAgLmNhbWVyYUltYWdlPSR7dGhpcy5fY29uZmlnLmNhbWVyYV9pbWFnZX1cbiAgICAgICAgICAgIC5jYW1lcmFWaWV3PSR7dGhpcy5fY29uZmlnLmNhbWVyYV92aWV3fVxuICAgICAgICAgICAgLmVudGl0eT0ke3RoaXMuX2NvbmZpZy5lbnRpdHl9XG4gICAgICAgICAgICAuYXNwZWN0UmF0aW89JHt0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvfVxuICAgICAgICAgID48L2h1aS1pbWFnZT5cbiAgICAgICAgICAke3RoaXMuX2NvbmZpZy5lbGVtZW50cy5tYXAoXG4gICAgICAgICAgICAoZWxlbWVudENvbmZpZzogTG92ZWxhY2VFbGVtZW50Q29uZmlnKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVTdHlsZWRIdWlFbGVtZW50KGVsZW1lbnRDb25maWcpO1xuICAgICAgICAgICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuXG4gICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAjcm9vdCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgLmVsZW1lbnQge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgfVxuXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktcGljdHVyZS1lbGVtZW50cy1jYXJkXCI6IEh1aVBpY3R1cmVFbGVtZW50c0NhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktaW1hZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IGxvbmdQcmVzcyB9IGZyb20gXCIuLi9jb21tb24vZGlyZWN0aXZlcy9sb25nLXByZXNzLWRpcmVjdGl2ZVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IFVOQVZBSUxBQkxFIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZW50aXR5XCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBQaWN0dXJlRW50aXR5Q2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXBpY3R1cmUtZW50aXR5LWNhcmRcIilcbmNsYXNzIEh1aVBpY3R1cmVFbnRpdHlDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1waWN0dXJlLWVudGl0eS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktcGljdHVyZS1lbnRpdHktY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktcGljdHVyZS1lbnRpdHktY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVudGl0eTogXCJcIixcbiAgICAgIGltYWdlOlxuICAgICAgICBcImh0dHBzOi8vd3d3LmhvbWUtYXNzaXN0YW50LmlvL2ltYWdlcy9tZXJjaGFuZGlzZS9zaGlydC1mcm9udHBhZ2UucG5nXCIsXG4gICAgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBQaWN0dXJlRW50aXR5Q2FyZENvbmZpZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMztcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBQaWN0dXJlRW50aXR5Q2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246ICdlbnRpdHknIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGNvbXB1dGVEb21haW4oY29uZmlnLmVudGl0eSkgIT09IFwiY2FtZXJhXCIgJiZcbiAgICAgICghY29uZmlnLmltYWdlICYmICFjb25maWcuc3RhdGVfaW1hZ2UgJiYgIWNvbmZpZy5jYW1lcmFfaW1hZ2UpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBpbWFnZSBzb3VyY2UgY29uZmlndXJlZC5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0geyBzaG93X25hbWU6IHRydWUsIHNob3dfc3RhdGU6IHRydWUsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKTtcbiAgICBjb25zdCBzdGF0ZSA9IGNvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgc3RhdGVPYmosXG4gICAgICB0aGlzLmhhc3MubGFuZ3VhZ2VcbiAgICApO1xuXG4gICAgbGV0IGZvb3RlcjogVGVtcGxhdGVSZXN1bHQgfCBzdHJpbmcgPSBcIlwiO1xuICAgIGlmICh0aGlzLl9jb25maWcuc2hvd19uYW1lICYmIHRoaXMuX2NvbmZpZy5zaG93X3N0YXRlKSB7XG4gICAgICBmb290ZXIgPSBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyIGJvdGhcIj5cbiAgICAgICAgICA8ZGl2PiR7bmFtZX08L2Rpdj5cbiAgICAgICAgICA8ZGl2PiR7c3RhdGV9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2NvbmZpZy5zaG93X25hbWUpIHtcbiAgICAgIGZvb3RlciA9IGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj4ke25hbWV9PC9kaXY+XG4gICAgICBgO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fY29uZmlnLnNob3dfc3RhdGUpIHtcbiAgICAgIGZvb3RlciA9IGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXIgc3RhdGVcIj4ke3N0YXRlfTwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICA8aHVpLWltYWdlXG4gICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgLmltYWdlPSR7dGhpcy5fY29uZmlnLmltYWdlfVxuICAgICAgICAgIC5zdGF0ZUltYWdlPSR7dGhpcy5fY29uZmlnLnN0YXRlX2ltYWdlfVxuICAgICAgICAgIC5zdGF0ZUZpbHRlcj0ke3RoaXMuX2NvbmZpZy5zdGF0ZV9maWx0ZXJ9XG4gICAgICAgICAgLmNhbWVyYUltYWdlPSR7Y29tcHV0ZURvbWFpbih0aGlzLl9jb25maWcuZW50aXR5KSA9PT0gXCJjYW1lcmFcIlxuICAgICAgICAgICAgPyB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgICA6IHRoaXMuX2NvbmZpZy5jYW1lcmFfaW1hZ2V9XG4gICAgICAgICAgLmNhbWVyYVZpZXc9JHt0aGlzLl9jb25maWcuY2FtZXJhX3ZpZXd9XG4gICAgICAgICAgLmVudGl0eT0ke3RoaXMuX2NvbmZpZy5lbnRpdHl9XG4gICAgICAgICAgLmFzcGVjdFJhdGlvPSR7dGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpb31cbiAgICAgICAgICBAaGEtY2xpY2s9JHt0aGlzLl9oYW5kbGVUYXB9XG4gICAgICAgICAgQGhhLWhvbGQ9JHt0aGlzLl9oYW5kbGVIb2xkfVxuICAgICAgICAgIC5sb25nUHJlc3M9JHtsb25nUHJlc3MoKX1cbiAgICAgICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgIGNsaWNrYWJsZTogc3RhdGVPYmouc3RhdGUgIT09IFVOQVZBSUxBQkxFLFxuICAgICAgICAgIH0pfVxuICAgICAgICA+PC9odWktaW1hZ2U+XG4gICAgICAgICR7Zm9vdGVyfVxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgbWluLWhlaWdodDogNzVweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICBodWktaW1hZ2UuY2xpY2thYmxlIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuZm9vdGVyIHtcbiAgICAgICAgLyogc3RhcnQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAvKiBlbmQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG5cbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJvdGgge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICB9XG5cbiAgICAgIC5zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVUYXAoKSB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlSG9sZCgpIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCB0cnVlKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXBpY3R1cmUtZW50aXR5LWNhcmRcIjogSHVpUGljdHVyZUVudGl0eUNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgc3RhdGVJY29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3RhdGVfaWNvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktaW1hZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmctZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEaXNwbGF5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kaXNwbGF5XCI7XG5pbXBvcnQgeyBET01BSU5TX1RPR0dMRSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vY29uc3RcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IFBpY3R1cmVHbGFuY2VDYXJkQ29uZmlnLCBDb25maWdFbnRpdHkgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5jb25zdCBTVEFURVNfT0ZGID0gbmV3IFNldChbXCJjbG9zZWRcIiwgXCJsb2NrZWRcIiwgXCJub3RfaG9tZVwiLCBcIm9mZlwiXSk7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXBpY3R1cmUtZ2xhbmNlLWNhcmRcIilcbmNsYXNzIEh1aVBpY3R1cmVHbGFuY2VDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1waWN0dXJlLWdsYW5jZS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktcGljdHVyZS1nbGFuY2UtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktcGljdHVyZS1nbGFuY2UtY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGltYWdlOlxuICAgICAgICBcImh0dHBzOi8vd3d3LmhvbWUtYXNzaXN0YW50LmlvL2ltYWdlcy9tZXJjaGFuZGlzZS9zaGlydC1mcm9udHBhZ2UucG5nXCIsXG4gICAgICBlbnRpdGllczogW10sXG4gICAgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBQaWN0dXJlR2xhbmNlQ2FyZENvbmZpZztcblxuICBwcml2YXRlIF9lbnRpdGllc0RpYWxvZz86IENvbmZpZ0VudGl0eVtdO1xuXG4gIHByaXZhdGUgX2VudGl0aWVzVG9nZ2xlPzogQ29uZmlnRW50aXR5W107XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDM7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogUGljdHVyZUdsYW5jZUNhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICAhY29uZmlnIHx8XG4gICAgICAhY29uZmlnLmVudGl0aWVzIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShjb25maWcuZW50aXRpZXMpIHx8XG4gICAgICAhKGNvbmZpZy5pbWFnZSB8fCBjb25maWcuY2FtZXJhX2ltYWdlIHx8IGNvbmZpZy5zdGF0ZV9pbWFnZSkgfHxcbiAgICAgIChjb25maWcuc3RhdGVfaW1hZ2UgJiYgIWNvbmZpZy5lbnRpdHkpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNhcmQgY29uZmlndXJhdGlvblwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBlbnRpdGllcyA9IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpO1xuICAgIHRoaXMuX2VudGl0aWVzRGlhbG9nID0gW107XG4gICAgdGhpcy5fZW50aXRpZXNUb2dnbGUgPSBbXTtcblxuICAgIGVudGl0aWVzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgY29uZmlnLmZvcmNlX2RpYWxvZyB8fFxuICAgICAgICAhRE9NQUlOU19UT0dHTEUuaGFzKGNvbXB1dGVEb21haW4oaXRlbS5lbnRpdHkpKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2VudGl0aWVzRGlhbG9nIS5wdXNoKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW50aXRpZXNUb2dnbGUhLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRoaXMuX2VudGl0aWVzRGlhbG9nKSB7XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLl9lbnRpdGllc0RpYWxvZykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgb2xkSGFzcyEuc3RhdGVzW2VudGl0eS5lbnRpdHldICE9PSB0aGlzLmhhc3MhLnN0YXRlc1tlbnRpdHkuZW50aXR5XVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9lbnRpdGllc1RvZ2dsZSkge1xuICAgICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5fZW50aXRpZXNUb2dnbGUpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG9sZEhhc3MhLnN0YXRlc1tlbnRpdHkuZW50aXR5XSAhPT0gdGhpcy5oYXNzIS5zdGF0ZXNbZW50aXR5LmVudGl0eV1cbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICA8aHVpLWltYWdlXG4gICAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICBjbGlja2FibGU6IEJvb2xlYW4oXG4gICAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50YXBfYWN0aW9uIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnLmhvbGRfYWN0aW9uIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnLmNhbWVyYV9pbWFnZVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9KX1cbiAgICAgICAgICBAaGEtY2xpY2s9JHt0aGlzLl9oYW5kbGVUYXB9XG4gICAgICAgICAgQGhhLWhvbGQ9JHt0aGlzLl9oYW5kbGVIb2xkfVxuICAgICAgICAgIC5sb25nUHJlc3M9JHtsb25nUHJlc3MoKX1cbiAgICAgICAgICAuY29uZmlnPSR7dGhpcy5fY29uZmlnfVxuICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgIC5pbWFnZT0ke3RoaXMuX2NvbmZpZy5pbWFnZX1cbiAgICAgICAgICAuc3RhdGVJbWFnZT0ke3RoaXMuX2NvbmZpZy5zdGF0ZV9pbWFnZX1cbiAgICAgICAgICAuc3RhdGVGaWx0ZXI9JHt0aGlzLl9jb25maWcuc3RhdGVfZmlsdGVyfVxuICAgICAgICAgIC5jYW1lcmFJbWFnZT0ke3RoaXMuX2NvbmZpZy5jYW1lcmFfaW1hZ2V9XG4gICAgICAgICAgLmNhbWVyYVZpZXc9JHt0aGlzLl9jb25maWcuY2FtZXJhX3ZpZXd9XG4gICAgICAgICAgLmVudGl0eT0ke3RoaXMuX2NvbmZpZy5lbnRpdHl9XG4gICAgICAgICAgLmFzcGVjdFJhdGlvPSR7dGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpb31cbiAgICAgICAgPjwvaHVpLWltYWdlPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYm94XCI+XG4gICAgICAgICAgJHt0aGlzLl9jb25maWcudGl0bGVcbiAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj4ke3RoaXMuX2NvbmZpZy50aXRsZSArIFwiaGhhXCJ9PC9kaXY+XG4gICAgICAgICAgICAgIGBcbiAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgJHt0aGlzLl9lbnRpdGllc0RpYWxvZyEubWFwKChlbnRpdHlDb25mKSA9PlxuICAgICAgICAgICAgICB0aGlzLnJlbmRlckVudGl0eShlbnRpdHlDb25mLCB0cnVlKVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgJHt0aGlzLl9lbnRpdGllc1RvZ2dsZSEubWFwKChlbnRpdHlDb25mKSA9PlxuICAgICAgICAgICAgICB0aGlzLnJlbmRlckVudGl0eShlbnRpdHlDb25mLCBmYWxzZSlcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckVudGl0eShcbiAgICBlbnRpdHlDb25mOiBDb25maWdFbnRpdHksXG4gICAgZGlhbG9nOiBib29sZWFuXG4gICk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eUNvbmYuZW50aXR5XTtcblxuICAgIGVudGl0eUNvbmYgPSB7XG4gICAgICB0YXBfYWN0aW9uOiB7IGFjdGlvbjogZGlhbG9nID8gXCJtb3JlLWluZm9cIiA6IFwidG9nZ2xlXCIgfSxcbiAgICAgIC4uLmVudGl0eUNvbmYsXG4gICAgfTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmctZWxlbWVudFxuICAgICAgICAgIGxhYmVsPSR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgZW50aXR5Q29uZi5lbnRpdHlcbiAgICAgICAgICApfVxuICAgICAgICA+PC9odWktd2FybmluZy1lbGVtZW50PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1pY29uXG4gICAgICAgIEBoYS1jbGljaz0ke3RoaXMuX2hhbmRsZVRhcH1cbiAgICAgICAgQGhhLWhvbGQ9JHt0aGlzLl9oYW5kbGVIb2xkfVxuICAgICAgICAubG9uZ1ByZXNzPSR7bG9uZ1ByZXNzKCl9XG4gICAgICAgIC5jb25maWc9JHtlbnRpdHlDb25mfVxuICAgICAgICBjbGFzcz1cIiR7Y2xhc3NNYXAoe1xuICAgICAgICAgIFwic3RhdGUtb25cIjogIVNUQVRFU19PRkYuaGFzKHN0YXRlT2JqLnN0YXRlKSxcbiAgICAgICAgfSl9XCJcbiAgICAgICAgLmljb249XCIke2VudGl0eUNvbmYuaWNvbiB8fCBzdGF0ZUljb24oc3RhdGVPYmopfVwiXG4gICAgICAgIHRpdGxlPVwiJHtgXG4gICAgICAgICAgICAke2NvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfSA6ICR7Y29tcHV0ZVN0YXRlRGlzcGxheShcbiAgICAgICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgICAgIHN0YXRlT2JqLFxuICAgICAgICAgIHRoaXMuaGFzcyEubGFuZ3VhZ2VcbiAgICAgICAgKX1cbiAgICAgICAgICBgfVwiXG4gICAgICA+PC9oYS1pY29uPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVUYXAoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWcgPSAoZXYuY3VycmVudFRhcmdldCBhcyBhbnkpLmNvbmZpZyBhcyBhbnk7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgY29uZmlnLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29uZmlnID0gKGV2LmN1cnJlbnRUYXJnZXQgYXMgYW55KS5jb25maWcgYXMgYW55O1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIGNvbmZpZywgdHJ1ZSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBtaW4taGVpZ2h0OiA0OHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICBodWktaW1hZ2UuY2xpY2thYmxlIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuYm94IHtcbiAgICAgICAgLyogc3RhcnQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAvKiBlbmQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG5cbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDQwcHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfVxuXG4gICAgICAuYm94IC50aXRsZSB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24ge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgY29sb3I6ICNhOWE5YTk7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24uc3RhdGUtb24ge1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXBpY3R1cmUtZ2xhbmNlLWNhcmRcIjogSHVpUGljdHVyZUdsYW5jZUNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgcHJvcGVydHksXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEhhc3NFbnRpdHkgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcblxuaW1wb3J0IHsgTG92ZWxhY2VDYXJkRWRpdG9yLCBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZpcmVFdmVudCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2ZpcmVfZXZlbnRcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcbmltcG9ydCB7IFBsYW50U3RhdHVzQ2FyZENvbmZpZywgUGxhbnRBdHRyaWJ1dGVUYXJnZXQgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5jb25zdCBTRU5TT1JTID0ge1xuICBtb2lzdHVyZTogXCJoYXNzOndhdGVyXCIsXG4gIHRlbXBlcmF0dXJlOiBcImhhc3M6dGhlcm1vbWV0ZXJcIixcbiAgYnJpZ2h0bmVzczogXCJoYXNzOndoaXRlLWJhbGFuY2Utc3VubnlcIixcbiAgY29uZHVjdGl2aXR5OiBcImhhc3M6ZW1vdGljb24tcG9vcFwiLFxuICBiYXR0ZXJ5OiBcImhhc3M6YmF0dGVyeVwiLFxufTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktcGxhbnQtc3RhdHVzLWNhcmRcIilcbmNsYXNzIEh1aVBsYW50U3RhdHVzQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktcGxhbnQtc3RhdHVzLWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS1wbGFudC1zdGF0dXMtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktcGxhbnQtc3RhdHVzLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogUGxhbnRTdGF0dXNDYXJkQ29uZmlnO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFBsYW50U3RhdHVzQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0eSB8fCBjb25maWcuZW50aXR5LnNwbGl0KFwiLlwiKVswXSAhPT0gXCJwbGFudFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTcGVjaWZ5IGFuIGVudGl0eSBmcm9tIHdpdGhpbiB0aGUgcGxhbnQgZG9tYWluLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgY2xhc3M9XCIke3N0YXRlT2JqLmF0dHJpYnV0ZXMuZW50aXR5X3BpY3R1cmUgPyBcImhhcy1wbGFudC1pbWFnZVwiIDogXCJcIn1cIlxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJiYW5uZXJcIlxuICAgICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTp1cmwoJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmVudGl0eV9waWN0dXJlfSlcIlxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgJHt0aGlzLmNvbXB1dGVBdHRyaWJ1dGVzKHN0YXRlT2JqKS5tYXAoXG4gICAgICAgICAgICAoaXRlbSkgPT4gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYXR0cmlidXRlc1wiXG4gICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVNb3JlSW5mb31cIlxuICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7aXRlbX1cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICAgICAgICAgIGljb249XCIke3RoaXMuY29tcHV0ZUljb24oXG4gICAgICAgICAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLmJhdHRlcnlcbiAgICAgICAgICAgICAgICAgICAgKX1cIlxuICAgICAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzcz1cIiR7c3RhdGVPYmouYXR0cmlidXRlcy5wcm9ibGVtLmluZGV4T2YoaXRlbSkgPT09IC0xXG4gICAgICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgICAgICA6IFwicHJvYmxlbVwifVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzW2l0ZW1dfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1b21cIj5cbiAgICAgICAgICAgICAgICAgICR7c3RhdGVPYmouYXR0cmlidXRlcy51bml0X29mX21lYXN1cmVtZW50X2RpY3RbaXRlbV0gfHwgXCJcIn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIC5iYW5uZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZy10b3A6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5oYXMtcGxhbnQtaW1hZ2UgLmJhbm5lciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAzMCU7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIge1xuICAgICAgICAvKiBzdGFydCBwYXBlci1mb250LWhlYWRsaW5lIHN0eWxlICovXG4gICAgICAgIGZvbnQtZmFtaWx5OiBcIlJvYm90b1wiLCBcIk5vdG9cIiwgc2Fucy1zZXJpZjtcbiAgICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7IC8qIE9TIFggc3VicGl4ZWwgQUEgYmxlZWQgYnVnICovXG4gICAgICAgIHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7XG4gICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IC0wLjAxMmVtO1xuICAgICAgICAvKiBlbmQgcGFwZXItZm9udC1oZWFkbGluZSBzdHlsZSAqL1xuXG4gICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgIH1cblxuICAgICAgLmhhcy1wbGFudC1pbWFnZSAuaGVhZGVyIHtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCB2YXIoLS1kYXJrLXNlY29uZGFyeS1vcGFjaXR5KSk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBwYWRkaW5nOiAxNnB4IDMycHggMjRweCAzMnB4O1xuICAgICAgfVxuXG4gICAgICAuaGFzLXBsYW50LWltYWdlIC5jb250ZW50IHtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24ge1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWNvbG9yKTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuYXR0cmlidXRlcyB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgLmF0dHJpYnV0ZXMgZGl2IHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAucHJvYmxlbSB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1nb29nbGUtcmVkLTUwMCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgfVxuXG4gICAgICAudW9tIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBjb21wdXRlQXR0cmlidXRlcyhzdGF0ZU9iajogSGFzc0VudGl0eSk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoU0VOU09SUykuZmlsdGVyKChrZXkpID0+IGtleSBpbiBzdGF0ZU9iai5hdHRyaWJ1dGVzKTtcbiAgfVxuXG4gIHByaXZhdGUgY29tcHV0ZUljb24oYXR0cjogc3RyaW5nLCBiYXRMdmw6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgaWNvbiA9IFNFTlNPUlNbYXR0cl07XG4gICAgaWYgKGF0dHIgPT09IFwiYmF0dGVyeVwiKSB7XG4gICAgICBpZiAoYmF0THZsIDw9IDUpIHtcbiAgICAgICAgcmV0dXJuIGAke2ljb259LWFsZXJ0YDtcbiAgICAgIH1cbiAgICAgIGlmIChiYXRMdmwgPCA5NSkge1xuICAgICAgICByZXR1cm4gYCR7aWNvbn0tJHtNYXRoLnJvdW5kKGJhdEx2bCAvIDEwIC0gMC4wMSkgKiAxMH1gO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU1vcmVJbmZvKGV2OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2LmN1cnJlbnRUYXJnZXQhIGFzIFBsYW50QXR0cmlidXRlVGFyZ2V0O1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKHRhcmdldC52YWx1ZSkge1xuICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaGFzcy1tb3JlLWluZm9cIiwge1xuICAgICAgICBlbnRpdHlJZDogc3RhdGVPYmouYXR0cmlidXRlcy5zZW5zb3JzW3RhcmdldC52YWx1ZV0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1wbGFudC1zdGF0dXMtY2FyZFwiOiBIdWlQbGFudFN0YXR1c0NhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIHN2ZyxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItc3Bpbm5lci9wYXBlci1zcGlubmVyXCI7XG5cbmltcG9ydCBhcHBseVRoZW1lc09uRWxlbWVudCBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9hcHBseV90aGVtZXNfb25fZWxlbWVudFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IHsgc3RhdGVJY29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3RhdGVfaWNvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQsIExvdmVsYWNlQ2FyZEVkaXRvciB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgZmV0Y2hSZWNlbnQgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9oaXN0b3J5XCI7XG5pbXBvcnQgeyBTZW5zb3JDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuY29uc3QgbWlkUG9pbnQgPSAoXG4gIF9BeDogbnVtYmVyLFxuICBfQXk6IG51bWJlcixcbiAgX0J4OiBudW1iZXIsXG4gIF9CeTogbnVtYmVyXG4pOiBudW1iZXJbXSA9PiB7XG4gIGNvbnN0IF9aeCA9IChfQXggLSBfQngpIC8gMiArIF9CeDtcbiAgY29uc3QgX1p5ID0gKF9BeSAtIF9CeSkgLyAyICsgX0J5O1xuICByZXR1cm4gW19aeCwgX1p5XTtcbn07XG5cbmNvbnN0IGdldFBhdGggPSAoY29vcmRzOiBudW1iZXJbXVtdKTogc3RyaW5nID0+IHtcbiAgbGV0IG5leHQ7XG4gIGxldCBaO1xuICBjb25zdCBYID0gMDtcbiAgY29uc3QgWSA9IDE7XG4gIGxldCBwYXRoID0gXCJcIjtcbiAgbGV0IGxhc3QgPSBjb29yZHMuZmlsdGVyKEJvb2xlYW4pWzBdO1xuXG4gIHBhdGggKz0gYE0gJHtsYXN0W1hdfSwke2xhc3RbWV19YDtcblxuICBmb3IgKGNvbnN0IGNvb3JkIG9mIGNvb3Jkcykge1xuICAgIG5leHQgPSBjb29yZDtcbiAgICBaID0gbWlkUG9pbnQobGFzdFtYXSwgbGFzdFtZXSwgbmV4dFtYXSwgbmV4dFtZXSk7XG4gICAgcGF0aCArPSBgICR7WltYXX0sJHtaW1ldfWA7XG4gICAgcGF0aCArPSBgIFEke25leHRbWF19LCR7bmV4dFtZXX1gO1xuICAgIGxhc3QgPSBuZXh0O1xuICB9XG5cbiAgcGF0aCArPSBgICR7bmV4dFtYXX0sJHtuZXh0W1ldfWA7XG4gIHJldHVybiBwYXRoO1xufTtcblxuY29uc3QgY2FsY1BvaW50cyA9IChcbiAgaGlzdG9yeTogYW55LFxuICBob3VyczogbnVtYmVyLFxuICB3aWR0aDogbnVtYmVyLFxuICBkZXRhaWw6IG51bWJlcixcbiAgbWluOiBudW1iZXIsXG4gIG1heDogbnVtYmVyXG4pOiBudW1iZXJbXVtdID0+IHtcbiAgY29uc3QgY29vcmRzID0gW10gYXMgbnVtYmVyW11bXTtcbiAgY29uc3QgbWFyZ2luID0gNTtcbiAgY29uc3QgaGVpZ2h0ID0gODA7XG4gIHdpZHRoIC09IDEwO1xuICBsZXQgeVJhdGlvID0gKG1heCAtIG1pbikgLyBoZWlnaHQ7XG4gIHlSYXRpbyA9IHlSYXRpbyAhPT0gMCA/IHlSYXRpbyA6IGhlaWdodDtcbiAgbGV0IHhSYXRpbyA9IHdpZHRoIC8gKGhvdXJzIC0gKGRldGFpbCA9PT0gMSA/IDEgOiAwKSk7XG4gIHhSYXRpbyA9IGlzRmluaXRlKHhSYXRpbykgPyB4UmF0aW8gOiB3aWR0aDtcbiAgY29uc3QgZ2V0Q29vcmRzID0gKGl0ZW0sIGksIG9mZnNldCA9IDAsIGRlcHRoID0gMSkgPT4ge1xuICAgIGlmIChkZXB0aCA+IDEpIHtcbiAgICAgIHJldHVybiBpdGVtLmZvckVhY2goKHN1Ykl0ZW0sIGluZGV4KSA9PlxuICAgICAgICBnZXRDb29yZHMoc3ViSXRlbSwgaSwgaW5kZXgsIGRlcHRoIC0gMSlcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGF2ZXJhZ2UgPVxuICAgICAgaXRlbS5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIHBhcnNlRmxvYXQoZW50cnkuc3RhdGUpLCAwKSAvXG4gICAgICBpdGVtLmxlbmd0aDtcblxuICAgIGNvbnN0IHggPSB4UmF0aW8gKiAoaSArIG9mZnNldCAvIDYpICsgbWFyZ2luO1xuICAgIGNvbnN0IHkgPSBoZWlnaHQgLSAoYXZlcmFnZSAtIG1pbikgLyB5UmF0aW8gKyBtYXJnaW4gKiAyO1xuICAgIHJldHVybiBjb29yZHMucHVzaChbeCwgeV0pO1xuICB9O1xuXG4gIGhpc3RvcnkuZm9yRWFjaCgoaXRlbSwgaSkgPT4gZ2V0Q29vcmRzKGl0ZW0sIGksIDAsIGRldGFpbCkpO1xuICBpZiAoY29vcmRzLmxlbmd0aCA9PT0gMSkge1xuICAgIGNvb3Jkc1sxXSA9IFt3aWR0aCArIG1hcmdpbiwgY29vcmRzWzBdWzFdXTtcbiAgfVxuXG4gIGNvb3Jkcy5wdXNoKFt3aWR0aCArIG1hcmdpbiwgY29vcmRzW2Nvb3Jkcy5sZW5ndGggLSAxXVsxXV0pO1xuICByZXR1cm4gY29vcmRzO1xufTtcblxuY29uc3QgY29vcmRpbmF0ZXMgPSAoXG4gIGhpc3Rvcnk6IGFueSxcbiAgaG91cnM6IG51bWJlcixcbiAgd2lkdGg6IG51bWJlcixcbiAgZGV0YWlsOiBudW1iZXJcbik6IG51bWJlcltdW10gPT4ge1xuICBoaXN0b3J5LmZvckVhY2goKGl0ZW0pID0+IChpdGVtLnN0YXRlID0gTnVtYmVyKGl0ZW0uc3RhdGUpKSk7XG4gIGhpc3RvcnkgPSBoaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIU51bWJlci5pc05hTihpdGVtLnN0YXRlKSk7XG5cbiAgY29uc3QgbWluID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgaGlzdG9yeS5tYXAoKGl0ZW0pID0+IGl0ZW0uc3RhdGUpKTtcbiAgY29uc3QgbWF4ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgaGlzdG9yeS5tYXAoKGl0ZW0pID0+IGl0ZW0uc3RhdGUpKTtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgY29uc3QgcmVkdWNlID0gKHJlcywgaXRlbSwgcG9pbnQpID0+IHtcbiAgICBjb25zdCBhZ2UgPSBub3cgLSBuZXcgRGF0ZShpdGVtLmxhc3RfY2hhbmdlZCkuZ2V0VGltZSgpO1xuXG4gICAgbGV0IGtleSA9IE1hdGguYWJzKGFnZSAvICgxMDAwICogMzYwMCkgLSBob3Vycyk7XG4gICAgaWYgKHBvaW50KSB7XG4gICAgICBrZXkgPSAoa2V5IC0gTWF0aC5mbG9vcihrZXkpKSAqIDYwO1xuICAgICAga2V5ID0gTnVtYmVyKChNYXRoLnJvdW5kKGtleSAvIDEwKSAqIDEwKS50b1N0cmluZygpWzBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gTWF0aC5mbG9vcihrZXkpO1xuICAgIH1cbiAgICBpZiAoIXJlc1trZXldKSB7XG4gICAgICByZXNba2V5XSA9IFtdO1xuICAgIH1cbiAgICByZXNba2V5XS5wdXNoKGl0ZW0pO1xuICAgIHJldHVybiByZXM7XG4gIH07XG5cbiAgaGlzdG9yeSA9IGhpc3RvcnkucmVkdWNlKChyZXMsIGl0ZW0pID0+IHJlZHVjZShyZXMsIGl0ZW0sIGZhbHNlKSwgW10pO1xuICBpZiAoZGV0YWlsID4gMSkge1xuICAgIGhpc3RvcnkgPSBoaXN0b3J5Lm1hcCgoZW50cnkpID0+XG4gICAgICBlbnRyeS5yZWR1Y2UoKHJlcywgaXRlbSkgPT4gcmVkdWNlKHJlcywgaXRlbSwgdHJ1ZSksIFtdKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGNhbGNQb2ludHMoaGlzdG9yeSwgaG91cnMsIHdpZHRoLCBkZXRhaWwsIG1pbiwgbWF4KTtcbn07XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXNlbnNvci1jYXJkXCIpXG5jbGFzcyBIdWlTZW5zb3JDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1zZW5zb3ItY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLXNlbnNvci1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1zZW5zb3ItY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4geyBlbnRpdHk6IFwiXCIgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTZW5zb3JDYXJkQ29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2hpc3Rvcnk/OiBhbnk7XG5cbiAgcHJpdmF0ZSBfZGF0ZT86IERhdGU7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNlbnNvckNhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy5lbnRpdHkgfHwgY29uZmlnLmVudGl0eS5zcGxpdChcIi5cIilbMF0gIT09IFwic2Vuc29yXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNwZWNpZnkgYW4gZW50aXR5IGZyb20gd2l0aGluIHRoZSBzZW5zb3IgZG9tYWluLlwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkQ29uZmlnID0ge1xuICAgICAgZGV0YWlsOiAxLFxuICAgICAgdGhlbWU6IFwiZGVmYXVsdFwiLFxuICAgICAgaG91cnNfdG9fc2hvdzogMjQsXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcblxuICAgIGNhcmRDb25maWcuaG91cnNfdG9fc2hvdyA9IE51bWJlcihjYXJkQ29uZmlnLmhvdXJzX3RvX3Nob3cpO1xuICAgIGNhcmRDb25maWcuZGV0YWlsID1cbiAgICAgIGNhcmRDb25maWcuZGV0YWlsID09PSAxIHx8IGNhcmRDb25maWcuZGV0YWlsID09PSAyXG4gICAgICAgID8gY2FyZENvbmZpZy5kZXRhaWxcbiAgICAgICAgOiAxO1xuXG4gICAgdGhpcy5fY29uZmlnID0gY2FyZENvbmZpZztcbiAgfVxuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGxldCBncmFwaDtcblxuICAgIGlmIChzdGF0ZU9iaiAmJiB0aGlzLl9jb25maWcuZ3JhcGggPT09IFwibGluZVwiKSB7XG4gICAgICBpZiAoIXN0YXRlT2JqLmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudCkge1xuICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICAgID5FbnRpdHk6ICR7dGhpcy5fY29uZmlnLmVudGl0eX0gLSBIYXMgbm8gVW5pdCBvZiBNZWFzdXJlbWVudCBhbmRcbiAgICAgICAgICAgIHRoZXJlZm9yZSBjYW4gbm90IGRpc3BsYXkgYSBsaW5lIGdyYXBoLjwvaHVpLXdhcm5pbmdcbiAgICAgICAgICA+XG4gICAgICAgIGA7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9oaXN0b3J5KSB7XG4gICAgICAgIGdyYXBoID0gc3ZnYFxuICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgNTAwIDEwMFwiPjwvc3ZnPlxuICAgICAgICBgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ3JhcGggPSBzdmdgXG4gICAgICAgICAgPHN2ZyB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCA1MDAgMTAwXCI+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICBkPVwiJHt0aGlzLl9oaXN0b3J5fVwiXG4gICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgc3Ryb2tlPVwidmFyKC0tYWNjZW50LWNvbG9yKVwiXG4gICAgICAgICAgICAgIHN0cm9rZS13aWR0aD1cIjVcIlxuICAgICAgICAgICAgICBzdHJva2UtbGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgYDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZ3JhcGggPSBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIEBjbGljaz1cIiR7dGhpcy5faGFuZGxlQ2xpY2t9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICAgIC5pY29uPVwiJHt0aGlzLl9jb25maWcuaWNvbiB8fCBzdGF0ZUljb24oc3RhdGVPYmopfVwiXG4gICAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmFtZVwiXG4gICAgICAgICAgICAgID4ke3RoaXMuX2NvbmZpZy5uYW1lIHx8IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfTwvc3BhblxuICAgICAgICAgICAgPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaW5mb1wiPlxuICAgICAgICAgIDxzcGFuIGlkPVwidmFsdWVcIj4ke3N0YXRlT2JqLnN0YXRlfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBpZD1cIm1lYXN1cmVtZW50XCJcbiAgICAgICAgICAgID4ke3RoaXMuX2NvbmZpZy51bml0IHx8XG4gICAgICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudH08L3NwYW5cbiAgICAgICAgICA+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JhcGhcIj48ZGl2PiR7Z3JhcGh9PC9kaXY+PC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9oaXN0b3J5XCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8IHRoaXMuX2NvbmZpZy5ncmFwaCAhPT0gXCJsaW5lXCIgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuICAgIGlmICghb2xkSGFzcyB8fCBvbGRIYXNzLnRoZW1lcyAhPT0gdGhpcy5oYXNzLnRoZW1lcykge1xuICAgICAgYXBwbHlUaGVtZXNPbkVsZW1lbnQodGhpcywgdGhpcy5oYXNzLnRoZW1lcywgdGhpcy5fY29uZmlnIS50aGVtZSk7XG4gICAgfVxuXG4gICAgY29uc3QgbWludXRlID0gNjAwMDA7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpKSB7XG4gICAgICB0aGlzLl9nZXRIaXN0b3J5KCk7XG4gICAgfSBlbHNlIGlmIChEYXRlLm5vdygpIC0gdGhpcy5fZGF0ZSEuZ2V0VGltZSgpID49IG1pbnV0ZSkge1xuICAgICAgdGhpcy5fZ2V0SGlzdG9yeSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIGZpcmVFdmVudCh0aGlzLCBcImhhc3MtbW9yZS1pbmZvXCIsIHsgZW50aXR5SWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5IH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0SGlzdG9yeSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIHN0YXJ0VGltZS5zZXRIb3VycyhlbmRUaW1lLmdldEhvdXJzKCkgLSB0aGlzLl9jb25maWchLmhvdXJzX3RvX3Nob3chKTtcblxuICAgIGNvbnN0IHN0YXRlSGlzdG9yeSA9IGF3YWl0IGZldGNoUmVjZW50KFxuICAgICAgdGhpcy5oYXNzLFxuICAgICAgdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChzdGF0ZUhpc3RvcnkubGVuZ3RoIDwgMSB8fCBzdGF0ZUhpc3RvcnlbMF0ubGVuZ3RoIDwgMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvb3JkcyA9IGNvb3JkaW5hdGVzKFxuICAgICAgc3RhdGVIaXN0b3J5WzBdLFxuICAgICAgdGhpcy5fY29uZmlnIS5ob3Vyc190b19zaG93ISxcbiAgICAgIDUwMCxcbiAgICAgIHRoaXMuX2NvbmZpZyEuZGV0YWlsIVxuICAgICk7XG5cbiAgICB0aGlzLl9oaXN0b3J5ID0gZ2V0UGF0aChjb29yZHMpO1xuICAgIHRoaXMuX2RhdGUgPSBuZXcgRGF0ZSgpO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5mbGV4IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciB7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC5uYW1lIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgICAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbWF4LWhlaWdodDogMS40cmVtO1xuICAgICAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMTtcbiAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XG4gICAgICB9XG5cbiAgICAgIC5pY29uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWl0ZW0taWNvbi1jb2xvciwgIzQ0NzM5ZSk7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgZmxleDogMCAwIDQwcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvIHtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBtYXJnaW46IDE2cHggMCAxNnB4IDhweDtcbiAgICAgIH1cblxuICAgICAgI3ZhbHVlIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxZW07XG4gICAgICAgIG1hcmdpbi1yaWdodDogNHB4O1xuICAgICAgfVxuXG4gICAgICAjbWVhc3VyZW1lbnQge1xuICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBmb250LXNpemU6IDEuM3JlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuMmVtO1xuICAgICAgICBtYXJnaW4tdG9wOiAwLjFlbTtcbiAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICAgICAgfVxuXG4gICAgICAuZ3JhcGgge1xuICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIC5ncmFwaCA+IGRpdiB7XG4gICAgICAgIGFsaWduLXNlbGY6IGZsZXgtZW5kO1xuICAgICAgICBtYXJnaW46IGF1dG8gOHB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zZW5zb3ItY2FyZFwiOiBIdWlTZW5zb3JDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IHJlcGVhdCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3JlcGVhdFwiO1xuaW1wb3J0IHsgUGFwZXJJbnB1dEVsZW1lbnQgfSBmcm9tIFwiQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWNoZWNrYm94L3BhcGVyLWNoZWNrYm94XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQge1xuICBmZXRjaEl0ZW1zLFxuICB1cGRhdGVJdGVtLFxuICBTaG9wcGluZ0xpc3RJdGVtLFxuICBjbGVhckl0ZW1zLFxuICBhZGRJdGVtLFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9zaG9wcGluZy1saXN0XCI7XG5pbXBvcnQgeyBTaG9wcGluZ0xpc3RDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktc2hvcHBpbmctbGlzdC1jYXJkXCIpXG5jbGFzcyBIdWlTaG9wcGluZ0xpc3RDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1zaG9wcGluZy1saXN0LWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktc2hvcHBpbmctbGlzdC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktc2hvcHBpbmctbGlzdC1jYXJkLWVkaXRvclwiKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTaG9wcGluZ0xpc3RDYXJkQ29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX3VuY2hlY2tlZEl0ZW1zPzogU2hvcHBpbmdMaXN0SXRlbVtdO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NoZWNrZWRJdGVtcz86IFNob3BwaW5nTGlzdEl0ZW1bXTtcblxuICBwcml2YXRlIF91bnN1YkV2ZW50cz86IFByb21pc2U8KCkgPT4gUHJvbWlzZTx2b2lkPj47XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLl9jb25maWcgPyAodGhpcy5fY29uZmlnLnRpdGxlID8gMSA6IDApIDogMCkgKyAzO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNob3BwaW5nTGlzdENhcmRDb25maWcpOiB2b2lkIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fdW5jaGVja2VkSXRlbXMgPSBbXTtcbiAgICB0aGlzLl9jaGVja2VkSXRlbXMgPSBbXTtcbiAgICB0aGlzLl9mZXRjaERhdGEoKTtcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuXG4gICAgaWYgKHRoaXMuaGFzcykge1xuICAgICAgdGhpcy5fdW5zdWJFdmVudHMgPSB0aGlzLmhhc3MuY29ubmVjdGlvbi5zdWJzY3JpYmVFdmVudHMoXG4gICAgICAgICgpID0+IHRoaXMuX2ZldGNoRGF0YSgpLFxuICAgICAgICBcInNob3BwaW5nX2xpc3RfdXBkYXRlZFwiXG4gICAgICApO1xuICAgICAgdGhpcy5fZmV0Y2hEYXRhKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG5cbiAgICBpZiAodGhpcy5fdW5zdWJFdmVudHMpIHtcbiAgICAgIHRoaXMuX3Vuc3ViRXZlbnRzLnRoZW4oKHVuc3ViKSA9PiB1bnN1YigpKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIC5oZWFkZXI9XCIke3RoaXMuX2NvbmZpZy50aXRsZX1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFkZFJvd1wiPlxuICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICBjbGFzcz1cImFkZEJ1dHRvblwiXG4gICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2FkZEl0ZW19XCJcbiAgICAgICAgICAgIGljb249XCJoYXNzOnBsdXNcIlxuICAgICAgICAgICAgLnRpdGxlPVwiJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnNob3BwaW5nLWxpc3QuYWRkX2l0ZW1cIlxuICAgICAgICAgICAgKX1cIlxuICAgICAgICAgID5cbiAgICAgICAgICA8L2hhLWljb24+XG4gICAgICAgICAgPHBhcGVyLWl0ZW0tYm9keT5cbiAgICAgICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgICAgICBuby1sYWJlbC1mbG9hdFxuICAgICAgICAgICAgICBjbGFzcz1cImFkZEJveFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuY2FyZHMuc2hvcHBpbmctbGlzdC5hZGRfaXRlbVwiXG4gICAgICAgICAgICAgICl9XCJcbiAgICAgICAgICAgICAgQGtleWRvd249XCIke3RoaXMuX2FkZEtleVByZXNzfVwiXG4gICAgICAgICAgICA+PC9wYXBlci1pbnB1dD5cbiAgICAgICAgICA8L3BhcGVyLWl0ZW0tYm9keT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICR7cmVwZWF0KFxuICAgICAgICAgIHRoaXMuX3VuY2hlY2tlZEl0ZW1zISxcbiAgICAgICAgICAoaXRlbSkgPT4gaXRlbS5pZCxcbiAgICAgICAgICAoaXRlbSwgaW5kZXgpID0+XG4gICAgICAgICAgICBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdFJvd1wiPlxuICAgICAgICAgICAgICAgIDxwYXBlci1jaGVja2JveFxuICAgICAgICAgICAgICAgICAgc2xvdD1cIml0ZW0taWNvblwiXG4gICAgICAgICAgICAgICAgICBpZD1cIiR7aW5kZXh9XCJcbiAgICAgICAgICAgICAgICAgID9jaGVja2VkPVwiJHtpdGVtLmNvbXBsZXRlfVwiXG4gICAgICAgICAgICAgICAgICAuaXRlbUlkPVwiJHtpdGVtLmlkfVwiXG4gICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2NvbXBsZXRlSXRlbX1cIlxuICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICA+PC9wYXBlci1jaGVja2JveD5cbiAgICAgICAgICAgICAgICA8cGFwZXItaXRlbS1ib2R5PlxuICAgICAgICAgICAgICAgICAgPHBhcGVyLWlucHV0XG4gICAgICAgICAgICAgICAgICAgIG5vLWxhYmVsLWZsb2F0XG4gICAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7aXRlbS5uYW1lfVwiXG4gICAgICAgICAgICAgICAgICAgIC5pdGVtSWQ9XCIke2l0ZW0uaWR9XCJcbiAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT1cIiR7dGhpcy5fc2F2ZUVkaXR9XCJcbiAgICAgICAgICAgICAgICAgID48L3BhcGVyLWlucHV0PlxuICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbS1ib2R5PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgKX1cbiAgICAgICAgJHt0aGlzLl9jaGVja2VkSXRlbXMhLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2VkXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnNob3BwaW5nLWxpc3QuY2hlY2tlZF9pdGVtc1wiXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjbGVhcmFsbFwiXG4gICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2NsZWFySXRlbXN9XCJcbiAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOm5vdGlmaWNhdGlvbi1jbGVhci1hbGxcIlxuICAgICAgICAgICAgICAgICAgLnRpdGxlPVwiJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnNob3BwaW5nLWxpc3QuY2xlYXJfaXRlbXNcIlxuICAgICAgICAgICAgICAgICAgKX1cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2hhLWljb24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAke3JlcGVhdChcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja2VkSXRlbXMhLFxuICAgICAgICAgICAgICAgIChpdGVtKSA9PiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgIChpdGVtLCBpbmRleCkgPT5cbiAgICAgICAgICAgICAgICAgIGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlZGl0Um93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWNoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICBzbG90PVwiaXRlbS1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiJHtpbmRleH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgP2NoZWNrZWQ9XCIke2l0ZW0uY29tcGxldGV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pdGVtSWQ9XCIke2l0ZW0uaWR9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fY29tcGxldGVJdGVtfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWNoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXBlci1pdGVtLWJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm8tbGFiZWwtZmxvYXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnZhbHVlPVwiJHtpdGVtLm5hbWV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLml0ZW1JZD1cIiR7aXRlbS5pZH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBAY2hhbmdlPVwiJHt0aGlzLl9zYXZlRWRpdH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvcGFwZXItaW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9wYXBlci1pdGVtLWJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogXCJcIn1cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmVkaXRSb3csXG4gICAgICAuYWRkUm93IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgIH1cblxuICAgICAgLmFkZEJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDlweCAxNXB4IDExcHggMTVweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1pdGVtLWJvZHkge1xuICAgICAgICB3aWR0aDogNzUlO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1jaGVja2JveCB7XG4gICAgICAgIHBhZGRpbmc6IDExcHggMTFweCAxMXB4IDE4cHg7XG4gICAgICB9XG5cbiAgICAgIHBhcGVyLWlucHV0IHtcbiAgICAgICAgLS1wYXBlci1pbnB1dC1jb250YWluZXItdW5kZXJsaW5lOiB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci11bmRlcmxpbmUtZm9jdXM6IHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXVuZGVybGluZS1kaXNhYmxlZDoge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB0b3A6IDFweDtcbiAgICAgIH1cblxuICAgICAgLmNoZWNrZWQge1xuICAgICAgICBtYXJnaW4tbGVmdDogMTdweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTFweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTFweDtcbiAgICAgIH1cblxuICAgICAgLmxhYmVsIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuZGl2aWRlciB7XG4gICAgICAgIGhlaWdodDogMXB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuY2xlYXJhbGwge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDNweDtcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYWRkUm93ID4gaGEtaWNvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2ZldGNoRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5oYXNzKSB7XG4gICAgICBjb25zdCBjaGVja2VkSXRlbXM6IFNob3BwaW5nTGlzdEl0ZW1bXSA9IFtdO1xuICAgICAgY29uc3QgdW5jaGVja2VkSXRlbXM6IFNob3BwaW5nTGlzdEl0ZW1bXSA9IFtdO1xuICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBmZXRjaEl0ZW1zKHRoaXMuaGFzcyk7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBpdGVtcykge1xuICAgICAgICBpZiAoaXRlbXNba2V5XS5jb21wbGV0ZSkge1xuICAgICAgICAgIGNoZWNrZWRJdGVtcy5wdXNoKGl0ZW1zW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVuY2hlY2tlZEl0ZW1zLnB1c2goaXRlbXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2NoZWNrZWRJdGVtcyA9IGNoZWNrZWRJdGVtcztcbiAgICAgIHRoaXMuX3VuY2hlY2tlZEl0ZW1zID0gdW5jaGVja2VkSXRlbXM7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY29tcGxldGVJdGVtKGV2KTogdm9pZCB7XG4gICAgdXBkYXRlSXRlbSh0aGlzLmhhc3MhLCBldi50YXJnZXQuaXRlbUlkLCB7XG4gICAgICBjb21wbGV0ZTogZXYudGFyZ2V0LmNoZWNrZWQsXG4gICAgfSkuY2F0Y2goKCkgPT4gdGhpcy5fZmV0Y2hEYXRhKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2F2ZUVkaXQoZXYpOiB2b2lkIHtcbiAgICB1cGRhdGVJdGVtKHRoaXMuaGFzcyEsIGV2LnRhcmdldC5pdGVtSWQsIHtcbiAgICAgIG5hbWU6IGV2LnRhcmdldC52YWx1ZSxcbiAgICB9KS5jYXRjaCgoKSA9PiB0aGlzLl9mZXRjaERhdGEoKSk7XG5cbiAgICBldi50YXJnZXQuYmx1cigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJJdGVtcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNzKSB7XG4gICAgICBjbGVhckl0ZW1zKHRoaXMuaGFzcykuY2F0Y2goKCkgPT4gdGhpcy5fZmV0Y2hEYXRhKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9uZXdJdGVtKCk6IFBhcGVySW5wdXRFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwiLmFkZEJveFwiKSBhcyBQYXBlcklucHV0RWxlbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZEl0ZW0oZXYpOiB2b2lkIHtcbiAgICBjb25zdCBuZXdJdGVtID0gdGhpcy5fbmV3SXRlbTtcblxuICAgIGlmIChuZXdJdGVtLnZhbHVlIS5sZW5ndGggPiAwKSB7XG4gICAgICBhZGRJdGVtKHRoaXMuaGFzcyEsIG5ld0l0ZW0udmFsdWUhKS5jYXRjaCgoKSA9PiB0aGlzLl9mZXRjaERhdGEoKSk7XG4gICAgfVxuXG4gICAgbmV3SXRlbS52YWx1ZSA9IFwiXCI7XG4gICAgaWYgKGV2KSB7XG4gICAgICBuZXdJdGVtLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfYWRkS2V5UHJlc3MoZXYpOiB2b2lkIHtcbiAgICBpZiAoZXYua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIHRoaXMuX2FkZEl0ZW0obnVsbCk7XG4gICAgfVxuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktc2hvcHBpbmctbGlzdC1jYXJkXCI6IEh1aVNob3BwaW5nTGlzdENhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IGh0bWwsIExpdEVsZW1lbnQsIFRlbXBsYXRlUmVzdWx0LCBDU1NSZXN1bHQsIGNzcyB9IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVDYXJkRWxlbWVudCB9IGZyb20gXCIuLi9jb21tb24vY3JlYXRlLWNhcmQtZWxlbWVudFwiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmRDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgU3RhY2tDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEh1aVN0YWNrQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF9jb25maWc6IHt9LFxuICAgIH07XG4gIH1cblxuICBzZXQgaGFzcyhoYXNzOiBIb21lQXNzaXN0YW50KSB7XG4gICAgdGhpcy5faGFzcyA9IGhhc3M7XG5cbiAgICBpZiAoIXRoaXMuX2NhcmRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuX2NhcmRzKSB7XG4gICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgIH1cbiAgfVxuICBwcm90ZWN0ZWQgX2NhcmRzPzogTG92ZWxhY2VDYXJkW107XG4gIHByaXZhdGUgX2NvbmZpZz86IFN0YWNrQ2FyZENvbmZpZztcbiAgcHJpdmF0ZSBfaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgcHVibGljIGFic3RyYWN0IGdldENhcmRTaXplKCk6IG51bWJlcjtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU3RhY2tDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5jYXJkcyB8fCAhQXJyYXkuaXNBcnJheShjb25maWcuY2FyZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYXJkIGNvbmZpZyBpbmNvcnJlY3RcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9jYXJkcyA9IGNvbmZpZy5jYXJkcy5tYXAoKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9jcmVhdGVDYXJkRWxlbWVudChjYXJkKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5yZW5kZXJTdHlsZSgpfVxuICAgICAgJHt0aGlzLl9jb25maWcudGl0bGVcbiAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+JHt0aGlzLl9jb25maWcudGl0bGV9PC9kaXY+XG4gICAgICAgICAgYFxuICAgICAgICA6IFwiXCJ9XG4gICAgICA8ZGl2IGlkPVwicm9vdFwiPiR7dGhpcy5fY2FyZHN9PC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXJTdHlsZSgpOiBUZW1wbGF0ZVJlc3VsdDtcblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAuY2FyZC1oZWFkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0taGEtY2FyZC1oZWFkZXItY29sb3IsIC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWhhLWNhcmQtaGVhZGVyLWZvbnQtZmFtaWx5LCBpbmhlcml0KTtcbiAgICAgICAgZm9udC1zaXplOiB2YXIoLS1oYS1jYXJkLWhlYWRlci1mb250LXNpemUsIDI0cHgpO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogLTAuMDEyZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAzMnB4O1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgcGFkZGluZzogMjRweCAxNnB4IDE2cHg7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUNhcmRFbGVtZW50KGNhcmRDb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkRWxlbWVudChjYXJkQ29uZmlnKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gICAgaWYgKHRoaXMuX2hhc3MpIHtcbiAgICAgIGVsZW1lbnQuaGFzcyA9IHRoaXMuX2hhc3M7XG4gICAgfVxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibGwtcmVidWlsZFwiLFxuICAgICAgKGV2KSA9PiB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLl9yZWJ1aWxkQ2FyZChlbGVtZW50LCBjYXJkQ29uZmlnKTtcbiAgICAgIH0sXG4gICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9yZWJ1aWxkQ2FyZChcbiAgICBjYXJkRWxUb1JlcGxhY2U6IExvdmVsYWNlQ2FyZCxcbiAgICBjb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZ1xuICApOiB2b2lkIHtcbiAgICBjb25zdCBuZXdDYXJkRWwgPSB0aGlzLl9jcmVhdGVDYXJkRWxlbWVudChjb25maWcpO1xuICAgIGNhcmRFbFRvUmVwbGFjZS5wYXJlbnRFbGVtZW50IS5yZXBsYWNlQ2hpbGQobmV3Q2FyZEVsLCBjYXJkRWxUb1JlcGxhY2UpO1xuICAgIHRoaXMuX2NhcmRzID0gdGhpcy5fY2FyZHMhLm1hcCgoY3VyQ2FyZEVsKSA9PlxuICAgICAgY3VyQ2FyZEVsID09PSBjYXJkRWxUb1JlcGxhY2UgPyBuZXdDYXJkRWwgOiBjdXJDYXJkRWxcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1pY29uLWJ1dHRvbi9wYXBlci1pY29uLWJ1dHRvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcblxuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGxvYWRSb3VuZHNsaWRlciB9IGZyb20gXCIuLi8uLi8uLi9yZXNvdXJjZXMvanF1ZXJ5LnJvdW5kc2xpZGVyLm9uZGVtYW5kXCI7XG5pbXBvcnQgeyBVTklUX0YgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBUaGVybW9zdGF0Q2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQge1xuICBDbGltYXRlRW50aXR5LFxuICBIdmFjTW9kZSxcbiAgY29tcGFyZUNsaW1hdGVIdmFjTW9kZXMsXG4gIENMSU1BVEVfUFJFU0VUX05PTkUsXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2NsaW1hdGVcIjtcblxuY29uc3QgdGhlcm1vc3RhdENvbmZpZyA9IHtcbiAgcmFkaXVzOiAxNTAsXG4gIGNpcmNsZVNoYXBlOiBcInBpZVwiLFxuICBzdGFydEFuZ2xlOiAzMTUsXG4gIHdpZHRoOiA1LFxuICBsaW5lQ2FwOiBcInJvdW5kXCIsXG4gIGhhbmRsZVNpemU6IFwiKzEwXCIsXG4gIHNob3dUb29sdGlwOiBmYWxzZSxcbiAgYW5pbWF0aW9uOiBmYWxzZSxcbn07XG5cbmNvbnN0IG1vZGVJY29uczogeyBbbW9kZSBpbiBIdmFjTW9kZV06IHN0cmluZyB9ID0ge1xuICBhdXRvOiBcImhhc3M6Y2FsZW5kYXItcmVwZWF0XCIsXG4gIGhlYXRfY29vbDogXCJoYXNzOmF1dG9yZW5ld1wiLFxuICBoZWF0OiBcImhhc3M6ZmlyZVwiLFxuICBjb29sOiBcImhhc3M6c25vd2ZsYWtlXCIsXG4gIG9mZjogXCJoYXNzOnBvd2VyXCIsXG4gIGZhbl9vbmx5OiBcImhhc3M6ZmFuXCIsXG4gIGRyeTogXCJoYXNzOndhdGVyLXBlcmNlbnRcIixcbn07XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXRoZXJtb3N0YXQtY2FyZFwiKVxuZXhwb3J0IGNsYXNzIEh1aVRoZXJtb3N0YXRDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS10aGVybW9zdGF0LWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS10aGVybW9zdGF0LWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXRoZXJtb3N0YXQtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4geyBlbnRpdHk6IFwiXCIgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBUaGVybW9zdGF0Q2FyZENvbmZpZztcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9yb3VuZFNsaWRlclN0eWxlPzogVGVtcGxhdGVSZXN1bHQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfalF1ZXJ5PzogYW55O1xuXG4gIHByaXZhdGUgX2Jyb2FkQ2FyZD86IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBfbG9hZGVkPzogYm9vbGVhbjtcblxuICBwcml2YXRlIF91cGRhdGVkPzogYm9vbGVhbjtcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gNDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBUaGVybW9zdGF0Q2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0eSB8fCBjb25maWcuZW50aXR5LnNwbGl0KFwiLlwiKVswXSAhPT0gXCJjbGltYXRlXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNwZWNpZnkgYW4gZW50aXR5IGZyb20gd2l0aGluIHRoZSBjbGltYXRlIGRvbWFpbi5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0geyB0aGVtZTogXCJkZWZhdWx0XCIsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgaWYgKHRoaXMuX3VwZGF0ZWQgJiYgIXRoaXMuX2xvYWRlZCkge1xuICAgICAgdGhpcy5faW5pdGlhbExvYWQoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZSA9IHN0YXRlT2JqLnN0YXRlIGluIG1vZGVJY29ucyA/IHN0YXRlT2JqLnN0YXRlIDogXCJ1bmtub3duLW1vZGVcIjtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5yZW5kZXJTdHlsZSgpfVxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHtcbiAgICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgICAgbGFyZ2U6IHRoaXMuX2Jyb2FkQ2FyZCEsXG4gICAgICAgICAgc21hbGw6ICF0aGlzLl9icm9hZENhcmQsXG4gICAgICAgIH0pfVwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgaWQ9XCJyb290XCI+XG4gICAgICAgICAgPHBhcGVyLWljb24tYnV0dG9uXG4gICAgICAgICAgICBpY29uPVwiaGFzczpkb3RzLXZlcnRpY2FsXCJcbiAgICAgICAgICAgIGNsYXNzPVwibW9yZS1pbmZvXCJcbiAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5faGFuZGxlTW9yZUluZm99XCJcbiAgICAgICAgICA+PC9wYXBlci1pY29uLWJ1dHRvbj5cbiAgICAgICAgICA8ZGl2IGlkPVwidGhlcm1vc3RhdFwiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgaWQ9XCJ0b29sdGlwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj5cbiAgICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN1cnJlbnQtdGVtcGVyYXR1cmVcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjdXJyZW50LXRlbXBlcmF0dXJlLXRleHRcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuY3VycmVudF90ZW1wZXJhdHVyZX1cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuY3VycmVudF90ZW1wZXJhdHVyZVxuICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidW9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID4ke3RoaXMuaGFzcy5jb25maWcudW5pdF9zeXN0ZW0udGVtcGVyYXR1cmV9PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNsaW1hdGUtaW5mb1wiPlxuICAgICAgICAgICAgICA8ZGl2IGlkPVwic2V0LXRlbXBlcmF0dXJlXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LW1vZGVcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuaHZhY19hY3Rpb25cbiAgICAgICAgICAgICAgICAgID8gdGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICBgc3RhdGVfYXR0cmlidXRlcy5jbGltYXRlLmh2YWNfYWN0aW9uLiR7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLmh2YWNfYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgfWBcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgOiB0aGlzLmhhc3MhLmxvY2FsaXplKGBzdGF0ZS5jbGltYXRlLiR7c3RhdGVPYmouc3RhdGV9YCl9XG4gICAgICAgICAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLnByZXNldF9tb2RlICYmXG4gICAgICAgICAgICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy5wcmVzZXRfbW9kZSAhPT0gQ0xJTUFURV9QUkVTRVRfTk9ORVxuICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgIC1cbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICBgc3RhdGVfYXR0cmlidXRlcy5jbGltYXRlLnByZXNldF9tb2RlLiR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMucHJlc2V0X21vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gXG4gICAgICAgICAgICAgICAgICAgICAgKSB8fCBzdGF0ZU9iai5hdHRyaWJ1dGVzLnByZXNldF9tb2RlfVxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kZXNcIj5cbiAgICAgICAgICAgICAgICAkeyhzdGF0ZU9iai5hdHRyaWJ1dGVzLmh2YWNfbW9kZXMgfHwgW10pXG4gICAgICAgICAgICAgICAgICAuY29uY2F0KClcbiAgICAgICAgICAgICAgICAgIC5zb3J0KGNvbXBhcmVDbGltYXRlSHZhY01vZGVzKVxuICAgICAgICAgICAgICAgICAgLm1hcCgobW9kZUl0ZW0pID0+IHRoaXMuX3JlbmRlckljb24obW9kZUl0ZW0sIG1vZGUpKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlZCA9IHRydWU7XG4gICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQgJiYgIXRoaXMuX2xvYWRlZCkge1xuICAgICAgdGhpcy5faW5pdGlhbExvYWQoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MgfHwgIWNoYW5nZWRQcm9wcy5oYXMoXCJoYXNzXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIW9sZEhhc3MgfHwgb2xkSGFzcy50aGVtZXMgIT09IHRoaXMuaGFzcy50aGVtZXMpIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KHRoaXMsIHRoaXMuaGFzcy50aGVtZXMsIHRoaXMuX2NvbmZpZy50aGVtZSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5falF1ZXJ5ICYmXG4gICAgICAvLyBJZiBqUXVlcnkgY2hhbmdlZCwgd2UganVzdCByZW5kZXJlZCBpbiBmaXJzdFVwZGF0ZWRcbiAgICAgICFjaGFuZ2VkUHJvcHMuaGFzKFwiX2pRdWVyeVwiKSAmJlxuICAgICAgKCFvbGRIYXNzIHx8IG9sZEhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldICE9PSBzdGF0ZU9iailcbiAgICApIHtcbiAgICAgIGNvbnN0IFtzbGlkZXJWYWx1ZSwgdWlWYWx1ZSwgc2xpZGVyVHlwZV0gPSB0aGlzLl9nZW5TbGlkZXJWYWx1ZShzdGF0ZU9iaik7XG5cbiAgICAgIHRoaXMuX2pRdWVyeShcIiN0aGVybW9zdGF0XCIsIHRoaXMuc2hhZG93Um9vdCkucm91bmRTbGlkZXIoe1xuICAgICAgICBzbGlkZXJUeXBlLFxuICAgICAgICB2YWx1ZTogc2xpZGVyVmFsdWUsXG4gICAgICAgIGRpc2FibGVkOiBzbGlkZXJWYWx1ZSA9PT0gbnVsbCxcbiAgICAgICAgbWluOiBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1pbl90ZW1wLFxuICAgICAgICBtYXg6IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWF4X3RlbXAsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3VwZGF0ZVNldFRlbXAodWlWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX3N0ZXBTaXplKCk6IG51bWJlciB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV0gYXMgQ2xpbWF0ZUVudGl0eTtcblxuICAgIGlmIChzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX3N0ZXApIHtcbiAgICAgIHJldHVybiBzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX3N0ZXA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmhhc3MhLmNvbmZpZy51bml0X3N5c3RlbS50ZW1wZXJhdHVyZSA9PT0gVU5JVF9GID8gMSA6IDAuNTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2luaXRpYWxMb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICAvLyBDYXJkIHdpbGwgcmVxdWlyZSByZWZyZXNoIHRvIHdvcmsgYWdhaW5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9sb2FkZWQgPSB0cnVlO1xuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDb21wbGV0ZTtcblxuICAgIGxldCByYWRpdXMgPSB0aGlzLmNsaWVudFdpZHRoIC8gMy4yO1xuICAgIHRoaXMuX2Jyb2FkQ2FyZCA9IHRoaXMuY2xpZW50V2lkdGggPiAzOTA7XG5cbiAgICBpZiAocmFkaXVzID09PSAwKSB7XG4gICAgICByYWRpdXMgPSAxMDA7XG4gICAgfVxuXG4gICAgKHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI3RoZXJtb3N0YXRcIlxuICAgICkgYXMgSFRNTEVsZW1lbnQpIS5zdHlsZS5oZWlnaHQgPSByYWRpdXMgKiAyICsgXCJweFwiO1xuXG4gICAgY29uc3QgbG9hZGVkID0gYXdhaXQgbG9hZFJvdW5kc2xpZGVyKCk7XG5cbiAgICB0aGlzLl9yb3VuZFNsaWRlclN0eWxlID0gbG9hZGVkLnJvdW5kU2xpZGVyU3R5bGU7XG4gICAgdGhpcy5falF1ZXJ5ID0gbG9hZGVkLmpRdWVyeTtcblxuICAgIGNvbnN0IFtzbGlkZXJWYWx1ZSwgdWlWYWx1ZSwgc2xpZGVyVHlwZV0gPSB0aGlzLl9nZW5TbGlkZXJWYWx1ZShzdGF0ZU9iaik7XG5cbiAgICB0aGlzLl9qUXVlcnkoXCIjdGhlcm1vc3RhdFwiLCB0aGlzLnNoYWRvd1Jvb3QpLnJvdW5kU2xpZGVyKHtcbiAgICAgIC4uLnRoZXJtb3N0YXRDb25maWcsXG4gICAgICByYWRpdXMsXG4gICAgICBtaW46IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWluX3RlbXAsXG4gICAgICBtYXg6IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWF4X3RlbXAsXG4gICAgICBzbGlkZXJUeXBlLFxuICAgICAgY2hhbmdlOiAodmFsdWUpID0+IHRoaXMuX3NldFRlbXBlcmF0dXJlKHZhbHVlKSxcbiAgICAgIGRyYWc6ICh2YWx1ZSkgPT4gdGhpcy5fZHJhZ0V2ZW50KHZhbHVlKSxcbiAgICAgIHZhbHVlOiBzbGlkZXJWYWx1ZSxcbiAgICAgIGRpc2FibGVkOiBzbGlkZXJWYWx1ZSA9PT0gbnVsbCxcbiAgICAgIHN0ZXA6IHRoaXMuX3N0ZXBTaXplLFxuICAgIH0pO1xuICAgIHRoaXMuX3VwZGF0ZVNldFRlbXAodWlWYWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9nZW5TbGlkZXJWYWx1ZShcbiAgICBzdGF0ZU9iajogQ2xpbWF0ZUVudGl0eVxuICApOiBbc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCwgc3RyaW5nLCBzdHJpbmddIHtcbiAgICBsZXQgc2xpZGVyVHlwZTogc3RyaW5nO1xuICAgIGxldCBzbGlkZXJWYWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbDtcbiAgICBsZXQgdWlWYWx1ZTogc3RyaW5nO1xuXG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlID09PSBcInVuYXZhaWxhYmxlXCIpIHtcbiAgICAgIHNsaWRlclR5cGUgPSBcIm1pbi1yYW5nZVwiO1xuICAgICAgc2xpZGVyVmFsdWUgPSBudWxsO1xuICAgICAgdWlWYWx1ZSA9IHRoaXMuaGFzcyEubG9jYWxpemUoXCJzdGF0ZS5kZWZhdWx0LnVuYXZhaWxhYmxlXCIpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2xvdyAmJlxuICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoXG4gICAgKSB7XG4gICAgICBzbGlkZXJUeXBlID0gXCJyYW5nZVwiO1xuICAgICAgc2xpZGVyVmFsdWUgPSBgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2xvd30sICR7XG4gICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfaGlnaFxuICAgICAgfWA7XG4gICAgICB1aVZhbHVlID0gdGhpcy5mb3JtYXRUZW1wKFxuICAgICAgICBbXG4gICAgICAgICAgU3RyaW5nKHN0YXRlT2JqLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfbG93KSxcbiAgICAgICAgICBTdHJpbmcoc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoKSxcbiAgICAgICAgXSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlclR5cGUgPSBcIm1pbi1yYW5nZVwiO1xuICAgICAgc2xpZGVyVmFsdWUgPSBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMudGVtcGVyYXR1cmUpKVxuICAgICAgICA/IHN0YXRlT2JqLmF0dHJpYnV0ZXMudGVtcGVyYXR1cmVcbiAgICAgICAgOiBudWxsO1xuICAgICAgdWlWYWx1ZSA9IHNsaWRlclZhbHVlICE9PSBudWxsID8gU3RyaW5nKHNsaWRlclZhbHVlKSA6IFwiXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtzbGlkZXJWYWx1ZSwgdWlWYWx1ZSwgc2xpZGVyVHlwZV07XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVTZXRUZW1wKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnNoYWRvd1Jvb3QhLnF1ZXJ5U2VsZWN0b3IoXCIjc2V0LXRlbXBlcmF0dXJlXCIpIS5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2RyYWdFdmVudChlKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlU2V0VGVtcCh0aGlzLmZvcm1hdFRlbXAoU3RyaW5nKGUudmFsdWUpLnNwbGl0KFwiLFwiKSwgdHJ1ZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0VGVtcGVyYXR1cmUoZSk6IHZvaWQge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG4gICAgaWYgKFxuICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9sb3cgJiZcbiAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfaGlnaFxuICAgICkge1xuICAgICAgaWYgKGUuaGFuZGxlLmluZGV4ID09PSAxKSB7XG4gICAgICAgIHRoaXMuaGFzcyEuY2FsbFNlcnZpY2UoXCJjbGltYXRlXCIsIFwic2V0X3RlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICBlbnRpdHlfaWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5LFxuICAgICAgICAgIHRhcmdldF90ZW1wX2xvdzogZS5oYW5kbGUudmFsdWUsXG4gICAgICAgICAgdGFyZ2V0X3RlbXBfaGlnaDogc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGFzcyEuY2FsbFNlcnZpY2UoXCJjbGltYXRlXCIsIFwic2V0X3RlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICBlbnRpdHlfaWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5LFxuICAgICAgICAgIHRhcmdldF90ZW1wX2xvdzogc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9sb3csXG4gICAgICAgICAgdGFyZ2V0X3RlbXBfaGlnaDogZS5oYW5kbGUudmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwiY2xpbWF0ZVwiLCBcInNldF90ZW1wZXJhdHVyZVwiLCB7XG4gICAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICAgIHRlbXBlcmF0dXJlOiBlLnZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVySWNvbihtb2RlOiBzdHJpbmcsIGN1cnJlbnRNb2RlOiBzdHJpbmcpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKCFtb2RlSWNvbnNbbW9kZV0pIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWljb25cbiAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHsgXCJzZWxlY3RlZC1pY29uXCI6IGN1cnJlbnRNb2RlID09PSBtb2RlIH0pfVwiXG4gICAgICAgIC5tb2RlPVwiJHttb2RlfVwiXG4gICAgICAgIC5pY29uPVwiJHttb2RlSWNvbnNbbW9kZV19XCJcbiAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVNb2RlQ2xpY2t9XCJcbiAgICAgID48L2hhLWljb24+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU1vcmVJbmZvKCkge1xuICAgIGZpcmVFdmVudCh0aGlzLCBcImhhc3MtbW9yZS1pbmZvXCIsIHtcbiAgICAgIGVudGl0eUlkOiB0aGlzLl9jb25maWchLmVudGl0eSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU1vZGVDbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5oYXNzIS5jYWxsU2VydmljZShcImNsaW1hdGVcIiwgXCJzZXRfaHZhY19tb2RlXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICBodmFjX21vZGU6IChlLmN1cnJlbnRUYXJnZXQgYXMgYW55KS5tb2RlLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRUZW1wKHRlbXBzOiBzdHJpbmdbXSwgc3BhY2VTdGVwU2l6ZTogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgdGVtcHMgPSB0ZW1wcy5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAvLyBJZiB3ZSBhcmUgc2xpZGluZyB0aGUgc2xpZGVyLCBhcHBlbmQgMCB0byB0aGUgdGVtcGVyYXR1cmVzIGlmIHdlJ3JlXG4gICAgLy8gaGF2aW5nIGEgMC41IHN0ZXAgc2l6ZSwgc28gdGhhdCB0aGUgdGV4dCBkb2Vzbid0IGp1bXAgd2hpbGUgc2xpZGluZ1xuICAgIGlmIChzcGFjZVN0ZXBTaXplKSB7XG4gICAgICBjb25zdCBzdGVwU2l6ZSA9IHRoaXMuX3N0ZXBTaXplO1xuICAgICAgdGVtcHMgPSB0ZW1wcy5tYXAoKHZhbCkgPT5cbiAgICAgICAgdmFsLmluY2x1ZGVzKFwiLlwiKSB8fCBzdGVwU2l6ZSA9PT0gMSA/IHZhbCA6IGAke3ZhbH0uMGBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRlbXBzLmpvaW4oXCItXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdHlsZSgpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICAke3RoaXMuX3JvdW5kU2xpZGVyU3R5bGV9XG4gICAgICA8c3R5bGU+XG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgfVxuICAgICAgICBoYS1jYXJkIHtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIC0tcmFpbC1ib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgIC0tYXV0by1jb2xvcjogZ3JlZW47XG4gICAgICAgICAgLS1lY28tY29sb3I6IHNwcmluZ2dyZWVuO1xuICAgICAgICAgIC0tY29vbC1jb2xvcjogIzJiOWFmOTtcbiAgICAgICAgICAtLWhlYXQtY29sb3I6ICNmZjgxMDA7XG4gICAgICAgICAgLS1tYW51YWwtY29sb3I6ICM0NDczOWU7XG4gICAgICAgICAgLS1vZmYtY29sb3I6ICM4YThhOGE7XG4gICAgICAgICAgLS1mYW5fb25seS1jb2xvcjogIzhhOGE4YTtcbiAgICAgICAgICAtLWRyeS1jb2xvcjogI2VmYmQwNztcbiAgICAgICAgICAtLWlkbGUtY29sb3I6ICM4YThhOGE7XG4gICAgICAgICAgLS11bmtub3duLWNvbG9yOiAjYmFjO1xuICAgICAgICB9XG4gICAgICAgICNyb290IHtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgfVxuICAgICAgICAuYXV0byxcbiAgICAgICAgLmhlYXRfY29vbCB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1hdXRvLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAuY29vbCB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1jb29sLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAuaGVhdCB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1oZWF0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAubWFudWFsIHtcbiAgICAgICAgICAtLW1vZGUtY29sb3I6IHZhcigtLW1hbnVhbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgLm9mZiB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1vZmYtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5mYW5fb25seSB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1mYW5fb25seS1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgLmVjbyB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1lY28tY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5kcnkge1xuICAgICAgICAgIC0tbW9kZS1jb2xvcjogdmFyKC0tZHJ5LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAuaWRsZSB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1pZGxlLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAudW5rbm93bi1tb2RlIHtcbiAgICAgICAgICAtLW1vZGUtY29sb3I6IHZhcigtLXVua25vd24tY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5uby10aXRsZSB7XG4gICAgICAgICAgLS10aXRsZS1wb3NpdGlvbi10b3A6IDMzJSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIC5sYXJnZSB7XG4gICAgICAgICAgLS10aGVybW9zdGF0LXBhZGRpbmctdG9wOiAyNXB4O1xuICAgICAgICAgIC0tdGhlcm1vc3RhdC1tYXJnaW4tYm90dG9tOiAyNXB4O1xuICAgICAgICAgIC0tdGl0bGUtZm9udC1zaXplOiAyOHB4O1xuICAgICAgICAgIC0tdGl0bGUtcG9zaXRpb24tdG9wOiAyNyU7XG4gICAgICAgICAgLS1jbGltYXRlLWluZm8tcG9zaXRpb24tdG9wOiA4MSU7XG4gICAgICAgICAgLS1zZXQtdGVtcGVyYXR1cmUtZm9udC1zaXplOiAyNXB4O1xuICAgICAgICAgIC0tY3VycmVudC10ZW1wZXJhdHVyZS1mb250LXNpemU6IDcxcHg7XG4gICAgICAgICAgLS1jdXJyZW50LXRlbXBlcmF0dXJlLXBvc2l0aW9uLXRvcDogMTAlO1xuICAgICAgICAgIC0tY3VycmVudC10ZW1wZXJhdHVyZS10ZXh0LXBhZGRpbmctbGVmdDogMTVweDtcbiAgICAgICAgICAtLXVvbS1mb250LXNpemU6IDIwcHg7XG4gICAgICAgICAgLS11b20tbWFyZ2luLWxlZnQ6IC0xOHB4O1xuICAgICAgICAgIC0tY3VycmVudC1tb2RlLWZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgICAtLXNldC10ZW1wZXJhdHVyZS1tYXJnaW4tYm90dG9tOiAtNXB4O1xuICAgICAgICB9XG4gICAgICAgIC5zbWFsbCB7XG4gICAgICAgICAgLS10aGVybW9zdGF0LXBhZGRpbmctdG9wOiAxNXB4O1xuICAgICAgICAgIC0tdGhlcm1vc3RhdC1tYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIC0tdGl0bGUtZm9udC1zaXplOiAxOHB4O1xuICAgICAgICAgIC0tdGl0bGUtcG9zaXRpb24tdG9wOiAyOCU7XG4gICAgICAgICAgLS1jbGltYXRlLWluZm8tcG9zaXRpb24tdG9wOiA3OSU7XG4gICAgICAgICAgLS1zZXQtdGVtcGVyYXR1cmUtZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgIC0tY3VycmVudC10ZW1wZXJhdHVyZS1mb250LXNpemU6IDI1cHg7XG4gICAgICAgICAgLS1jdXJyZW50LXRlbXBlcmF0dXJlLXBvc2l0aW9uLXRvcDogNSU7XG4gICAgICAgICAgLS1jdXJyZW50LXRlbXBlcmF0dXJlLXRleHQtcGFkZGluZy1sZWZ0OiA3cHg7XG4gICAgICAgICAgLS11b20tZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIC0tdW9tLW1hcmdpbi1sZWZ0OiAtNXB4O1xuICAgICAgICAgIC0tY3VycmVudC1tb2RlLWZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAtLXNldC10ZW1wZXJhdHVyZS1tYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgI3RoZXJtb3N0YXQge1xuICAgICAgICAgIG1hcmdpbjogMCBhdXRvIHZhcigtLXRoZXJtb3N0YXQtbWFyZ2luLWJvdHRvbSk7XG4gICAgICAgICAgcGFkZGluZy10b3A6IHZhcigtLXRoZXJtb3N0YXQtcGFkZGluZy10b3ApO1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1yYW5nZS1jb2xvciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbW9kZS1jb2xvciwgdmFyKC0tZGlzYWJsZWQtdGV4dC1jb2xvcikpO1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1wYXRoLWNvbG9yIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAjdGhlcm1vc3RhdCAucnMtaGFuZGxlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYXBlci1jYXJkLWJhY2tncm91bmQtY29sb3IsIHdoaXRlKTtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIG1hcmdpbjogLTEwcHggMCAwIC04cHggIWltcG9ydGFudDtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAjdGhlcm1vc3RhdCAucnMtaGFuZGxlLnJzLWZvY3VzIHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLW1vZGUtY29sb3IsIHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpKTtcbiAgICAgICAgfVxuICAgICAgICAjdGhlcm1vc3RhdCAucnMtaGFuZGxlOmFmdGVyIHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLW1vZGUtY29sb3IsIHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpKTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tb2RlLWNvbG9yLCB2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgI3RoZXJtb3N0YXQgLnJzLWJvcmRlciB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1yYWlsLWJvcmRlci1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgI3RoZXJtb3N0YXQgLnJzLWJhci5ycy10cmFuc2l0aW9uLnJzLWZpcnN0LFxuICAgICAgICAucnMtYmFyLnJzLXRyYW5zaXRpb24ucnMtc2Vjb25kIHtcbiAgICAgICAgICB6LWluZGV4OiAyMCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1yZWFkb25seSB7XG4gICAgICAgICAgei1pbmRleDogMTA7XG4gICAgICAgICAgdG9wOiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1pbm5lci5ycy1iZy1jb2xvci5ycy1ib3JkZXIsXG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1vdmVybGF5LnJzLXRyYW5zaXRpb24ucnMtYmctY29sb3Ige1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhcGVyLWNhcmQtYmFja2dyb3VuZC1jb2xvciwgd2hpdGUpO1xuICAgICAgICB9XG4gICAgICAgICN0b29sdGlwIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICB6LWluZGV4OiAxNTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAjc2V0LXRlbXBlcmF0dXJlIHtcbiAgICAgICAgICBmb250LXNpemU6IHZhcigtLXNldC10ZW1wZXJhdHVyZS1mb250LXNpemUpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IHZhcigtLXNldC10ZW1wZXJhdHVyZS1tYXJnaW4tYm90dG9tKTtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAxLjJlbTtcbiAgICAgICAgfVxuICAgICAgICAudGl0bGUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tdGl0bGUtZm9udC1zaXplKTtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiB2YXIoLS10aXRsZS1wb3NpdGlvbi10b3ApO1xuICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgfVxuICAgICAgICAuY2xpbWF0ZS1pbmZvIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiB2YXIoLS1jbGltYXRlLWluZm8tcG9zaXRpb24tdG9wKTtcbiAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgLmN1cnJlbnQtbW9kZSB7XG4gICAgICAgICAgZm9udC1zaXplOiB2YXIoLS1jdXJyZW50LW1vZGUtZm9udC1zaXplKTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5tb2RlcyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAubW9kZXMgaGEtaWNvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgbWFyZ2luOiAwIDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLm1vZGVzIGhhLWljb24uc2VsZWN0ZWQtaWNvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLW1vZGUtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5jdXJyZW50LXRlbXBlcmF0dXJlIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tY3VycmVudC10ZW1wZXJhdHVyZS1mb250LXNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC5jdXJyZW50LXRlbXBlcmF0dXJlLXRleHQge1xuICAgICAgICAgIHBhZGRpbmctbGVmdDogdmFyKC0tY3VycmVudC10ZW1wZXJhdHVyZS10ZXh0LXBhZGRpbmctbGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgLnVvbSB7XG4gICAgICAgICAgZm9udC1zaXplOiB2YXIoLS11b20tZm9udC1zaXplKTtcbiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiB2YXIoLS11b20tbWFyZ2luLWxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIC5tb3JlLWluZm8ge1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgIHotaW5kZXg6IDI1O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIDwvc3R5bGU+XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXRoZXJtb3N0YXQtY2FyZFwiOiBIdWlUaGVybW9zdGF0Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgaHRtbCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgY29tcHV0ZUNhcmRTaXplIH0gZnJvbSBcIi4uL2NvbW1vbi9jb21wdXRlLWNhcmQtc2l6ZVwiO1xuaW1wb3J0IHsgSHVpU3RhY2tDYXJkIH0gZnJvbSBcIi4vaHVpLXN0YWNrLWNhcmRcIjtcblxuY2xhc3MgSHVpVmVydGljYWxTdGFja0NhcmQgZXh0ZW5kcyBIdWlTdGFja0NhcmQge1xuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKSB7XG4gICAgbGV0IHRvdGFsU2l6ZSA9IDA7XG5cbiAgICBpZiAoIXRoaXMuX2NhcmRzKSB7XG4gICAgICByZXR1cm4gdG90YWxTaXplO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLl9jYXJkcykge1xuICAgICAgdG90YWxTaXplICs9IGNvbXB1dGVDYXJkU2l6ZShlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdG90YWxTaXplO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlclN0eWxlKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgI3Jvb3Qge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICAjcm9vdCA+ICoge1xuICAgICAgICAgIG1hcmdpbjogNHB4IDAgNHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgI3Jvb3QgPiAqOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICB9XG4gICAgICAgICNyb290ID4gKjpsYXN0LWNoaWxkIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS12ZXJ0aWNhbC1zdGFjay1jYXJkXCI6IEh1aVZlcnRpY2FsU3RhY2tDYXJkO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS12ZXJ0aWNhbC1zdGFjay1jYXJkXCIsIEh1aVZlcnRpY2FsU3RhY2tDYXJkKTtcbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IGlzVmFsaWRFbnRpdHlJZCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3ZhbGlkX2VudGl0eV9pZFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQsIExvdmVsYWNlQ2FyZEVkaXRvciB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgV2VhdGhlckZvcmVjYXN0Q2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBjb21wdXRlUlRMIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyB0b2dnbGVBdHRyaWJ1dGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS90b2dnbGVfYXR0cmlidXRlXCI7XG5cbmNvbnN0IGNhcmRpbmFsRGlyZWN0aW9ucyA9IFtcbiAgXCJOXCIsXG4gIFwiTk5FXCIsXG4gIFwiTkVcIixcbiAgXCJFTkVcIixcbiAgXCJFXCIsXG4gIFwiRVNFXCIsXG4gIFwiU0VcIixcbiAgXCJTU0VcIixcbiAgXCJTXCIsXG4gIFwiU1NXXCIsXG4gIFwiU1dcIixcbiAgXCJXU1dcIixcbiAgXCJXXCIsXG4gIFwiV05XXCIsXG4gIFwiTldcIixcbiAgXCJOTldcIixcbiAgXCJOXCIsXG5dO1xuXG5jb25zdCB3ZWF0aGVySWNvbnMgPSB7XG4gIFwiY2xlYXItbmlnaHRcIjogXCJoYXNzOndlYXRoZXItbmlnaHRcIixcbiAgY2xvdWR5OiBcImhhc3M6d2VhdGhlci1jbG91ZHlcIixcbiAgZXhjZXB0aW9uYWw6IFwiaGFzczphbGVydC1jaXJjbGUtb3V0bGluZVwiLFxuICBmb2c6IFwiaGFzczp3ZWF0aGVyLWZvZ1wiLFxuICBoYWlsOiBcImhhc3M6d2VhdGhlci1oYWlsXCIsXG4gIGxpZ2h0bmluZzogXCJoYXNzOndlYXRoZXItbGlnaHRuaW5nXCIsXG4gIFwibGlnaHRuaW5nLXJhaW55XCI6IFwiaGFzczp3ZWF0aGVyLWxpZ2h0bmluZy1yYWlueVwiLFxuICBwYXJ0bHljbG91ZHk6IFwiaGFzczp3ZWF0aGVyLXBhcnRseS1jbG91ZHlcIixcbiAgcG91cmluZzogXCJoYXNzOndlYXRoZXItcG91cmluZ1wiLFxuICByYWlueTogXCJoYXNzOndlYXRoZXItcmFpbnlcIixcbiAgc25vd3k6IFwiaGFzczp3ZWF0aGVyLXNub3d5XCIsXG4gIFwic25vd3ktcmFpbnlcIjogXCJoYXNzOndlYXRoZXItc25vd3ktcmFpbnlcIixcbiAgc3Vubnk6IFwiaGFzczp3ZWF0aGVyLXN1bm55XCIsXG4gIHdpbmR5OiBcImhhc3M6d2VhdGhlci13aW5keVwiLFxuICBcIndpbmR5LXZhcmlhbnRcIjogXCJoYXNzOndlYXRoZXItd2luZHktdmFyaWFudFwiLFxufTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktd2VhdGhlci1mb3JlY2FzdC1jYXJkXCIpXG5jbGFzcyBIdWlXZWF0aGVyRm9yZWNhc3RDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXdlYXRoZXItZm9yZWNhc3QtY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogV2VhdGhlckZvcmVjYXN0Q2FyZENvbmZpZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gNDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBXZWF0aGVyRm9yZWNhc3RDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2FyZCBjb25maWd1cmF0aW9uXCIpO1xuICAgIH1cbiAgICBpZiAoIWlzVmFsaWRFbnRpdHlJZChjb25maWcuZW50aXR5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBFbnRpdHlcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikpIHtcbiAgICAgIHRvZ2dsZUF0dHJpYnV0ZSh0aGlzLCBcInJ0bFwiLCBjb21wdXRlUlRMKHRoaXMuaGFzcyEpKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3QgZm9yZWNhc3QgPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmZvcmVjYXN0XG4gICAgICA/IHN0YXRlT2JqLmF0dHJpYnV0ZXMuZm9yZWNhc3Quc2xpY2UoMCwgNSlcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZCBAY2xpY2s9XCIke3RoaXMuaGFuZGxlQ2xpY2t9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAke3RoaXMuaGFzcy5sb2NhbGl6ZShgc3RhdGUud2VhdGhlci4ke3N0YXRlT2JqLnN0YXRlfWApIHx8XG4gICAgICAgICAgICBzdGF0ZU9iai5zdGF0ZX1cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZVwiPlxuICAgICAgICAgICAgJHsodGhpcy5fY29uZmlnICYmIHRoaXMuX2NvbmZpZy5uYW1lKSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm5vd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW5cIj5cbiAgICAgICAgICAgICAgJHtzdGF0ZU9iai5zdGF0ZSBpbiB3ZWF0aGVySWNvbnNcbiAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxoYS1pY29uIGljb249XCIke3dlYXRoZXJJY29uc1tzdGF0ZU9iai5zdGF0ZV19XCI+PC9oYS1pY29uPlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlbXBcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMudGVtcGVyYXR1cmV9PHNwYW5cbiAgICAgICAgICAgICAgICAgID4ke3RoaXMuZ2V0VW5pdChcInRlbXBlcmF0dXJlXCIpfTwvc3BhblxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdHRyaWJ1dGVzXCI+XG4gICAgICAgICAgICAgICR7dGhpcy5fc2hvd1ZhbHVlKHN0YXRlT2JqLmF0dHJpYnV0ZXMucHJlc3N1cmUpXG4gICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5jYXJkLndlYXRoZXIuYXR0cmlidXRlcy5haXJfcHJlc3N1cmVcIlxuICAgICAgICAgICAgICAgICAgICAgICl9OlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVhc3VyYW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMucHJlc3N1cmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuZ2V0VW5pdChcImFpcl9wcmVzc3VyZVwiKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgJHt0aGlzLl9zaG93VmFsdWUoc3RhdGVPYmouYXR0cmlidXRlcy5odW1pZGl0eSlcbiAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVpLmNhcmQud2VhdGhlci5hdHRyaWJ1dGVzLmh1bWlkaXR5XCJcbiAgICAgICAgICAgICAgICAgICAgICApfTpcbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lYXN1cmFuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+JHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmh1bWlkaXR5fSAlPC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICR7dGhpcy5fc2hvd1ZhbHVlKHN0YXRlT2JqLmF0dHJpYnV0ZXMud2luZF9zcGVlZClcbiAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVpLmNhcmQud2VhdGhlci5hdHRyaWJ1dGVzLndpbmRfc3BlZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICl9OlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVhc3VyYW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMud2luZF9zcGVlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5nZXRVbml0KFwibGVuZ3RoXCIpfS9oXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5nZXRXaW5kQmVhcmluZyhzdGF0ZU9iai5hdHRyaWJ1dGVzLndpbmRfYmVhcmluZyl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICR7Zm9yZWNhc3RcbiAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9yZWNhc3RcIj5cbiAgICAgICAgICAgICAgICAgICR7Zm9yZWNhc3QubWFwKFxuICAgICAgICAgICAgICAgICAgICAoaXRlbSkgPT4gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIndlZWtkYXlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHtuZXcgRGF0ZShpdGVtLmRhdGV0aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sYW5ndWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHdlZWtkYXk6IFwic2hvcnRcIiB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9PGJyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7IXRoaXMuX3Nob3dWYWx1ZShpdGVtLnRlbXBsb3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke25ldyBEYXRlKGl0ZW0uZGF0ZXRpbWUpLnRvTG9jYWxlVGltZVN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc3MhLmxhbmd1YWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaG91cjogXCJudW1lcmljXCIgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLl9zaG93VmFsdWUoaXRlbS5jb25kaXRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmljb249XCIke3dlYXRoZXJJY29uc1tpdGVtLmNvbmRpdGlvbl19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLl9zaG93VmFsdWUoaXRlbS50ZW1wZXJhdHVyZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlbXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLnRlbXBlcmF0dXJlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuZ2V0VW5pdChcInRlbXBlcmF0dXJlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX3Nob3dWYWx1ZShpdGVtLnRlbXBsb3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wbG93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXRlbS50ZW1wbG93fSAke3RoaXMuZ2V0VW5pdChcInRlbXBlcmF0dXJlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX3Nob3dWYWx1ZShpdGVtLnByZWNpcGl0YXRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmVjaXBpdGF0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXRlbS5wcmVjaXBpdGF0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuZ2V0VW5pdChcInByZWNpcGl0YXRpb25cIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJoYXNzLW1vcmUtaW5mb1wiLCB7IGVudGl0eUlkOiB0aGlzLl9jb25maWchLmVudGl0eSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VW5pdChtZWFzdXJlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxlbmd0aFVuaXQgPSB0aGlzLmhhc3MhLmNvbmZpZy51bml0X3N5c3RlbS5sZW5ndGggfHwgXCJcIjtcbiAgICBzd2l0Y2ggKG1lYXN1cmUpIHtcbiAgICAgIGNhc2UgXCJhaXJfcHJlc3N1cmVcIjpcbiAgICAgICAgcmV0dXJuIGxlbmd0aFVuaXQgPT09IFwia21cIiA/IFwiaFBhXCIgOiBcImluSGdcIjtcbiAgICAgIGNhc2UgXCJsZW5ndGhcIjpcbiAgICAgICAgcmV0dXJuIGxlbmd0aFVuaXQ7XG4gICAgICBjYXNlIFwicHJlY2lwaXRhdGlvblwiOlxuICAgICAgICByZXR1cm4gbGVuZ3RoVW5pdCA9PT0gXCJrbVwiID8gXCJtbVwiIDogXCJpblwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzcyEuY29uZmlnLnVuaXRfc3lzdGVtW21lYXN1cmVdIHx8IFwiXCI7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3aW5kQmVhcmluZ1RvVGV4dChkZWdyZWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVncmVlbnVtID0gcGFyc2VJbnQoZGVncmVlLCAxMCk7XG4gICAgaWYgKGlzRmluaXRlKGRlZ3JlZW51bSkpIHtcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tYml0d2lzZVxuICAgICAgcmV0dXJuIGNhcmRpbmFsRGlyZWN0aW9uc1soKChkZWdyZWVudW0gKyAxMS4yNSkgLyAyMi41KSB8IDApICUgMTZdO1xuICAgIH1cbiAgICByZXR1cm4gZGVncmVlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRXaW5kQmVhcmluZyhiZWFyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChiZWFyaW5nICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGNhcmRpbmFsRGlyZWN0aW9uID0gdGhpcy53aW5kQmVhcmluZ1RvVGV4dChiZWFyaW5nKTtcbiAgICAgIHJldHVybiBgKCR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgYHVpLmNhcmQud2VhdGhlci5jYXJkaW5hbF9kaXJlY3Rpb24uJHtjYXJkaW5hbERpcmVjdGlvbi50b0xvd2VyQ2FzZSgpfWBcbiAgICAgICkgfHwgY2FyZGluYWxEaXJlY3Rpb259KWA7XG4gICAgfVxuICAgIHJldHVybiBgYDtcbiAgfVxuXG4gIHByaXZhdGUgX3Nob3dWYWx1ZShpdGVtOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHlwZW9mIGl0ZW0gIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlbSAhPT0gbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDAgMjBweCAyMHB4O1xuICAgICAgfVxuXG4gICAgICBoYS1pY29uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWl0ZW0taWNvbi1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIge1xuICAgICAgICBmb250LWZhbWlseTogdmFyKC0tcGFwZXItZm9udC1oZWFkbGluZV8tX2ZvbnQtZmFtaWx5KTtcbiAgICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogdmFyKFxuICAgICAgICAgIC0tcGFwZXItZm9udC1oZWFkbGluZV8tXy13ZWJraXQtZm9udC1zbW9vdGhpbmdcbiAgICAgICAgKTtcbiAgICAgICAgZm9udC1zaXplOiB2YXIoLS1wYXBlci1mb250LWhlYWRsaW5lXy1fZm9udC1zaXplKTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLXBhcGVyLWZvbnQtaGVhZGxpbmVfLV9mb250LXdlaWdodCk7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiB2YXIoLS1wYXBlci1mb250LWhlYWRsaW5lXy1fbGV0dGVyLXNwYWNpbmcpO1xuICAgICAgICBsaW5lLWhlaWdodDogdmFyKC0tcGFwZXItZm9udC1oZWFkbGluZV8tX2xpbmUtaGVpZ2h0KTtcbiAgICAgICAgdGV4dC1yZW5kZXJpbmc6IHZhcihcbiAgICAgICAgICAtLXBhcGVyLWZvbnQtY29tbW9uLWV4cGVuc2l2ZS1rZXJuaW5nXy1fdGV4dC1yZW5kZXJpbmdcbiAgICAgICAgKTtcbiAgICAgICAgb3BhY2l0eTogdmFyKC0tZGFyay1wcmltYXJ5LW9wYWNpdHkpO1xuICAgICAgICBwYWRkaW5nOiAyNHB4IDE2cHggMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xuICAgICAgfVxuXG4gICAgICAubmFtZSB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtydGxdKSAubmFtZSB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwcHg7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTZweDtcbiAgICAgIH1cblxuICAgICAgLm5vdyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAubWFpbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMzJweDtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tYWluIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tYWluIGhhLWljb24ge1xuICAgICAgICAtLWlyb24taWNvbi1oZWlnaHQ6IDcycHg7XG4gICAgICAgIC0taXJvbi1pY29uLXdpZHRoOiA3MnB4O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tYWluIGhhLWljb24ge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDBweDtcbiAgICAgIH1cblxuICAgICAgLm1haW4gLnRlbXAge1xuICAgICAgICBmb250LXNpemU6IDUycHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxZW07XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tYWluIC50ZW1wIHtcbiAgICAgICAgZGlyZWN0aW9uOiBsdHI7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMjhweDtcbiAgICAgIH1cblxuICAgICAgLm1haW4gLnRlbXAgc3BhbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDFlbTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDRweDtcbiAgICAgIH1cblxuICAgICAgLm1lYXN1cmFuZCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tZWFzdXJhbmQge1xuICAgICAgICBkaXJlY3Rpb246IGx0cjtcbiAgICAgIH1cblxuICAgICAgLmZvcmVjYXN0IHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfVxuXG4gICAgICAuZm9yZWNhc3QgZGl2IHtcbiAgICAgICAgZmxleDogMCAwIGF1dG87XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLmZvcmVjYXN0IC5pY29uIHtcbiAgICAgICAgbWFyZ2luOiA0cHggMDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbcnRsXSkgLmZvcmVjYXN0IC50ZW1wIHtcbiAgICAgICAgZGlyZWN0aW9uOiBsdHI7XG4gICAgICB9XG5cbiAgICAgIC53ZWVrZGF5IHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICB9XG5cbiAgICAgIC5hdHRyaWJ1dGVzLFxuICAgICAgLnRlbXBsb3csXG4gICAgICAucHJlY2lwaXRhdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtydGxdKSAucHJlY2lwaXRhdGlvbiB7XG4gICAgICAgIGRpcmVjdGlvbjogbHRyO1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmRcIjogSHVpV2VhdGhlckZvcmVjYXN0Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTG92ZWxhY2VFbGVtZW50LCBMb3ZlbGFjZUVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi4vLi4vZWxlbWVudHMvdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUh1aUVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2NyZWF0ZS1odWktZWxlbWVudFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3R5bGVkSHVpRWxlbWVudChcbiAgZWxlbWVudENvbmZpZzogTG92ZWxhY2VFbGVtZW50Q29uZmlnXG4pOiBMb3ZlbGFjZUVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gY3JlYXRlSHVpRWxlbWVudChlbGVtZW50Q29uZmlnKSBhcyBMb3ZlbGFjZUVsZW1lbnQ7XG4gIC8vIGtlZXAgY29uZGl0aW9uYWwgY2FyZCBhcyBhIHRyYW5zcGFyZW50IGNvbnRhaW5lciBzbyBsZXQgaXRzIHBvc2l0aW9uIHJlbWFpbiBzdGF0aWNcbiAgaWYgKGVsZW1lbnQudGFnTmFtZSAhPT0gXCJIVUktQ09ORElUSU9OQUwtRUxFTUVOVFwiKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudFwiKTtcbiAgfVxuXG4gIGlmIChlbGVtZW50Q29uZmlnLnN0eWxlKSB7XG4gICAgT2JqZWN0LmtleXMoZWxlbWVudENvbmZpZy5zdHlsZSkuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLCBlbGVtZW50Q29uZmlnLnN0eWxlW3Byb3BdKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuIiwiaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgQ2FsbFNlcnZpY2VDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IGNhbGxTZXJ2aWNlID0gKFxuICBjb25maWc6IENhbGxTZXJ2aWNlQ29uZmlnLFxuICBoYXNzOiBIb21lQXNzaXN0YW50XG4pOiB2b2lkID0+IHtcbiAgY29uc3QgZW50aXR5SWQgPSBjb25maWcuZW50aXR5O1xuICBjb25zdCBbZG9tYWluLCBzZXJ2aWNlXSA9IGNvbmZpZy5zZXJ2aWNlLnNwbGl0KFwiLlwiLCAyKTtcbiAgY29uc3Qgc2VydmljZURhdGEgPSB7IGVudGl0eV9pZDogZW50aXR5SWQsIC4uLmNvbmZpZy5zZXJ2aWNlX2RhdGEgfTtcbiAgaGFzcy5jYWxsU2VydmljZShkb21haW4sIHNlcnZpY2UsIHNlcnZpY2VEYXRhKTtcbn07XG4iLCJpbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVDYXJkU2l6ZSA9IChjYXJkOiBMb3ZlbGFjZUNhcmQpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gdHlwZW9mIGNhcmQuZ2V0Q2FyZFNpemUgPT09IFwiZnVuY3Rpb25cIiA/IGNhcmQuZ2V0Q2FyZFNpemUoKSA6IDE7XG59O1xuIiwiaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VFbGVtZW50Q29uZmlnIH0gZnJvbSBcIi4uL2VsZW1lbnRzL3R5cGVzXCI7XG5pbXBvcnQgeyBBY3Rpb25Db25maWcgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuXG5pbnRlcmZhY2UgQ29uZmlnIGV4dGVuZHMgTG92ZWxhY2VFbGVtZW50Q29uZmlnIHtcbiAgZW50aXR5Pzogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgdGFwX2FjdGlvbj86IEFjdGlvbkNvbmZpZztcbiAgaG9sZF9hY3Rpb24/OiBBY3Rpb25Db25maWc7XG59XG5cbmV4cG9ydCBjb25zdCBjb21wdXRlVG9vbHRpcCA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBjb25maWc6IENvbmZpZyk6IHN0cmluZyA9PiB7XG4gIGlmIChjb25maWcudGl0bGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIGlmIChjb25maWcudGl0bGUpIHtcbiAgICByZXR1cm4gY29uZmlnLnRpdGxlO1xuICB9XG5cbiAgbGV0IHN0YXRlTmFtZSA9IFwiXCI7XG4gIGxldCB0b29sdGlwID0gXCJcIjtcblxuICBpZiAoY29uZmlnLmVudGl0eSkge1xuICAgIHN0YXRlTmFtZSA9XG4gICAgICBjb25maWcuZW50aXR5IGluIGhhc3Muc3RhdGVzXG4gICAgICAgID8gY29tcHV0ZVN0YXRlTmFtZShoYXNzLnN0YXRlc1tjb25maWcuZW50aXR5XSlcbiAgICAgICAgOiBjb25maWcuZW50aXR5O1xuICB9XG5cbiAgY29uc3QgdGFwVG9vbHRpcCA9IGNvbmZpZy50YXBfYWN0aW9uXG4gICAgPyBjb21wdXRlQWN0aW9uVG9vbHRpcChoYXNzLCBzdGF0ZU5hbWUsIGNvbmZpZy50YXBfYWN0aW9uLCBmYWxzZSlcbiAgICA6IFwiXCI7XG4gIGNvbnN0IGhvbGRUb29sdGlwID0gY29uZmlnLmhvbGRfYWN0aW9uXG4gICAgPyBjb21wdXRlQWN0aW9uVG9vbHRpcChoYXNzLCBzdGF0ZU5hbWUsIGNvbmZpZy5ob2xkX2FjdGlvbiwgdHJ1ZSlcbiAgICA6IFwiXCI7XG5cbiAgY29uc3QgbmV3bGluZSA9IHRhcFRvb2x0aXAgJiYgaG9sZFRvb2x0aXAgPyBcIlxcblwiIDogXCJcIjtcblxuICB0b29sdGlwID0gdGFwVG9vbHRpcCArIG5ld2xpbmUgKyBob2xkVG9vbHRpcDtcblxuICByZXR1cm4gdG9vbHRpcDtcbn07XG5cbmZ1bmN0aW9uIGNvbXB1dGVBY3Rpb25Ub29sdGlwKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBzdGF0ZTogc3RyaW5nLFxuICBjb25maWc6IEFjdGlvbkNvbmZpZyxcbiAgaXNIb2xkOiBib29sZWFuXG4pIHtcbiAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5hY3Rpb24gfHwgY29uZmlnLmFjdGlvbiA9PT0gXCJub25lXCIpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIGxldCB0b29sdGlwID1cbiAgICAoaXNIb2xkXG4gICAgICA/IGhhc3MubG9jYWxpemUoXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLmhvbGRcIilcbiAgICAgIDogaGFzcy5sb2NhbGl6ZShcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnBpY3R1cmUtZWxlbWVudHMudGFwXCIpKSArIFwiIFwiO1xuXG4gIHN3aXRjaCAoY29uZmlnLmFjdGlvbikge1xuICAgIGNhc2UgXCJuYXZpZ2F0ZVwiOlxuICAgICAgdG9vbHRpcCArPSBgJHtoYXNzLmxvY2FsaXplKFxuICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnBpY3R1cmUtZWxlbWVudHMubmF2aWdhdGVfdG9cIixcbiAgICAgICAgXCJsb2NhdGlvblwiLFxuICAgICAgICBjb25maWcubmF2aWdhdGlvbl9wYXRoXG4gICAgICApfWA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwidXJsXCI6XG4gICAgICB0b29sdGlwICs9IGAke2hhc3MubG9jYWxpemUoXG4gICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuY2FyZHMucGljdHVyZS1lbGVtZW50cy51cmxcIixcbiAgICAgICAgXCJ1cmxfcGF0aFwiLFxuICAgICAgICBjb25maWcudXJsX3BhdGhcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJ0b2dnbGVcIjpcbiAgICAgIHRvb2x0aXAgKz0gYCR7aGFzcy5sb2NhbGl6ZShcbiAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLnRvZ2dsZVwiLFxuICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgc3RhdGVcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxsLXNlcnZpY2VcIjpcbiAgICAgIHRvb2x0aXAgKz0gYCR7aGFzcy5sb2NhbGl6ZShcbiAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLmNhbGxfc2VydmljZVwiLFxuICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgY29uZmlnLnNlcnZpY2VcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJtb3JlLWluZm9cIjpcbiAgICAgIHRvb2x0aXAgKz0gYCR7aGFzcy5sb2NhbGl6ZShcbiAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLm1vcmVfaW5mb1wiLFxuICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgc3RhdGVcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHRvb2x0aXA7XG59XG4iLCJpbXBvcnQgZGVlcENsb25lIGZyb20gXCJkZWVwLWNsb25lLXNpbXBsZVwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5cbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1hbGFybS1wYW5lbC1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktY29uZGl0aW9uYWwtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWVudGl0aWVzLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1lbnRpdHktYnV0dG9uLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1lbnRpdHktZmlsdGVyLWNhcmRcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUVycm9yQ2FyZEVsZW1lbnQsXG4gIGNyZWF0ZUVycm9yQ2FyZENvbmZpZyxcbiAgSHVpRXJyb3JDYXJkLFxufSBmcm9tIFwiLi4vY2FyZHMvaHVpLWVycm9yLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1nbGFuY2UtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWhpc3RvcnktZ3JhcGgtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWhvcml6b250YWwtc3RhY2stY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWlmcmFtZS1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktbGlnaHQtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLW1hcC1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktbWFya2Rvd24tY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLW1lZGlhLWNvbnRyb2wtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXBpY3R1cmUtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXBpY3R1cmUtZWxlbWVudHMtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXBpY3R1cmUtZW50aXR5LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1waWN0dXJlLWdsYW5jZS1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktcGxhbnQtc3RhdHVzLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1zZW5zb3ItY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXZlcnRpY2FsLXN0YWNrLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1zaG9wcGluZy1saXN0LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS10aGVybW9zdGF0LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1nYXVnZS1jYXJkXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZENvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2xvdmVsYWNlXCI7XG5cbmNvbnN0IENBUkRfVFlQRVMgPSBuZXcgU2V0KFtcbiAgXCJhbGFybS1wYW5lbFwiLFxuICBcImNvbmRpdGlvbmFsXCIsXG4gIFwiZW50aXRpZXNcIixcbiAgXCJlbnRpdHktYnV0dG9uXCIsXG4gIFwiZW50aXR5LWZpbHRlclwiLFxuICBcImVycm9yXCIsXG4gIFwiZ2F1Z2VcIixcbiAgXCJnbGFuY2VcIixcbiAgXCJoaXN0b3J5LWdyYXBoXCIsXG4gIFwiaG9yaXpvbnRhbC1zdGFja1wiLFxuICBcImlmcmFtZVwiLFxuICBcImxpZ2h0XCIsXG4gIFwibWFwXCIsXG4gIFwibWFya2Rvd25cIixcbiAgXCJtZWRpYS1jb250cm9sXCIsXG4gIFwicGljdHVyZVwiLFxuICBcInBpY3R1cmUtZWxlbWVudHNcIixcbiAgXCJwaWN0dXJlLWVudGl0eVwiLFxuICBcInBpY3R1cmUtZ2xhbmNlXCIsXG4gIFwicGxhbnQtc3RhdHVzXCIsXG4gIFwic2Vuc29yXCIsXG4gIFwic2hvcHBpbmctbGlzdFwiLFxuICBcInRoZXJtb3N0YXRcIixcbiAgXCJ2ZXJ0aWNhbC1zdGFja1wiLFxuICBcIndlYXRoZXItZm9yZWNhc3RcIixcbl0pO1xuY29uc3QgQ1VTVE9NX1RZUEVfUFJFRklYID0gXCJjdXN0b206XCI7XG5jb25zdCBUSU1FT1VUID0gMjAwMDtcblxuY29uc3QgX2NyZWF0ZUVsZW1lbnQgPSAoXG4gIHRhZzogc3RyaW5nLFxuICBjb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZ1xuKTogTG92ZWxhY2VDYXJkIHwgSHVpRXJyb3JDYXJkID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gIHRyeSB7XG4gICAgZWxlbWVudC5zZXRDb25maWcoZGVlcENsb25lKGNvbmZpZykpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zb2xlLmVycm9yKHRhZywgZXJyKTtcbiAgICByZXR1cm4gX2NyZWF0ZUVycm9yRWxlbWVudChlcnIubWVzc2FnZSwgY29uZmlnKTtcbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbmNvbnN0IF9jcmVhdGVFcnJvckVsZW1lbnQgPSAoXG4gIGVycm9yOiBzdHJpbmcsXG4gIGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnXG4pOiBIdWlFcnJvckNhcmQgPT4gY3JlYXRlRXJyb3JDYXJkRWxlbWVudChjcmVhdGVFcnJvckNhcmRDb25maWcoZXJyb3IsIGNvbmZpZykpO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ2FyZEVsZW1lbnQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnXG4pOiBMb3ZlbGFjZUNhcmQgfCBIdWlFcnJvckNhcmQgPT4ge1xuICBpZiAoIWNvbmZpZyB8fCB0eXBlb2YgY29uZmlnICE9PSBcIm9iamVjdFwiIHx8ICFjb25maWcudHlwZSkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFwiTm8gY2FyZCB0eXBlIGNvbmZpZ3VyZWQuXCIsIGNvbmZpZyk7XG4gIH1cblxuICBpZiAoY29uZmlnLnR5cGUuc3RhcnRzV2l0aChDVVNUT01fVFlQRV9QUkVGSVgpKSB7XG4gICAgY29uc3QgdGFnID0gY29uZmlnLnR5cGUuc3Vic3RyKENVU1RPTV9UWVBFX1BSRUZJWC5sZW5ndGgpO1xuXG4gICAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldCh0YWcpKSB7XG4gICAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBDdXN0b20gZWxlbWVudCBkb2Vzbid0IGV4aXN0OiAke3RhZ30uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJOb25lXCI7XG4gICAgY29uc3QgdGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgIH0sIFRJTUVPVVQpO1xuXG4gICAgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQodGFnKS50aGVuKCgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICBmaXJlRXZlbnQoZWxlbWVudCwgXCJsbC1yZWJ1aWxkXCIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBpZiAoIUNBUkRfVFlQRVMuaGFzKGNvbmZpZy50eXBlKSkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFxuICAgICAgYFVua25vd24gY2FyZCB0eXBlIGVuY291bnRlcmVkOiAke2NvbmZpZy50eXBlfS5gLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBfY3JlYXRlRWxlbWVudChgaHVpLSR7Y29uZmlnLnR5cGV9LWNhcmRgLCBjb25maWcpO1xufTtcbiIsImltcG9ydCBkZWVwQ2xvbmUgZnJvbSBcImRlZXAtY2xvbmUtc2ltcGxlXCI7XG5cbmltcG9ydCBcIi4uL2VsZW1lbnRzL2h1aS1jb25kaXRpb25hbC1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktaWNvbi1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktaW1hZ2UtZWxlbWVudFwiO1xuaW1wb3J0IFwiLi4vZWxlbWVudHMvaHVpLXNlcnZpY2UtYnV0dG9uLWVsZW1lbnRcIjtcbmltcG9ydCBcIi4uL2VsZW1lbnRzL2h1aS1zdGF0ZS1iYWRnZS1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktc3RhdGUtaWNvbi1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktc3RhdGUtbGFiZWwtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQge1xuICBjcmVhdGVFcnJvckNhcmRFbGVtZW50LFxuICBjcmVhdGVFcnJvckNhcmRDb25maWcsXG4gIEh1aUVycm9yQ2FyZCxcbn0gZnJvbSBcIi4uL2NhcmRzL2h1aS1lcnJvci1jYXJkXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUVsZW1lbnRDb25maWcsIExvdmVsYWNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50cy90eXBlc1wiO1xuXG5jb25zdCBDVVNUT01fVFlQRV9QUkVGSVggPSBcImN1c3RvbTpcIjtcbmNvbnN0IEVMRU1FTlRfVFlQRVMgPSBuZXcgU2V0KFtcbiAgXCJjb25kaXRpb25hbFwiLFxuICBcImljb25cIixcbiAgXCJpbWFnZVwiLFxuICBcInNlcnZpY2UtYnV0dG9uXCIsXG4gIFwic3RhdGUtYmFkZ2VcIixcbiAgXCJzdGF0ZS1pY29uXCIsXG4gIFwic3RhdGUtbGFiZWxcIixcbl0pO1xuY29uc3QgVElNRU9VVCA9IDIwMDA7XG5cbmNvbnN0IF9jcmVhdGVFbGVtZW50ID0gKFxuICB0YWc6IHN0cmluZyxcbiAgY29uZmlnOiBMb3ZlbGFjZUVsZW1lbnRDb25maWdcbik6IExvdmVsYWNlRWxlbWVudCB8IEh1aUVycm9yQ2FyZCA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZykgYXMgTG92ZWxhY2VFbGVtZW50O1xuICB0cnkge1xuICAgIGVsZW1lbnQuc2V0Q29uZmlnKGRlZXBDbG9uZShjb25maWcpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc29sZS5lcnJvcih0YWcsIGVycik7XG4gICAgcmV0dXJuIF9jcmVhdGVFcnJvckVsZW1lbnQoZXJyLm1lc3NhZ2UsIGNvbmZpZyk7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5jb25zdCBfY3JlYXRlRXJyb3JFbGVtZW50ID0gKFxuICBlcnJvcjogc3RyaW5nLFxuICBjb25maWc6IExvdmVsYWNlRWxlbWVudENvbmZpZ1xuKTogSHVpRXJyb3JDYXJkID0+IGNyZWF0ZUVycm9yQ2FyZEVsZW1lbnQoY3JlYXRlRXJyb3JDYXJkQ29uZmlnKGVycm9yLCBjb25maWcpKTtcblxuZnVuY3Rpb24gX2hpZGVFcnJvckVsZW1lbnQoZWxlbWVudCkge1xuICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIk5vbmVcIjtcbiAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICB9LCBUSU1FT1VUKTtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUh1aUVsZW1lbnQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VFbGVtZW50Q29uZmlnXG4pOiBMb3ZlbGFjZUVsZW1lbnQgfCBIdWlFcnJvckNhcmQgPT4ge1xuICBpZiAoIWNvbmZpZyB8fCB0eXBlb2YgY29uZmlnICE9PSBcIm9iamVjdFwiIHx8ICFjb25maWcudHlwZSkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFwiTm8gZWxlbWVudCB0eXBlIGNvbmZpZ3VyZWQuXCIsIGNvbmZpZyk7XG4gIH1cblxuICBpZiAoY29uZmlnLnR5cGUuc3RhcnRzV2l0aChDVVNUT01fVFlQRV9QUkVGSVgpKSB7XG4gICAgY29uc3QgdGFnID0gY29uZmlnLnR5cGUuc3Vic3RyKENVU1RPTV9UWVBFX1BSRUZJWC5sZW5ndGgpO1xuXG4gICAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldCh0YWcpKSB7XG4gICAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBDdXN0b20gZWxlbWVudCBkb2Vzbid0IGV4aXN0OiAke3RhZ30uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgdGltZXIgPSBfaGlkZUVycm9yRWxlbWVudChlbGVtZW50KTtcblxuICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKHRhZykudGhlbigoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgZmlyZUV2ZW50KGVsZW1lbnQsIFwibGwtcmVidWlsZFwiKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgaWYgKCFFTEVNRU5UX1RZUEVTLmhhcyhjb25maWcudHlwZSkpIHtcbiAgICByZXR1cm4gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBVbmtub3duIGVsZW1lbnQgdHlwZSBlbmNvdW50ZXJlZDogJHtjb25maWcudHlwZX0uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQoYGh1aS0ke2NvbmZpZy50eXBlfS1lbGVtZW50YCwgY29uZmlnKTtcbn07XG4iLCJpbXBvcnQgZGVlcENsb25lIGZyb20gXCJkZWVwLWNsb25lLXNpbXBsZVwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZUVycm9yQ2FyZEVsZW1lbnQsXG4gIGNyZWF0ZUVycm9yQ2FyZENvbmZpZyxcbiAgSHVpRXJyb3JDYXJkLFxufSBmcm9tIFwiLi4vY2FyZHMvaHVpLWVycm9yLWNhcmRcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1jbGltYXRlLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1jb3Zlci1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktZ3JvdXAtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLWlucHV0LWRhdGV0aW1lLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1pbnB1dC1udW1iZXItZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLWlucHV0LXNlbGVjdC1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktaW5wdXQtdGV4dC1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktbG9jay1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktbWVkaWEtcGxheWVyLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1zY2VuZS1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktc2NyaXB0LWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1zZW5zb3ItZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLXRleHQtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLXRpbWVyLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS10b2dnbGUtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vc3BlY2lhbC1yb3dzL2h1aS1jYWxsLXNlcnZpY2Utcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLWRpdmlkZXItcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLXNlY3Rpb24tcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLXdlYmxpbmstcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLWNhc3Qtcm93XCI7XG5pbXBvcnQgeyBFbnRpdHlDb25maWcsIEVudGl0eVJvdyB9IGZyb20gXCIuLi9lbnRpdHktcm93cy90eXBlc1wiO1xuXG5jb25zdCBDVVNUT01fVFlQRV9QUkVGSVggPSBcImN1c3RvbTpcIjtcbmNvbnN0IFNQRUNJQUxfVFlQRVMgPSBuZXcgU2V0KFtcbiAgXCJjYWxsLXNlcnZpY2VcIixcbiAgXCJkaXZpZGVyXCIsXG4gIFwic2VjdGlvblwiLFxuICBcIndlYmxpbmtcIixcbiAgXCJjYXN0XCIsXG4gIFwic2VsZWN0XCIsXG5dKTtcbmNvbnN0IERPTUFJTl9UT19FTEVNRU5UX1RZUEUgPSB7XG4gIGFsZXJ0OiBcInRvZ2dsZVwiLFxuICBhdXRvbWF0aW9uOiBcInRvZ2dsZVwiLFxuICBjbGltYXRlOiBcImNsaW1hdGVcIixcbiAgY292ZXI6IFwiY292ZXJcIixcbiAgZmFuOiBcInRvZ2dsZVwiLFxuICBncm91cDogXCJncm91cFwiLFxuICBpbnB1dF9ib29sZWFuOiBcInRvZ2dsZVwiLFxuICBpbnB1dF9udW1iZXI6IFwiaW5wdXQtbnVtYmVyXCIsXG4gIGlucHV0X3NlbGVjdDogXCJpbnB1dC1zZWxlY3RcIixcbiAgaW5wdXRfdGV4dDogXCJpbnB1dC10ZXh0XCIsXG4gIGxpZ2h0OiBcInRvZ2dsZVwiLFxuICBsb2NrOiBcImxvY2tcIixcbiAgbWVkaWFfcGxheWVyOiBcIm1lZGlhLXBsYXllclwiLFxuICByZW1vdGU6IFwidG9nZ2xlXCIsXG4gIHNjZW5lOiBcInNjZW5lXCIsXG4gIHNjcmlwdDogXCJzY3JpcHRcIixcbiAgc2Vuc29yOiBcInNlbnNvclwiLFxuICB0aW1lcjogXCJ0aW1lclwiLFxuICBzd2l0Y2g6IFwidG9nZ2xlXCIsXG4gIHZhY3V1bTogXCJ0b2dnbGVcIixcbiAgLy8gVGVtcG9yYXJ5LiBPbmNlIGNsaW1hdGUgaXMgcmV3cml0dGVuLFxuICAvLyB3YXRlciBoZWF0ZXIgc2hvdWxkIGdldCBpdCdzIG93biByb3cuXG4gIHdhdGVyX2hlYXRlcjogXCJjbGltYXRlXCIsXG4gIGlucHV0X2RhdGV0aW1lOiBcImlucHV0LWRhdGV0aW1lXCIsXG59O1xuY29uc3QgVElNRU9VVCA9IDIwMDA7XG5cbmNvbnN0IF9jcmVhdGVFbGVtZW50ID0gKFxuICB0YWc6IHN0cmluZyxcbiAgY29uZmlnOiBFbnRpdHlDb25maWdcbik6IEVudGl0eVJvdyB8IEh1aUVycm9yQ2FyZCA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZykgYXMgRW50aXR5Um93O1xuICB0cnkge1xuICAgIGVsZW1lbnQuc2V0Q29uZmlnKGRlZXBDbG9uZShjb25maWcpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc29sZS5lcnJvcih0YWcsIGVycik7XG4gICAgcmV0dXJuIF9jcmVhdGVFcnJvckVsZW1lbnQoZXJyLm1lc3NhZ2UsIGNvbmZpZyk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbmNvbnN0IF9jcmVhdGVFcnJvckVsZW1lbnQgPSAoXG4gIGVycm9yOiBzdHJpbmcsXG4gIGNvbmZpZzogRW50aXR5Q29uZmlnXG4pOiBIdWlFcnJvckNhcmQgPT4gY3JlYXRlRXJyb3JDYXJkRWxlbWVudChjcmVhdGVFcnJvckNhcmRDb25maWcoZXJyb3IsIGNvbmZpZykpO1xuXG5jb25zdCBfaGlkZUVycm9yRWxlbWVudCA9IChlbGVtZW50KSA9PiB7XG4gIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiTm9uZVwiO1xuICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gIH0sIFRJTUVPVVQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJvd0VsZW1lbnQgPSAoXG4gIGNvbmZpZzogRW50aXR5Q29uZmlnXG4pOiBFbnRpdHlSb3cgfCBIdWlFcnJvckNhcmQgPT4ge1xuICBsZXQgdGFnO1xuXG4gIGlmIChcbiAgICAhY29uZmlnIHx8XG4gICAgdHlwZW9mIGNvbmZpZyAhPT0gXCJvYmplY3RcIiB8fFxuICAgICghY29uZmlnLmVudGl0eSAmJiAhY29uZmlnLnR5cGUpXG4gICkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFwiSW52YWxpZCBjb25maWcgZ2l2ZW4uXCIsIGNvbmZpZyk7XG4gIH1cblxuICBjb25zdCB0eXBlID0gY29uZmlnLnR5cGUgfHwgXCJkZWZhdWx0XCI7XG4gIGlmIChTUEVDSUFMX1RZUEVTLmhhcyh0eXBlKSkge1xuICAgIHJldHVybiBfY3JlYXRlRWxlbWVudChgaHVpLSR7dHlwZX0tcm93YCwgY29uZmlnKTtcbiAgfVxuXG4gIGlmICh0eXBlLnN0YXJ0c1dpdGgoQ1VTVE9NX1RZUEVfUFJFRklYKSkge1xuICAgIHRhZyA9IHR5cGUuc3Vic3RyKENVU1RPTV9UWVBFX1BSRUZJWC5sZW5ndGgpO1xuXG4gICAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldCh0YWcpKSB7XG4gICAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBDdXN0b20gZWxlbWVudCBkb2Vzbid0IGV4aXN0OiAke3RhZ30uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgdGltZXIgPSBfaGlkZUVycm9yRWxlbWVudChlbGVtZW50KTtcblxuICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKHRhZykudGhlbigoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgZmlyZUV2ZW50KGVsZW1lbnQsIFwibGwtcmVidWlsZFwiKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgaWYgKCFjb25maWcuZW50aXR5KSB7XG4gICAgcmV0dXJuIF9jcmVhdGVFcnJvckVsZW1lbnQoXCJJbnZhbGlkIGNvbmZpZyBnaXZlbi5cIiwgY29uZmlnKTtcbiAgfVxuXG4gIGNvbnN0IGRvbWFpbiA9IGNvbmZpZy5lbnRpdHkuc3BsaXQoXCIuXCIsIDEpWzBdO1xuICB0YWcgPSBgaHVpLSR7RE9NQUlOX1RPX0VMRU1FTlRfVFlQRVtkb21haW5dIHx8IFwidGV4dFwifS1lbnRpdHktcm93YDtcblxuICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xufTtcbiIsImltcG9ydCB7IGRpcmVjdGl2ZSwgUHJvcGVydHlQYXJ0IH0gZnJvbSBcImxpdC1odG1sXCI7XG5pbXBvcnQgXCJAbWF0ZXJpYWwvbXdjLXJpcHBsZVwiO1xuXG5jb25zdCBpc1RvdWNoID1cbiAgXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cgfHxcbiAgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCB8fFxuICBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDA7XG5cbmludGVyZmFjZSBMb25nUHJlc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGhvbGRUaW1lOiBudW1iZXI7XG4gIGJpbmQoZWxlbWVudDogRWxlbWVudCk6IHZvaWQ7XG59XG5pbnRlcmZhY2UgTG9uZ1ByZXNzRWxlbWVudCBleHRlbmRzIEVsZW1lbnQge1xuICBsb25nUHJlc3M/OiBib29sZWFuO1xufVxuXG5jbGFzcyBMb25nUHJlc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCBpbXBsZW1lbnRzIExvbmdQcmVzcyB7XG4gIHB1YmxpYyBob2xkVGltZTogbnVtYmVyO1xuICBwdWJsaWMgcmlwcGxlOiBhbnk7XG4gIHByb3RlY3RlZCB0aW1lcjogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcm90ZWN0ZWQgaGVsZDogYm9vbGVhbjtcbiAgcHJvdGVjdGVkIGNvb2xkb3duU3RhcnQ6IGJvb2xlYW47XG4gIHByb3RlY3RlZCBjb29sZG93bkVuZDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaG9sZFRpbWUgPSA1MDA7XG4gICAgdGhpcy5yaXBwbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibXdjLXJpcHBsZVwiKTtcbiAgICB0aGlzLnRpbWVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGVsZCA9IGZhbHNlO1xuICAgIHRoaXMuY29vbGRvd25TdGFydCA9IGZhbHNlO1xuICAgIHRoaXMuY29vbGRvd25FbmQgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuc3R5bGUsIHtcbiAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICB3aWR0aDogaXNUb3VjaCA/IFwiMTAwcHhcIiA6IFwiNTBweFwiLFxuICAgICAgaGVpZ2h0OiBpc1RvdWNoID8gXCIxMDBweFwiIDogXCI1MHB4XCIsXG4gICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC01MCUsIC01MCUpXCIsXG4gICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIixcbiAgICB9KTtcblxuICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5yaXBwbGUpO1xuICAgIHRoaXMucmlwcGxlLnByaW1hcnkgPSB0cnVlO1xuXG4gICAgW1xuICAgICAgXCJ0b3VjaGNhbmNlbFwiLFxuICAgICAgXCJtb3VzZW91dFwiLFxuICAgICAgXCJtb3VzZXVwXCIsXG4gICAgICBcInRvdWNobW92ZVwiLFxuICAgICAgXCJtb3VzZXdoZWVsXCIsXG4gICAgICBcIndoZWVsXCIsXG4gICAgICBcInNjcm9sbFwiLFxuICAgIF0uZm9yRWFjaCgoZXYpID0+IHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIGV2LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuICAgICAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgICAgIHRoaXMudGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9XG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGJpbmQoZWxlbWVudDogTG9uZ1ByZXNzRWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LmxvbmdQcmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbGVtZW50LmxvbmdQcmVzcyA9IHRydWU7XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCAoZXY6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBlID0gZXYgfHwgd2luZG93LmV2ZW50O1xuICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjbGlja1N0YXJ0ID0gKGV2OiBFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMuY29vbGRvd25TdGFydCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmhlbGQgPSBmYWxzZTtcbiAgICAgIGxldCB4O1xuICAgICAgbGV0IHk7XG4gICAgICBpZiAoKGV2IGFzIFRvdWNoRXZlbnQpLnRvdWNoZXMpIHtcbiAgICAgICAgeCA9IChldiBhcyBUb3VjaEV2ZW50KS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICB5ID0gKGV2IGFzIFRvdWNoRXZlbnQpLnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gKGV2IGFzIE1vdXNlRXZlbnQpLnBhZ2VYO1xuICAgICAgICB5ID0gKGV2IGFzIE1vdXNlRXZlbnQpLnBhZ2VZO1xuICAgICAgfVxuICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zdGFydEFuaW1hdGlvbih4LCB5KTtcbiAgICAgICAgdGhpcy5oZWxkID0gdHJ1ZTtcbiAgICAgIH0sIHRoaXMuaG9sZFRpbWUpO1xuXG4gICAgICB0aGlzLmNvb2xkb3duU3RhcnQgPSB0cnVlO1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gKHRoaXMuY29vbGRvd25TdGFydCA9IGZhbHNlKSwgMTAwKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xpY2tFbmQgPSAoZXY6IEV2ZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuY29vbGRvd25FbmQgfHxcbiAgICAgICAgKFtcInRvdWNoZW5kXCIsIFwidG91Y2hjYW5jZWxcIl0uaW5jbHVkZXMoZXYudHlwZSkgJiZcbiAgICAgICAgICB0aGlzLnRpbWVyID09PSB1bmRlZmluZWQpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB0aGlzLnRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKHRoaXMuaGVsZCkge1xuICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaGEtaG9sZFwiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaGEtY2xpY2tcIikpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb29sZG93bkVuZCA9IHRydWU7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiAodGhpcy5jb29sZG93bkVuZCA9IGZhbHNlKSwgMTAwKTtcbiAgICB9O1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBjbGlja1N0YXJ0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgY2xpY2tFbmQpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIGNsaWNrRW5kKTtcblxuICAgIC8vIGlPUyAxMyBzZW5kcyBhIGNvbXBsZXRlIG5vcm1hbCB0b3VjaHN0YXJ0LXRvdWNoZW5kIHNlcmllcyBvZiBldmVudHMgZm9sbG93ZWQgYnkgYSBtb3VzZWRvd24tY2xpY2sgc2VyaWVzLlxuICAgIC8vIFRoYXQgbWlnaHQgYmUgYSBidWcsIGJ1dCB1bnRpbCBpdCdzIGZpeGVkLCB0aGlzIHNob3VsZCBtYWtlIGxvbmctcHJlc3Mgd29yay5cbiAgICAvLyBJZiBpdCdzIG5vdCBhIGJ1ZyB0aGF0IGlzIGZpeGVkLCB0aGlzIG1pZ2h0IG5lZWQgdXBkYXRpbmcgd2l0aCB0aGUgbmV4dCBpT1MgdmVyc2lvbi5cbiAgICAvLyBOb3RlIHRoYXQgYWxsIGV2ZW50cyAoYm90aCB0b3VjaCBhbmQgbW91c2UpIG11c3QgYmUgbGlzdGVuZWQgZm9yIGluIG9yZGVyIHRvIHdvcmsgb24gY29tcHV0ZXJzIHdpdGggYm90aCBtb3VzZSBhbmQgdG91Y2hzY3JlZW4uXG4gICAgY29uc3QgaXNJT1MxMyA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUgT1MgMTNfLyk7XG4gICAgaWYgKCFpc0lPUzEzKSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgY2xpY2tTdGFydCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tFbmQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRBbmltYXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuc3R5bGUsIHtcbiAgICAgIGxlZnQ6IGAke3h9cHhgLFxuICAgICAgdG9wOiBgJHt5fXB4YCxcbiAgICAgIGRpc3BsYXk6IG51bGwsXG4gICAgfSk7XG4gICAgdGhpcy5yaXBwbGUuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnJpcHBsZS5hY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMucmlwcGxlLnVuYm91bmRlZCA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIHN0b3BBbmltYXRpb24oKSB7XG4gICAgdGhpcy5yaXBwbGUuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5yaXBwbGUuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImxvbmctcHJlc3NcIiwgTG9uZ1ByZXNzKTtcblxuY29uc3QgZ2V0TG9uZ1ByZXNzID0gKCk6IExvbmdQcmVzcyA9PiB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICBpZiAoYm9keS5xdWVyeVNlbGVjdG9yKFwibG9uZy1wcmVzc1wiKSkge1xuICAgIHJldHVybiBib2R5LnF1ZXJ5U2VsZWN0b3IoXCJsb25nLXByZXNzXCIpIGFzIExvbmdQcmVzcztcbiAgfVxuXG4gIGNvbnN0IGxvbmdwcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsb25nLXByZXNzXCIpO1xuICBib2R5LmFwcGVuZENoaWxkKGxvbmdwcmVzcyk7XG5cbiAgcmV0dXJuIGxvbmdwcmVzcyBhcyBMb25nUHJlc3M7XG59O1xuXG5leHBvcnQgY29uc3QgbG9uZ1ByZXNzQmluZCA9IChlbGVtZW50OiBMb25nUHJlc3NFbGVtZW50KSA9PiB7XG4gIGNvbnN0IGxvbmdwcmVzczogTG9uZ1ByZXNzID0gZ2V0TG9uZ1ByZXNzKCk7XG4gIGlmICghbG9uZ3ByZXNzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvbmdwcmVzcy5iaW5kKGVsZW1lbnQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvbmdQcmVzcyA9IGRpcmVjdGl2ZSgoKSA9PiAocGFydDogUHJvcGVydHlQYXJ0KSA9PiB7XG4gIGxvbmdQcmVzc0JpbmQocGFydC5jb21taXR0ZXIuZWxlbWVudCk7XG59KTtcbiIsImltcG9ydCB7IFNUQVRFU19PRkYgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgeyB0dXJuT25PZmZFbnRpdHkgfSBmcm9tIFwiLi90dXJuLW9uLW9mZi1lbnRpdHlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdHlwZXNcIjtcbmV4cG9ydCBjb25zdCB0b2dnbGVFbnRpdHkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBjb25zdCB0dXJuT24gPSBTVEFURVNfT0ZGLmluY2x1ZGVzKGhhc3Muc3RhdGVzW2VudGl0eUlkXS5zdGF0ZSk7XG4gIHJldHVybiB0dXJuT25PZmZFbnRpdHkoaGFzcywgZW50aXR5SWQsIHR1cm5Pbik7XG59O1xuIiwiaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBTVEFURVNfT0ZGIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgdHVybk9uT2ZmRW50aXRpZXMgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkczogc3RyaW5nW10sXG4gIHR1cm5PbiA9IHRydWVcbik6IHZvaWQgPT4ge1xuICBjb25zdCBkb21haW5zVG9DYWxsID0ge307XG4gIGVudGl0eUlkcy5mb3JFYWNoKChlbnRpdHlJZCkgPT4ge1xuICAgIGlmIChTVEFURVNfT0ZGLmluY2x1ZGVzKGhhc3Muc3RhdGVzW2VudGl0eUlkXS5zdGF0ZSkgPT09IHR1cm5Pbikge1xuICAgICAgY29uc3Qgc3RhdGVEb21haW4gPSBjb21wdXRlRG9tYWluKGVudGl0eUlkKTtcbiAgICAgIGNvbnN0IHNlcnZpY2VEb21haW4gPSBbXCJjb3ZlclwiLCBcImxvY2tcIl0uaW5jbHVkZXMoc3RhdGVEb21haW4pXG4gICAgICAgID8gc3RhdGVEb21haW5cbiAgICAgICAgOiBcImhvbWVhc3Npc3RhbnRcIjtcblxuICAgICAgaWYgKCEoc2VydmljZURvbWFpbiBpbiBkb21haW5zVG9DYWxsKSkge1xuICAgICAgICBkb21haW5zVG9DYWxsW3NlcnZpY2VEb21haW5dID0gW107XG4gICAgICB9XG4gICAgICBkb21haW5zVG9DYWxsW3NlcnZpY2VEb21haW5dLnB1c2goZW50aXR5SWQpO1xuICAgIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmtleXMoZG9tYWluc1RvQ2FsbCkuZm9yRWFjaCgoZG9tYWluKSA9PiB7XG4gICAgbGV0IHNlcnZpY2U7XG4gICAgc3dpdGNoIChkb21haW4pIHtcbiAgICAgIGNhc2UgXCJsb2NrXCI6XG4gICAgICAgIHNlcnZpY2UgPSB0dXJuT24gPyBcInVubG9ja1wiIDogXCJsb2NrXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNvdmVyXCI6XG4gICAgICAgIHNlcnZpY2UgPSB0dXJuT24gPyBcIm9wZW5fY292ZXJcIiA6IFwiY2xvc2VfY292ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZXJ2aWNlID0gdHVybk9uID8gXCJ0dXJuX29uXCIgOiBcInR1cm5fb2ZmXCI7XG4gICAgfVxuXG4gICAgY29uc3QgZW50aXRpZXMgPSBkb21haW5zVG9DYWxsW2RvbWFpbl07XG4gICAgaGFzcy5jYWxsU2VydmljZShkb21haW4sIHNlcnZpY2UsIHsgZW50aXR5X2lkOiBlbnRpdGllcyB9KTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCB0dXJuT25PZmZFbnRpdHkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIHR1cm5PbiA9IHRydWVcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBjb25zdCBzdGF0ZURvbWFpbiA9IGNvbXB1dGVEb21haW4oZW50aXR5SWQpO1xuICBjb25zdCBzZXJ2aWNlRG9tYWluID0gc3RhdGVEb21haW4gPT09IFwiZ3JvdXBcIiA/IFwiaG9tZWFzc2lzdGFudFwiIDogc3RhdGVEb21haW47XG5cbiAgbGV0IHNlcnZpY2U7XG4gIHN3aXRjaCAoc3RhdGVEb21haW4pIHtcbiAgICBjYXNlIFwibG9ja1wiOlxuICAgICAgc2VydmljZSA9IHR1cm5PbiA/IFwidW5sb2NrXCIgOiBcImxvY2tcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjb3ZlclwiOlxuICAgICAgc2VydmljZSA9IHR1cm5PbiA/IFwib3Blbl9jb3ZlclwiIDogXCJjbG9zZV9jb3ZlclwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHNlcnZpY2UgPSB0dXJuT24gPyBcInR1cm5fb25cIiA6IFwidHVybl9vZmZcIjtcbiAgfVxuXG4gIHJldHVybiBoYXNzLmNhbGxTZXJ2aWNlKHNlcnZpY2VEb21haW4sIHNlcnZpY2UsIHsgZW50aXR5X2lkOiBlbnRpdHlJZCB9KTtcbn07XG4iLCJpbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5leHBvcnQgY29uc3QgZXZhbHVhdGVGaWx0ZXIgPSAoc3RhdGVPYmo6IEhhc3NFbnRpdHksIGZpbHRlcjogYW55KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IG9wZXJhdG9yID0gZmlsdGVyLm9wZXJhdG9yIHx8IFwiPT1cIjtcbiAgY29uc3QgdmFsdWUgPSBmaWx0ZXIudmFsdWUgfHwgZmlsdGVyO1xuICBjb25zdCBzdGF0ZSA9IGZpbHRlci5hdHRyaWJ1dGVcbiAgICA/IHN0YXRlT2JqLmF0dHJpYnV0ZXNbZmlsdGVyLmF0dHJpYnV0ZV1cbiAgICA6IHN0YXRlT2JqLnN0YXRlO1xuXG4gIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICBjYXNlIFwiPT1cIjpcbiAgICAgIHJldHVybiBzdGF0ZSA9PT0gdmFsdWU7XG4gICAgY2FzZSBcIjw9XCI6XG4gICAgICByZXR1cm4gc3RhdGUgPD0gdmFsdWU7XG4gICAgY2FzZSBcIjxcIjpcbiAgICAgIHJldHVybiBzdGF0ZSA8IHZhbHVlO1xuICAgIGNhc2UgXCI+PVwiOlxuICAgICAgcmV0dXJuIHN0YXRlID49IHZhbHVlO1xuICAgIGNhc2UgXCI+XCI6XG4gICAgICByZXR1cm4gc3RhdGUgPiB2YWx1ZTtcbiAgICBjYXNlIFwiIT1cIjpcbiAgICAgIHJldHVybiBzdGF0ZSAhPT0gdmFsdWU7XG4gICAgY2FzZSBcInJlZ2V4XCI6IHtcbiAgICAgIHJldHVybiBzdGF0ZS5tYXRjaCh2YWx1ZSk7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50LCBHcm91cEVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHtcbiAgTG92ZWxhY2VDb25maWcsXG4gIExvdmVsYWNlQ2FyZENvbmZpZyxcbiAgTG92ZWxhY2VWaWV3Q29uZmlnLFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuaW1wb3J0IHtcbiAgSGFzc0VudGl0eSxcbiAgSGFzc0VudGl0aWVzLFxuICBIYXNzQ29uZmlnLFxufSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmltcG9ydCB7IGV4dHJhY3RWaWV3cyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2V4dHJhY3Rfdmlld3NcIjtcbmltcG9ydCB7IGdldFZpZXdFbnRpdGllcyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2dldF92aWV3X2VudGl0aWVzXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5pbXBvcnQgeyBzcGxpdEJ5R3JvdXBzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3BsaXRfYnlfZ3JvdXBzXCI7XG5pbXBvcnQgeyBjb21wdXRlT2JqZWN0SWQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX29iamVjdF9pZFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kb21haW5cIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuXG5pbXBvcnQgeyBFbnRpdHlSb3dDb25maWcsIFdlYmxpbmtDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IExvY2FsaXplRnVuYyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vdHJhbnNsYXRpb25zL2xvY2FsaXplXCI7XG5pbXBvcnQgeyBFbnRpdGllc0NhcmRDb25maWcgfSBmcm9tIFwiLi4vY2FyZHMvdHlwZXNcIjtcbmltcG9ydCB7XG4gIHN1YnNjcmliZUFyZWFSZWdpc3RyeSxcbiAgQXJlYVJlZ2lzdHJ5RW50cnksXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2FyZWFfcmVnaXN0cnlcIjtcbmltcG9ydCB7IHN1YnNjcmliZU9uZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vdXRpbC9zdWJzY3JpYmUtb25lXCI7XG5pbXBvcnQge1xuICBzdWJzY3JpYmVEZXZpY2VSZWdpc3RyeSxcbiAgRGV2aWNlUmVnaXN0cnlFbnRyeSxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZGV2aWNlX3JlZ2lzdHJ5XCI7XG5pbXBvcnQge1xuICBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeSxcbiAgRW50aXR5UmVnaXN0cnlFbnRyeSxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZW50aXR5X3JlZ2lzdHJ5XCI7XG5cbmNvbnN0IERFRkFVTFRfVklFV19FTlRJVFlfSUQgPSBcImdyb3VwLmRlZmF1bHRfdmlld1wiO1xuY29uc3QgRE9NQUlOU19CQURHRVMgPSBbXG4gIFwiYmluYXJ5X3NlbnNvclwiLFxuICBcInBlcnNvblwiLFxuICBcImRldmljZV90cmFja2VyXCIsXG4gIFwibWFpbGJveFwiLFxuICBcInNlbnNvclwiLFxuICBcInN1blwiLFxuICBcInRpbWVyXCIsXG5dO1xuY29uc3QgSElERV9ET01BSU4gPSBuZXcgU2V0KFtcbiAgXCJwZXJzaXN0ZW50X25vdGlmaWNhdGlvblwiLFxuICBcImNvbmZpZ3VyYXRvclwiLFxuICBcImdlb19sb2NhdGlvblwiLFxuXSk7XG5cbmxldCBzdWJzY3JpYmVkUmVnaXN0cmllcyA9IGZhbHNlO1xuXG5pbnRlcmZhY2UgU3BsaXR0ZWRCeUFyZWFzIHtcbiAgYXJlYXNXaXRoRW50aXRpZXM6IEFycmF5PFtBcmVhUmVnaXN0cnlFbnRyeSwgSGFzc0VudGl0eVtdXT47XG4gIG90aGVyRW50aXRpZXM6IEhhc3NFbnRpdGllcztcbn1cblxuY29uc3Qgc3BsaXRCeUFyZWFzID0gKFxuICBhcmVhRW50cmllczogQXJlYVJlZ2lzdHJ5RW50cnlbXSxcbiAgZGV2aWNlRW50cmllczogRGV2aWNlUmVnaXN0cnlFbnRyeVtdLFxuICBlbnRpdHlFbnRyaWVzOiBFbnRpdHlSZWdpc3RyeUVudHJ5W10sXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXNcbik6IFNwbGl0dGVkQnlBcmVhcyA9PiB7XG4gIGNvbnN0IGFsbEVudGl0aWVzID0geyAuLi5lbnRpdGllcyB9O1xuICBjb25zdCBhcmVhc1dpdGhFbnRpdGllczogU3BsaXR0ZWRCeUFyZWFzW1wiYXJlYXNXaXRoRW50aXRpZXNcIl0gPSBbXTtcblxuICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYUVudHJpZXMpIHtcbiAgICBjb25zdCBhcmVhRW50aXRpZXM6IEhhc3NFbnRpdHlbXSA9IFtdO1xuICAgIGNvbnN0IGFyZWFEZXZpY2VzID0gbmV3IFNldChcbiAgICAgIGRldmljZUVudHJpZXNcbiAgICAgICAgLmZpbHRlcigoZGV2aWNlKSA9PiBkZXZpY2UuYXJlYV9pZCA9PT0gYXJlYS5hcmVhX2lkKVxuICAgICAgICAubWFwKChkZXZpY2UpID0+IGRldmljZS5pZClcbiAgICApO1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0eUVudHJpZXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYXJlYURldmljZXMuaGFzKFxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBlbnRpdHkuZGV2aWNlX2lkXG4gICAgICAgICkgJiZcbiAgICAgICAgZW50aXR5LmVudGl0eV9pZCBpbiBhbGxFbnRpdGllc1xuICAgICAgKSB7XG4gICAgICAgIGFyZWFFbnRpdGllcy5wdXNoKGFsbEVudGl0aWVzW2VudGl0eS5lbnRpdHlfaWRdKTtcbiAgICAgICAgZGVsZXRlIGFsbEVudGl0aWVzW2VudGl0eS5lbnRpdHlfaWRdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYXJlYUVudGl0aWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFyZWFzV2l0aEVudGl0aWVzLnB1c2goW2FyZWEsIGFyZWFFbnRpdGllc10pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGFyZWFzV2l0aEVudGl0aWVzLFxuICAgIG90aGVyRW50aXRpZXM6IGFsbEVudGl0aWVzLFxuICB9O1xufTtcblxuY29uc3QgY29tcHV0ZUNhcmRzID0gKFxuICBzdGF0ZXM6IEFycmF5PFtzdHJpbmcsIEhhc3NFbnRpdHldPixcbiAgZW50aXR5Q2FyZE9wdGlvbnM6IFBhcnRpYWw8RW50aXRpZXNDYXJkQ29uZmlnPlxuKTogTG92ZWxhY2VDYXJkQ29uZmlnW10gPT4ge1xuICBjb25zdCBjYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICAvLyBGb3IgZW50aXR5IGNhcmRcbiAgY29uc3QgZW50aXRpZXM6IEFycmF5PHN0cmluZyB8IEVudGl0eVJvd0NvbmZpZz4gPSBbXTtcblxuICBmb3IgKGNvbnN0IFtlbnRpdHlJZCwgc3RhdGVPYmpdIG9mIHN0YXRlcykge1xuICAgIGNvbnN0IGRvbWFpbiA9IGNvbXB1dGVEb21haW4oZW50aXR5SWQpO1xuXG4gICAgaWYgKGRvbWFpbiA9PT0gXCJhbGFybV9jb250cm9sX3BhbmVsXCIpIHtcbiAgICAgIGNhcmRzLnB1c2goe1xuICAgICAgICB0eXBlOiBcImFsYXJtLXBhbmVsXCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJjYW1lcmFcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwicGljdHVyZS1lbnRpdHlcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcImNsaW1hdGVcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidGhlcm1vc3RhdFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwiaGlzdG9yeV9ncmFwaFwiICYmIHN0YXRlT2JqKSB7XG4gICAgICBjYXJkcy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJoaXN0b3J5LWdyYXBoXCIsXG4gICAgICAgIGVudGl0aWVzOiBzdGF0ZU9iai5hdHRyaWJ1dGVzLmVudGl0eV9pZCxcbiAgICAgICAgaG91cnNfdG9fc2hvdzogc3RhdGVPYmouYXR0cmlidXRlcy5ob3Vyc190b19zaG93LFxuICAgICAgICB0aXRsZTogc3RhdGVPYmouYXR0cmlidXRlcy5mcmllbmRseV9uYW1lLFxuICAgICAgICByZWZyZXNoX2ludGVydmFsOiBzdGF0ZU9iai5hdHRyaWJ1dGVzLnJlZnJlc2gsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJtZWRpYV9wbGF5ZXJcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwibWVkaWEtY29udHJvbFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwicGxhbnRcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwicGxhbnQtc3RhdHVzXCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJ3ZWF0aGVyXCIpIHtcbiAgICAgIGNhcmRzLnB1c2goe1xuICAgICAgICB0eXBlOiBcIndlYXRoZXItZm9yZWNhc3RcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcIndlYmxpbmtcIiAmJiBzdGF0ZU9iaikge1xuICAgICAgY29uc3QgY29uZjogV2VibGlua0NvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJ3ZWJsaW5rXCIsXG4gICAgICAgIHVybDogc3RhdGVPYmouc3RhdGUsXG4gICAgICAgIG5hbWU6IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopLFxuICAgICAgfTtcbiAgICAgIGlmIChcImljb25cIiBpbiBzdGF0ZU9iai5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNvbmYuaWNvbiA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuaWNvbjtcbiAgICAgIH1cbiAgICAgIGVudGl0aWVzLnB1c2goY29uZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGl0aWVzLnB1c2goZW50aXR5SWQpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgY2FyZHMudW5zaGlmdCh7XG4gICAgICB0eXBlOiBcImVudGl0aWVzXCIsXG4gICAgICBlbnRpdGllcyxcbiAgICAgIC4uLmVudGl0eUNhcmRPcHRpb25zLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGNhcmRzO1xufTtcblxuY29uc3QgY29tcHV0ZURlZmF1bHRWaWV3U3RhdGVzID0gKGVudGl0aWVzOiBIYXNzRW50aXRpZXMpOiBIYXNzRW50aXRpZXMgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSB7fTtcbiAgT2JqZWN0LmtleXMoZW50aXRpZXMpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSBlbnRpdGllc1tlbnRpdHlJZF07XG4gICAgaWYgKFxuICAgICAgIXN0YXRlT2JqLmF0dHJpYnV0ZXMuaGlkZGVuICYmXG4gICAgICAhSElERV9ET01BSU4uaGFzKGNvbXB1dGVTdGF0ZURvbWFpbihzdGF0ZU9iaikpXG4gICAgKSB7XG4gICAgICBzdGF0ZXNbZW50aXR5SWRdID0gZW50aXRpZXNbZW50aXR5SWRdO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzdGF0ZXM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVEZWZhdWx0Vmlld0NvbmZpZyA9IChcbiAgYXJlYUVudHJpZXM6IEFyZWFSZWdpc3RyeUVudHJ5W10sXG4gIGRldmljZUVudHJpZXM6IERldmljZVJlZ2lzdHJ5RW50cnlbXSxcbiAgZW50aXR5RW50cmllczogRW50aXR5UmVnaXN0cnlFbnRyeVtdLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzLFxuICBsb2NhbGl6ZTogTG9jYWxpemVGdW5jXG4pOiBMb3ZlbGFjZVZpZXdDb25maWcgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSBjb21wdXRlRGVmYXVsdFZpZXdTdGF0ZXMoZW50aXRpZXMpO1xuICBjb25zdCBwYXRoID0gXCJkZWZhdWx0X3ZpZXdcIjtcbiAgY29uc3QgdGl0bGUgPSBcIkhvbWVcIjtcbiAgY29uc3QgaWNvbiA9IHVuZGVmaW5lZDtcblxuICAvLyBJbiB0aGUgY2FzZSBvZiBhIGRlZmF1bHQgdmlldywgd2Ugd2FudCB0byB1c2UgdGhlIGdyb3VwIG9yZGVyIGF0dHJpYnV0ZVxuICBjb25zdCBncm91cE9yZGVycyA9IHt9O1xuICBPYmplY3Qua2V5cyhzdGF0ZXMpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSBzdGF0ZXNbZW50aXR5SWRdO1xuICAgIGlmIChzdGF0ZU9iai5hdHRyaWJ1dGVzLm9yZGVyKSB7XG4gICAgICBncm91cE9yZGVyc1tlbnRpdHlJZF0gPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLm9yZGVyO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc3BsaXR0ZWRCeUFyZWFzID0gc3BsaXRCeUFyZWFzKFxuICAgIGFyZWFFbnRyaWVzLFxuICAgIGRldmljZUVudHJpZXMsXG4gICAgZW50aXR5RW50cmllcyxcbiAgICBzdGF0ZXNcbiAgKTtcblxuICBjb25zdCBjb25maWcgPSBnZW5lcmF0ZVZpZXdDb25maWcoXG4gICAgbG9jYWxpemUsXG4gICAgcGF0aCxcbiAgICB0aXRsZSxcbiAgICBpY29uLFxuICAgIHNwbGl0dGVkQnlBcmVhcy5vdGhlckVudGl0aWVzLFxuICAgIGdyb3VwT3JkZXJzXG4gICk7XG5cbiAgY29uc3QgYXJlYUNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gIHNwbGl0dGVkQnlBcmVhcy5hcmVhc1dpdGhFbnRpdGllcy5mb3JFYWNoKChbYXJlYSwgYXJlYUVudGl0aWVzXSkgPT4ge1xuICAgIGFyZWFDYXJkcy5wdXNoKFxuICAgICAgLi4uY29tcHV0ZUNhcmRzKFxuICAgICAgICBhcmVhRW50aXRpZXMubWFwKChlbnRpdHkpID0+IFtlbnRpdHkuZW50aXR5X2lkLCBlbnRpdHldKSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBhcmVhLm5hbWUsXG4gICAgICAgICAgc2hvd19oZWFkZXJfdG9nZ2xlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcbiAgfSk7XG5cbiAgY29uZmlnLmNhcmRzIS51bnNoaWZ0KC4uLmFyZWFDYXJkcyk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG5cbmNvbnN0IGdlbmVyYXRlVmlld0NvbmZpZyA9IChcbiAgbG9jYWxpemU6IExvY2FsaXplRnVuYyxcbiAgcGF0aDogc3RyaW5nLFxuICB0aXRsZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBpY29uOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXMsXG4gIGdyb3VwT3JkZXJzOiB7IFtlbnRpdHlJZDogc3RyaW5nXTogbnVtYmVyIH1cbik6IExvdmVsYWNlVmlld0NvbmZpZyA9PiB7XG4gIGNvbnN0IHNwbGl0dGVkID0gc3BsaXRCeUdyb3VwcyhlbnRpdGllcyk7XG4gIHNwbGl0dGVkLmdyb3Vwcy5zb3J0KFxuICAgIChncjEsIGdyMikgPT4gZ3JvdXBPcmRlcnNbZ3IxLmVudGl0eV9pZF0gLSBncm91cE9yZGVyc1tncjIuZW50aXR5X2lkXVxuICApO1xuXG4gIGNvbnN0IGJhZGdlRW50aXRpZXM6IHsgW2RvbWFpbjogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xuICBjb25zdCB1bmdyb3VwZWRFbnRpdGl0ZXM6IHsgW2RvbWFpbjogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xuXG4gIC8vIE9yZ2FuaXplIHVuZ3JvdXBlZCBlbnRpdGllcyBpbiBiYWRnZXMvdW5ncm91cGVkIHRoaW5nc1xuICBPYmplY3Qua2V5cyhzcGxpdHRlZC51bmdyb3VwZWQpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBzcGxpdHRlZC51bmdyb3VwZWRbZW50aXR5SWRdO1xuICAgIGNvbnN0IGRvbWFpbiA9IGNvbXB1dGVTdGF0ZURvbWFpbihzdGF0ZSk7XG5cbiAgICBjb25zdCBjb2xsID0gRE9NQUlOU19CQURHRVMuaW5jbHVkZXMoZG9tYWluKVxuICAgICAgPyBiYWRnZUVudGl0aWVzXG4gICAgICA6IHVuZ3JvdXBlZEVudGl0aXRlcztcblxuICAgIGlmICghKGRvbWFpbiBpbiBjb2xsKSkge1xuICAgICAgY29sbFtkb21haW5dID0gW107XG4gICAgfVxuXG4gICAgY29sbFtkb21haW5dLnB1c2goc3RhdGUuZW50aXR5X2lkKTtcbiAgfSk7XG5cbiAgbGV0IGJhZGdlczogc3RyaW5nW10gPSBbXTtcbiAgRE9NQUlOU19CQURHRVMuZm9yRWFjaCgoZG9tYWluKSA9PiB7XG4gICAgaWYgKGRvbWFpbiBpbiBiYWRnZUVudGl0aWVzKSB7XG4gICAgICBiYWRnZXMgPSBiYWRnZXMuY29uY2F0KGJhZGdlRW50aXRpZXNbZG9tYWluXSk7XG4gICAgfVxuICB9KTtcblxuICBsZXQgY2FyZHM6IExvdmVsYWNlQ2FyZENvbmZpZ1tdID0gW107XG5cbiAgc3BsaXR0ZWQuZ3JvdXBzLmZvckVhY2goKGdyb3VwRW50aXR5KSA9PiB7XG4gICAgY2FyZHMgPSBjYXJkcy5jb25jYXQoXG4gICAgICBjb21wdXRlQ2FyZHMoXG4gICAgICAgIGdyb3VwRW50aXR5LmF0dHJpYnV0ZXMuZW50aXR5X2lkLm1hcChcbiAgICAgICAgICAoZW50aXR5SWQpOiBbc3RyaW5nLCBIYXNzRW50aXR5XSA9PiBbZW50aXR5SWQsIGVudGl0aWVzW2VudGl0eUlkXV1cbiAgICAgICAgKSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBjb21wdXRlU3RhdGVOYW1lKGdyb3VwRW50aXR5KSxcbiAgICAgICAgICBzaG93X2hlYWRlcl90b2dnbGU6IGdyb3VwRW50aXR5LmF0dHJpYnV0ZXMuY29udHJvbCAhPT0gXCJoaWRkZW5cIixcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH0pO1xuXG4gIE9iamVjdC5rZXlzKHVuZ3JvdXBlZEVudGl0aXRlcylcbiAgICAuc29ydCgpXG4gICAgLmZvckVhY2goKGRvbWFpbikgPT4ge1xuICAgICAgY2FyZHMgPSBjYXJkcy5jb25jYXQoXG4gICAgICAgIGNvbXB1dGVDYXJkcyhcbiAgICAgICAgICB1bmdyb3VwZWRFbnRpdGl0ZXNbZG9tYWluXS5tYXAoXG4gICAgICAgICAgICAoZW50aXR5SWQpOiBbc3RyaW5nLCBIYXNzRW50aXR5XSA9PiBbZW50aXR5SWQsIGVudGl0aWVzW2VudGl0eUlkXV1cbiAgICAgICAgICApLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZShgZG9tYWluLiR7ZG9tYWlufWApLFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KTtcblxuICBjb25zdCB2aWV3OiBMb3ZlbGFjZVZpZXdDb25maWcgPSB7XG4gICAgcGF0aCxcbiAgICB0aXRsZSxcbiAgICBiYWRnZXMsXG4gICAgY2FyZHMsXG4gIH07XG5cbiAgaWYgKGljb24pIHtcbiAgICB2aWV3Lmljb24gPSBpY29uO1xuICB9XG5cbiAgcmV0dXJuIHZpZXc7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVMb3ZlbGFjZUNvbmZpZ0Zyb21IYXNzID0gYXN5bmMgKGhhc3M6IEhvbWVBc3Npc3RhbnQpID0+IHtcbiAgLy8gV2Ugd2FudCB0byBrZWVwIHRoZSByZWdpc3RyeSBzdWJzY3JpcHRpb25zIGFsaXZlIGFmdGVyIGdlbmVyYXRpbmcgdGhlIFVJXG4gIC8vIHNvIHRoYXQgd2UgZG9uJ3Qgc2VydmUgdXAgc3RhbGUgZGF0YSBhZnRlciBjaGFuZ2luZyBhcmVhcy5cbiAgaWYgKCFzdWJzY3JpYmVkUmVnaXN0cmllcykge1xuICAgIHN1YnNjcmliZWRSZWdpc3RyaWVzID0gdHJ1ZTtcbiAgICBzdWJzY3JpYmVBcmVhUmVnaXN0cnkoaGFzcy5jb25uZWN0aW9uLCAoKSA9PiB1bmRlZmluZWQpO1xuICAgIHN1YnNjcmliZURldmljZVJlZ2lzdHJ5KGhhc3MuY29ubmVjdGlvbiwgKCkgPT4gdW5kZWZpbmVkKTtcbiAgICBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeShoYXNzLmNvbm5lY3Rpb24sICgpID0+IHVuZGVmaW5lZCk7XG4gIH1cblxuICBjb25zdCBbYXJlYUVudHJpZXMsIGRldmljZUVudHJpZXMsIGVudGl0eUVudHJpZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHN1YnNjcmliZU9uZShoYXNzLmNvbm5lY3Rpb24sIHN1YnNjcmliZUFyZWFSZWdpc3RyeSksXG4gICAgc3Vic2NyaWJlT25lKGhhc3MuY29ubmVjdGlvbiwgc3Vic2NyaWJlRGV2aWNlUmVnaXN0cnkpLFxuICAgIHN1YnNjcmliZU9uZShoYXNzLmNvbm5lY3Rpb24sIHN1YnNjcmliZUVudGl0eVJlZ2lzdHJ5KSxcbiAgXSk7XG5cbiAgcmV0dXJuIGdlbmVyYXRlTG92ZWxhY2VDb25maWdGcm9tRGF0YShcbiAgICBoYXNzLmNvbmZpZyxcbiAgICBhcmVhRW50cmllcyxcbiAgICBkZXZpY2VFbnRyaWVzLFxuICAgIGVudGl0eUVudHJpZXMsXG4gICAgaGFzcy5zdGF0ZXMsXG4gICAgaGFzcy5sb2NhbGl6ZVxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlTG92ZWxhY2VDb25maWdGcm9tRGF0YSA9IGFzeW5jIChcbiAgY29uZmlnOiBIYXNzQ29uZmlnLFxuICBhcmVhRW50cmllczogQXJlYVJlZ2lzdHJ5RW50cnlbXSxcbiAgZGV2aWNlRW50cmllczogRGV2aWNlUmVnaXN0cnlFbnRyeVtdLFxuICBlbnRpdHlFbnRyaWVzOiBFbnRpdHlSZWdpc3RyeUVudHJ5W10sXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXMsXG4gIGxvY2FsaXplOiBMb2NhbGl6ZUZ1bmNcbik6IFByb21pc2U8TG92ZWxhY2VDb25maWc+ID0+IHtcbiAgY29uc3Qgdmlld0VudGl0aWVzID0gZXh0cmFjdFZpZXdzKGVudGl0aWVzKTtcblxuICBjb25zdCB2aWV3cyA9IHZpZXdFbnRpdGllcy5tYXAoKHZpZXdFbnRpdHk6IEdyb3VwRW50aXR5KSA9PiB7XG4gICAgY29uc3Qgc3RhdGVzID0gZ2V0Vmlld0VudGl0aWVzKGVudGl0aWVzLCB2aWV3RW50aXR5KTtcblxuICAgIC8vIEluIHRoZSBjYXNlIG9mIGEgbm9ybWFsIHZpZXcsIHdlIHVzZSBncm91cCBvcmRlciBhcyBzcGVjaWZpZWQgaW4gdmlld1xuICAgIGNvbnN0IGdyb3VwT3JkZXJzID0ge307XG4gICAgT2JqZWN0LmtleXMoc3RhdGVzKS5mb3JFYWNoKChlbnRpdHlJZCwgaWR4KSA9PiB7XG4gICAgICBncm91cE9yZGVyc1tlbnRpdHlJZF0gPSBpZHg7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdGVWaWV3Q29uZmlnKFxuICAgICAgbG9jYWxpemUsXG4gICAgICBjb21wdXRlT2JqZWN0SWQodmlld0VudGl0eS5lbnRpdHlfaWQpLFxuICAgICAgY29tcHV0ZVN0YXRlTmFtZSh2aWV3RW50aXR5KSxcbiAgICAgIHZpZXdFbnRpdHkuYXR0cmlidXRlcy5pY29uLFxuICAgICAgc3RhdGVzLFxuICAgICAgZ3JvdXBPcmRlcnNcbiAgICApO1xuICB9KTtcblxuICBsZXQgdGl0bGUgPSBjb25maWcubG9jYXRpb25fbmFtZTtcblxuICAvLyBVc2VyIGNhbiBvdmVycmlkZSBkZWZhdWx0IHZpZXcuIElmIHRoZXkgZGlkbid0LCB3ZSB3aWxsIGFkZCBvbmVcbiAgLy8gdGhhdCBjb250YWlucyBhbGwgZW50aXRpZXMuXG4gIGlmIChcbiAgICB2aWV3RW50aXRpZXMubGVuZ3RoID09PSAwIHx8XG4gICAgdmlld0VudGl0aWVzWzBdLmVudGl0eV9pZCAhPT0gREVGQVVMVF9WSUVXX0VOVElUWV9JRFxuICApIHtcbiAgICB2aWV3cy51bnNoaWZ0KFxuICAgICAgZ2VuZXJhdGVEZWZhdWx0Vmlld0NvbmZpZyhcbiAgICAgICAgYXJlYUVudHJpZXMsXG4gICAgICAgIGRldmljZUVudHJpZXMsXG4gICAgICAgIGVudGl0eUVudHJpZXMsXG4gICAgICAgIGVudGl0aWVzLFxuICAgICAgICBsb2NhbGl6ZVxuICAgICAgKVxuICAgICk7XG5cbiAgICAvLyBBZGQgbWFwIG9mIGdlbyBsb2NhdGlvbnMgdG8gZGVmYXVsdCB2aWV3IGlmIGxvYWRlZFxuICAgIGlmIChjb25maWcuY29tcG9uZW50cy5pbmNsdWRlcyhcImdlb19sb2NhdGlvblwiKSkge1xuICAgICAgaWYgKHZpZXdzWzBdICYmIHZpZXdzWzBdLmNhcmRzKSB7XG4gICAgICAgIHZpZXdzWzBdLmNhcmRzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwibWFwXCIsXG4gICAgICAgICAgZ2VvX2xvY2F0aW9uX3NvdXJjZXM6IFtcImFsbFwiXSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGhhdmUgSG9tZSBhcyB0aXRsZSBhbmQgZmlyc3QgdGFiLlxuICAgIGlmICh2aWV3cy5sZW5ndGggPiAxICYmIHRpdGxlID09PSBcIkhvbWVcIikge1xuICAgICAgdGl0bGUgPSBcIueJp+WFu+eKrFwiO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVzZXIgaGFzIG5vIGVudGl0aWVzXG4gIGlmICh2aWV3cy5sZW5ndGggPT09IDEgJiYgdmlld3NbMF0uY2FyZHMhLmxlbmd0aCA9PT0gMCkge1xuICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1lbXB0eS1zdGF0ZS1jYXJkXCIgKi8gXCIuLi9jYXJkcy9odWktZW1wdHktc3RhdGUtY2FyZFwiKTtcbiAgICB2aWV3c1swXS5jYXJkcyEucHVzaCh7XG4gICAgICB0eXBlOiBcImN1c3RvbTpodWktZW1wdHktc3RhdGUtY2FyZFwiLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0aXRsZSxcbiAgICB2aWV3cyxcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBuYXZpZ2F0ZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vbmF2aWdhdGVcIjtcbmltcG9ydCB7IHRvZ2dsZUVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9lbnRpdHkvdG9nZ2xlLWVudGl0eVwiO1xuaW1wb3J0IHsgQWN0aW9uQ29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IGZvcndhcmRIYXB0aWMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9oYXB0aWNzXCI7XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVDbGljayA9IChcbiAgbm9kZTogSFRNTEVsZW1lbnQsXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNvbmZpZzoge1xuICAgIGVudGl0eT86IHN0cmluZztcbiAgICBjYW1lcmFfaW1hZ2U/OiBzdHJpbmc7XG4gICAgaG9sZF9hY3Rpb24/OiBBY3Rpb25Db25maWc7XG4gICAgdGFwX2FjdGlvbj86IEFjdGlvbkNvbmZpZztcbiAgfSxcbiAgaG9sZDogYm9vbGVhblxuKTogdm9pZCA9PiB7XG4gIGxldCBhY3Rpb25Db25maWc6IEFjdGlvbkNvbmZpZyB8IHVuZGVmaW5lZDtcblxuICBpZiAoaG9sZCAmJiBjb25maWcuaG9sZF9hY3Rpb24pIHtcbiAgICBhY3Rpb25Db25maWcgPSBjb25maWcuaG9sZF9hY3Rpb247XG4gIH0gZWxzZSBpZiAoIWhvbGQgJiYgY29uZmlnLnRhcF9hY3Rpb24pIHtcbiAgICBhY3Rpb25Db25maWcgPSBjb25maWcudGFwX2FjdGlvbjtcbiAgfVxuXG4gIGlmICghYWN0aW9uQ29uZmlnKSB7XG4gICAgYWN0aW9uQ29uZmlnID0ge1xuICAgICAgYWN0aW9uOiBcIm1vcmUtaW5mb1wiLFxuICAgIH07XG4gIH1cblxuICBzd2l0Y2ggKGFjdGlvbkNvbmZpZy5hY3Rpb24pIHtcbiAgICBjYXNlIFwibW9yZS1pbmZvXCI6XG4gICAgICBpZiAoY29uZmlnLmVudGl0eSB8fCBjb25maWcuY2FtZXJhX2ltYWdlKSB7XG4gICAgICAgIGZpcmVFdmVudChub2RlLCBcImhhc3MtbW9yZS1pbmZvXCIsIHtcbiAgICAgICAgICBlbnRpdHlJZDogY29uZmlnLmVudGl0eSA/IGNvbmZpZy5lbnRpdHkgOiBjb25maWcuY2FtZXJhX2ltYWdlISxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwibmF2aWdhdGVcIjpcbiAgICAgIGlmIChhY3Rpb25Db25maWcubmF2aWdhdGlvbl9wYXRoKSB7XG4gICAgICAgIG5hdmlnYXRlKG5vZGUsIGFjdGlvbkNvbmZpZy5uYXZpZ2F0aW9uX3BhdGgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInVybFwiOlxuICAgICAgaWYgKGFjdGlvbkNvbmZpZy51cmxfcGF0aCkge1xuICAgICAgICB3aW5kb3cub3BlbihhY3Rpb25Db25maWcudXJsX3BhdGgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInRvZ2dsZVwiOlxuICAgICAgaWYgKGNvbmZpZy5lbnRpdHkpIHtcbiAgICAgICAgdG9nZ2xlRW50aXR5KGhhc3MsIGNvbmZpZy5lbnRpdHkhKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxsLXNlcnZpY2VcIjoge1xuICAgICAgaWYgKCFhY3Rpb25Db25maWcuc2VydmljZSkge1xuICAgICAgICBmb3J3YXJkSGFwdGljKFwiZmFpbHVyZVwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgW2RvbWFpbiwgc2VydmljZV0gPSBhY3Rpb25Db25maWcuc2VydmljZS5zcGxpdChcIi5cIiwgMik7XG4gICAgICBoYXNzLmNhbGxTZXJ2aWNlKGRvbWFpbiwgc2VydmljZSwgYWN0aW9uQ29uZmlnLnNlcnZpY2VfZGF0YSk7XG4gICAgfVxuICB9XG4gIGZvcndhcmRIYXB0aWMoXCJsaWdodFwiKTtcbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eVZhbHVlcyB9IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG4vLyBDaGVjayBpZiBjb25maWcgb3IgRW50aXR5IGNoYW5nZWRcbmV4cG9ydCBmdW5jdGlvbiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQoXG4gIGVsZW1lbnQ6IGFueSxcbiAgY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlc1xuKTogYm9vbGVhbiB7XG4gIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiX2NvbmZpZ1wiKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG4gIGlmICghb2xkSGFzcykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICBvbGRIYXNzLnN0YXRlc1tlbGVtZW50Ll9jb25maWchLmVudGl0eV0gIT09XG4gICAgICBlbGVtZW50Lmhhc3MhLnN0YXRlc1tlbGVtZW50Ll9jb25maWchLmVudGl0eV0gfHxcbiAgICBvbGRIYXNzLmxvY2FsaXplICE9PSBlbGVtZW50Lmhhc3MubG9jYWxpemVcbiAgKTtcbn1cbiIsImltcG9ydCB7IGxvYWRNb2R1bGUsIGxvYWRDU1MsIGxvYWRKUyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2xvYWRfcmVzb3VyY2VcIjtcblxuaW1wb3J0IHsgTG92ZWxhY2VDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuXG4vLyBDU1MgYW5kIEpTIHNob3VsZCBvbmx5IGJlIGltcG9ydGVkIG9uY2UuIE1vZHVsZXMgYW5kIEhUTUwgYXJlIHNhZmUuXG5jb25zdCBDU1NfQ0FDSEUgPSB7fTtcbmNvbnN0IEpTX0NBQ0hFID0ge307XG5cbmV4cG9ydCBjb25zdCBsb2FkTG92ZWxhY2VSZXNvdXJjZXMgPSAoXG4gIHJlc291cmNlczogTm9uTnVsbGFibGU8TG92ZWxhY2VDb25maWdbXCJyZXNvdXJjZXNcIl0+LFxuICBoYXNzVXJsOiBzdHJpbmdcbikgPT5cbiAgcmVzb3VyY2VzLmZvckVhY2goKHJlc291cmNlKSA9PiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFVybCA9IG5ldyBVUkwocmVzb3VyY2UudXJsLCBoYXNzVXJsKS50b1N0cmluZygpO1xuICAgIHN3aXRjaCAocmVzb3VyY2UudHlwZSkge1xuICAgICAgY2FzZSBcImNzc1wiOlxuICAgICAgICBpZiAobm9ybWFsaXplZFVybCBpbiBDU1NfQ0FDSEUpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBDU1NfQ0FDSEVbbm9ybWFsaXplZFVybF0gPSBsb2FkQ1NTKG5vcm1hbGl6ZWRVcmwpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcImpzXCI6XG4gICAgICAgIGlmIChub3JtYWxpemVkVXJsIGluIEpTX0NBQ0hFKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgSlNfQ0FDSEVbbm9ybWFsaXplZFVybF0gPSBsb2FkSlMobm9ybWFsaXplZFVybCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwibW9kdWxlXCI6XG4gICAgICAgIGxvYWRNb2R1bGUobm9ybWFsaXplZFVybCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiaHRtbFwiOlxuICAgICAgICBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJpbXBvcnQtaHJlZi1wb2x5ZmlsbFwiICovIFwiLi4vLi4vLi4vcmVzb3VyY2VzL2h0bWwtaW1wb3J0L2ltcG9ydC1ocmVmXCIpLnRoZW4oXG4gICAgICAgICAgKHsgaW1wb3J0SHJlZiB9KSA9PiBpbXBvcnRIcmVmKG5vcm1hbGl6ZWRVcmwpXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIHJlc291cmNlIHR5cGUgc3BlY2lmaWVkOiAke3Jlc291cmNlLnR5cGV9YCk7XG4gICAgfVxuICB9KTtcbiIsIi8vIFBhcnNlIGFycmF5IG9mIGVudGl0eSBvYmplY3RzIGZyb20gY29uZmlnXG5pbXBvcnQgeyBpc1ZhbGlkRW50aXR5SWQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS92YWxpZF9lbnRpdHlfaWRcIjtcbmltcG9ydCB7IEVudGl0eUNvbmZpZyB9IGZyb20gXCIuLi9lbnRpdHktcm93cy90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0NvbmZpZ0VudGl0aWVzID0gPFQgZXh0ZW5kcyBFbnRpdHlDb25maWc+KFxuICBlbnRpdGllczogQXJyYXk8VCB8IHN0cmluZz5cbik6IFRbXSA9PiB7XG4gIGlmICghZW50aXRpZXMgfHwgIUFycmF5LmlzQXJyYXkoZW50aXRpZXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRW50aXRpZXMgbmVlZCB0byBiZSBhbiBhcnJheVwiKTtcbiAgfVxuXG4gIHJldHVybiBlbnRpdGllcy5tYXAoXG4gICAgKGVudGl0eUNvbmYsIGluZGV4KTogVCA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBlbnRpdHlDb25mID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICFBcnJheS5pc0FycmF5KGVudGl0eUNvbmYpICYmXG4gICAgICAgIGVudGl0eUNvbmYudHlwZVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHlDb25mO1xuICAgICAgfVxuXG4gICAgICBsZXQgY29uZmlnOiBUO1xuXG4gICAgICBpZiAodHlwZW9mIGVudGl0eUNvbmYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLW9iamVjdC1saXRlcmFsLXR5cGUtYXNzZXJ0aW9uXG4gICAgICAgIGNvbmZpZyA9IHsgZW50aXR5OiBlbnRpdHlDb25mIH0gYXMgVDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVudGl0eUNvbmYgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoZW50aXR5Q29uZikpIHtcbiAgICAgICAgaWYgKCFlbnRpdHlDb25mLmVudGl0eSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBFbnRpdHkgb2JqZWN0IGF0IHBvc2l0aW9uICR7aW5kZXh9IGlzIG1pc3NpbmcgZW50aXR5IGZpZWxkLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZyA9IGVudGl0eUNvbmYgYXMgVDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBlbnRpdHkgc3BlY2lmaWVkIGF0IHBvc2l0aW9uICR7aW5kZXh9LmApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzVmFsaWRFbnRpdHlJZChjb25maWcuZW50aXR5KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgZW50aXR5IElEIGF0IHBvc2l0aW9uICR7aW5kZXh9OiAke2NvbmZpZy5lbnRpdHl9YFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cbiAgKTtcbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZGl0aW9uIHtcbiAgZW50aXR5OiBzdHJpbmc7XG4gIHN0YXRlPzogc3RyaW5nO1xuICBzdGF0ZV9ub3Q/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvbmRpdGlvbnNNZXQoXG4gIGNvbmRpdGlvbnM6IENvbmRpdGlvbltdLFxuICBoYXNzOiBIb21lQXNzaXN0YW50XG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIGNvbmRpdGlvbnMuZXZlcnkoKGMpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGhhc3Muc3RhdGVzW2MuZW50aXR5XVxuICAgICAgPyBoYXNzIS5zdGF0ZXNbYy5lbnRpdHldLnN0YXRlXG4gICAgICA6IFwidW5hdmFpbGFibGVcIjtcblxuICAgIHJldHVybiBjLnN0YXRlID8gc3RhdGUgPT09IGMuc3RhdGUgOiBzdGF0ZSAhPT0gYy5zdGF0ZV9ub3Q7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDb25kaXRpb25hbENvbmZpZyhjb25kaXRpb25zOiBDb25kaXRpb25bXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29uZGl0aW9ucy5ldmVyeShcbiAgICAoYykgPT4gKChjLmVudGl0eSAmJiAoYy5zdGF0ZSB8fCBjLnN0YXRlX25vdCkpIGFzIHVua25vd24pIGFzIGJvb2xlYW5cbiAgKTtcbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1zd2l0Y2hcIjtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1kdXBsaWNhdGUtaW1wb3J0c1xuaW1wb3J0IHsgSGFTd2l0Y2ggfSBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1zd2l0Y2hcIjtcbmltcG9ydCB7IERPTUFJTlNfVE9HR0xFIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgdHVybk9uT2ZmRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS90dXJuLW9uLW9mZi1lbnRpdGllc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZm9yd2FyZEhhcHRpYyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2hhcHRpY3NcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZW50aXRpZXMtdG9nZ2xlXCIpXG5jbGFzcyBIdWlFbnRpdGllc1RvZ2dsZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgZW50aXRpZXM/OiBzdHJpbmdbXTtcblxuICBAcHJvcGVydHkoKSBwcm90ZWN0ZWQgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfdG9nZ2xlRW50aXRpZXM/OiBzdHJpbmdbXTtcblxuICBwdWJsaWMgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiZW50aXRpZXNcIikpIHtcbiAgICAgIHRoaXMuX3RvZ2dsZUVudGl0aWVzID0gdGhpcy5lbnRpdGllcyEuZmlsdGVyKFxuICAgICAgICAoZW50aXR5SWQpID0+XG4gICAgICAgICAgZW50aXR5SWQgaW4gdGhpcy5oYXNzIS5zdGF0ZXMgJiZcbiAgICAgICAgICBET01BSU5TX1RPR0dMRS5oYXMoZW50aXR5SWQuc3BsaXQoXCIuXCIsIDEpWzBdKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl90b2dnbGVFbnRpdGllcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1zd2l0Y2hcbiAgICAgICAgYXJpYS1sYWJlbD1cIlRvZ2dsZSBlbnRpdGllcy5cIlxuICAgICAgICA/Y2hlY2tlZD1cIiR7dGhpcy5fdG9nZ2xlRW50aXRpZXMhLnNvbWUoKGVudGl0eUlkKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1tlbnRpdHlJZF07XG4gICAgICAgICAgcmV0dXJuIHN0YXRlT2JqICYmIHN0YXRlT2JqLnN0YXRlID09PSBcIm9uXCI7XG4gICAgICAgIH0pfVwiXG4gICAgICAgIEBjaGFuZ2U9XCIke3RoaXMuX2NhbGxTZXJ2aWNlfVwiXG4gICAgICA+PC9oYS1zd2l0Y2g+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgd2lkdGg6IDM4cHg7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuICAgICAgaGEtc3dpdGNoIHtcbiAgICAgICAgcGFkZGluZzogMTNweCA1cHg7XG4gICAgICAgIG1hcmdpbjogLTRweCAtNXB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jYWxsU2VydmljZShldjogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGZvcndhcmRIYXB0aWMoXCJsaWdodFwiKTtcbiAgICBjb25zdCB0dXJuT24gPSAoZXYudGFyZ2V0IGFzIEhhU3dpdGNoKS5jaGVja2VkO1xuICAgIHR1cm5Pbk9mZkVudGl0aWVzKHRoaXMuaGFzcyEsIHRoaXMuX3RvZ2dsZUVudGl0aWVzISwgdHVybk9uISk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1lbnRpdGllcy10b2dnbGVcIjogSHVpRW50aXRpZXNUb2dnbGU7XG4gIH1cbn1cbiIsImltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7XG4gIExpdEVsZW1lbnQsXG4gIGh0bWwsXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgcHJvcGVydHksXG4gIFRlbXBsYXRlUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvc3RhdGUtYmFkZ2VcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtcmVsYXRpdmUtdGltZVwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNvbXB1dGVSVEwgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvY29tcHV0ZV9ydGxcIjtcbmltcG9ydCB7IEVudGl0aWVzQ2FyZEVudGl0eUNvbmZpZyB9IGZyb20gXCIuLi9jYXJkcy90eXBlc1wiO1xuaW1wb3J0IHsgdG9nZ2xlQXR0cmlidXRlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vdG9nZ2xlX2F0dHJpYnV0ZVwiO1xuXG5jbGFzcyBIdWlHZW5lcmljRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgY29uZmlnPzogRW50aXRpZXNDYXJkRW50aXR5Q29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBzaG93U2Vjb25kYXJ5OiBib29sZWFuID0gdHJ1ZTtcblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuY29uZmlnLmVudGl0eVxuICAgICAgPyB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuY29uZmlnLmVudGl0eV1cbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c3RhdGUtYmFkZ2VcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5zdGF0ZU9iaj0ke3N0YXRlT2JqfVxuICAgICAgICAub3ZlcnJpZGVJY29uPSR7dGhpcy5jb25maWcuaWNvbn1cbiAgICAgICAgLm92ZXJyaWRlSW1hZ2U9JHt0aGlzLmNvbmZpZy5pbWFnZX1cbiAgICAgID48L3N0YXRlLWJhZGdlPlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXhcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgICAke3RoaXMuY29uZmlnLm5hbWUgfHwgY29tcHV0ZVN0YXRlTmFtZShzdGF0ZU9iail9XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY29uZGFyeVwiPlxuICAgICAgICAgICAgJHshdGhpcy5zaG93U2Vjb25kYXJ5XG4gICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJzZWNvbmRhcnlcIj48L3Nsb3Q+XG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLnNlY29uZGFyeV9pbmZvID09PSBcImVudGl0eS1pZFwiXG4gICAgICAgICAgICAgID8gc3RhdGVPYmouZW50aXR5X2lkXG4gICAgICAgICAgICAgIDogdGhpcy5jb25maWcuc2Vjb25kYXJ5X2luZm8gPT09IFwibGFzdC1jaGFuZ2VkXCJcbiAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgPGhhLXJlbGF0aXZlLXRpbWVcbiAgICAgICAgICAgICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgICAgICAgICAgIC5kYXRldGltZT0ke3N0YXRlT2JqLmxhc3RfY2hhbmdlZH1cbiAgICAgICAgICAgICAgICAgID48L2hhLXJlbGF0aXZlLXRpbWU+XG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiaGFzc1wiKSkge1xuICAgICAgdG9nZ2xlQXR0cmlidXRlKHRoaXMsIFwicnRsXCIsIGNvbXB1dGVSVEwodGhpcy5oYXNzISkpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIC5mbGV4IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgfVxuICAgICAgLmluZm8ge1xuICAgICAgICBmbGV4OiAxIDAgNjBweDtcbiAgICAgIH1cbiAgICAgIC5pbmZvLFxuICAgICAgLmluZm8gPiAqIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgICAuZmxleCA6OnNsb3R0ZWQoKikge1xuICAgICAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgICAgICBtaW4td2lkdGg6IDA7XG4gICAgICB9XG4gICAgICAuZmxleCA6OnNsb3R0ZWQoW3Nsb3Q9XCJzZWNvbmRhcnlcIl0pIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICB9XG4gICAgICAuc2Vjb25kYXJ5LFxuICAgICAgaGEtcmVsYXRpdmUtdGltZSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuICAgICAgc3RhdGUtYmFkZ2Uge1xuICAgICAgICBmbGV4OiAwIDAgNDBweDtcbiAgICAgIH1cbiAgICAgIDpob3N0KFtydGxdKSAuZmxleCB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gICAgICB9XG4gICAgICA6aG9zdChbcnRsXSkgLmZsZXggOjpzbG90dGVkKCopIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1nZW5lcmljLWVudGl0eS1yb3dcIiwgSHVpR2VuZXJpY0VudGl0eVJvdyk7XG4iLCJpbXBvcnQgeyBTVEFURVNfT0ZGIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuXG5pbXBvcnQgcGFyc2VBc3BlY3RSYXRpbyBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvXCI7XG5pbXBvcnQge1xuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgaHRtbCxcbiAgcHJvcGVydHksXG4gIENTU1Jlc3VsdCxcbiAgY3NzLFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgcXVlcnksXG4gIGN1c3RvbUVsZW1lbnQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCwgQ2FtZXJhRW50aXR5IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcbmltcG9ydCB7IGZldGNoVGh1bWJuYWlsVXJsV2l0aENhY2hlIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvY2FtZXJhXCI7XG5cbmNvbnN0IFVQREFURV9JTlRFUlZBTCA9IDEwMDAwO1xuY29uc3QgREVGQVVMVF9GSUxURVIgPSBcImdyYXlzY2FsZSgxMDAlKVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlU3BlY2lmaWNDb25maWcge1xuICBbc3RhdGU6IHN0cmluZ106IHN0cmluZztcbn1cblxuQGN1c3RvbUVsZW1lbnQoXCJodWktaW1hZ2VcIilcbmV4cG9ydCBjbGFzcyBIdWlJbWFnZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGVudGl0eT86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaW1hZ2U/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIHN0YXRlSW1hZ2U/OiBTdGF0ZVNwZWNpZmljQ29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBjYW1lcmFJbWFnZT86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgY2FtZXJhVmlldz86IFwibGl2ZVwiIHwgXCJhdXRvXCI7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGFzcGVjdFJhdGlvPzogc3RyaW5nO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBmaWx0ZXI/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIHN0YXRlRmlsdGVyPzogU3RhdGVTcGVjaWZpY0NvbmZpZztcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9sb2FkRXJyb3I/OiBib29sZWFuO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NhbWVyYUltYWdlU3JjPzogc3RyaW5nO1xuXG4gIEBxdWVyeShcImltZ1wiKSBwcml2YXRlIF9pbWFnZSE6IEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBfbGFzdEltYWdlSGVpZ2h0PzogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2NhbWVyYVVwZGF0ZXI/OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfYXR0YWNoZWQ/OiBib29sZWFuO1xuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2F0dGFjaGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5jYW1lcmFJbWFnZSAmJiB0aGlzLmNhbWVyYVZpZXcgIT09IFwibGl2ZVwiKSB7XG4gICAgICB0aGlzLl9zdGFydFVwZGF0ZUNhbWVyYUludGVydmFsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fYXR0YWNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBjb25zdCByYXRpbyA9IHRoaXMuYXNwZWN0UmF0aW8gPyBwYXJzZUFzcGVjdFJhdGlvKHRoaXMuYXNwZWN0UmF0aW8pIDogbnVsbDtcbiAgICBjb25zdCBzdGF0ZU9iaiA9XG4gICAgICB0aGlzLmhhc3MgJiYgdGhpcy5lbnRpdHkgPyB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuZW50aXR5XSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzdGF0ZSA9IHN0YXRlT2JqID8gc3RhdGVPYmouc3RhdGUgOiBcInVuYXZhaWxhYmxlXCI7XG5cbiAgICAvLyBGaWd1cmUgb3V0IGltYWdlIHNvdXJjZSB0byB1c2VcbiAgICBsZXQgaW1hZ2VTcmM6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgY2FtZXJhT2JqOiBDYW1lcmFFbnRpdHkgfCB1bmRlZmluZWQ7XG4gICAgLy8gVHJhY2sgaWYgd2UgYXJlIHdlIHVzaW5nIGEgZmFsbGJhY2sgaW1hZ2UsIHVzZWQgZm9yIGZpbHRlci5cbiAgICBsZXQgaW1hZ2VGYWxsYmFjayA9ICF0aGlzLnN0YXRlSW1hZ2U7XG5cbiAgICBpZiAodGhpcy5jYW1lcmFJbWFnZSkge1xuICAgICAgaWYgKHRoaXMuY2FtZXJhVmlldyA9PT0gXCJsaXZlXCIpIHtcbiAgICAgICAgY2FtZXJhT2JqID1cbiAgICAgICAgICB0aGlzLmhhc3MgJiYgKHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5jYW1lcmFJbWFnZV0gYXMgQ2FtZXJhRW50aXR5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlU3JjID0gdGhpcy5fY2FtZXJhSW1hZ2VTcmM7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlSW1hZ2UpIHtcbiAgICAgIGNvbnN0IHN0YXRlSW1hZ2UgPSB0aGlzLnN0YXRlSW1hZ2Vbc3RhdGVdO1xuXG4gICAgICBpZiAoc3RhdGVJbWFnZSkge1xuICAgICAgICBpbWFnZVNyYyA9IHN0YXRlSW1hZ2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbWFnZVNyYyA9IHRoaXMuaW1hZ2U7XG4gICAgICAgIGltYWdlRmFsbGJhY2sgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbWFnZVNyYyA9IHRoaXMuaW1hZ2U7XG4gICAgfVxuXG4gICAgaWYgKGltYWdlU3JjKSB7XG4gICAgICBpbWFnZVNyYyA9IHRoaXMuaGFzcyEuaGFzc1VybChpbWFnZVNyYyk7XG4gICAgfVxuXG4gICAgLy8gRmlndXJlIG91dCBmaWx0ZXIgdG8gdXNlXG4gICAgbGV0IGZpbHRlciA9IHRoaXMuZmlsdGVyIHx8IFwiXCI7XG5cbiAgICBpZiAodGhpcy5zdGF0ZUZpbHRlciAmJiB0aGlzLnN0YXRlRmlsdGVyW3N0YXRlXSkge1xuICAgICAgZmlsdGVyID0gdGhpcy5zdGF0ZUZpbHRlcltzdGF0ZV07XG4gICAgfVxuXG4gICAgaWYgKCFmaWx0ZXIgJiYgdGhpcy5lbnRpdHkpIHtcbiAgICAgIGNvbnN0IGlzT2ZmID0gIXN0YXRlT2JqIHx8IFNUQVRFU19PRkYuaW5jbHVkZXMoc3RhdGUpO1xuICAgICAgZmlsdGVyID0gaXNPZmYgJiYgaW1hZ2VGYWxsYmFjayA/IERFRkFVTFRfRklMVEVSIDogXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgcGFkZGluZ0JvdHRvbTpcbiAgICAgICAgICAgIHJhdGlvICYmIHJhdGlvLncgPiAwICYmIHJhdGlvLmggPiAwXG4gICAgICAgICAgICAgID8gYCR7KCgxMDAgKiByYXRpby5oKSAvIHJhdGlvLncpLnRvRml4ZWQoMil9JWBcbiAgICAgICAgICAgICAgOiBcIlwiLFxuICAgICAgICB9KX1cbiAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgcmF0aW86IEJvb2xlYW4ocmF0aW8gJiYgcmF0aW8udyA+IDAgJiYgcmF0aW8uaCA+IDApLFxuICAgICAgICB9KX1cbiAgICAgID5cbiAgICAgICAgJHt0aGlzLmNhbWVyYUltYWdlICYmIHRoaXMuY2FtZXJhVmlldyA9PT0gXCJsaXZlXCJcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxoYS1jYW1lcmEtc3RyZWFtXG4gICAgICAgICAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAgICAgICAgIC5zdGF0ZU9iaj1cIiR7Y2FtZXJhT2JqfVwiXG4gICAgICAgICAgICAgID48L2hhLWNhbWVyYS1zdHJlYW0+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgaWQ9XCJpbWFnZVwiXG4gICAgICAgICAgICAgICAgc3JjPSR7aW1hZ2VTcmN9XG4gICAgICAgICAgICAgICAgQGVycm9yPSR7dGhpcy5fb25JbWFnZUVycm9yfVxuICAgICAgICAgICAgICAgIEBsb2FkPSR7dGhpcy5fb25JbWFnZUxvYWR9XG4gICAgICAgICAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0aGlzLl9sb2FkRXJyb3IgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIixcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGB9XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBpZD1cImJyb2tlbkltYWdlXCJcbiAgICAgICAgICBzdHlsZT0ke3N0eWxlTWFwKHtcbiAgICAgICAgICAgIGhlaWdodDogYCR7dGhpcy5fbGFzdEltYWdlSGVpZ2h0IHx8IFwiMTAwXCJ9cHhgLFxuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5fbG9hZEVycm9yID8gXCJibG9ja1wiIDogXCJub25lXCIsXG4gICAgICAgICAgfSl9XG4gICAgICAgID48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJjYW1lcmFJbWFnZVwiKSAmJiB0aGlzLmNhbWVyYVZpZXcgIT09IFwibGl2ZVwiKSB7XG4gICAgICB0aGlzLl91cGRhdGVDYW1lcmFJbWFnZVNyYygpO1xuICAgICAgdGhpcy5fc3RhcnRVcGRhdGVDYW1lcmFJbnRlcnZhbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3N0YXJ0VXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgdGhpcy5fc3RvcFVwZGF0ZUNhbWVyYUludGVydmFsKCk7XG4gICAgaWYgKHRoaXMuY2FtZXJhSW1hZ2UgJiYgdGhpcy5fYXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2NhbWVyYVVwZGF0ZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoXG4gICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZUNhbWVyYUltYWdlU3JjKCksXG4gICAgICAgIFVQREFURV9JTlRFUlZBTFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NhbWVyYVVwZGF0ZXIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fY2FtZXJhVXBkYXRlcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25JbWFnZUVycm9yKCk6IHZvaWQge1xuICAgIHRoaXMuX2xvYWRFcnJvciA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9vbkltYWdlTG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9sb2FkRXJyb3IgPSBmYWxzZTtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNvbXBsZXRlO1xuICAgIHRoaXMuX2xhc3RJbWFnZUhlaWdodCA9IHRoaXMuX2ltYWdlLm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX3VwZGF0ZUNhbWVyYUltYWdlU3JjKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5oYXNzIHx8ICF0aGlzLmNhbWVyYUltYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2FtZXJhU3RhdGUgPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuY2FtZXJhSW1hZ2VdIGFzXG4gICAgICB8IENhbWVyYUVudGl0eVxuICAgICAgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIWNhbWVyYVN0YXRlKSB7XG4gICAgICB0aGlzLl9vbkltYWdlRXJyb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jYW1lcmFJbWFnZVNyYyA9IGF3YWl0IGZldGNoVGh1bWJuYWlsVXJsV2l0aENhY2hlKFxuICAgICAgdGhpcy5oYXNzLFxuICAgICAgdGhpcy5jYW1lcmFJbWFnZVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBpbWcge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICB0cmFuc2l0aW9uOiBmaWx0ZXIgMC4ycyBsaW5lYXI7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucmF0aW8ge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDA7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbyBpbWcsXG4gICAgICAucmF0aW8gZGl2IHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgICNicm9rZW5JbWFnZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IGdyZXkgdXJsKFwiL3N0YXRpYy9pbWFnZXMvaW1hZ2UtYnJva2VuLnN2Z1wiKSBjZW50ZXIvMzZweFxuICAgICAgICAgIG5vLXJlcGVhdDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW1hZ2VcIjogSHVpSW1hZ2U7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgZm9ybWF0X2RhdGUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfZGF0ZVwiO1xuaW1wb3J0IGZvcm1hdF9kYXRlX3RpbWUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfZGF0ZV90aW1lXCI7XG5pbXBvcnQgZm9ybWF0X3RpbWUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfdGltZVwiO1xuaW1wb3J0IHJlbGF0aXZlVGltZSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RhdGV0aW1lL3JlbGF0aXZlX3RpbWVcIjtcblxuY29uc3QgRk9STUFUUzogeyBba2V5OiBzdHJpbmddOiAodHM6IERhdGUsIGxhbmc6IHN0cmluZykgPT4gc3RyaW5nIH0gPSB7XG4gIGRhdGU6IGZvcm1hdF9kYXRlLFxuICBkYXRldGltZTogZm9ybWF0X2RhdGVfdGltZSxcbiAgdGltZTogZm9ybWF0X3RpbWUsXG59O1xuY29uc3QgSU5URVJWQUxfRk9STUFUID0gW1wicmVsYXRpdmVcIiwgXCJ0b3RhbFwiXTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktdGltZXN0YW1wLWRpc3BsYXlcIilcbmNsYXNzIEh1aVRpbWVzdGFtcERpc3BsYXkgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB0cz86IERhdGU7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGZvcm1hdD86XG4gICAgfCBcInJlbGF0aXZlXCJcbiAgICB8IFwidG90YWxcIlxuICAgIHwgXCJkYXRlXCJcbiAgICB8IFwiZGF0ZXRpbWVcIlxuICAgIHwgXCJ0aW1lXCI7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfcmVsYXRpdmU/OiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfY29ubmVjdGVkPzogYm9vbGVhbjtcblxuICBwcml2YXRlIF9pbnRlcnZhbD86IG51bWJlcjtcblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMuX3N0YXJ0SW50ZXJ2YWwoKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMudHMgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBpZiAoaXNOYU4odGhpcy50cy5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgSW52YWxpZCBkYXRlXG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuX2Zvcm1hdDtcblxuICAgIGlmIChJTlRFUlZBTF9GT1JNQVQuaW5jbHVkZXMoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgICR7dGhpcy5fcmVsYXRpdmV9XG4gICAgICBgO1xuICAgIH1cbiAgICBpZiAoZm9ybWF0IGluIEZPUk1BVFMpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAke0ZPUk1BVFNbZm9ybWF0XSh0aGlzLnRzLCB0aGlzLmhhc3MubGFuZ3VhZ2UpfVxuICAgICAgYDtcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICBJbnZhbGlkIGZvcm1hdFxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoIWNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImZvcm1hdFwiKSB8fCAhdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKElOVEVSVkFMX0ZPUk1BVC5pbmNsdWRlcyhcInJlbGF0aXZlXCIpKSB7XG4gICAgICB0aGlzLl9zdGFydEludGVydmFsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBfZm9ybWF0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0IHx8IFwicmVsYXRpdmVcIjtcbiAgfVxuXG4gIHByaXZhdGUgX3N0YXJ0SW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xuICAgIGlmICh0aGlzLl9jb25uZWN0ZWQgJiYgSU5URVJWQUxfRk9STUFULmluY2x1ZGVzKHRoaXMuX2Zvcm1hdCkpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZVJlbGF0aXZlKCk7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB0aGlzLl91cGRhdGVSZWxhdGl2ZSgpLCAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckludGVydmFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVSZWxhdGl2ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50cyAmJiB0aGlzLmhhc3MhLmxvY2FsaXplKSB7XG4gICAgICB0aGlzLl9yZWxhdGl2ZSA9XG4gICAgICAgIHRoaXMuX2Zvcm1hdCA9PT0gXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgPyByZWxhdGl2ZVRpbWUodGhpcy50cywgdGhpcy5oYXNzIS5sb2NhbGl6ZSlcbiAgICAgICAgICA6ICh0aGlzLl9yZWxhdGl2ZSA9IHJlbGF0aXZlVGltZShuZXcgRGF0ZSgpLCB0aGlzLmhhc3MhLmxvY2FsaXplLCB7XG4gICAgICAgICAgICAgIGNvbXBhcmVUaW1lOiB0aGlzLnRzLFxuICAgICAgICAgICAgICBpbmNsdWRlVGVuc2U6IGZhbHNlLFxuICAgICAgICAgICAgfSkpO1xuICAgIH1cbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXRpbWVzdGFtcC1kaXNwbGF5XCI6IEh1aVRpbWVzdGFtcERpc3BsYXk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS11bmF2YWlsYWJsZVwiKVxuZXhwb3J0IGNsYXNzIEh1aVVuYXZhaWxhYmxlIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB0ZXh0Pzogc3RyaW5nO1xuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkaXNhYmxlZC1vdmVybGF5XCI+XG4gICAgICAgIDxkaXY+JHt0aGlzLnRleHR9PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmRpc2FibGVkLW92ZXJsYXkge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3RhdGUtaWNvbi11bmF2YWlsYWJsZS1jb2xvcik7XG4gICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgei1pbmRleDogNTA7XG4gICAgICB9XG5cbiAgICAgIC5kaXNhYmxlZC1vdmVybGF5IGRpdiB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktdW5hdmFpbGFibGVcIjogSHVpVW5hdmFpbGFibGU7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWljb25cIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktd2FybmluZy1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpV2FybmluZ0VsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGxhYmVsPzogc3RyaW5nO1xuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1pY29uIGljb249XCJoYXNzOmFsZXJ0XCIgLnRpdGxlPVwiJHt0aGlzLmxhYmVsfVwiPjwvaGEtaWNvbj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGEtaWNvbiB7XG4gICAgICAgIGNvbG9yOiAjZmNlNTg4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS13YXJuaW5nLWVsZW1lbnRcIjogSHVpV2FybmluZ0VsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXdhcm5pbmdcIilcbmV4cG9ydCBjbGFzcyBIdWlXYXJuaW5nIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNlNTg4O1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXdhcm5pbmdcIjogSHVpV2FybmluZztcbiAgfVxufVxuIiwiaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgTG92ZWxhY2UgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBmb3IgZmlyZSBldmVudFxuICBpbnRlcmZhY2UgSEFTU0RvbUV2ZW50cyB7XG4gICAgXCJzaG93LWVkaXQtY2FyZFwiOiBFZGl0Q2FyZERpYWxvZ1BhcmFtcztcbiAgfVxufVxuXG5sZXQgcmVnaXN0ZXJlZERpYWxvZyA9IGZhbHNlO1xuY29uc3QgZGlhbG9nU2hvd0V2ZW50ID0gXCJzaG93LWVkaXQtY2FyZFwiO1xuY29uc3QgZGlhbG9nVGFnID0gXCJodWktZGlhbG9nLWVkaXQtY2FyZFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRDYXJkRGlhbG9nUGFyYW1zIHtcbiAgbG92ZWxhY2U6IExvdmVsYWNlO1xuICBwYXRoOiBbbnVtYmVyXSB8IFtudW1iZXIsIG51bWJlcl07XG4gIGVudGl0aWVzPzogc3RyaW5nW107IC8vIFdlIGNhbiBwYXNzIGVudGl0eSBpZCdzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgY29uZmlnIHdoZW4gYSBjYXJkIGlzIHBpY2tlZFxufVxuXG5jb25zdCByZWdpc3RlckVkaXRDYXJkRGlhbG9nID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogRXZlbnQgPT5cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIFwicmVnaXN0ZXItZGlhbG9nXCIsIHtcbiAgICBkaWFsb2dTaG93RXZlbnQsXG4gICAgZGlhbG9nVGFnLFxuICAgIGRpYWxvZ0ltcG9ydDogKCkgPT5cbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1kaWFsb2ctZWRpdC1jYXJkXCIgKi8gXCIuL2h1aS1kaWFsb2ctZWRpdC1jYXJkXCIpLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHNob3dFZGl0Q2FyZERpYWxvZyA9IChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIGVkaXRDYXJkRGlhbG9nUGFyYW1zOiBFZGl0Q2FyZERpYWxvZ1BhcmFtc1xuKTogdm9pZCA9PiB7XG4gIGlmICghcmVnaXN0ZXJlZERpYWxvZykge1xuICAgIHJlZ2lzdGVyZWREaWFsb2cgPSB0cnVlO1xuICAgIHJlZ2lzdGVyRWRpdENhcmREaWFsb2coZWxlbWVudCk7XG4gIH1cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIGRpYWxvZ1Nob3dFdmVudCwgZWRpdENhcmREaWFsb2dQYXJhbXMpO1xufTtcbiIsImltcG9ydCB7XG4gIExvdmVsYWNlQ29uZmlnLFxuICBMb3ZlbGFjZUNhcmRDb25maWcsXG4gIExvdmVsYWNlVmlld0NvbmZpZyxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcblxuZXhwb3J0IGNvbnN0IGFkZENhcmQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGg6IFtudW1iZXJdLFxuICBjYXJkQ29uZmlnOiBMb3ZlbGFjZUNhcmRDb25maWdcbik6IExvdmVsYWNlQ29uZmlnID0+IHtcbiAgY29uc3QgW3ZpZXdJbmRleF0gPSBwYXRoO1xuICBjb25zdCB2aWV3czogTG92ZWxhY2VWaWV3Q29uZmlnW10gPSBbXTtcblxuICBjb25maWcudmlld3MuZm9yRWFjaCgodmlld0NvbmYsIGluZGV4KSA9PiB7XG4gICAgaWYgKGluZGV4ICE9PSB2aWV3SW5kZXgpIHtcbiAgICAgIHZpZXdzLnB1c2goY29uZmlnLnZpZXdzW2luZGV4XSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2FyZHMgPSB2aWV3Q29uZi5jYXJkc1xuICAgICAgPyBbLi4udmlld0NvbmYuY2FyZHMsIGNhcmRDb25maWddXG4gICAgICA6IFtjYXJkQ29uZmlnXTtcblxuICAgIHZpZXdzLnB1c2goe1xuICAgICAgLi4udmlld0NvbmYsXG4gICAgICBjYXJkcyxcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jb25maWcsXG4gICAgdmlld3MsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgcmVwbGFjZUNhcmQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGg6IFtudW1iZXIsIG51bWJlcl0sXG4gIGNhcmRDb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZ1xuKTogTG92ZWxhY2VDb25maWcgPT4ge1xuICBjb25zdCBbdmlld0luZGV4LCBjYXJkSW5kZXhdID0gcGF0aDtcbiAgY29uc3Qgdmlld3M6IExvdmVsYWNlVmlld0NvbmZpZ1tdID0gW107XG5cbiAgY29uZmlnLnZpZXdzLmZvckVhY2goKHZpZXdDb25mLCBpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCAhPT0gdmlld0luZGV4KSB7XG4gICAgICB2aWV3cy5wdXNoKGNvbmZpZy52aWV3c1tpbmRleF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZpZXdzLnB1c2goe1xuICAgICAgLi4udmlld0NvbmYsXG4gICAgICBjYXJkczogKHZpZXdDb25mLmNhcmRzIHx8IFtdKS5tYXAoKG9yaWdDb25mLCBpbmQpID0+XG4gICAgICAgIGluZCA9PT0gY2FyZEluZGV4ID8gY2FyZENvbmZpZyA6IG9yaWdDb25mXG4gICAgICApLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIC4uLmNvbmZpZyxcbiAgICB2aWV3cyxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkID0gKFxuICBjb25maWc6IExvdmVsYWNlQ29uZmlnLFxuICBwYXRoOiBbbnVtYmVyLCBudW1iZXJdXG4pOiBMb3ZlbGFjZUNvbmZpZyA9PiB7XG4gIGNvbnN0IFt2aWV3SW5kZXgsIGNhcmRJbmRleF0gPSBwYXRoO1xuICBjb25zdCB2aWV3czogTG92ZWxhY2VWaWV3Q29uZmlnW10gPSBbXTtcblxuICBjb25maWcudmlld3MuZm9yRWFjaCgodmlld0NvbmYsIGluZGV4KSA9PiB7XG4gICAgaWYgKGluZGV4ICE9PSB2aWV3SW5kZXgpIHtcbiAgICAgIHZpZXdzLnB1c2goY29uZmlnLnZpZXdzW2luZGV4XSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmlld3MucHVzaCh7XG4gICAgICAuLi52aWV3Q29uZixcbiAgICAgIGNhcmRzOiAodmlld0NvbmYuY2FyZHMgfHwgW10pLmZpbHRlcihcbiAgICAgICAgKF9vcmlnQ29uZiwgaW5kKSA9PiBpbmQgIT09IGNhcmRJbmRleFxuICAgICAgKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jb25maWcsXG4gICAgdmlld3MsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3Qgc3dhcENhcmQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGgxOiBbbnVtYmVyLCBudW1iZXJdLFxuICBwYXRoMjogW251bWJlciwgbnVtYmVyXVxuKTogTG92ZWxhY2VDb25maWcgPT4ge1xuICBjb25zdCBjYXJkMSA9IGNvbmZpZy52aWV3c1twYXRoMVswXV0uY2FyZHMhW3BhdGgxWzFdXTtcbiAgY29uc3QgY2FyZDIgPSBjb25maWcudmlld3NbcGF0aDJbMF1dLmNhcmRzIVtwYXRoMlsxXV07XG5cbiAgY29uc3Qgb3JpZ1ZpZXcxID0gY29uZmlnLnZpZXdzW3BhdGgxWzBdXTtcbiAgY29uc3QgbmV3VmlldzEgPSB7XG4gICAgLi4ub3JpZ1ZpZXcxLFxuICAgIGNhcmRzOiBvcmlnVmlldzEuY2FyZHMhLm1hcCgob3JpZ0NhcmQsIGluZGV4KSA9PlxuICAgICAgaW5kZXggPT09IHBhdGgxWzFdID8gY2FyZDIgOiBvcmlnQ2FyZFxuICAgICksXG4gIH07XG5cbiAgY29uc3Qgb3JpZ1ZpZXcyID0gcGF0aDFbMF0gPT09IHBhdGgyWzBdID8gbmV3VmlldzEgOiBjb25maWcudmlld3NbcGF0aDJbMF1dO1xuICBjb25zdCBuZXdWaWV3MiA9IHtcbiAgICAuLi5vcmlnVmlldzIsXG4gICAgY2FyZHM6IG9yaWdWaWV3Mi5jYXJkcyEubWFwKChvcmlnQ2FyZCwgaW5kZXgpID0+XG4gICAgICBpbmRleCA9PT0gcGF0aDJbMV0gPyBjYXJkMSA6IG9yaWdDYXJkXG4gICAgKSxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIC4uLmNvbmZpZyxcbiAgICB2aWV3czogY29uZmlnLnZpZXdzLm1hcCgob3JpZ1ZpZXcsIGluZGV4KSA9PlxuICAgICAgaW5kZXggPT09IHBhdGgyWzBdID8gbmV3VmlldzIgOiBpbmRleCA9PT0gcGF0aDFbMF0gPyBuZXdWaWV3MSA6IG9yaWdWaWV3XG4gICAgKSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb3ZlQ2FyZCA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgZnJvbVBhdGg6IFtudW1iZXIsIG51bWJlcl0sXG4gIHRvUGF0aDogW251bWJlcl1cbik6IExvdmVsYWNlQ29uZmlnID0+IHtcbiAgaWYgKGZyb21QYXRoWzBdID09PSB0b1BhdGhbMF0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgY2FuIG5vdCBtb3ZlIGEgY2FyZCB0byB0aGUgdmlldyBpdCBpcyBpbi5cIik7XG4gIH1cbiAgY29uc3QgZnJvbVZpZXcgPSBjb25maWcudmlld3NbZnJvbVBhdGhbMF1dO1xuICBjb25zdCBjYXJkID0gZnJvbVZpZXcuY2FyZHMhW2Zyb21QYXRoWzFdXTtcblxuICBjb25zdCBuZXdWaWV3MSA9IHtcbiAgICAuLi5mcm9tVmlldyxcbiAgICBjYXJkczogKGZyb21WaWV3LmNhcmRzIHx8IFtdKS5maWx0ZXIoXG4gICAgICAoX29yaWdDb25mLCBpbmQpID0+IGluZCAhPT0gZnJvbVBhdGhbMV1cbiAgICApLFxuICB9O1xuXG4gIGNvbnN0IHRvVmlldyA9IGNvbmZpZy52aWV3c1t0b1BhdGhbMF1dO1xuICBjb25zdCBjYXJkcyA9IHRvVmlldy5jYXJkcyA/IFsuLi50b1ZpZXcuY2FyZHMsIGNhcmRdIDogW2NhcmRdO1xuXG4gIGNvbnN0IG5ld1ZpZXcyID0ge1xuICAgIC4uLnRvVmlldyxcbiAgICBjYXJkcyxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIC4uLmNvbmZpZyxcbiAgICB2aWV3czogY29uZmlnLnZpZXdzLm1hcCgob3JpZ1ZpZXcsIGluZGV4KSA9PlxuICAgICAgaW5kZXggPT09IHRvUGF0aFswXVxuICAgICAgICA/IG5ld1ZpZXcyXG4gICAgICAgIDogaW5kZXggPT09IGZyb21QYXRoWzBdXG4gICAgICAgID8gbmV3VmlldzFcbiAgICAgICAgOiBvcmlnVmlld1xuICAgICksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgYWRkVmlldyA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgdmlld0NvbmZpZzogTG92ZWxhY2VWaWV3Q29uZmlnXG4pOiBMb3ZlbGFjZUNvbmZpZyA9PiAoe1xuICAuLi5jb25maWcsXG4gIHZpZXdzOiBjb25maWcudmlld3MuY29uY2F0KHZpZXdDb25maWcpLFxufSk7XG5cbmV4cG9ydCBjb25zdCByZXBsYWNlVmlldyA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgdmlld0luZGV4OiBudW1iZXIsXG4gIHZpZXdDb25maWc6IExvdmVsYWNlVmlld0NvbmZpZ1xuKTogTG92ZWxhY2VDb25maWcgPT4gKHtcbiAgLi4uY29uZmlnLFxuICB2aWV3czogY29uZmlnLnZpZXdzLm1hcCgob3JpZ1ZpZXcsIGluZGV4KSA9PlxuICAgIGluZGV4ID09PSB2aWV3SW5kZXggPyB2aWV3Q29uZmlnIDogb3JpZ1ZpZXdcbiAgKSxcbn0pO1xuXG5leHBvcnQgY29uc3Qgc3dhcFZpZXcgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGgxOiBudW1iZXIsXG4gIHBhdGgyOiBudW1iZXJcbik6IExvdmVsYWNlQ29uZmlnID0+IHtcbiAgY29uc3QgdmlldzEgPSBjb25maWcudmlld3NbcGF0aDFdO1xuICBjb25zdCB2aWV3MiA9IGNvbmZpZy52aWV3c1twYXRoMl07XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jb25maWcsXG4gICAgdmlld3M6IGNvbmZpZy52aWV3cy5tYXAoKG9yaWdWaWV3LCBpbmRleCkgPT5cbiAgICAgIGluZGV4ID09PSBwYXRoMiA/IHZpZXcxIDogaW5kZXggPT09IHBhdGgxID8gdmlldzIgOiBvcmlnVmlld1xuICAgICksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlVmlldyA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgdmlld0luZGV4OiBudW1iZXJcbik6IExvdmVsYWNlQ29uZmlnID0+ICh7XG4gIC4uLmNvbmZpZyxcbiAgdmlld3M6IGNvbmZpZy52aWV3cy5maWx0ZXIoKF9vcmlnVmlldywgaW5kZXgpID0+IGluZGV4ICE9PSB2aWV3SW5kZXgpLFxufSk7XG4iLCJpbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIGZvciBmaXJlIGV2ZW50XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcInNob3ctZWRpdC1sb3ZlbGFjZVwiOiBMb3ZlbGFjZTtcbiAgfVxufVxuXG5sZXQgcmVnaXN0ZXJlZERpYWxvZyA9IGZhbHNlO1xuY29uc3QgZGlhbG9nU2hvd0V2ZW50ID0gXCJzaG93LWVkaXQtbG92ZWxhY2VcIjtcbmNvbnN0IGRpYWxvZ1RhZyA9IFwiaHVpLWRpYWxvZy1lZGl0LWxvdmVsYWNlXCI7XG5cbmNvbnN0IHJlZ2lzdGVyRWRpdExvdmVsYWNlRGlhbG9nID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogRXZlbnQgPT5cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIFwicmVnaXN0ZXItZGlhbG9nXCIsIHtcbiAgICBkaWFsb2dTaG93RXZlbnQsXG4gICAgZGlhbG9nVGFnLFxuICAgIGRpYWxvZ0ltcG9ydDogKCkgPT5cbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1kaWFsb2ctZWRpdC1sb3ZlbGFjZVwiICovIFwiLi9odWktZGlhbG9nLWVkaXQtbG92ZWxhY2VcIiksXG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2hvd0VkaXRMb3ZlbGFjZURpYWxvZyA9IChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIGxvdmVsYWNlOiBMb3ZlbGFjZVxuKTogdm9pZCA9PiB7XG4gIGlmICghcmVnaXN0ZXJlZERpYWxvZykge1xuICAgIHJlZ2lzdGVyZWREaWFsb2cgPSB0cnVlO1xuICAgIHJlZ2lzdGVyRWRpdExvdmVsYWNlRGlhbG9nKGVsZW1lbnQpO1xuICB9XG4gIGZpcmVFdmVudChlbGVtZW50LCBkaWFsb2dTaG93RXZlbnQsIGxvdmVsYWNlKTtcbn07XG4iLCJpbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIGZvciBmaXJlIGV2ZW50XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcInNob3ctc2F2ZS1jb25maWdcIjogU2F2ZURpYWxvZ1BhcmFtcztcbiAgfVxufVxuXG5jb25zdCBkaWFsb2dTaG93RXZlbnQgPSBcInNob3ctc2F2ZS1jb25maWdcIjtcbmNvbnN0IGRpYWxvZ1RhZyA9IFwiaHVpLWRpYWxvZy1zYXZlLWNvbmZpZ1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNhdmVEaWFsb2dQYXJhbXMge1xuICBsb3ZlbGFjZTogTG92ZWxhY2U7XG59XG5cbmxldCByZWdpc3RlcmVkRGlhbG9nID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBzaG93U2F2ZURpYWxvZyA9IChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIHNhdmVEaWFsb2dQYXJhbXM6IFNhdmVEaWFsb2dQYXJhbXNcbikgPT4ge1xuICBpZiAoIXJlZ2lzdGVyZWREaWFsb2cpIHtcbiAgICByZWdpc3RlcmVkRGlhbG9nID0gdHJ1ZTtcbiAgICBmaXJlRXZlbnQoZWxlbWVudCwgXCJyZWdpc3Rlci1kaWFsb2dcIiwge1xuICAgICAgZGlhbG9nU2hvd0V2ZW50LFxuICAgICAgZGlhbG9nVGFnLFxuICAgICAgZGlhbG9nSW1wb3J0OiAoKSA9PlxuICAgICAgICBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktZGlhbG9nLXNhdmUtY29uZmlnXCIgKi8gXCIuL2h1aS1kaWFsb2ctc2F2ZS1jb25maWdcIiksXG4gICAgfSk7XG4gIH1cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIGRpYWxvZ1Nob3dFdmVudCwgc2F2ZURpYWxvZ1BhcmFtcyk7XG59O1xuIiwiaW1wb3J0IHsgSEFTU0RvbUV2ZW50LCBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIGZvciBmaXJlIGV2ZW50XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcInJlbG9hZC1sb3ZlbGFjZVwiOiB1bmRlZmluZWQ7XG4gICAgXCJzaG93LWVkaXQtdmlld1wiOiBFZGl0Vmlld0RpYWxvZ1BhcmFtcztcbiAgfVxuICAvLyBmb3IgYWRkIGV2ZW50IGxpc3RlbmVyXG4gIGludGVyZmFjZSBIVE1MRWxlbWVudEV2ZW50TWFwIHtcbiAgICBcInJlbG9hZC1sb3ZlbGFjZVwiOiBIQVNTRG9tRXZlbnQ8dW5kZWZpbmVkPjtcbiAgfVxufVxuXG5sZXQgcmVnaXN0ZXJlZERpYWxvZyA9IGZhbHNlO1xuY29uc3QgZGlhbG9nU2hvd0V2ZW50ID0gXCJzaG93LWVkaXQtdmlld1wiO1xuY29uc3QgZGlhbG9nVGFnID0gXCJodWktZGlhbG9nLWVkaXQtdmlld1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRWaWV3RGlhbG9nUGFyYW1zIHtcbiAgbG92ZWxhY2U6IExvdmVsYWNlO1xuICB2aWV3SW5kZXg/OiBudW1iZXI7XG59XG5cbmNvbnN0IHJlZ2lzdGVyRWRpdFZpZXdEaWFsb2cgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBFdmVudCA9PlxuICBmaXJlRXZlbnQoZWxlbWVudCwgXCJyZWdpc3Rlci1kaWFsb2dcIiwge1xuICAgIGRpYWxvZ1Nob3dFdmVudCxcbiAgICBkaWFsb2dUYWcsXG4gICAgZGlhbG9nSW1wb3J0OiAoKSA9PlxuICAgICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLWRpYWxvZy1lZGl0LXZpZXdcIiAqLyBcIi4vaHVpLWRpYWxvZy1lZGl0LXZpZXdcIiksXG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2hvd0VkaXRWaWV3RGlhbG9nID0gKFxuICBlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgZWRpdFZpZXdEaWFsb2dQYXJhbXM6IEVkaXRWaWV3RGlhbG9nUGFyYW1zXG4pOiB2b2lkID0+IHtcbiAgaWYgKCFyZWdpc3RlcmVkRGlhbG9nKSB7XG4gICAgcmVnaXN0ZXJlZERpYWxvZyA9IHRydWU7XG4gICAgcmVnaXN0ZXJFZGl0Vmlld0RpYWxvZyhlbGVtZW50KTtcbiAgfVxuICBmaXJlRXZlbnQoZWxlbWVudCwgZGlhbG9nU2hvd0V2ZW50LCBlZGl0Vmlld0RpYWxvZ1BhcmFtcyk7XG59O1xuIiwiaW1wb3J0IHtcbiAgY2hlY2tDb25kaXRpb25zTWV0LFxuICB2YWxpZGF0ZUNvbmRpdGlvbmFsQ29uZmlnLFxufSBmcm9tIFwiLi4vLi4vbG92ZWxhY2UvY29tbW9uL3ZhbGlkYXRlLWNvbmRpdGlvblwiO1xuaW1wb3J0IHsgY3JlYXRlU3R5bGVkSHVpRWxlbWVudCB9IGZyb20gXCIuLi9jYXJkcy9waWN0dXJlLWVsZW1lbnRzL2NyZWF0ZS1zdHlsZWQtaHVpLWVsZW1lbnRcIjtcbmltcG9ydCB7XG4gIExvdmVsYWNlRWxlbWVudCxcbiAgTG92ZWxhY2VFbGVtZW50Q29uZmlnLFxuICBDb25kaXRpb25hbEVsZW1lbnRDb25maWcsXG59IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmNsYXNzIEh1aUNvbmRpdGlvbmFsRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgcHVibGljIF9oYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHJpdmF0ZSBfY29uZmlnPzogQ29uZGl0aW9uYWxFbGVtZW50Q29uZmlnO1xuICBwcml2YXRlIF9lbGVtZW50czogTG92ZWxhY2VFbGVtZW50W10gPSBbXTtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogQ29uZGl0aW9uYWxFbGVtZW50Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKFxuICAgICAgIWNvbmZpZy5jb25kaXRpb25zIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShjb25maWcuY29uZGl0aW9ucykgfHxcbiAgICAgICFjb25maWcuZWxlbWVudHMgfHxcbiAgICAgICFBcnJheS5pc0FycmF5KGNvbmZpZy5lbGVtZW50cykgfHxcbiAgICAgICF2YWxpZGF0ZUNvbmRpdGlvbmFsQ29uZmlnKGNvbmZpZy5jb25kaXRpb25zKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgaW4gY2FyZCBjb25maWd1cmF0aW9uLlwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5fZWxlbWVudHMubWFwKChlbDogTG92ZWxhY2VFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmIChlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9lbGVtZW50cyA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcblxuICAgIHRoaXMuX2NvbmZpZy5lbGVtZW50cy5tYXAoKGVsZW1lbnRDb25maWc6IExvdmVsYWNlRWxlbWVudENvbmZpZykgPT4ge1xuICAgICAgdGhpcy5fZWxlbWVudHMucHVzaChjcmVhdGVTdHlsZWRIdWlFbGVtZW50KGVsZW1lbnRDb25maWcpKTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlRWxlbWVudHMoKTtcbiAgfVxuXG4gIHNldCBoYXNzKGhhc3M6IEhvbWVBc3Npc3RhbnQpIHtcbiAgICB0aGlzLl9oYXNzID0gaGFzcztcblxuICAgIHRoaXMudXBkYXRlRWxlbWVudHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRWxlbWVudHMoKSB7XG4gICAgaWYgKCF0aGlzLl9oYXNzIHx8ICF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2aXNpYmxlID0gY2hlY2tDb25kaXRpb25zTWV0KHRoaXMuX2NvbmZpZy5jb25kaXRpb25zLCB0aGlzLl9oYXNzKTtcblxuICAgIHRoaXMuX2VsZW1lbnRzLm1hcCgoZWw6IExvdmVsYWNlRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgZWwuaGFzcyA9IHRoaXMuX2hhc3M7XG4gICAgICAgIGlmICghZWwucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1jb25kaXRpb25hbC1lbGVtZW50XCI6IEh1aUNvbmRpdGlvbmFsRWxlbWVudDtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktY29uZGl0aW9uYWwtZWxlbWVudFwiLCBIdWlDb25kaXRpb25hbEVsZW1lbnQpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuXG5pbXBvcnQgeyBjb21wdXRlVG9vbHRpcCB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS10b29sdGlwXCI7XG5pbXBvcnQgeyBoYW5kbGVDbGljayB9IGZyb20gXCIuLi9jb21tb24vaGFuZGxlLWNsaWNrXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgSWNvbkVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pY29uLWVsZW1lbnRcIilcbmV4cG9ydCBjbGFzcyBIdWlJY29uRWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUVsZW1lbnQge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEljb25FbGVtZW50Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBJY29uRWxlbWVudENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmljb24pIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnaWNvbicgcmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtaWNvblxuICAgICAgICAuaWNvbj1cIiR7dGhpcy5fY29uZmlnLmljb259XCJcbiAgICAgICAgLnRpdGxlPVwiJHtjb21wdXRlVG9vbHRpcCh0aGlzLmhhc3MsIHRoaXMuX2NvbmZpZyl9XCJcbiAgICAgICAgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgQGhhLWhvbGQ9XCIke3RoaXMuX2hhbmRsZUhvbGR9XCJcbiAgICAgICAgLmxvbmdQcmVzcz1cIiR7bG9uZ1ByZXNzKCl9XCJcbiAgICAgID48L2hhLWljb24+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVRhcCgpOiB2b2lkIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKCk6IHZvaWQge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIHRydWUpO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWljb24tZWxlbWVudFwiOiBIdWlJY29uRWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWltYWdlXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVUb29sdGlwIH0gZnJvbSBcIi4uL2NvbW1vbi9jb21wdXRlLXRvb2x0aXBcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IGxvbmdQcmVzcyB9IGZyb20gXCIuLi9jb21tb24vZGlyZWN0aXZlcy9sb25nLXByZXNzLWRpcmVjdGl2ZVwiO1xuaW1wb3J0IHsgTG92ZWxhY2VFbGVtZW50LCBJbWFnZUVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pbWFnZS1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpSW1hZ2VFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlRWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogSW1hZ2VFbGVtZW50Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBJbWFnZUVsZW1lbnRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgRXJyb3IoXCJFcnJvciBpbiBlbGVtZW50IGNvbmZpZ3VyYXRpb25cIik7XG4gICAgfVxuXG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFxuICAgICAgXCJjbGlja2FibGVcIixcbiAgICAgIGNvbmZpZy50YXBfYWN0aW9uICYmIGNvbmZpZy50YXBfYWN0aW9uLmFjdGlvbiAhPT0gXCJub25lXCJcbiAgICApO1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1pbWFnZVxuICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgIC5lbnRpdHk9XCIke3RoaXMuX2NvbmZpZy5lbnRpdHl9XCJcbiAgICAgICAgLmltYWdlPVwiJHt0aGlzLl9jb25maWcuaW1hZ2V9XCJcbiAgICAgICAgLnN0YXRlSW1hZ2U9XCIke3RoaXMuX2NvbmZpZy5zdGF0ZV9pbWFnZX1cIlxuICAgICAgICAuY2FtZXJhSW1hZ2U9XCIke3RoaXMuX2NvbmZpZy5jYW1lcmFfaW1hZ2V9XCJcbiAgICAgICAgLmZpbHRlcj1cIiR7dGhpcy5fY29uZmlnLmZpbHRlcn1cIlxuICAgICAgICAuc3RhdGVGaWx0ZXI9XCIke3RoaXMuX2NvbmZpZy5zdGF0ZV9maWx0ZXJ9XCJcbiAgICAgICAgLnRpdGxlPVwiJHtjb21wdXRlVG9vbHRpcCh0aGlzLmhhc3MsIHRoaXMuX2NvbmZpZyl9XCJcbiAgICAgICAgLmFzcGVjdFJhdGlvPVwiJHt0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvfVwiXG4gICAgICAgIEBoYS1jbGljaz1cIiR7dGhpcy5faGFuZGxlVGFwfVwiXG4gICAgICAgIEBoYS1ob2xkPVwiJHt0aGlzLl9oYW5kbGVIb2xkfVwiXG4gICAgICAgIC5sb25nUHJlc3M9XCIke2xvbmdQcmVzcygpfVwiXG4gICAgICA+PC9odWktaW1hZ2U+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0KC5jbGlja2FibGUpIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIGh1aS1pbWFnZSB7XG4gICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVGFwKCk6IHZvaWQge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhvbGQoKTogdm9pZCB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgdHJ1ZSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1pbWFnZS1lbGVtZW50XCI6IEh1aUltYWdlRWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9ucy9oYS1jYWxsLXNlcnZpY2UtYnV0dG9uXCI7XG5cbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgU2VydmljZUJ1dHRvbkVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zZXJ2aWNlLWJ1dHRvbi1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpU2VydmljZUJ1dHRvbkVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50XG4gIGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTZXJ2aWNlQnV0dG9uRWxlbWVudENvbmZpZztcbiAgcHJpdmF0ZSBfZG9tYWluPzogc3RyaW5nO1xuICBwcml2YXRlIF9zZXJ2aWNlPzogc3RyaW5nO1xuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4geyBfY29uZmlnOiB7fSB9O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNlcnZpY2VCdXR0b25FbGVtZW50Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5zZXJ2aWNlKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ3NlcnZpY2UnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIFt0aGlzLl9kb21haW4sIHRoaXMuX3NlcnZpY2VdID0gY29uZmlnLnNlcnZpY2Uuc3BsaXQoXCIuXCIsIDIpO1xuXG4gICAgaWYgKCF0aGlzLl9kb21haW4pIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnc2VydmljZScgZG9lcyBub3QgaGF2ZSBhIGRvbWFpblwiKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3NlcnZpY2UpIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICBcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ3NlcnZpY2UnIGRvZXMgbm90IGhhdmUgYSBzZXJ2aWNlIG5hbWVcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYWxsLXNlcnZpY2UtYnV0dG9uXG4gICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgLmRvbWFpbj1cIiR7dGhpcy5fZG9tYWlufVwiXG4gICAgICAgIC5zZXJ2aWNlPVwiJHt0aGlzLl9zZXJ2aWNlfVwiXG4gICAgICAgIC5zZXJ2aWNlRGF0YT1cIiR7dGhpcy5fY29uZmlnLnNlcnZpY2VfZGF0YX1cIlxuICAgICAgICA+JHt0aGlzLl9jb25maWcudGl0bGV9PC9oYS1jYWxsLXNlcnZpY2UtYnV0dG9uXG4gICAgICA+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNhbGwtc2VydmljZS1idXR0b24ge1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXNlcnZpY2UtYnV0dG9uLWVsZW1lbnRcIjogSHVpU2VydmljZUJ1dHRvbkVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2VudGl0eS9oYS1zdGF0ZS1sYWJlbC1iYWRnZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZy1lbGVtZW50XCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgU3RhdGVCYWRnZUVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zdGF0ZS1iYWRnZS1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpU3RhdGVCYWRnZUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50XG4gIGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTdGF0ZUJhZGdlRWxlbWVudENvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU3RhdGVCYWRnZUVsZW1lbnRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnZW50aXR5JyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eSFdO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZy1lbGVtZW50XG4gICAgICAgICAgbGFiZWw9XCIke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9XCJcbiAgICAgICAgPjwvaHVpLXdhcm5pbmctZWxlbWVudD5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtc3RhdGUtbGFiZWwtYmFkZ2VcbiAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAuc3RhdGU9XCIke3N0YXRlT2JqfVwiXG4gICAgICAgIC50aXRsZT1cIiR7dGhpcy5fY29uZmlnLnRpdGxlID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopXG4gICAgICAgICAgOiB0aGlzLl9jb25maWcudGl0bGUgPT09IG51bGxcbiAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICA6IHRoaXMuX2NvbmZpZy50aXRsZX1cIlxuICAgICAgPjwvaGEtc3RhdGUtbGFiZWwtYmFkZ2U+XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXN0YXRlLWJhZGdlLWVsZW1lbnRcIjogSHVpU3RhdGVCYWRnZUVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvc3RhdGUtYmFkZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmctZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjb21wdXRlVG9vbHRpcCB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS10b29sdGlwXCI7XG5pbXBvcnQgeyBoYW5kbGVDbGljayB9IGZyb20gXCIuLi9jb21tb24vaGFuZGxlLWNsaWNrXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgU3RhdGVJY29uRWxlbWVudENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXN0YXRlLWljb24tZWxlbWVudFwiKVxuZXhwb3J0IGNsYXNzIEh1aVN0YXRlSWNvbkVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTdGF0ZUljb25FbGVtZW50Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBTdGF0ZUljb25FbGVtZW50Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ2VudGl0eScgcmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHkhXTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmctZWxlbWVudFxuICAgICAgICAgIGxhYmVsPSR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX1cbiAgICAgICAgPjwvaHVpLXdhcm5pbmctZWxlbWVudD5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c3RhdGUtYmFkZ2VcbiAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAudGl0bGU9XCIke2NvbXB1dGVUb29sdGlwKHRoaXMuaGFzcywgdGhpcy5fY29uZmlnKX1cIlxuICAgICAgICBAaGEtY2xpY2s9XCIke3RoaXMuX2hhbmRsZUNsaWNrfVwiXG4gICAgICAgIEBoYS1ob2xkPVwiJHt0aGlzLl9oYW5kbGVIb2xkfVwiXG4gICAgICAgIC5sb25nUHJlc3M9XCIke2xvbmdQcmVzcygpfVwiXG4gICAgICAgIC5vdmVycmlkZUljb249JHt0aGlzLl9jb25maWcuaWNvbn1cbiAgICAgID48L3N0YXRlLWJhZGdlPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlSG9sZCgpOiB2b2lkIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCB0cnVlKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXN0YXRlLWljb24tZWxlbWVudFwiOiBIdWlTdGF0ZUljb25FbGVtZW50O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvZW50aXR5L2hhLXN0YXRlLWxhYmVsLWJhZGdlXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nLWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRGlzcGxheSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfZGlzcGxheVwiO1xuaW1wb3J0IHsgY29tcHV0ZVRvb2x0aXAgfSBmcm9tIFwiLi4vY29tbW9uL2NvbXB1dGUtdG9vbHRpcFwiO1xuaW1wb3J0IHsgaGFuZGxlQ2xpY2sgfSBmcm9tIFwiLi4vY29tbW9uL2hhbmRsZS1jbGlja1wiO1xuaW1wb3J0IHsgbG9uZ1ByZXNzIH0gZnJvbSBcIi4uL2NvbW1vbi9kaXJlY3RpdmVzL2xvbmctcHJlc3MtZGlyZWN0aXZlXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUVsZW1lbnQsIFN0YXRlTGFiZWxFbGVtZW50Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktc3RhdGUtbGFiZWwtZWxlbWVudFwiKVxuY2xhc3MgSHVpU3RhdGVMYWJlbEVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTdGF0ZUxhYmVsRWxlbWVudENvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU3RhdGVMYWJlbEVsZW1lbnRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnZW50aXR5JyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eSFdO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZy1lbGVtZW50XG4gICAgICAgICAgbGFiZWw9JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfVxuICAgICAgICA+PC9odWktd2FybmluZy1lbGVtZW50PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXZcbiAgICAgICAgLnRpdGxlPVwiJHtjb21wdXRlVG9vbHRpcCh0aGlzLmhhc3MsIHRoaXMuX2NvbmZpZyl9XCJcbiAgICAgICAgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgQGhhLWhvbGQ9XCIke3RoaXMuX2hhbmRsZUhvbGR9XCJcbiAgICAgICAgLmxvbmdQcmVzcz1cIiR7bG9uZ1ByZXNzKCl9XCJcbiAgICAgID5cbiAgICAgICAgJHt0aGlzLl9jb25maWcucHJlZml4fSR7c3RhdGVPYmpcbiAgICAgICAgICA/IGNvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICAgIHRoaXMuaGFzcy5sb2NhbGl6ZSxcbiAgICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICAgIHRoaXMuaGFzcy5sYW5ndWFnZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogXCItXCJ9JHt0aGlzLl9jb25maWcuc3VmZml4fVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVRhcCgpOiB2b2lkIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKCk6IHZvaWQge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIHRydWUpO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgICBkaXYge1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXN0YXRlLWxhYmVsLWVsZW1lbnRcIjogSHVpU3RhdGVMYWJlbEVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jbGltYXRlLXN0YXRlXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS1nZW5lcmljLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1jbGltYXRlLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUNsaW1hdGVFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ2VudGl0eScgcmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNzIHx8ICF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgIDxoYS1jbGltYXRlLXN0YXRlXG4gICAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAgIC5zdGF0ZU9iaj1cIiR7c3RhdGVPYmp9XCJcbiAgICAgICAgPjwvaGEtY2xpbWF0ZS1zdGF0ZT5cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGEtY2xpbWF0ZS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1jbGltYXRlLWVudGl0eS1yb3dcIjogSHVpQ2xpbWF0ZUVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS1nZW5lcmljLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY292ZXItY29udHJvbHNcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY292ZXItdGlsdC1jb250cm9sc1wiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBpc1RpbHRPbmx5IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY292ZXItbW9kZWxcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktY292ZXItZW50aXR5LXJvd1wiKVxuY2xhc3MgSHVpQ292ZXJFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICAke2lzVGlsdE9ubHkoc3RhdGVPYmopXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8aGEtY292ZXItdGlsdC1jb250cm9sc1xuICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAuc3RhdGVPYmo9XCIke3N0YXRlT2JqfVwiXG4gICAgICAgICAgICAgID48L2hhLWNvdmVyLXRpbHQtY29udHJvbHM+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8aGEtY292ZXItY29udHJvbHNcbiAgICAgICAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAgICAgICA+PC9oYS1jb3Zlci1jb250cm9scz5cbiAgICAgICAgICAgIGB9XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNvdmVyLWNvbnRyb2xzLFxuICAgICAgaGEtY292ZXItdGlsdC1jb250cm9scyB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogLTAuNTdlbTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktY292ZXItZW50aXR5LXJvd1wiOiBIdWlDb3ZlckVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvaGEtZW50aXR5LXRvZ2dsZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEaXNwbGF5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kaXNwbGF5XCI7XG5pbXBvcnQgeyBET01BSU5TX1RPR0dMRSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vY29uc3RcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZ3JvdXAtZW50aXR5LXJvd1wiKVxuY2xhc3MgSHVpR3JvdXBFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICAke3RoaXMuX2NvbXB1dGVDYW5Ub2dnbGUoc3RhdGVPYmouYXR0cmlidXRlcy5lbnRpdHlfaWQpXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8aGEtZW50aXR5LXRvZ2dsZVxuICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAuc3RhdGVPYmo9XCIke3N0YXRlT2JqfVwiXG4gICAgICAgICAgICAgID48L2hhLWVudGl0eS10b2dnbGU+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICR7Y29tcHV0ZVN0YXRlRGlzcGxheShcbiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcyEubG9jYWxpemUsXG4gICAgICAgICAgICAgICAgICBzdGF0ZU9iaixcbiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcy5sYW5ndWFnZVxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYH1cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZUNhblRvZ2dsZShlbnRpdHlJZHMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZW50aXR5SWRzLnNvbWUoKGVudGl0eUlkKSA9PlxuICAgICAgRE9NQUlOU19UT0dHTEUuaGFzKGVudGl0eUlkLnNwbGl0KFwiLlwiLCAxKVswXSlcbiAgICApO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktZ3JvdXAtZW50aXR5LXJvd1wiOiBIdWlHcm91cEVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9wYXBlci10aW1lLWlucHV0LmpzXCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZHVwbGljYXRlLWltcG9ydHNcbmltcG9ydCB7IFBhcGVyVGltZUlucHV0IH0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvcGFwZXItdGltZS1pbnB1dC5qc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1kYXRlLWlucHV0XCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZHVwbGljYXRlLWltcG9ydHNcbmltcG9ydCB7IEhhRGF0ZUlucHV0IH0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtZGF0ZS1pbnB1dFwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBzZXRJbnB1dERhdGVUaW1lVmFsdWUgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dF9kYXRldGltZVwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pbnB1dC1kYXRldGltZS1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlJbnB1dERhdGV0aW1lRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBlcnJvclwiKTtcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgICR7c3RhdGVPYmouYXR0cmlidXRlcy5oYXNfZGF0ZVxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWRhdGUtaW5wdXRcbiAgICAgICAgICAgICAgICAueWVhcj0ke3N0YXRlT2JqLmF0dHJpYnV0ZXMueWVhcn1cbiAgICAgICAgICAgICAgICAubW9udGg9JHsoXCIwXCIgKyBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1vbnRoKS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgLmRheT0keyhcIjBcIiArIHN0YXRlT2JqLmF0dHJpYnV0ZXMuZGF5KS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgQGNoYW5nZT0ke3RoaXMuX3NlbGVjdGVkVmFsdWVDaGFuZ2VkfVxuICAgICAgICAgICAgICAgIEBjbGljaz0ke3RoaXMuX3N0b3BFdmVudFByb3BhZ2F0aW9ufVxuICAgICAgICAgICAgICA+PC9oYS1kYXRlLWlucHV0PlxuICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuaGFzX3RpbWUgPyBcIixcIiA6IFwiXCJ9XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBgYH1cbiAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmhhc190aW1lXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8cGFwZXItdGltZS1pbnB1dFxuICAgICAgICAgICAgICAgIC5ob3VyPSR7c3RhdGVPYmouc3RhdGUgPT09IFwidW5rbm93blwiXG4gICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgIDogKFwiMFwiICsgc3RhdGVPYmouYXR0cmlidXRlcy5ob3VyKS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgLm1pbj0ke3N0YXRlT2JqLnN0YXRlID09PSBcInVua25vd25cIlxuICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICA6IChcIjBcIiArIHN0YXRlT2JqLmF0dHJpYnV0ZXMubWludXRlKS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgLmFtUG09JHtmYWxzZX1cbiAgICAgICAgICAgICAgICBAY2hhbmdlPSR7dGhpcy5fc2VsZWN0ZWRWYWx1ZUNoYW5nZWR9XG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5fc3RvcEV2ZW50UHJvcGFnYXRpb259XG4gICAgICAgICAgICAgICAgaGlkZS1sYWJlbFxuICAgICAgICAgICAgICAgIGZvcm1hdD1cIjI0XCJcbiAgICAgICAgICAgICAgPjwvcGFwZXItdGltZS1pbnB1dD5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IGBgfVxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9zdG9wRXZlbnRQcm9wYWdhdGlvbihldjogRXZlbnQpOiB2b2lkIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF90aW1lSW5wdXRFbCgpOiBQYXBlclRpbWVJbnB1dCB7XG4gICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcInBhcGVyLXRpbWUtaW5wdXRcIikhO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2RhdGVJbnB1dEVsKCk6IEhhRGF0ZUlucHV0IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwiaGEtZGF0ZS1pbnB1dFwiKSE7XG4gIH1cblxuICBwcml2YXRlIF9zZWxlY3RlZFZhbHVlQ2hhbmdlZChldik6IHZvaWQge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgY29uc3QgdGltZSA9XG4gICAgICB0aGlzLl90aW1lSW5wdXRFbCAhPT0gbnVsbFxuICAgICAgICA/IHRoaXMuX3RpbWVJbnB1dEVsLnZhbHVlLnRyaW0oKSArIFwiOjAwXCJcbiAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBkYXRlID1cbiAgICAgIHRoaXMuX2RhdGVJbnB1dEVsICE9PSBudWxsID8gdGhpcy5fZGF0ZUlucHV0RWwudmFsdWUgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAodGltZSAhPT0gc3RhdGVPYmouc3RhdGUpIHtcbiAgICAgIHNldElucHV0RGF0ZVRpbWVWYWx1ZSh0aGlzLmhhc3MhLCBzdGF0ZU9iai5lbnRpdHlfaWQsIHRpbWUsIGRhdGUpO1xuICAgIH1cblxuICAgIGV2LnRhcmdldC5ibHVyKCk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1pbnB1dC1kYXRldGltZS1lbnRpdHktcm93XCI6IEh1aUlucHV0RGF0ZXRpbWVFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLXNsaWRlclwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBjb21wdXRlUlRMRGlyZWN0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBzZXRWYWx1ZSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X3RleHRcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktaW5wdXQtbnVtYmVyLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUlucHV0TnVtYmVyRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHJpdmF0ZSBfbG9hZGVkPzogYm9vbGVhbjtcblxuICBwcml2YXRlIF91cGRhdGVkPzogYm9vbGVhbjtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICh0aGlzLl91cGRhdGVkICYmICF0aGlzLl9sb2FkZWQpIHtcbiAgICAgIHRoaXMuX2luaXRpYWxMb2FkKCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGZpcnN0VXBkYXRlZCgpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCAmJiAhdGhpcy5fbG9hZGVkKSB7XG4gICAgICB0aGlzLl9pbml0aWFsTG9hZCgpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICR7c3RhdGVPYmouYXR0cmlidXRlcy5tb2RlID09PSBcInNsaWRlclwiXG4gICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgIDxoYS1zbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgLmRpcj1cIiR7Y29tcHV0ZVJUTERpcmVjdGlvbih0aGlzLmhhc3MhKX1cIlxuICAgICAgICAgICAgICAgICAgICAuc3RlcD1cIiR7TnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMuc3RlcCl9XCJcbiAgICAgICAgICAgICAgICAgICAgLm1pbj1cIiR7TnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMubWluKX1cIlxuICAgICAgICAgICAgICAgICAgICAubWF4PVwiJHtOdW1iZXIoc3RhdGVPYmouYXR0cmlidXRlcy5tYXgpfVwiXG4gICAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7TnVtYmVyKHN0YXRlT2JqLnN0YXRlKX1cIlxuICAgICAgICAgICAgICAgICAgICBwaW5cbiAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT1cIiR7dGhpcy5fc2VsZWN0ZWRWYWx1ZUNoYW5nZWR9XCJcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlLWJhci10b3VjaFxuICAgICAgICAgICAgICAgICAgICBpZD1cImlucHV0XCJcbiAgICAgICAgICAgICAgICAgID48L2hhLXNsaWRlcj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgJHtOdW1iZXIoc3RhdGVPYmouc3RhdGUpfVxuICAgICAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudH1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgICAgICAgICAgbm8tbGFiZWwtZmxvYXRcbiAgICAgICAgICAgICAgICAgIGF1dG8tdmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgIC5wYXR0ZXJuPVwiWzAtOV0rKFtcXFxcLl1bMC05XSspP1wiXG4gICAgICAgICAgICAgICAgICAuc3RlcD1cIiR7TnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMuc3RlcCl9XCJcbiAgICAgICAgICAgICAgICAgIC5taW49XCIke051bWJlcihzdGF0ZU9iai5hdHRyaWJ1dGVzLm1pbil9XCJcbiAgICAgICAgICAgICAgICAgIC5tYXg9XCIke051bWJlcihzdGF0ZU9iai5hdHRyaWJ1dGVzLm1heCl9XCJcbiAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7TnVtYmVyKHN0YXRlT2JqLnN0YXRlKX1cIlxuICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICBAY2hhbmdlPVwiJHt0aGlzLl9zZWxlY3RlZFZhbHVlQ2hhbmdlZH1cIlxuICAgICAgICAgICAgICAgICAgaWQ9XCJpbnB1dFwiXG4gICAgICAgICAgICAgICAgPjwvcGFwZXItaW5wdXQ+XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAuZmxleCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICAuc3RhdGUge1xuICAgICAgICBtaW4td2lkdGg6IDQ1cHg7XG4gICAgICAgIHRleHQtYWxpZ246IGVuZDtcbiAgICAgIH1cbiAgICAgIHBhcGVyLWlucHV0IHtcbiAgICAgICAgdGV4dC1hbGlnbjogZW5kO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9pbml0aWFsTG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9sb2FkZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcIi5zdGF0ZVwiKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIGlmICghZWxlbWVudCB8fCAhdGhpcy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWxlbWVudC5oaWRkZW4gPSB0aGlzLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGggPD0gMzUwO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2lucHV0RWxlbWVudCgpOiB7IHZhbHVlOiBzdHJpbmcgfSB7XG4gICAgLy8gbGludGVyIHJlY29tbWVuZGVkIHRoZSBmb2xsb3dpbmcgc3ludGF4XG4gICAgcmV0dXJuICh0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwiaW5wdXRcIikgYXMgdW5rbm93bikgYXMge1xuICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfc2VsZWN0ZWRWYWx1ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2lucHV0RWxlbWVudDtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XTtcblxuICAgIGlmIChlbGVtZW50LnZhbHVlICE9PSBzdGF0ZU9iai5zdGF0ZSkge1xuICAgICAgc2V0VmFsdWUodGhpcy5oYXNzISwgc3RhdGVPYmouZW50aXR5X2lkLCBlbGVtZW50LnZhbHVlISk7XG4gICAgfVxuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW5wdXQtbnVtYmVyLWVudGl0eS1yb3dcIjogSHVpSW5wdXROdW1iZXJFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWl0ZW0vcGFwZXItaXRlbVwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItbGlzdGJveC9wYXBlci1saXN0Ym94XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtcGFwZXItZHJvcGRvd24tbWVudVwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvc3RhdGUtYmFkZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50LCBJbnB1dFNlbGVjdEVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgc2V0SW5wdXRTZWxlY3RPcHRpb24gfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dC1zZWxlY3RcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcbmltcG9ydCB7IGZvcndhcmRIYXB0aWMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9oYXB0aWNzXCI7XG5pbXBvcnQgeyBzdG9wUHJvcGFnYXRpb24gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9zdG9wX3Byb3BhZ2F0aW9uXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWlucHV0LXNlbGVjdC1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlJbnB1dFNlbGVjdEVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmVudGl0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnZW50aXR5JyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV0gYXNcbiAgICAgIHwgSW5wdXRTZWxlY3RFbnRpdHlcbiAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPHN0YXRlLWJhZGdlIC5zdGF0ZU9iaj1cIiR7c3RhdGVPYmp9XCI+PC9zdGF0ZS1iYWRnZT5cbiAgICAgIDxoYS1wYXBlci1kcm9wZG93bi1tZW51XG4gICAgICAgIC5sYWJlbD0ke3RoaXMuX2NvbmZpZy5uYW1lIHx8IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfVxuICAgICAgICAudmFsdWU9JHtzdGF0ZU9iai5zdGF0ZX1cbiAgICAgICAgQGlyb24tc2VsZWN0PSR7dGhpcy5fc2VsZWN0ZWRDaGFuZ2VkfVxuICAgICAgICBAY2xpY2s9JHtzdG9wUHJvcGFnYXRpb259XG4gICAgICA+XG4gICAgICAgIDxwYXBlci1saXN0Ym94IHNsb3Q9XCJkcm9wZG93bi1jb250ZW50XCI+XG4gICAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLm9wdGlvbnMubWFwKFxuICAgICAgICAgICAgKG9wdGlvbikgPT4gaHRtbGBcbiAgICAgICAgICAgICAgPHBhcGVyLWl0ZW0+JHtvcHRpb259PC9wYXBlci1pdGVtPlxuICAgICAgICAgICAgYFxuICAgICAgICAgICl9XG4gICAgICAgIDwvcGFwZXItbGlzdGJveD5cbiAgICAgIDwvaGEtcGFwZXItZHJvcGRvd24tbWVudT5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcblxuICAgIGlmICghdGhpcy5oYXNzIHx8ICF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV0gYXNcbiAgICAgIHwgSW5wdXRTZWxlY3RFbnRpdHlcbiAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBhZnRlciByZW5kZXJpbmcgdGhlIGl0ZW1zIG9yIGVsc2UgaXQgd29uJ3Qgd29yayBpbiBGaXJlZm94XG4gICAgdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCJwYXBlci1saXN0Ym94XCJcbiAgICApIS5zZWxlY3RlZCA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMub3B0aW9ucy5pbmRleE9mKHN0YXRlT2JqLnN0YXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIGhhLXBhcGVyLWRyb3Bkb3duLW1lbnUge1xuICAgICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgcGFwZXItaXRlbSB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2VsZWN0ZWRDaGFuZ2VkKGV2KTogdm9pZCB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV07XG4gICAgY29uc3Qgb3B0aW9uID0gZXYudGFyZ2V0LnNlbGVjdGVkSXRlbS5pbm5lclRleHQudHJpbSgpO1xuICAgIGlmIChvcHRpb24gPT09IHN0YXRlT2JqLnN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yd2FyZEhhcHRpYyhcImxpZ2h0XCIpO1xuXG4gICAgc2V0SW5wdXRTZWxlY3RPcHRpb24odGhpcy5oYXNzISwgc3RhdGVPYmouZW50aXR5X2lkLCBvcHRpb24pO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW5wdXQtc2VsZWN0LWVudGl0eS1yb3dcIjogSHVpSW5wdXRTZWxlY3RFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgUGFwZXJJbnB1dEVsZW1lbnQgfSBmcm9tIFwiQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHNldFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfdGV4dFwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pbnB1dC10ZXh0LWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUlucHV0VGV4dEVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBlcnJvclwiKTtcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgIG5vLWxhYmVsLWZsb2F0XG4gICAgICAgICAgLnZhbHVlPVwiJHtzdGF0ZU9iai5zdGF0ZX1cIlxuICAgICAgICAgIC5taW5sZW5ndGg9XCIke3N0YXRlT2JqLmF0dHJpYnV0ZXMubWlufVwiXG4gICAgICAgICAgLm1heGxlbmd0aD1cIiR7c3RhdGVPYmouYXR0cmlidXRlcy5tYXh9XCJcbiAgICAgICAgICAuYXV0b1ZhbGlkYXRlPVwiJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLnBhdHRlcm59XCJcbiAgICAgICAgICAucGF0dGVybj1cIiR7c3RhdGVPYmouYXR0cmlidXRlcy5wYXR0ZXJufVwiXG4gICAgICAgICAgLnR5cGU9XCIke3N0YXRlT2JqLmF0dHJpYnV0ZXMubW9kZX1cIlxuICAgICAgICAgIEBjaGFuZ2U9XCIke3RoaXMuX3NlbGVjdGVkVmFsdWVDaGFuZ2VkfVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCIoZW1wdHkgdmFsdWUpXCJcbiAgICAgICAgPjwvcGFwZXItaW5wdXQ+XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9pbnB1dEVsKCk6IFBhcGVySW5wdXRFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwicGFwZXItaW5wdXRcIikgYXMgUGFwZXJJbnB1dEVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9zZWxlY3RlZFZhbHVlQ2hhbmdlZChldik6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9pbnB1dEVsO1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKGVsZW1lbnQudmFsdWUgIT09IHN0YXRlT2JqLnN0YXRlKSB7XG4gICAgICBzZXRWYWx1ZSh0aGlzLmhhc3MhLCBzdGF0ZU9iai5lbnRpdHlfaWQsIGVsZW1lbnQudmFsdWUhKTtcbiAgICB9XG5cbiAgICBldi50YXJnZXQuYmx1cigpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW5wdXQtdGV4dC1lbnRpdHktcm93XCI6IEh1aUlucHV0VGV4dEVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS1nZW5lcmljLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1sb2NrLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUxvY2tFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICA8bXdjLWJ1dHRvbiBAY2xpY2s9XCIke3RoaXMuX2NhbGxTZXJ2aWNlfVwiPlxuICAgICAgICAgICR7c3RhdGVPYmouc3RhdGUgPT09IFwibG9ja2VkXCJcbiAgICAgICAgICAgID8gdGhpcy5oYXNzIS5sb2NhbGl6ZShcInVpLmNhcmQubG9jay51bmxvY2tcIilcbiAgICAgICAgICAgIDogdGhpcy5oYXNzIS5sb2NhbGl6ZShcInVpLmNhcmQubG9jay5sb2NrXCIpfVxuICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIG13Yy1idXR0b24ge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IC0wLjU3ZW07XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NhbGxTZXJ2aWNlKGV2KTogdm9pZCB7XG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV07XG4gICAgdGhpcy5oYXNzIS5jYWxsU2VydmljZShcbiAgICAgIFwibG9ja1wiLFxuICAgICAgc3RhdGVPYmouc3RhdGUgPT09IFwibG9ja2VkXCIgPyBcInVubG9ja1wiIDogXCJsb2NrXCIsXG4gICAgICB7IGVudGl0eV9pZDogc3RhdGVPYmouZW50aXR5X2lkIH1cbiAgICApO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktbG9jay1lbnRpdHktcm93XCI6IEh1aUxvY2tFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgcHJvcGVydHksXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWljb24tYnV0dG9uL3BhcGVyLWljb24tYnV0dG9uXCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgc3VwcG9ydHNGZWF0dXJlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3VwcG9ydHMtZmVhdHVyZVwiO1xuaW1wb3J0IHtcbiAgU1VQUE9SVFNfUExBWSxcbiAgU1VQUE9SVF9ORVhUX1RSQUNLLFxuICBPRkZfU1RBVEVTLFxuICBTVVBQT1JUX1BBVVNFLFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9tZWRpYS1wbGF5ZXJcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktbWVkaWEtcGxheWVyLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aU1lZGlhUGxheWVyRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246ICdlbnRpdHknIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzcyB8fCAhdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93XG4gICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiXG4gICAgICAgIC5zaG93U2Vjb25kYXJ5PSR7ZmFsc2V9XG4gICAgICA+XG4gICAgICAgICR7T0ZGX1NUQVRFUy5pbmNsdWRlcyhzdGF0ZU9iai5zdGF0ZSlcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKGBzdGF0ZS5tZWRpYV9wbGF5ZXIuJHtzdGF0ZU9iai5zdGF0ZX1gKSB8fFxuICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sb2NhbGl6ZShgc3RhdGUuZGVmYXVsdC4ke3N0YXRlT2JqLnN0YXRlfWApIHx8XG4gICAgICAgICAgICAgICAgICBzdGF0ZU9iai5zdGF0ZX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLnN0YXRlICE9PSBcInBsYXlpbmdcIiAmJlxuICAgICAgICAgICAgICAgICFzdXBwb3J0c0ZlYXR1cmUoc3RhdGVPYmosIFNVUFBPUlRTX1BMQVkpXG4gICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGljb249XCIke3RoaXMuX2NvbXB1dGVDb250cm9sSWNvbihzdGF0ZU9iail9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fcGxheVBhdXNlfVwiXG4gICAgICAgICAgICAgICAgICAgICAgPjwvcGFwZXItaWNvbi1idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgJHtzdXBwb3J0c0ZlYXR1cmUoc3RhdGVPYmosIFNVUFBPUlRfTkVYVF9UUkFDSylcbiAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOnNraXAtbmV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX25leHRUcmFja31cIlxuICAgICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IHNsb3Q9XCJzZWNvbmRhcnlcIj4ke3RoaXMuX2NvbXB1dGVNZWRpYVRpdGxlKHN0YXRlT2JqKX08L2Rpdj5cbiAgICAgICAgICAgIGB9XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIC5jb250cm9scyB7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbXB1dGVDb250cm9sSWNvbihzdGF0ZU9iajogSGFzc0VudGl0eSk6IHN0cmluZyB7XG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlICE9PSBcInBsYXlpbmdcIikge1xuICAgICAgcmV0dXJuIFwiaGFzczpwbGF5XCI7XG4gICAgfVxuXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWJpdHdpc2VcbiAgICByZXR1cm4gc3VwcG9ydHNGZWF0dXJlKHN0YXRlT2JqLCBTVVBQT1JUX1BBVVNFKVxuICAgICAgPyBcImhhc3M6cGF1c2VcIlxuICAgICAgOiBcImhhc3M6c3RvcFwiO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZU1lZGlhVGl0bGUoc3RhdGVPYmo6IEhhc3NFbnRpdHkpOiBzdHJpbmcge1xuICAgIGxldCBwcmVmaXg7XG4gICAgbGV0IHN1ZmZpeDtcblxuICAgIHN3aXRjaCAoc3RhdGVPYmouYXR0cmlidXRlcy5tZWRpYV9jb250ZW50X3R5cGUpIHtcbiAgICAgIGNhc2UgXCJtdXNpY1wiOlxuICAgICAgICBwcmVmaXggPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1lZGlhX2FydGlzdDtcbiAgICAgICAgc3VmZml4ID0gc3RhdGVPYmouYXR0cmlidXRlcy5tZWRpYV90aXRsZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidHZzaG93XCI6XG4gICAgICAgIHByZWZpeCA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWVkaWFfc2VyaWVzX3RpdGxlO1xuICAgICAgICBzdWZmaXggPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1lZGlhX3RpdGxlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHByZWZpeCA9XG4gICAgICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy5tZWRpYV90aXRsZSB8fFxuICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMuYXBwX25hbWUgfHxcbiAgICAgICAgICBzdGF0ZU9iai5zdGF0ZTtcbiAgICAgICAgc3VmZml4ID0gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJlZml4ICYmIHN1ZmZpeCA/IGAke3ByZWZpeH06ICR7c3VmZml4fWAgOiBwcmVmaXggfHwgc3VmZml4IHx8IFwiXCI7XG4gIH1cblxuICBwcml2YXRlIF9wbGF5UGF1c2UoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwibWVkaWFfcGxheWVyXCIsIFwibWVkaWFfcGxheV9wYXVzZVwiLCB7XG4gICAgICBlbnRpdHlfaWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5LFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfbmV4dFRyYWNrKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5oYXNzIS5jYWxsU2VydmljZShcIm1lZGlhX3BsYXllclwiLCBcIm1lZGlhX25leHRfdHJhY2tcIiwge1xuICAgICAgZW50aXR5X2lkOiB0aGlzLl9jb25maWchLmVudGl0eSxcbiAgICB9KTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLW1lZGlhLXBsYXllci1lbnRpdHktcm93XCI6IEh1aU1lZGlhUGxheWVyRW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgQ1NTUmVzdWx0LFxuICBjc3MsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvaGEtZW50aXR5LXRvZ2dsZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXNjZW5lLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aVNjZW5lRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aHVpLWdlbmVyaWMtZW50aXR5LXJvdyAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiIC5jb25maWc9XCIke3RoaXMuX2NvbmZpZ31cIj5cbiAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmNhbl9jYW5jZWxcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxoYS1lbnRpdHktdG9nZ2xlXG4gICAgICAgICAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAgICAgICAgIC5zdGF0ZU9iaj1cIiR7c3RhdGVPYmp9XCJcbiAgICAgICAgICAgICAgPjwvaGEtZW50aXR5LXRvZ2dsZT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxtd2MtYnV0dG9uIEBjbGljaz1cIiR7dGhpcy5fY2FsbFNlcnZpY2V9XCI+XG4gICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKFwidWkuY2FyZC5zY2VuZS5hY3RpdmF0ZVwiKX1cbiAgICAgICAgICAgICAgPC9td2MtYnV0dG9uPlxuICAgICAgICAgICAgYH1cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgbXdjLWJ1dHRvbiB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogLTAuNTdlbTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2FsbFNlcnZpY2UoZXYpOiB2b2lkIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwic2NlbmVcIiwgXCJ0dXJuX29uXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zY2VuZS1lbnRpdHktcm93XCI6IEh1aVNjZW5lRW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgcHJvcGVydHksXG4gIENTU1Jlc3VsdCxcbiAgY3NzLFxuICBjdXN0b21FbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvaGEtZW50aXR5LXRvZ2dsZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXNjcmlwdC1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlTY3JpcHRFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuY2FuX2NhbmNlbFxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWVudGl0eS10b2dnbGVcbiAgICAgICAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAgICAgICA+PC9oYS1lbnRpdHktdG9nZ2xlPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgPG13Yy1idXR0b24gQGNsaWNrPVwiJHt0aGlzLl9jYWxsU2VydmljZX1cIj5cbiAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXCJ1aS5jYXJkLnNjcmlwdC5leGVjdXRlXCIpfVxuICAgICAgICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgICAgICBgfVxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBtd2MtYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAtMC41N2VtO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jYWxsU2VydmljZShldik6IHZvaWQge1xuICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuaGFzcyEuY2FsbFNlcnZpY2UoXCJzY3JpcHRcIiwgXCJ0dXJuX29uXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zY3JpcHQtZW50aXR5LXJvd1wiOiBIdWlTY3JpcHRFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgQ1NTUmVzdWx0LFxuICBjc3MsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS10aW1lc3RhbXAtZGlzcGxheVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEaXNwbGF5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kaXNwbGF5XCI7XG5cbmludGVyZmFjZSBTZW5zb3JFbnRpdHlDb25maWcgZXh0ZW5kcyBFbnRpdHlDb25maWcge1xuICBmb3JtYXQ/OiBcInJlbGF0aXZlXCIgfCBcImRhdGVcIiB8IFwidGltZVwiIHwgXCJkYXRldGltZVwiO1xufVxuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zZW5zb3ItZW50aXR5LXJvd1wiKVxuY2xhc3MgSHVpU2Vuc29yRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTZW5zb3JFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNlbnNvckVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aHVpLWdlbmVyaWMtZW50aXR5LXJvdyAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiIC5jb25maWc9XCIke3RoaXMuX2NvbmZpZ31cIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuZGV2aWNlX2NsYXNzID09PSBcInRpbWVzdGFtcFwiICYmXG4gICAgICAgICAgc3RhdGVPYmouc3RhdGUgIT09IFwidW5hdmFpbGFibGVcIlxuICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgIDxodWktdGltZXN0YW1wLWRpc3BsYXlcbiAgICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAgIC50cz1cIiR7bmV3IERhdGUoc3RhdGVPYmouc3RhdGUpfVwiXG4gICAgICAgICAgICAgICAgICAuZm9ybWF0PVwiJHt0aGlzLl9jb25maWcuZm9ybWF0fVwiXG4gICAgICAgICAgICAgICAgPjwvaHVpLXRpbWVzdGFtcC1kaXNwbGF5PlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICA6IGNvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sb2NhbGl6ZSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9iaixcbiAgICAgICAgICAgICAgICB0aGlzLmhhc3MubGFuZ3VhZ2VcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGRpdiB7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zZW5zb3ItZW50aXR5LXJvd1wiOiBIdWlTZW5zb3JFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgQ1NTUmVzdWx0LFxuICBjc3MsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktdGV4dC1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlUZXh0RW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aHVpLWdlbmVyaWMtZW50aXR5LXJvdyAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiIC5jb25maWc9XCIke3RoaXMuX2NvbmZpZ31cIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAke2NvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICB0aGlzLmhhc3MubGFuZ3VhZ2VcbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgZGl2IHtcbiAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXRleHQtZW50aXR5LXJvd1wiOiBIdWlUZXh0RW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgcHJvcGVydHksXG4gIFByb3BlcnR5VmFsdWVzLFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IHRpbWVyVGltZVJlbWFpbmluZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3RpbWVyX3RpbWVfcmVtYWluaW5nXCI7XG5pbXBvcnQgc2Vjb25kc1RvRHVyYXRpb24gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9zZWNvbmRzX3RvX2R1cmF0aW9uXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS10aW1lci1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlUaW1lckVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX3RpbWVSZW1haW5pbmc/OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfaW50ZXJ2YWw/OiBudW1iZXI7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9jbGVhckludGVydmFsKCk7XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5fY29uZmlnICYmIHRoaXMuX2NvbmZpZy5lbnRpdHkpIHtcbiAgICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuICAgICAgaWYgKHN0YXRlT2JqKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0SW50ZXJ2YWwoc3RhdGVPYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICA8ZGl2PiR7dGhpcy5fY29tcHV0ZURpc3BsYXkoc3RhdGVPYmopfTwvZGl2PlxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl90aW1lUmVtYWluaW5nXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuXG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJoYXNzXCIpKSB7XG4gICAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XTtcbiAgICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyB0aGlzW1wiaGFzc1wiXTtcbiAgICAgIGNvbnN0IG9sZFN0YXRlT2JqID0gb2xkSGFzc1xuICAgICAgICA/IG9sZEhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XVxuICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKG9sZFN0YXRlT2JqICE9PSBzdGF0ZU9iaikge1xuICAgICAgICB0aGlzLl9zdGFydEludGVydmFsKHN0YXRlT2JqKTtcbiAgICAgIH0gZWxzZSBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckludGVydmFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdGhpcy5faW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnRJbnRlcnZhbChzdGF0ZU9iajogSGFzc0VudGl0eSk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgICB0aGlzLl9jYWxjdWxhdGVSZW1haW5pbmcoc3RhdGVPYmopO1xuXG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlID09PSBcImFjdGl2ZVwiKSB7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbChcbiAgICAgICAgKCkgPT4gdGhpcy5fY2FsY3VsYXRlUmVtYWluaW5nKHN0YXRlT2JqKSxcbiAgICAgICAgMTAwMFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jYWxjdWxhdGVSZW1haW5pbmcoc3RhdGVPYmo6IEhhc3NFbnRpdHkpOiB2b2lkIHtcbiAgICB0aGlzLl90aW1lUmVtYWluaW5nID0gdGltZXJUaW1lUmVtYWluaW5nKHN0YXRlT2JqKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbXB1dGVEaXNwbGF5KHN0YXRlT2JqOiBIYXNzRW50aXR5KTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlID09PSBcImlkbGVcIiB8fCB0aGlzLl90aW1lUmVtYWluaW5nID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXNzIS5sb2NhbGl6ZShcInN0YXRlLnRpbWVyLlwiICsgc3RhdGVPYmouc3RhdGUpO1xuICAgIH1cblxuICAgIGxldCBkaXNwbGF5ID0gc2Vjb25kc1RvRHVyYXRpb24odGhpcy5fdGltZVJlbWFpbmluZyB8fCAwKTtcblxuICAgIGlmIChzdGF0ZU9iai5zdGF0ZSA9PT0gXCJwYXVzZWRcIikge1xuICAgICAgZGlzcGxheSArPSBgICgke3RoaXMuaGFzcyEubG9jYWxpemUoXCJzdGF0ZS50aW1lci5wYXVzZWRcIil9KWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpc3BsYXk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS10aW1lci1lbnRpdHktcm93XCI6IEh1aVRpbWVyRW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2VudGl0eS9oYS1lbnRpdHktdG9nZ2xlXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktdG9nZ2xlLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aVRvZ2dsZUVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBlcnJvclwiKTtcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgICR7c3RhdGVPYmouc3RhdGUgPT09IFwib25cIiB8fCBzdGF0ZU9iai5zdGF0ZSA9PT0gXCJvZmZcIlxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWVudGl0eS10b2dnbGVcbiAgICAgICAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAgICAgICA+PC9oYS1lbnRpdHktdG9nZ2xlPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAke2NvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICAgICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICAgICAgICB0aGlzLmhhc3MhLmxhbmd1YWdlXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgfVxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS10b2dnbGUtZW50aXR5LXJvd1wiOiBIdWlUb2dnbGVFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCBcIkBtYXRlcmlhbC9td2MtYnV0dG9uXCI7XG5cbmltcG9ydCB7XG4gIGZldGNoQ29uZmlnLFxuICBMb3ZlbGFjZUNvbmZpZyxcbiAgc2F2ZUNvbmZpZyxcbiAgc3Vic2NyaWJlTG92ZWxhY2VVcGRhdGVzLFxuICBXaW5kb3dXaXRoTG92ZWxhY2VQcm9tLFxufSBmcm9tIFwiLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuaW1wb3J0IFwiLi4vLi4vbGF5b3V0cy9oYXNzLWxvYWRpbmctc2NyZWVuXCI7XG5pbXBvcnQgXCIuLi8uLi9sYXlvdXRzL2hhc3MtZXJyb3Itc2NyZWVuXCI7XG5pbXBvcnQgXCIuL2h1aS1yb290XCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50LCBQYW5lbEluZm8sIFJvdXRlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQge1xuICBMaXRFbGVtZW50LFxuICBodG1sLFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IHNob3dTYXZlRGlhbG9nIH0gZnJvbSBcIi4vZWRpdG9yL3Nob3ctc2F2ZS1jb25maWctZGlhbG9nXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUxvdmVsYWNlQ29uZmlnRnJvbUhhc3MgfSBmcm9tIFwiLi9jb21tb24vZ2VuZXJhdGUtbG92ZWxhY2UtY29uZmlnXCI7XG5pbXBvcnQgeyBzaG93VG9hc3QgfSBmcm9tIFwiLi4vLi4vdXRpbC90b2FzdFwiO1xuXG5pbnRlcmZhY2UgTG92ZWxhY2VQYW5lbENvbmZpZyB7XG4gIG1vZGU6IFwieWFtbFwiIHwgXCJzdG9yYWdlXCI7XG59XG5cbmxldCBlZGl0b3JMb2FkZWQgPSBmYWxzZTtcblxuY2xhc3MgTG92ZWxhY2VQYW5lbCBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgcGFuZWw/OiBQYW5lbEluZm88TG92ZWxhY2VQYW5lbENvbmZpZz47XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBuYXJyb3c/OiBib29sZWFuO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyByb3V0ZT86IFJvdXRlO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbHVtbnM/OiBudW1iZXI7XG5cbiAgQHByb3BlcnR5KClcbiAgcHJpdmF0ZSBfc3RhdGU/OiBcImxvYWRpbmdcIiB8IFwibG9hZGVkXCIgfCBcImVycm9yXCIgfCBcInlhbWwtZWRpdG9yXCIgPSBcImxvYWRpbmdcIjtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9lcnJvck1zZz86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIGxvdmVsYWNlPzogTG92ZWxhY2U7XG5cbiAgcHJpdmF0ZSBtcWxzPzogTWVkaWFRdWVyeUxpc3RbXTtcblxuICBwcml2YXRlIF9pZ25vcmVOZXh0VXBkYXRlRXZlbnQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2Nsb3NlRWRpdG9yID0gdGhpcy5fY2xvc2VFZGl0b3IuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3N0YXRlITtcblxuICAgIGlmIChzdGF0ZSA9PT0gXCJsb2FkZWRcIikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktcm9vdFxuICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAubG92ZWxhY2U9XCIke3RoaXMubG92ZWxhY2V9XCJcbiAgICAgICAgICAucm91dGU9XCIke3RoaXMucm91dGV9XCJcbiAgICAgICAgICAuY29sdW1ucz1cIiR7dGhpcy5fY29sdW1uc31cIlxuICAgICAgICAgIC5uYXJyb3c9JHt0aGlzLm5hcnJvd31cbiAgICAgICAgICBAY29uZmlnLXJlZnJlc2g9XCIke3RoaXMuX2ZvcmNlRmV0Y2hDb25maWd9XCJcbiAgICAgICAgPjwvaHVpLXJvb3Q+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGhhc3MtZXJyb3Itc2NyZWVuIHRpdGxlPVwiTG92ZWxhY2VcIiAuZXJyb3I9XCIke3RoaXMuX2Vycm9yTXNnfVwiPlxuICAgICAgICAgIDxtd2MtYnV0dG9uIG9uLWNsaWNrPVwiX2ZvcmNlRmV0Y2hDb25maWdcIlxuICAgICAgICAgICAgPiR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5yZWxvYWRfbG92ZWxhY2VcIlxuICAgICAgICAgICAgKX08L213Yy1idXR0b25cbiAgICAgICAgICA+XG4gICAgICAgIDwvaGFzcy1lcnJvci1zY3JlZW4+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZSA9PT0gXCJ5YW1sLWVkaXRvclwiKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS1lZGl0b3JcbiAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgLmxvdmVsYWNlPVwiJHt0aGlzLmxvdmVsYWNlfVwiXG4gICAgICAgICAgLmNsb3NlRWRpdG9yPVwiJHt0aGlzLl9jbG9zZUVkaXRvcn1cIlxuICAgICAgICA+PC9odWktZWRpdG9yPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYXNzLWxvYWRpbmctc2NyZWVuXG4gICAgICAgIHJvb3RuYXZcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5uYXJyb3c9JHt0aGlzLm5hcnJvd31cbiAgICAgID48L2hhc3MtbG9hZGluZy1zY3JlZW4+XG4gICAgYDtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wcyk7XG5cbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIm5hcnJvd1wiKSkge1xuICAgICAgdGhpcy5fdXBkYXRlQ29sdW1ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgdGhpc1tcImhhc3NcIl07XG5cbiAgICBpZiAob2xkSGFzcyAmJiB0aGlzLmhhc3MhLmRvY2tlZFNpZGViYXIgIT09IG9sZEhhc3MuZG9ja2VkU2lkZWJhcikge1xuICAgICAgdGhpcy5fdXBkYXRlQ29sdW1ucygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBmaXJzdFVwZGF0ZWQoKSB7XG4gICAgdGhpcy5fZmV0Y2hDb25maWcoZmFsc2UpO1xuICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gdW5zdWIgYXMgd2Ugd2FudCB0byBzdGF5IGluZm9ybWVkIG9mIHVwZGF0ZXNcbiAgICBzdWJzY3JpYmVMb3ZlbGFjZVVwZGF0ZXModGhpcy5oYXNzIS5jb25uZWN0aW9uLCAoKSA9PlxuICAgICAgdGhpcy5fbG92ZWxhY2VDaGFuZ2VkKClcbiAgICApO1xuICAgIC8vIHJlbG9hZCBsb3ZlbGFjZSBvbiByZWNvbm5lY3Qgc28gd2UgYXJlIHN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IGNvbmZpZ1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbi1zdGF0dXNcIiwgKGV2KSA9PiB7XG4gICAgICBpZiAoZXYuZGV0YWlsID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICAgIHRoaXMuX2ZldGNoQ29uZmlnKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl91cGRhdGVDb2x1bW5zID0gdGhpcy5fdXBkYXRlQ29sdW1ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMubXFscyA9IFszMDAsIDYwMCwgOTAwLCAxMjAwXS5tYXAoKHdpZHRoKSA9PiB7XG4gICAgICBjb25zdCBtcWwgPSBtYXRjaE1lZGlhKGAobWluLXdpZHRoOiAke3dpZHRofXB4KWApO1xuICAgICAgbXFsLmFkZExpc3RlbmVyKHRoaXMuX3VwZGF0ZUNvbHVtbnMpO1xuICAgICAgcmV0dXJuIG1xbDtcbiAgICB9KTtcbiAgICB0aGlzLl91cGRhdGVDb2x1bW5zKCk7XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAoXG4gICAgICB0aGlzLmxvdmVsYWNlICYmXG4gICAgICB0aGlzLmhhc3MgJiZcbiAgICAgIHRoaXMubG92ZWxhY2UubGFuZ3VhZ2UgIT09IHRoaXMuaGFzcy5sYW5ndWFnZVxuICAgICkge1xuICAgICAgLy8gbGFuZ3VhZ2UgaGFzIGJlZW4gY2hhbmdlZCwgcmVidWlsZCBVSVxuICAgICAgdGhpcy5fc2V0TG92ZWxhY2VDb25maWcodGhpcy5sb3ZlbGFjZS5jb25maWcsIHRoaXMubG92ZWxhY2UubW9kZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmxvdmVsYWNlICYmIHRoaXMubG92ZWxhY2UubW9kZSA9PT0gXCJnZW5lcmF0ZWRcIikge1xuICAgICAgLy8gV2hlbiBsb3ZlbGFjZSBpcyBnZW5lcmF0ZWQsIHdlIHJlLWdlbmVyYXRlIGVhY2ggdGltZSBhIHVzZXIgZ29lc1xuICAgICAgLy8gdG8gdGhlIHN0YXRlcyBwYW5lbCB0byBtYWtlIHN1cmUgbmV3IGVudGl0aWVzIGFyZSBzaG93bi5cbiAgICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkaW5nXCI7XG4gICAgICB0aGlzLl9yZWdlbmVyYXRlQ29uZmlnKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfcmVnZW5lcmF0ZUNvbmZpZygpIHtcbiAgICBjb25zdCBjb25mID0gYXdhaXQgZ2VuZXJhdGVMb3ZlbGFjZUNvbmZpZ0Zyb21IYXNzKHRoaXMuaGFzcyEpO1xuICAgIHRoaXMuX3NldExvdmVsYWNlQ29uZmlnKGNvbmYsIFwiZ2VuZXJhdGVkXCIpO1xuICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkZWRcIjtcbiAgfVxuXG4gIHByaXZhdGUgX2Nsb3NlRWRpdG9yKCkge1xuICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkZWRcIjtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUNvbHVtbnMoKSB7XG4gICAgY29uc3QgbWF0Y2hDb2x1bW5zID0gdGhpcy5tcWxzIS5yZWR1Y2UoXG4gICAgICAoY29scywgbXFsKSA9PiBjb2xzICsgTnVtYmVyKG1xbC5tYXRjaGVzKSxcbiAgICAgIDBcbiAgICApO1xuICAgIC8vIERvIC0xIGNvbHVtbiBpZiB0aGUgbWVudSBpcyBkb2NrZWQgYW5kIG9wZW5cbiAgICB0aGlzLl9jb2x1bW5zID0gTWF0aC5tYXgoXG4gICAgICAxLFxuICAgICAgbWF0Y2hDb2x1bW5zIC1cbiAgICAgICAgTnVtYmVyKCF0aGlzLm5hcnJvdyAmJiB0aGlzLmhhc3MhLmRvY2tlZFNpZGViYXIgPT09IFwiZG9ja2VkXCIpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2xvdmVsYWNlQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5faWdub3JlTmV4dFVwZGF0ZUV2ZW50KSB7XG4gICAgICB0aGlzLl9pZ25vcmVOZXh0VXBkYXRlRXZlbnQgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2hvd1RvYXN0KHRoaXMsIHtcbiAgICAgIG1lc3NhZ2U6IHRoaXMuaGFzcyEubG9jYWxpemUoXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jaGFuZ2VkX3RvYXN0Lm1lc3NhZ2VcIiksXG4gICAgICBhY3Rpb246IHtcbiAgICAgICAgYWN0aW9uOiAoKSA9PiB0aGlzLl9mZXRjaENvbmZpZyhmYWxzZSksXG4gICAgICAgIHRleHQ6IHRoaXMuaGFzcyEubG9jYWxpemUoXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jaGFuZ2VkX3RvYXN0LnJlZnJlc2hcIiksXG4gICAgICB9LFxuICAgICAgZHVyYXRpb246IDAsXG4gICAgICBkaXNtaXNzYWJsZTogZmFsc2UsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9mb3JjZUZldGNoQ29uZmlnKCkge1xuICAgIHRoaXMuX2ZldGNoQ29uZmlnKHRydWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZmV0Y2hDb25maWcoZm9yY2VEaXNrUmVmcmVzaCkge1xuICAgIGxldCBjb25mOiBMb3ZlbGFjZUNvbmZpZztcbiAgICBsZXQgY29uZk1vZGU6IExvdmVsYWNlW1wibW9kZVwiXSA9IHRoaXMucGFuZWwhLmNvbmZpZy5tb2RlO1xuICAgIGxldCBjb25mUHJvbTogUHJvbWlzZTxMb3ZlbGFjZUNvbmZpZz47XG4gICAgY29uc3QgbGxXaW5kb3cgPSB3aW5kb3cgYXMgV2luZG93V2l0aExvdmVsYWNlUHJvbTtcblxuICAgIC8vIE9uIGZpcnN0IGxvYWQsIHdlIHNwZWVkIHVwIGxvYWRpbmcgcGFnZSBieSBoYXZpbmcgTEwgcHJvbWlzZSByZWFkeVxuICAgIGlmIChsbFdpbmRvdy5sbENvbmZQcm9tKSB7XG4gICAgICBjb25mUHJvbSA9IGxsV2luZG93LmxsQ29uZlByb207XG4gICAgICBsbFdpbmRvdy5sbENvbmZQcm9tID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZWZyZXNoaW5nIGEgWUFNTCBjb25maWcgY2FuIHRyaWdnZXIgYW4gdXBkYXRlIGV2ZW50LiBXZSB3aWxsIGlnbm9yZVxuICAgICAgLy8gYWxsIHVwZGF0ZSBldmVudHMgd2hpbGUgZmV0Y2hpbmcgdGhlIGNvbmZpZyBhbmQgZm9yIDIgc2Vjb25kcyBhZnRlciB0aGUgY25vZmlnIGlzIGJhY2suXG4gICAgICAvLyBXZSBpZ25vcmUgYmVjYXVzZSB3ZSBhbHJlYWR5IGhhdmUgdGhlIGxhdGVzdCBjb25maWcuXG4gICAgICBpZiAodGhpcy5sb3ZlbGFjZSAmJiB0aGlzLmxvdmVsYWNlLm1vZGUgPT09IFwieWFtbFwiKSB7XG4gICAgICAgIHRoaXMuX2lnbm9yZU5leHRVcGRhdGVFdmVudCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbmZQcm9tID0gZmV0Y2hDb25maWcodGhpcy5oYXNzIS5jb25uZWN0aW9uLCBmb3JjZURpc2tSZWZyZXNoKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uZiA9IGF3YWl0IGNvbmZQcm9tO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyci5jb2RlICE9PSBcImNvbmZpZ19ub3RfZm91bmRcIikge1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBcImVycm9yXCI7XG4gICAgICAgIHRoaXMuX2Vycm9yTXNnID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbmYgPSBhd2FpdCBnZW5lcmF0ZUxvdmVsYWNlQ29uZmlnRnJvbUhhc3ModGhpcy5oYXNzISk7XG4gICAgICBjb25mTW9kZSA9IFwiZ2VuZXJhdGVkXCI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIElnbm9yZSB1cGRhdGVzIGZvciBhbm90aGVyIDIgc2Vjb25kcy5cbiAgICAgIGlmICh0aGlzLmxvdmVsYWNlICYmIHRoaXMubG92ZWxhY2UubW9kZSA9PT0gXCJ5YW1sXCIpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5faWdub3JlTmV4dFVwZGF0ZUV2ZW50ID0gZmFsc2U7XG4gICAgICAgIH0sIDIwMDApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkZWRcIjtcbiAgICB0aGlzLl9zZXRMb3ZlbGFjZUNvbmZpZyhjb25mLCBjb25mTW9kZSk7XG4gIH1cblxuICBwcml2YXRlIF9jaGVja0xvdmVsYWNlQ29uZmlnKGNvbmZpZzogTG92ZWxhY2VDb25maWcpIHtcbiAgICAvLyBTb21laG93IHRoZXJlIGNhbiBiZSBiYWRnZXMgd2l0aCB2YWx1ZSBudWxsLCB3ZSByZW1vdmUgdGhvc2VcbiAgICBjb25maWcudmlld3MuZm9yRWFjaCgodmlldykgPT4ge1xuICAgICAgaWYgKHZpZXcuYmFkZ2VzKSB7XG4gICAgICAgIHZpZXcuYmFkZ2VzID0gdmlldy5iYWRnZXMuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0TG92ZWxhY2VDb25maWcoY29uZmlnOiBMb3ZlbGFjZUNvbmZpZywgbW9kZTogTG92ZWxhY2VbXCJtb2RlXCJdKSB7XG4gICAgdGhpcy5fY2hlY2tMb3ZlbGFjZUNvbmZpZyhjb25maWcpO1xuICAgIHRoaXMubG92ZWxhY2UgPSB7XG4gICAgICBjb25maWcsXG4gICAgICBtb2RlLFxuICAgICAgZWRpdE1vZGU6IHRoaXMubG92ZWxhY2UgPyB0aGlzLmxvdmVsYWNlLmVkaXRNb2RlIDogZmFsc2UsXG4gICAgICBsYW5ndWFnZTogdGhpcy5oYXNzIS5sYW5ndWFnZSxcbiAgICAgIGVuYWJsZUZ1bGxFZGl0TW9kZTogKCkgPT4ge1xuICAgICAgICBpZiAoIWVkaXRvckxvYWRlZCkge1xuICAgICAgICAgIGVkaXRvckxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwibG92ZWxhY2UteWFtbC1lZGl0b3JcIiAqLyBcIi4vaHVpLWVkaXRvclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdGF0ZSA9IFwieWFtbC1lZGl0b3JcIjtcbiAgICAgIH0sXG4gICAgICBzZXRFZGl0TW9kZTogKGVkaXRNb2RlOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGlmICghZWRpdE1vZGUgfHwgdGhpcy5sb3ZlbGFjZSEubW9kZSAhPT0gXCJnZW5lcmF0ZWRcIikge1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUxvdmVsYWNlKHsgZWRpdE1vZGUgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNob3dTYXZlRGlhbG9nKHRoaXMsIHtcbiAgICAgICAgICBsb3ZlbGFjZTogdGhpcy5sb3ZlbGFjZSEsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHNhdmVDb25maWc6IGFzeW5jIChuZXdDb25maWc6IExvdmVsYWNlQ29uZmlnKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnOiBwcmV2aW91c0NvbmZpZywgbW9kZTogcHJldmlvdXNNb2RlIH0gPSB0aGlzLmxvdmVsYWNlITtcbiAgICAgICAgdGhpcy5fY2hlY2tMb3ZlbGFjZUNvbmZpZyhuZXdDb25maWcpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIE9wdGltaXN0aWMgdXBkYXRlXG4gICAgICAgICAgdGhpcy5fdXBkYXRlTG92ZWxhY2Uoe1xuICAgICAgICAgICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgICAgICAgICBtb2RlOiBcInN0b3JhZ2VcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLl9pZ25vcmVOZXh0VXBkYXRlRXZlbnQgPSB0cnVlO1xuICAgICAgICAgIGF3YWl0IHNhdmVDb25maWcodGhpcy5oYXNzISwgbmV3Q29uZmlnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIC8vIFJvbGxiYWNrIHRoZSBvcHRpbWlzdGljIHVwZGF0ZVxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUxvdmVsYWNlKHtcbiAgICAgICAgICAgIGNvbmZpZzogcHJldmlvdXNDb25maWcsXG4gICAgICAgICAgICBtb2RlOiBwcmV2aW91c01vZGUsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVMb3ZlbGFjZShwcm9wczogUGFydGlhbDxMb3ZlbGFjZT4pIHtcbiAgICB0aGlzLmxvdmVsYWNlID0ge1xuICAgICAgLi4udGhpcy5sb3ZlbGFjZSEsXG4gICAgICAuLi5wcm9wcyxcbiAgICB9O1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImhhLXBhbmVsLWxvdmVsYWNlXCIsIExvdmVsYWNlUGFuZWwpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcbmltcG9ydCBcIkBwb2x5bWVyL2FwcC1sYXlvdXQvYXBwLWhlYWRlci1sYXlvdXQvYXBwLWhlYWRlci1sYXlvdXRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL2FwcC1sYXlvdXQvYXBwLWhlYWRlci9hcHAtaGVhZGVyXCI7XG5pbXBvcnQgXCJAcG9seW1lci9hcHAtbGF5b3V0L2FwcC1zY3JvbGwtZWZmZWN0cy9lZmZlY3RzL3dhdGVyZmFsbFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvYXBwLWxheW91dC9hcHAtdG9vbGJhci9hcHAtdG9vbGJhclwiO1xuaW1wb3J0IFwiQHBvbHltZXIvYXBwLXJvdXRlL2FwcC1yb3V0ZVwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaWNvbi1idXR0b24vcGFwZXItaWNvbi1idXR0b25cIjtcbmltcG9ydCBcIkBtYXRlcmlhbC9td2MtYnV0dG9uXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1pdGVtL3BhcGVyLWl0ZW1cIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWxpc3Rib3gvcGFwZXItbGlzdGJveFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItbWVudS1idXR0b24vcGFwZXItbWVudS1idXR0b25cIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLXRhYnMvcGFwZXItdGFiXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci10YWJzL3BhcGVyLXRhYnNcIjtcblxuaW1wb3J0IHNjcm9sbFRvVGFyZ2V0IGZyb20gXCIuLi8uLi9jb21tb24vZG9tL3Njcm9sbC10by10YXJnZXRcIjtcblxuaW1wb3J0IFwiLi4vLi4vbGF5b3V0cy9oYS1hcHAtbGF5b3V0XCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLXN0YXJ0LXZvaWNlLWJ1dHRvblwiO1xuaW1wb3J0IFwiLi4vLi4vY29tcG9uZW50cy9oYS1wYXBlci1pY29uLWJ1dHRvbi1hcnJvdy1uZXh0XCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LXByZXZcIjtcbmltcG9ydCBcIi4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3V0aWwvZGVib3VuY2VcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IG5hdmlnYXRlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9uYXZpZ2F0ZVwiO1xuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgc3dhcFZpZXcgfSBmcm9tIFwiLi9lZGl0b3IvY29uZmlnLXV0aWxcIjtcblxuaW1wb3J0IFwiLi92aWV3cy9odWktdmlld1wiO1xuLy8gTm90IGEgZHVwbGljYXRlIGltcG9ydCwgdGhpcyBvbmUgaXMgZm9yIHR5cGVcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuaW1wb3J0IHsgSFVJVmlldyB9IGZyb20gXCIuL3ZpZXdzL2h1aS12aWV3XCI7XG5pbXBvcnQgXCIuL3ZpZXdzL2h1aS1wYW5lbC12aWV3XCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbmltcG9ydCB7IEhVSVBhbmVsVmlldyB9IGZyb20gXCIuL3ZpZXdzL2h1aS1wYW5lbC12aWV3XCI7XG5pbXBvcnQgeyBzaG93RWRpdFZpZXdEaWFsb2cgfSBmcm9tIFwiLi9lZGl0b3Ivdmlldy1lZGl0b3Ivc2hvdy1lZGl0LXZpZXctZGlhbG9nXCI7XG5pbXBvcnQgeyBzaG93RWRpdExvdmVsYWNlRGlhbG9nIH0gZnJvbSBcIi4vZWRpdG9yL2xvdmVsYWNlLWVkaXRvci9zaG93LWVkaXQtbG92ZWxhY2UtZGlhbG9nXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBhZnRlck5leHRSZW5kZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3V0aWwvcmVuZGVyLXN0YXR1c1wiO1xuaW1wb3J0IHsgaGFTdHlsZSB9IGZyb20gXCIuLi8uLi9yZXNvdXJjZXMvc3R5bGVzXCI7XG5pbXBvcnQgeyBjb21wdXRlUlRMRGlyZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBsb2FkTG92ZWxhY2VSZXNvdXJjZXMgfSBmcm9tIFwiLi9jb21tb24vbG9hZC1yZXNvdXJjZXNcIjtcblxuY2xhc3MgSFVJUm9vdCBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBsb3ZlbGFjZT86IExvdmVsYWNlO1xuICBAcHJvcGVydHkoKSBwdWJsaWMgY29sdW1ucz86IG51bWJlcjtcbiAgQHByb3BlcnR5KCkgcHVibGljIG5hcnJvdz86IGJvb2xlYW47XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyByb3V0ZT86IHsgcGF0aDogc3RyaW5nOyBwcmVmaXg6IHN0cmluZyB9O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9yb3V0ZURhdGE/OiB7IHZpZXc6IHN0cmluZyB9O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jdXJWaWV3PzogbnVtYmVyIHwgXCJoYXNzLXVudXNlZC1lbnRpdGllc1wiO1xuICBwcml2YXRlIF92aWV3Q2FjaGU/OiB7IFt2aWV3SWQ6IHN0cmluZ106IEhVSVZpZXcgfTtcblxuICBwcml2YXRlIF9kZWJvdW5jZWRDb25maWdDaGFuZ2VkOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgLy8gVGhlIHZpZXcgY2FuIHRyaWdnZXIgYSByZS1yZW5kZXIgd2hlbiBpdCBrbm93cyB0aGF0IGNlcnRhaW5cbiAgICAvLyB3ZWIgY29tcG9uZW50cyBoYXZlIGJlZW4gbG9hZGVkLlxuICAgIHRoaXMuX2RlYm91bmNlZENvbmZpZ0NoYW5nZWQgPSBkZWJvdW5jZShcbiAgICAgICgpID0+IHRoaXMuX3NlbGVjdFZpZXcodGhpcy5fY3VyVmlldywgdHJ1ZSksXG4gICAgICAxMDAsXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFxuICAgICAgXCJkaXNhYmxlLXRleHQtc2VsZWN0XCIsXG4gICAgICAvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9BbmRyb2lkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICA8YXBwLXJvdXRlIC5yb3V0ZT1cIiR7dGhpcy5yb3V0ZX1cIiBwYXR0ZXJuPVwiLzp2aWV3XCIgZGF0YT1cIiR7XG4gICAgICB0aGlzLl9yb3V0ZURhdGFcbiAgICB9XCIgQGRhdGEtY2hhbmdlZD1cIiR7dGhpcy5fcm91dGVEYXRhQ2hhbmdlZH1cIj48L2FwcC1yb3V0ZT5cbiAgICA8aGEtYXBwLWxheW91dCBpZD1cImxheW91dFwiPlxuICAgICAgPGFwcC1oZWFkZXIgc2xvdD1cImhlYWRlclwiIGVmZmVjdHM9XCJ3YXRlcmZhbGxcIiBjbGFzcz1cIiR7Y2xhc3NNYXAoe1xuICAgICAgICBcImVkaXQtbW9kZVwiOiB0aGlzLl9lZGl0TW9kZSxcbiAgICAgIH0pfVwiIGZpeGVkIGNvbmRlbnNlcz5cbiAgICAgICAgJHtcbiAgICAgICAgICB0aGlzLl9lZGl0TW9kZVxuICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgIDxhcHAtdG9vbGJhciBjbGFzcz1cImVkaXQtbW9kZVwiPlxuICAgICAgICAgICAgICAgICAgPHBhcGVyLWljb24tYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOmNsb3NlXCJcbiAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9lZGl0TW9kZURpc2FibGV9XCJcbiAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGRpdiBtYWluLXRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMuY29uZmlnLnRpdGxlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sb2NhbGl6ZShcInVpLnBhbmVsLmxvdmVsYWNlLmVkaXRvci5oZWFkZXJcIil9XG4gICAgICAgICAgICAgICAgICAgIDxwYXBlci1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOnBlbmNpbFwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJlZGl0LWljb25cIlxuICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fZWRpdExvdmVsYWNlfVwiXG4gICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgaWNvbj1cImhhc3M6aGVscC1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkhlbHBcIlxuICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2hhbmRsZUhlbHB9XCJcbiAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPHBhcGVyLW1lbnUtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG5vLWFuaW1hdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbC1hbGlnbj1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbC1vZmZzZXQ9XCItNVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwYXBlci1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJPcGVuIExvdmVsYWNlIG1lbnVcIlxuICAgICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOmRvdHMtdmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgICAgIHNsb3Q9XCJkcm9wZG93bi10cmlnZ2VyXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvcGFwZXItaWNvbi1idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxwYXBlci1saXN0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgQGlyb24tc2VsZWN0PVwiJHt0aGlzLl9kZXNlbGVjdH1cIlxuICAgICAgICAgICAgICAgICAgICAgIHNsb3Q9XCJkcm9wZG93bi1jb250ZW50XCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICR7X19ERU1PX18gLyogTm8gdW51c2VkIGVudGl0aWVzIGF2YWlsYWJsZSBpbiB0aGUgZGVtbyAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9JHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLm1lbnUudW51c2VkX2VudGl0aWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAdGFwPVwiJHt0aGlzLl9oYW5kbGVVbnVzZWRFbnRpdGllc31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LnVudXNlZF9lbnRpdGllc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaXRlbSBAdGFwPVwiJHt0aGlzLmxvdmVsYWNlIS5lbmFibGVGdWxsRWRpdE1vZGV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuZWRpdG9yLm1lbnUucmF3X2VkaXRvclwiXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPC9wYXBlci1saXN0Ym94PlxuICAgICAgICAgICAgICAgICAgPC9wYXBlci1tZW51LWJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2FwcC10b29sYmFyPlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgPGFwcC10b29sYmFyPlxuICAgICAgICAgICAgICAgICAgPGhhLW1lbnUtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgICAgICAgICAubmFycm93PSR7dGhpcy5uYXJyb3d9XG4gICAgICAgICAgICAgICAgICA+PC9oYS1tZW51LWJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgbWFpbi10aXRsZT4ke3RoaXMuY29uZmlnLnRpdGxlIHx8IFwi54mn5YW754qsXCJ9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8aGEtc3RhcnQtdm9pY2UtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAgID48L2hhLXN0YXJ0LXZvaWNlLWJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxwYXBlci1tZW51LWJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBuby1hbmltYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWwtYWxpZ249XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWwtb2Zmc2V0PVwiLTVcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBpY29uPVwiaGFzczpkb3RzLXZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICAgICAgICBzbG90PVwiZHJvcGRvd24tdHJpZ2dlclwiXG4gICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8cGFwZXItbGlzdGJveFxuICAgICAgICAgICAgICAgICAgICAgIEBpcm9uLXNlbGVjdD1cIiR7dGhpcy5fZGVzZWxlY3R9XCJcbiAgICAgICAgICAgICAgICAgICAgICBzbG90PVwiZHJvcGRvd24tY29udGVudFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX3lhbWxNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9JHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLm1lbnUucmVmcmVzaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHRhcD1cIiR7dGhpcy5faGFuZGxlUmVmcmVzaH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LnJlZnJlc2hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3BhcGVyLWl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9JHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLm1lbnUudW51c2VkX2VudGl0aWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAdGFwPVwiJHt0aGlzLl9oYW5kbGVVbnVzZWRFbnRpdGllc31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LnVudXNlZF9lbnRpdGllc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS51c2VyIS5pc19hZG1pblxuICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXBlci1pdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LmNvbmZpZ3VyZV91aVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHRhcD1cIiR7dGhpcy5fZWRpdE1vZGVFbmFibGV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UubWVudS5jb25maWd1cmVfdWlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3BhcGVyLWl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0ke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UubWVudS5oZWxwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICBAdGFwPVwiJHt0aGlzLl9oYW5kbGVIZWxwfVwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKFwidWkucGFuZWwubG92ZWxhY2UubWVudS5oZWxwXCIpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPC9wYXBlci1saXN0Ym94PlxuICAgICAgICAgICAgICAgICAgPC9wYXBlci1tZW51LWJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2FwcC10b29sYmFyPlxuICAgICAgICAgICAgICBgXG4gICAgICAgIH1cblxuICAgICAgICAke1xuICAgICAgICAgIHRoaXMubG92ZWxhY2UhLmNvbmZpZy52aWV3cy5sZW5ndGggPiAxIHx8IHRoaXMuX2VkaXRNb2RlXG4gICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgPGRpdiBzdGlja3k+XG4gICAgICAgICAgICAgICAgICA8cGFwZXItdGFic1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxhYmxlXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RlZD1cIiR7dGhpcy5fY3VyVmlld31cIlxuICAgICAgICAgICAgICAgICAgICBAaXJvbi1hY3RpdmF0ZT1cIiR7dGhpcy5faGFuZGxlVmlld1NlbGVjdGVkfVwiXG4gICAgICAgICAgICAgICAgICAgIGRpcj1cIiR7Y29tcHV0ZVJUTERpcmVjdGlvbih0aGlzLmhhc3MhKX1cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMubG92ZWxhY2UhLmNvbmZpZy52aWV3cy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHZpZXcpID0+IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItdGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCIke3ZpZXcudGl0bGV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImhpZGUtdGFiXCI6IEJvb2xlYW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fZWRpdE1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy52aXNpYmxlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChBcnJheS5pc0FycmF5KHZpZXcudmlzaWJsZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdmlldy52aXNpYmxlLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZS51c2VyID09PSB0aGlzLmhhc3MhLnVzZXIhLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnZpc2libGUgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5fZWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoYS1wYXBlci1pY29uLWJ1dHRvbi1hcnJvdy1wcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJNb3ZlIHZpZXcgbGVmdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJlZGl0LWljb24gdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9tb3ZlVmlld0xlZnR9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ZGlzYWJsZWQ9XCIke3RoaXMuX2N1clZpZXcgPT09IDB9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvaGEtcGFwZXItaWNvbi1idXR0b24tYXJyb3ctcHJldj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7dmlldy5pY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiJHt2aWV3LnRpdGxlfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmljb249XCIke3ZpZXcuaWNvbn1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmlldy50aXRsZSB8fCBcIlVubmFtZWQgdmlld1wifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX2VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRWRpdCB2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImVkaXQtaWNvbiB2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uPVwiaGFzczpwZW5jaWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fZWRpdFZpZXd9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LW5leHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vdmUgdmlldyByaWdodFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJlZGl0LWljb24gdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9tb3ZlVmlld1JpZ2h0fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2Rpc2FibGVkPVwiJHsodGhpcy5fY3VyVmlldyEgYXMgbnVtYmVyKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb3ZlbGFjZSEuY29uZmlnLnZpZXdzLmxlbmd0aH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9oYS1wYXBlci1pY29uLWJ1dHRvbi1hcnJvdy1uZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItdGFiPlxuICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLl9lZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWljb24tYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJhZGQtdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9hZGRWaWV3fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCIke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmVkaXRvci5lZGl0X3ZpZXcuYWRkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj1cImhhc3M6cGx1c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgIDwvcGFwZXItdGFicz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBcIlwiXG4gICAgICAgIH1cbiAgICAgIDwvYXBwLWhlYWRlcj5cbiAgICAgIDxkaXYgaWQ9J3ZpZXcnIGNsYXNzPVwiJHtjbGFzc01hcCh7XG4gICAgICAgIFwidGFicy1oaWRkZW5cIjogdGhpcy5sb3ZlbGFjZSEuY29uZmlnLnZpZXdzLmxlbmd0aCA8IDIsXG4gICAgICB9KX1cIiBAbGwtcmVidWlsZD0nJHt0aGlzLl9kZWJvdW5jZWRDb25maWdDaGFuZ2VkfSc+PC9kaXY+XG4gICAgPC9hcHAtaGVhZGVyLWxheW91dD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0W10ge1xuICAgIHJldHVybiBbXG4gICAgICBoYVN0eWxlLFxuICAgICAgY3NzYFxuICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgLS1kYXJrLWNvbG9yOiAjNDU1YTY0O1xuICAgICAgICAgIC0tdGV4dC1kYXJrLWNvbG9yOiAjZmZmO1xuICAgICAgICB9XG5cbiAgICAgICAgOmhvc3QoLmRpc2FibGUtdGV4dC1zZWxlY3QpIHtcbiAgICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgaGEtYXBwLWxheW91dCB7XG4gICAgICAgICAgbWluLWhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICBwYXBlci1tZW51LWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgfVxuICAgICAgICBwYXBlci10YWJzIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMTJweDtcbiAgICAgICAgICAtLXBhcGVyLXRhYnMtc2VsZWN0aW9uLWJhci1jb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCAjZmZmKTtcbiAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICB9XG4gICAgICAgIC5lZGl0LW1vZGUge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcmstY29sb3IsICM0NTVhNjQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWRhcmstY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5lZGl0LW1vZGUgZGl2W21haW4tdGl0bGVdIHtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgfVxuICAgICAgICBwYXBlci10YWIuaXJvbi1zZWxlY3RlZCAuZWRpdC1pY29uIHtcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgfVxuICAgICAgICAuZWRpdC1pY29uIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tYWNjZW50LWNvbG9yKTtcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAuZWRpdC1pY29uW2Rpc2FibGVkXSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5lZGl0LWljb24udmlldyB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAjYWRkLXZpZXcge1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBoZWlnaHQ6IDQ0cHg7XG4gICAgICAgIH1cbiAgICAgICAgI2FkZC12aWV3IGhhLWljb24ge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWFjY2VudC1jb2xvcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICAgICAgfVxuICAgICAgICBhcHAtdG9vbGJhciBhIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCB3aGl0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbXdjLWJ1dHRvbi53YXJuaW5nOm5vdChbZGlzYWJsZWRdKSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWdvb2dsZS1yZWQtNTAwKTtcbiAgICAgICAgfVxuICAgICAgICAjdmlldyB7XG4gICAgICAgICAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDExMnB4KTtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAqIFNpbmNlIHdlIG9ubHkgc2V0IG1pbi1oZWlnaHQsIGlmIGNoaWxkIG5vZGVzIG5lZWQgcGVyY2VudGFnZVxuICAgICAgICAgICogaGVpZ2h0cyB0aGV5IG11c3QgdXNlIGFic29sdXRlIHBvc2l0aW9uaW5nIHNvIHdlIG5lZWQgcmVsYXRpdmVcbiAgICAgICAgICAqIHBvc2l0aW9uaW5nIGhlcmUuXG4gICAgICAgICAgKlxuICAgICAgICAgICogaHR0cHM6Ly93d3cudzMub3JnL1RSL0NTUzIvdmlzdWRldC5odG1sI3RoZS1oZWlnaHQtcHJvcGVydHlcbiAgICAgICAgICAqL1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICB9XG4gICAgICAgICN2aWV3ID4gKiB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgKiBUaGUgdmlldyBjb3VsZCBnZXQgbGFyZ2VyIHRoYW4gdGhlIHdpbmRvdyBpbiBGaXJlZm94XG4gICAgICAgICAgKiB0byBwcmV2ZW50IHRoYXQgd2Ugc2V0IHRoZSBtYXgtd2lkdGggdG8gMTAwJVxuICAgICAgICAgICogZmxleC1ncm93OiAxIGFuZCBmbGV4LWJhc2lzOiAxMDAlIHNob3VsZCBtYWtlIHN1cmUgdGhlIHZpZXdcbiAgICAgICAgICAqIHN0YXlzIGZ1bGwgd2lkdGguXG4gICAgICAgICAgKlxuICAgICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL2hvbWUtYXNzaXN0YW50L2hvbWUtYXNzaXN0YW50LXBvbHltZXIvcHVsbC8zODA2XG4gICAgICAgICAgKi9cbiAgICAgICAgICBmbGV4OiAxIDEgMTAwJTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgI3ZpZXcudGFicy1oaWRkZW4ge1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSA2NHB4KTtcbiAgICAgICAgfVxuICAgICAgICBwYXBlci1pdGVtIHtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLmhpZGUtdGFiIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICBgLFxuICAgIF07XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLl92aWV3Um9vdDtcbiAgICBjb25zdCBodWlWaWV3ID0gdmlldy5sYXN0Q2hpbGQgYXMgSFVJVmlldyB8IEhVSVBhbmVsVmlldztcblxuICAgIGlmIChcbiAgICAgIGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImNvbHVtbnNcIikgJiZcbiAgICAgIGh1aVZpZXcgJiZcbiAgICAgIGh1aVZpZXcgaW5zdGFuY2VvZiBIVUlWaWV3XG4gICAgKSB7XG4gICAgICBodWlWaWV3LmNvbHVtbnMgPSB0aGlzLmNvbHVtbnM7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImhhc3NcIikgJiYgaHVpVmlldykge1xuICAgICAgaHVpVmlldy5oYXNzID0gdGhpcy5oYXNzO1xuICAgIH1cblxuICAgIGxldCBuZXdTZWxlY3RWaWV3O1xuICAgIGxldCBmb3JjZSA9IGZhbHNlO1xuXG4gICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcInJvdXRlXCIpKSB7XG4gICAgICBjb25zdCB2aWV3cyA9IHRoaXMuY29uZmlnICYmIHRoaXMuY29uZmlnLnZpZXdzO1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnJvdXRlIS5wYXRoID09PSBcIlwiICYmXG4gICAgICAgIHRoaXMucm91dGUhLnByZWZpeCA9PT0gXCIvbG92ZWxhY2VcIiAmJlxuICAgICAgICB2aWV3c1xuICAgICAgKSB7XG4gICAgICAgIG5hdmlnYXRlKHRoaXMsIGAvbG92ZWxhY2UvJHt2aWV3c1swXS5wYXRoIHx8IDB9YCwgdHJ1ZSk7XG4gICAgICAgIG5ld1NlbGVjdFZpZXcgPSAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9yb3V0ZURhdGEhLnZpZXcgPT09IFwiaGFzcy11bnVzZWQtZW50aXRpZXNcIikge1xuICAgICAgICBuZXdTZWxlY3RWaWV3ID0gXCJoYXNzLXVudXNlZC1lbnRpdGllc1wiO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9yb3V0ZURhdGEhLnZpZXcpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRWaWV3ID0gdGhpcy5fcm91dGVEYXRhIS52aWV3O1xuICAgICAgICBjb25zdCBzZWxlY3RlZFZpZXdJbnQgPSBwYXJzZUludChzZWxlY3RlZFZpZXcsIDEwKTtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aWV3cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh2aWV3c1tpXS5wYXRoID09PSBzZWxlY3RlZFZpZXcgfHwgaSA9PT0gc2VsZWN0ZWRWaWV3SW50KSB7XG4gICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3U2VsZWN0VmlldyA9IGluZGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoXCJsb3ZlbGFjZVwiKSkge1xuICAgICAgY29uc3Qgb2xkTG92ZWxhY2UgPSBjaGFuZ2VkUHJvcGVydGllcy5nZXQoXCJsb3ZlbGFjZVwiKSBhc1xuICAgICAgICB8IExvdmVsYWNlXG4gICAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoIW9sZExvdmVsYWNlIHx8IG9sZExvdmVsYWNlLmNvbmZpZyAhPT0gdGhpcy5sb3ZlbGFjZSEuY29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLmxvdmVsYWNlIS5jb25maWcucmVzb3VyY2VzKSB7XG4gICAgICAgICAgbG9hZExvdmVsYWNlUmVzb3VyY2VzKFxuICAgICAgICAgICAgdGhpcy5sb3ZlbGFjZSEuY29uZmlnLnJlc291cmNlcyxcbiAgICAgICAgICAgIHRoaXMuaGFzcyEuYXV0aC5kYXRhLmhhc3NVcmxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIC8vIE9uIGNvbmZpZyBjaGFuZ2UsIHJlY3JlYXRlIHRoZSBjdXJyZW50IHZpZXcgZnJvbSBzY3JhdGNoLlxuICAgICAgICBmb3JjZSA9IHRydWU7XG4gICAgICAgIC8vIFJlY2FsY3VsYXRlIHRvIHNlZSBpZiB3ZSBuZWVkIHRvIGFkanVzdCBjb250ZW50IGFyZWEgZm9yIHRhYiBiYXJcbiAgICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghb2xkTG92ZWxhY2UgfHwgb2xkTG92ZWxhY2UuZWRpdE1vZGUgIT09IHRoaXMubG92ZWxhY2UhLmVkaXRNb2RlKSB7XG4gICAgICAgIC8vIExlYXZlIHVudXNlZCBlbnRpdGllcyB3aGVuIGxlYXZpbmcgZWRpdCBtb2RlXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmxvdmVsYWNlIS5tb2RlID09PSBcInN0b3JhZ2VcIiAmJlxuICAgICAgICAgIHRoaXMuX3JvdXRlRGF0YSEudmlldyA9PT0gXCJoYXNzLXVudXNlZC1lbnRpdGllc1wiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHZpZXdzID0gdGhpcy5jb25maWcgJiYgdGhpcy5jb25maWcudmlld3M7XG4gICAgICAgICAgbmF2aWdhdGUodGhpcywgYC9sb3ZlbGFjZS8ke3ZpZXdzWzBdLnBhdGggfHwgMH1gKTtcbiAgICAgICAgICBuZXdTZWxlY3RWaWV3ID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBPbiBlZGl0IG1vZGUgY2hhbmdlLCByZWNyZWF0ZSB0aGUgY3VycmVudCB2aWV3IGZyb20gc2NyYXRjaFxuICAgICAgICBmb3JjZSA9IHRydWU7XG4gICAgICAgIC8vIFJlY2FsY3VsYXRlIHRvIHNlZSBpZiB3ZSBuZWVkIHRvIGFkanVzdCBjb250ZW50IGFyZWEgZm9yIHRhYiBiYXJcbiAgICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5ld1NlbGVjdFZpZXcgIT09IHVuZGVmaW5lZCB8fCBmb3JjZSkge1xuICAgICAgaWYgKGZvcmNlICYmIG5ld1NlbGVjdFZpZXcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdTZWxlY3RWaWV3ID0gdGhpcy5fY3VyVmlldztcbiAgICAgIH1cbiAgICAgIC8vIFdpbGwgYWxsb3cgZm9yIHJpcHBsZXMgdG8gc3RhcnQgcmVuZGVyaW5nXG4gICAgICBhZnRlck5leHRSZW5kZXIoKCkgPT4gdGhpcy5fc2VsZWN0VmlldyhuZXdTZWxlY3RWaWV3LCBmb3JjZSkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGNvbmZpZygpOiBMb3ZlbGFjZUNvbmZpZyB7XG4gICAgcmV0dXJuIHRoaXMubG92ZWxhY2UhLmNvbmZpZztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF95YW1sTW9kZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sb3ZlbGFjZSEubW9kZSA9PT0gXCJ5YW1sXCI7XG4gIH1cblxuICBwcml2YXRlIGdldCBfZWRpdE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubG92ZWxhY2UhLmVkaXRNb2RlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2xheW91dCgpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwibGF5b3V0XCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX3ZpZXdSb290KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5nZXRFbGVtZW50QnlJZChcInZpZXdcIikgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9yb3V0ZURhdGFDaGFuZ2VkKGV2KTogdm9pZCB7XG4gICAgdGhpcy5fcm91dGVEYXRhID0gZXYuZGV0YWlsLnZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlUmVmcmVzaCgpOiB2b2lkIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJjb25maWctcmVmcmVzaFwiKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVVudXNlZEVudGl0aWVzKCk6IHZvaWQge1xuICAgIG5hdmlnYXRlKHRoaXMsIGAvbG92ZWxhY2UvaGFzcy11bnVzZWQtZW50aXRpZXNgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2Rlc2VsZWN0KGV2KTogdm9pZCB7XG4gICAgZXYudGFyZ2V0LnNlbGVjdGVkID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhlbHAoKTogdm9pZCB7XG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5ob21lLWFzc2lzdGFudC5pby9sb3ZlbGFjZS9cIiwgXCJfYmxhbmtcIik7XG4gIH1cblxuICBwcml2YXRlIF9lZGl0TW9kZUVuYWJsZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5feWFtbE1vZGUpIHtcbiAgICAgIHdpbmRvdy5hbGVydChcIlRoZSBlZGl0IFVJIGlzIG5vdCBhdmFpbGFibGUgd2hlbiBpbiBZQU1MIG1vZGUuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxvdmVsYWNlIS5zZXRFZGl0TW9kZSh0cnVlKTtcbiAgICBpZiAodGhpcy5jb25maWcudmlld3MubGVuZ3RoIDwgMikge1xuICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZWRpdE1vZGVEaXNhYmxlKCk6IHZvaWQge1xuICAgIHRoaXMubG92ZWxhY2UhLnNldEVkaXRNb2RlKGZhbHNlKTtcbiAgICBpZiAodGhpcy5jb25maWcudmlld3MubGVuZ3RoIDwgMikge1xuICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZWRpdExvdmVsYWNlKCkge1xuICAgIHNob3dFZGl0TG92ZWxhY2VEaWFsb2codGhpcywgdGhpcy5sb3ZlbGFjZSEpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZWRpdFZpZXcoKSB7XG4gICAgc2hvd0VkaXRWaWV3RGlhbG9nKHRoaXMsIHtcbiAgICAgIGxvdmVsYWNlOiB0aGlzLmxvdmVsYWNlISxcbiAgICAgIHZpZXdJbmRleDogdGhpcy5fY3VyVmlldyBhcyBudW1iZXIsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9tb3ZlVmlld0xlZnQoKSB7XG4gICAgY29uc3QgbG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlITtcbiAgICBjb25zdCBvbGRJbmRleCA9IHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyO1xuICAgIGNvbnN0IG5ld0luZGV4ID0gKHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyKSAtIDE7XG4gICAgdGhpcy5fY3VyVmlldyA9IG5ld0luZGV4O1xuICAgIGxvdmVsYWNlLnNhdmVDb25maWcoc3dhcFZpZXcobG92ZWxhY2UuY29uZmlnLCBvbGRJbmRleCwgbmV3SW5kZXgpKTtcbiAgfVxuXG4gIHByaXZhdGUgX21vdmVWaWV3UmlnaHQoKSB7XG4gICAgY29uc3QgbG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlITtcbiAgICBjb25zdCBvbGRJbmRleCA9IHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyO1xuICAgIGNvbnN0IG5ld0luZGV4ID0gKHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyKSArIDE7XG4gICAgdGhpcy5fY3VyVmlldyA9IG5ld0luZGV4O1xuICAgIGxvdmVsYWNlLnNhdmVDb25maWcoc3dhcFZpZXcobG92ZWxhY2UuY29uZmlnLCBvbGRJbmRleCwgbmV3SW5kZXgpKTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZFZpZXcoKSB7XG4gICAgc2hvd0VkaXRWaWV3RGlhbG9nKHRoaXMsIHtcbiAgICAgIGxvdmVsYWNlOiB0aGlzLmxvdmVsYWNlISxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVZpZXdTZWxlY3RlZChldikge1xuICAgIGNvbnN0IHZpZXdJbmRleCA9IGV2LmRldGFpbC5zZWxlY3RlZCBhcyBudW1iZXI7XG5cbiAgICBpZiAodmlld0luZGV4ICE9PSB0aGlzLl9jdXJWaWV3KSB7XG4gICAgICBjb25zdCBwYXRoID0gdGhpcy5jb25maWcudmlld3Nbdmlld0luZGV4XS5wYXRoIHx8IHZpZXdJbmRleDtcbiAgICAgIG5hdmlnYXRlKHRoaXMsIGAvbG92ZWxhY2UvJHtwYXRofWApO1xuICAgIH1cbiAgICBzY3JvbGxUb1RhcmdldCh0aGlzLCB0aGlzLl9sYXlvdXQuaGVhZGVyLnNjcm9sbFRhcmdldCk7XG4gIH1cblxuICBwcml2YXRlIF9zZWxlY3RWaWV3KHZpZXdJbmRleDogSFVJUm9vdFtcIl9jdXJWaWV3XCJdLCBmb3JjZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghZm9yY2UgJiYgdGhpcy5fY3VyVmlldyA9PT0gdmlld0luZGV4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmlld0luZGV4ID0gdmlld0luZGV4ID09PSB1bmRlZmluZWQgPyAwIDogdmlld0luZGV4O1xuXG4gICAgdGhpcy5fY3VyVmlldyA9IHZpZXdJbmRleDtcblxuICAgIGlmIChmb3JjZSkge1xuICAgICAgdGhpcy5fdmlld0NhY2hlID0ge307XG4gICAgfVxuXG4gICAgLy8gUmVjcmVhdGUgYSBuZXcgZWxlbWVudCB0byBjbGVhciB0aGUgYXBwbGllZCB0aGVtZXMuXG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuX3ZpZXdSb290O1xuXG4gICAgaWYgKHJvb3QubGFzdENoaWxkKSB7XG4gICAgICByb290LnJlbW92ZUNoaWxkKHJvb3QubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICBpZiAodmlld0luZGV4ID09PSBcImhhc3MtdW51c2VkLWVudGl0aWVzXCIpIHtcbiAgICAgIGNvbnN0IHVudXNlZEVudGl0aWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS11bnVzZWQtZW50aXRpZXNcIik7XG4gICAgICAvLyBXYWl0IGZvciBwcm9taXNlIHRvIHJlc29sdmUgc28gdGhhdCB0aGUgZWxlbWVudCBoYXMgYmVlbiB1cGdyYWRlZC5cbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS11bnVzZWQtZW50aXRpZXNcIiAqLyBcIi4vZWRpdG9yL3VudXNlZC1lbnRpdGllcy9odWktdW51c2VkLWVudGl0aWVzXCIpLnRoZW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB1bnVzZWRFbnRpdGllcy5oYXNzID0gdGhpcy5oYXNzITtcbiAgICAgICAgICB1bnVzZWRFbnRpdGllcy5sb3ZlbGFjZSA9IHRoaXMubG92ZWxhY2UhO1xuICAgICAgICAgIHVudXNlZEVudGl0aWVzLm5hcnJvdyA9IHRoaXMubmFycm93O1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmJhY2tncm91bmQpIHtcbiAgICAgICAgdW51c2VkRW50aXRpZXMuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgXCItLWxvdmVsYWNlLWJhY2tncm91bmRcIixcbiAgICAgICAgICB0aGlzLmNvbmZpZy5iYWNrZ3JvdW5kXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByb290LmFwcGVuZCh1bnVzZWRFbnRpdGllcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHZpZXc7XG4gICAgY29uc3Qgdmlld0NvbmZpZyA9IHRoaXMuY29uZmlnLnZpZXdzW3ZpZXdJbmRleF07XG5cbiAgICBpZiAoIXZpZXdDb25maWcpIHtcbiAgICAgIHRoaXMuX2VkaXRNb2RlRW5hYmxlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFmb3JjZSAmJiB0aGlzLl92aWV3Q2FjaGUhW3ZpZXdJbmRleF0pIHtcbiAgICAgIHZpZXcgPSB0aGlzLl92aWV3Q2FjaGUhW3ZpZXdJbmRleF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2aWV3Q29uZmlnLnBhbmVsICYmIHZpZXdDb25maWcuY2FyZHMgJiYgdmlld0NvbmZpZy5jYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXBhbmVsLXZpZXdcIik7XG4gICAgICAgIHZpZXcuY29uZmlnID0gdmlld0NvbmZpZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXZpZXdcIik7XG4gICAgICAgIHZpZXcubG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlO1xuICAgICAgICB2aWV3LmNvbHVtbnMgPSB0aGlzLmNvbHVtbnM7XG4gICAgICAgIHZpZXcuaW5kZXggPSB2aWV3SW5kZXg7XG4gICAgICB9XG4gICAgICB0aGlzLl92aWV3Q2FjaGUhW3ZpZXdJbmRleF0gPSB2aWV3O1xuICAgIH1cblxuICAgIHZpZXcuaGFzcyA9IHRoaXMuaGFzcztcblxuICAgIGNvbnN0IGNvbmZpZ0JhY2tncm91bmQgPSB2aWV3Q29uZmlnLmJhY2tncm91bmQgfHwgdGhpcy5jb25maWcuYmFja2dyb3VuZDtcblxuICAgIGlmIChjb25maWdCYWNrZ3JvdW5kKSB7XG4gICAgICB2aWV3LnN0eWxlLnNldFByb3BlcnR5KFwiLS1sb3ZlbGFjZS1iYWNrZ3JvdW5kXCIsIGNvbmZpZ0JhY2tncm91bmQpO1xuICAgIH1cblxuICAgIHJvb3QuYXBwZW5kKHZpZXcpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktcm9vdFwiOiBIVUlSb290O1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1yb290XCIsIEhVSVJvb3QpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgXCJAbWF0ZXJpYWwvbXdjLWJ1dHRvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWljb25cIjtcblxuaW1wb3J0IHsgY2FsbFNlcnZpY2UgfSBmcm9tIFwiLi4vY29tbW9uL2NhbGwtc2VydmljZVwiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBDYWxsU2VydmljZUNvbmZpZyB9IGZyb20gXCIuLi9lbnRpdHktcm93cy90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1jYWxsLXNlcnZpY2Utcm93XCIpXG5jbGFzcyBIdWlDYWxsU2VydmljZVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogQ2FsbFNlcnZpY2VDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IENhbGxTZXJ2aWNlQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5uYW1lIHx8ICFjb25maWcuc2VydmljZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgaW4gY2FyZCBjb25maWd1cmF0aW9uLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSB7IGljb246IFwiaGFzczpyZW1vdGVcIiwgYWN0aW9uX25hbWU6IFwiUnVuXCIsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWljb24gLmljb249XCIke3RoaXMuX2NvbmZpZy5pY29ufVwiPjwvaGEtaWNvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4XCI+XG4gICAgICAgIDxkaXY+JHt0aGlzLl9jb25maWcubmFtZX08L2Rpdj5cbiAgICAgICAgPG13Yy1idXR0b24gQGNsaWNrPVwiJHt0aGlzLl9jYWxsU2VydmljZX1cIlxuICAgICAgICAgID4ke3RoaXMuX2NvbmZpZy5hY3Rpb25fbmFtZX08L213Yy1idXR0b25cbiAgICAgICAgPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIGhhLWljb24ge1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pdGVtLWljb24tY29sb3IpO1xuICAgICAgfVxuICAgICAgLmZsZXgge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuICAgICAgLmZsZXggZGl2IHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgICBtd2MtYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAtMC41N2VtO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jYWxsU2VydmljZSgpIHtcbiAgICBjYWxsU2VydmljZSh0aGlzLl9jb25maWchLCB0aGlzLmhhc3MhKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWNhbGwtc2VydmljZS1yb3dcIjogSHVpQ2FsbFNlcnZpY2VSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBDYXN0Q29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IHsgQ2FzdE1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vLi4vY2FzdC9jYXN0X21hbmFnZXJcIjtcbmltcG9ydCB7XG4gIGVuc3VyZUNvbm5lY3RlZENhc3RTZXNzaW9uLFxuICBjYXN0U2VuZFNob3dMb3ZlbGFjZVZpZXcsXG59IGZyb20gXCIuLi8uLi8uLi9jYXN0L3JlY2VpdmVyX21lc3NhZ2VzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWNhc3Qtcm93XCIpXG5jbGFzcyBIdWlDYXN0Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIHB1YmxpYyBoYXNzITogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBDYXN0Q29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2Nhc3RNYW5hZ2VyPzogQ2FzdE1hbmFnZXIgfCBudWxsO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX25vSFRUUFMgPSBmYWxzZTtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogQ2FzdENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8IGNvbmZpZy52aWV3ID09PSB1bmRlZmluZWQgfHwgY29uZmlnLnZpZXcgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ3ZpZXcnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgIGljb246IFwiaGFzczp0ZWxldmlzaW9uXCIsXG4gICAgICBuYW1lOiBcIueJp+WFu+eKrCBDYXN0XCIsXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmUgPVxuICAgICAgdGhpcy5fY2FzdE1hbmFnZXIgJiZcbiAgICAgIHRoaXMuX2Nhc3RNYW5hZ2VyLnN0YXR1cyAmJlxuICAgICAgdGhpcy5fY29uZmlnLnZpZXcgPT09IHRoaXMuX2Nhc3RNYW5hZ2VyLnN0YXR1cy5sb3ZlbGFjZVBhdGg7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1pY29uIC5pY29uPVwiJHt0aGlzLl9jb25maWcuaWNvbn1cIj48L2hhLWljb24+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZVwiPiR7dGhpcy5fY29uZmlnLm5hbWV9PC9kaXY+XG4gICAgICAgICR7dGhpcy5fbm9IVFRQU1xuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgQ2FzdCByZXF1aXJlcyBIVFRQU1xuICAgICAgICAgICAgYFxuICAgICAgICAgIDogdGhpcy5fY2FzdE1hbmFnZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gaHRtbGBgXG4gICAgICAgICAgOiB0aGlzLl9jYXN0TWFuYWdlciA9PT0gbnVsbFxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgQ2FzdCBBUEkgdW5hdmFpbGFibGVcbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IHRoaXMuX2Nhc3RNYW5hZ2VyLmNhc3RTdGF0ZSA9PT0gXCJOT19ERVZJQ0VTX0FWQUlMQUJMRVwiXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICBObyBkZXZpY2VzIGZvdW5kXG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICA8Z29vZ2xlLWNhc3QtbGF1bmNoZXI+PC9nb29nbGUtY2FzdC1sYXVuY2hlcj5cbiAgICAgICAgICAgICAgICA8bXdjLWJ1dHRvblxuICAgICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5fc2VuZExvdmVsYWNlfVxuICAgICAgICAgICAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7IGluYWN0aXZlOiAhQm9vbGVhbihhY3RpdmUpIH0pfVxuICAgICAgICAgICAgICAgICAgLnVuZWxldmF0ZWQ9JHthY3RpdmV9XG4gICAgICAgICAgICAgICAgICAuZGlzYWJsZWQ9JHshdGhpcy5fY2FzdE1hbmFnZXIuc3RhdHVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNIT1dcbiAgICAgICAgICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYH1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wcykge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmIChsb2NhdGlvbi5wcm90b2NvbCA9PT0gXCJodHRwOlwiICYmIGxvY2F0aW9uLmhvc3RuYW1lICE9PSBcImxvY2FsaG9zdFwiKSB7XG4gICAgICB0aGlzLl9ub0hUVFBTID0gdHJ1ZTtcbiAgICB9XG4gICAgaW1wb3J0KFwiLi4vLi4vLi4vY2FzdC9jYXN0X21hbmFnZXJcIikudGhlbigoeyBnZXRDYXN0TWFuYWdlciB9KSA9PlxuICAgICAgZ2V0Q2FzdE1hbmFnZXIodGhpcy5oYXNzLmF1dGgpLnRoZW4oXG4gICAgICAgIChtZ3IpID0+IHtcbiAgICAgICAgICB0aGlzLl9jYXN0TWFuYWdlciA9IG1ncjtcbiAgICAgICAgICBtZ3IuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb24tY2hhbmdlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBtZ3IuYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlLWNoYW5nZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9jYXN0TWFuYWdlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzKSB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICh0aGlzLl9jb25maWcgJiYgdGhpcy5fY29uZmlnLmhpZGVfaWZfdW5hdmFpbGFibGUpIHtcbiAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgICF0aGlzLl9jYXN0TWFuYWdlciB8fFxuICAgICAgICB0aGlzLl9jYXN0TWFuYWdlci5jYXN0U3RhdGUgPT09IFwiTk9fREVWSUNFU19BVkFJTEFCTEVcIlxuICAgICAgICAgID8gXCJub25lXCJcbiAgICAgICAgICA6IFwiXCI7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfc2VuZExvdmVsYWNlKCkge1xuICAgIGF3YWl0IGVuc3VyZUNvbm5lY3RlZENhc3RTZXNzaW9uKHRoaXMuX2Nhc3RNYW5hZ2VyISwgdGhpcy5oYXNzLmF1dGgpO1xuICAgIGNhc3RTZW5kU2hvd0xvdmVsYWNlVmlldyh0aGlzLl9jYXN0TWFuYWdlciEsIHRoaXMuX2NvbmZpZyEudmlldyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICBoYS1pY29uIHtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWNvbG9yKTtcbiAgICAgIH1cbiAgICAgIC5mbGV4IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIC5uYW1lIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgICAuY29udHJvbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuICAgICAgZ29vZ2xlLWNhc3QtbGF1bmNoZXIge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNTdlbTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIGhlaWdodDogMjRweDtcbiAgICAgICAgd2lkdGg6IDI0cHg7XG4gICAgICB9XG4gICAgICAuaW5hY3RpdmUge1xuICAgICAgICBwYWRkaW5nOiAwIDRweDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktY2FzdC1yb3dcIjogSHVpQ2FzdFJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBEaXZpZGVyQ29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWRpdmlkZXItcm93XCIpXG5jbGFzcyBIdWlEaXZpZGVyUm93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBEaXZpZGVyQ29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGluIGNhcmQgY29uZmlndXJhdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0ge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgaGVpZ2h0OiBcIjFweFwiLFxuICAgICAgICBcImJhY2tncm91bmQtY29sb3JcIjogXCJ2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcilcIixcbiAgICAgIH0sXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLl9jb25maWcuc3R5bGUpLmZvckVhY2goKHByb3ApID0+IHtcbiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KHByb3AsIHRoaXMuX2NvbmZpZyEuc3R5bGVbcHJvcF0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICAke2VsfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1kaXZpZGVyLXJvd1wiOiBIdWlEaXZpZGVyUm93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBTZWN0aW9uQ29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zZWN0aW9uLXJvd1wiKVxuY2xhc3MgSHVpU2VjdGlvblJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogU2VjdGlvbkNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU2VjdGlvbkNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBpbiBjYXJkIGNvbmZpZ3VyYXRpb24uXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XG4gICAgICAke3RoaXMuX2NvbmZpZy5sYWJlbFxuICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFiZWxcIj4ke3RoaXMuX2NvbmZpZy5sYWJlbH08L2Rpdj5cbiAgICAgICAgICBgXG4gICAgICAgIDogaHRtbGBgfVxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAubGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDE2cHg7XG4gICAgICB9XG4gICAgICAuZGl2aWRlciB7XG4gICAgICAgIGhlaWdodDogMXB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIG9wYWNpdHk6IDAuMjU7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAtMTZweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAtMTZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zZWN0aW9uLXJvd1wiOiBIdWlTZWN0aW9uUm93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBXZWJsaW5rQ29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS13ZWJsaW5rLXJvd1wiKVxuY2xhc3MgSHVpV2VibGlua1JvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogV2VibGlua0NvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogV2VibGlua0NvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcudXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246ICd1cmwnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgIGljb246IFwiaGFzczpsaW5rXCIsXG4gICAgICBuYW1lOiBjb25maWcudXJsLFxuICAgICAgLi4uY29uZmlnLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8YVxuICAgICAgICBocmVmPSR7dGhpcy5fY29uZmlnLnVybH1cbiAgICAgICAgdGFyZ2V0PSR7dGhpcy5fY29uZmlnLnVybC5pbmRleE9mKFwiOi8vXCIpICE9PSAtMSA/IFwiX2JsYW5rXCIgOiBcIlwifVxuICAgICAgPlxuICAgICAgICA8aGEtaWNvbiAuaWNvbj1cIiR7dGhpcy5fY29uZmlnLmljb259XCI+PC9oYS1pY29uPlxuICAgICAgICA8ZGl2PiR7dGhpcy5fY29uZmlnLm5hbWV9PC9kaXY+XG4gICAgICA8L2E+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICB9XG4gICAgICBoYS1pY29uIHtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWNvbG9yKTtcbiAgICAgIH1cbiAgICAgIGRpdiB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktd2VibGluay1yb3dcIjogSHVpV2VibGlua1JvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgcHJvcGVydHksXG4gIFByb3BlcnR5VmFsdWVzLFxuICBjdXN0b21FbGVtZW50LFxuICBVcGRhdGluZ0VsZW1lbnQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVDYXJkRWxlbWVudCB9IGZyb20gXCIuLi9jb21tb24vY3JlYXRlLWNhcmQtZWxlbWVudFwiO1xuaW1wb3J0IHsgTG92ZWxhY2VWaWV3Q29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktcGFuZWwtdmlld1wiKVxuZXhwb3J0IGNsYXNzIEhVSVBhbmVsVmlldyBleHRlbmRzIFVwZGF0aW5nRWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgQHByb3BlcnR5KCkgcHVibGljIGNvbmZpZz86IExvdmVsYWNlVmlld0NvbmZpZztcblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmRcIiwgXCJ2YXIoLS1sb3ZlbGFjZS1iYWNrZ3JvdW5kKVwiKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGUoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuICAgIGNvbnN0IGhhc3MgPSB0aGlzLmhhc3MhO1xuICAgIGNvbnN0IGhhc3NDaGFuZ2VkID0gY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiaGFzc1wiKTtcbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BlcnRpZXMuZ2V0KFwiaGFzc1wiKSBhcyB0aGlzW1wiaGFzc1wiXSB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjb25maWdDaGFuZ2VkID0gY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiY29uZmlnXCIpO1xuXG4gICAgaWYgKGNvbmZpZ0NoYW5nZWQpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZUNhcmQoKTtcbiAgICB9IGVsc2UgaWYgKGhhc3NDaGFuZ2VkKSB7XG4gICAgICAodGhpcy5sYXN0Q2hpbGQhIGFzIExvdmVsYWNlQ2FyZCkuaGFzcyA9IHRoaXMuaGFzcztcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBjb25maWdDaGFuZ2VkIHx8XG4gICAgICAoaGFzc0NoYW5nZWQgJiZcbiAgICAgICAgb2xkSGFzcyAmJlxuICAgICAgICAoaGFzcy50aGVtZXMgIT09IG9sZEhhc3MudGhlbWVzIHx8XG4gICAgICAgICAgaGFzcy5zZWxlY3RlZFRoZW1lICE9PSBvbGRIYXNzLnNlbGVjdGVkVGhlbWUpKVxuICAgICkge1xuICAgICAgYXBwbHlUaGVtZXNPbkVsZW1lbnQodGhpcywgaGFzcy50aGVtZXMsIHRoaXMuY29uZmlnIS50aGVtZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlQ2FyZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sYXN0Q2hpbGQpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQodGhpcy5sYXN0Q2hpbGQpO1xuICAgIH1cblxuICAgIGNvbnN0IGNhcmQ6IExvdmVsYWNlQ2FyZCA9IGNyZWF0ZUNhcmRFbGVtZW50KHRoaXMuY29uZmlnIS5jYXJkcyFbMF0pO1xuICAgIGNhcmQuaGFzcyA9IHRoaXMuaGFzcztcbiAgICBjYXJkLmlzUGFuZWwgPSB0cnVlO1xuICAgIHRoaXMuYXBwZW5kKGNhcmQpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktcGFuZWwtdmlld1wiOiBIVUlQYW5lbFZpZXc7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBQcm9wZXJ0eURlY2xhcmF0aW9ucyxcbiAgVGVtcGxhdGVSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2VudGl0eS9oYS1zdGF0ZS1sYWJlbC1iYWRnZVwiO1xuLy8gVGhpcyBvbmUgaXMgZm9yIHR5cGVzXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbmltcG9ydCB7IEhhU3RhdGVMYWJlbEJhZGdlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvZW50aXR5L2hhLXN0YXRlLWxhYmVsLWJhZGdlXCI7XG5cbmltcG9ydCBhcHBseVRoZW1lc09uRWxlbWVudCBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9hcHBseV90aGVtZXNfb25fZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBMb3ZlbGFjZVZpZXdDb25maWcsIExvdmVsYWNlQ2FyZENvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2xvdmVsYWNlXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuaW1wb3J0IHsgTG92ZWxhY2UsIExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ2FyZEVsZW1lbnQgfSBmcm9tIFwiLi4vY29tbW9uL2NyZWF0ZS1jYXJkLWVsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVDYXJkU2l6ZSB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS1jYXJkLXNpemVcIjtcbmltcG9ydCB7IHNob3dFZGl0Q2FyZERpYWxvZyB9IGZyb20gXCIuLi9lZGl0b3IvY2FyZC1lZGl0b3Ivc2hvdy1lZGl0LWNhcmQtZGlhbG9nXCI7XG5pbXBvcnQgeyBIdWlFcnJvckNhcmQgfSBmcm9tIFwiLi4vY2FyZHMvaHVpLWVycm9yLWNhcmRcIjtcblxuaW1wb3J0IHsgY29tcHV0ZVJUTCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vdXRpbC9jb21wdXRlX3J0bFwiO1xuaW1wb3J0IHsgcHJvY2Vzc0NvbmZpZ0VudGl0aWVzIH0gZnJvbSBcIi4uL2NvbW1vbi9wcm9jZXNzLWNvbmZpZy1lbnRpdGllc1wiO1xuXG5sZXQgZWRpdENvZGVMb2FkZWQgPSBmYWxzZTtcblxuLy8gRmluZCBjb2x1bW4gd2l0aCA8IDUgZW50aXRpZXMsIGVsc2UgY29sdW1uIHdpdGggbG93ZXN0IGNvdW50XG5jb25zdCBnZXRDb2x1bW5JbmRleCA9IChjb2x1bW5FbnRpdHlDb3VudDogbnVtYmVyW10sIHNpemU6IG51bWJlcikgPT4ge1xuICBsZXQgbWluSW5kZXggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbkVudGl0eUNvdW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGNvbHVtbkVudGl0eUNvdW50W2ldIDwgNSkge1xuICAgICAgbWluSW5kZXggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChjb2x1bW5FbnRpdHlDb3VudFtpXSA8IGNvbHVtbkVudGl0eUNvdW50W21pbkluZGV4XSkge1xuICAgICAgbWluSW5kZXggPSBpO1xuICAgIH1cbiAgfVxuXG4gIGNvbHVtbkVudGl0eUNvdW50W21pbkluZGV4XSArPSBzaXplO1xuXG4gIHJldHVybiBtaW5JbmRleDtcbn07XG5cbmV4cG9ydCBjbGFzcyBIVUlWaWV3IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHVibGljIGxvdmVsYWNlPzogTG92ZWxhY2U7XG4gIHB1YmxpYyBjb2x1bW5zPzogbnVtYmVyO1xuICBwdWJsaWMgaW5kZXg/OiBudW1iZXI7XG4gIHByaXZhdGUgX2NhcmRzOiBBcnJheTxMb3ZlbGFjZUNhcmQgfCBIdWlFcnJvckNhcmQ+O1xuICBwcml2YXRlIF9iYWRnZXM6IEFycmF5PHsgZWxlbWVudDogSGFTdGF0ZUxhYmVsQmFkZ2U7IGVudGl0eUlkOiBzdHJpbmcgfT47XG5cbiAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCk6IFByb3BlcnR5RGVjbGFyYXRpb25zIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzczoge30sXG4gICAgICBsb3ZlbGFjZToge30sXG4gICAgICBjb2x1bW5zOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgaW5kZXg6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICBfY2FyZHM6IHt9LFxuICAgICAgX2JhZGdlczoge30sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fY2FyZHMgPSBbXTtcbiAgICB0aGlzLl9iYWRnZXMgPSBbXTtcbiAgfVxuXG4gIC8vIFB1YmxpYyB0byBtYWtlIGRlbW8gaGFwcHlcbiAgcHVibGljIGNyZWF0ZUNhcmRFbGVtZW50KGNhcmRDb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkRWxlbWVudChjYXJkQ29uZmlnKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gICAgZWxlbWVudC5oYXNzID0gdGhpcy5oYXNzO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibGwtcmVidWlsZFwiLFxuICAgICAgKGV2KSA9PiB7XG4gICAgICAgIC8vIEluIGVkaXQgbW9kZSBsZXQgaXQgZ28gdG8gaHVpLXJvb3QgYW5kIHJlYnVpbGQgd2hvbGUgdmlldy5cbiAgICAgICAgaWYgKCF0aGlzLmxvdmVsYWNlIS5lZGl0TW9kZSkge1xuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRoaXMuX3JlYnVpbGRDYXJkKGVsZW1lbnQsIGNhcmRDb25maWcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICApO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgJHt0aGlzLnJlbmRlclN0eWxlcygpfVxuICAgICAgPGRpdiBpZD1cImJhZGdlc1wiPjwvZGl2PlxuICAgICAgPGRpdiBpZD1cImNvbHVtbnNcIj48L2Rpdj5cbiAgICAgICR7dGhpcy5sb3ZlbGFjZSEuZWRpdE1vZGVcbiAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgPGhhLWZhYlxuICAgICAgICAgICAgICBpY29uPVwiaGFzczpwbHVzXCJcbiAgICAgICAgICAgICAgdGl0bGU9XCIke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5lZGl0b3IuZWRpdF9jYXJkLmFkZFwiXG4gICAgICAgICAgICAgICl9XCJcbiAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9hZGRDYXJkfVwiXG4gICAgICAgICAgICAgIGNsYXNzPVwiJHtjbGFzc01hcCh7XG4gICAgICAgICAgICAgICAgcnRsOiBjb21wdXRlUlRMKHRoaXMuaGFzcyEpLFxuICAgICAgICAgICAgICB9KX1cIlxuICAgICAgICAgICAgPjwvaGEtZmFiPlxuICAgICAgICAgIGBcbiAgICAgICAgOiBcIlwifVxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyU3R5bGVzKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgOmhvc3Qge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDRweCAwO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbG92ZWxhY2UtYmFja2dyb3VuZCk7XG4gICAgICAgIH1cblxuICAgICAgICAjYmFkZ2VzIHtcbiAgICAgICAgICBtYXJnaW46IDhweCAxNnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogODUlO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgICNjb2x1bW5zIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuY29sdW1uIHtcbiAgICAgICAgICBmbGV4LWJhc2lzOiAwO1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDUwMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbHVtbiA+ICoge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbjogNHB4IDRweCA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICBoYS1mYWIge1xuICAgICAgICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICAgIGJvdHRvbTogMTZweDtcbiAgICAgICAgICByaWdodDogMTZweDtcbiAgICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaGEtZmFiLnJ0bCB7XG4gICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgcmlnaHQ6IGF1dG87XG4gICAgICAgICAgbGVmdDogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA1MDBweCkge1xuICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMDtcbiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmNvbHVtbiA+ICoge1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDU5OXB4KSB7XG4gICAgICAgICAgLmNvbHVtbiB7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDYwMHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG5cbiAgICBjb25zdCBoYXNzID0gdGhpcy5oYXNzITtcbiAgICBjb25zdCBsb3ZlbGFjZSA9IHRoaXMubG92ZWxhY2UhO1xuXG4gICAgaWYgKGxvdmVsYWNlLmVkaXRNb2RlICYmICFlZGl0Q29kZUxvYWRlZCkge1xuICAgICAgZWRpdENvZGVMb2FkZWQgPSB0cnVlO1xuICAgICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLXZpZXctZWRpdGFibGVcIiAqLyBcIi4vaHVpLXZpZXctZWRpdGFibGVcIik7XG4gICAgfVxuXG4gICAgY29uc3QgaGFzc0NoYW5nZWQgPSBjaGFuZ2VkUHJvcGVydGllcy5oYXMoXCJoYXNzXCIpO1xuICAgIGxldCBlZGl0TW9kZUNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgY29uZmlnQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImluZGV4XCIpKSB7XG4gICAgICBjb25maWdDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImxvdmVsYWNlXCIpKSB7XG4gICAgICBjb25zdCBvbGRMb3ZlbGFjZSA9IGNoYW5nZWRQcm9wZXJ0aWVzLmdldChcImxvdmVsYWNlXCIpIGFzIExvdmVsYWNlO1xuICAgICAgZWRpdE1vZGVDaGFuZ2VkID1cbiAgICAgICAgIW9sZExvdmVsYWNlIHx8IGxvdmVsYWNlLmVkaXRNb2RlICE9PSBvbGRMb3ZlbGFjZS5lZGl0TW9kZTtcbiAgICAgIGNvbmZpZ0NoYW5nZWQgPSAhb2xkTG92ZWxhY2UgfHwgbG92ZWxhY2UuY29uZmlnICE9PSBvbGRMb3ZlbGFjZS5jb25maWc7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ0NoYW5nZWQpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZUJhZGdlcyhsb3ZlbGFjZS5jb25maWcudmlld3NbdGhpcy5pbmRleCFdKTtcbiAgICB9IGVsc2UgaWYgKGhhc3NDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9iYWRnZXMuZm9yRWFjaCgoYmFkZ2UpID0+IHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50LCBlbnRpdHlJZCB9ID0gYmFkZ2U7XG4gICAgICAgIGVsZW1lbnQuaGFzcyA9IGhhc3M7XG4gICAgICAgIGVsZW1lbnQuc3RhdGUgPSBoYXNzLnN0YXRlc1tlbnRpdHlJZF07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnQ2hhbmdlZCB8fCBlZGl0TW9kZUNoYW5nZWQgfHwgY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiY29sdW1uc1wiKSkge1xuICAgICAgdGhpcy5fY3JlYXRlQ2FyZHMobG92ZWxhY2UuY29uZmlnLnZpZXdzW3RoaXMuaW5kZXghXSk7XG4gICAgfSBlbHNlIGlmIChoYXNzQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fY2FyZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLmhhc3M7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BlcnRpZXMuZ2V0KFwiaGFzc1wiKSBhcyB0aGlzW1wiaGFzc1wiXSB8IHVuZGVmaW5lZDtcblxuICAgIGlmIChcbiAgICAgIGNvbmZpZ0NoYW5nZWQgfHxcbiAgICAgIGVkaXRNb2RlQ2hhbmdlZCB8fFxuICAgICAgKGhhc3NDaGFuZ2VkICYmXG4gICAgICAgIG9sZEhhc3MgJiZcbiAgICAgICAgKGhhc3MudGhlbWVzICE9PSBvbGRIYXNzLnRoZW1lcyB8fFxuICAgICAgICAgIGhhc3Muc2VsZWN0ZWRUaGVtZSAhPT0gb2xkSGFzcy5zZWxlY3RlZFRoZW1lKSlcbiAgICApIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KFxuICAgICAgICB0aGlzLFxuICAgICAgICBoYXNzLnRoZW1lcyxcbiAgICAgICAgbG92ZWxhY2UuY29uZmlnLnZpZXdzW3RoaXMuaW5kZXghXS50aGVtZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hZGRDYXJkKCk6IHZvaWQge1xuICAgIHNob3dFZGl0Q2FyZERpYWxvZyh0aGlzLCB7XG4gICAgICBsb3ZlbGFjZTogdGhpcy5sb3ZlbGFjZSEsXG4gICAgICBwYXRoOiBbdGhpcy5pbmRleCFdLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlQmFkZ2VzKGNvbmZpZzogTG92ZWxhY2VWaWV3Q29uZmlnKTogdm9pZCB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXCJiYWRnZXNcIikhO1xuXG4gICAgd2hpbGUgKHJvb3QubGFzdENoaWxkKSB7XG4gICAgICByb290LnJlbW92ZUNoaWxkKHJvb3QubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmJhZGdlcyB8fCAhQXJyYXkuaXNBcnJheShjb25maWcuYmFkZ2VzKSkge1xuICAgICAgcm9vdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB0aGlzLl9iYWRnZXMgPSBbXTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtZW50czogSFVJVmlld1tcIl9iYWRnZXNcIl0gPSBbXTtcbiAgICBjb25zdCBiYWRnZXMgPSBwcm9jZXNzQ29uZmlnRW50aXRpZXMoY29uZmlnLmJhZGdlcyk7XG4gICAgZm9yIChjb25zdCBiYWRnZSBvZiBiYWRnZXMpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaGEtc3RhdGUtbGFiZWwtYmFkZ2VcIik7XG4gICAgICBjb25zdCBlbnRpdHlJZCA9IGJhZGdlLmVudGl0eTtcbiAgICAgIGVsZW1lbnQuaGFzcyA9IHRoaXMuaGFzcztcbiAgICAgIGVsZW1lbnQuc3RhdGUgPSB0aGlzLmhhc3MhLnN0YXRlc1tlbnRpdHlJZF07XG4gICAgICBlbGVtZW50Lm5hbWUgPSBiYWRnZS5uYW1lO1xuICAgICAgZWxlbWVudC5pY29uID0gYmFkZ2UuaWNvbjtcbiAgICAgIGVsZW1lbnQuaW1hZ2UgPSBiYWRnZS5pbWFnZTtcbiAgICAgIGVsZW1lbnRzLnB1c2goeyBlbGVtZW50LCBlbnRpdHlJZCB9KTtcbiAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICAgIHRoaXMuX2JhZGdlcyA9IGVsZW1lbnRzO1xuICAgIHJvb3Quc3R5bGUuZGlzcGxheSA9IGVsZW1lbnRzLmxlbmd0aCA+IDAgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUNhcmRzKGNvbmZpZzogTG92ZWxhY2VWaWV3Q29uZmlnKTogdm9pZCB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXCJjb2x1bW5zXCIpITtcblxuICAgIHdoaWxlIChyb290Lmxhc3RDaGlsZCkge1xuICAgICAgcm9vdC5yZW1vdmVDaGlsZChyb290Lmxhc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5jYXJkcyB8fCAhQXJyYXkuaXNBcnJheShjb25maWcuY2FyZHMpKSB7XG4gICAgICB0aGlzLl9jYXJkcyA9IFtdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRzOiBMb3ZlbGFjZUNhcmRbXSA9IFtdO1xuICAgIGNvbnN0IGVsZW1lbnRzVG9BcHBlbmQ6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgICBjb25maWcuY2FyZHMuZm9yRWFjaCgoY2FyZENvbmZpZywgY2FyZEluZGV4KSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5jcmVhdGVDYXJkRWxlbWVudChjYXJkQ29uZmlnKTtcbiAgICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG5cbiAgICAgIGlmICghdGhpcy5sb3ZlbGFjZSEuZWRpdE1vZGUpIHtcbiAgICAgICAgZWxlbWVudHNUb0FwcGVuZC5wdXNoKGVsZW1lbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLWNhcmQtb3B0aW9uc1wiKTtcbiAgICAgIHdyYXBwZXIuaGFzcyA9IHRoaXMuaGFzcztcbiAgICAgIHdyYXBwZXIubG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlO1xuICAgICAgd3JhcHBlci5wYXRoID0gW3RoaXMuaW5kZXghLCBjYXJkSW5kZXhdO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgIGVsZW1lbnRzVG9BcHBlbmQucHVzaCh3cmFwcGVyKTtcbiAgICB9KTtcblxuICAgIGxldCBjb2x1bW5zOiBIVE1MRWxlbWVudFtdW10gPSBbXTtcbiAgICBjb25zdCBjb2x1bW5FbnRpdHlDb3VudDogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucyE7IGkrKykge1xuICAgICAgY29sdW1ucy5wdXNoKFtdKTtcbiAgICAgIGNvbHVtbkVudGl0eUNvdW50LnB1c2goMCk7XG4gICAgfVxuXG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjYXJkU2l6ZSA9IGNvbXB1dGVDYXJkU2l6ZShlbCk7XG4gICAgICAvLyBFbGVtZW50IHRvIGFwcGVuZCBtaWdodCBiZSB0aGUgd3JhcHBlZCBjYXJkIHdoZW4gd2UncmUgZWRpdGluZy5cbiAgICAgIGNvbHVtbnNbZ2V0Q29sdW1uSW5kZXgoY29sdW1uRW50aXR5Q291bnQsIGNhcmRTaXplKV0ucHVzaChcbiAgICAgICAgZWxlbWVudHNUb0FwcGVuZFtpbmRleF1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgZW1wdHkgY29sdW1uc1xuICAgIGNvbHVtbnMgPSBjb2x1bW5zLmZpbHRlcigodmFsKSA9PiB2YWwubGVuZ3RoID4gMCk7XG5cbiAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgY29uc3QgY29sdW1uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29sdW1uRWwuY2xhc3NMaXN0LmFkZChcImNvbHVtblwiKTtcbiAgICAgIGNvbHVtbi5mb3JFYWNoKChlbCkgPT4gY29sdW1uRWwuYXBwZW5kQ2hpbGQoZWwpKTtcbiAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29sdW1uRWwpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZHMgPSBlbGVtZW50cztcbiAgfVxuXG4gIHByaXZhdGUgX3JlYnVpbGRDYXJkKFxuICAgIGNhcmRFbFRvUmVwbGFjZTogTG92ZWxhY2VDYXJkLFxuICAgIGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG5ld0NhcmRFbCA9IHRoaXMuY3JlYXRlQ2FyZEVsZW1lbnQoY29uZmlnKTtcbiAgICBjYXJkRWxUb1JlcGxhY2UucGFyZW50RWxlbWVudCEucmVwbGFjZUNoaWxkKG5ld0NhcmRFbCwgY2FyZEVsVG9SZXBsYWNlKTtcbiAgICB0aGlzLl9jYXJkcyA9IHRoaXMuX2NhcmRzIS5tYXAoKGN1ckNhcmRFbCkgPT5cbiAgICAgIGN1ckNhcmRFbCA9PT0gY2FyZEVsVG9SZXBsYWNlID8gbmV3Q2FyZEVsIDogY3VyQ2FyZEVsXG4gICAgKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXZpZXdcIjogSFVJVmlldztcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktdmlld1wiLCBIVUlWaWV3KTtcbiIsImltcG9ydCBcIkBwb2x5bWVyL2lyb24taW1hZ2UvaXJvbi1pbWFnZVwiO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9odG1sLXRhZ1wiO1xuaW1wb3J0IHsgUG9seW1lckVsZW1lbnQgfSBmcm9tIFwiQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRXZlbnRzTWl4aW4gfSBmcm9tIFwiLi4vLi4vbWl4aW5zL2V2ZW50cy1taXhpblwiO1xuXG4vKlxuICogQGFwcGxpZXNNaXhpbiBFdmVudHNNaXhpblxuICovXG5jbGFzcyBIYUVudGl0eU1hcmtlciBleHRlbmRzIEV2ZW50c01peGluKFBvbHltZXJFbGVtZW50KSB7XG4gIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c3R5bGUgaW5jbHVkZT1cImlyb24tcG9zaXRpb25pbmdcIj48L3N0eWxlPlxuICAgICAgPHN0eWxlPlxuICAgICAgICAubWFya2VyIHtcbiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICB3aWR0aDogMi41ZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGhlaWdodDogMi41ZW07XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDIuNWVtO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGJvcmRlcjogMC4xZW0gc29saWRcbiAgICAgICAgICAgIHZhcigtLWhhLW1hcmtlci1jb2xvciwgdmFyKC0tZGVmYXVsdC1wcmltYXJ5LWNvbG9yKSk7XG4gICAgICAgICAgY29sb3I6IHJnYig3NiwgNzYsIDc2KTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuICAgICAgICBpcm9uLWltYWdlIHtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIH1cbiAgICAgIDwvc3R5bGU+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJtYXJrZXJcIj5cbiAgICAgICAgPHRlbXBsYXRlIGlzPVwiZG9tLWlmXCIgaWY9XCJbW2VudGl0eU5hbWVdXVwiXG4gICAgICAgICAgPltbZW50aXR5TmFtZV1dPC90ZW1wbGF0ZVxuICAgICAgICA+XG4gICAgICAgIDx0ZW1wbGF0ZSBpcz1cImRvbS1pZlwiIGlmPVwiW1tlbnRpdHlQaWN0dXJlXV1cIj5cbiAgICAgICAgICA8aXJvbi1pbWFnZVxuICAgICAgICAgICAgc2l6aW5nPVwiY292ZXJcIlxuICAgICAgICAgICAgY2xhc3M9XCJmaXRcIlxuICAgICAgICAgICAgc3JjPVwiW1tlbnRpdHlQaWN0dXJlXV1cIlxuICAgICAgICAgID48L2lyb24taW1hZ2U+XG4gICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBoYXNzOiB7XG4gICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgIH0sXG5cbiAgICAgIGVudGl0eUlkOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICB9LFxuXG4gICAgICBlbnRpdHlOYW1lOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICB9LFxuXG4gICAgICBlbnRpdHlQaWN0dXJlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICByZWFkeSgpIHtcbiAgICBzdXBlci5yZWFkeSgpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldikgPT4gdGhpcy5iYWRnZVRhcChldikpO1xuICB9XG5cbiAgYmFkZ2VUYXAoZXYpIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAodGhpcy5lbnRpdHlJZCkge1xuICAgICAgdGhpcy5maXJlKFwiaGFzcy1tb3JlLWluZm9cIiwgeyBlbnRpdHlJZDogdGhpcy5lbnRpdHlJZCB9KTtcbiAgICB9XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwiaGEtZW50aXR5LW1hcmtlclwiLCBIYUVudGl0eU1hcmtlcik7XG4iLCJpbXBvcnQgeyBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbnRlcmZhY2UgTG9hZGVkUm91bmRTbGlkZXIge1xuICByb3VuZFNsaWRlclN0eWxlOiBUZW1wbGF0ZVJlc3VsdDtcbiAgalF1ZXJ5OiBhbnk7XG59XG5cbmxldCBsb2FkZWQ6IFByb21pc2U8TG9hZGVkUm91bmRTbGlkZXI+O1xuXG5leHBvcnQgY29uc3QgbG9hZFJvdW5kc2xpZGVyID0gYXN5bmMgKCk6IFByb21pc2U8TG9hZGVkUm91bmRTbGlkZXI+ID0+IHtcbiAgaWYgKCFsb2FkZWQpIHtcbiAgICBsb2FkZWQgPSBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJqcXVlcnktcm91bmRzbGlkZXJcIiAqLyBcIi4vanF1ZXJ5LnJvdW5kc2xpZGVyXCIpO1xuICB9XG4gIHJldHVybiBsb2FkZWQ7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQTRCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN4RUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDMUNBO0FBQUE7QUFBQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3JDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ1hBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7O0FDWEE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQy9CQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDL0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDWEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ25GQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZHQTtBQVNBO0FBS0E7QUFBQTs7QUFJQTtBQXVHQTtBQXJHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNEJBO0FBQ0E7QUFFQTtBQUNBOzs7OztBQUtBO0FBQ0E7Ozs7QUFJQTs7Ozs7Ozs7QUFRQTtBQUNBOzs7O0FBSUE7Ozs7Ozs7O0FBUUE7QUFDQTs7OztBQUlBOzs7OztBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFKQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7OztBQ2RBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTs7Ozs7Ozs7Ozs7OztBQzFCQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7Ozs7Ozs7Ozs7Ozs7QUM5QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDcFNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3BCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBV0E7QUFTQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBV0E7Ozs7Ozs7Ozs7Ozs7QUN6REE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFvQkE7QUFXQTtBQUVBO0FBQ0E7QUFFQTtBQWFBOzs7Ozs7Ozs7Ozs7O0FDbkRBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBaUJBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFXQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBYUE7Ozs7Ozs7Ozs7Ozs7QUNuRUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF3RUE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7Ozs7Ozs7Ozs7Ozs7QUN4RkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBY0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNqQ0E7QUFBQTtBQUFBO0FBU0E7QUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25CQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFLQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUdBO0FBQ0E7QUFDQTtBQWpSQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFkQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN0Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFRQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDeEVBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFJQTs7QUFFQTs7QUFFQTs7O0FBS0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJCQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsSUE7QUFBQTtBQUFBO0FBVkE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzQkE7QUFXQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0QkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTlLQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFqQkE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDaENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBRUE7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3SkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXRDQTtBQUFBO0FBQUE7QUFIQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1QkE7QUFVQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTs7QUFXQTtBQXVQQTtBQWpRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBRUE7QUFDQTs7QUFFQTs7QUFNQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7Ozs7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJFQTtBQUNBO0FBQ0E7QUF6UEE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBWkE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqQ0E7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBSUE7O0FBTUE7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBck1BO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQVpBO0FBREE7QUFDQTtBQUFBOzs7Ozs7Ozs7Ozs7O0FDOUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNoR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFDQTtBQUNBO0FBUUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0NBO0FBVUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBQ0E7QUFDQTtBQTlEQTtBQUFBO0FBQUE7QUFUQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7OztBQ2pCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6REE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTs7QUFFQTs7QUFNQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7Ozs7QUFJQTs7OztBQUlBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBOzs7QUFHQTs7OztBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErRkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1UUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBWEE7QUFEQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9CQTtBQUVBO0FBV0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBR0E7QUFBQTs7QUFhQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUF1WUE7QUF4YUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTs7O0FBR0E7Ozs7OztBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkNBO0FBQ0E7QUFDQTtBQS9aQTtBQUFBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFHQTtBQURBO0FBQ0E7QUFoQkE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbENBO0FBU0E7QUFHQTtBQUNBO0FBS0E7QUFHQTtBQUFBOztBQWNBO0FBaUhBO0FBOUhBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBO0FBQ0E7QUFDQTtBQWxIQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFoQkE7QUFEQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7QUNyQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25CQTtBQVVBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFhQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUEzREE7QUFBQTtBQUFBO0FBaEJBO0FBREE7QUFDQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwQkE7QUFVQTtBQU9BO0FBS0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7QUFJQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7OztBQWFBO0FBQ0E7QUFDQTtBQWhGQTtBQUFBO0FBQUE7QUFEQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqQkE7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBaEpBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQWZBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdCQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUtBOzs7O0FBTUE7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUtBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2Q0E7QUFDQTtBQUNBO0FBOU5BO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQWZBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xDQTtBQVlBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTs7QUFFQTs7QUFNQTtBQUNBO0FBRUE7O0FBRUE7Ozs7QUFJQTs7O0FBR0E7Ozs7QUFJQTs7O0FBSUE7QUFDQTs7OztBQUlBOzs7O0FBT0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTs7O0FBR0E7OztBQUlBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekxBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQVpBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaENBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7OztBQUdBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTs7Ozs7QUFLQTs7Ozs7QUFLQTs7QUFFQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3RkE7QUFDQTtBQUNBO0FBdFFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQWRBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdJQTtBQVNBO0FBRUE7QUFFQTtBQUNBO0FBSUE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFJQTs7QUFFQTs7Ozs7OztBQVNBO0FBR0E7Ozs7QUFJQTs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUVBO0FBQ0E7Ozs7QUFJQTs7OztBQU1BOztBQUVBOzs7O0FBTUE7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0REE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM1FBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQWhCQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM1QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyR0E7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTs7Ozs7QUFLQTs7OztBQUlBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFLQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQVlBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtNQTtBQUNBO0FBQ0E7QUFyaEJBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQWhCQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7OztBQ3REQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBO0FBQ0E7QUFDQTtBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0NBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTs7QUFFQTs7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7O0FBS0E7QUFDQTs7QUFFQTs7QUFJQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFJQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBSUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBOzs7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUdBO0FBQ0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZ0lBO0FBQ0E7QUFDQTtBQWpXQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFYQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMvREE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2hCQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDVEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDbkdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7OztBQzVIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDNUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM5SUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFVQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzFMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ1RBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3hDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDdEJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDaEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBSUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQVNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFFQTtBQVFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzVhQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM5REE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7O0FDdEJBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzNDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7O0FDdENBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pCQTtBQVdBO0FBSUE7QUFDQTtBQUVBO0FBR0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwREE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyQkE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQUE7O0FBS0E7QUE4R0E7QUE1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2Q0E7QUFDQTtBQUNBO0FBbEhBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQStHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6SUE7QUFFQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEyQkE7QUFDQTtBQUNBO0FBMU5BO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQXZCQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM0JBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBHQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBS0E7QUFFQTtBQUFBO0FBQUE7QUFaQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZCQTtBQVdBO0FBR0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFDQTtBQUNBO0FBcENBO0FBQUE7QUFBQTtBQURBO0FBREE7QUFDQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWEE7QUFVQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFmQTtBQUFBO0FBQUE7QUFEQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDYkE7QUFVQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFqQkE7QUFEQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7QUNWQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQy9CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFJQTtBQUVBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFJQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFJQTtBQUVBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBT0E7QUFNQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUVBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFRQTtBQVdBO0FBS0E7QUFDQTtBQUVBO0FBTUE7QUFFQTs7Ozs7Ozs7Ozs7OztBQ3BNQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQy9CQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFNQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNqQ0E7QUFBQTtBQUFBO0FBQUE7QUFlQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN6Q0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQVFBO0FBQUE7O0FBR0E7QUF3REE7QUF0REE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0VBO0FBVUE7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQXpDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25CQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUExREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuQkE7QUFVQTtBQU1BO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBcERBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEJBO0FBU0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUE5Q0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCQTtBQVdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTs7OztBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTdEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBS0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBdkVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkJBO0FBV0E7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBcERBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwQkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUE3REE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RCQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFNQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUE3REE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEJBO0FBU0E7QUFDQTtBQUdBO0FBTUE7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFqR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZCQTtBQVdBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUdBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFLQTtBQUNBOzs7QUFHQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTs7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6SUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0QkE7QUFVQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBRUE7QUFDQTs7O0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBY0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBMUdBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM0JBO0FBVUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFqRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25CQTtBQVdBO0FBQ0E7QUFJQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBOURBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuQkE7QUFVQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBTUE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbklBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNUJBO0FBV0E7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbEVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEJBO0FBV0E7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCQTtBQVdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFPQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBOztBQU1BO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBT0E7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUEvREE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6QkE7QUFXQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7OztBQU9BO0FBQ0E7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBdERBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFHQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUExSEE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckJBO0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFNQTs7QUFFQTtBQUNBO0FBQ0E7QUF2REE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkJBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFHQTtBQU9BO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFzQkE7QUFDQTtBQVhBO0FBUUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUtBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQTFSQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUE2UUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVUQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBSUE7OztBQUdBO0FBQ0E7Ozs7QUFJQTs7Ozs7O0FBTUE7Ozs7Ozs7Ozs7Ozs7QUFhQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBR0E7O0FBRUE7O0FBSUE7QUFDQTtBQUNBOzs7OztBQU9BO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7O0FBRUE7Ozs7Ozs7Ozs7OztBQVlBOzs7QUFHQTtBQUNBOztBQUVBO0FBR0E7O0FBRUE7OztBQUtBO0FBR0E7O0FBRUE7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFHQTs7QUFFQTs7QUFJQTtBQUNBOztBQUVBO0FBR0E7O0FBRUE7Ozs7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTs7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFFQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFLQTtBQUNBOzs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEyRkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFqbkJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQW1uQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOXFCQTtBQVNBO0FBRUE7QUFFQTtBQUtBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5QkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBMURBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsQkE7QUFTQTtBQUtBO0FBRUE7QUFNQTtBQUFBOztBQU9BO0FBd0lBO0FBdElBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUNBO0FBQ0E7QUFDQTtBQTVJQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFQQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJBO0FBWUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9CQTtBQUFBO0FBQUE7QUFIQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ1pBO0FBYUE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUFlQTtBQUNBO0FBQ0E7QUEzQ0E7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQkE7QUFhQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTtBQWxEQTtBQUFBO0FBQUE7QUFIQTtBQURBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEJBO0FBT0E7QUFJQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7QUNmQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUtBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7O0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBUUE7Ozs7Ozs7Ozs7Ozs7QUNwV0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQy9FQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0EiLCJzb3VyY2VSb290IjoiIn0=