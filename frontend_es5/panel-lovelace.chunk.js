(self["webpackJsonp"] = self["webpackJsonp"] || []).push([["panel-lovelace"],{

/***/ "./src/cast/const.ts":
/*!***************************!*\
  !*** ./src/cast/const.ts ***!
  \***************************/
/*! exports provided: CAST_DEV, CAST_APP_ID, CAST_NS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_DEV", function() { return CAST_DEV; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_APP_ID", function() { return CAST_APP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_NS", function() { return CAST_NS; });
/* harmony import */ var _dev_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dev_const */ "./src/cast/dev_const.ts");

// Guard dev mode with `__dev__` so it can only ever be enabled in dev mode.
var CAST_DEV =  true && true;
var CAST_APP_ID = CAST_DEV ? _dev_const__WEBPACK_IMPORTED_MODULE_0__["CAST_DEV_APP_ID"] : "B12CE3CA";
var CAST_NS = "urn:x-cast:com.nabucasa.hast";


/***/ }),

/***/ "./src/cast/dev_const.ts":
/*!*******************************!*\
  !*** ./src/cast/dev_const.ts ***!
  \*******************************/
/*! exports provided: CAST_DEV_APP_ID, CAST_DEV_HASS_URL */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_DEV_APP_ID", function() { return CAST_DEV_APP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAST_DEV_HASS_URL", function() { return CAST_DEV_HASS_URL; });
// Replace this with your own unpublished cast app that points at your local dev
var CAST_DEV_APP_ID = "5FE44367";
// Chromecast SDK will only load on localhost and HTTPS
// So during local development we have to send our dev IP address,
// but then run the UI on localhost.
var CAST_DEV_HASS_URL = "http://192.168.1.234:8123";


/***/ }),

/***/ "./src/cast/receiver_messages.ts":
/*!***************************************!*\
  !*** ./src/cast/receiver_messages.ts ***!
  \***************************************/
/*! exports provided: castSendAuth, castSendShowLovelaceView, castSendShowDemo, ensureConnectedCastSession */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "castSendAuth", function() { return castSendAuth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "castSendShowLovelaceView", function() { return castSendShowLovelaceView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "castSendShowDemo", function() { return castSendShowDemo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ensureConnectedCastSession", function() { return ensureConnectedCastSession; });
/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./const */ "./src/cast/const.ts");
/* harmony import */ var _dev_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dev_const */ "./src/cast/dev_const.ts");
// Nessages to be processed inside the Cast Receiver app


var castSendAuth = function (cast, auth) {
    return cast.sendMessage({
        type: "connect",
        refreshToken: auth.data.refresh_token,
        clientId: auth.data.clientId,
        hassUrl: _const__WEBPACK_IMPORTED_MODULE_0__["CAST_DEV"] ? _dev_const__WEBPACK_IMPORTED_MODULE_1__["CAST_DEV_HASS_URL"] : auth.data.hassUrl,
    });
};
var castSendShowLovelaceView = function (cast, viewPath) {
    return cast.sendMessage({
        type: "show_lovelace_view",
        viewPath: viewPath,
    });
};
var castSendShowDemo = function (cast) {
    return cast.sendMessage({
        type: "show_demo",
    });
};
var ensureConnectedCastSession = function (cast, auth) {
    if (cast.castConnectedToOurHass) {
        return;
    }
    return new Promise(function (resolve) {
        var unsub = cast.addEventListener("connection-changed", function () {
            if (cast.castConnectedToOurHass) {
                unsub();
                resolve();
            }
        });
        castSendAuth(cast, auth);
    });
};


/***/ }),

/***/ "./src/common/datetime/relative_time.ts":
/*!**********************************************!*\
  !*** ./src/common/datetime/relative_time.ts ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return relativeTime; });
/**
 * Calculate a string representing a date object as relative time from now.
 *
 * Example output: 5 minutes ago, in 3 days.
 */
var tests = [60, 60, 24, 7];
var langKey = ["second", "minute", "hour", "day"];
function relativeTime(dateObj, localize, options) {
    if (options === void 0) { options = {}; }
    var compareTime = options.compareTime || new Date();
    var delta = (compareTime.getTime() - dateObj.getTime()) / 1000;
    var tense = delta >= 0 ? "past" : "future";
    delta = Math.abs(delta);
    var timeDesc;
    for (var i = 0; i < tests.length; i++) {
        if (delta < tests[i]) {
            delta = Math.floor(delta);
            timeDesc = localize("ui.components.relative_time.duration." + langKey[i], "count", delta);
            break;
        }
        delta /= tests[i];
    }
    if (timeDesc === undefined) {
        delta = Math.floor(delta);
        timeDesc = localize("ui.components.relative_time.duration.week", "count", delta);
    }
    return options.includeTense === false
        ? timeDesc
        : localize("ui.components.relative_time." + tense, "time", timeDesc);
}


/***/ }),

/***/ "./src/common/dom/load_resource.ts":
/*!*****************************************!*\
  !*** ./src/common/dom/load_resource.ts ***!
  \*****************************************/
/*! exports provided: loadCSS, loadJS, loadImg, loadModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCSS", function() { return loadCSS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadJS", function() { return loadJS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadImg", function() { return loadImg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadModule", function() { return loadModule; });
// Load a resource and get a promise when loading done.
// From: https://davidwalsh.name/javascript-loader
var _load = function (tag, url, type) {
    // This promise will be used by Promise.all to determine success or failure
    return new Promise(function (resolve, reject) {
        var element = document.createElement(tag);
        var attr = "src";
        var parent = "body";
        // Important success and error for the promise
        element.onload = function () { return resolve(url); };
        element.onerror = function () { return reject(url); };
        // Need to set different attributes depending on tag type
        switch (tag) {
            case "script":
                element.async = true;
                if (type) {
                    element.type = type;
                }
                break;
            case "link":
                element.type = "text/css";
                element.rel = "stylesheet";
                attr = "href";
                parent = "head";
        }
        // Inject into document to kick off loading
        element[attr] = url;
        document[parent].appendChild(element);
    });
};
var loadCSS = function (url) { return _load("link", url); };
var loadJS = function (url) { return _load("script", url); };
var loadImg = function (url) { return _load("img", url); };
var loadModule = function (url) { return _load("script", url, "module"); };


/***/ }),

/***/ "./src/common/dom/scroll-to-target.ts":
/*!********************************************!*\
  !*** ./src/common/dom/scroll-to-target.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return scrollToTarget; });
/**
 * Scroll to a specific y coordinate.
 *
 * Copied from paper-scroll-header-panel.
 *
 * @method scroll
 * @param {number} top The coordinate to scroll to, along the y-axis.
 * @param {boolean} smooth true if the scroll position should be smoothly adjusted.
 */
function scrollToTarget(element, target) {
    // the scroll event will trigger _updateScrollState directly,
    // However, _updateScrollState relies on the previous `scrollTop` to update the states.
    // Calling _updateScrollState will ensure that the states are synced correctly.
    var top = 0;
    var scroller = target;
    var easingFn = function easeOutQuad(t, b, c, d) {
        /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */
        t /= d;
        return -c * t * (t - 2) + b;
        /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */
    };
    var animationId = Math.random();
    var duration = 200;
    var startTime = Date.now();
    var currentScrollTop = scroller.scrollTop;
    var deltaScrollTop = top - currentScrollTop;
    element._currentAnimationId = animationId;
    (function updateFrame() {
        var now = Date.now();
        var elapsedTime = now - startTime;
        if (elapsedTime > duration) {
            scroller.scrollTop = top;
        }
        else if (element._currentAnimationId === animationId) {
            scroller.scrollTop = easingFn(elapsedTime, currentScrollTop, deltaScrollTop, duration);
            requestAnimationFrame(updateFrame.bind(element));
        }
    }.call(element));
}


/***/ }),

/***/ "./src/common/dom/setup-leaflet-map.ts":
/*!*********************************************!*\
  !*** ./src/common/dom/setup-leaflet-map.ts ***!
  \*********************************************/
/*! exports provided: setupLeafletMap, createTileLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupLeafletMap", function() { return setupLeafletMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createTileLayer", function() { return createTileLayer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var setupLeafletMap = function (mapElement, darkMode) {
    if (darkMode === void 0) { darkMode = false; }
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(void 0, void 0, void 0, function () {
        var Leaflet, map, style;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!mapElement.parentNode) {
                        throw new Error("Cannot setup Leaflet map on disconnected element");
                    }
                    return [4 /*yield*/, __webpack_require__.e(/*! import() | leaflet */ "vendors~leaflet").then(__webpack_require__.t.bind(null, /*! leaflet */ "./node_modules/leaflet/dist/leaflet-src.js", 7))];
                case 1:
                    Leaflet = (_a.sent());
                    Leaflet.Icon.Default.imagePath = "/static/images/leaflet/images/";
                    map = Leaflet.map(mapElement);
                    style = document.createElement("link");
                    style.setAttribute("href", "/static/images/leaflet/leaflet.css");
                    style.setAttribute("rel", "stylesheet");
                    mapElement.parentNode.appendChild(style);
                    map.setView([52.3731339, 4.8903147], 13);
                    createTileLayer(Leaflet, darkMode).addTo(map);
                    return [2 /*return*/, [map, Leaflet]];
            }
        });
    });
};
var createTileLayer = function (leaflet, darkMode) {
    return leaflet.tileLayer("https://{s}.basemaps.cartocdn.com/" + (darkMode ? "dark_all" : "light_all") + "/{z}/{x}/{y}" + (leaflet.Browser.retina ? "@2x.png" : ".png"), {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: "abcd",
        minZoom: 0,
        maxZoom: 20,
    });
};


/***/ }),

/***/ "./src/common/entity/valid_entity_id.ts":
/*!**********************************************!*\
  !*** ./src/common/entity/valid_entity_id.ts ***!
  \**********************************************/
/*! exports provided: isValidEntityId, createValidEntityId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidEntityId", function() { return isValidEntityId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createValidEntityId", function() { return createValidEntityId; });
var validEntityId = /^(\w+)\.(\w+)$/;
var isValidEntityId = function (entityId) {
    return validEntityId.test(entityId);
};
var createValidEntityId = function (input) {
    return input
        .toLowerCase()
        .replace(/\s|\'/g, "_") // replace spaces and quotes with underscore
        .replace(/\W/g, "") // remove not allowed chars
        .replace(/_{2,}/g, "_") // replace multiple underscores with 1
        .replace(/_$/, "");
}; // remove underscores at the end


/***/ }),

/***/ "./src/common/string/compare.ts":
/*!**************************************!*\
  !*** ./src/common/string/compare.ts ***!
  \**************************************/
/*! exports provided: compare, caseInsensitiveCompare */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compare", function() { return compare; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "caseInsensitiveCompare", function() { return caseInsensitiveCompare; });
var compare = function (a, b) {
    if (a < b) {
        return -1;
    }
    if (a > b) {
        return 1;
    }
    return 0;
};
var caseInsensitiveCompare = function (a, b) {
    return compare(a.toLowerCase(), b.toLowerCase());
};


/***/ }),

/***/ "./src/common/util/parse-aspect-ratio.ts":
/*!***********************************************!*\
  !*** ./src/common/util/parse-aspect-ratio.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return parseAspectRatio; });
// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78
// Ignore everything else
var parseOrThrow = function (num) {
    var parsed = parseFloat(num);
    if (isNaN(parsed)) {
        throw new Error(num + " is not a number");
    }
    return parsed;
};
function parseAspectRatio(input) {
    if (!input) {
        return null;
    }
    try {
        if (input.endsWith("%")) {
            return { w: 100, h: parseOrThrow(input.substr(0, input.length - 1)) };
        }
        var arr = input.replace(":", "x").split("x");
        if (arr.length === 0) {
            return null;
        }
        return arr.length === 1
            ? { w: parseOrThrow(arr[0]), h: 1 }
            : { w: parseOrThrow(arr[0]), h: parseOrThrow(arr[1]) };
    }
    catch (err) {
        // Ignore the error
    }
    return null;
}


/***/ }),

/***/ "./src/common/util/render-status.ts":
/*!******************************************!*\
  !*** ./src/common/util/render-status.ts ***!
  \******************************************/
/*! exports provided: afterNextRender, nextRender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "afterNextRender", function() { return afterNextRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextRender", function() { return nextRender; });
var afterNextRender = function (cb) {
    requestAnimationFrame(function () { return setTimeout(cb, 0); });
};
var nextRender = function () {
    return new Promise(function (resolve) {
        afterNextRender(resolve);
    });
};


/***/ }),

/***/ "./src/common/util/subscribe-one.ts":
/*!******************************************!*\
  !*** ./src/common/util/subscribe-one.ts ***!
  \******************************************/
/*! exports provided: subscribeOne */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeOne", function() { return subscribeOne; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var subscribeOne = function (conn, subscribe) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(void 0, void 0, void 0, function () {
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
        return [2 /*return*/, new Promise(function (resolve) {
                var unsub = subscribe(conn, function (items) {
                    unsub();
                    resolve(items);
                });
            })];
    });
}); };


/***/ }),

/***/ "./src/components/buttons/ha-call-service-button.js":
/*!**********************************************************!*\
  !*** ./src/components/buttons/ha-call-service-button.js ***!
  \**********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/* harmony import */ var _ha_progress_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ha-progress-button */ "./src/components/buttons/ha-progress-button.js");
/* harmony import */ var _mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../mixins/events-mixin */ "./src/mixins/events-mixin.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n      <ha-progress-button\n        id=\"progress\"\n        progress=\"[[progress]]\"\n        on-click=\"buttonTapped\"\n        ><slot></slot\n      ></ha-progress-button>\n    "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





/*
 * @appliesMixin EventsMixin
 */

var HaCallServiceButton =
/*#__PURE__*/
function (_EventsMixin) {
  _inherits(HaCallServiceButton, _EventsMixin);

  function HaCallServiceButton() {
    _classCallCheck(this, HaCallServiceButton);

    return _possibleConstructorReturn(this, _getPrototypeOf(HaCallServiceButton).apply(this, arguments));
  }

  _createClass(HaCallServiceButton, [{
    key: "buttonTapped",
    value: function buttonTapped() {
      if (this.confirmation && !window.confirm(this.confirmation)) {
        return;
      }

      this.progress = true;
      var el = this;
      var eventData = {
        domain: this.domain,
        service: this.service,
        serviceData: this.serviceData
      };
      this.hass.callService(this.domain, this.service, this.serviceData).then(function () {
        el.progress = false;
        el.$.progress.actionSuccess();
        eventData.success = true;
      }, function () {
        el.progress = false;
        el.$.progress.actionError();
        eventData.success = false;
      }).then(function () {
        el.fire("hass-service-called", eventData);
      });
    }
  }], [{
    key: "template",
    get: function get() {
      return Object(_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__["html"])(_templateObject());
    }
  }, {
    key: "properties",
    get: function get() {
      return {
        hass: {
          type: Object
        },
        progress: {
          type: Boolean,
          value: false
        },
        domain: {
          type: String
        },
        service: {
          type: String
        },
        serviceData: {
          type: Object,
          value: {}
        },
        confirmation: {
          type: String
        }
      };
    }
  }]);

  return HaCallServiceButton;
}(Object(_mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__["EventsMixin"])(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__["PolymerElement"]));

customElements.define("ha-call-service-button", HaCallServiceButton);

/***/ }),

/***/ "./src/components/ha-date-input.ts":
/*!*****************************************!*\
  !*** ./src/components/ha-date-input.ts ***!
  \*****************************************/
/*! exports provided: HaDateInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HaDateInput", function() { return HaDateInput; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_input_paper_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-input/paper-input */ "./node_modules/@polymer/paper-input/paper-input.js");



var HaDateInput = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HaDateInput, _super);
    function HaDateInput() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.disabled = false;
        return _this;
    }
    Object.defineProperty(HaDateInput, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: block;\n        font-family: var(--paper-font-common-base_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-common-base_-_-webkit-font-smoothing\n        );\n      }\n\n      paper-input {\n        width: 30px;\n        text-align: center;\n        --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;\n        --paper-input-container-input_-_-moz-appearance: textfield;\n        --paper-input-container-shared-input-style_-_appearance: textfield;\n        --paper-input-container-input-webkit-spinner_-_-webkit-appearance: none;\n        --paper-input-container-input-webkit-spinner_-_margin: 0;\n        --paper-input-container-input-webkit-spinner_-_display: none;\n      }\n\n      paper-input#year {\n        width: 50px;\n      }\n\n      .date-input-wrap {\n        display: flex;\n        flex-direction: row;\n      }\n    "], ["\n      :host {\n        display: block;\n        font-family: var(--paper-font-common-base_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-common-base_-_-webkit-font-smoothing\n        );\n      }\n\n      paper-input {\n        width: 30px;\n        text-align: center;\n        --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;\n        --paper-input-container-input_-_-moz-appearance: textfield;\n        --paper-input-container-shared-input-style_-_appearance: textfield;\n        --paper-input-container-input-webkit-spinner_-_-webkit-appearance: none;\n        --paper-input-container-input-webkit-spinner_-_margin: 0;\n        --paper-input-container-input-webkit-spinner_-_display: none;\n      }\n\n      paper-input#year {\n        width: 50px;\n      }\n\n      .date-input-wrap {\n        display: flex;\n        flex-direction: row;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HaDateInput.prototype.render = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <div class=\"date-input-wrap\">\n        <paper-input\n          id=\"year\"\n          type=\"number\"\n          .value=", "\n          @change=", "\n          maxlength=\"4\"\n          max=\"9999\"\n          min=\"0\"\n          .disabled=", "\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"month\"\n          type=\"number\"\n          .value=", "\n          @change=", "\n          maxlength=\"2\"\n          max=\"12\"\n          min=\"1\"\n          .disabled=", "\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"day\"\n          type=\"number\"\n          .value=", "\n          @change=", "\n          maxlength=\"2\"\n          max=\"31\"\n          min=\"1\"\n          .disabled=", "\n          no-label-float\n        >\n        </paper-input>\n      </div>\n    "], ["\n      <div class=\"date-input-wrap\">\n        <paper-input\n          id=\"year\"\n          type=\"number\"\n          .value=", "\n          @change=", "\n          maxlength=\"4\"\n          max=\"9999\"\n          min=\"0\"\n          .disabled=", "\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"month\"\n          type=\"number\"\n          .value=", "\n          @change=", "\n          maxlength=\"2\"\n          max=\"12\"\n          min=\"1\"\n          .disabled=", "\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"day\"\n          type=\"number\"\n          .value=", "\n          @change=", "\n          maxlength=\"2\"\n          max=\"31\"\n          min=\"1\"\n          .disabled=", "\n          no-label-float\n        >\n        </paper-input>\n      </div>\n    "])), this.year, this._formatYear, this.disabled, this.month, this._formatMonth, this.disabled, this.day, this._formatDay, this.disabled);
    };
    HaDateInput.prototype._formatYear = function () {
        var yearElement = this.shadowRoot.getElementById("year");
        this.year = yearElement.value;
    };
    HaDateInput.prototype._formatMonth = function () {
        var monthElement = this.shadowRoot.getElementById("month");
        this.month = ("0" + monthElement.value).slice(-2);
    };
    HaDateInput.prototype._formatDay = function () {
        var dayElement = this.shadowRoot.getElementById("day");
        this.day = ("0" + dayElement.value).slice(-2);
    };
    Object.defineProperty(HaDateInput.prototype, "value", {
        get: function () {
            return this.year + "-" + this.month + "-" + this.day;
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HaDateInput.prototype, "year", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HaDateInput.prototype, "month", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HaDateInput.prototype, "day", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])({ type: Boolean })
    ], HaDateInput.prototype, "disabled", void 0);
    HaDateInput = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("ha-date-input")
    ], HaDateInput);
    return HaDateInput;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/ha-paper-icon-button-arrow-next.ts":
/*!***********************************************************!*\
  !*** ./src/components/ha-paper-icon-button-arrow-next.ts ***!
  \***********************************************************/
/*! exports provided: HaPaperIconButtonArrowNext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HaPaperIconButtonArrowNext", function() { return HaPaperIconButtonArrowNext; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");


var paperIconButtonClass = customElements.get("paper-icon-button");
var HaPaperIconButtonArrowNext = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HaPaperIconButtonArrowNext, _super);
    function HaPaperIconButtonArrowNext() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HaPaperIconButtonArrowNext.prototype.connectedCallback = function () {
        var _this = this;
        _super.prototype.connectedCallback.call(this);
        // wait to check for direction since otherwise direction is wrong even though top level is RTL
        setTimeout(function () {
            _this.icon =
                window.getComputedStyle(_this).direction === "ltr"
                    ? "hass:arrow-right"
                    : "hass:arrow-left";
        }, 100);
    };
    return HaPaperIconButtonArrowNext;
}(paperIconButtonClass));

customElements.define("ha-paper-icon-button-arrow-next", HaPaperIconButtonArrowNext);


/***/ }),

/***/ "./src/components/ha-relative-time.js":
/*!********************************************!*\
  !*** ./src/components/ha-relative-time.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _polymer_polymer_lib_legacy_polymer_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/polymer/lib/legacy/polymer.dom */ "./node_modules/@polymer/polymer/lib/legacy/polymer.dom.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/* harmony import */ var _common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/datetime/relative_time */ "./src/common/datetime/relative_time.ts");
/* harmony import */ var _mixins_localize_mixin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mixins/localize-mixin */ "./src/mixins/localize-mixin.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





/*
 * @appliesMixin LocalizeMixin
 */

var HaRelativeTime =
/*#__PURE__*/
function (_LocalizeMixin) {
  _inherits(HaRelativeTime, _LocalizeMixin);

  _createClass(HaRelativeTime, null, [{
    key: "properties",
    get: function get() {
      return {
        hass: Object,
        datetime: {
          type: String,
          observer: "datetimeChanged"
        },
        datetimeObj: {
          type: Object,
          observer: "datetimeObjChanged"
        },
        parsedDateTime: Object
      };
    }
  }]);

  function HaRelativeTime() {
    var _this;

    _classCallCheck(this, HaRelativeTime);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(HaRelativeTime).call(this));
    _this.updateRelative = _this.updateRelative.bind(_assertThisInitialized(_this));
    return _this;
  }

  _createClass(HaRelativeTime, [{
    key: "connectedCallback",
    value: function connectedCallback() {
      _get(_getPrototypeOf(HaRelativeTime.prototype), "connectedCallback", this).call(this); // update every 60 seconds


      this.updateInterval = setInterval(this.updateRelative, 60000);
    }
  }, {
    key: "disconnectedCallback",
    value: function disconnectedCallback() {
      _get(_getPrototypeOf(HaRelativeTime.prototype), "disconnectedCallback", this).call(this);

      clearInterval(this.updateInterval);
    }
  }, {
    key: "datetimeChanged",
    value: function datetimeChanged(newVal) {
      this.parsedDateTime = newVal ? new Date(newVal) : null;
      this.updateRelative();
    }
  }, {
    key: "datetimeObjChanged",
    value: function datetimeObjChanged(newVal) {
      this.parsedDateTime = newVal;
      this.updateRelative();
    }
  }, {
    key: "updateRelative",
    value: function updateRelative() {
      var root = Object(_polymer_polymer_lib_legacy_polymer_dom__WEBPACK_IMPORTED_MODULE_0__["dom"])(this);

      if (!this.parsedDateTime) {
        root.innerHTML = this.localize("ui.components.relative_time.never");
      } else {
        root.innerHTML = Object(_common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_2__["default"])(this.parsedDateTime, this.localize);
      }
    }
  }]);

  return HaRelativeTime;
}(Object(_mixins_localize_mixin__WEBPACK_IMPORTED_MODULE_3__["default"])(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__["PolymerElement"]));

customElements.define("ha-relative-time", HaRelativeTime);

/***/ }),

/***/ "./src/data/alarm_control_panel.ts":
/*!*****************************************!*\
  !*** ./src/data/alarm_control_panel.ts ***!
  \*****************************************/
/*! exports provided: FORMAT_TEXT, FORMAT_NUMBER, callAlarmAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FORMAT_TEXT", function() { return FORMAT_TEXT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FORMAT_NUMBER", function() { return FORMAT_NUMBER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "callAlarmAction", function() { return callAlarmAction; });
var FORMAT_TEXT = "text";
var FORMAT_NUMBER = "number";
var callAlarmAction = function (hass, entity, action, code) {
    hass.callService("alarm_control_panel", "alarm_" + action, {
        entity_id: entity,
        code: code,
    });
};


/***/ }),

/***/ "./src/data/area_registry.ts":
/*!***********************************!*\
  !*** ./src/data/area_registry.ts ***!
  \***********************************/
/*! exports provided: createAreaRegistryEntry, updateAreaRegistryEntry, deleteAreaRegistryEntry, subscribeAreaRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createAreaRegistryEntry", function() { return createAreaRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateAreaRegistryEntry", function() { return updateAreaRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteAreaRegistryEntry", function() { return deleteAreaRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeAreaRegistry", function() { return subscribeAreaRegistry; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! home-assistant-js-websocket */ "./node_modules/home-assistant-js-websocket/dist/haws.es.js");
/* harmony import */ var _common_string_compare__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/string/compare */ "./src/common/string/compare.ts");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/util/debounce */ "./src/common/util/debounce.ts");




var createAreaRegistryEntry = function (hass, values) {
    return hass.callWS(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ type: "config/area_registry/create" }, values));
};
var updateAreaRegistryEntry = function (hass, areaId, updates) {
    return hass.callWS(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ type: "config/area_registry/update", area_id: areaId }, updates));
};
var deleteAreaRegistryEntry = function (hass, areaId) {
    return hass.callWS({
        type: "config/area_registry/delete",
        area_id: areaId,
    });
};
var fetchAreaRegistry = function (conn) {
    return conn
        .sendMessagePromise({
        type: "config/area_registry/list",
    })
        .then(function (areas) { return areas.sort(function (ent1, ent2) { return Object(_common_string_compare__WEBPACK_IMPORTED_MODULE_2__["compare"])(ent1.name, ent2.name); }); });
};
var subscribeAreaRegistryUpdates = function (conn, store) {
    return conn.subscribeEvents(Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_3__["debounce"])(function () {
        return fetchAreaRegistry(conn).then(function (areas) { return store.setState(areas, true); });
    }, 500, true), "area_registry_updated");
};
var subscribeAreaRegistry = function (conn, onChange) {
    return Object(home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__["createCollection"])("_areaRegistry", fetchAreaRegistry, subscribeAreaRegistryUpdates, conn, onChange);
};


/***/ }),

/***/ "./src/data/device_registry.ts":
/*!*************************************!*\
  !*** ./src/data/device_registry.ts ***!
  \*************************************/
/*! exports provided: updateDeviceRegistryEntry, subscribeDeviceRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateDeviceRegistryEntry", function() { return updateDeviceRegistryEntry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeDeviceRegistry", function() { return subscribeDeviceRegistry; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! home-assistant-js-websocket */ "./node_modules/home-assistant-js-websocket/dist/haws.es.js");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/util/debounce */ "./src/common/util/debounce.ts");



var updateDeviceRegistryEntry = function (hass, deviceId, updates) {
    return hass.callWS(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ type: "config/device_registry/update", device_id: deviceId }, updates));
};
var fetchDeviceRegistry = function (conn) {
    return conn.sendMessagePromise({
        type: "config/device_registry/list",
    });
};
var subscribeDeviceRegistryUpdates = function (conn, store) {
    return conn.subscribeEvents(Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_2__["debounce"])(function () {
        return fetchDeviceRegistry(conn).then(function (devices) {
            return store.setState(devices, true);
        });
    }, 500, true), "device_registry_updated");
};
var subscribeDeviceRegistry = function (conn, onChange) {
    return Object(home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__["createCollection"])("_dr", fetchDeviceRegistry, subscribeDeviceRegistryUpdates, conn, onChange);
};


/***/ }),

/***/ "./src/data/entity.ts":
/*!****************************!*\
  !*** ./src/data/entity.ts ***!
  \****************************/
/*! exports provided: UNAVAILABLE, ENTITY_COMPONENT_DOMAINS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UNAVAILABLE", function() { return UNAVAILABLE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ENTITY_COMPONENT_DOMAINS", function() { return ENTITY_COMPONENT_DOMAINS; });
var UNAVAILABLE = "unavailable";
var ENTITY_COMPONENT_DOMAINS = [
    "air_quality",
    "alarm_control_panel",
    "alert",
    "automation",
    "binary_sensor",
    "calendar",
    "camera",
    "counter",
    "cover",
    "dominos",
    "fan",
    "geo_location",
    "group",
    "history_graph",
    "image_processing",
    "input_boolean",
    "input_datetime",
    "input_number",
    "input_select",
    "input_text",
    "light",
    "lock",
    "mailbox",
    "media_player",
    "person",
    "plant",
    "remember_the_milk",
    "remote",
    "scene",
    "script",
    "sensor",
    "switch",
    "timer",
    "utility_meter",
    "vacuum",
    "weather",
    "wink",
    "zha",
    "zwave",
];


/***/ }),

/***/ "./src/data/input_datetime.ts":
/*!************************************!*\
  !*** ./src/data/input_datetime.ts ***!
  \************************************/
/*! exports provided: setInputDateTimeValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setInputDateTimeValue", function() { return setInputDateTimeValue; });
var setInputDateTimeValue = function (hass, entityId, time, date) {
    if (time === void 0) { time = undefined; }
    if (date === void 0) { date = undefined; }
    var param = { entity_id: entityId, time: time, date: date };
    hass.callService(entityId.split(".", 1)[0], "set_datetime", param);
};


/***/ }),

/***/ "./src/data/input_text.ts":
/*!********************************!*\
  !*** ./src/data/input_text.ts ***!
  \********************************/
/*! exports provided: setValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setValue", function() { return setValue; });
var setValue = function (hass, entity, value) {
    return hass.callService(entity.split(".", 1)[0], "set_value", {
        value: value,
        entity_id: entity,
    });
};


/***/ }),

/***/ "./src/data/light.ts":
/*!***************************!*\
  !*** ./src/data/light.ts ***!
  \***************************/
/*! exports provided: SUPPORT_BRIGHTNESS, SUPPORT_COLOR_TEMP, SUPPORT_EFFECT, SUPPORT_FLASH, SUPPORT_COLOR, SUPPORT_TRANSITION, SUPPORT_WHITE_VALUE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_BRIGHTNESS", function() { return SUPPORT_BRIGHTNESS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_COLOR_TEMP", function() { return SUPPORT_COLOR_TEMP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_EFFECT", function() { return SUPPORT_EFFECT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_FLASH", function() { return SUPPORT_FLASH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_COLOR", function() { return SUPPORT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_TRANSITION", function() { return SUPPORT_TRANSITION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SUPPORT_WHITE_VALUE", function() { return SUPPORT_WHITE_VALUE; });
var SUPPORT_BRIGHTNESS = 1;
var SUPPORT_COLOR_TEMP = 2;
var SUPPORT_EFFECT = 4;
var SUPPORT_FLASH = 8;
var SUPPORT_COLOR = 16;
var SUPPORT_TRANSITION = 32;
var SUPPORT_WHITE_VALUE = 128;


/***/ }),

/***/ "./src/data/lovelace.ts":
/*!******************************!*\
  !*** ./src/data/lovelace.ts ***!
  \******************************/
/*! exports provided: fetchConfig, saveConfig, subscribeLovelaceUpdates, getLovelaceCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchConfig", function() { return fetchConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveConfig", function() { return saveConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeLovelaceUpdates", function() { return subscribeLovelaceUpdates; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLovelaceCollection", function() { return getLovelaceCollection; });
/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ "./node_modules/home-assistant-js-websocket/dist/haws.es.js");

var fetchConfig = function (conn, force) {
    return conn.sendMessagePromise({
        type: "lovelace/config",
        force: force,
    });
};
var saveConfig = function (hass, config) {
    return hass.callWS({
        type: "lovelace/config/save",
        config: config,
    });
};
var subscribeLovelaceUpdates = function (conn, onChange) { return conn.subscribeEvents(onChange, "lovelace_updated"); };
var getLovelaceCollection = function (conn) {
    return Object(home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__["getCollection"])(conn, "_lovelace", function (conn2) { return fetchConfig(conn2, false); }, function (_conn, store) {
        return subscribeLovelaceUpdates(conn, function () {
            return fetchConfig(conn, false).then(function (config) { return store.setState(config, true); });
        });
    });
};


/***/ }),

/***/ "./src/data/shopping-list.ts":
/*!***********************************!*\
  !*** ./src/data/shopping-list.ts ***!
  \***********************************/
/*! exports provided: fetchItems, updateItem, clearItems, addItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchItems", function() { return fetchItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateItem", function() { return updateItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearItems", function() { return clearItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addItem", function() { return addItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var fetchItems = function (hass) {
    return hass.callWS({
        type: "shopping_list/items",
    });
};
var updateItem = function (hass, itemId, item) {
    return hass.callWS(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ type: "shopping_list/items/update", item_id: itemId }, item));
};
var clearItems = function (hass) {
    return hass.callWS({
        type: "shopping_list/items/clear",
    });
};
var addItem = function (hass, name) {
    return hass.callWS({
        type: "shopping_list/items/add",
        name: name,
    });
};


/***/ }),

/***/ "./src/data/ws-templates.ts":
/*!**********************************!*\
  !*** ./src/data/ws-templates.ts ***!
  \**********************************/
/*! exports provided: subscribeRenderTemplate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscribeRenderTemplate", function() { return subscribeRenderTemplate; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var subscribeRenderTemplate = function (conn, onChange, params) {
    return conn.subscribeMessage(function (msg) { return onChange(msg.result); }, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ type: "render_template" }, params));
};


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-alarm-panel-card.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-alarm-panel-card.ts ***!
  \***********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_label_badge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-label-badge */ "./src/components/ha-label-badge.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/alarm_control_panel */ "./src/data/alarm_control_panel.ts");







var ICONS = {
    armed_away: "hass:shield-lock",
    armed_custom_bypass: "hass:security",
    armed_home: "hass:shield-home",
    armed_night: "hass:shield-home",
    disarmed: "hass:shield-check",
    pending: "hass:shield-outline",
    triggered: "hass:bell-ring",
};
var BUTTONS = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "", "0", "clear"];
var HuiAlarmPanelCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiAlarmPanelCard, _super);
    function HuiAlarmPanelCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiAlarmPanelCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-alarm-panel-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-alarm-panel-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-alarm-panel-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-alarm-panel-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-alarm-panel-card-editor")];
                }
            });
        });
    };
    HuiAlarmPanelCard.getStubConfig = function () {
        return { states: ["arm_home", "arm_away"], entity: "" };
    };
    HuiAlarmPanelCard.prototype.getCardSize = function () {
        if (!this._config || !this.hass) {
            return 0;
        }
        var stateObj = this.hass.states[this._config.entity];
        return !stateObj || stateObj.attributes.code_format !== _data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__["FORMAT_NUMBER"]
            ? 3
            : 8;
    };
    HuiAlarmPanelCard.prototype.setConfig = function (config) {
        if (!config ||
            !config.entity ||
            config.entity.split(".")[0] !== "alarm_control_panel") {
            throw new Error("Invalid card configuration");
        }
        var defaults = {
            states: ["arm_away", "arm_home"],
        };
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, defaults), config);
        this._code = "";
    };
    HuiAlarmPanelCard.prototype.shouldUpdate = function (changedProps) {
        if (changedProps.has("_config") || changedProps.has("_code")) {
            return true;
        }
        var oldHass = changedProps.get("hass");
        if (oldHass) {
            return (oldHass.states[this._config.entity] !==
                this.hass.states[this._config.entity]);
        }
        return true;
    };
    HuiAlarmPanelCard.prototype.render = function () {
        var _a;
        var _this = this;
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_10 || (templateObject_10 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card\n        .header=\"", "\"\n      >\n        <ha-label-badge\n          class=\"", "\"\n          .icon=\"", "\"\n          .label=\"", "\"\n        ></ha-label-badge>\n        <div id=\"armActions\" class=\"actions\">\n          ", "\n        </div>\n        ", "\n        ", "\n      </ha-card>\n    "], ["\n      <ha-card\n        .header=\"",
            "\"\n      >\n        <ha-label-badge\n          class=\"", "\"\n          .icon=\"", "\"\n          .label=\"", "\"\n        ></ha-label-badge>\n        <div id=\"armActions\" class=\"actions\">\n          ",
            "\n        </div>\n        ",
            "\n        ",
            "\n      </ha-card>\n    "])), this._config.name ||
            stateObj.attributes.friendly_name ||
            this._label(stateObj.state), Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])((_a = {}, _a[stateObj.state] = true, _a)), ICONS[stateObj.state] || "hass:shield-outline", this._stateIconLabel(stateObj.state), (stateObj.state === "disarmed"
            ? this._config.states
            : ["disarm"]).map(function (state) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <mwc-button\n                .action=\"", "\"\n                @click=\"", "\"\n                outlined\n              >\n                ", "\n              </mwc-button>\n            "], ["\n              <mwc-button\n                .action=\"", "\"\n                @click=\"", "\"\n                outlined\n              >\n                ", "\n              </mwc-button>\n            "])), state, _this._handleActionClick, _this._label(state));
        }), !stateObj.attributes.code_format
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""]))) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <paper-input\n                id=\"alarmCode\"\n                label=\"Alarm Code\"\n                type=\"password\"\n                .value=\"", "\"\n              ></paper-input>\n            "], ["\n              <paper-input\n                id=\"alarmCode\"\n                label=\"Alarm Code\"\n                type=\"password\"\n                .value=\"", "\"\n              ></paper-input>\n            "])), this._code), stateObj.attributes.code_format !== _data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__["FORMAT_NUMBER"]
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""]))) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_9 || (templateObject_9 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div id=\"keypad\">\n                ", "\n              </div>\n            "], ["\n              <div id=\"keypad\">\n                ",
            "\n              </div>\n            "])), BUTTONS.map(function (value) {
            return value === ""
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                        <mwc-button disabled></mwc-button>\n                      "], ["\n                        <mwc-button disabled></mwc-button>\n                      "]))) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                        <mwc-button\n                          .value=\"", "\"\n                          @click=\"", "\"\n                          dense\n                        >\n                          ", "\n                        </mwc-button>\n                      "], ["\n                        <mwc-button\n                          .value=\"", "\"\n                          @click=\"", "\"\n                          dense\n                        >\n                          ",
                "\n                        </mwc-button>\n                      "])), value, _this._handlePadClick, value === "clear"
                ? _this._label("clear_code")
                : value);
        })));
    };
    HuiAlarmPanelCard.prototype._stateIconLabel = function (state) {
        var stateLabel = state.split("_").pop();
        return stateLabel === "disarmed" ||
            stateLabel === "triggered" ||
            !stateLabel
            ? ""
            : stateLabel;
    };
    HuiAlarmPanelCard.prototype._label = function (state) {
        return (this.hass.localize("state.alarm_control_panel." + state) ||
            this.hass.localize("ui.card.alarm_control_panel." + state));
    };
    HuiAlarmPanelCard.prototype._handlePadClick = function (e) {
        var val = e.currentTarget.value;
        this._code = val === "clear" ? "" : this._code + val;
    };
    HuiAlarmPanelCard.prototype._handleActionClick = function (e) {
        var input = this.shadowRoot.querySelector("#alarmCode");
        var code = this._code ||
            (input && input.value && input.value.length > 0 ? input.value : "");
        Object(_data_alarm_control_panel__WEBPACK_IMPORTED_MODULE_6__["callAlarmAction"])(this.hass, this._config.entity, e.currentTarget.action, code);
        this._code = "";
    };
    Object.defineProperty(HuiAlarmPanelCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_11 || (templateObject_11 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-card {\n        padding-bottom: 16px;\n        position: relative;\n        --alarm-color-disarmed: var(--label-badge-green);\n        --alarm-color-pending: var(--label-badge-yellow);\n        --alarm-color-triggered: var(--label-badge-red);\n        --alarm-color-armed: var(--label-badge-red);\n        --alarm-color-autoarm: rgba(0, 153, 255, 0.1);\n        --alarm-state-color: var(--alarm-color-armed);\n        --base-unit: 15px;\n        font-size: calc(var(--base-unit));\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--alarm-state-color);\n        --label-badge-text-color: var(--alarm-state-color);\n        --label-badge-background-color: var(--paper-card-background-color);\n        color: var(--alarm-state-color);\n        position: absolute;\n        right: 12px;\n        top: 12px;\n      }\n\n      .disarmed {\n        --alarm-state-color: var(--alarm-color-disarmed);\n      }\n\n      .triggered {\n        --alarm-state-color: var(--alarm-color-triggered);\n        animation: pulse 1s infinite;\n      }\n\n      .arming {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      .pending {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      @keyframes pulse {\n        0% {\n          --ha-label-badge-color: var(--alarm-state-color);\n        }\n        100% {\n          --ha-label-badge-color: rgba(255, 153, 0, 0.3);\n        }\n      }\n\n      paper-input {\n        margin: 0 auto 8px;\n        max-width: 150px;\n        font-size: calc(var(--base-unit));\n        text-align: center;\n      }\n\n      .state {\n        margin-left: 16px;\n        font-size: calc(var(--base-unit) * 0.9);\n        position: relative;\n        bottom: 16px;\n        color: var(--alarm-state-color);\n        animation: none;\n      }\n\n      #keypad {\n        display: flex;\n        justify-content: center;\n        flex-wrap: wrap;\n        margin: auto;\n        width: 300px;\n      }\n\n      #keypad mwc-button {\n        margin-bottom: 5%;\n        width: 30%;\n        padding: calc(var(--base-unit));\n        font-size: calc(var(--base-unit) * 1.1);\n        box-sizing: border-box;\n      }\n\n      .actions {\n        margin: 0 8px;\n        padding-top: 20px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n        font-size: calc(var(--base-unit) * 1);\n      }\n\n      .actions mwc-button {\n        min-width: calc(var(--base-unit) * 9);\n        margin: 0 4px 4px;\n      }\n\n      mwc-button#disarm {\n        color: var(--google-red-500);\n      }\n    "], ["\n      ha-card {\n        padding-bottom: 16px;\n        position: relative;\n        --alarm-color-disarmed: var(--label-badge-green);\n        --alarm-color-pending: var(--label-badge-yellow);\n        --alarm-color-triggered: var(--label-badge-red);\n        --alarm-color-armed: var(--label-badge-red);\n        --alarm-color-autoarm: rgba(0, 153, 255, 0.1);\n        --alarm-state-color: var(--alarm-color-armed);\n        --base-unit: 15px;\n        font-size: calc(var(--base-unit));\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--alarm-state-color);\n        --label-badge-text-color: var(--alarm-state-color);\n        --label-badge-background-color: var(--paper-card-background-color);\n        color: var(--alarm-state-color);\n        position: absolute;\n        right: 12px;\n        top: 12px;\n      }\n\n      .disarmed {\n        --alarm-state-color: var(--alarm-color-disarmed);\n      }\n\n      .triggered {\n        --alarm-state-color: var(--alarm-color-triggered);\n        animation: pulse 1s infinite;\n      }\n\n      .arming {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      .pending {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      @keyframes pulse {\n        0% {\n          --ha-label-badge-color: var(--alarm-state-color);\n        }\n        100% {\n          --ha-label-badge-color: rgba(255, 153, 0, 0.3);\n        }\n      }\n\n      paper-input {\n        margin: 0 auto 8px;\n        max-width: 150px;\n        font-size: calc(var(--base-unit));\n        text-align: center;\n      }\n\n      .state {\n        margin-left: 16px;\n        font-size: calc(var(--base-unit) * 0.9);\n        position: relative;\n        bottom: 16px;\n        color: var(--alarm-state-color);\n        animation: none;\n      }\n\n      #keypad {\n        display: flex;\n        justify-content: center;\n        flex-wrap: wrap;\n        margin: auto;\n        width: 300px;\n      }\n\n      #keypad mwc-button {\n        margin-bottom: 5%;\n        width: 30%;\n        padding: calc(var(--base-unit));\n        font-size: calc(var(--base-unit) * 1.1);\n        box-sizing: border-box;\n      }\n\n      .actions {\n        margin: 0 8px;\n        padding-top: 20px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n        font-size: calc(var(--base-unit) * 1);\n      }\n\n      .actions mwc-button {\n        min-width: calc(var(--base-unit) * 9);\n        margin: 0 4px 4px;\n      }\n\n      mwc-button#disarm {\n        color: var(--google-red-500);\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiAlarmPanelCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiAlarmPanelCard.prototype, "_config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiAlarmPanelCard.prototype, "_code", void 0);
    HuiAlarmPanelCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-alarm-panel-card")
    ], HuiAlarmPanelCard);
    return HuiAlarmPanelCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-conditional-card.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-conditional-card.ts ***!
  \***********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lovelace/common/validate-condition */ "./src/panels/lovelace/common/validate-condition.ts");




var HuiConditionalCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiConditionalCard, _super);
    function HuiConditionalCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiConditionalCard.prototype.setConfig = function (config) {
        if (!config.card ||
            !config.conditions ||
            !Array.isArray(config.conditions) ||
            !Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_3__["validateConditionalConfig"])(config.conditions)) {
            throw new Error("Error in card configuration.");
        }
        if (this._card && this._card.parentElement) {
            this.removeChild(this._card);
        }
        this._config = config;
        this._card = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_1__["createCardElement"])(config.card);
        this.update();
    };
    Object.defineProperty(HuiConditionalCard.prototype, "hass", {
        set: function (hass) {
            this._hass = hass;
            this.update();
        },
        enumerable: true,
        configurable: true
    });
    HuiConditionalCard.prototype.getCardSize = function () {
        return Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_2__["computeCardSize"])(this._card);
    };
    HuiConditionalCard.prototype.update = function () {
        if (!this._card || !this._hass) {
            return;
        }
        var visible = this._config && Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_3__["checkConditionsMet"])(this._config.conditions, this._hass);
        if (visible) {
            this._card.hass = this._hass;
            if (!this._card.parentElement) {
                this.appendChild(this._card);
            }
        }
        else if (this._card.parentElement) {
            this.removeChild(this._card);
        }
        // This will hide the complete card so it won't get styled by parent
        this.style.setProperty("display", visible ? "" : "none");
    };
    return HuiConditionalCard;
}(HTMLElement));
customElements.define("hui-conditional-card", HuiConditionalCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-entities-card.ts":
/*!********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-entities-card.ts ***!
  \********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_entities_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-entities-toggle */ "./src/panels/lovelace/components/hui-entities-toggle.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_create_row_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/create-row-element */ "./src/panels/lovelace/common/create-row-element.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");










var HuiEntitiesCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiEntitiesCard, _super);
    function HuiEntitiesCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiEntitiesCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-entities-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-entities-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-entities-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-entities-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-entities-card-editor")];
                }
            });
        });
    };
    HuiEntitiesCard.getStubConfig = function () {
        return { entities: [] };
    };
    Object.defineProperty(HuiEntitiesCard.prototype, "hass", {
        set: function (hass) {
            this._hass = hass;
            this.shadowRoot.querySelectorAll("#states > div > *").forEach(function (element) {
                element.hass = hass;
            });
            var entitiesToggle = this.shadowRoot.querySelector("hui-entities-toggle");
            if (entitiesToggle) {
                entitiesToggle.hass = hass;
            }
        },
        enumerable: true,
        configurable: true
    });
    HuiEntitiesCard.prototype.getCardSize = function () {
        if (!this._config) {
            return 0;
        }
        // +1 for the header
        return (this._config.title ? 1 : 0) + this._config.entities.length;
    };
    HuiEntitiesCard.prototype.setConfig = function (config) {
        var entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_6__["processConfigEntities"])(config.entities);
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ theme: "default" }, config);
        this._configEntities = entities;
    };
    HuiEntitiesCard.prototype.updated = function (changedProperties) {
        _super.prototype.updated.call(this, changedProperties);
        if (this._hass && this._config) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_9__["default"])(this, this._hass.themes, this._config.theme);
        }
    };
    HuiEntitiesCard.prototype.render = function () {
        var _this = this;
        if (!this._config || !this._hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var _a = this._config, show_header_toggle = _a.show_header_toggle, title = _a.title;
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card>\n        ", "\n        <div id=\"states\" class=\"card-content\">\n          ", "\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card>\n        ",
            "\n        <div id=\"states\" class=\"card-content\">\n          ",
            "\n        </div>\n      </ha-card>\n    "])), !title && !show_header_toggle
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""]))) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div class=\"card-header\">\n                <div class=\"name\">", "</div>\n                ", "\n              </div>\n            "], ["\n              <div class=\"card-header\">\n                <div class=\"name\">", "</div>\n                ",
            "\n              </div>\n            "])), title, show_header_toggle === false
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""]))) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                      <hui-entities-toggle\n                        .hass=\"", "\"\n                        .entities=\"", "\"\n                      ></hui-entities-toggle>\n                    "], ["\n                      <hui-entities-toggle\n                        .hass=\"", "\"\n                        .entities=\"",
            "\"\n                      ></hui-entities-toggle>\n                    "])), this._hass, this._configEntities.map(function (conf) { return conf.entity; }))), this._configEntities.map(function (entityConf) {
            return _this.renderEntity(entityConf);
        }));
    };
    Object.defineProperty(HuiEntitiesCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .card-header {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .card-header .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .card-header hui-entities-toggle {\n        margin: -4px 0;\n      }\n\n      #states > * {\n        margin: 8px 0;\n      }\n\n      #states > div > * {\n        overflow: hidden;\n      }\n\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    "], ["\n      .card-header {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .card-header .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .card-header hui-entities-toggle {\n        margin: -4px 0;\n      }\n\n      #states > * {\n        margin: 8px 0;\n      }\n\n      #states > div > * {\n        overflow: hidden;\n      }\n\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiEntitiesCard.prototype.renderEntity = function (entityConf) {
        var _this = this;
        var element = Object(_common_create_row_element__WEBPACK_IMPORTED_MODULE_7__["createRowElement"])(entityConf);
        if (this._hass) {
            element.hass = this._hass;
        }
        if (entityConf.entity &&
            !_common_const__WEBPACK_IMPORTED_MODULE_5__["DOMAINS_HIDE_MORE_INFO"].includes(Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_8__["computeDomain"])(entityConf.entity))) {
            element.classList.add("state-card-dialog");
            element.addEventListener("click", function () { return _this._handleClick(entityConf); });
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <div>", "</div>\n    "], ["\n      <div>", "</div>\n    "])), element);
    };
    HuiEntitiesCard.prototype._handleClick = function (entityConf) {
        var entityId = entityConf.entity;
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_4__["fireEvent"])(this, "hass-more-info", { entityId: entityId });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiEntitiesCard.prototype, "_config", void 0);
    HuiEntitiesCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-entities-card")
    ], HuiEntitiesCard);
    return HuiEntitiesCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-entity-button-card.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-entity-button-card.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var _material_mwc_ripple__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material/mwc-ripple */ "./node_modules/@material/mwc-ripple/mwc-ripple.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ "./src/common/entity/compute_state_domain.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");















var HuiEntityButtonCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiEntityButtonCard, _super);
    function HuiEntityButtonCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiEntityButtonCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-entity-button-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e(10), __webpack_require__.e("hui-entity-button-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-entity-button-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-entity-button-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-entity-button-card-editor")];
                }
            });
        });
    };
    HuiEntityButtonCard.getStubConfig = function () {
        return {
            tap_action: { action: "toggle" },
            hold_action: { action: "more-info" },
            show_icon: true,
            show_name: true,
        };
    };
    HuiEntityButtonCard.prototype.getCardSize = function () {
        return 2;
    };
    HuiEntityButtonCard.prototype.setConfig = function (config) {
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_6__["isValidEntityId"])(config.entity)) {
            throw new Error("Invalid Entity");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ theme: "default", hold_action: { action: "more-info" }, show_icon: true, show_name: true }, config);
        if (_common_const__WEBPACK_IMPORTED_MODULE_14__["DOMAINS_TOGGLE"].has(Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_11__["computeDomain"])(config.entity))) {
            this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ tap_action: {
                    action: "toggle",
                } }, this._config);
        }
        else {
            this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ tap_action: {
                    action: "more-info",
                } }, this._config);
        }
    };
    HuiEntityButtonCard.prototype.shouldUpdate = function (changedProps) {
        if (changedProps.has("_config")) {
            return true;
        }
        var oldHass = changedProps.get("hass");
        if (oldHass) {
            return (oldHass.states[this._config.entity] !==
                this.hass.states[this._config.entity]);
        }
        return true;
    };
    HuiEntityButtonCard.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      >\n        ", "\n        ", "\n        <mwc-ripple></mwc-ripple>\n      </ha-card>\n    "], ["\n      <ha-card\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      >\n        ",
            "\n        ",
            "\n        <mwc-ripple></mwc-ripple>\n      </ha-card>\n    "])), this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__["longPress"])(), this._config.show_icon
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-icon\n                data-domain=\"", "\"\n                data-state=\"", "\"\n                .icon=\"", "\"\n                style=\"", "\"\n              ></ha-icon>\n            "], ["\n              <ha-icon\n                data-domain=\"", "\"\n                data-state=\"", "\"\n                .icon=\"", "\"\n                style=\"",
                "\"\n              ></ha-icon>\n            "])), Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_8__["computeStateDomain"])(stateObj), stateObj.state, this._config.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_7__["stateIcon"])(stateObj), Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__["styleMap"])({
                filter: this._computeBrightness(stateObj),
                color: this._computeColor(stateObj),
                height: this._config.icon_height
                    ? this._config.icon_height
                    : "auto",
            })) : "", this._config.show_name
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <span>\n                ", "\n              </span>\n            "], ["\n              <span>\n                ", "\n              </span>\n            "])), this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_9__["computeStateName"])(stateObj)) : "");
    };
    HuiEntityButtonCard.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (!this._config || !this.hass) {
            return;
        }
        var oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_10__["default"])(this, this.hass.themes, this._config.theme);
        }
    };
    Object.defineProperty(HuiEntityButtonCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-card {\n        cursor: pointer;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n        padding: 4% 0;\n        font-size: 1.2rem;\n      }\n\n      ha-icon {\n        width: 40%;\n        height: auto;\n        color: var(--paper-item-icon-color, #44739e);\n      }\n\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    "], ["\n      ha-card {\n        cursor: pointer;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n        padding: 4% 0;\n        font-size: 1.2rem;\n      }\n\n      ha-icon {\n        width: 40%;\n        height: auto;\n        color: var(--paper-item-icon-color, #44739e);\n      }\n\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiEntityButtonCard.prototype._computeBrightness = function (stateObj) {
        if (!stateObj.attributes.brightness) {
            return "";
        }
        var brightness = stateObj.attributes.brightness;
        return "brightness(" + (brightness + 245) / 5 + "%)";
    };
    HuiEntityButtonCard.prototype._computeColor = function (stateObj) {
        if (!stateObj.attributes.hs_color) {
            return "";
        }
        var _a = stateObj.attributes.hs_color, hue = _a[0], sat = _a[1];
        if (sat <= 10) {
            return "";
        }
        return "hsl(" + hue + ", 100%, " + (100 - sat / 2) + "%)";
    };
    HuiEntityButtonCard.prototype._handleTap = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, this._config, false);
    };
    HuiEntityButtonCard.prototype._handleHold = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, this._config, true);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiEntityButtonCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiEntityButtonCard.prototype, "_config", void 0);
    HuiEntityButtonCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-entity-button-card")
    ], HuiEntityButtonCard);
    return HuiEntityButtonCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-entity-filter-card.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-entity-filter-card.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_evaluate_filter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/evaluate-filter */ "./src/panels/lovelace/common/evaluate-filter.ts");




var EntityFilterCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(EntityFilterCard, _super);
    function EntityFilterCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    EntityFilterCard.prototype.getCardSize = function () {
        return this._element ? this._element.getCardSize() : 1;
    };
    EntityFilterCard.prototype.setConfig = function (config) {
        if (!config.entities || !Array.isArray(config.entities)) {
            throw new Error("entities must be specified.");
        }
        if (!(config.state_filter && Array.isArray(config.state_filter)) &&
            !config.entities.every(function (entity) {
                return typeof entity === "object" &&
                    entity.state_filter &&
                    Array.isArray(entity.state_filter);
            })) {
            throw new Error("Incorrect filter config.");
        }
        this._config = config;
        this._configEntities = undefined;
        this._baseCardConfig = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ type: "entities", entities: [] }, this._config.card);
        if (this.lastChild) {
            this.removeChild(this.lastChild);
            this._element = undefined;
        }
    };
    Object.defineProperty(EntityFilterCard.prototype, "hass", {
        set: function (hass) {
            var _this = this;
            if (!hass || !this._config) {
                return;
            }
            if (!this.haveEntitiesChanged(hass)) {
                this._hass = hass;
                return;
            }
            this._hass = hass;
            if (!this._configEntities) {
                this._configEntities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_2__["processConfigEntities"])(this._config.entities);
            }
            var entitiesList = this._configEntities.filter(function (entityConf) {
                var stateObj = hass.states[entityConf.entity];
                if (!stateObj) {
                    return false;
                }
                if (entityConf.state_filter) {
                    for (var _i = 0, _a = entityConf.state_filter; _i < _a.length; _i++) {
                        var filter = _a[_i];
                        if (Object(_common_evaluate_filter__WEBPACK_IMPORTED_MODULE_3__["evaluateFilter"])(stateObj, filter)) {
                            return true;
                        }
                    }
                }
                else {
                    for (var _b = 0, _c = _this._config.state_filter; _b < _c.length; _b++) {
                        var filter = _c[_b];
                        if (Object(_common_evaluate_filter__WEBPACK_IMPORTED_MODULE_3__["evaluateFilter"])(stateObj, filter)) {
                            return true;
                        }
                    }
                }
                return false;
            });
            if (entitiesList.length === 0 && this._config.show_empty === false) {
                this.style.display = "none";
                return;
            }
            var element = this._cardElement();
            if (!element) {
                return;
            }
            if (element.tagName !== "HUI-ERROR-CARD") {
                var isSame = this._oldEntities &&
                    entitiesList.length === this._oldEntities.length &&
                    entitiesList.every(function (entity, idx) { return entity === _this._oldEntities[idx]; });
                if (!isSame) {
                    this._oldEntities = entitiesList;
                    element.setConfig(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, this._baseCardConfig), { entities: entitiesList }));
                }
                element.isPanel = this.isPanel;
                element.hass = hass;
            }
            // Attach element if it has never been attached.
            if (!this.lastChild) {
                this.appendChild(element);
            }
            this.style.display = "block";
        },
        enumerable: true,
        configurable: true
    });
    EntityFilterCard.prototype.haveEntitiesChanged = function (hass) {
        if (!this._hass) {
            return true;
        }
        if (!this._configEntities) {
            return true;
        }
        for (var _i = 0, _a = this._configEntities; _i < _a.length; _i++) {
            var config = _a[_i];
            if (this._hass.states[config.entity] !== hass.states[config.entity] ||
                this._hass.localize !== hass.localize) {
                return true;
            }
        }
        return false;
    };
    EntityFilterCard.prototype._cardElement = function () {
        if (!this._element && this._config) {
            var element = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_1__["createCardElement"])(this._baseCardConfig);
            this._element = element;
        }
        return this._element;
    };
    return EntityFilterCard;
}(HTMLElement));
customElements.define("hui-entity-filter-card", EntityFilterCard);


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-error-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-error-card.ts ***!
  \*****************************************************/
/*! exports provided: createErrorCardElement, createErrorCardConfig, HuiErrorCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createErrorCardElement", function() { return createErrorCardElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createErrorCardConfig", function() { return createErrorCardConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiErrorCard", function() { return HuiErrorCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


var createErrorCardElement = function (config) {
    var el = document.createElement("hui-error-card");
    el.setConfig(config);
    return el;
};
var createErrorCardConfig = function (error, origConfig) { return ({
    type: "error",
    error: error,
    origConfig: origConfig,
}); };
var HuiErrorCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiErrorCard, _super);
    function HuiErrorCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiErrorCard.prototype.getCardSize = function () {
        return 4;
    };
    HuiErrorCard.prototype.setConfig = function (config) {
        this._config = config;
    };
    HuiErrorCard.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ", "\n      <pre>", "</pre>\n    "], ["\n      ", "\n      <pre>", "</pre>\n    "])), this._config.error, this._toStr(this._config.origConfig));
    };
    Object.defineProperty(HuiErrorCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: block;\n        background-color: #ef5350;\n        color: white;\n        padding: 8px;\n        font-weight: 500;\n        user-select: text;\n        cursor: default;\n      }\n    "], ["\n      :host {\n        display: block;\n        background-color: #ef5350;\n        color: white;\n        padding: 8px;\n        font-weight: 500;\n        user-select: text;\n        cursor: default;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiErrorCard.prototype._toStr = function (config) {
        return JSON.stringify(config, null, 2);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiErrorCard.prototype, "_config", void 0);
    HuiErrorCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-error-card")
    ], HuiErrorCard);
    return HuiErrorCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-gauge-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-gauge-card.ts ***!
  \*****************************************************/
/*! exports provided: severityMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "severityMap", function() { return severityMap; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");










var severityMap = {
    red: "var(--label-badge-red)",
    green: "var(--label-badge-green)",
    yellow: "var(--label-badge-yellow)",
    normal: "var(--label-badge-blue)",
};
var HuiGaugeCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiGaugeCard, _super);
    function HuiGaugeCard() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._baseUnit = "50px";
        return _this;
    }
    HuiGaugeCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-gauge-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-gauge-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-gauge-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-gauge-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-gauge-card-editor")];
                }
            });
        });
    };
    HuiGaugeCard.getStubConfig = function () {
        return { entity: "" };
    };
    HuiGaugeCard.prototype.getCardSize = function () {
        return 2;
    };
    HuiGaugeCard.prototype.setConfig = function (config) {
        if (!config || !config.entity) {
            throw new Error("Invalid card configuration");
        }
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_5__["isValidEntityId"])(config.entity)) {
            throw new Error("Invalid Entity");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ min: 0, max: 100, theme: "default" }, config);
    };
    HuiGaugeCard.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        this._setBaseUnit();
    };
    HuiGaugeCard.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        var state = Number(stateObj.state);
        if (isNaN(state)) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_non_numeric", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card\n        @click=\"", "\"\n        style=", "\n      >\n        <div class=\"container\">\n          <div class=\"gauge-a\"></div>\n          <div class=\"gauge-b\"></div>\n          <div\n            class=\"gauge-c\"\n            style=", "\n          ></div>\n          <div class=\"gauge-data\">\n            <div id=\"percent\">\n              ", "\n              ", "\n            </div>\n            <div id=\"name\">\n              ", "\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card\n        @click=\"", "\"\n        style=",
            "\n      >\n        <div class=\"container\">\n          <div class=\"gauge-a\"></div>\n          <div class=\"gauge-b\"></div>\n          <div\n            class=\"gauge-c\"\n            style=",
            "\n          ></div>\n          <div class=\"gauge-data\">\n            <div id=\"percent\">\n              ", "\n              ",
            "\n            </div>\n            <div id=\"name\">\n              ", "\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    "])), this._handleClick, Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__["styleMap"])({
            "--base-unit": this._baseUnit,
        }), Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_2__["styleMap"])({
            transform: "rotate(" + this._translateTurn(state) + "turn)",
            "background-color": this._computeSeverity(state),
        }), stateObj.state, this._config.unit ||
            stateObj.attributes.unit_of_measurement ||
            "", this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__["computeStateName"])(stateObj));
    };
    HuiGaugeCard.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_9__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiGaugeCard.prototype.firstUpdated = function () {
        this._updated = true;
        this._setBaseUnit();
        this.classList.add("init");
    };
    HuiGaugeCard.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (!this._config || !this.hass) {
            return;
        }
        var oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__["default"])(this, this.hass.themes, this._config.theme);
        }
    };
    HuiGaugeCard.prototype._setBaseUnit = function () {
        if (!this.isConnected || !this._updated) {
            return;
        }
        var baseUnit = this._computeBaseUnit();
        if (baseUnit !== "0px") {
            this._baseUnit = baseUnit;
        }
    };
    HuiGaugeCard.prototype._computeSeverity = function (numberValue) {
        var sections = this._config.severity;
        if (!sections) {
            return severityMap.normal;
        }
        var sectionsArray = Object.keys(sections);
        var sortable = sectionsArray.map(function (severity) { return [
            severity,
            sections[severity],
        ]; });
        for (var _i = 0, sortable_1 = sortable; _i < sortable_1.length; _i++) {
            var severity = sortable_1[_i];
            if (severityMap[severity[0]] == null || isNaN(severity[1])) {
                return severityMap.normal;
            }
        }
        sortable.sort(function (a, b) { return a[1] - b[1]; });
        if (numberValue >= sortable[0][1] && numberValue < sortable[1][1]) {
            return severityMap[sortable[0][0]];
        }
        if (numberValue >= sortable[1][1] && numberValue < sortable[2][1]) {
            return severityMap[sortable[1][0]];
        }
        if (numberValue >= sortable[2][1]) {
            return severityMap[sortable[2][0]];
        }
        return severityMap.normal;
    };
    HuiGaugeCard.prototype._translateTurn = function (value) {
        var _a = this._config, min = _a.min, max = _a.max;
        var maxTurnValue = Math.min(Math.max(value, min), max);
        return (5 * (maxTurnValue - min)) / (max - min) / 10;
    };
    HuiGaugeCard.prototype._computeBaseUnit = function () {
        return this.clientWidth < 200 ? this.clientWidth / 5 + "px" : "50px";
    };
    HuiGaugeCard.prototype._handleClick = function () {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__["fireEvent"])(this, "hass-more-info", { entityId: this._config.entity });
    };
    Object.defineProperty(HuiGaugeCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-card {\n        height: calc(var(--base-unit) * 3);\n        position: relative;\n        cursor: pointer;\n      }\n      .container {\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        position: absolute;\n        top: calc(var(--base-unit) * 1.5);\n        left: 50%;\n        overflow: hidden;\n        text-align: center;\n        transform: translate(-50%, -50%);\n      }\n      .gauge-a {\n        z-index: 1;\n        position: absolute;\n        background-color: var(--primary-background-color);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: 0%;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-b {\n        z-index: 3;\n        position: absolute;\n        background-color: var(--paper-card-background-color);\n        width: calc(var(--base-unit) * 2.5);\n        height: calc(var(--base-unit) * 1.25);\n        top: calc(var(--base-unit) * 0.75);\n        margin-left: calc(var(--base-unit) * 0.75);\n        margin-right: auto;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-c {\n        z-index: 2;\n        position: absolute;\n        background-color: var(--label-badge-blue);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: calc(var(--base-unit) * 2);\n        margin-left: auto;\n        margin-right: auto;\n        border-radius: 0px 0px calc(var(--base-unit) * 2)\n          calc(var(--base-unit) * 2);\n        transform-origin: center top;\n      }\n      .init .gauge-c {\n        transition: all 1.3s ease-in-out;\n      }\n      .gauge-data {\n        z-index: 4;\n        color: var(--primary-text-color);\n        line-height: calc(var(--base-unit) * 0.3);\n        position: absolute;\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2.1);\n        top: calc(var(--base-unit) * 1.2);\n        margin-left: auto;\n        margin-right: auto;\n      }\n      .init .gauge-data {\n        transition: all 1s ease-out;\n      }\n      .gauge-data #percent {\n        font-size: calc(var(--base-unit) * 0.55);\n      }\n      .gauge-data #name {\n        padding-top: calc(var(--base-unit) * 0.15);\n        font-size: calc(var(--base-unit) * 0.3);\n      }\n    "], ["\n      ha-card {\n        height: calc(var(--base-unit) * 3);\n        position: relative;\n        cursor: pointer;\n      }\n      .container {\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        position: absolute;\n        top: calc(var(--base-unit) * 1.5);\n        left: 50%;\n        overflow: hidden;\n        text-align: center;\n        transform: translate(-50%, -50%);\n      }\n      .gauge-a {\n        z-index: 1;\n        position: absolute;\n        background-color: var(--primary-background-color);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: 0%;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-b {\n        z-index: 3;\n        position: absolute;\n        background-color: var(--paper-card-background-color);\n        width: calc(var(--base-unit) * 2.5);\n        height: calc(var(--base-unit) * 1.25);\n        top: calc(var(--base-unit) * 0.75);\n        margin-left: calc(var(--base-unit) * 0.75);\n        margin-right: auto;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-c {\n        z-index: 2;\n        position: absolute;\n        background-color: var(--label-badge-blue);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: calc(var(--base-unit) * 2);\n        margin-left: auto;\n        margin-right: auto;\n        border-radius: 0px 0px calc(var(--base-unit) * 2)\n          calc(var(--base-unit) * 2);\n        transform-origin: center top;\n      }\n      .init .gauge-c {\n        transition: all 1.3s ease-in-out;\n      }\n      .gauge-data {\n        z-index: 4;\n        color: var(--primary-text-color);\n        line-height: calc(var(--base-unit) * 0.3);\n        position: absolute;\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2.1);\n        top: calc(var(--base-unit) * 1.2);\n        margin-left: auto;\n        margin-right: auto;\n      }\n      .init .gauge-data {\n        transition: all 1s ease-out;\n      }\n      .gauge-data #percent {\n        font-size: calc(var(--base-unit) * 0.55);\n      }\n      .gauge-data #name {\n        padding-top: calc(var(--base-unit) * 0.15);\n        font-size: calc(var(--base-unit) * 0.3);\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiGaugeCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiGaugeCard.prototype, "_baseUnit", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiGaugeCard.prototype, "_config", void 0);
    HuiGaugeCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-gauge-card")
    ], HuiGaugeCard);
    return HuiGaugeCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-glance-card.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-glance-card.ts ***!
  \******************************************************/
/*! exports provided: HuiGlanceCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiGlanceCard", function() { return HuiGlanceCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/datetime/relative_time */ "./src/common/datetime/relative_time.ts");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");














var HuiGlanceCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiGlanceCard, _super);
    function HuiGlanceCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiGlanceCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-glance-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-glance-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-glance-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-glance-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-glance-card-editor")];
                }
            });
        });
    };
    HuiGlanceCard.getStubConfig = function () {
        return { entities: [] };
    };
    HuiGlanceCard.prototype.getCardSize = function () {
        return ((this._config.title ? 1 : 0) +
            Math.ceil(this._configEntities.length / 5));
    };
    HuiGlanceCard.prototype.setConfig = function (config) {
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ theme: "default" }, config);
        var entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_12__["processConfigEntities"])(config.entities);
        for (var _i = 0, entities_1 = entities; _i < entities_1.length; _i++) {
            var entity = entities_1[_i];
            if ((entity.tap_action &&
                entity.tap_action.action === "call-service" &&
                !entity.tap_action.service) ||
                (entity.hold_action &&
                    entity.hold_action.action === "call-service" &&
                    !entity.hold_action.service)) {
                throw new Error('Missing required property "service" when tap_action or hold_action is call-service');
            }
        }
        var columns = config.columns || Math.min(config.entities.length, 5);
        this.style.setProperty("--glance-column-width", 100 / columns + "%");
        this._configEntities = entities;
        if (this.hass) {
            this.requestUpdate();
        }
    };
    HuiGlanceCard.prototype.shouldUpdate = function (changedProps) {
        if (changedProps.has("_config")) {
            return true;
        }
        var oldHass = changedProps.get("hass");
        if (oldHass && this._configEntities) {
            for (var _i = 0, _a = this._configEntities; _i < _a.length; _i++) {
                var entity = _a[_i];
                if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                    return true;
                }
            }
            return false;
        }
        return true;
    };
    HuiGlanceCard.prototype.render = function () {
        var _this = this;
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var title = this._config.title;
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card .header=\"", "\">\n        <div class=\"", "\">\n          ", "\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card .header=\"", "\">\n        <div class=\"", "\">\n          ",
            "\n        </div>\n      </ha-card>\n    "])), title, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({ entities: true, "no-header": !title }), this._configEntities.map(function (entityConf) {
            return _this.renderEntity(entityConf);
        }));
    };
    HuiGlanceCard.prototype.updated = function (changedProperties) {
        _super.prototype.updated.call(this, changedProperties);
        if (!this._config || !this.hass) {
            return;
        }
        var oldHass = changedProperties.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_4__["default"])(this, this.hass.themes, this._config.theme);
        }
    };
    Object.defineProperty(HuiGlanceCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .entities {\n        display: flex;\n        padding: 0 16px 4px;\n        flex-wrap: wrap;\n      }\n      .entities.no-header {\n        padding-top: 16px;\n      }\n      .entity {\n        box-sizing: border-box;\n        padding: 0 4px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        cursor: pointer;\n        margin-bottom: 12px;\n        width: var(--glance-column-width, 20%);\n      }\n      .entity div {\n        width: 100%;\n        text-align: center;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .name {\n        min-height: var(--paper-font-body1_-_line-height, 20px);\n      }\n      state-badge {\n        margin: 8px 0;\n      }\n    "], ["\n      .entities {\n        display: flex;\n        padding: 0 16px 4px;\n        flex-wrap: wrap;\n      }\n      .entities.no-header {\n        padding-top: 16px;\n      }\n      .entity {\n        box-sizing: border-box;\n        padding: 0 4px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        cursor: pointer;\n        margin-bottom: 12px;\n        width: var(--glance-column-width, 20%);\n      }\n      .entity div {\n        width: 100%;\n        text-align: center;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .name {\n        min-height: var(--paper-font-body1_-_line-height, 20px);\n      }\n      state-badge {\n        margin: 8px 0;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiGlanceCard.prototype.renderEntity = function (entityConf) {
        var stateObj = this.hass.states[entityConf.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning-element\n          label=", "\n        ></hui-warning-element>\n      "], ["\n        <hui-warning-element\n          label=",
                "\n        ></hui-warning-element>\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", entityConf.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <div\n        class=\"entity\"\n        .entityConf=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      >\n        ", "\n        ", "\n        ", "\n      </div>\n    "], ["\n      <div\n        class=\"entity\"\n        .entityConf=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      >\n        ",
            "\n        ",
            "\n        ",
            "\n      </div>\n    "])), entityConf, this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_11__["longPress"])(), this._config.show_name !== false
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div class=\"name\">\n                ", "\n              </div>\n            "], ["\n              <div class=\"name\">\n                ",
                "\n              </div>\n            "])), "name" in entityConf
                ? entityConf.name
                : Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__["computeStateName"])(stateObj)) : "", this._config.show_icon !== false
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <state-badge\n                .hass=", "\n                .stateObj=", "\n                .overrideIcon=", "\n                .overrideImage=", "\n              ></state-badge>\n            "], ["\n              <state-badge\n                .hass=", "\n                .stateObj=", "\n                .overrideIcon=", "\n                .overrideImage=", "\n              ></state-badge>\n            "])), this.hass, stateObj, entityConf.icon, entityConf.image) : "", this._config.show_state !== false
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div>\n                ", "\n              </div>\n            "], ["\n              <div>\n                ",
                "\n              </div>\n            "])), entityConf.show_last_changed
                ? Object(_common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__["default"])(new Date(stateObj.last_changed), this.hass.localize)
                : Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)) : "");
    };
    HuiGlanceCard.prototype._handleTap = function (ev) {
        var config = ev.currentTarget.entityConf;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, config, false);
    };
    HuiGlanceCard.prototype._handleHold = function (ev) {
        var config = ev.currentTarget.entityConf;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_13__["handleClick"])(this, this.hass, config, true);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiGlanceCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiGlanceCard.prototype, "_config", void 0);
    HuiGlanceCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-glance-card")
    ], HuiGlanceCard);
    return HuiGlanceCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-history-graph-card.js":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-history-graph-card.js ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_state_history_charts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/state-history-charts */ "./src/components/state-history-charts.js");
/* harmony import */ var _data_ha_state_history_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../data/ha-state-history-data */ "./src/data/ha-state-history-data.js");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n      <style>\n        .content {\n          padding: 16px;\n        }\n        [header] .content {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$=\"[[_config.title]]\">\n        <div class=\"content\">\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[_entities]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            names=\"[[_names]]\"\n            up-to-now\n            no-single\n          ></state-history-charts>\n        </div>\n      </ha-card>\n    "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }








var HuiHistoryGraphCard =
/*#__PURE__*/
function (_PolymerElement) {
  _inherits(HuiHistoryGraphCard, _PolymerElement);

  function HuiHistoryGraphCard() {
    _classCallCheck(this, HuiHistoryGraphCard);

    return _possibleConstructorReturn(this, _getPrototypeOf(HuiHistoryGraphCard).apply(this, arguments));
  }

  _createClass(HuiHistoryGraphCard, [{
    key: "getCardSize",
    value: function getCardSize() {
      return 4;
    }
  }, {
    key: "setConfig",
    value: function setConfig(config) {
      var entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_5__["processConfigEntities"])(config.entities);
      this._config = config;
      var _entities = [];
      var _names = {};
      entities.forEach(function (entity) {
        _entities.push(entity.entity);

        if (entity.name) {
          _names[entity.entity] = entity.name;
        }
      });
      this.setProperties({
        _cacheConfig: {
          cacheKey: _entities.join(),
          hoursToShow: config.hours_to_show || 24,
          refresh: config.refresh_interval || 0
        },
        _entities: _entities,
        _names: _names
      });
    }
  }], [{
    key: "getConfigElement",
    value: function () {
      var _getConfigElement = _asyncToGenerator(
      /*#__PURE__*/
      regeneratorRuntime.mark(function _callee() {
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return Promise.all(/*! import() | hui-history-graph-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-history-graph-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-history-graph-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-history-graph-card-editor.ts"));

              case 2:
                return _context.abrupt("return", document.createElement("hui-history-graph-card-editor"));

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function getConfigElement() {
        return _getConfigElement.apply(this, arguments);
      }

      return getConfigElement;
    }()
  }, {
    key: "getStubConfig",
    value: function getStubConfig() {
      return {
        entities: []
      };
    }
  }, {
    key: "template",
    get: function get() {
      return Object(_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__["html"])(_templateObject());
    }
  }, {
    key: "properties",
    get: function get() {
      return {
        hass: Object,
        _config: Object,
        _names: Object,
        _entities: Array,
        _stateHistory: Object,
        _stateHistoryLoading: Boolean,
        _cacheConfig: Object
      };
    }
  }]);

  return HuiHistoryGraphCard;
}(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__["PolymerElement"]);

customElements.define("hui-history-graph-card", HuiHistoryGraphCard);

/***/ }),

/***/ "./src/panels/lovelace/cards/hui-horizontal-stack-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-horizontal-stack-card.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _hui_stack_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hui-stack-card */ "./src/panels/lovelace/cards/hui-stack-card.ts");




var HuiHorizontalStackCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiHorizontalStackCard, _super);
    function HuiHorizontalStackCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiHorizontalStackCard.prototype.getCardSize = function () {
        var totalSize = 0;
        if (this._cards) {
            for (var _i = 0, _a = this._cards; _i < _a.length; _i++) {
                var element = _a[_i];
                var elementSize = Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_2__["computeCardSize"])(element);
                totalSize = elementSize > totalSize ? elementSize : totalSize;
            }
        }
        return totalSize;
    };
    HuiHorizontalStackCard.prototype.renderStyle = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n          min-width: 0;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n    "], ["\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n          min-width: 0;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n    "])));
    };
    return HuiHorizontalStackCard;
}(_hui_stack_card__WEBPACK_IMPORTED_MODULE_3__["HuiStackCard"]));
customElements.define("hui-horizontal-stack-card", HuiHorizontalStackCard);
var templateObject_1;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-iframe-card.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-iframe-card.ts ***!
  \******************************************************/
/*! exports provided: HuiIframeCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiIframeCard", function() { return HuiIframeCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");




var HuiIframeCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiIframeCard, _super);
    function HuiIframeCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiIframeCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-iframe-card-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-iframe-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-iframe-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-iframe-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-iframe-card-editor")];
                }
            });
        });
    };
    HuiIframeCard.getStubConfig = function () {
        return { url: "https://www.home-assistant.io", aspect_ratio: "50%" };
    };
    HuiIframeCard.prototype.getCardSize = function () {
        if (!this._config) {
            return 3;
        }
        var aspectRatio = this._config.aspect_ratio
            ? Number(this._config.aspect_ratio.replace("%", ""))
            : 50;
        return 1 + aspectRatio / 25;
    };
    HuiIframeCard.prototype.setConfig = function (config) {
        if (!config.url) {
            throw new Error("URL required");
        }
        this._config = config;
    };
    HuiIframeCard.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var aspectRatio = this._config.aspect_ratio || "50%";
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card .header=\"", "\">\n        <div\n          id=\"root\"\n          style=\"", "\"\n        >\n          <iframe src=\"", "\"></iframe>\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card .header=\"", "\">\n        <div\n          id=\"root\"\n          style=\"",
            "\"\n        >\n          <iframe src=\"", "\"></iframe>\n        </div>\n      </ha-card>\n    "])), this._config.title, Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_3__["styleMap"])({
            "padding-top": aspectRatio,
        }), this._config.url);
    };
    Object.defineProperty(HuiIframeCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-card {\n        overflow: hidden;\n      }\n\n      #root {\n        width: 100%;\n        position: relative;\n      }\n\n      iframe {\n        position: absolute;\n        border: none;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n      }\n    "], ["\n      ha-card {\n        overflow: hidden;\n      }\n\n      #root {\n        width: 100%;\n        position: relative;\n      }\n\n      iframe {\n        position: absolute;\n        border: none;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiIframeCard.prototype, "_config", void 0);
    HuiIframeCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-iframe-card")
    ], HuiIframeCard);
    return HuiIframeCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-legacy-wrapper-card.js":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-legacy-wrapper-card.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LegacyWrapperCard; });
/* harmony import */ var _hui_error_card__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _wrapNativeSuper(Class) { var _cache = typeof Map === "function" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== "function") { throw new TypeError("Super expression must either be null or a function"); } if (typeof _cache !== "undefined") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }

function isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeFunction(fn) { return Function.toString.call(fn).indexOf("[native code]") !== -1; }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }




var LegacyWrapperCard =
/*#__PURE__*/
function (_HTMLElement) {
  _inherits(LegacyWrapperCard, _HTMLElement);

  function LegacyWrapperCard(tag, domain) {
    var _this;

    _classCallCheck(this, LegacyWrapperCard);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(LegacyWrapperCard).call(this));
    _this._tag = tag.toUpperCase();
    _this._domain = domain;
    _this._element = null;
    return _this;
  }

  _createClass(LegacyWrapperCard, [{
    key: "getCardSize",
    value: function getCardSize() {
      return 3;
    }
  }, {
    key: "setConfig",
    value: function setConfig(config) {
      if (!config.entity) {
        throw new Error("No entity specified");
      }

      if (Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__["computeDomain"])(config.entity) !== this._domain) {
        throw new Error("Specified entity needs to be of domain ".concat(this._domain, "."));
      }

      this._config = config;
    }
  }, {
    key: "_ensureElement",
    value: function _ensureElement(tag) {
      if (this.lastChild && this.lastChild.tagName === tag) return;

      if (this.lastChild) {
        this.removeChild(this.lastChild);
      }

      this.appendChild(document.createElement(tag));
    }
  }, {
    key: "hass",
    set: function set(hass) {
      var entityId = this._config.entity;

      if (entityId in hass.states) {
        this._ensureElement(this._tag);

        this.lastChild.hass = hass;
        this.lastChild.stateObj = hass.states[entityId];
        this.lastChild.config = this._config;
      } else {
        this._ensureElement("HUI-ERROR-CARD");

        this.lastChild.setConfig(Object(_hui_error_card__WEBPACK_IMPORTED_MODULE_0__["createErrorCardConfig"])("No state available for ".concat(entityId), this._config));
      }
    }
  }]);

  return LegacyWrapperCard;
}(_wrapNativeSuper(HTMLElement));



/***/ }),

/***/ "./src/panels/lovelace/cards/hui-light-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-light-card.ts ***!
  \*****************************************************/
/*! exports provided: HuiLightCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiLightCard", function() { return HuiLightCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _thomasloven_round_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @thomasloven/round-slider */ "./node_modules/@thomasloven/round-slider/src/main.js");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _components_hui_unavailable__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/hui-unavailable */ "./src/panels/lovelace/components/hui-unavailable.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../common/entity/toggle-entity */ "./src/panels/lovelace/common/entity/toggle-entity.ts");
/* harmony import */ var _common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../common/entity/supports-feature */ "./src/common/entity/supports-feature.ts");
/* harmony import */ var _data_light__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../data/light */ "./src/data/light.ts");

















var HuiLightCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiLightCard, _super);
    function HuiLightCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiLightCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-light-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-light-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-light-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-light-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-light-card-editor")];
                }
            });
        });
    };
    HuiLightCard.getStubConfig = function () {
        return { entity: "" };
    };
    HuiLightCard.prototype.getCardSize = function () {
        return 2;
    };
    HuiLightCard.prototype.setConfig = function (config) {
        if (!config.entity || config.entity.split(".")[0] !== "light") {
            throw new Error("Specify an entity from within the light domain.");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ theme: "default" }, config);
    };
    HuiLightCard.prototype.render = function () {
        if (!this.hass || !this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        var brightness = Math.round((stateObj.attributes.brightness / 254) * 100) || 0;
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ", "\n      <ha-card>\n        ", "\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          class=\"more-info\"\n          @click=\"", "\"\n        ></paper-icon-button>\n\n        <div id=\"light\">\n          ", "\n          <ha-icon\n            class=\"light-icon\"\n            data-state=\"", "\"\n            .icon=\"", "\"\n            style=\"", "\"\n            @click=\"", "\"\n          ></ha-icon>\n        </div>\n\n        <div id=\"tooltip\">\n          <div class=\"brightness\" @ha-click=\"", "\">\n            ", " %\n          </div>\n          <div class=\"name\">\n            ", "\n          </div>\n        </div>\n      </ha-card>\n    "], ["\n      ", "\n      <ha-card>\n        ",
            "\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          class=\"more-info\"\n          @click=\"", "\"\n        ></paper-icon-button>\n\n        <div id=\"light\">\n          ",
            "\n          <ha-icon\n            class=\"light-icon\"\n            data-state=\"", "\"\n            .icon=\"", "\"\n            style=\"",
            "\"\n            @click=\"", "\"\n          ></ha-icon>\n        </div>\n\n        <div id=\"tooltip\">\n          <div class=\"brightness\" @ha-click=\"", "\">\n            ", " %\n          </div>\n          <div class=\"name\">\n            ", "\n          </div>\n        </div>\n      </ha-card>\n    "])), this.renderStyle(), stateObj.state === "unavailable"
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <hui-unavailable\n                .text=\"", "\"\n              ></hui-unavailable>\n            "], ["\n              <hui-unavailable\n                .text=\"", "\"\n              ></hui-unavailable>\n            "])), this.hass.localize("state.default.unavailable")) : "", this._handleMoreInfo, Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_15__["supportsFeature"])(stateObj, _data_light__WEBPACK_IMPORTED_MODULE_16__["SUPPORT_BRIGHTNESS"])
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <round-slider\n                  min=\"1\"\n                  .value=", "\n                  @value-changing=", "\n                  @value-changed=", "\n                ></round-slider>\n              "], ["\n                <round-slider\n                  min=\"1\"\n                  .value=", "\n                  @value-changing=", "\n                  @value-changed=", "\n                ></round-slider>\n              "])), brightness, this._dragEvent, this._setBrightness) : "", stateObj.state, this._config.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_4__["stateIcon"])(stateObj), Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_12__["styleMap"])({
            filter: this._computeBrightness(stateObj),
            color: this._computeColor(stateObj),
        }), this._handleTap, this._handleTap, brightness, this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__["computeStateName"])(stateObj));
    };
    HuiLightCard.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_13__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiLightCard.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (!this._config || !this.hass) {
            return;
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return;
        }
        var oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_6__["default"])(this, this.hass.themes, this._config.theme);
        }
    };
    HuiLightCard.prototype.renderStyle = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <style>\n        :host {\n          display: block;\n        }\n\n        ha-card {\n          position: relative;\n          overflow: hidden;\n          --name-font-size: 1.2rem;\n          --brightness-font-size: 1.2rem;\n          --rail-border-color: transparent;\n        }\n\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n        }\n\n        #light {\n          margin: auto;\n          padding-top: 0;\n          padding-bottom: 32px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 160px;\n          width: 160px;\n        }\n        #light round-slider {\n          margin: 0 auto;\n          display: inline-block;\n          --round-slider-path-color: var(--disabled-text-color);\n          --round-slider-bar-color: var(--primary-color);\n          z-index: 20;\n        }\n\n        .light-icon {\n          position: absolute;\n          margin: 0 auto;\n          width: 76px;\n          height: 76px;\n          color: var(--paper-item-icon-color, #44739e);\n          cursor: pointer;\n          z-index: 20;\n        }\n\n        .light-icon[data-state=\"on\"] {\n          color: var(--paper-item-icon-active-color, #fdd835);\n        }\n\n        .light-icon[data-state=\"unavailable\"] {\n          color: var(--state-icon-unavailable-color);\n        }\n\n        .name {\n          position: absolute;\n          top: 160px;\n          left: 50%;\n          transform: translate(-50%);\n          font-size: var(--name-font-size);\n        }\n\n        .brightness {\n          font-size: var(--brightness-font-size);\n          position: absolute;\n          margin: 0 auto;\n          top: 135px;\n          left: 50%;\n          transform: translate(-50%);\n          opacity: 0;\n          transition: opacity 0.5s ease-in-out;\n          -moz-transition: opacity 0.5s ease-in-out;\n          -webkit-transition: opacity 0.5s ease-in-out;\n          cursor: pointer;\n          pointer-events: none;\n        }\n\n        .show_brightness {\n          opacity: 1;\n        }\n\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    "], ["\n      <style>\n        :host {\n          display: block;\n        }\n\n        ha-card {\n          position: relative;\n          overflow: hidden;\n          --name-font-size: 1.2rem;\n          --brightness-font-size: 1.2rem;\n          --rail-border-color: transparent;\n        }\n\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n        }\n\n        #light {\n          margin: auto;\n          padding-top: 0;\n          padding-bottom: 32px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 160px;\n          width: 160px;\n        }\n        #light round-slider {\n          margin: 0 auto;\n          display: inline-block;\n          --round-slider-path-color: var(--disabled-text-color);\n          --round-slider-bar-color: var(--primary-color);\n          z-index: 20;\n        }\n\n        .light-icon {\n          position: absolute;\n          margin: 0 auto;\n          width: 76px;\n          height: 76px;\n          color: var(--paper-item-icon-color, #44739e);\n          cursor: pointer;\n          z-index: 20;\n        }\n\n        .light-icon[data-state=\"on\"] {\n          color: var(--paper-item-icon-active-color, #fdd835);\n        }\n\n        .light-icon[data-state=\"unavailable\"] {\n          color: var(--state-icon-unavailable-color);\n        }\n\n        .name {\n          position: absolute;\n          top: 160px;\n          left: 50%;\n          transform: translate(-50%);\n          font-size: var(--name-font-size);\n        }\n\n        .brightness {\n          font-size: var(--brightness-font-size);\n          position: absolute;\n          margin: 0 auto;\n          top: 135px;\n          left: 50%;\n          transform: translate(-50%);\n          opacity: 0;\n          transition: opacity 0.5s ease-in-out;\n          -moz-transition: opacity 0.5s ease-in-out;\n          -webkit-transition: opacity 0.5s ease-in-out;\n          cursor: pointer;\n          pointer-events: none;\n        }\n\n        .show_brightness {\n          opacity: 1;\n        }\n\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    "])));
    };
    HuiLightCard.prototype._dragEvent = function (e) {
        this.shadowRoot.querySelector(".brightness").innerHTML =
            e.detail.value + "%";
        this._showBrightness();
        this._hideBrightness();
    };
    HuiLightCard.prototype._showBrightness = function () {
        clearTimeout(this._brightnessTimout);
        this.shadowRoot.querySelector(".brightness").classList.add("show_brightness");
    };
    HuiLightCard.prototype._hideBrightness = function () {
        var _this = this;
        this._brightnessTimout = window.setTimeout(function () {
            _this.shadowRoot.querySelector(".brightness").classList.remove("show_brightness");
        }, 500);
    };
    HuiLightCard.prototype._setBrightness = function (e) {
        this.hass.callService("light", "turn_on", {
            entity_id: this._config.entity,
            brightness_pct: e.detail.value,
        });
    };
    HuiLightCard.prototype._computeBrightness = function (stateObj) {
        if (!stateObj.attributes.brightness) {
            return "";
        }
        var brightness = stateObj.attributes.brightness;
        return "brightness(" + (brightness + 245) / 5 + "%)";
    };
    HuiLightCard.prototype._computeColor = function (stateObj) {
        if (!stateObj.attributes.hs_color) {
            return "";
        }
        var _a = stateObj.attributes.hs_color, hue = _a[0], sat = _a[1];
        if (sat <= 10) {
            return "";
        }
        return "hsl(" + hue + ", 100%, " + (100 - sat / 2) + "%)";
    };
    HuiLightCard.prototype._handleTap = function () {
        Object(_common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_14__["toggleEntity"])(this.hass, this._config.entity);
    };
    HuiLightCard.prototype._handleMoreInfo = function () {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_11__["fireEvent"])(this, "hass-more-info", {
            entityId: this._config.entity,
        });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiLightCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiLightCard.prototype, "_config", void 0);
    HuiLightCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-light-card")
    ], HuiLightCard);
    return HuiLightCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-map-card.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-map-card.ts ***!
  \***************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _map_ha_entity_marker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../map/ha-entity-marker */ "./src/panels/map/ha-entity-marker.js");
/* harmony import */ var _common_dom_setup_leaflet_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/dom/setup-leaflet-map */ "./src/common/dom/setup-leaflet-map.ts");
/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ "./src/common/entity/compute_state_domain.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/util/debounce */ "./src/common/util/debounce.ts");
/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ "./src/common/util/parse-aspect-ratio.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");












var HuiMapCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiMapCard, _super);
    function HuiMapCard() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isPanel = false;
        _this._debouncedResizeListener = Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_7__["debounce"])(function () {
            if (!_this._leafletMap) {
                return;
            }
            _this._leafletMap.invalidateSize();
        }, 100, false);
        _this._mapItems = [];
        _this._connected = false;
        return _this;
    }
    HuiMapCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-map-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-map-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-map-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-map-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-map-card-editor")];
                }
            });
        });
    };
    HuiMapCard.getStubConfig = function () {
        return { entities: [] };
    };
    HuiMapCard.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Error in card configuration.");
        }
        if (!config.entities && !config.geo_location_sources) {
            throw new Error("Either entities or geo_location_sources must be defined");
        }
        if (config.entities && !Array.isArray(config.entities)) {
            throw new Error("Entities need to be an array");
        }
        if (config.geo_location_sources &&
            !Array.isArray(config.geo_location_sources)) {
            throw new Error("Geo_location_sources needs to be an array");
        }
        this._config = config;
        this._configEntities = config.entities
            ? Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__["processConfigEntities"])(config.entities)
            : [];
    };
    HuiMapCard.prototype.getCardSize = function () {
        if (!this._config) {
            return 3;
        }
        var ratio = Object(_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_8__["default"])(this._config.aspect_ratio);
        var ar = ratio && ratio.w > 0 && ratio.h > 0
            ? "" + ((100 * ratio.h) / ratio.w).toFixed(2)
            : "100";
        return 1 + Math.floor(Number(ar) / 25) || 3;
    };
    HuiMapCard.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        this._connected = true;
        if (this.hasUpdated) {
            this.loadMap();
            this._attachObserver();
        }
    };
    HuiMapCard.prototype.disconnectedCallback = function () {
        _super.prototype.disconnectedCallback.call(this);
        this._connected = false;
        if (this._leafletMap) {
            this._leafletMap.remove();
            this._leafletMap = undefined;
            this.Leaflet = undefined;
        }
        if (this._resizeObserver) {
            this._resizeObserver.unobserve(this._mapEl);
        }
        else {
            window.removeEventListener("resize", this._debouncedResizeListener);
        }
    };
    HuiMapCard.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card id=\"card\" .header=", ">\n        <div id=\"root\">\n          <div\n            id=\"map\"\n            class=", "\n          ></div>\n          <paper-icon-button\n            @click=", "\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card id=\"card\" .header=", ">\n        <div id=\"root\">\n          <div\n            id=\"map\"\n            class=", "\n          ></div>\n          <paper-icon-button\n            @click=", "\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n    "])), this._config.title, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_11__["classMap"])({ dark: this._config.dark_mode === true }), this._fitMap);
    };
    HuiMapCard.prototype.shouldUpdate = function (changedProps) {
        if (!changedProps.has("hass") || changedProps.size > 1) {
            return true;
        }
        var oldHass = changedProps.get("hass");
        if (!oldHass || !this._configEntities) {
            return true;
        }
        // Check if any state has changed
        for (var _i = 0, _a = this._configEntities; _i < _a.length; _i++) {
            var entity = _a[_i];
            if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                return true;
            }
        }
        return false;
    };
    HuiMapCard.prototype.firstUpdated = function (changedProps) {
        _super.prototype.firstUpdated.call(this, changedProps);
        this.loadMap();
        var root = this.shadowRoot.getElementById("root");
        if (!this._config || this.isPanel || !root) {
            return;
        }
        if (this._connected) {
            this._attachObserver();
        }
        var ratio = Object(_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_8__["default"])(this._config.aspect_ratio);
        root.style.paddingBottom =
            ratio && ratio.w > 0 && ratio.h > 0
                ? ((100 * ratio.h) / ratio.w).toFixed(2) + "%"
                : (root.style.paddingBottom = "100%");
    };
    HuiMapCard.prototype.updated = function (changedProps) {
        if (changedProps.has("hass")) {
            this._drawEntities();
        }
        if (changedProps.has("_config") &&
            changedProps.get("_config") !== undefined) {
            this.updateMap(changedProps.get("_config"));
        }
    };
    Object.defineProperty(HuiMapCard.prototype, "_mapEl", {
        get: function () {
            return this.shadowRoot.getElementById("map");
        },
        enumerable: true,
        configurable: true
    });
    HuiMapCard.prototype.loadMap = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, Object(_common_dom_setup_leaflet_map__WEBPACK_IMPORTED_MODULE_4__["setupLeafletMap"])(this._mapEl, this._config !== undefined ? this._config.dark_mode === true : false)];
                    case 1:
                        _a = _b.sent(), this._leafletMap = _a[0], this.Leaflet = _a[1];
                        this._drawEntities();
                        this._leafletMap.invalidateSize();
                        this._fitMap();
                        return [2 /*return*/];
                }
            });
        });
    };
    HuiMapCard.prototype.updateMap = function (oldConfig) {
        var map = this._leafletMap;
        var config = this._config;
        var Leaflet = this.Leaflet;
        if (!map || !config || !Leaflet) {
            return;
        }
        if (config.dark_mode !== oldConfig.dark_mode) {
            Object(_common_dom_setup_leaflet_map__WEBPACK_IMPORTED_MODULE_4__["createTileLayer"])(Leaflet, config.dark_mode === true).addTo(map);
        }
        if (config.entities !== oldConfig.entities ||
            config.geo_location_sources !== oldConfig.geo_location_sources) {
            this._drawEntities();
        }
        map.invalidateSize();
        this._fitMap();
    };
    HuiMapCard.prototype._fitMap = function () {
        if (!this._leafletMap || !this.Leaflet || !this._config || !this.hass) {
            return;
        }
        var zoom = this._config.default_zoom;
        if (this._mapItems.length === 0) {
            this._leafletMap.setView(new this.Leaflet.LatLng(this.hass.config.latitude, this.hass.config.longitude), zoom || 14);
            return;
        }
        var bounds = this.Leaflet.latLngBounds(this._mapItems ? this._mapItems.map(function (item) { return item.getLatLng(); }) : []);
        this._leafletMap.fitBounds(bounds.pad(0.5));
        if (zoom && this._leafletMap.getZoom() > zoom) {
            this._leafletMap.setZoom(zoom);
        }
    };
    HuiMapCard.prototype._drawEntities = function () {
        var hass = this.hass;
        var map = this._leafletMap;
        var config = this._config;
        var Leaflet = this.Leaflet;
        if (!hass || !map || !config || !Leaflet) {
            return;
        }
        if (this._mapItems) {
            this._mapItems.forEach(function (marker) { return marker.remove(); });
        }
        var mapItems = (this._mapItems = []);
        var allEntities = this._configEntities.concat();
        // Calculate visible geo location sources
        if (config.geo_location_sources) {
            var includesAll = config.geo_location_sources.includes("all");
            for (var _i = 0, _a = Object.keys(hass.states); _i < _a.length; _i++) {
                var entityId = _a[_i];
                var stateObj = hass.states[entityId];
                if (Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__["computeDomain"])(entityId) === "geo_location" &&
                    (includesAll ||
                        config.geo_location_sources.includes(stateObj.attributes.source))) {
                    allEntities.push({ entity: entityId });
                }
            }
        }
        for (var _b = 0, allEntities_1 = allEntities; _b < allEntities_1.length; _b++) {
            var entity = allEntities_1[_b];
            var entityId = entity.entity;
            var stateObj = hass.states[entityId];
            if (!stateObj) {
                continue;
            }
            var title = Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__["computeStateName"])(stateObj);
            var _c = stateObj.attributes, latitude = _c.latitude, longitude = _c.longitude, passive = _c.passive, icon = _c.icon, radius = _c.radius, entityPicture = _c.entity_picture, gpsAccuracy = _c.gps_accuracy;
            if (!(latitude && longitude)) {
                continue;
            }
            if (Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__["computeStateDomain"])(stateObj) === "zone") {
                // DRAW ZONE
                if (passive) {
                    continue;
                }
                // create marker with the icon
                mapItems.push(Leaflet.marker([latitude, longitude], {
                    icon: Leaflet.divIcon({
                        html: icon ? "<ha-icon icon=\"" + icon + "\"></ha-icon>" : title,
                        iconSize: [24, 24],
                        className: "",
                    }),
                    interactive: false,
                    title: title,
                }));
                // create circle around it
                mapItems.push(Leaflet.circle([latitude, longitude], {
                    interactive: false,
                    color: "#FF9800",
                    radius: radius,
                }));
                continue;
            }
            // DRAW ENTITY
            // create icon
            var entityName = title
                .split(" ")
                .map(function (part) { return part[0]; })
                .join("")
                .substr(0, 3);
            // create market with the icon
            mapItems.push(Leaflet.marker([latitude, longitude], {
                icon: Leaflet.divIcon({
                    // Leaflet clones this element before adding it to the map. This messes up
                    // our Polymer object and we can't pass data through. Thus we hack like this.
                    html: "\n              <ha-entity-marker\n                entity-id=\"" + entityId + "\"\n                entity-name=\"" + entityName + "\"\n                entity-picture=\"" + (entityPicture || "") + "\"\n              ></ha-entity-marker>\n            ",
                    iconSize: [48, 48],
                    className: "",
                }),
                title: Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__["computeStateName"])(stateObj),
            }));
            // create circle around if entity has accuracy
            if (gpsAccuracy) {
                mapItems.push(Leaflet.circle([latitude, longitude], {
                    interactive: false,
                    color: "#0288D1",
                    radius: gpsAccuracy,
                }));
            }
        }
        this._mapItems.forEach(function (marker) { return map.addLayer(marker); });
    };
    HuiMapCard.prototype._attachObserver = function () {
        // Observe changes to map size and invalidate to prevent broken rendering
        // Uses ResizeObserver in Chrome, otherwise window resize event
        var _this = this;
        // @ts-ignore
        if (typeof ResizeObserver === "function") {
            // @ts-ignore
            this._resizeObserver = new ResizeObserver(function () {
                return _this._debouncedResizeListener();
            });
            this._resizeObserver.observe(this._mapEl);
        }
        else {
            window.addEventListener("resize", this._debouncedResizeListener);
        }
    };
    Object.defineProperty(HuiMapCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host([ispanel]) ha-card {\n        left: 0;\n        top: 0;\n        width: 100%;\n        /**\n       * In panel mode we want a full height map. Since parent #view\n       * only sets min-height, we need absolute positioning here\n       */\n        height: 100%;\n        position: absolute;\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n\n      #map {\n        z-index: 0;\n        border: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: #fafaf8;\n      }\n\n      #map.dark {\n        background: #090909;\n      }\n\n      paper-icon-button {\n        position: absolute;\n        top: 75px;\n        left: 7px;\n      }\n\n      #root {\n        position: relative;\n      }\n\n      :host([ispanel]) #root {\n        height: 100%;\n      }\n    "], ["\n      :host([ispanel]) ha-card {\n        left: 0;\n        top: 0;\n        width: 100%;\n        /**\n       * In panel mode we want a full height map. Since parent #view\n       * only sets min-height, we need absolute positioning here\n       */\n        height: 100%;\n        position: absolute;\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n\n      #map {\n        z-index: 0;\n        border: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: #fafaf8;\n      }\n\n      #map.dark {\n        background: #090909;\n      }\n\n      paper-icon-button {\n        position: absolute;\n        top: 75px;\n        left: 7px;\n      }\n\n      #root {\n        position: relative;\n      }\n\n      :host([ispanel]) #root {\n        height: 100%;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
    ], HuiMapCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])({ type: Boolean, reflect: true })
    ], HuiMapCard.prototype, "isPanel", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
    ], HuiMapCard.prototype, "_config", void 0);
    HuiMapCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["customElement"])("hui-map-card")
    ], HuiMapCard);
    return HuiMapCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_2__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-markdown-card.ts":
/*!********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-markdown-card.ts ***!
  \********************************************************/
/*! exports provided: HuiMarkdownCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiMarkdownCard", function() { return HuiMarkdownCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_markdown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-markdown */ "./src/components/ha-markdown.ts");
/* harmony import */ var _data_ws_templates__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../data/ws-templates */ "./src/data/ws-templates.ts");






var HuiMarkdownCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiMarkdownCard, _super);
    function HuiMarkdownCard() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._content = "";
        return _this;
    }
    HuiMarkdownCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-markdown-card-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-markdown-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-markdown-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-markdown-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-markdown-card-editor")];
                }
            });
        });
    };
    HuiMarkdownCard.getStubConfig = function () {
        return {
            content: "The **Markdown** card allows you to write any text. You can style it **bold**, *italicized*, ~strikethrough~ etc. You can do images, links, and more.\n\nFor more information see the [Markdown Cheatsheet](https://commonmark.org/help).",
        };
    };
    HuiMarkdownCard.prototype.getCardSize = function () {
        return this._config === undefined
            ? 3
            : this._config.card_size === undefined
                ? this._config.content.split("\n").length + (this._config.title ? 1 : 0)
                : this._config.card_size;
    };
    HuiMarkdownCard.prototype.setConfig = function (config) {
        var _this = this;
        if (!config.content) {
            throw new Error("Invalid Configuration: Content Required");
        }
        this._config = config;
        this._disconnect().then(function () {
            if (_this._hass) {
                _this._connect();
            }
        });
    };
    HuiMarkdownCard.prototype.disconnectedCallback = function () {
        this._disconnect();
    };
    Object.defineProperty(HuiMarkdownCard.prototype, "hass", {
        set: function (hass) {
            this._hass = hass;
            this._connect();
        },
        enumerable: true,
        configurable: true
    });
    HuiMarkdownCard.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card .header=\"", "\">\n        <ha-markdown\n          class=\"markdown ", "\"\n          .content=\"", "\"\n        ></ha-markdown>\n      </ha-card>\n    "], ["\n      <ha-card .header=\"", "\">\n        <ha-markdown\n          class=\"markdown ",
            "\"\n          .content=\"", "\"\n        ></ha-markdown>\n      </ha-card>\n    "])), this._config.title, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "no-header": !this._config.title,
        }), this._content);
    };
    HuiMarkdownCard.prototype._connect = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                if (!this._unsubRenderTemplate && this._hass && this._config) {
                    this._unsubRenderTemplate = Object(_data_ws_templates__WEBPACK_IMPORTED_MODULE_5__["subscribeRenderTemplate"])(this._hass.connection, function (result) {
                        _this._content = result;
                    }, {
                        template: this._config.content,
                        entity_ids: this._config.entity_id,
                        variables: { config: this._config },
                    });
                    this._unsubRenderTemplate.catch(function () {
                        _this._content = _this._config.content;
                        _this._unsubRenderTemplate = undefined;
                    });
                }
                return [2 /*return*/];
            });
        });
    };
    HuiMarkdownCard.prototype._disconnect = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var unsub, e_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this._unsubRenderTemplate) return [3 /*break*/, 5];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, this._unsubRenderTemplate];
                    case 2:
                        unsub = _a.sent();
                        this._unsubRenderTemplate = undefined;
                        return [4 /*yield*/, unsub()];
                    case 3:
                        _a.sent();
                        return [3 /*break*/, 5];
                    case 4:
                        e_1 = _a.sent();
                        if (e_1.code === "not_found") {
                            // If we get here, the connection was probably already closed. Ignore.
                        }
                        else {
                            throw e_1;
                        }
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(HuiMarkdownCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-markdown {\n        display: block;\n        padding: 0 16px 16px;\n        -ms-user-select: initial;\n        -webkit-user-select: initial;\n        -moz-user-select: initial;\n      }\n      .markdown.no-header {\n        padding-top: 16px;\n      }\n      ha-markdown > *:first-child {\n        margin-top: 0;\n      }\n      ha-markdown > *:last-child {\n        margin-bottom: 0;\n      }\n      ha-markdown a {\n        color: var(--primary-color);\n      }\n      ha-markdown img {\n        max-width: 100%;\n      }\n    "], ["\n      ha-markdown {\n        display: block;\n        padding: 0 16px 16px;\n        -ms-user-select: initial;\n        -webkit-user-select: initial;\n        -moz-user-select: initial;\n      }\n      .markdown.no-header {\n        padding-top: 16px;\n      }\n      ha-markdown > *:first-child {\n        margin-top: 0;\n      }\n      ha-markdown > *:last-child {\n        margin-bottom: 0;\n      }\n      ha-markdown a {\n        color: var(--primary-color);\n      }\n      ha-markdown img {\n        max-width: 100%;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiMarkdownCard.prototype, "_config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiMarkdownCard.prototype, "_content", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiMarkdownCard.prototype, "_unsubRenderTemplate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiMarkdownCard.prototype, "_hass", void 0);
    HuiMarkdownCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-markdown-card")
    ], HuiMarkdownCard);
    return HuiMarkdownCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-media-control-card.js":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-media-control-card.js ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _cards_ha_media_player_card__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../cards/ha-media_player-card */ "./src/cards/ha-media_player-card.js");
/* harmony import */ var _hui_legacy_wrapper_card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hui-legacy-wrapper-card */ "./src/panels/lovelace/cards/hui-legacy-wrapper-card.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var HuiMediaControlCard =
/*#__PURE__*/
function (_LegacyWrapperCard) {
  _inherits(HuiMediaControlCard, _LegacyWrapperCard);

  _createClass(HuiMediaControlCard, null, [{
    key: "getConfigElement",
    value: function () {
      var _getConfigElement = _asyncToGenerator(
      /*#__PURE__*/
      regeneratorRuntime.mark(function _callee() {
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return Promise.all(/*! import() | hui-media-control-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-media-control-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-media-control-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-media-control-card-editor.ts"));

              case 2:
                return _context.abrupt("return", document.createElement("hui-media-control-card-editor"));

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function getConfigElement() {
        return _getConfigElement.apply(this, arguments);
      }

      return getConfigElement;
    }()
  }, {
    key: "getStubConfig",
    value: function getStubConfig() {
      return {
        entity: ""
      };
    }
  }]);

  function HuiMediaControlCard() {
    _classCallCheck(this, HuiMediaControlCard);

    return _possibleConstructorReturn(this, _getPrototypeOf(HuiMediaControlCard).call(this, "ha-media_player-card", "media_player"));
  }

  return HuiMediaControlCard;
}(_hui_legacy_wrapper_card__WEBPACK_IMPORTED_MODULE_1__["default"]);

customElements.define("hui-media-control-card", HuiMediaControlCard);

/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-card.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-card.ts ***!
  \*******************************************************/
/*! exports provided: HuiPictureCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiPictureCard", function() { return HuiPictureCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");






var HuiPictureCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiPictureCard, _super);
    function HuiPictureCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiPictureCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-picture-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e(10), __webpack_require__.e("hui-picture-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-picture-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-picture-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-picture-card-editor")];
                }
            });
        });
    };
    HuiPictureCard.getStubConfig = function () {
        return {
            image: "https://www.home-assistant.io/images/merchandise/shirt-frontpage.png",
            tap_action: { action: "none" },
            hold_action: { action: "none" },
        };
    };
    HuiPictureCard.prototype.getCardSize = function () {
        return 3;
    };
    HuiPictureCard.prototype.setConfig = function (config) {
        if (!config || !config.image) {
            throw new Error("Invalid Configuration: 'image' required");
        }
        this._config = config;
    };
    HuiPictureCard.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n        class=\"", "\"\n      >\n        <img src=\"", "\" />\n      </ha-card>\n    "], ["\n      <ha-card\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n        class=\"",
            "\"\n      >\n        <img src=\"", "\" />\n      </ha-card>\n    "])), this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__["longPress"])(), Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_3__["classMap"])({
            clickable: Boolean(this._config.tap_action || this._config.hold_action),
        }), this.hass.hassUrl(this._config.image));
    };
    Object.defineProperty(HuiPictureCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-card {\n        overflow: hidden;\n      }\n\n      ha-card.clickable {\n        cursor: pointer;\n      }\n\n      img {\n        display: block;\n        width: 100%;\n      }\n    "], ["\n      ha-card {\n        overflow: hidden;\n      }\n\n      ha-card.clickable {\n        cursor: pointer;\n      }\n\n      img {\n        display: block;\n        width: 100%;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiPictureCard.prototype._handleTap = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, false);
    };
    HuiPictureCard.prototype._handleHold = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, true);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPictureCard.prototype, "_config", void 0);
    HuiPictureCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-card")
    ], HuiPictureCard);
    return HuiPictureCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-elements-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-elements-card.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./picture-elements/create-styled-hui-element */ "./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts");



var HuiPictureElementsCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiPictureElementsCard, _super);
    function HuiPictureElementsCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(HuiPictureElementsCard.prototype, "hass", {
        set: function (hass) {
            this._hass = hass;
            for (var _i = 0, _a = Array.from(this.shadowRoot.querySelectorAll("#root > *")); _i < _a.length; _i++) {
                var el = _a[_i];
                var element = el;
                element.hass = this._hass;
            }
        },
        enumerable: true,
        configurable: true
    });
    HuiPictureElementsCard.prototype.getCardSize = function () {
        return 4;
    };
    HuiPictureElementsCard.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Invalid Configuration");
        }
        else if (!(config.image || config.camera_image || config.state_image) ||
            (config.state_image && !config.entity)) {
            throw new Error("Invalid Configuration: image required");
        }
        else if (!Array.isArray(config.elements)) {
            throw new Error("Invalid Configuration: elements required");
        }
        this._config = config;
    };
    HuiPictureElementsCard.prototype.render = function () {
        var _this = this;
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card .header=\"", "\">\n        <div id=\"root\">\n          <hui-image\n            .hass=", "\n            .image=", "\n            .stateImage=", "\n            .stateFilter=", "\n            .cameraImage=", "\n            .cameraView=", "\n            .entity=", "\n            .aspectRatio=", "\n          ></hui-image>\n          ", "\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card .header=\"", "\">\n        <div id=\"root\">\n          <hui-image\n            .hass=", "\n            .image=", "\n            .stateImage=", "\n            .stateFilter=", "\n            .cameraImage=", "\n            .cameraView=", "\n            .entity=", "\n            .aspectRatio=", "\n          ></hui-image>\n          ",
            "\n        </div>\n      </ha-card>\n    "])), this._config.title, this._hass, this._config.image, this._config.state_image, this._config.state_filter, this._config.camera_image, this._config.camera_view, this._config.entity, this._config.aspect_ratio, this._config.elements.map(function (elementConfig) {
            var element = Object(_picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_2__["createStyledHuiElement"])(elementConfig);
            element.hass = _this._hass;
            return element;
        }));
    };
    Object.defineProperty(HuiPictureElementsCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      #root {\n        position: relative;\n      }\n\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n    "], ["\n      #root {\n        position: relative;\n      }\n\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPictureElementsCard.prototype, "_config", void 0);
    HuiPictureElementsCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-elements-card")
    ], HuiPictureElementsCard);
    return HuiPictureElementsCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-entity-card.ts":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-entity-card.ts ***!
  \**************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-image */ "./src/panels/lovelace/components/hui-image.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _data_entity__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../data/entity */ "./src/data/entity.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");













var HuiPictureEntityCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiPictureEntityCard, _super);
    function HuiPictureEntityCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiPictureEntityCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-picture-entity-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e(10), __webpack_require__.e("hui-picture-entity-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-picture-entity-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-picture-entity-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-picture-entity-card-editor")];
                }
            });
        });
    };
    HuiPictureEntityCard.getStubConfig = function () {
        return {
            entity: "",
            image: "https://www.home-assistant.io/images/merchandise/shirt-frontpage.png",
        };
    };
    HuiPictureEntityCard.prototype.getCardSize = function () {
        return 3;
    };
    HuiPictureEntityCard.prototype.setConfig = function (config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        if (Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__["computeDomain"])(config.entity) !== "camera" &&
            (!config.image && !config.state_image && !config.camera_image)) {
            throw new Error("No image source configured.");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ show_name: true, show_state: true }, config);
    };
    HuiPictureEntityCard.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_12__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiPictureEntityCard.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        var name = this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__["computeStateName"])(stateObj);
        var state = Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_8__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language);
        var footer = "";
        if (this._config.show_name && this._config.show_state) {
            footer = Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <div class=\"footer both\">\n          <div>", "</div>\n          <div>", "</div>\n        </div>\n      "], ["\n        <div class=\"footer both\">\n          <div>", "</div>\n          <div>", "</div>\n        </div>\n      "])), name, state);
        }
        else if (this._config.show_name) {
            footer = Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <div class=\"footer\">", "</div>\n      "], ["\n        <div class=\"footer\">", "</div>\n      "])), name);
        }
        else if (this._config.show_state) {
            footer = Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <div class=\"footer state\">", "</div>\n      "], ["\n        <div class=\"footer state\">", "</div>\n      "])), state);
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card>\n        <hui-image\n          .hass=", "\n          .image=", "\n          .stateImage=", "\n          .stateFilter=", "\n          .cameraImage=", "\n          .cameraView=", "\n          .entity=", "\n          .aspectRatio=", "\n          @ha-click=", "\n          @ha-hold=", "\n          .longPress=", "\n          class=", "\n        ></hui-image>\n        ", "\n      </ha-card>\n    "], ["\n      <ha-card>\n        <hui-image\n          .hass=", "\n          .image=", "\n          .stateImage=", "\n          .stateFilter=", "\n          .cameraImage=",
            "\n          .cameraView=", "\n          .entity=", "\n          .aspectRatio=", "\n          @ha-click=", "\n          @ha-hold=", "\n          .longPress=", "\n          class=",
            "\n        ></hui-image>\n        ", "\n      </ha-card>\n    "])), this.hass, this._config.image, this._config.state_image, this._config.state_filter, Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_6__["computeDomain"])(this._config.entity) === "camera"
            ? this._config.entity
            : this._config.camera_image, this._config.camera_view, this._config.entity, this._config.aspect_ratio, this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_9__["longPress"])(), Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            clickable: stateObj.state !== _data_entity__WEBPACK_IMPORTED_MODULE_11__["UNAVAILABLE"],
        }), footer);
    };
    Object.defineProperty(HuiPictureEntityCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-card {\n        min-height: 75px;\n        overflow: hidden;\n        position: relative;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .footer {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 16px;\n        font-size: 16px;\n        line-height: 16px;\n        color: white;\n      }\n\n      .both {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .state {\n        text-align: right;\n      }\n    "], ["\n      ha-card {\n        min-height: 75px;\n        overflow: hidden;\n        position: relative;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .footer {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 16px;\n        font-size: 16px;\n        line-height: 16px;\n        color: white;\n      }\n\n      .both {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .state {\n        text-align: right;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiPictureEntityCard.prototype._handleTap = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_10__["handleClick"])(this, this.hass, this._config, false);
    };
    HuiPictureEntityCard.prototype._handleHold = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_10__["handleClick"])(this, this.hass, this._config, true);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPictureEntityCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPictureEntityCard.prototype, "_config", void 0);
    HuiPictureEntityCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-entity-card")
    ], HuiPictureEntityCard);
    return HuiPictureEntityCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-picture-glance-card.ts":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-picture-glance-card.ts ***!
  \**************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_image__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/hui-image */ "./src/panels/lovelace/components/hui-image.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
















var STATES_OFF = new Set(["closed", "locked", "not_home", "off"]);
var HuiPictureGlanceCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiPictureGlanceCard, _super);
    function HuiPictureGlanceCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiPictureGlanceCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-picture-glance-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e(10), __webpack_require__.e("hui-picture-glance-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-picture-glance-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-picture-glance-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-picture-glance-card-editor")];
                }
            });
        });
    };
    HuiPictureGlanceCard.getStubConfig = function () {
        return {
            image: "https://www.home-assistant.io/images/merchandise/shirt-frontpage.png",
            entities: [],
        };
    };
    HuiPictureGlanceCard.prototype.getCardSize = function () {
        return 3;
    };
    HuiPictureGlanceCard.prototype.setConfig = function (config) {
        var _this = this;
        if (!config ||
            !config.entities ||
            !Array.isArray(config.entities) ||
            !(config.image || config.camera_image || config.state_image) ||
            (config.state_image && !config.entity)) {
            throw new Error("Invalid card configuration");
        }
        var entities = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_13__["processConfigEntities"])(config.entities);
        this._entitiesDialog = [];
        this._entitiesToggle = [];
        entities.forEach(function (item) {
            if (config.force_dialog ||
                !_common_const__WEBPACK_IMPORTED_MODULE_11__["DOMAINS_TOGGLE"].has(Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__["computeDomain"])(item.entity))) {
                _this._entitiesDialog.push(item);
            }
            else {
                _this._entitiesToggle.push(item);
            }
        });
        this._config = config;
    };
    HuiPictureGlanceCard.prototype.shouldUpdate = function (changedProps) {
        if (Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_15__["hasConfigOrEntityChanged"])(this, changedProps)) {
            return true;
        }
        var oldHass = changedProps.get("hass");
        if (this._entitiesDialog) {
            for (var _i = 0, _a = this._entitiesDialog; _i < _a.length; _i++) {
                var entity = _a[_i];
                if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                    return true;
                }
            }
        }
        if (this._entitiesToggle) {
            for (var _b = 0, _c = this._entitiesToggle; _b < _c.length; _b++) {
                var entity = _c[_b];
                if (oldHass.states[entity.entity] !== this.hass.states[entity.entity]) {
                    return true;
                }
            }
        }
        return false;
    };
    HuiPictureGlanceCard.prototype.render = function () {
        var _this = this;
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card>\n        <hui-image\n          class=", "\n          @ha-click=", "\n          @ha-hold=", "\n          .longPress=", "\n          .config=", "\n          .hass=", "\n          .image=", "\n          .stateImage=", "\n          .stateFilter=", "\n          .cameraImage=", "\n          .cameraView=", "\n          .entity=", "\n          .aspectRatio=", "\n        ></hui-image>\n        <div class=\"box\">\n          ", "\n          <div>\n            ", "\n          </div>\n          <div>\n            ", "\n          </div>\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card>\n        <hui-image\n          class=",
            "\n          @ha-click=", "\n          @ha-hold=", "\n          .longPress=", "\n          .config=", "\n          .hass=", "\n          .image=", "\n          .stateImage=", "\n          .stateFilter=", "\n          .cameraImage=", "\n          .cameraView=", "\n          .entity=", "\n          .aspectRatio=", "\n        ></hui-image>\n        <div class=\"box\">\n          ",
            "\n          <div>\n            ",
            "\n          </div>\n          <div>\n            ",
            "\n          </div>\n        </div>\n      </ha-card>\n    "])), Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            clickable: Boolean(this._config.tap_action ||
                this._config.hold_action ||
                this._config.camera_image),
        }), this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__["longPress"])(), this._config, this.hass, this._config.image, this._config.state_image, this._config.state_filter, this._config.camera_image, this._config.camera_view, this._config.entity, this._config.aspect_ratio, this._config.title
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <div class=\"title\">", "</div>\n              "], ["\n                <div class=\"title\">", "</div>\n              "])), this._config.title + "hha") : "", this._entitiesDialog.map(function (entityConf) {
            return _this.renderEntity(entityConf, true);
        }), this._entitiesToggle.map(function (entityConf) {
            return _this.renderEntity(entityConf, false);
        }));
    };
    HuiPictureGlanceCard.prototype.renderEntity = function (entityConf, dialog) {
        var stateObj = this.hass.states[entityConf.entity];
        entityConf = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ tap_action: { action: dialog ? "more-info" : "toggle" } }, entityConf);
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning-element\n          label=", "\n        ></hui-warning-element>\n      "], ["\n        <hui-warning-element\n          label=",
                "\n        ></hui-warning-element>\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", entityConf.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-icon\n        @ha-click=", "\n        @ha-hold=", "\n        .longPress=", "\n        .config=", "\n        class=\"", "\"\n        .icon=\"", "\"\n        title=\"", "\"\n      ></ha-icon>\n    "], ["\n      <ha-icon\n        @ha-click=", "\n        @ha-hold=", "\n        .longPress=", "\n        .config=", "\n        class=\"",
            "\"\n        .icon=\"", "\"\n        title=\"",
            "\"\n      ></ha-icon>\n    "])), this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_12__["longPress"])(), entityConf, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "state-on": !STATES_OFF.has(stateObj.state),
        }), entityConf.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__["stateIcon"])(stateObj), "\n            " + Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__["computeStateName"])(stateObj) + " : " + Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_10__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language) + "\n          ");
    };
    HuiPictureGlanceCard.prototype._handleTap = function (ev) {
        var config = ev.currentTarget.config;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_14__["handleClick"])(this, this.hass, config, false);
    };
    HuiPictureGlanceCard.prototype._handleHold = function (ev) {
        var config = ev.currentTarget.config;
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_14__["handleClick"])(this, this.hass, config, true);
    };
    Object.defineProperty(HuiPictureGlanceCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-card {\n        position: relative;\n        min-height: 48px;\n        overflow: hidden;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .box {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 4px 8px;\n        font-size: 16px;\n        line-height: 40px;\n        color: white;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .box .title {\n        font-weight: 500;\n        margin-left: 8px;\n      }\n\n      ha-icon {\n        cursor: pointer;\n        padding: 8px;\n        color: #a9a9a9;\n      }\n\n      ha-icon.state-on {\n        color: white;\n      }\n    "], ["\n      ha-card {\n        position: relative;\n        min-height: 48px;\n        overflow: hidden;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .box {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 4px 8px;\n        font-size: 16px;\n        line-height: 40px;\n        color: white;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .box .title {\n        font-weight: 500;\n        margin-left: 8px;\n      }\n\n      ha-icon {\n        cursor: pointer;\n        padding: 8px;\n        color: #a9a9a9;\n      }\n\n      ha-icon.state-on {\n        color: white;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPictureGlanceCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPictureGlanceCard.prototype, "_config", void 0);
    HuiPictureGlanceCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-picture-glance-card")
    ], HuiPictureGlanceCard);
    return HuiPictureGlanceCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-plant-status-card.ts":
/*!************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-plant-status-card.ts ***!
  \************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







var SENSORS = {
    moisture: "hass:water",
    temperature: "hass:thermometer",
    brightness: "hass:white-balance-sunny",
    conductivity: "hass:emoticon-poop",
    battery: "hass:battery",
};
var HuiPlantStatusCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiPlantStatusCard, _super);
    function HuiPlantStatusCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiPlantStatusCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-plant-status-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-plant-status-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-plant-status-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-plant-status-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-plant-status-card-editor")];
                }
            });
        });
    };
    HuiPlantStatusCard.getStubConfig = function () {
        return { entity: "" };
    };
    HuiPlantStatusCard.prototype.getCardSize = function () {
        return 3;
    };
    HuiPlantStatusCard.prototype.setConfig = function (config) {
        if (!config.entity || config.entity.split(".")[0] !== "plant") {
            throw new Error("Specify an entity from within the plant domain.");
        }
        this._config = config;
    };
    HuiPlantStatusCard.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiPlantStatusCard.prototype.render = function () {
        var _this = this;
        if (!this.hass || !this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card\n        class=\"", "\"\n      >\n        <div\n          class=\"banner\"\n          style=\"background-image:url(", ")\"\n        >\n          <div class=\"header\">\n            ", "\n          </div>\n        </div>\n        <div class=\"content\">\n          ", "\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card\n        class=\"", "\"\n      >\n        <div\n          class=\"banner\"\n          style=\"background-image:url(", ")\"\n        >\n          <div class=\"header\">\n            ", "\n          </div>\n        </div>\n        <div class=\"content\">\n          ",
            "\n        </div>\n      </ha-card>\n    "])), stateObj.attributes.entity_picture ? "has-plant-image" : "", stateObj.attributes.entity_picture, this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__["computeStateName"])(stateObj), this.computeAttributes(stateObj).map(function (item) { return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div\n                class=\"attributes\"\n                @click=\"", "\"\n                .value=\"", "\"\n              >\n                <div>\n                  <ha-icon\n                    icon=\"", "\"\n                  ></ha-icon>\n                </div>\n                <div\n                  class=\"", "\"\n                >\n                  ", "\n                </div>\n                <div class=\"uom\">\n                  ", "\n                </div>\n              </div>\n            "], ["\n              <div\n                class=\"attributes\"\n                @click=\"", "\"\n                .value=\"", "\"\n              >\n                <div>\n                  <ha-icon\n                    icon=\"",
            "\"\n                  ></ha-icon>\n                </div>\n                <div\n                  class=\"",
            "\"\n                >\n                  ", "\n                </div>\n                <div class=\"uom\">\n                  ", "\n                </div>\n              </div>\n            "])), _this._handleMoreInfo, item, _this.computeIcon(item, stateObj.attributes.battery), stateObj.attributes.problem.indexOf(item) === -1
            ? ""
            : "problem", stateObj.attributes[item], stateObj.attributes.unit_of_measurement_dict[item] || ""); }));
    };
    Object.defineProperty(HuiPlantStatusCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .banner {\n        display: flex;\n        align-items: flex-end;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: center;\n        padding-top: 12px;\n      }\n\n      .has-plant-image .banner {\n        padding-top: 30%;\n      }\n\n      .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        /* end paper-font-headline style */\n\n        line-height: 40px;\n        padding: 8px 16px;\n      }\n\n      .has-plant-image .header {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 16px;\n        padding: 16px;\n        color: white;\n        width: 100%;\n        background: rgba(0, 0, 0, var(--dark-secondary-opacity));\n      }\n\n      .content {\n        display: flex;\n        justify-content: space-between;\n        padding: 16px 32px 24px 32px;\n      }\n\n      .has-plant-image .content {\n        padding-bottom: 16px;\n      }\n\n      ha-icon {\n        color: var(--paper-item-icon-color);\n        margin-bottom: 8px;\n      }\n\n      .attributes {\n        cursor: pointer;\n      }\n\n      .attributes div {\n        text-align: center;\n      }\n\n      .problem {\n        color: var(--google-red-500);\n        font-weight: bold;\n      }\n\n      .uom {\n        color: var(--secondary-text-color);\n      }\n    "], ["\n      .banner {\n        display: flex;\n        align-items: flex-end;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: center;\n        padding-top: 12px;\n      }\n\n      .has-plant-image .banner {\n        padding-top: 30%;\n      }\n\n      .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        /* end paper-font-headline style */\n\n        line-height: 40px;\n        padding: 8px 16px;\n      }\n\n      .has-plant-image .header {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 16px;\n        padding: 16px;\n        color: white;\n        width: 100%;\n        background: rgba(0, 0, 0, var(--dark-secondary-opacity));\n      }\n\n      .content {\n        display: flex;\n        justify-content: space-between;\n        padding: 16px 32px 24px 32px;\n      }\n\n      .has-plant-image .content {\n        padding-bottom: 16px;\n      }\n\n      ha-icon {\n        color: var(--paper-item-icon-color);\n        margin-bottom: 8px;\n      }\n\n      .attributes {\n        cursor: pointer;\n      }\n\n      .attributes div {\n        text-align: center;\n      }\n\n      .problem {\n        color: var(--google-red-500);\n        font-weight: bold;\n      }\n\n      .uom {\n        color: var(--secondary-text-color);\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiPlantStatusCard.prototype.computeAttributes = function (stateObj) {
        return Object.keys(SENSORS).filter(function (key) { return key in stateObj.attributes; });
    };
    HuiPlantStatusCard.prototype.computeIcon = function (attr, batLvl) {
        var icon = SENSORS[attr];
        if (attr === "battery") {
            if (batLvl <= 5) {
                return icon + "-alert";
            }
            if (batLvl < 95) {
                return icon + "-" + Math.round(batLvl / 10 - 0.01) * 10;
            }
        }
        return icon;
    };
    HuiPlantStatusCard.prototype._handleMoreInfo = function (ev) {
        var target = ev.currentTarget;
        var stateObj = this.hass.states[this._config.entity];
        if (target.value) {
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_5__["fireEvent"])(this, "hass-more-info", {
                entityId: stateObj.attributes.sensors[target.value],
            });
        }
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPlantStatusCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiPlantStatusCard.prototype, "_config", void 0);
    HuiPlantStatusCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-plant-status-card")
    ], HuiPlantStatusCard);
    return HuiPlantStatusCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-sensor-card.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-sensor-card.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_spinner_paper_spinner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-spinner/paper-spinner */ "./node_modules/@polymer/paper-spinner/paper-spinner.js");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/state_icon */ "./src/common/entity/state_icon.ts");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _data_history__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../data/history */ "./src/data/history.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");












var midPoint = function (_Ax, _Ay, _Bx, _By) {
    var _Zx = (_Ax - _Bx) / 2 + _Bx;
    var _Zy = (_Ay - _By) / 2 + _By;
    return [_Zx, _Zy];
};
var getPath = function (coords) {
    var next;
    var Z;
    var X = 0;
    var Y = 1;
    var path = "";
    var last = coords.filter(Boolean)[0];
    path += "M " + last[X] + "," + last[Y];
    for (var _i = 0, coords_1 = coords; _i < coords_1.length; _i++) {
        var coord = coords_1[_i];
        next = coord;
        Z = midPoint(last[X], last[Y], next[X], next[Y]);
        path += " " + Z[X] + "," + Z[Y];
        path += " Q" + next[X] + "," + next[Y];
        last = next;
    }
    path += " " + next[X] + "," + next[Y];
    return path;
};
var calcPoints = function (history, hours, width, detail, min, max) {
    var coords = [];
    var margin = 5;
    var height = 80;
    width -= 10;
    var yRatio = (max - min) / height;
    yRatio = yRatio !== 0 ? yRatio : height;
    var xRatio = width / (hours - (detail === 1 ? 1 : 0));
    xRatio = isFinite(xRatio) ? xRatio : width;
    var getCoords = function (item, i, offset, depth) {
        if (offset === void 0) { offset = 0; }
        if (depth === void 0) { depth = 1; }
        if (depth > 1) {
            return item.forEach(function (subItem, index) {
                return getCoords(subItem, i, index, depth - 1);
            });
        }
        var average = item.reduce(function (sum, entry) { return sum + parseFloat(entry.state); }, 0) /
            item.length;
        var x = xRatio * (i + offset / 6) + margin;
        var y = height - (average - min) / yRatio + margin * 2;
        return coords.push([x, y]);
    };
    history.forEach(function (item, i) { return getCoords(item, i, 0, detail); });
    if (coords.length === 1) {
        coords[1] = [width + margin, coords[0][1]];
    }
    coords.push([width + margin, coords[coords.length - 1][1]]);
    return coords;
};
var coordinates = function (history, hours, width, detail) {
    history.forEach(function (item) { return (item.state = Number(item.state)); });
    history = history.filter(function (item) { return !Number.isNaN(item.state); });
    var min = Math.min.apply(Math, history.map(function (item) { return item.state; }));
    var max = Math.max.apply(Math, history.map(function (item) { return item.state; }));
    var now = new Date().getTime();
    var reduce = function (res, item, point) {
        var age = now - new Date(item.last_changed).getTime();
        var key = Math.abs(age / (1000 * 3600) - hours);
        if (point) {
            key = (key - Math.floor(key)) * 60;
            key = Number((Math.round(key / 10) * 10).toString()[0]);
        }
        else {
            key = Math.floor(key);
        }
        if (!res[key]) {
            res[key] = [];
        }
        res[key].push(item);
        return res;
    };
    history = history.reduce(function (res, item) { return reduce(res, item, false); }, []);
    if (detail > 1) {
        history = history.map(function (entry) {
            return entry.reduce(function (res, item) { return reduce(res, item, true); }, []);
        });
    }
    return calcPoints(history, hours, width, detail, min, max);
};
var HuiSensorCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiSensorCard, _super);
    function HuiSensorCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiSensorCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-sensor-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-sensor-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-sensor-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-sensor-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-sensor-card-editor")];
                }
            });
        });
    };
    HuiSensorCard.getStubConfig = function () {
        return { entity: "" };
    };
    HuiSensorCard.prototype.setConfig = function (config) {
        if (!config.entity || config.entity.split(".")[0] !== "sensor") {
            throw new Error("Specify an entity from within the sensor domain.");
        }
        var cardConfig = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ detail: 1, theme: "default", hours_to_show: 24 }, config);
        cardConfig.hours_to_show = Number(cardConfig.hours_to_show);
        cardConfig.detail =
            cardConfig.detail === 1 || cardConfig.detail === 2
                ? cardConfig.detail
                : 1;
        this._config = cardConfig;
    };
    HuiSensorCard.prototype.getCardSize = function () {
        return 3;
    };
    HuiSensorCard.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        var graph;
        if (stateObj && this._config.graph === "line") {
            if (!stateObj.attributes.unit_of_measurement) {
                return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n          <hui-warning\n            >Entity: ", " - Has no Unit of Measurement and\n            therefore can not display a line graph.</hui-warning\n          >\n        "], ["\n          <hui-warning\n            >Entity: ", " - Has no Unit of Measurement and\n            therefore can not display a line graph.</hui-warning\n          >\n        "])), this._config.entity);
            }
            else if (!this._history) {
                graph = Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["svg"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\"></svg>\n        "], ["\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\"></svg>\n        "])));
            }
            else {
                graph = Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["svg"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\">\n            <path\n              d=\"", "\"\n              fill=\"none\"\n              stroke=\"var(--accent-color)\"\n              stroke-width=\"5\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        "], ["\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\">\n            <path\n              d=\"", "\"\n              fill=\"none\"\n              stroke=\"var(--accent-color)\"\n              stroke-width=\"5\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        "])), this._history);
            }
        }
        else {
            graph = "";
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card @click=\"", "\">\n        <div class=\"flex\">\n          <div class=\"icon\">\n            <ha-icon\n              .icon=\"", "\"\n            ></ha-icon>\n          </div>\n          <div class=\"header\">\n            <span class=\"name\"\n              >", "</span\n            >\n          </div>\n        </div>\n        <div class=\"flex info\">\n          <span id=\"value\">", "</span>\n          <span id=\"measurement\"\n            >", "</span\n          >\n        </div>\n        <div class=\"graph\"><div>", "</div></div>\n      </ha-card>\n    "], ["\n      <ha-card @click=\"", "\">\n        <div class=\"flex\">\n          <div class=\"icon\">\n            <ha-icon\n              .icon=\"", "\"\n            ></ha-icon>\n          </div>\n          <div class=\"header\">\n            <span class=\"name\"\n              >", "</span\n            >\n          </div>\n        </div>\n        <div class=\"flex info\">\n          <span id=\"value\">", "</span>\n          <span id=\"measurement\"\n            >",
            "</span\n          >\n        </div>\n        <div class=\"graph\"><div>", "</div></div>\n      </ha-card>\n    "])), this._handleClick, this._config.icon || Object(_common_entity_state_icon__WEBPACK_IMPORTED_MODULE_5__["stateIcon"])(stateObj), this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__["computeStateName"])(stateObj), stateObj.state, this._config.unit ||
            stateObj.attributes.unit_of_measurement, graph);
    };
    HuiSensorCard.prototype.firstUpdated = function () {
        this._date = new Date();
    };
    HuiSensorCard.prototype.shouldUpdate = function (changedProps) {
        if (changedProps.has("_history")) {
            return true;
        }
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_11__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiSensorCard.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (!this._config || this._config.graph !== "line" || !this.hass) {
            return;
        }
        var oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_3__["default"])(this, this.hass.themes, this._config.theme);
        }
        var minute = 60000;
        if (changedProps.has("_config")) {
            this._getHistory();
        }
        else if (Date.now() - this._date.getTime() >= minute) {
            this._getHistory();
        }
    };
    HuiSensorCard.prototype._handleClick = function () {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_9__["fireEvent"])(this, "hass-more-info", { entityId: this._config.entity });
    };
    HuiSensorCard.prototype._getHistory = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var endTime, startTime, stateHistory, coords;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        endTime = new Date();
                        startTime = new Date();
                        startTime.setHours(endTime.getHours() - this._config.hours_to_show);
                        return [4 /*yield*/, Object(_data_history__WEBPACK_IMPORTED_MODULE_10__["fetchRecent"])(this.hass, this._config.entity, startTime, endTime)];
                    case 1:
                        stateHistory = _a.sent();
                        if (stateHistory.length < 1 || stateHistory[0].length < 1) {
                            return [2 /*return*/];
                        }
                        coords = coordinates(stateHistory[0], this._config.hours_to_show, 500, this._config.detail);
                        this._history = getPath(coords);
                        this._date = new Date();
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(HuiSensorCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: flex;\n        flex-direction: column;\n      }\n\n      ha-card {\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n        padding: 16px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .flex {\n        display: flex;\n      }\n\n      .header {\n        align-items: center;\n        display: flex;\n        min-width: 0;\n        opacity: 0.8;\n        position: relative;\n      }\n\n      .name {\n        display: block;\n        display: -webkit-box;\n        font-size: 1.2rem;\n        font-weight: 500;\n        max-height: 1.4rem;\n        margin-top: 2px;\n        opacity: 0.8;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        word-wrap: break-word;\n        word-break: break-all;\n      }\n\n      .icon {\n        color: var(--paper-item-icon-color, #44739e);\n        display: inline-block;\n        flex: 0 0 40px;\n        line-height: 40px;\n        position: relative;\n        text-align: center;\n        width: 40px;\n      }\n\n      .info {\n        flex-wrap: wrap;\n        margin: 16px 0 16px 8px;\n      }\n\n      #value {\n        display: inline-block;\n        font-size: 2rem;\n        font-weight: 400;\n        line-height: 1em;\n        margin-right: 4px;\n      }\n\n      #measurement {\n        align-self: flex-end;\n        display: inline-block;\n        font-size: 1.3rem;\n        line-height: 1.2em;\n        margin-top: 0.1em;\n        opacity: 0.6;\n        vertical-align: bottom;\n      }\n\n      .graph {\n        align-self: flex-end;\n        margin: auto;\n        margin-bottom: 0px;\n        position: relative;\n        width: 100%;\n      }\n\n      .graph > div {\n        align-self: flex-end;\n        margin: auto 8px;\n      }\n    "], ["\n      :host {\n        display: flex;\n        flex-direction: column;\n      }\n\n      ha-card {\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n        padding: 16px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .flex {\n        display: flex;\n      }\n\n      .header {\n        align-items: center;\n        display: flex;\n        min-width: 0;\n        opacity: 0.8;\n        position: relative;\n      }\n\n      .name {\n        display: block;\n        display: -webkit-box;\n        font-size: 1.2rem;\n        font-weight: 500;\n        max-height: 1.4rem;\n        margin-top: 2px;\n        opacity: 0.8;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        word-wrap: break-word;\n        word-break: break-all;\n      }\n\n      .icon {\n        color: var(--paper-item-icon-color, #44739e);\n        display: inline-block;\n        flex: 0 0 40px;\n        line-height: 40px;\n        position: relative;\n        text-align: center;\n        width: 40px;\n      }\n\n      .info {\n        flex-wrap: wrap;\n        margin: 16px 0 16px 8px;\n      }\n\n      #value {\n        display: inline-block;\n        font-size: 2rem;\n        font-weight: 400;\n        line-height: 1em;\n        margin-right: 4px;\n      }\n\n      #measurement {\n        align-self: flex-end;\n        display: inline-block;\n        font-size: 1.3rem;\n        line-height: 1.2em;\n        margin-top: 0.1em;\n        opacity: 0.6;\n        vertical-align: bottom;\n      }\n\n      .graph {\n        align-self: flex-end;\n        margin: auto;\n        margin-bottom: 0px;\n        position: relative;\n        width: 100%;\n      }\n\n      .graph > div {\n        align-self: flex-end;\n        margin: auto 8px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSensorCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSensorCard.prototype, "_config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSensorCard.prototype, "_history", void 0);
    HuiSensorCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-sensor-card")
    ], HuiSensorCard);
    return HuiSensorCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-shopping-list-card.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-shopping-list-card.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_repeat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/repeat */ "./node_modules/lit-html/directives/repeat.js");
/* harmony import */ var _polymer_paper_checkbox_paper_checkbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/paper-checkbox/paper-checkbox */ "./node_modules/@polymer/paper-checkbox/paper-checkbox.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _data_shopping_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/shopping-list */ "./src/data/shopping-list.ts");







var HuiShoppingListCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiShoppingListCard, _super);
    function HuiShoppingListCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiShoppingListCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-shopping-list-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-shopping-list-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-shopping-list-editor */ "./src/panels/lovelace/editor/config-elements/hui-shopping-list-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-shopping-list-card-editor")];
                }
            });
        });
    };
    HuiShoppingListCard.getStubConfig = function () {
        return {};
    };
    HuiShoppingListCard.prototype.getCardSize = function () {
        return (this._config ? (this._config.title ? 1 : 0) : 0) + 3;
    };
    HuiShoppingListCard.prototype.setConfig = function (config) {
        this._config = config;
        this._uncheckedItems = [];
        this._checkedItems = [];
        this._fetchData();
    };
    HuiShoppingListCard.prototype.connectedCallback = function () {
        var _this = this;
        _super.prototype.connectedCallback.call(this);
        if (this.hass) {
            this._unsubEvents = this.hass.connection.subscribeEvents(function () { return _this._fetchData(); }, "shopping_list_updated");
            this._fetchData();
        }
    };
    HuiShoppingListCard.prototype.disconnectedCallback = function () {
        _super.prototype.disconnectedCallback.call(this);
        if (this._unsubEvents) {
            this._unsubEvents.then(function (unsub) { return unsub(); });
        }
    };
    HuiShoppingListCard.prototype.render = function () {
        var _this = this;
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card .header=\"", "\">\n        <div class=\"addRow\">\n          <ha-icon\n            class=\"addButton\"\n            @click=\"", "\"\n            icon=\"hass:plus\"\n            .title=\"", "\"\n          >\n          </ha-icon>\n          <paper-item-body>\n            <paper-input\n              no-label-float\n              class=\"addBox\"\n              placeholder=\"", "\"\n              @keydown=\"", "\"\n            ></paper-input>\n          </paper-item-body>\n        </div>\n        ", "\n        ", "\n      </ha-card>\n    "], ["\n      <ha-card .header=\"", "\">\n        <div class=\"addRow\">\n          <ha-icon\n            class=\"addButton\"\n            @click=\"", "\"\n            icon=\"hass:plus\"\n            .title=\"",
            "\"\n          >\n          </ha-icon>\n          <paper-item-body>\n            <paper-input\n              no-label-float\n              class=\"addBox\"\n              placeholder=\"",
            "\"\n              @keydown=\"", "\"\n            ></paper-input>\n          </paper-item-body>\n        </div>\n        ",
            "\n        ",
            "\n      </ha-card>\n    "])), this._config.title, this._addItem, this.hass.localize("ui.panel.lovelace.cards.shopping-list.add_item"), this.hass.localize("ui.panel.lovelace.cards.shopping-list.add_item"), this._addKeyPress, Object(lit_html_directives_repeat__WEBPACK_IMPORTED_MODULE_2__["repeat"])(this._uncheckedItems, function (item) { return item.id; }, function (item, index) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div class=\"editRow\">\n                <paper-checkbox\n                  slot=\"item-icon\"\n                  id=\"", "\"\n                  ?checked=\"", "\"\n                  .itemId=\"", "\"\n                  @click=\"", "\"\n                  tabindex=\"0\"\n                ></paper-checkbox>\n                <paper-item-body>\n                  <paper-input\n                    no-label-float\n                    .value=\"", "\"\n                    .itemId=\"", "\"\n                    @change=\"", "\"\n                  ></paper-input>\n                </paper-item-body>\n              </div>\n            "], ["\n              <div class=\"editRow\">\n                <paper-checkbox\n                  slot=\"item-icon\"\n                  id=\"", "\"\n                  ?checked=\"", "\"\n                  .itemId=\"", "\"\n                  @click=\"", "\"\n                  tabindex=\"0\"\n                ></paper-checkbox>\n                <paper-item-body>\n                  <paper-input\n                    no-label-float\n                    .value=\"", "\"\n                    .itemId=\"", "\"\n                    @change=\"", "\"\n                  ></paper-input>\n                </paper-item-body>\n              </div>\n            "])), index, item.complete, item.id, _this._completeItem, item.name, item.id, _this._saveEdit);
        }), this._checkedItems.length > 0
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div class=\"divider\"></div>\n              <div class=\"checked\">\n                <span class=\"label\">\n                  ", "\n                </span>\n                <ha-icon\n                  class=\"clearall\"\n                  @click=\"", "\"\n                  icon=\"hass:notification-clear-all\"\n                  .title=\"", "\"\n                >\n                </ha-icon>\n              </div>\n              ", "\n            "], ["\n              <div class=\"divider\"></div>\n              <div class=\"checked\">\n                <span class=\"label\">\n                  ",
                "\n                </span>\n                <ha-icon\n                  class=\"clearall\"\n                  @click=\"", "\"\n                  icon=\"hass:notification-clear-all\"\n                  .title=\"",
                "\"\n                >\n                </ha-icon>\n              </div>\n              ",
                "\n            "])), this.hass.localize("ui.panel.lovelace.cards.shopping-list.checked_items"), this._clearItems, this.hass.localize("ui.panel.lovelace.cards.shopping-list.clear_items"), Object(lit_html_directives_repeat__WEBPACK_IMPORTED_MODULE_2__["repeat"])(this._checkedItems, function (item) { return item.id; }, function (item, index) {
                return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                    <div class=\"editRow\">\n                      <paper-checkbox\n                        slot=\"item-icon\"\n                        id=\"", "\"\n                        ?checked=\"", "\"\n                        .itemId=\"", "\"\n                        @click=\"", "\"\n                        tabindex=\"0\"\n                      ></paper-checkbox>\n                      <paper-item-body>\n                        <paper-input\n                          no-label-float\n                          .value=\"", "\"\n                          .itemId=\"", "\"\n                          @change=\"", "\"\n                        ></paper-input>\n                      </paper-item-body>\n                    </div>\n                  "], ["\n                    <div class=\"editRow\">\n                      <paper-checkbox\n                        slot=\"item-icon\"\n                        id=\"", "\"\n                        ?checked=\"", "\"\n                        .itemId=\"", "\"\n                        @click=\"", "\"\n                        tabindex=\"0\"\n                      ></paper-checkbox>\n                      <paper-item-body>\n                        <paper-input\n                          no-label-float\n                          .value=\"", "\"\n                          .itemId=\"", "\"\n                          @change=\"", "\"\n                        ></paper-input>\n                      </paper-item-body>\n                    </div>\n                  "])), index, item.complete, item.id, _this._completeItem, item.name, item.id, _this._saveEdit);
            })) : "");
    };
    Object.defineProperty(HuiShoppingListCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .editRow,\n      .addRow {\n        display: flex;\n        flex-direction: row;\n      }\n\n      .addButton {\n        padding: 9px 15px 11px 15px;\n        cursor: pointer;\n      }\n\n      paper-item-body {\n        width: 75%;\n      }\n\n      paper-checkbox {\n        padding: 11px 11px 11px 18px;\n      }\n\n      paper-input {\n        --paper-input-container-underline: {\n          display: none;\n        }\n        --paper-input-container-underline-focus: {\n          display: none;\n        }\n        --paper-input-container-underline-disabled: {\n          display: none;\n        }\n        position: relative;\n        top: 1px;\n      }\n\n      .checked {\n        margin-left: 17px;\n        margin-bottom: 11px;\n        margin-top: 11px;\n      }\n\n      .label {\n        color: var(--primary-color);\n      }\n\n      .divider {\n        height: 1px;\n        background-color: var(--divider-color);\n        margin: 10px;\n      }\n\n      .clearall {\n        cursor: pointer;\n        margin-bottom: 3px;\n        float: right;\n        padding-right: 10px;\n      }\n\n      .addRow > ha-icon {\n        color: var(--secondary-text-color);\n      }\n    "], ["\n      .editRow,\n      .addRow {\n        display: flex;\n        flex-direction: row;\n      }\n\n      .addButton {\n        padding: 9px 15px 11px 15px;\n        cursor: pointer;\n      }\n\n      paper-item-body {\n        width: 75%;\n      }\n\n      paper-checkbox {\n        padding: 11px 11px 11px 18px;\n      }\n\n      paper-input {\n        --paper-input-container-underline: {\n          display: none;\n        }\n        --paper-input-container-underline-focus: {\n          display: none;\n        }\n        --paper-input-container-underline-disabled: {\n          display: none;\n        }\n        position: relative;\n        top: 1px;\n      }\n\n      .checked {\n        margin-left: 17px;\n        margin-bottom: 11px;\n        margin-top: 11px;\n      }\n\n      .label {\n        color: var(--primary-color);\n      }\n\n      .divider {\n        height: 1px;\n        background-color: var(--divider-color);\n        margin: 10px;\n      }\n\n      .clearall {\n        cursor: pointer;\n        margin-bottom: 3px;\n        float: right;\n        padding-right: 10px;\n      }\n\n      .addRow > ha-icon {\n        color: var(--secondary-text-color);\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiShoppingListCard.prototype._fetchData = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var checkedItems, uncheckedItems, items, key;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.hass) return [3 /*break*/, 2];
                        checkedItems = [];
                        uncheckedItems = [];
                        return [4 /*yield*/, Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["fetchItems"])(this.hass)];
                    case 1:
                        items = _a.sent();
                        for (key in items) {
                            if (items[key].complete) {
                                checkedItems.push(items[key]);
                            }
                            else {
                                uncheckedItems.push(items[key]);
                            }
                        }
                        this._checkedItems = checkedItems;
                        this._uncheckedItems = uncheckedItems;
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    HuiShoppingListCard.prototype._completeItem = function (ev) {
        var _this = this;
        Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["updateItem"])(this.hass, ev.target.itemId, {
            complete: ev.target.checked,
        }).catch(function () { return _this._fetchData(); });
    };
    HuiShoppingListCard.prototype._saveEdit = function (ev) {
        var _this = this;
        Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["updateItem"])(this.hass, ev.target.itemId, {
            name: ev.target.value,
        }).catch(function () { return _this._fetchData(); });
        ev.target.blur();
    };
    HuiShoppingListCard.prototype._clearItems = function () {
        var _this = this;
        if (this.hass) {
            Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["clearItems"])(this.hass).catch(function () { return _this._fetchData(); });
        }
    };
    Object.defineProperty(HuiShoppingListCard.prototype, "_newItem", {
        get: function () {
            return this.shadowRoot.querySelector(".addBox");
        },
        enumerable: true,
        configurable: true
    });
    HuiShoppingListCard.prototype._addItem = function (ev) {
        var _this = this;
        var newItem = this._newItem;
        if (newItem.value.length > 0) {
            Object(_data_shopping_list__WEBPACK_IMPORTED_MODULE_6__["addItem"])(this.hass, newItem.value).catch(function () { return _this._fetchData(); });
        }
        newItem.value = "";
        if (ev) {
            newItem.focus();
        }
    };
    HuiShoppingListCard.prototype._addKeyPress = function (ev) {
        if (ev.keyCode === 13) {
            this._addItem(null);
        }
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiShoppingListCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiShoppingListCard.prototype, "_config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiShoppingListCard.prototype, "_uncheckedItems", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiShoppingListCard.prototype, "_checkedItems", void 0);
    HuiShoppingListCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-shopping-list-card")
    ], HuiShoppingListCard);
    return HuiShoppingListCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-stack-card.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-stack-card.ts ***!
  \*****************************************************/
/*! exports provided: HuiStackCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiStackCard", function() { return HuiStackCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");



var HuiStackCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiStackCard, _super);
    function HuiStackCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(HuiStackCard, "properties", {
        get: function () {
            return {
                _config: {},
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HuiStackCard.prototype, "hass", {
        set: function (hass) {
            this._hass = hass;
            if (!this._cards) {
                return;
            }
            for (var _i = 0, _a = this._cards; _i < _a.length; _i++) {
                var element = _a[_i];
                element.hass = this._hass;
            }
        },
        enumerable: true,
        configurable: true
    });
    HuiStackCard.prototype.setConfig = function (config) {
        var _this = this;
        if (!config || !config.cards || !Array.isArray(config.cards)) {
            throw new Error("Card config incorrect");
        }
        this._config = config;
        this._cards = config.cards.map(function (card) {
            var element = _this._createCardElement(card);
            return element;
        });
    };
    HuiStackCard.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ", "\n      ", "\n      <div id=\"root\">", "</div>\n    "], ["\n      ", "\n      ",
            "\n      <div id=\"root\">", "</div>\n    "])), this.renderStyle(), this._config.title
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n            <div class=\"card-header\">", "</div>\n          "], ["\n            <div class=\"card-header\">", "</div>\n          "])), this._config.title) : "", this._cards);
    };
    Object.defineProperty(HuiStackCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .card-header {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        display: block;\n        padding: 24px 16px 16px;\n      }\n    "], ["\n      .card-header {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        display: block;\n        padding: 24px 16px 16px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiStackCard.prototype._createCardElement = function (cardConfig) {
        var _this = this;
        var element = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_2__["createCardElement"])(cardConfig);
        if (this._hass) {
            element.hass = this._hass;
        }
        element.addEventListener("ll-rebuild", function (ev) {
            ev.stopPropagation();
            _this._rebuildCard(element, cardConfig);
        }, { once: true });
        return element;
    };
    HuiStackCard.prototype._rebuildCard = function (cardElToReplace, config) {
        var newCardEl = this._createCardElement(config);
        cardElToReplace.parentElement.replaceChild(newCardEl, cardElToReplace);
        this._cards = this._cards.map(function (curCardEl) {
            return curCardEl === cardElToReplace ? newCardEl : curCardEl;
        });
    };
    return HuiStackCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-thermostat-card.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-thermostat-card.ts ***!
  \**********************************************************/
/*! exports provided: HuiThermostatCard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiThermostatCard", function() { return HuiThermostatCard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _resources_jquery_roundslider_ondemand__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../resources/jquery.roundslider.ondemand */ "./src/resources/jquery.roundslider.ondemand.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _data_climate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../data/climate */ "./src/data/climate.ts");














var thermostatConfig = {
    radius: 150,
    circleShape: "pie",
    startAngle: 315,
    width: 5,
    lineCap: "round",
    handleSize: "+10",
    showTooltip: false,
    animation: false,
};
var modeIcons = {
    auto: "hass:calendar-repeat",
    heat_cool: "hass:autorenew",
    heat: "hass:fire",
    cool: "hass:snowflake",
    off: "hass:power",
    fan_only: "hass:fan",
    dry: "hass:water-percent",
};
var HuiThermostatCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiThermostatCard, _super);
    function HuiThermostatCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiThermostatCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-thermostat-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-thermostat-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-thermostat-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-thermostat-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-thermostat-card-editor")];
                }
            });
        });
    };
    HuiThermostatCard.getStubConfig = function () {
        return { entity: "" };
    };
    HuiThermostatCard.prototype.getCardSize = function () {
        return 4;
    };
    HuiThermostatCard.prototype.setConfig = function (config) {
        if (!config.entity || config.entity.split(".")[0] !== "climate") {
            throw new Error("Specify an entity from within the climate domain.");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ theme: "default" }, config);
    };
    HuiThermostatCard.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        if (this._updated && !this._loaded) {
            this._initialLoad();
        }
    };
    HuiThermostatCard.prototype.render = function () {
        var _a;
        var _this = this;
        if (!this.hass || !this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        var mode = stateObj.state in modeIcons ? stateObj.state : "unknown-mode";
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ", "\n      <ha-card\n        class=\"", "\"\n      >\n        <div id=\"root\">\n          <paper-icon-button\n            icon=\"hass:dots-vertical\"\n            class=\"more-info\"\n            @click=\"", "\"\n          ></paper-icon-button>\n          <div id=\"thermostat\"></div>\n          <div id=\"tooltip\">\n            <div class=\"title\">\n              ", "\n            </div>\n            <div class=\"current-temperature\">\n              <span class=\"current-temperature-text\">\n                ", "\n                ", "\n              </span>\n            </div>\n            <div class=\"climate-info\">\n              <div id=\"set-temperature\"></div>\n              <div class=\"current-mode\">\n                ", "\n                ", "\n              </div>\n              <div class=\"modes\">\n                ", "\n              </div>\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    "], ["\n      ", "\n      <ha-card\n        class=\"",
            "\"\n      >\n        <div id=\"root\">\n          <paper-icon-button\n            icon=\"hass:dots-vertical\"\n            class=\"more-info\"\n            @click=\"", "\"\n          ></paper-icon-button>\n          <div id=\"thermostat\"></div>\n          <div id=\"tooltip\">\n            <div class=\"title\">\n              ", "\n            </div>\n            <div class=\"current-temperature\">\n              <span class=\"current-temperature-text\">\n                ", "\n                ",
            "\n              </span>\n            </div>\n            <div class=\"climate-info\">\n              <div id=\"set-temperature\"></div>\n              <div class=\"current-mode\">\n                ",
            "\n                ",
            "\n              </div>\n              <div class=\"modes\">\n                ",
            "\n              </div>\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    "])), this.renderStyle(), Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])((_a = {},
            _a[mode] = true,
            _a.large = this._broadCard,
            _a.small = !this._broadCard,
            _a)), this._handleMoreInfo, this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_8__["computeStateName"])(stateObj), stateObj.attributes.current_temperature, stateObj.attributes.current_temperature
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                      <span class=\"uom\"\n                        >", "</span\n                      >\n                    "], ["\n                      <span class=\"uom\"\n                        >", "</span\n                      >\n                    "])), this.hass.config.unit_system.temperature) : "", stateObj.attributes.hvac_action
            ? this.hass.localize("state_attributes.climate.hvac_action." + stateObj.attributes.hvac_action)
            : this.hass.localize("state.climate." + stateObj.state), stateObj.attributes.preset_mode &&
            stateObj.attributes.preset_mode !== _data_climate__WEBPACK_IMPORTED_MODULE_13__["CLIMATE_PRESET_NONE"]
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                      -\n                      ", "\n                    "], ["\n                      -\n                      ",
                "\n                    "])), this.hass.localize("state_attributes.climate.preset_mode." + stateObj.attributes.preset_mode) || stateObj.attributes.preset_mode) : "", (stateObj.attributes.hvac_modes || [])
            .concat()
            .sort(_data_climate__WEBPACK_IMPORTED_MODULE_13__["compareClimateHvacModes"])
            .map(function (modeItem) { return _this._renderIcon(modeItem, mode); }));
    };
    HuiThermostatCard.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_9__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiThermostatCard.prototype.firstUpdated = function () {
        this._updated = true;
        if (this.isConnected && !this._loaded) {
            this._initialLoad();
        }
    };
    HuiThermostatCard.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (!this._config || !this.hass || !changedProps.has("hass")) {
            return;
        }
        var oldHass = changedProps.get("hass");
        if (!oldHass || oldHass.themes !== this.hass.themes) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_7__["default"])(this, this.hass.themes, this._config.theme);
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return;
        }
        if (this._jQuery &&
            // If jQuery changed, we just rendered in firstUpdated
            !changedProps.has("_jQuery") &&
            (!oldHass || oldHass.states[this._config.entity] !== stateObj)) {
            var _a = this._genSliderValue(stateObj), sliderValue = _a[0], uiValue = _a[1], sliderType = _a[2];
            this._jQuery("#thermostat", this.shadowRoot).roundSlider({
                sliderType: sliderType,
                value: sliderValue,
                disabled: sliderValue === null,
                min: stateObj.attributes.min_temp,
                max: stateObj.attributes.max_temp,
            });
            this._updateSetTemp(uiValue);
        }
    };
    Object.defineProperty(HuiThermostatCard.prototype, "_stepSize", {
        get: function () {
            var stateObj = this.hass.states[this._config.entity];
            if (stateObj.attributes.target_temp_step) {
                return stateObj.attributes.target_temp_step;
            }
            return this.hass.config.unit_system.temperature === _common_const__WEBPACK_IMPORTED_MODULE_11__["UNIT_F"] ? 1 : 0.5;
        },
        enumerable: true,
        configurable: true
    });
    HuiThermostatCard.prototype._initialLoad = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var stateObj, radius, loaded, _a, sliderValue, uiValue, sliderType;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        stateObj = this.hass.states[this._config.entity];
                        if (!stateObj) {
                            // Card will require refresh to work again
                            return [2 /*return*/];
                        }
                        this._loaded = true;
                        return [4 /*yield*/, this.updateComplete];
                    case 1:
                        _b.sent();
                        radius = this.clientWidth / 3.2;
                        this._broadCard = this.clientWidth > 390;
                        if (radius === 0) {
                            radius = 100;
                        }
                        this.shadowRoot.querySelector("#thermostat").style.height = radius * 2 + "px";
                        return [4 /*yield*/, Object(_resources_jquery_roundslider_ondemand__WEBPACK_IMPORTED_MODULE_10__["loadRoundslider"])()];
                    case 2:
                        loaded = _b.sent();
                        this._roundSliderStyle = loaded.roundSliderStyle;
                        this._jQuery = loaded.jQuery;
                        _a = this._genSliderValue(stateObj), sliderValue = _a[0], uiValue = _a[1], sliderType = _a[2];
                        this._jQuery("#thermostat", this.shadowRoot).roundSlider(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, thermostatConfig), { radius: radius, min: stateObj.attributes.min_temp, max: stateObj.attributes.max_temp, sliderType: sliderType, change: function (value) { return _this._setTemperature(value); }, drag: function (value) { return _this._dragEvent(value); }, value: sliderValue, disabled: sliderValue === null, step: this._stepSize }));
                        this._updateSetTemp(uiValue);
                        return [2 /*return*/];
                }
            });
        });
    };
    HuiThermostatCard.prototype._genSliderValue = function (stateObj) {
        var sliderType;
        var sliderValue;
        var uiValue;
        if (stateObj.state === "unavailable") {
            sliderType = "min-range";
            sliderValue = null;
            uiValue = this.hass.localize("state.default.unavailable");
        }
        else if (stateObj.attributes.target_temp_low &&
            stateObj.attributes.target_temp_high) {
            sliderType = "range";
            sliderValue = stateObj.attributes.target_temp_low + ", " + stateObj.attributes.target_temp_high;
            uiValue = this.formatTemp([
                String(stateObj.attributes.target_temp_low),
                String(stateObj.attributes.target_temp_high),
            ], false);
        }
        else {
            sliderType = "min-range";
            sliderValue = Number.isFinite(Number(stateObj.attributes.temperature))
                ? stateObj.attributes.temperature
                : null;
            uiValue = sliderValue !== null ? String(sliderValue) : "";
        }
        return [sliderValue, uiValue, sliderType];
    };
    HuiThermostatCard.prototype._updateSetTemp = function (value) {
        this.shadowRoot.querySelector("#set-temperature").innerHTML = value;
    };
    HuiThermostatCard.prototype._dragEvent = function (e) {
        this._updateSetTemp(this.formatTemp(String(e.value).split(","), true));
    };
    HuiThermostatCard.prototype._setTemperature = function (e) {
        var stateObj = this.hass.states[this._config.entity];
        if (stateObj.attributes.target_temp_low &&
            stateObj.attributes.target_temp_high) {
            if (e.handle.index === 1) {
                this.hass.callService("climate", "set_temperature", {
                    entity_id: this._config.entity,
                    target_temp_low: e.handle.value,
                    target_temp_high: stateObj.attributes.target_temp_high,
                });
            }
            else {
                this.hass.callService("climate", "set_temperature", {
                    entity_id: this._config.entity,
                    target_temp_low: stateObj.attributes.target_temp_low,
                    target_temp_high: e.handle.value,
                });
            }
        }
        else {
            this.hass.callService("climate", "set_temperature", {
                entity_id: this._config.entity,
                temperature: e.value,
            });
        }
    };
    HuiThermostatCard.prototype._renderIcon = function (mode, currentMode) {
        if (!modeIcons[mode]) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-icon\n        class=\"", "\"\n        .mode=\"", "\"\n        .icon=\"", "\"\n        @click=\"", "\"\n      ></ha-icon>\n    "], ["\n      <ha-icon\n        class=\"", "\"\n        .mode=\"", "\"\n        .icon=\"", "\"\n        @click=\"", "\"\n      ></ha-icon>\n    "])), Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({ "selected-icon": currentMode === mode }), mode, modeIcons[mode], this._handleModeClick);
    };
    HuiThermostatCard.prototype._handleMoreInfo = function () {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_12__["fireEvent"])(this, "hass-more-info", {
            entityId: this._config.entity,
        });
    };
    HuiThermostatCard.prototype._handleModeClick = function (e) {
        this.hass.callService("climate", "set_hvac_mode", {
            entity_id: this._config.entity,
            hvac_mode: e.currentTarget.mode,
        });
    };
    HuiThermostatCard.prototype.formatTemp = function (temps, spaceStepSize) {
        temps = temps.filter(Boolean);
        // If we are sliding the slider, append 0 to the temperatures if we're
        // having a 0.5 step size, so that the text doesn't jump while sliding
        if (spaceStepSize) {
            var stepSize_1 = this._stepSize;
            temps = temps.map(function (val) {
                return val.includes(".") || stepSize_1 === 1 ? val : val + ".0";
            });
        }
        return temps.join("-");
    };
    HuiThermostatCard.prototype.renderStyle = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ", "\n      <style>\n        :host {\n          display: block;\n        }\n        ha-card {\n          overflow: hidden;\n          --rail-border-color: transparent;\n          --auto-color: green;\n          --eco-color: springgreen;\n          --cool-color: #2b9af9;\n          --heat-color: #ff8100;\n          --manual-color: #44739e;\n          --off-color: #8a8a8a;\n          --fan_only-color: #8a8a8a;\n          --dry-color: #efbd07;\n          --idle-color: #8a8a8a;\n          --unknown-color: #bac;\n        }\n        #root {\n          position: relative;\n          overflow: hidden;\n        }\n        .auto,\n        .heat_cool {\n          --mode-color: var(--auto-color);\n        }\n        .cool {\n          --mode-color: var(--cool-color);\n        }\n        .heat {\n          --mode-color: var(--heat-color);\n        }\n        .manual {\n          --mode-color: var(--manual-color);\n        }\n        .off {\n          --mode-color: var(--off-color);\n        }\n        .fan_only {\n          --mode-color: var(--fan_only-color);\n        }\n        .eco {\n          --mode-color: var(--eco-color);\n        }\n        .dry {\n          --mode-color: var(--dry-color);\n        }\n        .idle {\n          --mode-color: var(--idle-color);\n        }\n        .unknown-mode {\n          --mode-color: var(--unknown-color);\n        }\n        .no-title {\n          --title-position-top: 33% !important;\n        }\n        .large {\n          --thermostat-padding-top: 25px;\n          --thermostat-margin-bottom: 25px;\n          --title-font-size: 28px;\n          --title-position-top: 27%;\n          --climate-info-position-top: 81%;\n          --set-temperature-font-size: 25px;\n          --current-temperature-font-size: 71px;\n          --current-temperature-position-top: 10%;\n          --current-temperature-text-padding-left: 15px;\n          --uom-font-size: 20px;\n          --uom-margin-left: -18px;\n          --current-mode-font-size: 18px;\n          --set-temperature-margin-bottom: -5px;\n        }\n        .small {\n          --thermostat-padding-top: 15px;\n          --thermostat-margin-bottom: 15px;\n          --title-font-size: 18px;\n          --title-position-top: 28%;\n          --climate-info-position-top: 79%;\n          --set-temperature-font-size: 16px;\n          --current-temperature-font-size: 25px;\n          --current-temperature-position-top: 5%;\n          --current-temperature-text-padding-left: 7px;\n          --uom-font-size: 12px;\n          --uom-margin-left: -5px;\n          --current-mode-font-size: 14px;\n          --set-temperature-margin-bottom: 0px;\n        }\n        #thermostat {\n          margin: 0 auto var(--thermostat-margin-bottom);\n          padding-top: var(--thermostat-padding-top);\n        }\n        #thermostat .rs-range-color {\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n        #thermostat .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 10px;\n          margin: -10px 0 0 -8px !important;\n          border: 2px solid var(--disabled-text-color);\n        }\n        #thermostat .rs-handle.rs-focus {\n          border-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-handle:after {\n          border-color: var(--mode-color, var(--disabled-text-color));\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-border {\n          border-color: var(--rail-border-color);\n        }\n        #thermostat .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n        #thermostat .rs-readonly {\n          z-index: 10;\n          top: auto;\n        }\n        #thermostat .rs-inner.rs-bg-color.rs-border,\n        #thermostat .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n          color: var(--primary-text-color);\n        }\n        #set-temperature {\n          font-size: var(--set-temperature-font-size);\n          margin-bottom: var(--set-temperature-margin-bottom);\n          min-height: 1.2em;\n        }\n        .title {\n          font-size: var(--title-font-size);\n          position: absolute;\n          top: var(--title-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n        .climate-info {\n          position: absolute;\n          top: var(--climate-info-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 100%;\n        }\n        .current-mode {\n          font-size: var(--current-mode-font-size);\n          color: var(--secondary-text-color);\n        }\n        .modes {\n          margin-top: 16px;\n        }\n        .modes ha-icon {\n          color: var(--disabled-text-color);\n          cursor: pointer;\n          display: inline-block;\n          margin: 0 10px;\n        }\n        .modes ha-icon.selected-icon {\n          color: var(--mode-color);\n        }\n        .current-temperature {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          font-size: var(--current-temperature-font-size);\n        }\n        .current-temperature-text {\n          padding-left: var(--current-temperature-text-padding-left);\n        }\n        .uom {\n          font-size: var(--uom-font-size);\n          vertical-align: top;\n          margin-left: var(--uom-margin-left);\n        }\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    "], ["\n      ", "\n      <style>\n        :host {\n          display: block;\n        }\n        ha-card {\n          overflow: hidden;\n          --rail-border-color: transparent;\n          --auto-color: green;\n          --eco-color: springgreen;\n          --cool-color: #2b9af9;\n          --heat-color: #ff8100;\n          --manual-color: #44739e;\n          --off-color: #8a8a8a;\n          --fan_only-color: #8a8a8a;\n          --dry-color: #efbd07;\n          --idle-color: #8a8a8a;\n          --unknown-color: #bac;\n        }\n        #root {\n          position: relative;\n          overflow: hidden;\n        }\n        .auto,\n        .heat_cool {\n          --mode-color: var(--auto-color);\n        }\n        .cool {\n          --mode-color: var(--cool-color);\n        }\n        .heat {\n          --mode-color: var(--heat-color);\n        }\n        .manual {\n          --mode-color: var(--manual-color);\n        }\n        .off {\n          --mode-color: var(--off-color);\n        }\n        .fan_only {\n          --mode-color: var(--fan_only-color);\n        }\n        .eco {\n          --mode-color: var(--eco-color);\n        }\n        .dry {\n          --mode-color: var(--dry-color);\n        }\n        .idle {\n          --mode-color: var(--idle-color);\n        }\n        .unknown-mode {\n          --mode-color: var(--unknown-color);\n        }\n        .no-title {\n          --title-position-top: 33% !important;\n        }\n        .large {\n          --thermostat-padding-top: 25px;\n          --thermostat-margin-bottom: 25px;\n          --title-font-size: 28px;\n          --title-position-top: 27%;\n          --climate-info-position-top: 81%;\n          --set-temperature-font-size: 25px;\n          --current-temperature-font-size: 71px;\n          --current-temperature-position-top: 10%;\n          --current-temperature-text-padding-left: 15px;\n          --uom-font-size: 20px;\n          --uom-margin-left: -18px;\n          --current-mode-font-size: 18px;\n          --set-temperature-margin-bottom: -5px;\n        }\n        .small {\n          --thermostat-padding-top: 15px;\n          --thermostat-margin-bottom: 15px;\n          --title-font-size: 18px;\n          --title-position-top: 28%;\n          --climate-info-position-top: 79%;\n          --set-temperature-font-size: 16px;\n          --current-temperature-font-size: 25px;\n          --current-temperature-position-top: 5%;\n          --current-temperature-text-padding-left: 7px;\n          --uom-font-size: 12px;\n          --uom-margin-left: -5px;\n          --current-mode-font-size: 14px;\n          --set-temperature-margin-bottom: 0px;\n        }\n        #thermostat {\n          margin: 0 auto var(--thermostat-margin-bottom);\n          padding-top: var(--thermostat-padding-top);\n        }\n        #thermostat .rs-range-color {\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n        #thermostat .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 10px;\n          margin: -10px 0 0 -8px !important;\n          border: 2px solid var(--disabled-text-color);\n        }\n        #thermostat .rs-handle.rs-focus {\n          border-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-handle:after {\n          border-color: var(--mode-color, var(--disabled-text-color));\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-border {\n          border-color: var(--rail-border-color);\n        }\n        #thermostat .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n        #thermostat .rs-readonly {\n          z-index: 10;\n          top: auto;\n        }\n        #thermostat .rs-inner.rs-bg-color.rs-border,\n        #thermostat .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n          color: var(--primary-text-color);\n        }\n        #set-temperature {\n          font-size: var(--set-temperature-font-size);\n          margin-bottom: var(--set-temperature-margin-bottom);\n          min-height: 1.2em;\n        }\n        .title {\n          font-size: var(--title-font-size);\n          position: absolute;\n          top: var(--title-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n        .climate-info {\n          position: absolute;\n          top: var(--climate-info-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 100%;\n        }\n        .current-mode {\n          font-size: var(--current-mode-font-size);\n          color: var(--secondary-text-color);\n        }\n        .modes {\n          margin-top: 16px;\n        }\n        .modes ha-icon {\n          color: var(--disabled-text-color);\n          cursor: pointer;\n          display: inline-block;\n          margin: 0 10px;\n        }\n        .modes ha-icon.selected-icon {\n          color: var(--mode-color);\n        }\n        .current-temperature {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          font-size: var(--current-temperature-font-size);\n        }\n        .current-temperature-text {\n          padding-left: var(--current-temperature-text-padding-left);\n        }\n        .uom {\n          font-size: var(--uom-font-size);\n          vertical-align: top;\n          margin-left: var(--uom-margin-left);\n        }\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    "])), this._roundSliderStyle);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiThermostatCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiThermostatCard.prototype, "_config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiThermostatCard.prototype, "_roundSliderStyle", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiThermostatCard.prototype, "_jQuery", void 0);
    HuiThermostatCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-thermostat-card")
    ], HuiThermostatCard);
    return HuiThermostatCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-vertical-stack-card.ts":
/*!**************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-vertical-stack-card.ts ***!
  \**************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _hui_stack_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hui-stack-card */ "./src/panels/lovelace/cards/hui-stack-card.ts");




var HuiVerticalStackCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiVerticalStackCard, _super);
    function HuiVerticalStackCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiVerticalStackCard.prototype.getCardSize = function () {
        var totalSize = 0;
        if (!this._cards) {
            return totalSize;
        }
        for (var _i = 0, _a = this._cards; _i < _a.length; _i++) {
            var element = _a[_i];
            totalSize += Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_2__["computeCardSize"])(element);
        }
        return totalSize;
    };
    HuiVerticalStackCard.prototype.renderStyle = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 4px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n    "], ["\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 4px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n    "])));
    };
    return HuiVerticalStackCard;
}(_hui_stack_card__WEBPACK_IMPORTED_MODULE_3__["HuiStackCard"]));
customElements.define("hui-vertical-stack-card", HuiVerticalStackCard);
var templateObject_1;


/***/ }),

/***/ "./src/panels/lovelace/cards/hui-weather-forecast-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-weather-forecast-card.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-card */ "./src/components/ha-card.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/dom/toggle_attribute */ "./src/common/dom/toggle_attribute.ts");










var cardinalDirections = [
    "N",
    "NNE",
    "NE",
    "ENE",
    "E",
    "ESE",
    "SE",
    "SSE",
    "S",
    "SSW",
    "SW",
    "WSW",
    "W",
    "WNW",
    "NW",
    "NNW",
    "N",
];
var weatherIcons = {
    "clear-night": "hass:weather-night",
    cloudy: "hass:weather-cloudy",
    exceptional: "hass:alert-circle-outline",
    fog: "hass:weather-fog",
    hail: "hass:weather-hail",
    lightning: "hass:weather-lightning",
    "lightning-rainy": "hass:weather-lightning-rainy",
    partlycloudy: "hass:weather-partly-cloudy",
    pouring: "hass:weather-pouring",
    rainy: "hass:weather-rainy",
    snowy: "hass:weather-snowy",
    "snowy-rainy": "hass:weather-snowy-rainy",
    sunny: "hass:weather-sunny",
    windy: "hass:weather-windy",
    "windy-variant": "hass:weather-windy-variant",
};
var HuiWeatherForecastCard = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiWeatherForecastCard, _super);
    function HuiWeatherForecastCard() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiWeatherForecastCard.getConfigElement = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(/*! import() | hui-weather-forecast-card-editor */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e("hui-weather-forecast-card-editor")]).then(__webpack_require__.bind(null, /*! ../editor/config-elements/hui-weather-forecast-card-editor */ "./src/panels/lovelace/editor/config-elements/hui-weather-forecast-card-editor.ts"))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, document.createElement("hui-weather-forecast-card-editor")];
                }
            });
        });
    };
    HuiWeatherForecastCard.getStubConfig = function () {
        return { entity: "" };
    };
    HuiWeatherForecastCard.prototype.getCardSize = function () {
        return 4;
    };
    HuiWeatherForecastCard.prototype.setConfig = function (config) {
        if (!config || !config.entity) {
            throw new Error("Invalid card configuration");
        }
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_4__["isValidEntityId"])(config.entity)) {
            throw new Error("Invalid Entity");
        }
        this._config = config;
    };
    HuiWeatherForecastCard.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (changedProps.has("hass")) {
            Object(_common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_9__["toggleAttribute"])(this, "rtl", Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__["computeRTL"])(this.hass));
        }
    };
    HuiWeatherForecastCard.prototype.render = function () {
        var _this = this;
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        var forecast = stateObj.attributes.forecast
            ? stateObj.attributes.forecast.slice(0, 5)
            : undefined;
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_14 || (templateObject_14 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-card @click=\"", "\">\n        <div class=\"header\">\n          ", "\n          <div class=\"name\">\n            ", "\n          </div>\n        </div>\n        <div class=\"content\">\n          <div class=\"now\">\n            <div class=\"main\">\n              ", "\n              <div class=\"temp\">\n                ", "<span\n                  >", "</span\n                >\n              </div>\n            </div>\n            <div class=\"attributes\">\n              ", "\n              ", "\n              ", "\n            </div>\n          </div>\n          ", "\n        </div>\n      </ha-card>\n    "], ["\n      <ha-card @click=\"", "\">\n        <div class=\"header\">\n          ",
            "\n          <div class=\"name\">\n            ", "\n          </div>\n        </div>\n        <div class=\"content\">\n          <div class=\"now\">\n            <div class=\"main\">\n              ",
            "\n              <div class=\"temp\">\n                ", "<span\n                  >", "</span\n                >\n              </div>\n            </div>\n            <div class=\"attributes\">\n              ",
            "\n              ",
            "\n              ",
            "\n            </div>\n          </div>\n          ",
            "\n        </div>\n      </ha-card>\n    "])), this.handleClick, this.hass.localize("state.weather." + stateObj.state) ||
            stateObj.state, (this._config && this._config.name) || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_5__["computeStateName"])(stateObj), stateObj.state in weatherIcons
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                    <ha-icon icon=\"", "\"></ha-icon>\n                  "], ["\n                    <ha-icon icon=\"", "\"></ha-icon>\n                  "])), weatherIcons[stateObj.state]) : "", stateObj.attributes.temperature, this.getUnit("temperature"), this._showValue(stateObj.attributes.pressure)
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                    <div>\n                      ", ":\n                      <span class=\"measurand\">\n                        ", "\n                        ", "\n                      </span>\n                    </div>\n                  "], ["\n                    <div>\n                      ",
                ":\n                      <span class=\"measurand\">\n                        ", "\n                        ", "\n                      </span>\n                    </div>\n                  "])), this.hass.localize("ui.card.weather.attributes.air_pressure"), stateObj.attributes.pressure, this.getUnit("air_pressure")) : "", this._showValue(stateObj.attributes.humidity)
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                    <div>\n                      ", ":\n                      <span class=\"measurand\"\n                        >", " %</span\n                      >\n                    </div>\n                  "], ["\n                    <div>\n                      ",
                ":\n                      <span class=\"measurand\"\n                        >", " %</span\n                      >\n                    </div>\n                  "])), this.hass.localize("ui.card.weather.attributes.humidity"), stateObj.attributes.humidity) : "", this._showValue(stateObj.attributes.wind_speed)
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                    <div>\n                      ", ":\n                      <span class=\"measurand\">\n                        ", "\n                        ", "/h\n                      </span>\n                      ", "\n                    </div>\n                  "], ["\n                    <div>\n                      ",
                ":\n                      <span class=\"measurand\">\n                        ", "\n                        ", "/h\n                      </span>\n                      ", "\n                    </div>\n                  "])), this.hass.localize("ui.card.weather.attributes.wind_speed"), stateObj.attributes.wind_speed, this.getUnit("length"), this.getWindBearing(stateObj.attributes.wind_bearing)) : "", forecast
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_13 || (templateObject_13 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <div class=\"forecast\">\n                  ", "\n                </div>\n              "], ["\n                <div class=\"forecast\">\n                  ",
                "\n                </div>\n              "])), forecast.map(function (item) { return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_12 || (templateObject_12 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                      <div>\n                        <div class=\"weekday\">\n                          ", "<br />\n                          ", "\n                        </div>\n                        ", "\n                        ", "\n                        ", "\n                        ", "\n                      </div>\n                    "], ["\n                      <div>\n                        <div class=\"weekday\">\n                          ",
                "<br />\n                          ",
                "\n                        </div>\n                        ",
                "\n                        ",
                "\n                        ",
                "\n                        ",
                "\n                      </div>\n                    "])), new Date(item.datetime).toLocaleDateString(_this.hass.language, { weekday: "short" }), !_this._showValue(item.templow)
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                                ", "\n                              "], ["\n                                ",
                    "\n                              "])), new Date(item.datetime).toLocaleTimeString(_this.hass.language, { hour: "numeric" })) : "", _this._showValue(item.condition)
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                              <div class=\"icon\">\n                                <ha-icon\n                                  .icon=\"", "\"\n                                ></ha-icon>\n                              </div>\n                            "], ["\n                              <div class=\"icon\">\n                                <ha-icon\n                                  .icon=\"", "\"\n                                ></ha-icon>\n                              </div>\n                            "])), weatherIcons[item.condition]) : "", _this._showValue(item.temperature)
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_9 || (templateObject_9 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                              <div class=\"temp\">\n                                ", "\n                                ", "\n                              </div>\n                            "], ["\n                              <div class=\"temp\">\n                                ", "\n                                ", "\n                              </div>\n                            "])), item.temperature, _this.getUnit("temperature")) : "", _this._showValue(item.templow)
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_10 || (templateObject_10 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                              <div class=\"templow\">\n                                ", " ", "\n                              </div>\n                            "], ["\n                              <div class=\"templow\">\n                                ", " ", "\n                              </div>\n                            "])), item.templow, _this.getUnit("temperature")) : "", _this._showValue(item.precipitation)
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_11 || (templateObject_11 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                              <div class=\"precipitation\">\n                                ", "\n                                ", "\n                              </div>\n                            "], ["\n                              <div class=\"precipitation\">\n                                ", "\n                                ", "\n                              </div>\n                            "])), item.precipitation, _this.getUnit("precipitation")) : ""); })) : "");
    };
    HuiWeatherForecastCard.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiWeatherForecastCard.prototype.handleClick = function () {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__["fireEvent"])(this, "hass-more-info", { entityId: this._config.entity });
    };
    HuiWeatherForecastCard.prototype.getUnit = function (measure) {
        var lengthUnit = this.hass.config.unit_system.length || "";
        switch (measure) {
            case "air_pressure":
                return lengthUnit === "km" ? "hPa" : "inHg";
            case "length":
                return lengthUnit;
            case "precipitation":
                return lengthUnit === "km" ? "mm" : "in";
            default:
                return this.hass.config.unit_system[measure] || "";
        }
    };
    HuiWeatherForecastCard.prototype.windBearingToText = function (degree) {
        var degreenum = parseInt(degree, 10);
        if (isFinite(degreenum)) {
            // tslint:disable-next-line: no-bitwise
            return cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];
        }
        return degree;
    };
    HuiWeatherForecastCard.prototype.getWindBearing = function (bearing) {
        if (bearing != null) {
            var cardinalDirection = this.windBearingToText(bearing);
            return "(" + (this.hass.localize("ui.card.weather.cardinal_direction." + cardinalDirection.toLowerCase()) || cardinalDirection) + ")";
        }
        return "";
    };
    HuiWeatherForecastCard.prototype._showValue = function (item) {
        return typeof item !== "undefined" && item !== null;
    };
    Object.defineProperty(HuiWeatherForecastCard, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_15 || (templateObject_15 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        cursor: pointer;\n      }\n\n      .content {\n        padding: 0 20px 20px;\n      }\n\n      ha-icon {\n        color: var(--paper-item-icon-color);\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        text-rendering: var(\n          --paper-font-common-expensive-kerning_-_text-rendering\n        );\n        opacity: var(--dark-primary-opacity);\n        padding: 24px 16px 16px;\n        display: flex;\n        align-items: baseline;\n      }\n\n      .name {\n        margin-left: 16px;\n        font-size: 16px;\n        color: var(--secondary-text-color);\n      }\n\n      :host([rtl]) .name {\n        margin-left: 0px;\n        margin-right: 16px;\n      }\n\n      .now {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n      }\n\n      .main {\n        display: flex;\n        align-items: center;\n        margin-right: 32px;\n      }\n\n      :host([rtl]) .main {\n        margin-right: 0px;\n      }\n\n      .main ha-icon {\n        --iron-icon-height: 72px;\n        --iron-icon-width: 72px;\n        margin-right: 8px;\n      }\n\n      :host([rtl]) .main ha-icon {\n        margin-right: 0px;\n      }\n\n      .main .temp {\n        font-size: 52px;\n        line-height: 1em;\n        position: relative;\n      }\n\n      :host([rtl]) .main .temp {\n        direction: ltr;\n        margin-right: 28px;\n      }\n\n      .main .temp span {\n        font-size: 24px;\n        line-height: 1em;\n        position: absolute;\n        top: 4px;\n      }\n\n      .measurand {\n        display: inline-block;\n      }\n\n      :host([rtl]) .measurand {\n        direction: ltr;\n      }\n\n      .forecast {\n        margin-top: 16px;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .forecast div {\n        flex: 0 0 auto;\n        text-align: center;\n      }\n\n      .forecast .icon {\n        margin: 4px 0;\n        text-align: center;\n      }\n\n      :host([rtl]) .forecast .temp {\n        direction: ltr;\n      }\n\n      .weekday {\n        font-weight: bold;\n      }\n\n      .attributes,\n      .templow,\n      .precipitation {\n        color: var(--secondary-text-color);\n      }\n\n      :host([rtl]) .precipitation {\n        direction: ltr;\n      }\n    "], ["\n      :host {\n        cursor: pointer;\n      }\n\n      .content {\n        padding: 0 20px 20px;\n      }\n\n      ha-icon {\n        color: var(--paper-item-icon-color);\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        text-rendering: var(\n          --paper-font-common-expensive-kerning_-_text-rendering\n        );\n        opacity: var(--dark-primary-opacity);\n        padding: 24px 16px 16px;\n        display: flex;\n        align-items: baseline;\n      }\n\n      .name {\n        margin-left: 16px;\n        font-size: 16px;\n        color: var(--secondary-text-color);\n      }\n\n      :host([rtl]) .name {\n        margin-left: 0px;\n        margin-right: 16px;\n      }\n\n      .now {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n      }\n\n      .main {\n        display: flex;\n        align-items: center;\n        margin-right: 32px;\n      }\n\n      :host([rtl]) .main {\n        margin-right: 0px;\n      }\n\n      .main ha-icon {\n        --iron-icon-height: 72px;\n        --iron-icon-width: 72px;\n        margin-right: 8px;\n      }\n\n      :host([rtl]) .main ha-icon {\n        margin-right: 0px;\n      }\n\n      .main .temp {\n        font-size: 52px;\n        line-height: 1em;\n        position: relative;\n      }\n\n      :host([rtl]) .main .temp {\n        direction: ltr;\n        margin-right: 28px;\n      }\n\n      .main .temp span {\n        font-size: 24px;\n        line-height: 1em;\n        position: absolute;\n        top: 4px;\n      }\n\n      .measurand {\n        display: inline-block;\n      }\n\n      :host([rtl]) .measurand {\n        direction: ltr;\n      }\n\n      .forecast {\n        margin-top: 16px;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .forecast div {\n        flex: 0 0 auto;\n        text-align: center;\n      }\n\n      .forecast .icon {\n        margin: 4px 0;\n        text-align: center;\n      }\n\n      :host([rtl]) .forecast .temp {\n        direction: ltr;\n      }\n\n      .weekday {\n        font-weight: bold;\n      }\n\n      .attributes,\n      .templow,\n      .precipitation {\n        color: var(--secondary-text-color);\n      }\n\n      :host([rtl]) .precipitation {\n        direction: ltr;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiWeatherForecastCard.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiWeatherForecastCard.prototype, "_config", void 0);
    HuiWeatherForecastCard = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-weather-forecast-card")
    ], HuiWeatherForecastCard);
    return HuiWeatherForecastCard;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15;


/***/ }),

/***/ "./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts":
/*!*********************************************************************************!*\
  !*** ./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts ***!
  \*********************************************************************************/
/*! exports provided: createStyledHuiElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createStyledHuiElement", function() { return createStyledHuiElement; });
/* harmony import */ var _common_create_hui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/create-hui-element */ "./src/panels/lovelace/common/create-hui-element.ts");

function createStyledHuiElement(elementConfig) {
    var element = Object(_common_create_hui_element__WEBPACK_IMPORTED_MODULE_0__["createHuiElement"])(elementConfig);
    // keep conditional card as a transparent container so let its position remain static
    if (element.tagName !== "HUI-CONDITIONAL-ELEMENT") {
        element.classList.add("element");
    }
    if (elementConfig.style) {
        Object.keys(elementConfig.style).forEach(function (prop) {
            element.style.setProperty(prop, elementConfig.style[prop]);
        });
    }
    return element;
}


/***/ }),

/***/ "./src/panels/lovelace/common/call-service.ts":
/*!****************************************************!*\
  !*** ./src/panels/lovelace/common/call-service.ts ***!
  \****************************************************/
/*! exports provided: callService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "callService", function() { return callService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var callService = function (config, hass) {
    var entityId = config.entity;
    var _a = config.service.split(".", 2), domain = _a[0], service = _a[1];
    var serviceData = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ entity_id: entityId }, config.service_data);
    hass.callService(domain, service, serviceData);
};


/***/ }),

/***/ "./src/panels/lovelace/common/compute-card-size.ts":
/*!*********************************************************!*\
  !*** ./src/panels/lovelace/common/compute-card-size.ts ***!
  \*********************************************************/
/*! exports provided: computeCardSize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeCardSize", function() { return computeCardSize; });
var computeCardSize = function (card) {
    return typeof card.getCardSize === "function" ? card.getCardSize() : 1;
};


/***/ }),

/***/ "./src/panels/lovelace/common/compute-tooltip.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/common/compute-tooltip.ts ***!
  \*******************************************************/
/*! exports provided: computeTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTooltip", function() { return computeTooltip; });
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");

var computeTooltip = function (hass, config) {
    if (config.title === null) {
        return "";
    }
    if (config.title) {
        return config.title;
    }
    var stateName = "";
    var tooltip = "";
    if (config.entity) {
        stateName =
            config.entity in hass.states
                ? Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_0__["computeStateName"])(hass.states[config.entity])
                : config.entity;
    }
    var tapTooltip = config.tap_action
        ? computeActionTooltip(hass, stateName, config.tap_action, false)
        : "";
    var holdTooltip = config.hold_action
        ? computeActionTooltip(hass, stateName, config.hold_action, true)
        : "";
    var newline = tapTooltip && holdTooltip ? "\n" : "";
    tooltip = tapTooltip + newline + holdTooltip;
    return tooltip;
};
function computeActionTooltip(hass, state, config, isHold) {
    if (!config || !config.action || config.action === "none") {
        return "";
    }
    var tooltip = (isHold
        ? hass.localize("ui.panel.lovelace.cards.picture-elements.hold")
        : hass.localize("ui.panel.lovelace.cards.picture-elements.tap")) + " ";
    switch (config.action) {
        case "navigate":
            tooltip += "" + hass.localize("ui.panel.lovelace.cards.picture-elements.navigate_to", "location", config.navigation_path);
            break;
        case "url":
            tooltip += "" + hass.localize("ui.panel.lovelace.cards.picture-elements.url", "url_path", config.url_path);
            break;
        case "toggle":
            tooltip += "" + hass.localize("ui.panel.lovelace.cards.picture-elements.toggle", "name", state);
            break;
        case "call-service":
            tooltip += "" + hass.localize("ui.panel.lovelace.cards.picture-elements.call_service", "name", config.service);
            break;
        case "more-info":
            tooltip += "" + hass.localize("ui.panel.lovelace.cards.picture-elements.more_info", "name", state);
            break;
    }
    return tooltip;
}


/***/ }),

/***/ "./src/panels/lovelace/common/create-card-element.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/common/create-card-element.ts ***!
  \***********************************************************/
/*! exports provided: createCardElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createCardElement", function() { return createCardElement; });
/* harmony import */ var deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deep-clone-simple */ "./node_modules/deep-clone-simple/index.js");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _cards_hui_alarm_panel_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../cards/hui-alarm-panel-card */ "./src/panels/lovelace/cards/hui-alarm-panel-card.ts");
/* harmony import */ var _cards_hui_conditional_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../cards/hui-conditional-card */ "./src/panels/lovelace/cards/hui-conditional-card.ts");
/* harmony import */ var _cards_hui_entities_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../cards/hui-entities-card */ "./src/panels/lovelace/cards/hui-entities-card.ts");
/* harmony import */ var _cards_hui_entity_button_card__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cards/hui-entity-button-card */ "./src/panels/lovelace/cards/hui-entity-button-card.ts");
/* harmony import */ var _cards_hui_entity_filter_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../cards/hui-entity-filter-card */ "./src/panels/lovelace/cards/hui-entity-filter-card.ts");
/* harmony import */ var _cards_hui_error_card__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../cards/hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");
/* harmony import */ var _cards_hui_glance_card__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../cards/hui-glance-card */ "./src/panels/lovelace/cards/hui-glance-card.ts");
/* harmony import */ var _cards_hui_history_graph_card__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../cards/hui-history-graph-card */ "./src/panels/lovelace/cards/hui-history-graph-card.js");
/* harmony import */ var _cards_hui_horizontal_stack_card__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../cards/hui-horizontal-stack-card */ "./src/panels/lovelace/cards/hui-horizontal-stack-card.ts");
/* harmony import */ var _cards_hui_iframe_card__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../cards/hui-iframe-card */ "./src/panels/lovelace/cards/hui-iframe-card.ts");
/* harmony import */ var _cards_hui_light_card__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../cards/hui-light-card */ "./src/panels/lovelace/cards/hui-light-card.ts");
/* harmony import */ var _cards_hui_map_card__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../cards/hui-map-card */ "./src/panels/lovelace/cards/hui-map-card.ts");
/* harmony import */ var _cards_hui_markdown_card__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../cards/hui-markdown-card */ "./src/panels/lovelace/cards/hui-markdown-card.ts");
/* harmony import */ var _cards_hui_media_control_card__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../cards/hui-media-control-card */ "./src/panels/lovelace/cards/hui-media-control-card.js");
/* harmony import */ var _cards_hui_picture_card__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../cards/hui-picture-card */ "./src/panels/lovelace/cards/hui-picture-card.ts");
/* harmony import */ var _cards_hui_picture_elements_card__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../cards/hui-picture-elements-card */ "./src/panels/lovelace/cards/hui-picture-elements-card.ts");
/* harmony import */ var _cards_hui_picture_entity_card__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../cards/hui-picture-entity-card */ "./src/panels/lovelace/cards/hui-picture-entity-card.ts");
/* harmony import */ var _cards_hui_picture_glance_card__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../cards/hui-picture-glance-card */ "./src/panels/lovelace/cards/hui-picture-glance-card.ts");
/* harmony import */ var _cards_hui_plant_status_card__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../cards/hui-plant-status-card */ "./src/panels/lovelace/cards/hui-plant-status-card.ts");
/* harmony import */ var _cards_hui_sensor_card__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../cards/hui-sensor-card */ "./src/panels/lovelace/cards/hui-sensor-card.ts");
/* harmony import */ var _cards_hui_vertical_stack_card__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../cards/hui-vertical-stack-card */ "./src/panels/lovelace/cards/hui-vertical-stack-card.ts");
/* harmony import */ var _cards_hui_shopping_list_card__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../cards/hui-shopping-list-card */ "./src/panels/lovelace/cards/hui-shopping-list-card.ts");
/* harmony import */ var _cards_hui_thermostat_card__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../cards/hui-thermostat-card */ "./src/panels/lovelace/cards/hui-thermostat-card.ts");
/* harmony import */ var _cards_hui_weather_forecast_card__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../cards/hui-weather-forecast-card */ "./src/panels/lovelace/cards/hui-weather-forecast-card.ts");
/* harmony import */ var _cards_hui_gauge_card__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../cards/hui-gauge-card */ "./src/panels/lovelace/cards/hui-gauge-card.ts");



























var CARD_TYPES = new Set([
    "alarm-panel",
    "conditional",
    "entities",
    "entity-button",
    "entity-filter",
    "error",
    "gauge",
    "glance",
    "history-graph",
    "horizontal-stack",
    "iframe",
    "light",
    "map",
    "markdown",
    "media-control",
    "picture",
    "picture-elements",
    "picture-entity",
    "picture-glance",
    "plant-status",
    "sensor",
    "shopping-list",
    "thermostat",
    "vertical-stack",
    "weather-forecast",
]);
var CUSTOM_TYPE_PREFIX = "custom:";
var TIMEOUT = 2000;
var _createElement = function (tag, config) {
    var element = document.createElement(tag);
    try {
        element.setConfig(Object(deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__["default"])(config));
    }
    catch (err) {
        // tslint:disable-next-line
        console.error(tag, err);
        return _createErrorElement(err.message, config);
    }
    return element;
};
var _createErrorElement = function (error, config) { return Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_7__["createErrorCardElement"])(Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_7__["createErrorCardConfig"])(error, config)); };
var createCardElement = function (config) {
    if (!config || typeof config !== "object" || !config.type) {
        return _createErrorElement("No card type configured.", config);
    }
    if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {
        var tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);
        if (customElements.get(tag)) {
            return _createElement(tag, config);
        }
        var element_1 = _createErrorElement("Custom element doesn't exist: " + tag + ".", config);
        element_1.style.display = "None";
        var timer_1 = window.setTimeout(function () {
            element_1.style.display = "";
        }, TIMEOUT);
        customElements.whenDefined(tag).then(function () {
            clearTimeout(timer_1);
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__["fireEvent"])(element_1, "ll-rebuild");
        });
        return element_1;
    }
    if (!CARD_TYPES.has(config.type)) {
        return _createErrorElement("Unknown card type encountered: " + config.type + ".", config);
    }
    return _createElement("hui-" + config.type + "-card", config);
};


/***/ }),

/***/ "./src/panels/lovelace/common/create-hui-element.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/common/create-hui-element.ts ***!
  \**********************************************************/
/*! exports provided: createHuiElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createHuiElement", function() { return createHuiElement; });
/* harmony import */ var deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deep-clone-simple */ "./node_modules/deep-clone-simple/index.js");
/* harmony import */ var _elements_hui_conditional_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../elements/hui-conditional-element */ "./src/panels/lovelace/elements/hui-conditional-element.ts");
/* harmony import */ var _elements_hui_icon_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../elements/hui-icon-element */ "./src/panels/lovelace/elements/hui-icon-element.ts");
/* harmony import */ var _elements_hui_image_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../elements/hui-image-element */ "./src/panels/lovelace/elements/hui-image-element.ts");
/* harmony import */ var _elements_hui_service_button_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../elements/hui-service-button-element */ "./src/panels/lovelace/elements/hui-service-button-element.ts");
/* harmony import */ var _elements_hui_state_badge_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../elements/hui-state-badge-element */ "./src/panels/lovelace/elements/hui-state-badge-element.ts");
/* harmony import */ var _elements_hui_state_icon_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../elements/hui-state-icon-element */ "./src/panels/lovelace/elements/hui-state-icon-element.ts");
/* harmony import */ var _elements_hui_state_label_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../elements/hui-state-label-element */ "./src/panels/lovelace/elements/hui-state-label-element.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _cards_hui_error_card__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../cards/hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");










var CUSTOM_TYPE_PREFIX = "custom:";
var ELEMENT_TYPES = new Set([
    "conditional",
    "icon",
    "image",
    "service-button",
    "state-badge",
    "state-icon",
    "state-label",
]);
var TIMEOUT = 2000;
var _createElement = function (tag, config) {
    var element = document.createElement(tag);
    try {
        element.setConfig(Object(deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__["default"])(config));
    }
    catch (err) {
        // tslint:disable-next-line
        console.error(tag, err);
        return _createErrorElement(err.message, config);
    }
    return element;
};
var _createErrorElement = function (error, config) { return Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_9__["createErrorCardElement"])(Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_9__["createErrorCardConfig"])(error, config)); };
function _hideErrorElement(element) {
    element.style.display = "None";
    return window.setTimeout(function () {
        element.style.display = "";
    }, TIMEOUT);
}
var createHuiElement = function (config) {
    if (!config || typeof config !== "object" || !config.type) {
        return _createErrorElement("No element type configured.", config);
    }
    if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {
        var tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);
        if (customElements.get(tag)) {
            return _createElement(tag, config);
        }
        var element_1 = _createErrorElement("Custom element doesn't exist: " + tag + ".", config);
        var timer_1 = _hideErrorElement(element_1);
        customElements.whenDefined(tag).then(function () {
            clearTimeout(timer_1);
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_8__["fireEvent"])(element_1, "ll-rebuild");
        });
        return element_1;
    }
    if (!ELEMENT_TYPES.has(config.type)) {
        return _createErrorElement("Unknown element type encountered: " + config.type + ".", config);
    }
    return _createElement("hui-" + config.type + "-element", config);
};


/***/ }),

/***/ "./src/panels/lovelace/common/create-row-element.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/common/create-row-element.ts ***!
  \**********************************************************/
/*! exports provided: createRowElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRowElement", function() { return createRowElement; });
/* harmony import */ var deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! deep-clone-simple */ "./node_modules/deep-clone-simple/index.js");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _cards_hui_error_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../cards/hui-error-card */ "./src/panels/lovelace/cards/hui-error-card.ts");
/* harmony import */ var _entity_rows_hui_climate_entity_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../entity-rows/hui-climate-entity-row */ "./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts");
/* harmony import */ var _entity_rows_hui_cover_entity_row__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entity-rows/hui-cover-entity-row */ "./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts");
/* harmony import */ var _entity_rows_hui_group_entity_row__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entity-rows/hui-group-entity-row */ "./src/panels/lovelace/entity-rows/hui-group-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_datetime_entity_row__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../entity-rows/hui-input-datetime-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_number_entity_row__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../entity-rows/hui-input-number-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_select_entity_row__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../entity-rows/hui-input-select-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts");
/* harmony import */ var _entity_rows_hui_input_text_entity_row__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../entity-rows/hui-input-text-entity-row */ "./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts");
/* harmony import */ var _entity_rows_hui_lock_entity_row__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entity-rows/hui-lock-entity-row */ "./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts");
/* harmony import */ var _entity_rows_hui_media_player_entity_row__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entity-rows/hui-media-player-entity-row */ "./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts");
/* harmony import */ var _entity_rows_hui_scene_entity_row__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entity-rows/hui-scene-entity-row */ "./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts");
/* harmony import */ var _entity_rows_hui_script_entity_row__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entity-rows/hui-script-entity-row */ "./src/panels/lovelace/entity-rows/hui-script-entity-row.ts");
/* harmony import */ var _entity_rows_hui_sensor_entity_row__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../entity-rows/hui-sensor-entity-row */ "./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts");
/* harmony import */ var _entity_rows_hui_text_entity_row__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../entity-rows/hui-text-entity-row */ "./src/panels/lovelace/entity-rows/hui-text-entity-row.ts");
/* harmony import */ var _entity_rows_hui_timer_entity_row__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../entity-rows/hui-timer-entity-row */ "./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts");
/* harmony import */ var _entity_rows_hui_toggle_entity_row__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../entity-rows/hui-toggle-entity-row */ "./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts");
/* harmony import */ var _special_rows_hui_call_service_row__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../special-rows/hui-call-service-row */ "./src/panels/lovelace/special-rows/hui-call-service-row.ts");
/* harmony import */ var _special_rows_hui_divider_row__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../special-rows/hui-divider-row */ "./src/panels/lovelace/special-rows/hui-divider-row.ts");
/* harmony import */ var _special_rows_hui_section_row__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../special-rows/hui-section-row */ "./src/panels/lovelace/special-rows/hui-section-row.ts");
/* harmony import */ var _special_rows_hui_weblink_row__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../special-rows/hui-weblink-row */ "./src/panels/lovelace/special-rows/hui-weblink-row.ts");
/* harmony import */ var _special_rows_hui_cast_row__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../special-rows/hui-cast-row */ "./src/panels/lovelace/special-rows/hui-cast-row.ts");























var CUSTOM_TYPE_PREFIX = "custom:";
var SPECIAL_TYPES = new Set([
    "call-service",
    "divider",
    "section",
    "weblink",
    "cast",
    "select",
]);
var DOMAIN_TO_ELEMENT_TYPE = {
    alert: "toggle",
    automation: "toggle",
    climate: "climate",
    cover: "cover",
    fan: "toggle",
    group: "group",
    input_boolean: "toggle",
    input_number: "input-number",
    input_select: "input-select",
    input_text: "input-text",
    light: "toggle",
    lock: "lock",
    media_player: "media-player",
    remote: "toggle",
    scene: "scene",
    script: "script",
    sensor: "sensor",
    timer: "timer",
    switch: "toggle",
    vacuum: "toggle",
    // Temporary. Once climate is rewritten,
    // water heater should get it's own row.
    water_heater: "climate",
    input_datetime: "input-datetime",
};
var TIMEOUT = 2000;
var _createElement = function (tag, config) {
    var element = document.createElement(tag);
    try {
        element.setConfig(Object(deep_clone_simple__WEBPACK_IMPORTED_MODULE_0__["default"])(config));
    }
    catch (err) {
        // tslint:disable-next-line
        console.error(tag, err);
        return _createErrorElement(err.message, config);
    }
    return element;
};
var _createErrorElement = function (error, config) { return Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_2__["createErrorCardElement"])(Object(_cards_hui_error_card__WEBPACK_IMPORTED_MODULE_2__["createErrorCardConfig"])(error, config)); };
var _hideErrorElement = function (element) {
    element.style.display = "None";
    return window.setTimeout(function () {
        element.style.display = "";
    }, TIMEOUT);
};
var createRowElement = function (config) {
    var tag;
    if (!config ||
        typeof config !== "object" ||
        (!config.entity && !config.type)) {
        return _createErrorElement("Invalid config given.", config);
    }
    var type = config.type || "default";
    if (SPECIAL_TYPES.has(type)) {
        return _createElement("hui-" + type + "-row", config);
    }
    if (type.startsWith(CUSTOM_TYPE_PREFIX)) {
        tag = type.substr(CUSTOM_TYPE_PREFIX.length);
        if (customElements.get(tag)) {
            return _createElement(tag, config);
        }
        var element_1 = _createErrorElement("Custom element doesn't exist: " + tag + ".", config);
        var timer_1 = _hideErrorElement(element_1);
        customElements.whenDefined(tag).then(function () {
            clearTimeout(timer_1);
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__["fireEvent"])(element_1, "ll-rebuild");
        });
        return element_1;
    }
    if (!config.entity) {
        return _createErrorElement("Invalid config given.", config);
    }
    var domain = config.entity.split(".", 1)[0];
    tag = "hui-" + (DOMAIN_TO_ELEMENT_TYPE[domain] || "text") + "-entity-row";
    return _createElement(tag, config);
};


/***/ }),

/***/ "./src/panels/lovelace/common/directives/long-press-directive.ts":
/*!***********************************************************************!*\
  !*** ./src/panels/lovelace/common/directives/long-press-directive.ts ***!
  \***********************************************************************/
/*! exports provided: longPressBind, longPress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "longPressBind", function() { return longPressBind; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "longPress", function() { return longPress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/lit-html.js");
/* harmony import */ var _material_mwc_ripple__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material/mwc-ripple */ "./node_modules/@material/mwc-ripple/mwc-ripple.js");



var isTouch = "ontouchstart" in window ||
    navigator.maxTouchPoints > 0 ||
    navigator.msMaxTouchPoints > 0;
var LongPress = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(LongPress, _super);
    function LongPress() {
        var _this = _super.call(this) || this;
        _this.holdTime = 500;
        _this.ripple = document.createElement("mwc-ripple");
        _this.timer = undefined;
        _this.held = false;
        _this.cooldownStart = false;
        _this.cooldownEnd = false;
        return _this;
    }
    LongPress.prototype.connectedCallback = function () {
        var _this = this;
        Object.assign(this.style, {
            position: "absolute",
            width: isTouch ? "100px" : "50px",
            height: isTouch ? "100px" : "50px",
            transform: "translate(-50%, -50%)",
            pointerEvents: "none",
        });
        this.appendChild(this.ripple);
        this.ripple.primary = true;
        [
            "touchcancel",
            "mouseout",
            "mouseup",
            "touchmove",
            "mousewheel",
            "wheel",
            "scroll",
        ].forEach(function (ev) {
            document.addEventListener(ev, function () {
                clearTimeout(_this.timer);
                _this.stopAnimation();
                _this.timer = undefined;
            }, { passive: true });
        });
    };
    LongPress.prototype.bind = function (element) {
        var _this = this;
        if (element.longPress) {
            return;
        }
        element.longPress = true;
        element.addEventListener("contextmenu", function (ev) {
            var e = ev || window.event;
            if (e.preventDefault) {
                e.preventDefault();
            }
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            e.cancelBubble = true;
            e.returnValue = false;
            return false;
        });
        var clickStart = function (ev) {
            if (_this.cooldownStart) {
                return;
            }
            _this.held = false;
            var x;
            var y;
            if (ev.touches) {
                x = ev.touches[0].pageX;
                y = ev.touches[0].pageY;
            }
            else {
                x = ev.pageX;
                y = ev.pageY;
            }
            _this.timer = window.setTimeout(function () {
                _this.startAnimation(x, y);
                _this.held = true;
            }, _this.holdTime);
            _this.cooldownStart = true;
            window.setTimeout(function () { return (_this.cooldownStart = false); }, 100);
        };
        var clickEnd = function (ev) {
            if (_this.cooldownEnd ||
                (["touchend", "touchcancel"].includes(ev.type) &&
                    _this.timer === undefined)) {
                return;
            }
            clearTimeout(_this.timer);
            _this.stopAnimation();
            _this.timer = undefined;
            if (_this.held) {
                element.dispatchEvent(new Event("ha-hold"));
            }
            else {
                element.dispatchEvent(new Event("ha-click"));
            }
            _this.cooldownEnd = true;
            window.setTimeout(function () { return (_this.cooldownEnd = false); }, 100);
        };
        element.addEventListener("touchstart", clickStart, { passive: true });
        element.addEventListener("touchend", clickEnd);
        element.addEventListener("touchcancel", clickEnd);
        // iOS 13 sends a complete normal touchstart-touchend series of events followed by a mousedown-click series.
        // That might be a bug, but until it's fixed, this should make long-press work.
        // If it's not a bug that is fixed, this might need updating with the next iOS version.
        // Note that all events (both touch and mouse) must be listened for in order to work on computers with both mouse and touchscreen.
        var isIOS13 = window.navigator.userAgent.match(/iPhone OS 13_/);
        if (!isIOS13) {
            element.addEventListener("mousedown", clickStart, { passive: true });
            element.addEventListener("click", clickEnd);
        }
    };
    LongPress.prototype.startAnimation = function (x, y) {
        Object.assign(this.style, {
            left: x + "px",
            top: y + "px",
            display: null,
        });
        this.ripple.disabled = false;
        this.ripple.active = true;
        this.ripple.unbounded = true;
    };
    LongPress.prototype.stopAnimation = function () {
        this.ripple.active = false;
        this.ripple.disabled = true;
        this.style.display = "none";
    };
    return LongPress;
}(HTMLElement));
customElements.define("long-press", LongPress);
var getLongPress = function () {
    var body = document.body;
    if (body.querySelector("long-press")) {
        return body.querySelector("long-press");
    }
    var longpress = document.createElement("long-press");
    body.appendChild(longpress);
    return longpress;
};
var longPressBind = function (element) {
    var longpress = getLongPress();
    if (!longpress) {
        return;
    }
    longpress.bind(element);
};
var longPress = Object(lit_html__WEBPACK_IMPORTED_MODULE_1__["directive"])(function () { return function (part) {
    longPressBind(part.committer.element);
}; });


/***/ }),

/***/ "./src/panels/lovelace/common/entity/toggle-entity.ts":
/*!************************************************************!*\
  !*** ./src/panels/lovelace/common/entity/toggle-entity.ts ***!
  \************************************************************/
/*! exports provided: toggleEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toggleEntity", function() { return toggleEntity; });
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _turn_on_off_entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./turn-on-off-entity */ "./src/panels/lovelace/common/entity/turn-on-off-entity.ts");


var toggleEntity = function (hass, entityId) {
    var turnOn = _common_const__WEBPACK_IMPORTED_MODULE_0__["STATES_OFF"].includes(hass.states[entityId].state);
    return Object(_turn_on_off_entity__WEBPACK_IMPORTED_MODULE_1__["turnOnOffEntity"])(hass, entityId, turnOn);
};


/***/ }),

/***/ "./src/panels/lovelace/common/entity/turn-on-off-entities.ts":
/*!*******************************************************************!*\
  !*** ./src/panels/lovelace/common/entity/turn-on-off-entities.ts ***!
  \*******************************************************************/
/*! exports provided: turnOnOffEntities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "turnOnOffEntities", function() { return turnOnOffEntities; });
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../common/const */ "./src/common/const.ts");


var turnOnOffEntities = function (hass, entityIds, turnOn) {
    if (turnOn === void 0) { turnOn = true; }
    var domainsToCall = {};
    entityIds.forEach(function (entityId) {
        if (_common_const__WEBPACK_IMPORTED_MODULE_1__["STATES_OFF"].includes(hass.states[entityId].state) === turnOn) {
            var stateDomain = Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__["computeDomain"])(entityId);
            var serviceDomain = ["cover", "lock"].includes(stateDomain)
                ? stateDomain
                : "homeassistant";
            if (!(serviceDomain in domainsToCall)) {
                domainsToCall[serviceDomain] = [];
            }
            domainsToCall[serviceDomain].push(entityId);
        }
    });
    Object.keys(domainsToCall).forEach(function (domain) {
        var service;
        switch (domain) {
            case "lock":
                service = turnOn ? "unlock" : "lock";
                break;
            case "cover":
                service = turnOn ? "open_cover" : "close_cover";
                break;
            default:
                service = turnOn ? "turn_on" : "turn_off";
        }
        var entities = domainsToCall[domain];
        hass.callService(domain, service, { entity_id: entities });
    });
};


/***/ }),

/***/ "./src/panels/lovelace/common/entity/turn-on-off-entity.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/common/entity/turn-on-off-entity.ts ***!
  \*****************************************************************/
/*! exports provided: turnOnOffEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "turnOnOffEntity", function() { return turnOnOffEntity; });
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");

var turnOnOffEntity = function (hass, entityId, turnOn) {
    if (turnOn === void 0) { turnOn = true; }
    var stateDomain = Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_0__["computeDomain"])(entityId);
    var serviceDomain = stateDomain === "group" ? "homeassistant" : stateDomain;
    var service;
    switch (stateDomain) {
        case "lock":
            service = turnOn ? "unlock" : "lock";
            break;
        case "cover":
            service = turnOn ? "open_cover" : "close_cover";
            break;
        default:
            service = turnOn ? "turn_on" : "turn_off";
    }
    return hass.callService(serviceDomain, service, { entity_id: entityId });
};


/***/ }),

/***/ "./src/panels/lovelace/common/evaluate-filter.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/common/evaluate-filter.ts ***!
  \*******************************************************/
/*! exports provided: evaluateFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "evaluateFilter", function() { return evaluateFilter; });
var evaluateFilter = function (stateObj, filter) {
    var operator = filter.operator || "==";
    var value = filter.value || filter;
    var state = filter.attribute
        ? stateObj.attributes[filter.attribute]
        : stateObj.state;
    switch (operator) {
        case "==":
            return state === value;
        case "<=":
            return state <= value;
        case "<":
            return state < value;
        case ">=":
            return state >= value;
        case ">":
            return state > value;
        case "!=":
            return state !== value;
        case "regex": {
            return state.match(value);
        }
        default:
            return false;
    }
};


/***/ }),

/***/ "./src/panels/lovelace/common/generate-lovelace-config.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/common/generate-lovelace-config.ts ***!
  \****************************************************************/
/*! exports provided: generateDefaultViewConfig, generateLovelaceConfigFromHass, generateLovelaceConfigFromData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateDefaultViewConfig", function() { return generateDefaultViewConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateLovelaceConfigFromHass", function() { return generateLovelaceConfigFromHass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateLovelaceConfigFromData", function() { return generateLovelaceConfigFromData; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _common_entity_extract_views__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/extract_views */ "./src/common/entity/extract_views.ts");
/* harmony import */ var _common_entity_get_view_entities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/entity/get_view_entities */ "./src/common/entity/get_view_entities.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/split_by_groups */ "./src/common/entity/split_by_groups.ts");
/* harmony import */ var _common_entity_compute_object_id__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_object_id */ "./src/common/entity/compute_object_id.ts");
/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ "./src/common/entity/compute_state_domain.ts");
/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ "./src/common/entity/compute_domain.ts");
/* harmony import */ var _data_area_registry__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../data/area_registry */ "./src/data/area_registry.ts");
/* harmony import */ var _common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/util/subscribe-one */ "./src/common/util/subscribe-one.ts");
/* harmony import */ var _data_device_registry__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../data/device_registry */ "./src/data/device_registry.ts");
/* harmony import */ var _data_entity_registry__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../data/entity_registry */ "./src/data/entity_registry.ts");












var DEFAULT_VIEW_ENTITY_ID = "group.default_view";
var DOMAINS_BADGES = [
    "binary_sensor",
    "person",
    "device_tracker",
    "mailbox",
    "sensor",
    "sun",
    "timer",
];
var HIDE_DOMAIN = new Set([
    "persistent_notification",
    "configurator",
    "geo_location",
]);
var subscribedRegistries = false;
var splitByAreas = function (areaEntries, deviceEntries, entityEntries, entities) {
    var allEntities = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, entities);
    var areasWithEntities = [];
    var _loop_1 = function (area) {
        var areaEntities = [];
        var areaDevices = new Set(deviceEntries
            .filter(function (device) { return device.area_id === area.area_id; })
            .map(function (device) { return device.id; }));
        for (var _i = 0, entityEntries_1 = entityEntries; _i < entityEntries_1.length; _i++) {
            var entity = entityEntries_1[_i];
            if (areaDevices.has(
            // @ts-ignore
            entity.device_id) &&
                entity.entity_id in allEntities) {
                areaEntities.push(allEntities[entity.entity_id]);
                delete allEntities[entity.entity_id];
            }
        }
        if (areaEntities.length > 0) {
            areasWithEntities.push([area, areaEntities]);
        }
    };
    for (var _i = 0, areaEntries_1 = areaEntries; _i < areaEntries_1.length; _i++) {
        var area = areaEntries_1[_i];
        _loop_1(area);
    }
    return {
        areasWithEntities: areasWithEntities,
        otherEntities: allEntities,
    };
};
var computeCards = function (states, entityCardOptions) {
    var cards = [];
    // For entity card
    var entities = [];
    for (var _i = 0, states_1 = states; _i < states_1.length; _i++) {
        var _a = states_1[_i], entityId = _a[0], stateObj = _a[1];
        var domain = Object(_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_7__["computeDomain"])(entityId);
        if (domain === "alarm_control_panel") {
            cards.push({
                type: "alarm-panel",
                entity: entityId,
            });
        }
        else if (domain === "camera") {
            cards.push({
                type: "picture-entity",
                entity: entityId,
            });
        }
        else if (domain === "climate") {
            cards.push({
                type: "thermostat",
                entity: entityId,
            });
        }
        else if (domain === "history_graph" && stateObj) {
            cards.push({
                type: "history-graph",
                entities: stateObj.attributes.entity_id,
                hours_to_show: stateObj.attributes.hours_to_show,
                title: stateObj.attributes.friendly_name,
                refresh_interval: stateObj.attributes.refresh,
            });
        }
        else if (domain === "media_player") {
            cards.push({
                type: "media-control",
                entity: entityId,
            });
        }
        else if (domain === "plant") {
            cards.push({
                type: "plant-status",
                entity: entityId,
            });
        }
        else if (domain === "weather") {
            cards.push({
                type: "weather-forecast",
                entity: entityId,
            });
        }
        else if (domain === "weblink" && stateObj) {
            var conf = {
                type: "weblink",
                url: stateObj.state,
                name: Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__["computeStateName"])(stateObj),
            };
            if ("icon" in stateObj.attributes) {
                conf.icon = stateObj.attributes.icon;
            }
            entities.push(conf);
        }
        else {
            entities.push(entityId);
        }
    }
    if (entities.length > 0) {
        cards.unshift(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ type: "entities", entities: entities }, entityCardOptions));
    }
    return cards;
};
var computeDefaultViewStates = function (entities) {
    var states = {};
    Object.keys(entities).forEach(function (entityId) {
        var stateObj = entities[entityId];
        if (!stateObj.attributes.hidden &&
            !HIDE_DOMAIN.has(Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_6__["computeStateDomain"])(stateObj))) {
            states[entityId] = entities[entityId];
        }
    });
    return states;
};
var generateDefaultViewConfig = function (areaEntries, deviceEntries, entityEntries, entities, localize) {
    var _a;
    var states = computeDefaultViewStates(entities);
    var path = "default_view";
    var title = "Home";
    var icon = undefined;
    // In the case of a default view, we want to use the group order attribute
    var groupOrders = {};
    Object.keys(states).forEach(function (entityId) {
        var stateObj = states[entityId];
        if (stateObj.attributes.order) {
            groupOrders[entityId] = stateObj.attributes.order;
        }
    });
    var splittedByAreas = splitByAreas(areaEntries, deviceEntries, entityEntries, states);
    var config = generateViewConfig(localize, path, title, icon, splittedByAreas.otherEntities, groupOrders);
    var areaCards = [];
    splittedByAreas.areasWithEntities.forEach(function (_a) {
        var area = _a[0], areaEntities = _a[1];
        areaCards.push.apply(areaCards, computeCards(areaEntities.map(function (entity) { return [entity.entity_id, entity]; }), {
            title: area.name,
            show_header_toggle: true,
        }));
    });
    (_a = config.cards).unshift.apply(_a, areaCards);
    return config;
};
var generateViewConfig = function (localize, path, title, icon, entities, groupOrders) {
    var splitted = Object(_common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_4__["splitByGroups"])(entities);
    splitted.groups.sort(function (gr1, gr2) { return groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id]; });
    var badgeEntities = {};
    var ungroupedEntitites = {};
    // Organize ungrouped entities in badges/ungrouped things
    Object.keys(splitted.ungrouped).forEach(function (entityId) {
        var state = splitted.ungrouped[entityId];
        var domain = Object(_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_6__["computeStateDomain"])(state);
        var coll = DOMAINS_BADGES.includes(domain)
            ? badgeEntities
            : ungroupedEntitites;
        if (!(domain in coll)) {
            coll[domain] = [];
        }
        coll[domain].push(state.entity_id);
    });
    var badges = [];
    DOMAINS_BADGES.forEach(function (domain) {
        if (domain in badgeEntities) {
            badges = badges.concat(badgeEntities[domain]);
        }
    });
    var cards = [];
    splitted.groups.forEach(function (groupEntity) {
        cards = cards.concat(computeCards(groupEntity.attributes.entity_id.map(function (entityId) { return [entityId, entities[entityId]]; }), {
            title: Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__["computeStateName"])(groupEntity),
            show_header_toggle: groupEntity.attributes.control !== "hidden",
        }));
    });
    Object.keys(ungroupedEntitites)
        .sort()
        .forEach(function (domain) {
        cards = cards.concat(computeCards(ungroupedEntitites[domain].map(function (entityId) { return [entityId, entities[entityId]]; }), {
            title: localize("domain." + domain),
        }));
    });
    var view = {
        path: path,
        title: title,
        badges: badges,
        cards: cards,
    };
    if (icon) {
        view.icon = icon;
    }
    return view;
};
var generateLovelaceConfigFromHass = function (hass) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(void 0, void 0, void 0, function () {
    var _a, areaEntries, deviceEntries, entityEntries;
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
        switch (_b.label) {
            case 0:
                // We want to keep the registry subscriptions alive after generating the UI
                // so that we don't serve up stale data after changing areas.
                if (!subscribedRegistries) {
                    subscribedRegistries = true;
                    Object(_data_area_registry__WEBPACK_IMPORTED_MODULE_8__["subscribeAreaRegistry"])(hass.connection, function () { return undefined; });
                    Object(_data_device_registry__WEBPACK_IMPORTED_MODULE_10__["subscribeDeviceRegistry"])(hass.connection, function () { return undefined; });
                    Object(_data_entity_registry__WEBPACK_IMPORTED_MODULE_11__["subscribeEntityRegistry"])(hass.connection, function () { return undefined; });
                }
                return [4 /*yield*/, Promise.all([
                        Object(_common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_9__["subscribeOne"])(hass.connection, _data_area_registry__WEBPACK_IMPORTED_MODULE_8__["subscribeAreaRegistry"]),
                        Object(_common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_9__["subscribeOne"])(hass.connection, _data_device_registry__WEBPACK_IMPORTED_MODULE_10__["subscribeDeviceRegistry"]),
                        Object(_common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_9__["subscribeOne"])(hass.connection, _data_entity_registry__WEBPACK_IMPORTED_MODULE_11__["subscribeEntityRegistry"]),
                    ])];
            case 1:
                _a = _b.sent(), areaEntries = _a[0], deviceEntries = _a[1], entityEntries = _a[2];
                return [2 /*return*/, generateLovelaceConfigFromData(hass.config, areaEntries, deviceEntries, entityEntries, hass.states, hass.localize)];
        }
    });
}); };
var generateLovelaceConfigFromData = function (config, areaEntries, deviceEntries, entityEntries, entities, localize) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(void 0, void 0, void 0, function () {
    var viewEntities, views, title;
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
        viewEntities = Object(_common_entity_extract_views__WEBPACK_IMPORTED_MODULE_1__["extractViews"])(entities);
        views = viewEntities.map(function (viewEntity) {
            var states = Object(_common_entity_get_view_entities__WEBPACK_IMPORTED_MODULE_2__["getViewEntities"])(entities, viewEntity);
            // In the case of a normal view, we use group order as specified in view
            var groupOrders = {};
            Object.keys(states).forEach(function (entityId, idx) {
                groupOrders[entityId] = idx;
            });
            return generateViewConfig(localize, Object(_common_entity_compute_object_id__WEBPACK_IMPORTED_MODULE_5__["computeObjectId"])(viewEntity.entity_id), Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__["computeStateName"])(viewEntity), viewEntity.attributes.icon, states, groupOrders);
        });
        title = config.location_name;
        // User can override default view. If they didn't, we will add one
        // that contains all entities.
        if (viewEntities.length === 0 ||
            viewEntities[0].entity_id !== DEFAULT_VIEW_ENTITY_ID) {
            views.unshift(generateDefaultViewConfig(areaEntries, deviceEntries, entityEntries, entities, localize));
            // Add map of geo locations to default view if loaded
            if (config.components.includes("geo_location")) {
                if (views[0] && views[0].cards) {
                    views[0].cards.push({
                        type: "map",
                        geo_location_sources: ["all"],
                    });
                }
            }
            // Make sure we don't have Home as title and first tab.
            if (views.length > 1 && title === "Home") {
                title = "牧养犬";
            }
        }
        // User has no entities
        if (views.length === 1 && views[0].cards.length === 0) {
            __webpack_require__.e(/*! import() | hui-empty-state-card */ "hui-empty-state-card").then(__webpack_require__.bind(null, /*! ../cards/hui-empty-state-card */ "./src/panels/lovelace/cards/hui-empty-state-card.ts"));
            views[0].cards.push({
                type: "custom:hui-empty-state-card",
            });
        }
        return [2 /*return*/, {
                title: title,
                views: views,
            }];
    });
}); };


/***/ }),

/***/ "./src/panels/lovelace/common/handle-click.ts":
/*!****************************************************!*\
  !*** ./src/panels/lovelace/common/handle-click.ts ***!
  \****************************************************/
/*! exports provided: handleClick */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleClick", function() { return handleClick; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _common_navigate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/navigate */ "./src/common/navigate.ts");
/* harmony import */ var _src_panels_lovelace_common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../src/panels/lovelace/common/entity/toggle-entity */ "./src/panels/lovelace/common/entity/toggle-entity.ts");
/* harmony import */ var _data_haptics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../data/haptics */ "./src/data/haptics.ts");




var handleClick = function (node, hass, config, hold) {
    var actionConfig;
    if (hold && config.hold_action) {
        actionConfig = config.hold_action;
    }
    else if (!hold && config.tap_action) {
        actionConfig = config.tap_action;
    }
    if (!actionConfig) {
        actionConfig = {
            action: "more-info",
        };
    }
    switch (actionConfig.action) {
        case "more-info":
            if (config.entity || config.camera_image) {
                Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(node, "hass-more-info", {
                    entityId: config.entity ? config.entity : config.camera_image,
                });
            }
            break;
        case "navigate":
            if (actionConfig.navigation_path) {
                Object(_common_navigate__WEBPACK_IMPORTED_MODULE_1__["navigate"])(node, actionConfig.navigation_path);
            }
            break;
        case "url":
            if (actionConfig.url_path) {
                window.open(actionConfig.url_path);
            }
            break;
        case "toggle":
            if (config.entity) {
                Object(_src_panels_lovelace_common_entity_toggle_entity__WEBPACK_IMPORTED_MODULE_2__["toggleEntity"])(hass, config.entity);
            }
            break;
        case "call-service": {
            if (!actionConfig.service) {
                Object(_data_haptics__WEBPACK_IMPORTED_MODULE_3__["forwardHaptic"])("failure");
                return;
            }
            var _a = actionConfig.service.split(".", 2), domain = _a[0], service = _a[1];
            hass.callService(domain, service, actionConfig.service_data);
        }
    }
    Object(_data_haptics__WEBPACK_IMPORTED_MODULE_3__["forwardHaptic"])("light");
};


/***/ }),

/***/ "./src/panels/lovelace/common/has-changed.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/common/has-changed.ts ***!
  \***************************************************/
/*! exports provided: hasConfigOrEntityChanged */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasConfigOrEntityChanged", function() { return hasConfigOrEntityChanged; });
// Check if config or Entity changed
function hasConfigOrEntityChanged(element, changedProps) {
    if (changedProps.has("_config")) {
        return true;
    }
    var oldHass = changedProps.get("hass");
    if (!oldHass) {
        return true;
    }
    return (oldHass.states[element._config.entity] !==
        element.hass.states[element._config.entity] ||
        oldHass.localize !== element.hass.localize);
}


/***/ }),

/***/ "./src/panels/lovelace/common/load-resources.ts":
/*!******************************************************!*\
  !*** ./src/panels/lovelace/common/load-resources.ts ***!
  \******************************************************/
/*! exports provided: loadLovelaceResources */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadLovelaceResources", function() { return loadLovelaceResources; });
/* harmony import */ var _common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/dom/load_resource */ "./src/common/dom/load_resource.ts");

// CSS and JS should only be imported once. Modules and HTML are safe.
var CSS_CACHE = {};
var JS_CACHE = {};
var loadLovelaceResources = function (resources, hassUrl) {
    return resources.forEach(function (resource) {
        var normalizedUrl = new URL(resource.url, hassUrl).toString();
        switch (resource.type) {
            case "css":
                if (normalizedUrl in CSS_CACHE) {
                    break;
                }
                CSS_CACHE[normalizedUrl] = Object(_common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__["loadCSS"])(normalizedUrl);
                break;
            case "js":
                if (normalizedUrl in JS_CACHE) {
                    break;
                }
                JS_CACHE[normalizedUrl] = Object(_common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__["loadJS"])(normalizedUrl);
                break;
            case "module":
                Object(_common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__["loadModule"])(normalizedUrl);
                break;
            case "html":
                __webpack_require__.e(/*! import() | import-href-polyfill */ "import-href-polyfill").then(__webpack_require__.bind(null, /*! ../../../resources/html-import/import-href */ "./src/resources/html-import/import-href.js")).then(function (_a) {
                    var importHref = _a.importHref;
                    return importHref(normalizedUrl);
                });
                break;
            default:
                // tslint:disable-next-line
                console.warn("Unknown resource type specified: " + resource.type);
        }
    });
};


/***/ }),

/***/ "./src/panels/lovelace/common/process-config-entities.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/common/process-config-entities.ts ***!
  \***************************************************************/
/*! exports provided: processConfigEntities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "processConfigEntities", function() { return processConfigEntities; });
/* harmony import */ var _common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/entity/valid_entity_id */ "./src/common/entity/valid_entity_id.ts");
// Parse array of entity objects from config

var processConfigEntities = function (entities) {
    if (!entities || !Array.isArray(entities)) {
        throw new Error("Entities need to be an array");
    }
    return entities.map(function (entityConf, index) {
        if (typeof entityConf === "object" &&
            !Array.isArray(entityConf) &&
            entityConf.type) {
            return entityConf;
        }
        var config;
        if (typeof entityConf === "string") {
            // tslint:disable-next-line:no-object-literal-type-assertion
            config = { entity: entityConf };
        }
        else if (typeof entityConf === "object" && !Array.isArray(entityConf)) {
            if (!entityConf.entity) {
                throw new Error("Entity object at position " + index + " is missing entity field.");
            }
            config = entityConf;
        }
        else {
            throw new Error("Invalid entity specified at position " + index + ".");
        }
        if (!Object(_common_entity_valid_entity_id__WEBPACK_IMPORTED_MODULE_0__["isValidEntityId"])(config.entity)) {
            throw new Error("Invalid entity ID at position " + index + ": " + config.entity);
        }
        return config;
    });
};


/***/ }),

/***/ "./src/panels/lovelace/common/validate-condition.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/common/validate-condition.ts ***!
  \**********************************************************/
/*! exports provided: checkConditionsMet, validateConditionalConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkConditionsMet", function() { return checkConditionsMet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "validateConditionalConfig", function() { return validateConditionalConfig; });
function checkConditionsMet(conditions, hass) {
    return conditions.every(function (c) {
        var state = hass.states[c.entity]
            ? hass.states[c.entity].state
            : "unavailable";
        return c.state ? state === c.state : state !== c.state_not;
    });
}
function validateConditionalConfig(conditions) {
    return conditions.every(function (c) { return (c.entity && (c.state || c.state_not)); });
}


/***/ }),

/***/ "./src/panels/lovelace/components/hui-entities-toggle.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-entities-toggle.ts ***!
  \***************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_switch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-switch */ "./src/components/ha-switch.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_entity_turn_on_off_entities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/entity/turn-on-off-entities */ "./src/panels/lovelace/common/entity/turn-on-off-entities.ts");
/* harmony import */ var _data_haptics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../data/haptics */ "./src/data/haptics.ts");






var HuiEntitiesToggle = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiEntitiesToggle, _super);
    function HuiEntitiesToggle() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiEntitiesToggle.prototype.updated = function (changedProperties) {
        var _this = this;
        _super.prototype.updated.call(this, changedProperties);
        if (changedProperties.has("entities")) {
            this._toggleEntities = this.entities.filter(function (entityId) {
                return entityId in _this.hass.states &&
                    _common_const__WEBPACK_IMPORTED_MODULE_3__["DOMAINS_TOGGLE"].has(entityId.split(".", 1)[0]);
            });
        }
    };
    HuiEntitiesToggle.prototype.render = function () {
        var _this = this;
        if (!this._toggleEntities) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-switch\n        aria-label=\"Toggle entities.\"\n        ?checked=\"", "\"\n        @change=\"", "\"\n      ></ha-switch>\n    "], ["\n      <ha-switch\n        aria-label=\"Toggle entities.\"\n        ?checked=\"",
            "\"\n        @change=\"", "\"\n      ></ha-switch>\n    "])), this._toggleEntities.some(function (entityId) {
            var stateObj = _this.hass.states[entityId];
            return stateObj && stateObj.state === "on";
        }), this._callService);
    };
    Object.defineProperty(HuiEntitiesToggle, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        width: 38px;\n        display: block;\n      }\n      ha-switch {\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    "], ["\n      :host {\n        width: 38px;\n        display: block;\n      }\n      ha-switch {\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiEntitiesToggle.prototype._callService = function (ev) {
        Object(_data_haptics__WEBPACK_IMPORTED_MODULE_5__["forwardHaptic"])("light");
        var turnOn = ev.target.checked;
        Object(_common_entity_turn_on_off_entities__WEBPACK_IMPORTED_MODULE_4__["turnOnOffEntities"])(this.hass, this._toggleEntities, turnOn);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiEntitiesToggle.prototype, "entities", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiEntitiesToggle.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiEntitiesToggle.prototype, "_toggleEntities", void 0);
    HuiEntitiesToggle = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-entities-toggle")
    ], HuiEntitiesToggle);
    return HuiEntitiesToggle;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/components/hui-generic-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-generic-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_ha_relative_time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-relative-time */ "./src/components/ha-relative-time.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/dom/toggle_attribute */ "./src/common/dom/toggle_attribute.ts");









var HuiGenericEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiGenericEntityRow, _super);
    function HuiGenericEntityRow() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.showSecondary = true;
        return _this;
    }
    HuiGenericEntityRow.prototype.render = function () {
        if (!this.hass || !this.config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.config.entity
            ? this.hass.states[this.config.entity]
            : undefined;
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this.config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <state-badge\n        .hass=", "\n        .stateObj=", "\n        .overrideIcon=", "\n        .overrideImage=", "\n      ></state-badge>\n      <div class=\"flex\">\n        <div class=\"info\">\n          ", "\n          <div class=\"secondary\">\n            ", "\n          </div>\n        </div>\n\n        <slot></slot>\n      </div>\n    "], ["\n      <state-badge\n        .hass=", "\n        .stateObj=", "\n        .overrideIcon=", "\n        .overrideImage=", "\n      ></state-badge>\n      <div class=\"flex\">\n        <div class=\"info\">\n          ", "\n          <div class=\"secondary\">\n            ",
            "\n          </div>\n        </div>\n\n        <slot></slot>\n      </div>\n    "])), this.hass, stateObj, this.config.icon, this.config.image, this.config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_1__["computeStateName"])(stateObj), !this.showSecondary
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                  <slot name=\"secondary\"></slot>\n                "], ["\n                  <slot name=\"secondary\"></slot>\n                "]))) : this.config.secondary_info === "entity-id"
            ? stateObj.entity_id
            : this.config.secondary_info === "last-changed"
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                  <ha-relative-time\n                    .hass=", "\n                    .datetime=", "\n                  ></ha-relative-time>\n                "], ["\n                  <ha-relative-time\n                    .hass=", "\n                    .datetime=", "\n                  ></ha-relative-time>\n                "])), this.hass, stateObj.last_changed) : "");
    };
    HuiGenericEntityRow.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (changedProps.has("hass")) {
            Object(_common_dom_toggle_attribute__WEBPACK_IMPORTED_MODULE_8__["toggleAttribute"])(this, "rtl", Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__["computeRTL"])(this.hass));
        }
    };
    Object.defineProperty(HuiGenericEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      .flex {\n        flex: 1;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        min-width: 0;\n      }\n      .info {\n        flex: 1 0 60px;\n      }\n      .info,\n      .info > * {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .flex ::slotted(*) {\n        margin-left: 8px;\n        min-width: 0;\n      }\n      .flex ::slotted([slot=\"secondary\"]) {\n        margin-left: 0;\n      }\n      .secondary,\n      ha-relative-time {\n        display: block;\n        color: var(--secondary-text-color);\n      }\n      state-badge {\n        flex: 0 0 40px;\n      }\n      :host([rtl]) .flex {\n        margin-left: 0;\n        margin-right: 16px;\n      }\n      :host([rtl]) .flex ::slotted(*) {\n        margin-left: 0;\n        margin-right: 8px;\n      }\n    "], ["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      .flex {\n        flex: 1;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        min-width: 0;\n      }\n      .info {\n        flex: 1 0 60px;\n      }\n      .info,\n      .info > * {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .flex ::slotted(*) {\n        margin-left: 8px;\n        min-width: 0;\n      }\n      .flex ::slotted([slot=\"secondary\"]) {\n        margin-left: 0;\n      }\n      .secondary,\n      ha-relative-time {\n        display: block;\n        color: var(--secondary-text-color);\n      }\n      state-badge {\n        flex: 0 0 40px;\n      }\n      :host([rtl]) .flex {\n        margin-left: 0;\n        margin-right: 16px;\n      }\n      :host([rtl]) .flex ::slotted(*) {\n        margin-left: 0;\n        margin-right: 8px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
    ], HuiGenericEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
    ], HuiGenericEntityRow.prototype, "config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_2__["property"])()
    ], HuiGenericEntityRow.prototype, "showSecondary", void 0);
    return HuiGenericEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_2__["LitElement"]));
customElements.define("hui-generic-entity-row", HuiGenericEntityRow);
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/components/hui-image.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/components/hui-image.ts ***!
  \*****************************************************/
/*! exports provided: HuiImage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiImage", function() { return HuiImage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ "./src/common/util/parse-aspect-ratio.ts");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit-html/directives/style-map */ "./node_modules/lit-html/directives/style-map.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/camera */ "./src/data/camera.ts");







var UPDATE_INTERVAL = 10000;
var DEFAULT_FILTER = "grayscale(100%)";
var HuiImage = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiImage, _super);
    function HuiImage() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiImage.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        this._attached = true;
        if (this.cameraImage && this.cameraView !== "live") {
            this._startUpdateCameraInterval();
        }
    };
    HuiImage.prototype.disconnectedCallback = function () {
        _super.prototype.disconnectedCallback.call(this);
        this._attached = false;
        this._stopUpdateCameraInterval();
    };
    HuiImage.prototype.render = function () {
        var ratio = this.aspectRatio ? Object(_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_2__["default"])(this.aspectRatio) : null;
        var stateObj = this.hass && this.entity ? this.hass.states[this.entity] : undefined;
        var state = stateObj ? stateObj.state : "unavailable";
        // Figure out image source to use
        var imageSrc;
        var cameraObj;
        // Track if we are we using a fallback image, used for filter.
        var imageFallback = !this.stateImage;
        if (this.cameraImage) {
            if (this.cameraView === "live") {
                cameraObj =
                    this.hass && this.hass.states[this.cameraImage];
            }
            else {
                imageSrc = this._cameraImageSrc;
            }
        }
        else if (this.stateImage) {
            var stateImage = this.stateImage[state];
            if (stateImage) {
                imageSrc = stateImage;
            }
            else {
                imageSrc = this.image;
                imageFallback = true;
            }
        }
        else {
            imageSrc = this.image;
        }
        if (imageSrc) {
            imageSrc = this.hass.hassUrl(imageSrc);
        }
        // Figure out filter to use
        var filter = this.filter || "";
        if (this.stateFilter && this.stateFilter[state]) {
            filter = this.stateFilter[state];
        }
        if (!filter && this.entity) {
            var isOff = !stateObj || _common_const__WEBPACK_IMPORTED_MODULE_1__["STATES_OFF"].includes(state);
            filter = isOff && imageFallback ? DEFAULT_FILTER : "";
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <div\n        style=", "\n        class=", "\n      >\n        ", "\n        <div\n          id=\"brokenImage\"\n          style=", "\n        ></div>\n      </div>\n    "], ["\n      <div\n        style=",
            "\n        class=",
            "\n      >\n        ",
            "\n        <div\n          id=\"brokenImage\"\n          style=",
            "\n        ></div>\n      </div>\n    "])), Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__["styleMap"])({
            paddingBottom: ratio && ratio.w > 0 && ratio.h > 0
                ? ((100 * ratio.h) / ratio.w).toFixed(2) + "%"
                : "",
        }), Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_5__["classMap"])({
            ratio: Boolean(ratio && ratio.w > 0 && ratio.h > 0),
        }), this.cameraImage && this.cameraView === "live"
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-camera-stream\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-camera-stream>\n            "], ["\n              <ha-camera-stream\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-camera-stream>\n            "])), this.hass, cameraObj) : Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <img\n                id=\"image\"\n                src=", "\n                @error=", "\n                @load=", "\n                style=", "\n              />\n            "], ["\n              <img\n                id=\"image\"\n                src=", "\n                @error=", "\n                @load=", "\n                style=",
            "\n              />\n            "])), imageSrc, this._onImageError, this._onImageLoad, Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__["styleMap"])({
            filter: filter,
            display: this._loadError ? "none" : "block",
        })), Object(lit_html_directives_style_map__WEBPACK_IMPORTED_MODULE_4__["styleMap"])({
            height: (this._lastImageHeight || "100") + "px",
            display: this._loadError ? "block" : "none",
        }));
    };
    HuiImage.prototype.updated = function (changedProps) {
        if (changedProps.has("cameraImage") && this.cameraView !== "live") {
            this._updateCameraImageSrc();
            this._startUpdateCameraInterval();
            return;
        }
    };
    HuiImage.prototype._startUpdateCameraInterval = function () {
        var _this = this;
        this._stopUpdateCameraInterval();
        if (this.cameraImage && this._attached) {
            this._cameraUpdater = window.setInterval(function () { return _this._updateCameraImageSrc(); }, UPDATE_INTERVAL);
        }
    };
    HuiImage.prototype._stopUpdateCameraInterval = function () {
        if (this._cameraUpdater) {
            clearInterval(this._cameraUpdater);
        }
    };
    HuiImage.prototype._onImageError = function () {
        this._loadError = true;
    };
    HuiImage.prototype._onImageLoad = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this._loadError = false;
                        return [4 /*yield*/, this.updateComplete];
                    case 1:
                        _a.sent();
                        this._lastImageHeight = this._image.offsetHeight;
                        return [2 /*return*/];
                }
            });
        });
    };
    HuiImage.prototype._updateCameraImageSrc = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var cameraState, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!this.hass || !this.cameraImage) {
                            return [2 /*return*/];
                        }
                        cameraState = this.hass.states[this.cameraImage];
                        if (!cameraState) {
                            this._onImageError();
                            return [2 /*return*/];
                        }
                        _a = this;
                        return [4 /*yield*/, Object(_data_camera__WEBPACK_IMPORTED_MODULE_6__["fetchThumbnailUrlWithCache"])(this.hass, this.cameraImage)];
                    case 1:
                        _a._cameraImageSrc = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(HuiImage, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["css"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      img {\n        display: block;\n        height: auto;\n        transition: filter 0.2s linear;\n        width: 100%;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      #brokenImage {\n        background: grey url(\"/static/images/image-broken.svg\") center/36px\n          no-repeat;\n      }\n    "], ["\n      img {\n        display: block;\n        height: auto;\n        transition: filter 0.2s linear;\n        width: 100%;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      #brokenImage {\n        background: grey url(\"/static/images/image-broken.svg\") center/36px\n          no-repeat;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "entity", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "image", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "stateImage", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "cameraImage", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "cameraView", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "aspectRatio", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "filter", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "stateFilter", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "_loadError", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["property"])()
    ], HuiImage.prototype, "_cameraImageSrc", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["query"])("img")
    ], HuiImage.prototype, "_image", void 0);
    HuiImage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_3__["customElement"])("hui-image")
    ], HuiImage);
    return HuiImage;
}(lit_element__WEBPACK_IMPORTED_MODULE_3__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/components/hui-timestamp-display.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-timestamp-display.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_datetime_format_date__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/datetime/format_date */ "./src/common/datetime/format_date.ts");
/* harmony import */ var _common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/datetime/format_date_time */ "./src/common/datetime/format_date_time.ts");
/* harmony import */ var _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/datetime/format_time */ "./src/common/datetime/format_time.ts");
/* harmony import */ var _common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/datetime/relative_time */ "./src/common/datetime/relative_time.ts");






var FORMATS = {
    date: _common_datetime_format_date__WEBPACK_IMPORTED_MODULE_2__["default"],
    datetime: _common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__["default"],
    time: _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_4__["default"],
};
var INTERVAL_FORMAT = ["relative", "total"];
var HuiTimestampDisplay = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiTimestampDisplay, _super);
    function HuiTimestampDisplay() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiTimestampDisplay.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        this._connected = true;
        this._startInterval();
    };
    HuiTimestampDisplay.prototype.disconnectedCallback = function () {
        _super.prototype.disconnectedCallback.call(this);
        this._connected = false;
        this._clearInterval();
    };
    HuiTimestampDisplay.prototype.render = function () {
        if (!this.ts || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        if (isNaN(this.ts.getTime())) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        Invalid date\n      "], ["\n        Invalid date\n      "])));
        }
        var format = this._format;
        if (INTERVAL_FORMAT.includes(format)) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        ", "\n      "], ["\n        ", "\n      "])), this._relative);
        }
        if (format in FORMATS) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        ", "\n      "], ["\n        ", "\n      "])), FORMATS[format](this.ts, this.hass.language));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      Invalid format\n    "], ["\n      Invalid format\n    "])));
    };
    HuiTimestampDisplay.prototype.updated = function (changedProperties) {
        _super.prototype.updated.call(this, changedProperties);
        if (!changedProperties.has("format") || !this._connected) {
            return;
        }
        if (INTERVAL_FORMAT.includes("relative")) {
            this._startInterval();
        }
        else {
            this._clearInterval();
        }
    };
    Object.defineProperty(HuiTimestampDisplay.prototype, "_format", {
        get: function () {
            return this.format || "relative";
        },
        enumerable: true,
        configurable: true
    });
    HuiTimestampDisplay.prototype._startInterval = function () {
        var _this = this;
        this._clearInterval();
        if (this._connected && INTERVAL_FORMAT.includes(this._format)) {
            this._updateRelative();
            this._interval = window.setInterval(function () { return _this._updateRelative(); }, 1000);
        }
    };
    HuiTimestampDisplay.prototype._clearInterval = function () {
        if (this._interval) {
            clearInterval(this._interval);
            this._interval = undefined;
        }
    };
    HuiTimestampDisplay.prototype._updateRelative = function () {
        if (this.ts && this.hass.localize) {
            this._relative =
                this._format === "relative"
                    ? Object(_common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__["default"])(this.ts, this.hass.localize)
                    : (this._relative = Object(_common_datetime_relative_time__WEBPACK_IMPORTED_MODULE_5__["default"])(new Date(), this.hass.localize, {
                        compareTime: this.ts,
                        includeTense: false,
                    }));
        }
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTimestampDisplay.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTimestampDisplay.prototype, "ts", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTimestampDisplay.prototype, "format", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTimestampDisplay.prototype, "_relative", void 0);
    HuiTimestampDisplay = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-timestamp-display")
    ], HuiTimestampDisplay);
    return HuiTimestampDisplay;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/components/hui-unavailable.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/components/hui-unavailable.ts ***!
  \***********************************************************/
/*! exports provided: HuiUnavailable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiUnavailable", function() { return HuiUnavailable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


var HuiUnavailable = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiUnavailable, _super);
    function HuiUnavailable() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiUnavailable.prototype.render = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <div class=\"disabled-overlay\">\n        <div>", "</div>\n      </div>\n    "], ["\n      <div class=\"disabled-overlay\">\n        <div>", "</div>\n      </div>\n    "])), this.text);
    };
    Object.defineProperty(HuiUnavailable, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .disabled-overlay {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: var(--state-icon-unavailable-color);\n        opacity: 0.5;\n        z-index: 50;\n      }\n\n      .disabled-overlay div {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        font-size: 24px;\n        color: var(--primary-text-color);\n        transform: translate(-50%, -50%);\n        -ms-transform: translate(-50%, -50%);\n      }\n    "], ["\n      .disabled-overlay {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: var(--state-icon-unavailable-color);\n        opacity: 0.5;\n        z-index: 50;\n      }\n\n      .disabled-overlay div {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        font-size: 24px;\n        color: var(--primary-text-color);\n        transform: translate(-50%, -50%);\n        -ms-transform: translate(-50%, -50%);\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiUnavailable.prototype, "text", void 0);
    HuiUnavailable = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-unavailable")
    ], HuiUnavailable);
    return HuiUnavailable;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/panels/lovelace/components/hui-warning-element.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/components/hui-warning-element.ts ***!
  \***************************************************************/
/*! exports provided: HuiWarningElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiWarningElement", function() { return HuiWarningElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");



var HuiWarningElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiWarningElement, _super);
    function HuiWarningElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiWarningElement.prototype.render = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-icon icon=\"hass:alert\" .title=\"", "\"></ha-icon>\n    "], ["\n      <ha-icon icon=\"hass:alert\" .title=\"", "\"></ha-icon>\n    "])), this.label);
    };
    Object.defineProperty(HuiWarningElement, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-icon {\n        color: #fce588;\n      }\n    "], ["\n      ha-icon {\n        color: #fce588;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiWarningElement.prototype, "label", void 0);
    HuiWarningElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-warning-element")
    ], HuiWarningElement);
    return HuiWarningElement;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/panels/lovelace/components/hui-warning.ts":
/*!*******************************************************!*\
  !*** ./src/panels/lovelace/components/hui-warning.ts ***!
  \*******************************************************/
/*! exports provided: HuiWarning */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiWarning", function() { return HuiWarning; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


var HuiWarning = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiWarning, _super);
    function HuiWarning() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiWarning.prototype.render = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <slot></slot>\n    "], ["\n      <slot></slot>\n    "])));
    };
    Object.defineProperty(HuiWarning, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: block;\n        color: black;\n        background-color: #fce588;\n        padding: 8px;\n      }\n    "], ["\n      :host {\n        display: block;\n        color: black;\n        background-color: #fce588;\n        padding: 8px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiWarning = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-warning")
    ], HuiWarning);
    return HuiWarning;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts":
/*!*************************************************************************!*\
  !*** ./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts ***!
  \*************************************************************************/
/*! exports provided: showEditCardDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showEditCardDialog", function() { return showEditCardDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

var registeredDialog = false;
var dialogShowEvent = "show-edit-card";
var dialogTag = "hui-dialog-edit-card";
var registerEditCardDialog = function (element) {
    return Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
        dialogShowEvent: dialogShowEvent,
        dialogTag: dialogTag,
        dialogImport: function () {
            return Promise.all(/*! import() | hui-dialog-edit-card */[__webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("vendors~hui-dialog-edit-card~hui-entity-button-card-editor~hui-markdown-card-editor~hui-picture-card~0273678c"), __webpack_require__.e(9), __webpack_require__.e("hui-dialog-edit-card")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-edit-card */ "./src/panels/lovelace/editor/card-editor/hui-dialog-edit-card.ts"));
        },
    });
};
var showEditCardDialog = function (element, editCardDialogParams) {
    if (!registeredDialog) {
        registeredDialog = true;
        registerEditCardDialog(element);
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, editCardDialogParams);
};


/***/ }),

/***/ "./src/panels/lovelace/editor/config-util.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/editor/config-util.ts ***!
  \***************************************************/
/*! exports provided: addCard, replaceCard, deleteCard, swapCard, moveCard, addView, replaceView, swapView, deleteView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addCard", function() { return addCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceCard", function() { return replaceCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteCard", function() { return deleteCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "swapCard", function() { return swapCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moveCard", function() { return moveCard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addView", function() { return addView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceView", function() { return replaceView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "swapView", function() { return swapView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteView", function() { return deleteView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var addCard = function (config, path, cardConfig) {
    var viewIndex = path[0];
    var views = [];
    config.views.forEach(function (viewConf, index) {
        if (index !== viewIndex) {
            views.push(config.views[index]);
            return;
        }
        var cards = viewConf.cards
            ? Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(viewConf.cards, [cardConfig]) : [cardConfig];
        views.push(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, viewConf), { cards: cards }));
    });
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: views });
};
var replaceCard = function (config, path, cardConfig) {
    var viewIndex = path[0], cardIndex = path[1];
    var views = [];
    config.views.forEach(function (viewConf, index) {
        if (index !== viewIndex) {
            views.push(config.views[index]);
            return;
        }
        views.push(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, viewConf), { cards: (viewConf.cards || []).map(function (origConf, ind) {
                return ind === cardIndex ? cardConfig : origConf;
            }) }));
    });
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: views });
};
var deleteCard = function (config, path) {
    var viewIndex = path[0], cardIndex = path[1];
    var views = [];
    config.views.forEach(function (viewConf, index) {
        if (index !== viewIndex) {
            views.push(config.views[index]);
            return;
        }
        views.push(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, viewConf), { cards: (viewConf.cards || []).filter(function (_origConf, ind) { return ind !== cardIndex; }) }));
    });
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: views });
};
var swapCard = function (config, path1, path2) {
    var card1 = config.views[path1[0]].cards[path1[1]];
    var card2 = config.views[path2[0]].cards[path2[1]];
    var origView1 = config.views[path1[0]];
    var newView1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, origView1), { cards: origView1.cards.map(function (origCard, index) {
            return index === path1[1] ? card2 : origCard;
        }) });
    var origView2 = path1[0] === path2[0] ? newView1 : config.views[path2[0]];
    var newView2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, origView2), { cards: origView2.cards.map(function (origCard, index) {
            return index === path2[1] ? card1 : origCard;
        }) });
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: config.views.map(function (origView, index) {
            return index === path2[0] ? newView2 : index === path1[0] ? newView1 : origView;
        }) });
};
var moveCard = function (config, fromPath, toPath) {
    if (fromPath[0] === toPath[0]) {
        throw new Error("You can not move a card to the view it is in.");
    }
    var fromView = config.views[fromPath[0]];
    var card = fromView.cards[fromPath[1]];
    var newView1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, fromView), { cards: (fromView.cards || []).filter(function (_origConf, ind) { return ind !== fromPath[1]; }) });
    var toView = config.views[toPath[0]];
    var cards = toView.cards ? Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(toView.cards, [card]) : [card];
    var newView2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, toView), { cards: cards });
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: config.views.map(function (origView, index) {
            return index === toPath[0]
                ? newView2
                : index === fromPath[0]
                    ? newView1
                    : origView;
        }) });
};
var addView = function (config, viewConfig) { return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: config.views.concat(viewConfig) })); };
var replaceView = function (config, viewIndex, viewConfig) { return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: config.views.map(function (origView, index) {
        return index === viewIndex ? viewConfig : origView;
    }) })); };
var swapView = function (config, path1, path2) {
    var view1 = config.views[path1];
    var view2 = config.views[path2];
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: config.views.map(function (origView, index) {
            return index === path2 ? view1 : index === path1 ? view2 : origView;
        }) });
};
var deleteView = function (config, viewIndex) { return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, config), { views: config.views.filter(function (_origView, index) { return index !== viewIndex; }) })); };


/***/ }),

/***/ "./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts":
/*!*********************************************************************************!*\
  !*** ./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts ***!
  \*********************************************************************************/
/*! exports provided: showEditLovelaceDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showEditLovelaceDialog", function() { return showEditLovelaceDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

var registeredDialog = false;
var dialogShowEvent = "show-edit-lovelace";
var dialogTag = "hui-dialog-edit-lovelace";
var registerEditLovelaceDialog = function (element) {
    return Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
        dialogShowEvent: dialogShowEvent,
        dialogTag: dialogTag,
        dialogImport: function () {
            return Promise.all(/*! import() | hui-dialog-edit-lovelace */[__webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("hui-dialog-edit-lovelace")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-edit-lovelace */ "./src/panels/lovelace/editor/lovelace-editor/hui-dialog-edit-lovelace.ts"));
        },
    });
};
var showEditLovelaceDialog = function (element, lovelace) {
    if (!registeredDialog) {
        registeredDialog = true;
        registerEditLovelaceDialog(element);
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, lovelace);
};


/***/ }),

/***/ "./src/panels/lovelace/editor/show-save-config-dialog.ts":
/*!***************************************************************!*\
  !*** ./src/panels/lovelace/editor/show-save-config-dialog.ts ***!
  \***************************************************************/
/*! exports provided: showSaveDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showSaveDialog", function() { return showSaveDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

var dialogShowEvent = "show-save-config";
var dialogTag = "hui-dialog-save-config";
var registeredDialog = false;
var showSaveDialog = function (element, saveDialogParams) {
    if (!registeredDialog) {
        registeredDialog = true;
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
            dialogShowEvent: dialogShowEvent,
            dialogTag: dialogTag,
            dialogImport: function () {
                return Promise.all(/*! import() | hui-dialog-save-config */[__webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("hui-dialog-save-config")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-save-config */ "./src/panels/lovelace/editor/hui-dialog-save-config.ts"));
            },
        });
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, saveDialogParams);
};


/***/ }),

/***/ "./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts":
/*!*************************************************************************!*\
  !*** ./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts ***!
  \*************************************************************************/
/*! exports provided: showEditViewDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showEditViewDialog", function() { return showEditViewDialog; });
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");

var registeredDialog = false;
var dialogShowEvent = "show-edit-view";
var dialogTag = "hui-dialog-edit-view";
var registerEditViewDialog = function (element) {
    return Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, "register-dialog", {
        dialogShowEvent: dialogShowEvent,
        dialogTag: dialogTag,
        dialogImport: function () {
            return Promise.all(/*! import() | hui-dialog-edit-view */[__webpack_require__.e(2), __webpack_require__.e(3), __webpack_require__.e("vendors~area-registry-detail-dialog~cloud-webhook-manage-dialog~config-entry-system-options~device-r~8bd3e4d4"), __webpack_require__.e("vendors~hui-dialog-edit-view"), __webpack_require__.e("hui-dialog-edit-view~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge-card-editor~hu~90f96f72"), __webpack_require__.e("hui-dialog-edit-view")]).then(__webpack_require__.bind(null, /*! ./hui-dialog-edit-view */ "./src/panels/lovelace/editor/view-editor/hui-dialog-edit-view.ts"));
        },
    });
};
var showEditViewDialog = function (element, editViewDialogParams) {
    if (!registeredDialog) {
        registeredDialog = true;
        registerEditViewDialog(element);
    }
    Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__["fireEvent"])(element, dialogShowEvent, editViewDialogParams);
};


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-conditional-element.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-conditional-element.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lovelace/common/validate-condition */ "./src/panels/lovelace/common/validate-condition.ts");
/* harmony import */ var _cards_picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../cards/picture-elements/create-styled-hui-element */ "./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts");



var HuiConditionalElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiConditionalElement, _super);
    function HuiConditionalElement() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._elements = [];
        return _this;
    }
    HuiConditionalElement.prototype.setConfig = function (config) {
        var _this = this;
        if (!config.conditions ||
            !Array.isArray(config.conditions) ||
            !config.elements ||
            !Array.isArray(config.elements) ||
            !Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_1__["validateConditionalConfig"])(config.conditions)) {
            throw new Error("Error in card configuration.");
        }
        if (this._elements.length > 0) {
            this._elements.map(function (el) {
                if (el.parentElement) {
                    el.parentElement.removeChild(el);
                }
            });
            this._elements = [];
        }
        this._config = config;
        this._config.elements.map(function (elementConfig) {
            _this._elements.push(Object(_cards_picture_elements_create_styled_hui_element__WEBPACK_IMPORTED_MODULE_2__["createStyledHuiElement"])(elementConfig));
        });
        this.updateElements();
    };
    Object.defineProperty(HuiConditionalElement.prototype, "hass", {
        set: function (hass) {
            this._hass = hass;
            this.updateElements();
        },
        enumerable: true,
        configurable: true
    });
    HuiConditionalElement.prototype.updateElements = function () {
        var _this = this;
        if (!this._hass || !this._config) {
            return;
        }
        var visible = Object(_lovelace_common_validate_condition__WEBPACK_IMPORTED_MODULE_1__["checkConditionsMet"])(this._config.conditions, this._hass);
        this._elements.map(function (el) {
            if (visible) {
                el.hass = _this._hass;
                if (!el.parentElement) {
                    _this.appendChild(el);
                }
            }
            else if (el.parentElement) {
                el.parentElement.removeChild(el);
            }
        });
    };
    return HuiConditionalElement;
}(HTMLElement));
customElements.define("hui-conditional-element", HuiConditionalElement);


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-icon-element.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-icon-element.ts ***!
  \**********************************************************/
/*! exports provided: HuiIconElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiIconElement", function() { return HuiIconElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");






var HuiIconElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiIconElement, _super);
    function HuiIconElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiIconElement.prototype.setConfig = function (config) {
        if (!config.icon) {
            throw Error("Invalid Configuration: 'icon' required");
        }
        this._config = config;
    };
    HuiIconElement.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-icon\n        .icon=\"", "\"\n        .title=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      ></ha-icon>\n    "], ["\n      <ha-icon\n        .icon=\"", "\"\n        .title=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      ></ha-icon>\n    "])), this._config.icon, Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__["computeTooltip"])(this.hass, this._config), this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__["longPress"])());
    };
    HuiIconElement.prototype._handleTap = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, false);
    };
    HuiIconElement.prototype._handleHold = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, true);
    };
    Object.defineProperty(HuiIconElement, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        cursor: pointer;\n      }\n    "], ["\n      :host {\n        cursor: pointer;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiIconElement.prototype, "_config", void 0);
    HuiIconElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-icon-element")
    ], HuiIconElement);
    return HuiIconElement;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-image-element.ts":
/*!***********************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-image-element.ts ***!
  \***********************************************************/
/*! exports provided: HuiImageElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiImageElement", function() { return HuiImageElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-image */ "./src/panels/lovelace/components/hui-image.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");






var HuiImageElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiImageElement, _super);
    function HuiImageElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiImageElement.prototype.setConfig = function (config) {
        if (!config) {
            throw Error("Error in element configuration");
        }
        this.classList.toggle("clickable", config.tap_action && config.tap_action.action !== "none");
        this._config = config;
    };
    HuiImageElement.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-image\n        .hass=\"", "\"\n        .entity=\"", "\"\n        .image=\"", "\"\n        .stateImage=\"", "\"\n        .cameraImage=\"", "\"\n        .filter=\"", "\"\n        .stateFilter=\"", "\"\n        .title=\"", "\"\n        .aspectRatio=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      ></hui-image>\n    "], ["\n      <hui-image\n        .hass=\"", "\"\n        .entity=\"", "\"\n        .image=\"", "\"\n        .stateImage=\"", "\"\n        .cameraImage=\"", "\"\n        .filter=\"", "\"\n        .stateFilter=\"", "\"\n        .title=\"", "\"\n        .aspectRatio=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      ></hui-image>\n    "])), this.hass, this._config.entity, this._config.image, this._config.state_image, this._config.camera_image, this._config.filter, this._config.state_filter, Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_3__["computeTooltip"])(this.hass, this._config), this._config.aspect_ratio, this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_5__["longPress"])());
    };
    Object.defineProperty(HuiImageElement, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host(.clickable) {\n        cursor: pointer;\n        overflow: hidden;\n        -webkit-touch-callout: none !important;\n      }\n      hui-image {\n        -webkit-user-select: none !important;\n      }\n    "], ["\n      :host(.clickable) {\n        cursor: pointer;\n        overflow: hidden;\n        -webkit-touch-callout: none !important;\n      }\n      hui-image {\n        -webkit-user-select: none !important;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiImageElement.prototype._handleTap = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, false);
    };
    HuiImageElement.prototype._handleHold = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_4__["handleClick"])(this, this.hass, this._config, true);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiImageElement.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiImageElement.prototype, "_config", void 0);
    HuiImageElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-image-element")
    ], HuiImageElement);
    return HuiImageElement;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-service-button-element.ts":
/*!********************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-service-button-element.ts ***!
  \********************************************************************/
/*! exports provided: HuiServiceButtonElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiServiceButtonElement", function() { return HuiServiceButtonElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_buttons_ha_call_service_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/buttons/ha-call-service-button */ "./src/components/buttons/ha-call-service-button.js");



var HuiServiceButtonElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiServiceButtonElement, _super);
    function HuiServiceButtonElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(HuiServiceButtonElement, "properties", {
        get: function () {
            return { _config: {} };
        },
        enumerable: true,
        configurable: true
    });
    HuiServiceButtonElement.prototype.setConfig = function (config) {
        var _a;
        if (!config || !config.service) {
            throw Error("Invalid Configuration: 'service' required");
        }
        _a = config.service.split(".", 2), this._domain = _a[0], this._service = _a[1];
        if (!this._domain) {
            throw Error("Invalid Configuration: 'service' does not have a domain");
        }
        if (!this._service) {
            throw Error("Invalid Configuration: 'service' does not have a service name");
        }
        this._config = config;
    };
    HuiServiceButtonElement.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-call-service-button\n        .hass=\"", "\"\n        .domain=\"", "\"\n        .service=\"", "\"\n        .serviceData=\"", "\"\n        >", "</ha-call-service-button\n      >\n    "], ["\n      <ha-call-service-button\n        .hass=\"", "\"\n        .domain=\"", "\"\n        .service=\"", "\"\n        .serviceData=\"", "\"\n        >", "</ha-call-service-button\n      >\n    "])), this.hass, this._domain, this._service, this._config.service_data, this._config.title);
    };
    Object.defineProperty(HuiServiceButtonElement, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-call-service-button {\n        color: var(--primary-color);\n        white-space: nowrap;\n      }\n    "], ["\n      ha-call-service-button {\n        color: var(--primary-color);\n        white-space: nowrap;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiServiceButtonElement.prototype, "_config", void 0);
    HuiServiceButtonElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-service-button-element")
    ], HuiServiceButtonElement);
    return HuiServiceButtonElement;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-state-badge-element.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-state-badge-element.ts ***!
  \*****************************************************************/
/*! exports provided: HuiStateBadgeElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiStateBadgeElement", function() { return HuiStateBadgeElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_ha_state_label_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/entity/ha-state-label-badge */ "./src/components/entity/ha-state-label-badge.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






var HuiStateBadgeElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiStateBadgeElement, _super);
    function HuiStateBadgeElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiStateBadgeElement.prototype.setConfig = function (config) {
        if (!config.entity) {
            throw Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    };
    HuiStateBadgeElement.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiStateBadgeElement.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning-element\n          label=\"", "\"\n        ></hui-warning-element>\n      "], ["\n        <hui-warning-element\n          label=\"",
                "\"\n        ></hui-warning-element>\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-state-label-badge\n        .hass=\"", "\"\n        .state=\"", "\"\n        .title=\"", "\"\n      ></ha-state-label-badge>\n    "], ["\n      <ha-state-label-badge\n        .hass=\"", "\"\n        .state=\"", "\"\n        .title=\"",
            "\"\n      ></ha-state-label-badge>\n    "])), this.hass, stateObj, this._config.title === undefined
            ? Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_4__["computeStateName"])(stateObj)
            : this._config.title === null
                ? ""
                : this._config.title);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiStateBadgeElement.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiStateBadgeElement.prototype, "_config", void 0);
    HuiStateBadgeElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-state-badge-element")
    ], HuiStateBadgeElement);
    return HuiStateBadgeElement;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-state-icon-element.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-state-icon-element.ts ***!
  \****************************************************************/
/*! exports provided: HuiStateIconElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HuiStateIconElement", function() { return HuiStateIconElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








var HuiStateIconElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiStateIconElement, _super);
    function HuiStateIconElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiStateIconElement.prototype.setConfig = function (config) {
        if (!config.entity) {
            throw Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    };
    HuiStateIconElement.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiStateIconElement.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning-element\n          label=", "\n        ></hui-warning-element>\n      "], ["\n        <hui-warning-element\n          label=",
                "\n        ></hui-warning-element>\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <state-badge\n        .stateObj=\"", "\"\n        .title=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n        .overrideIcon=", "\n      ></state-badge>\n    "], ["\n      <state-badge\n        .stateObj=\"", "\"\n        .title=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n        .overrideIcon=", "\n      ></state-badge>\n    "])), stateObj, Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_4__["computeTooltip"])(this.hass, this._config), this._handleClick, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_6__["longPress"])(), this._config.icon);
    };
    Object.defineProperty(HuiStateIconElement, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        cursor: pointer;\n      }\n    "], ["\n      :host {\n        cursor: pointer;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiStateIconElement.prototype._handleClick = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_5__["handleClick"])(this, this.hass, this._config, false);
    };
    HuiStateIconElement.prototype._handleHold = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_5__["handleClick"])(this, this.hass, this._config, true);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiStateIconElement.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiStateIconElement.prototype, "_config", void 0);
    HuiStateIconElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-state-icon-element")
    ], HuiStateIconElement);
    return HuiStateIconElement;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/elements/hui-state-label-element.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/elements/hui-state-label-element.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_ha_state_label_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/entity/ha-state-label-badge */ "./src/components/entity/ha-state-label-badge.ts");
/* harmony import */ var _components_hui_warning_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning-element */ "./src/panels/lovelace/components/hui-warning-element.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_compute_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/compute-tooltip */ "./src/panels/lovelace/common/compute-tooltip.ts");
/* harmony import */ var _common_handle_click__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/handle-click */ "./src/panels/lovelace/common/handle-click.ts");
/* harmony import */ var _common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/directives/long-press-directive */ "./src/panels/lovelace/common/directives/long-press-directive.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");









var HuiStateLabelElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiStateLabelElement, _super);
    function HuiStateLabelElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiStateLabelElement.prototype.setConfig = function (config) {
        if (!config.entity) {
            throw Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    };
    HuiStateLabelElement.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_8__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiStateLabelElement.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning-element\n          label=", "\n        ></hui-warning-element>\n      "], ["\n        <hui-warning-element\n          label=",
                "\n        ></hui-warning-element>\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <div\n        .title=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      >\n        ", "", "", "\n      </div>\n    "], ["\n      <div\n        .title=\"", "\"\n        @ha-click=\"", "\"\n        @ha-hold=\"", "\"\n        .longPress=\"", "\"\n      >\n        ", "",
            "", "\n      </div>\n    "])), Object(_common_compute_tooltip__WEBPACK_IMPORTED_MODULE_5__["computeTooltip"])(this.hass, this._config), this._handleTap, this._handleHold, Object(_common_directives_long_press_directive__WEBPACK_IMPORTED_MODULE_7__["longPress"])(), this._config.prefix, stateObj
            ? Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)
            : "-", this._config.suffix);
    };
    HuiStateLabelElement.prototype._handleTap = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_6__["handleClick"])(this, this.hass, this._config, false);
    };
    HuiStateLabelElement.prototype._handleHold = function () {
        Object(_common_handle_click__WEBPACK_IMPORTED_MODULE_6__["handleClick"])(this, this.hass, this._config, true);
    };
    Object.defineProperty(HuiStateLabelElement, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        cursor: pointer;\n      }\n      div {\n        padding: 8px;\n        white-space: nowrap;\n      }\n    "], ["\n      :host {\n        cursor: pointer;\n      }\n      div {\n        padding: 8px;\n        white-space: nowrap;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiStateLabelElement.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiStateLabelElement.prototype, "_config", void 0);
    HuiStateLabelElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-state-label-element")
    ], HuiStateLabelElement);
    return HuiStateLabelElement;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts":
/*!*******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts ***!
  \*******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_climate_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-climate-state */ "./src/components/ha-climate-state.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






var HuiClimateEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiClimateEntityRow, _super);
    function HuiClimateEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiClimateEntityRow.prototype.setConfig = function (config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    };
    HuiClimateEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiClimateEntityRow.prototype.render = function () {
        if (!this.hass || !this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <ha-climate-state\n          .hass=\"", "\"\n          .stateObj=\"", "\"\n        ></ha-climate-state>\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <ha-climate-state\n          .hass=\"", "\"\n          .stateObj=\"", "\"\n        ></ha-climate-state>\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, this.hass, stateObj);
    };
    Object.defineProperty(HuiClimateEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-climate-state {\n        text-align: right;\n      }\n    "], ["\n      ha-climate-state {\n        text-align: right;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiClimateEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiClimateEntityRow.prototype, "_config", void 0);
    HuiClimateEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-climate-entity-row")
    ], HuiClimateEntityRow);
    return HuiClimateEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_ha_cover_controls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-cover-controls */ "./src/components/ha-cover-controls.js");
/* harmony import */ var _components_ha_cover_tilt_controls__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-cover-tilt-controls */ "./src/components/ha-cover-tilt-controls.js");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _util_cover_model__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../util/cover-model */ "./src/util/cover-model.js");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








var HuiCoverEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiCoverEntityRow, _super);
    function HuiCoverEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiCoverEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiCoverEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiCoverEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ", "\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ",
            "\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, Object(_util_cover_model__WEBPACK_IMPORTED_MODULE_6__["isTiltOnly"])(stateObj)
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-cover-tilt-controls\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-cover-tilt-controls>\n            "], ["\n              <ha-cover-tilt-controls\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-cover-tilt-controls>\n            "])), this.hass, stateObj) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-cover-controls\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-cover-controls>\n            "], ["\n              <ha-cover-controls\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-cover-controls>\n            "])), this.hass, stateObj));
    };
    Object.defineProperty(HuiCoverEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ha-cover-controls,\n      ha-cover-tilt-controls {\n        margin-right: -0.57em;\n      }\n    "], ["\n      ha-cover-controls,\n      ha-cover-tilt-controls {\n        margin-right: -0.57em;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiCoverEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiCoverEntityRow.prototype, "_config", void 0);
    HuiCoverEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-cover-entity-row")
    ], HuiCoverEntityRow);
    return HuiCoverEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-group-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-group-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/const */ "./src/common/const.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








var HuiGroupEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiGroupEntityRow, _super);
    function HuiGroupEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiGroupEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiGroupEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiGroupEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ", "\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ",
            "\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, this._computeCanToggle(stateObj.attributes.entity_id)
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "], ["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "])), this.hass, stateObj) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div>\n                ", "\n              </div>\n            "], ["\n              <div>\n                ",
            "\n              </div>\n            "])), Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)));
    };
    HuiGroupEntityRow.prototype._computeCanToggle = function (entityIds) {
        return entityIds.some(function (entityId) {
            return _common_const__WEBPACK_IMPORTED_MODULE_6__["DOMAINS_TOGGLE"].has(entityId.split(".", 1)[0]);
        });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiGroupEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiGroupEntityRow.prototype, "_config", void 0);
    HuiGroupEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-group-entity-row")
    ], HuiGroupEntityRow);
    return HuiGroupEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts":
/*!**************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts ***!
  \**************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_paper_time_input_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/paper-time-input.js */ "./src/components/paper-time-input.js");
/* harmony import */ var _components_ha_date_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-date-input */ "./src/components/ha-date-input.ts");
/* harmony import */ var _data_input_datetime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../data/input_datetime */ "./src/data/input_datetime.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







var HuiInputDatetimeEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiInputDatetimeEntityRow, _super);
    function HuiInputDatetimeEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiInputDatetimeEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiInputDatetimeEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiInputDatetimeEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ", "\n        ", "\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ",
            "\n        ",
            "\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, stateObj.attributes.has_date
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-date-input\n                .year=", "\n                .month=", "\n                .day=", "\n                @change=", "\n                @click=", "\n              ></ha-date-input>\n              ", "\n            "], ["\n              <ha-date-input\n                .year=", "\n                .month=", "\n                .day=", "\n                @change=", "\n                @click=", "\n              ></ha-date-input>\n              ", "\n            "])), stateObj.attributes.year, ("0" + stateObj.attributes.month).slice(-2), ("0" + stateObj.attributes.day).slice(-2), this._selectedValueChanged, this._stopEventPropagation, stateObj.attributes.has_time ? "," : "") : "", stateObj.attributes.has_time
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <paper-time-input\n                .hour=", "\n                .min=", "\n                .amPm=", "\n                @change=", "\n                @click=", "\n                hide-label\n                format=\"24\"\n              ></paper-time-input>\n            "], ["\n              <paper-time-input\n                .hour=",
                "\n                .min=",
                "\n                .amPm=", "\n                @change=", "\n                @click=", "\n                hide-label\n                format=\"24\"\n              ></paper-time-input>\n            "])), stateObj.state === "unknown"
                ? ""
                : ("0" + stateObj.attributes.hour).slice(-2), stateObj.state === "unknown"
                ? ""
                : ("0" + stateObj.attributes.minute).slice(-2), false, this._selectedValueChanged, this._stopEventPropagation) : "");
    };
    HuiInputDatetimeEntityRow.prototype._stopEventPropagation = function (ev) {
        ev.stopPropagation();
    };
    Object.defineProperty(HuiInputDatetimeEntityRow.prototype, "_timeInputEl", {
        get: function () {
            return this.shadowRoot.querySelector("paper-time-input");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HuiInputDatetimeEntityRow.prototype, "_dateInputEl", {
        get: function () {
            return this.shadowRoot.querySelector("ha-date-input");
        },
        enumerable: true,
        configurable: true
    });
    HuiInputDatetimeEntityRow.prototype._selectedValueChanged = function (ev) {
        var stateObj = this.hass.states[this._config.entity];
        var time = this._timeInputEl !== null
            ? this._timeInputEl.value.trim() + ":00"
            : undefined;
        var date = this._dateInputEl !== null ? this._dateInputEl.value : undefined;
        if (time !== stateObj.state) {
            Object(_data_input_datetime__WEBPACK_IMPORTED_MODULE_5__["setInputDateTimeValue"])(this.hass, stateObj.entity_id, time, date);
        }
        ev.target.blur();
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputDatetimeEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputDatetimeEntityRow.prototype, "_config", void 0);
    HuiInputDatetimeEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-datetime-entity-row")
    ], HuiInputDatetimeEntityRow);
    return HuiInputDatetimeEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts":
/*!************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts ***!
  \************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_ha_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-slider */ "./src/components/ha-slider.js");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _data_input_text__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/input_text */ "./src/data/input_text.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








var HuiInputNumberEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiInputNumberEntityRow, _super);
    function HuiInputNumberEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiInputNumberEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiInputNumberEntityRow.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        if (this._updated && !this._loaded) {
            this._initialLoad();
        }
    };
    HuiInputNumberEntityRow.prototype.firstUpdated = function () {
        this._updated = true;
        if (this.isConnected && !this._loaded) {
            this._initialLoad();
        }
    };
    HuiInputNumberEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiInputNumberEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>\n          ", "\n        </div>\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>\n          ",
            "\n        </div>\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, stateObj.attributes.mode === "slider"
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <div class=\"flex\">\n                  <ha-slider\n                    .dir=\"", "\"\n                    .step=\"", "\"\n                    .min=\"", "\"\n                    .max=\"", "\"\n                    .value=\"", "\"\n                    pin\n                    @change=\"", "\"\n                    ignore-bar-touch\n                    id=\"input\"\n                  ></ha-slider>\n                  <span class=\"state\">\n                    ", "\n                    ", "\n                  </span>\n                </div>\n              "], ["\n                <div class=\"flex\">\n                  <ha-slider\n                    .dir=\"", "\"\n                    .step=\"", "\"\n                    .min=\"", "\"\n                    .max=\"", "\"\n                    .value=\"", "\"\n                    pin\n                    @change=\"", "\"\n                    ignore-bar-touch\n                    id=\"input\"\n                  ></ha-slider>\n                  <span class=\"state\">\n                    ", "\n                    ", "\n                  </span>\n                </div>\n              "])), Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_5__["computeRTLDirection"])(this.hass), Number(stateObj.attributes.step), Number(stateObj.attributes.min), Number(stateObj.attributes.max), Number(stateObj.state), this._selectedValueChanged, Number(stateObj.state), stateObj.attributes.unit_of_measurement) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <paper-input\n                  no-label-float\n                  auto-validate\n                  .pattern=\"[0-9]+([\\.][0-9]+)?\"\n                  .step=\"", "\"\n                  .min=\"", "\"\n                  .max=\"", "\"\n                  .value=\"", "\"\n                  type=\"number\"\n                  @change=\"", "\"\n                  id=\"input\"\n                ></paper-input>\n              "], ["\n                <paper-input\n                  no-label-float\n                  auto-validate\n                  .pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n                  .step=\"", "\"\n                  .min=\"", "\"\n                  .max=\"", "\"\n                  .value=\"", "\"\n                  type=\"number\"\n                  @change=\"", "\"\n                  id=\"input\"\n                ></paper-input>\n              "])), Number(stateObj.attributes.step), Number(stateObj.attributes.min), Number(stateObj.attributes.max), Number(stateObj.state), this._selectedValueChanged));
    };
    Object.defineProperty(HuiInputNumberEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .flex {\n        display: flex;\n        align-items: center;\n      }\n      .state {\n        min-width: 45px;\n        text-align: end;\n      }\n      paper-input {\n        text-align: end;\n      }\n    "], ["\n      .flex {\n        display: flex;\n        align-items: center;\n      }\n      .state {\n        min-width: 45px;\n        text-align: end;\n      }\n      paper-input {\n        text-align: end;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiInputNumberEntityRow.prototype._initialLoad = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var element;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this._loaded = true;
                        return [4 /*yield*/, this.updateComplete];
                    case 1:
                        _a.sent();
                        element = this.shadowRoot.querySelector(".state");
                        if (!element || !this.parentElement) {
                            return [2 /*return*/];
                        }
                        element.hidden = this.parentElement.clientWidth <= 350;
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(HuiInputNumberEntityRow.prototype, "_inputElement", {
        get: function () {
            // linter recommended the following syntax
            return this.shadowRoot.getElementById("input");
        },
        enumerable: true,
        configurable: true
    });
    HuiInputNumberEntityRow.prototype._selectedValueChanged = function () {
        var element = this._inputElement;
        var stateObj = this.hass.states[this._config.entity];
        if (element.value !== stateObj.state) {
            Object(_data_input_text__WEBPACK_IMPORTED_MODULE_6__["setValue"])(this.hass, stateObj.entity_id, element.value);
        }
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputNumberEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputNumberEntityRow.prototype, "_config", void 0);
    HuiInputNumberEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-number-entity-row")
    ], HuiInputNumberEntityRow);
    return HuiInputNumberEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts":
/*!************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts ***!
  \************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_item_paper_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-item/paper-item */ "./node_modules/@polymer/paper-item/paper-item.js");
/* harmony import */ var _polymer_paper_listbox_paper_listbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/paper-listbox/paper-listbox */ "./node_modules/@polymer/paper-listbox/paper-listbox.js");
/* harmony import */ var _components_ha_paper_dropdown_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/ha-paper-dropdown-menu */ "./src/components/ha-paper-dropdown-menu.ts");
/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/entity/state-badge */ "./src/components/entity/state-badge.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ "./src/common/entity/compute_state_name.ts");
/* harmony import */ var _data_input_select__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../data/input-select */ "./src/data/input-select.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _data_haptics__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../data/haptics */ "./src/data/haptics.ts");
/* harmony import */ var _common_dom_stop_propagation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/dom/stop_propagation */ "./src/common/dom/stop_propagation.ts");












var HuiInputSelectEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiInputSelectEntityRow, _super);
    function HuiInputSelectEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiInputSelectEntityRow.prototype.setConfig = function (config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    };
    HuiInputSelectEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_9__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiInputSelectEntityRow.prototype.render = function () {
        if (!this.hass || !this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <state-badge .stateObj=\"", "\"></state-badge>\n      <ha-paper-dropdown-menu\n        .label=", "\n        .value=", "\n        @iron-select=", "\n        @click=", "\n      >\n        <paper-listbox slot=\"dropdown-content\">\n          ", "\n        </paper-listbox>\n      </ha-paper-dropdown-menu>\n    "], ["\n      <state-badge .stateObj=\"", "\"></state-badge>\n      <ha-paper-dropdown-menu\n        .label=", "\n        .value=", "\n        @iron-select=", "\n        @click=", "\n      >\n        <paper-listbox slot=\"dropdown-content\">\n          ",
            "\n        </paper-listbox>\n      </ha-paper-dropdown-menu>\n    "])), stateObj, this._config.name || Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_7__["computeStateName"])(stateObj), stateObj.state, this._selectedChanged, _common_dom_stop_propagation__WEBPACK_IMPORTED_MODULE_11__["stopPropagation"], stateObj.attributes.options.map(function (option) { return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <paper-item>", "</paper-item>\n            "], ["\n              <paper-item>", "</paper-item>\n            "])), option); }));
    };
    HuiInputSelectEntityRow.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (!this.hass || !this._config) {
            return;
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return;
        }
        // Update selected after rendering the items or else it won't work in Firefox
        this.shadowRoot.querySelector("paper-listbox").selected = stateObj.attributes.options.indexOf(stateObj.state);
    };
    Object.defineProperty(HuiInputSelectEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-paper-dropdown-menu {\n        margin-left: 16px;\n        flex: 1;\n      }\n\n      paper-item {\n        cursor: pointer;\n        min-width: 200px;\n      }\n    "], ["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-paper-dropdown-menu {\n        margin-left: 16px;\n        flex: 1;\n      }\n\n      paper-item {\n        cursor: pointer;\n        min-width: 200px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiInputSelectEntityRow.prototype._selectedChanged = function (ev) {
        var stateObj = this.hass.states[this._config.entity];
        var option = ev.target.selectedItem.innerText.trim();
        if (option === stateObj.state) {
            return;
        }
        Object(_data_haptics__WEBPACK_IMPORTED_MODULE_10__["forwardHaptic"])("light");
        Object(_data_input_select__WEBPACK_IMPORTED_MODULE_8__["setInputSelectOption"])(this.hass, stateObj.entity_id, option);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputSelectEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputSelectEntityRow.prototype, "_config", void 0);
    HuiInputSelectEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-select-entity-row")
    ], HuiInputSelectEntityRow);
    return HuiInputSelectEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts":
/*!**********************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts ***!
  \**********************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _data_input_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../data/input_text */ "./src/data/input_text.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






var HuiInputTextEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiInputTextEntityRow, _super);
    function HuiInputTextEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiInputTextEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiInputTextEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiInputTextEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <paper-input\n          no-label-float\n          .value=\"", "\"\n          .minlength=\"", "\"\n          .maxlength=\"", "\"\n          .autoValidate=\"", "\"\n          .pattern=\"", "\"\n          .type=\"", "\"\n          @change=\"", "\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <paper-input\n          no-label-float\n          .value=\"", "\"\n          .minlength=\"", "\"\n          .maxlength=\"", "\"\n          .autoValidate=\"", "\"\n          .pattern=\"", "\"\n          .type=\"", "\"\n          @change=\"", "\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, stateObj.state, stateObj.attributes.min, stateObj.attributes.max, stateObj.attributes.pattern, stateObj.attributes.pattern, stateObj.attributes.mode, this._selectedValueChanged);
    };
    Object.defineProperty(HuiInputTextEntityRow.prototype, "_inputEl", {
        get: function () {
            return this.shadowRoot.querySelector("paper-input");
        },
        enumerable: true,
        configurable: true
    });
    HuiInputTextEntityRow.prototype._selectedValueChanged = function (ev) {
        var element = this._inputEl;
        var stateObj = this.hass.states[this._config.entity];
        if (element.value !== stateObj.state) {
            Object(_data_input_text__WEBPACK_IMPORTED_MODULE_4__["setValue"])(this.hass, stateObj.entity_id, element.value);
        }
        ev.target.blur();
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputTextEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiInputTextEntityRow.prototype, "_config", void 0);
    HuiInputTextEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-input-text-entity-row")
    ], HuiInputTextEntityRow);
    return HuiInputTextEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");





var HuiLockEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiLockEntityRow, _super);
    function HuiLockEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiLockEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiLockEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_4__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiLockEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <mwc-button @click=\"", "\">\n          ", "\n        </mwc-button>\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <mwc-button @click=\"", "\">\n          ",
            "\n        </mwc-button>\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, this._callService, stateObj.state === "locked"
            ? this.hass.localize("ui.card.lock.unlock")
            : this.hass.localize("ui.card.lock.lock"));
    };
    Object.defineProperty(HuiLockEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "], ["\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiLockEntityRow.prototype._callService = function (ev) {
        ev.stopPropagation();
        var stateObj = this.hass.states[this._config.entity];
        this.hass.callService("lock", stateObj.state === "locked" ? "unlock" : "lock", { entity_id: stateObj.entity_id });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiLockEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiLockEntityRow.prototype, "_config", void 0);
    HuiLockEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-lock-entity-row")
    ], HuiLockEntityRow);
    return HuiLockEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts":
/*!************************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts ***!
  \************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/supports-feature */ "./src/common/entity/supports-feature.ts");
/* harmony import */ var _data_media_player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../data/media-player */ "./src/data/media-player.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");








var HuiMediaPlayerEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiMediaPlayerEntityRow, _super);
    function HuiMediaPlayerEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiMediaPlayerEntityRow.prototype.setConfig = function (config) {
        if (!config || !config.entity) {
            throw new Error("Invalid Configuration: 'entity' required");
        }
        this._config = config;
    };
    HuiMediaPlayerEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_7__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiMediaPlayerEntityRow.prototype.render = function () {
        if (!this.hass || !this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row\n        .hass=\"", "\"\n        .config=\"", "\"\n        .showSecondary=", "\n      >\n        ", "\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row\n        .hass=\"", "\"\n        .config=\"", "\"\n        .showSecondary=", "\n      >\n        ",
            "\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, false, _data_media_player__WEBPACK_IMPORTED_MODULE_6__["OFF_STATES"].includes(stateObj.state)
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div>\n                ", "\n              </div>\n            "], ["\n              <div>\n                ",
                "\n              </div>\n            "])), this.hass.localize("state.media_player." + stateObj.state) ||
                this.hass.localize("state.default." + stateObj.state) ||
                stateObj.state) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div class=\"controls\">\n                ", "\n                ", "\n              </div>\n              <div slot=\"secondary\">", "</div>\n            "], ["\n              <div class=\"controls\">\n                ",
            "\n                ",
            "\n              </div>\n              <div slot=\"secondary\">", "</div>\n            "])), stateObj.state !== "playing" &&
            !Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__["supportsFeature"])(stateObj, _data_media_player__WEBPACK_IMPORTED_MODULE_6__["SUPPORTS_PLAY"])
            ? ""
            : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                      <paper-icon-button\n                        icon=\"", "\"\n                        @click=\"", "\"\n                      ></paper-icon-button>\n                    "], ["\n                      <paper-icon-button\n                        icon=\"", "\"\n                        @click=\"", "\"\n                      ></paper-icon-button>\n                    "])), this._computeControlIcon(stateObj), this._playPause), Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__["supportsFeature"])(stateObj, _data_media_player__WEBPACK_IMPORTED_MODULE_6__["SUPPORT_NEXT_TRACK"])
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                      <paper-icon-button\n                        icon=\"hass:skip-next\"\n                        @click=\"", "\"\n                      ></paper-icon-button>\n                    "], ["\n                      <paper-icon-button\n                        icon=\"hass:skip-next\"\n                        @click=\"", "\"\n                      ></paper-icon-button>\n                    "])), this._nextTrack) : "", this._computeMediaTitle(stateObj)));
    };
    Object.defineProperty(HuiMediaPlayerEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .controls {\n        white-space: nowrap;\n      }\n    "], ["\n      .controls {\n        white-space: nowrap;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiMediaPlayerEntityRow.prototype._computeControlIcon = function (stateObj) {
        if (stateObj.state !== "playing") {
            return "hass:play";
        }
        // tslint:disable-next-line:no-bitwise
        return Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_5__["supportsFeature"])(stateObj, _data_media_player__WEBPACK_IMPORTED_MODULE_6__["SUPPORT_PAUSE"])
            ? "hass:pause"
            : "hass:stop";
    };
    HuiMediaPlayerEntityRow.prototype._computeMediaTitle = function (stateObj) {
        var prefix;
        var suffix;
        switch (stateObj.attributes.media_content_type) {
            case "music":
                prefix = stateObj.attributes.media_artist;
                suffix = stateObj.attributes.media_title;
                break;
            case "tvshow":
                prefix = stateObj.attributes.media_series_title;
                suffix = stateObj.attributes.media_title;
                break;
            default:
                prefix =
                    stateObj.attributes.media_title ||
                        stateObj.attributes.app_name ||
                        stateObj.state;
                suffix = "";
        }
        return prefix && suffix ? prefix + ": " + suffix : prefix || suffix || "";
    };
    HuiMediaPlayerEntityRow.prototype._playPause = function (ev) {
        ev.stopPropagation();
        this.hass.callService("media_player", "media_play_pause", {
            entity_id: this._config.entity,
        });
    };
    HuiMediaPlayerEntityRow.prototype._nextTrack = function (ev) {
        ev.stopPropagation();
        this.hass.callService("media_player", "media_next_track", {
            entity_id: this._config.entity,
        });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiMediaPlayerEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiMediaPlayerEntityRow.prototype, "_config", void 0);
    HuiMediaPlayerEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-media-player-entity-row")
    ], HuiMediaPlayerEntityRow);
    return HuiMediaPlayerEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






var HuiSceneEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiSceneEntityRow, _super);
    function HuiSceneEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiSceneEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiSceneEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiSceneEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ", "\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ",
            "\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, stateObj.attributes.can_cancel
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "], ["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "])), this.hass, stateObj) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <mwc-button @click=\"", "\">\n                ", "\n              </mwc-button>\n            "], ["\n              <mwc-button @click=\"", "\">\n                ", "\n              </mwc-button>\n            "])), this._callService, this.hass.localize("ui.card.scene.activate")));
    };
    Object.defineProperty(HuiSceneEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "], ["\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiSceneEntityRow.prototype._callService = function (ev) {
        ev.stopPropagation();
        this.hass.callService("scene", "turn_on", {
            entity_id: this._config.entity,
        });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSceneEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSceneEntityRow.prototype, "_config", void 0);
    HuiSceneEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-scene-entity-row")
    ], HuiSceneEntityRow);
    return HuiSceneEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-script-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-script-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






var HuiScriptEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiScriptEntityRow, _super);
    function HuiScriptEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiScriptEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiScriptEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiScriptEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ", "\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ",
            "\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, stateObj.attributes.can_cancel
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "], ["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "])), this.hass, stateObj) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <mwc-button @click=\"", "\">\n                ", "\n              </mwc-button>\n            "], ["\n              <mwc-button @click=\"", "\">\n                ", "\n              </mwc-button>\n            "])), this._callService, this.hass.localize("ui.card.script.execute")));
    };
    Object.defineProperty(HuiScriptEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "], ["\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiScriptEntityRow.prototype._callService = function (ev) {
        ev.stopPropagation();
        this.hass.callService("script", "turn_on", {
            entity_id: this._config.entity,
        });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiScriptEntityRow.prototype, "_config", void 0);
    HuiScriptEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-script-entity-row")
    ], HuiScriptEntityRow);
    return HuiScriptEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_timestamp_display__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-timestamp-display */ "./src/panels/lovelace/components/hui-timestamp-display.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");







var HuiSensorEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiSensorEntityRow, _super);
    function HuiSensorEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiSensorEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiSensorEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiSensorEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>\n          ", "\n        </div>\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>\n          ",
            "\n        </div>\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, stateObj.attributes.device_class === "timestamp" &&
            stateObj.state !== "unavailable"
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <hui-timestamp-display\n                  .hass=\"", "\"\n                  .ts=\"", "\"\n                  .format=\"", "\"\n                ></hui-timestamp-display>\n              "], ["\n                <hui-timestamp-display\n                  .hass=\"", "\"\n                  .ts=\"", "\"\n                  .format=\"", "\"\n                ></hui-timestamp-display>\n              "])), this.hass, new Date(stateObj.state), this._config.format) : Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_6__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language));
    };
    Object.defineProperty(HuiSensorEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      div {\n        text-align: right;\n      }\n    "], ["\n      div {\n        text-align: right;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSensorEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSensorEntityRow.prototype, "_config", void 0);
    HuiSensorEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-sensor-entity-row")
    ], HuiSensorEntityRow);
    return HuiSensorEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-text-entity-row.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-text-entity-row.ts ***!
  \****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");






var HuiTextEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiTextEntityRow, _super);
    function HuiTextEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiTextEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiTextEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_5__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiTextEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>\n          ", "\n        </div>\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>\n          ",
            "\n        </div>\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language));
    };
    Object.defineProperty(HuiTextEntityRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      div {\n        text-align: right;\n      }\n    "], ["\n      div {\n        text-align: right;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTextEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTextEntityRow.prototype, "_config", void 0);
    HuiTextEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-text-entity-row")
    ], HuiTextEntityRow);
    return HuiTextEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts":
/*!*****************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts ***!
  \*****************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_timer_time_remaining__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/timer_time_remaining */ "./src/common/entity/timer_time_remaining.ts");
/* harmony import */ var _common_datetime_seconds_to_duration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/datetime/seconds_to_duration */ "./src/common/datetime/seconds_to_duration.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







var HuiTimerEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiTimerEntityRow, _super);
    function HuiTimerEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiTimerEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiTimerEntityRow.prototype.disconnectedCallback = function () {
        _super.prototype.disconnectedCallback.call(this);
        this._clearInterval();
    };
    HuiTimerEntityRow.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        if (this._config && this._config.entity) {
            var stateObj = this.hass.states[this._config.entity];
            if (stateObj) {
                this._startInterval(stateObj);
            }
        }
    };
    HuiTimerEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>", "</div>\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        <div>", "</div>\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, this._computeDisplay(stateObj));
    };
    HuiTimerEntityRow.prototype.shouldUpdate = function (changedProps) {
        if (changedProps.has("_timeRemaining")) {
            return true;
        }
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiTimerEntityRow.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (changedProps.has("hass")) {
            var stateObj = this.hass.states[this._config.entity];
            var oldHass = changedProps.get("hass");
            var oldStateObj = oldHass
                ? oldHass.states[this._config.entity]
                : undefined;
            if (oldStateObj !== stateObj) {
                this._startInterval(stateObj);
            }
            else if (!stateObj) {
                this._clearInterval();
            }
        }
    };
    HuiTimerEntityRow.prototype._clearInterval = function () {
        if (this._interval) {
            window.clearInterval(this._interval);
            this._interval = undefined;
        }
    };
    HuiTimerEntityRow.prototype._startInterval = function (stateObj) {
        var _this = this;
        this._clearInterval();
        this._calculateRemaining(stateObj);
        if (stateObj.state === "active") {
            this._interval = window.setInterval(function () { return _this._calculateRemaining(stateObj); }, 1000);
        }
    };
    HuiTimerEntityRow.prototype._calculateRemaining = function (stateObj) {
        this._timeRemaining = Object(_common_entity_timer_time_remaining__WEBPACK_IMPORTED_MODULE_4__["timerTimeRemaining"])(stateObj);
    };
    HuiTimerEntityRow.prototype._computeDisplay = function (stateObj) {
        if (!stateObj) {
            return null;
        }
        if (stateObj.state === "idle" || this._timeRemaining === 0) {
            return this.hass.localize("state.timer." + stateObj.state);
        }
        var display = Object(_common_datetime_seconds_to_duration__WEBPACK_IMPORTED_MODULE_5__["default"])(this._timeRemaining || 0);
        if (stateObj.state === "paused") {
            display += " (" + this.hass.localize("state.timer.paused") + ")";
        }
        return display;
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTimerEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTimerEntityRow.prototype, "_config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiTimerEntityRow.prototype, "_timeRemaining", void 0);
    HuiTimerEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-timer-entity-row")
    ], HuiTimerEntityRow);
    return HuiTimerEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_hui_generic_entity_row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hui-generic-entity-row */ "./src/panels/lovelace/components/hui-generic-entity-row.ts");
/* harmony import */ var _components_entity_ha_entity_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/entity/ha-entity-toggle */ "./src/components/entity/ha-entity-toggle.ts");
/* harmony import */ var _components_hui_warning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/hui-warning */ "./src/panels/lovelace/components/hui-warning.ts");
/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_display */ "./src/common/entity/compute_state_display.ts");
/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/has-changed */ "./src/panels/lovelace/common/has-changed.ts");







var HuiToggleEntityRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiToggleEntityRow, _super);
    function HuiToggleEntityRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiToggleEntityRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Configuration error");
        }
        this._config = config;
    };
    HuiToggleEntityRow.prototype.shouldUpdate = function (changedProps) {
        return Object(_common_has_changed__WEBPACK_IMPORTED_MODULE_6__["hasConfigOrEntityChanged"])(this, changedProps);
    };
    HuiToggleEntityRow.prototype.render = function () {
        if (!this._config || !this.hass) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var stateObj = this.hass.states[this._config.entity];
        if (!stateObj) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-warning\n          >", "</hui-warning\n        >\n      "], ["\n        <hui-warning\n          >",
                "</hui-warning\n        >\n      "])), this.hass.localize("ui.panel.lovelace.warning.entity_not_found", "entity", this._config.entity));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ", "\n      </hui-generic-entity-row>\n    "], ["\n      <hui-generic-entity-row .hass=\"", "\" .config=\"", "\">\n        ",
            "\n      </hui-generic-entity-row>\n    "])), this.hass, this._config, stateObj.state === "on" || stateObj.state === "off"
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "], ["\n              <ha-entity-toggle\n                .hass=\"", "\"\n                .stateObj=\"", "\"\n              ></ha-entity-toggle>\n            "])), this.hass, stateObj) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div>\n                ", "\n              </div>\n            "], ["\n              <div>\n                ",
            "\n              </div>\n            "])), Object(_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_5__["computeStateDisplay"])(this.hass.localize, stateObj, this.hass.language)));
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiToggleEntityRow.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiToggleEntityRow.prototype, "_config", void 0);
    HuiToggleEntityRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-toggle-entity-row")
    ], HuiToggleEntityRow);
    return HuiToggleEntityRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/ha-panel-lovelace.ts":
/*!**************************************************!*\
  !*** ./src/panels/lovelace/ha-panel-lovelace.ts ***!
  \**************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _material_mwc_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material/mwc-button */ "./node_modules/@material/mwc-button/mwc-button.js");
/* harmony import */ var _data_lovelace__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/lovelace */ "./src/data/lovelace.ts");
/* harmony import */ var _layouts_hass_loading_screen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../layouts/hass-loading-screen */ "./src/layouts/hass-loading-screen.ts");
/* harmony import */ var _layouts_hass_error_screen__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../layouts/hass-error-screen */ "./src/layouts/hass-error-screen.ts");
/* harmony import */ var _hui_root__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hui-root */ "./src/panels/lovelace/hui-root.ts");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _editor_show_save_config_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./editor/show-save-config-dialog */ "./src/panels/lovelace/editor/show-save-config-dialog.ts");
/* harmony import */ var _common_generate_lovelace_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./common/generate-lovelace-config */ "./src/panels/lovelace/common/generate-lovelace-config.ts");
/* harmony import */ var _util_toast__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../util/toast */ "./src/util/toast.ts");










var editorLoaded = false;
var LovelacePanel = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(LovelacePanel, _super);
    function LovelacePanel() {
        var _this = _super.call(this) || this;
        _this._state = "loading";
        _this._ignoreNextUpdateEvent = false;
        _this._closeEditor = _this._closeEditor.bind(_this);
        return _this;
    }
    LovelacePanel.prototype.render = function () {
        var state = this._state;
        if (state === "loaded") {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-root\n          .hass=\"", "\"\n          .lovelace=\"", "\"\n          .route=\"", "\"\n          .columns=\"", "\"\n          .narrow=", "\n          @config-refresh=\"", "\"\n        ></hui-root>\n      "], ["\n        <hui-root\n          .hass=\"", "\"\n          .lovelace=\"", "\"\n          .route=\"", "\"\n          .columns=\"", "\"\n          .narrow=", "\n          @config-refresh=\"", "\"\n        ></hui-root>\n      "])), this.hass, this.lovelace, this.route, this._columns, this.narrow, this._forceFetchConfig);
        }
        if (state === "error") {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hass-error-screen title=\"Lovelace\" .error=\"", "\">\n          <mwc-button on-click=\"_forceFetchConfig\"\n            >", "</mwc-button\n          >\n        </hass-error-screen>\n      "], ["\n        <hass-error-screen title=\"Lovelace\" .error=\"", "\">\n          <mwc-button on-click=\"_forceFetchConfig\"\n            >",
                "</mwc-button\n          >\n        </hass-error-screen>\n      "])), this._errorMsg, this.hass.localize("ui.panel.lovelace.reload_lovelace"));
        }
        if (state === "yaml-editor") {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        <hui-editor\n          .hass=\"", "\"\n          .lovelace=\"", "\"\n          .closeEditor=\"", "\"\n        ></hui-editor>\n      "], ["\n        <hui-editor\n          .hass=\"", "\"\n          .lovelace=\"", "\"\n          .closeEditor=\"", "\"\n        ></hui-editor>\n      "])), this.hass, this.lovelace, this._closeEditor);
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <hass-loading-screen\n        rootnav\n        .hass=", "\n        .narrow=", "\n      ></hass-loading-screen>\n    "], ["\n      <hass-loading-screen\n        rootnav\n        .hass=", "\n        .narrow=", "\n      ></hass-loading-screen>\n    "])), this.hass, this.narrow);
    };
    LovelacePanel.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (changedProps.has("narrow")) {
            this._updateColumns();
            return;
        }
        if (!changedProps.has("hass")) {
            return;
        }
        var oldHass = changedProps.get("hass");
        if (oldHass && this.hass.dockedSidebar !== oldHass.dockedSidebar) {
            this._updateColumns();
        }
    };
    LovelacePanel.prototype.firstUpdated = function () {
        var _this = this;
        this._fetchConfig(false);
        // we don't want to unsub as we want to stay informed of updates
        Object(_data_lovelace__WEBPACK_IMPORTED_MODULE_2__["subscribeLovelaceUpdates"])(this.hass.connection, function () {
            return _this._lovelaceChanged();
        });
        // reload lovelace on reconnect so we are sure we have the latest config
        window.addEventListener("connection-status", function (ev) {
            if (ev.detail === "connected") {
                _this._fetchConfig(false);
            }
        });
        this._updateColumns = this._updateColumns.bind(this);
        this.mqls = [300, 600, 900, 1200].map(function (width) {
            var mql = matchMedia("(min-width: " + width + "px)");
            mql.addListener(_this._updateColumns);
            return mql;
        });
        this._updateColumns();
    };
    LovelacePanel.prototype.connectedCallback = function () {
        _super.prototype.connectedCallback.call(this);
        if (this.lovelace &&
            this.hass &&
            this.lovelace.language !== this.hass.language) {
            // language has been changed, rebuild UI
            this._setLovelaceConfig(this.lovelace.config, this.lovelace.mode);
        }
        else if (this.lovelace && this.lovelace.mode === "generated") {
            // When lovelace is generated, we re-generate each time a user goes
            // to the states panel to make sure new entities are shown.
            this._state = "loading";
            this._regenerateConfig();
        }
    };
    LovelacePanel.prototype._regenerateConfig = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var conf;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Object(_common_generate_lovelace_config__WEBPACK_IMPORTED_MODULE_8__["generateLovelaceConfigFromHass"])(this.hass)];
                    case 1:
                        conf = _a.sent();
                        this._setLovelaceConfig(conf, "generated");
                        this._state = "loaded";
                        return [2 /*return*/];
                }
            });
        });
    };
    LovelacePanel.prototype._closeEditor = function () {
        this._state = "loaded";
    };
    LovelacePanel.prototype._updateColumns = function () {
        var matchColumns = this.mqls.reduce(function (cols, mql) { return cols + Number(mql.matches); }, 0);
        // Do -1 column if the menu is docked and open
        this._columns = Math.max(1, matchColumns -
            Number(!this.narrow && this.hass.dockedSidebar === "docked"));
    };
    LovelacePanel.prototype._lovelaceChanged = function () {
        var _this = this;
        if (this._ignoreNextUpdateEvent) {
            this._ignoreNextUpdateEvent = false;
            return;
        }
        Object(_util_toast__WEBPACK_IMPORTED_MODULE_9__["showToast"])(this, {
            message: this.hass.localize("ui.panel.lovelace.changed_toast.message"),
            action: {
                action: function () { return _this._fetchConfig(false); },
                text: this.hass.localize("ui.panel.lovelace.changed_toast.refresh"),
            },
            duration: 0,
            dismissable: false,
        });
    };
    LovelacePanel.prototype._forceFetchConfig = function () {
        this._fetchConfig(true);
    };
    LovelacePanel.prototype._fetchConfig = function (forceDiskRefresh) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var conf, confMode, confProm, llWindow, err_1;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        confMode = this.panel.config.mode;
                        llWindow = window;
                        // On first load, we speed up loading page by having LL promise ready
                        if (llWindow.llConfProm) {
                            confProm = llWindow.llConfProm;
                            llWindow.llConfProm = undefined;
                        }
                        else {
                            // Refreshing a YAML config can trigger an update event. We will ignore
                            // all update events while fetching the config and for 2 seconds after the cnofig is back.
                            // We ignore because we already have the latest config.
                            if (this.lovelace && this.lovelace.mode === "yaml") {
                                this._ignoreNextUpdateEvent = true;
                            }
                            confProm = Object(_data_lovelace__WEBPACK_IMPORTED_MODULE_2__["fetchConfig"])(this.hass.connection, forceDiskRefresh);
                        }
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, 5, 6]);
                        return [4 /*yield*/, confProm];
                    case 2:
                        conf = _a.sent();
                        return [3 /*break*/, 6];
                    case 3:
                        err_1 = _a.sent();
                        if (err_1.code !== "config_not_found") {
                            // tslint:disable-next-line
                            console.log(err_1);
                            this._state = "error";
                            this._errorMsg = err_1.message;
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, Object(_common_generate_lovelace_config__WEBPACK_IMPORTED_MODULE_8__["generateLovelaceConfigFromHass"])(this.hass)];
                    case 4:
                        conf = _a.sent();
                        confMode = "generated";
                        return [3 /*break*/, 6];
                    case 5:
                        // Ignore updates for another 2 seconds.
                        if (this.lovelace && this.lovelace.mode === "yaml") {
                            setTimeout(function () {
                                _this._ignoreNextUpdateEvent = false;
                            }, 2000);
                        }
                        return [7 /*endfinally*/];
                    case 6:
                        this._state = "loaded";
                        this._setLovelaceConfig(conf, confMode);
                        return [2 /*return*/];
                }
            });
        });
    };
    LovelacePanel.prototype._checkLovelaceConfig = function (config) {
        // Somehow there can be badges with value null, we remove those
        config.views.forEach(function (view) {
            if (view.badges) {
                view.badges = view.badges.filter(Boolean);
            }
        });
    };
    LovelacePanel.prototype._setLovelaceConfig = function (config, mode) {
        var _this = this;
        this._checkLovelaceConfig(config);
        this.lovelace = {
            config: config,
            mode: mode,
            editMode: this.lovelace ? this.lovelace.editMode : false,
            language: this.hass.language,
            enableFullEditMode: function () {
                if (!editorLoaded) {
                    editorLoaded = true;
                    Promise.all(/*! import() | lovelace-yaml-editor */[__webpack_require__.e("vendors~hui-alarm-panel-card-editor~hui-entities-card-editor~hui-entity-button-card-editor~hui-gauge~e96c28c1"), __webpack_require__.e(9), __webpack_require__.e("lovelace-yaml-editor")]).then(__webpack_require__.bind(null, /*! ./hui-editor */ "./src/panels/lovelace/hui-editor.ts"));
                }
                _this._state = "yaml-editor";
            },
            setEditMode: function (editMode) {
                if (!editMode || _this.lovelace.mode !== "generated") {
                    _this._updateLovelace({ editMode: editMode });
                    return;
                }
                Object(_editor_show_save_config_dialog__WEBPACK_IMPORTED_MODULE_7__["showSaveDialog"])(_this, {
                    lovelace: _this.lovelace,
                });
            },
            saveConfig: function (newConfig) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
                var _a, previousConfig, previousMode, err_2;
                return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            _a = this.lovelace, previousConfig = _a.config, previousMode = _a.mode;
                            this._checkLovelaceConfig(newConfig);
                            _b.label = 1;
                        case 1:
                            _b.trys.push([1, 3, , 4]);
                            // Optimistic update
                            this._updateLovelace({
                                config: newConfig,
                                mode: "storage",
                            });
                            this._ignoreNextUpdateEvent = true;
                            return [4 /*yield*/, Object(_data_lovelace__WEBPACK_IMPORTED_MODULE_2__["saveConfig"])(this.hass, newConfig)];
                        case 2:
                            _b.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            err_2 = _b.sent();
                            // tslint:disable-next-line
                            console.error(err_2);
                            // Rollback the optimistic update
                            this._updateLovelace({
                                config: previousConfig,
                                mode: previousMode,
                            });
                            throw err_2;
                        case 4: return [2 /*return*/];
                    }
                });
            }); },
        };
    };
    LovelacePanel.prototype._updateLovelace = function (props) {
        this.lovelace = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, this.lovelace), props);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "panel", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "narrow", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "route", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "_columns", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "_state", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "_errorMsg", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_6__["property"])()
    ], LovelacePanel.prototype, "lovelace", void 0);
    return LovelacePanel;
}(lit_element__WEBPACK_IMPORTED_MODULE_6__["LitElement"]));
customElements.define("ha-panel-lovelace", LovelacePanel);
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/panels/lovelace/hui-root.ts":
/*!*****************************************!*\
  !*** ./src/panels/lovelace/hui-root.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _polymer_app_layout_app_header_layout_app_header_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @polymer/app-layout/app-header-layout/app-header-layout */ "./node_modules/@polymer/app-layout/app-header-layout/app-header-layout.js");
/* harmony import */ var _polymer_app_layout_app_header_app_header__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @polymer/app-layout/app-header/app-header */ "./node_modules/@polymer/app-layout/app-header/app-header.js");
/* harmony import */ var _polymer_app_layout_app_scroll_effects_effects_waterfall__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @polymer/app-layout/app-scroll-effects/effects/waterfall */ "./node_modules/@polymer/app-layout/app-scroll-effects/effects/waterfall.js");
/* harmony import */ var _polymer_app_layout_app_toolbar_app_toolbar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @polymer/app-layout/app-toolbar/app-toolbar */ "./node_modules/@polymer/app-layout/app-toolbar/app-toolbar.js");
/* harmony import */ var _polymer_app_route_app_route__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @polymer/app-route/app-route */ "./node_modules/@polymer/app-route/app-route.js");
/* harmony import */ var _polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @polymer/paper-icon-button/paper-icon-button */ "./node_modules/@polymer/paper-icon-button/paper-icon-button.js");
/* harmony import */ var _material_mwc_button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material/mwc-button */ "./node_modules/@material/mwc-button/mwc-button.js");
/* harmony import */ var _polymer_paper_item_paper_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @polymer/paper-item/paper-item */ "./node_modules/@polymer/paper-item/paper-item.js");
/* harmony import */ var _polymer_paper_listbox_paper_listbox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @polymer/paper-listbox/paper-listbox */ "./node_modules/@polymer/paper-listbox/paper-listbox.js");
/* harmony import */ var _polymer_paper_menu_button_paper_menu_button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @polymer/paper-menu-button/paper-menu-button */ "./node_modules/@polymer/paper-menu-button/paper-menu-button.js");
/* harmony import */ var _polymer_paper_tabs_paper_tab__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @polymer/paper-tabs/paper-tab */ "./node_modules/@polymer/paper-tabs/paper-tab.js");
/* harmony import */ var _polymer_paper_tabs_paper_tabs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @polymer/paper-tabs/paper-tabs */ "./node_modules/@polymer/paper-tabs/paper-tabs.js");
/* harmony import */ var _common_dom_scroll_to_target__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../common/dom/scroll-to-target */ "./src/common/dom/scroll-to-target.ts");
/* harmony import */ var _layouts_ha_app_layout__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../layouts/ha-app-layout */ "./src/layouts/ha-app-layout.js");
/* harmony import */ var _components_ha_start_voice_button__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../components/ha-start-voice-button */ "./src/components/ha-start-voice-button.js");
/* harmony import */ var _components_ha_paper_icon_button_arrow_next__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../components/ha-paper-icon-button-arrow-next */ "./src/components/ha-paper-icon-button-arrow-next.ts");
/* harmony import */ var _components_ha_paper_icon_button_arrow_prev__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../components/ha-paper-icon-button-arrow-prev */ "./src/components/ha-paper-icon-button-arrow-prev.ts");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../common/util/debounce */ "./src/common/util/debounce.ts");
/* harmony import */ var _common_navigate__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../common/navigate */ "./src/common/navigate.ts");
/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../common/dom/fire_event */ "./src/common/dom/fire_event.ts");
/* harmony import */ var _editor_config_util__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./editor/config-util */ "./src/panels/lovelace/editor/config-util.ts");
/* harmony import */ var _views_hui_view__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./views/hui-view */ "./src/panels/lovelace/views/hui-view.ts");
/* harmony import */ var _views_hui_panel_view__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./views/hui-panel-view */ "./src/panels/lovelace/views/hui-panel-view.ts");
/* harmony import */ var _editor_view_editor_show_edit_view_dialog__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./editor/view-editor/show-edit-view-dialog */ "./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts");
/* harmony import */ var _editor_lovelace_editor_show_edit_lovelace_dialog__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./editor/lovelace-editor/show-edit-lovelace-dialog */ "./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts");
/* harmony import */ var _common_util_render_status__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../common/util/render-status */ "./src/common/util/render-status.ts");
/* harmony import */ var _resources_styles__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../resources/styles */ "./src/resources/styles.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_load_resources__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./common/load-resources */ "./src/panels/lovelace/common/load-resources.ts");


























// Not a duplicate import, this one is for type
// tslint:disable-next-line








var HUIRoot = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HUIRoot, _super);
    function HUIRoot() {
        var _this = _super.call(this) || this;
        // The view can trigger a re-render when it knows that certain
        // web components have been loaded.
        _this._debouncedConfigChanged = Object(_common_util_debounce__WEBPACK_IMPORTED_MODULE_21__["debounce"])(function () { return _this._selectView(_this._curView, true); }, 100, false);
        return _this;
    }
    HUIRoot.prototype.firstUpdated = function (changedProperties) {
        _super.prototype.firstUpdated.call(this, changedProperties);
        this.classList.toggle("disable-text-select", /Chrome/.test(navigator.userAgent) && /Android/.test(navigator.userAgent));
    };
    HUIRoot.prototype.render = function () {
        var _this = this;
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_12 || (templateObject_12 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n    <app-route .route=\"", "\" pattern=\"/:view\" data=\"", "\" @data-changed=\"", "\"></app-route>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" effects=\"waterfall\" class=\"", "\" fixed condenses>\n        ", "\n\n        ", "\n      </app-header>\n      <div id='view' class=\"", "\" @ll-rebuild='", "'></div>\n    </app-header-layout>\n    "], ["\n    <app-route .route=\"", "\" pattern=\"/:view\" data=\"",
            "\" @data-changed=\"", "\"></app-route>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" effects=\"waterfall\" class=\"",
            "\" fixed condenses>\n        ",
            "\n\n        ",
            "\n      </app-header>\n      <div id='view' class=\"",
            "\" @ll-rebuild='", "'></div>\n    </app-header-layout>\n    "])), this.route, this._routeData, this._routeDataChanged, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "edit-mode": this._editMode,
        }), this._editMode
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <app-toolbar class=\"edit-mode\">\n                  <paper-icon-button\n                    icon=\"hass:close\"\n                    @click=\"", "\"\n                  ></paper-icon-button>\n                  <div main-title>\n                    ", "\n                    <paper-icon-button\n                      icon=\"hass:pencil\"\n                      class=\"edit-icon\"\n                      @click=\"", "\"\n                    ></paper-icon-button>\n                  </div>\n                  <paper-icon-button\n                    icon=\"hass:help-circle\"\n                    title=\"Help\"\n                    @click=\"", "\"\n                  ></paper-icon-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      aria-label=\"Open Lovelace menu\"\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"", "\"\n                      slot=\"dropdown-content\"\n                    >\n                      ", "\n                      <paper-item @tap=\"", "\">\n                        ", "\n                      </paper-item>\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              "], ["\n                <app-toolbar class=\"edit-mode\">\n                  <paper-icon-button\n                    icon=\"hass:close\"\n                    @click=\"", "\"\n                  ></paper-icon-button>\n                  <div main-title>\n                    ",
                "\n                    <paper-icon-button\n                      icon=\"hass:pencil\"\n                      class=\"edit-icon\"\n                      @click=\"", "\"\n                    ></paper-icon-button>\n                  </div>\n                  <paper-icon-button\n                    icon=\"hass:help-circle\"\n                    title=\"Help\"\n                    @click=\"", "\"\n                  ></paper-icon-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      aria-label=\"Open Lovelace menu\"\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"", "\"\n                      slot=\"dropdown-content\"\n                    >\n                      ",
                "\n                      <paper-item @tap=\"", "\">\n                        ",
                "\n                      </paper-item>\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              "])), this._editModeDisable, this.config.title ||
                this.hass.localize("ui.panel.lovelace.editor.header"), this._editLovelace, this._handleHelp, this._deselect,  false /* No unused entities available in the demo */
                ? undefined
                : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                            <paper-item\n                              aria-label=", "\n                              @tap=\"", "\"\n                            >\n                              ", "\n                            </paper-item>\n                          "], ["\n                            <paper-item\n                              aria-label=",
                    "\n                              @tap=\"", "\"\n                            >\n                              ",
                    "\n                            </paper-item>\n                          "])), this.hass.localize("ui.panel.lovelace.menu.unused_entities"), this._handleUnusedEntities, this.hass.localize("ui.panel.lovelace.menu.unused_entities")), this.lovelace.enableFullEditMode, this.hass.localize("ui.panel.lovelace.editor.menu.raw_editor")) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <app-toolbar>\n                  <ha-menu-button\n                    .hass=", "\n                    .narrow=", "\n                  ></ha-menu-button>\n                  <div main-title>", "</div>\n                  <ha-start-voice-button\n                    .hass=\"", "\"\n                  ></ha-start-voice-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"", "\"\n                      slot=\"dropdown-content\"\n                    >\n                      ", "\n                      ", "\n                      <paper-item\n                        aria-label=", "\n                        @tap=\"", "\"\n                      >\n                        ", "\n                      </paper-item>\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              "], ["\n                <app-toolbar>\n                  <ha-menu-button\n                    .hass=", "\n                    .narrow=", "\n                  ></ha-menu-button>\n                  <div main-title>", "</div>\n                  <ha-start-voice-button\n                    .hass=\"", "\"\n                  ></ha-start-voice-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"", "\"\n                      slot=\"dropdown-content\"\n                    >\n                      ",
            "\n                      ",
            "\n                      <paper-item\n                        aria-label=",
            "\n                        @tap=\"", "\"\n                      >\n                        ", "\n                      </paper-item>\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              "])), this.hass, this.narrow, this.config.title || "牧养犬", this.hass, this._deselect, this._yamlMode
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                            <paper-item\n                              aria-label=", "\n                              @tap=\"", "\"\n                            >\n                              ", "\n                            </paper-item>\n                            <paper-item\n                              aria-label=", "\n                              @tap=\"", "\"\n                            >\n                              ", "\n                            </paper-item>\n                          "], ["\n                            <paper-item\n                              aria-label=",
                "\n                              @tap=\"", "\"\n                            >\n                              ",
                "\n                            </paper-item>\n                            <paper-item\n                              aria-label=",
                "\n                              @tap=\"", "\"\n                            >\n                              ",
                "\n                            </paper-item>\n                          "])), this.hass.localize("ui.panel.lovelace.menu.refresh"), this._handleRefresh, this.hass.localize("ui.panel.lovelace.menu.refresh"), this.hass.localize("ui.panel.lovelace.menu.unused_entities"), this._handleUnusedEntities, this.hass.localize("ui.panel.lovelace.menu.unused_entities")) : "", this.hass.user.is_admin
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                            <paper-item\n                              aria-label=", "\n                              @tap=\"", "\"\n                            >\n                              ", "\n                            </paper-item>\n                          "], ["\n                            <paper-item\n                              aria-label=",
                "\n                              @tap=\"", "\"\n                            >\n                              ",
                "\n                            </paper-item>\n                          "])), this.hass.localize("ui.panel.lovelace.menu.configure_ui"), this._editModeEnable, this.hass.localize("ui.panel.lovelace.menu.configure_ui")) : "", this.hass.localize("ui.panel.lovelace.menu.help"), this._handleHelp, this.hass.localize("ui.panel.lovelace.menu.help")), this.lovelace.config.views.length > 1 || this._editMode
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_11 || (templateObject_11 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                <div sticky>\n                  <paper-tabs\n                    scrollable\n                    .selected=\"", "\"\n                    @iron-activate=\"", "\"\n                    dir=\"", "\"\n                  >\n                    ", "\n                    ", "\n                  </paper-tabs>\n                </div>\n              "], ["\n                <div sticky>\n                  <paper-tabs\n                    scrollable\n                    .selected=\"", "\"\n                    @iron-activate=\"", "\"\n                    dir=\"", "\"\n                  >\n                    ",
                "\n                    ",
                "\n                  </paper-tabs>\n                </div>\n              "])), this._curView, this._handleViewSelected, Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_31__["computeRTLDirection"])(this.hass), this.lovelace.config.views.map(function (view) { return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_9 || (templateObject_9 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                        <paper-tab\n                          aria-label=\"", "\"\n                          class=\"", "\"\n                        >\n                          ", "\n                          ", "\n                          ", "\n                        </paper-tab>\n                      "], ["\n                        <paper-tab\n                          aria-label=\"", "\"\n                          class=\"",
                "\"\n                        >\n                          ",
                "\n                          ",
                "\n                          ",
                "\n                        </paper-tab>\n                      "])), view.title, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
                "hide-tab": Boolean(!_this._editMode &&
                    view.visible !== undefined &&
                    ((Array.isArray(view.visible) &&
                        !view.visible.some(function (e) { return e.user === _this.hass.user.id; })) ||
                        view.visible === false)),
            }), _this._editMode
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                                <ha-paper-icon-button-arrow-prev\n                                  title=\"Move view left\"\n                                  class=\"edit-icon view\"\n                                  @click=\"", "\"\n                                  ?disabled=\"", "\"\n                                ></ha-paper-icon-button-arrow-prev>\n                              "], ["\n                                <ha-paper-icon-button-arrow-prev\n                                  title=\"Move view left\"\n                                  class=\"edit-icon view\"\n                                  @click=\"", "\"\n                                  ?disabled=\"", "\"\n                                ></ha-paper-icon-button-arrow-prev>\n                              "])), _this._moveViewLeft, _this._curView === 0) : "", view.icon
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                                <ha-icon\n                                  title=\"", "\"\n                                  .icon=\"", "\"\n                                ></ha-icon>\n                              "], ["\n                                <ha-icon\n                                  title=\"", "\"\n                                  .icon=\"", "\"\n                                ></ha-icon>\n                              "])), view.title, view.icon) : view.title || "Unnamed view", _this._editMode
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                                <ha-icon\n                                  title=\"Edit view\"\n                                  class=\"edit-icon view\"\n                                  icon=\"hass:pencil\"\n                                  @click=\"", "\"\n                                ></ha-icon>\n                                <ha-paper-icon-button-arrow-next\n                                  title=\"Move view right\"\n                                  class=\"edit-icon view\"\n                                  @click=\"", "\"\n                                  ?disabled=\"", "\"\n                                ></ha-paper-icon-button-arrow-next>\n                              "], ["\n                                <ha-icon\n                                  title=\"Edit view\"\n                                  class=\"edit-icon view\"\n                                  icon=\"hass:pencil\"\n                                  @click=\"", "\"\n                                ></ha-icon>\n                                <ha-paper-icon-button-arrow-next\n                                  title=\"Move view right\"\n                                  class=\"edit-icon view\"\n                                  @click=\"", "\"\n                                  ?disabled=\"",
                    "\"\n                                ></ha-paper-icon-button-arrow-next>\n                              "])), _this._editView, _this._moveViewRight, _this._curView +
                    1 ===
                    _this.lovelace.config.views.length) : ""); }), this._editMode
                ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_10 || (templateObject_10 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n                          <paper-icon-button\n                            id=\"add-view\"\n                            @click=\"", "\"\n                            title=\"", "\"\n                            icon=\"hass:plus\"\n                          ></paper-icon-button>\n                        "], ["\n                          <paper-icon-button\n                            id=\"add-view\"\n                            @click=\"", "\"\n                            title=\"",
                    "\"\n                            icon=\"hass:plus\"\n                          ></paper-icon-button>\n                        "])), this._addView, this.hass.localize("ui.panel.lovelace.editor.edit_view.add")) : "") : "", Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({
            "tabs-hidden": this.lovelace.config.views.length < 2,
        }), this._debouncedConfigChanged);
    };
    Object.defineProperty(HUIRoot, "styles", {
        get: function () {
            return [
                _resources_styles__WEBPACK_IMPORTED_MODULE_30__["haStyle"],
                Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_13 || (templateObject_13 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n        :host {\n          --dark-color: #455a64;\n          --text-dark-color: #fff;\n        }\n\n        :host(.disable-text-select) {\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n        }\n\n        ha-app-layout {\n          min-height: 100%;\n        }\n        paper-menu-button {\n          padding: 0;\n        }\n        paper-tabs {\n          margin-left: 12px;\n          --paper-tabs-selection-bar-color: var(--text-primary-color, #fff);\n          text-transform: uppercase;\n        }\n        .edit-mode {\n          background-color: var(--dark-color, #455a64);\n          color: var(--text-dark-color);\n        }\n        .edit-mode div[main-title] {\n          pointer-events: auto;\n        }\n        paper-tab.iron-selected .edit-icon {\n          display: inline-flex;\n        }\n        .edit-icon {\n          color: var(--accent-color);\n          padding-left: 8px;\n        }\n        .edit-icon[disabled] {\n          color: var(--disabled-text-color);\n        }\n        .edit-icon.view {\n          display: none;\n        }\n        #add-view {\n          position: absolute;\n          height: 44px;\n        }\n        #add-view ha-icon {\n          background-color: var(--accent-color);\n          border-radius: 5px;\n          margin-top: 4px;\n        }\n        app-toolbar a {\n          color: var(--text-primary-color, white);\n        }\n        mwc-button.warning:not([disabled]) {\n          color: var(--google-red-500);\n        }\n        #view {\n          min-height: calc(100vh - 112px);\n          /**\n          * Since we only set min-height, if child nodes need percentage\n          * heights they must use absolute positioning so we need relative\n          * positioning here.\n          *\n          * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n          */\n          position: relative;\n          display: flex;\n        }\n        #view > * {\n          /**\n          * The view could get larger than the window in Firefox\n          * to prevent that we set the max-width to 100%\n          * flex-grow: 1 and flex-basis: 100% should make sure the view\n          * stays full width.\n          *\n          * https://github.com/home-assistant/home-assistant-polymer/pull/3806\n          */\n          flex: 1 1 100%;\n          max-width: 100%;\n        }\n        #view.tabs-hidden {\n          min-height: calc(100vh - 64px);\n        }\n        paper-item {\n          cursor: pointer;\n        }\n        .hide-tab {\n          display: none;\n        }\n      "], ["\n        :host {\n          --dark-color: #455a64;\n          --text-dark-color: #fff;\n        }\n\n        :host(.disable-text-select) {\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n        }\n\n        ha-app-layout {\n          min-height: 100%;\n        }\n        paper-menu-button {\n          padding: 0;\n        }\n        paper-tabs {\n          margin-left: 12px;\n          --paper-tabs-selection-bar-color: var(--text-primary-color, #fff);\n          text-transform: uppercase;\n        }\n        .edit-mode {\n          background-color: var(--dark-color, #455a64);\n          color: var(--text-dark-color);\n        }\n        .edit-mode div[main-title] {\n          pointer-events: auto;\n        }\n        paper-tab.iron-selected .edit-icon {\n          display: inline-flex;\n        }\n        .edit-icon {\n          color: var(--accent-color);\n          padding-left: 8px;\n        }\n        .edit-icon[disabled] {\n          color: var(--disabled-text-color);\n        }\n        .edit-icon.view {\n          display: none;\n        }\n        #add-view {\n          position: absolute;\n          height: 44px;\n        }\n        #add-view ha-icon {\n          background-color: var(--accent-color);\n          border-radius: 5px;\n          margin-top: 4px;\n        }\n        app-toolbar a {\n          color: var(--text-primary-color, white);\n        }\n        mwc-button.warning:not([disabled]) {\n          color: var(--google-red-500);\n        }\n        #view {\n          min-height: calc(100vh - 112px);\n          /**\n          * Since we only set min-height, if child nodes need percentage\n          * heights they must use absolute positioning so we need relative\n          * positioning here.\n          *\n          * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n          */\n          position: relative;\n          display: flex;\n        }\n        #view > * {\n          /**\n          * The view could get larger than the window in Firefox\n          * to prevent that we set the max-width to 100%\n          * flex-grow: 1 and flex-basis: 100% should make sure the view\n          * stays full width.\n          *\n          * https://github.com/home-assistant/home-assistant-polymer/pull/3806\n          */\n          flex: 1 1 100%;\n          max-width: 100%;\n        }\n        #view.tabs-hidden {\n          min-height: calc(100vh - 64px);\n        }\n        paper-item {\n          cursor: pointer;\n        }\n        .hide-tab {\n          display: none;\n        }\n      "]))),
            ];
        },
        enumerable: true,
        configurable: true
    });
    HUIRoot.prototype.updated = function (changedProperties) {
        var _this = this;
        _super.prototype.updated.call(this, changedProperties);
        var view = this._viewRoot;
        var huiView = view.lastChild;
        if (changedProperties.has("columns") &&
            huiView &&
            huiView instanceof _views_hui_view__WEBPACK_IMPORTED_MODULE_25__["HUIView"]) {
            huiView.columns = this.columns;
        }
        if (changedProperties.has("hass") && huiView) {
            huiView.hass = this.hass;
        }
        var newSelectView;
        var force = false;
        if (changedProperties.has("route")) {
            var views = this.config && this.config.views;
            if (this.route.path === "" &&
                this.route.prefix === "/lovelace" &&
                views) {
                Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, "/lovelace/" + (views[0].path || 0), true);
                newSelectView = 0;
            }
            else if (this._routeData.view === "hass-unused-entities") {
                newSelectView = "hass-unused-entities";
            }
            else if (this._routeData.view) {
                var selectedView = this._routeData.view;
                var selectedViewInt = parseInt(selectedView, 10);
                var index = 0;
                for (var i = 0; i < views.length; i++) {
                    if (views[i].path === selectedView || i === selectedViewInt) {
                        index = i;
                        break;
                    }
                }
                newSelectView = index;
            }
        }
        if (changedProperties.has("lovelace")) {
            var oldLovelace = changedProperties.get("lovelace");
            if (!oldLovelace || oldLovelace.config !== this.lovelace.config) {
                if (this.lovelace.config.resources) {
                    Object(_common_load_resources__WEBPACK_IMPORTED_MODULE_32__["loadLovelaceResources"])(this.lovelace.config.resources, this.hass.auth.data.hassUrl);
                }
                // On config change, recreate the current view from scratch.
                force = true;
                // Recalculate to see if we need to adjust content area for tab bar
                Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
            }
            if (!oldLovelace || oldLovelace.editMode !== this.lovelace.editMode) {
                // Leave unused entities when leaving edit mode
                if (this.lovelace.mode === "storage" &&
                    this._routeData.view === "hass-unused-entities") {
                    var views = this.config && this.config.views;
                    Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, "/lovelace/" + (views[0].path || 0));
                    newSelectView = 0;
                }
                // On edit mode change, recreate the current view from scratch
                force = true;
                // Recalculate to see if we need to adjust content area for tab bar
                Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
            }
        }
        if (newSelectView !== undefined || force) {
            if (force && newSelectView === undefined) {
                newSelectView = this._curView;
            }
            // Will allow for ripples to start rendering
            Object(_common_util_render_status__WEBPACK_IMPORTED_MODULE_29__["afterNextRender"])(function () { return _this._selectView(newSelectView, force); });
        }
    };
    Object.defineProperty(HUIRoot.prototype, "config", {
        get: function () {
            return this.lovelace.config;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HUIRoot.prototype, "_yamlMode", {
        get: function () {
            return this.lovelace.mode === "yaml";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HUIRoot.prototype, "_editMode", {
        get: function () {
            return this.lovelace.editMode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HUIRoot.prototype, "_layout", {
        get: function () {
            return this.shadowRoot.getElementById("layout");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HUIRoot.prototype, "_viewRoot", {
        get: function () {
            return this.shadowRoot.getElementById("view");
        },
        enumerable: true,
        configurable: true
    });
    HUIRoot.prototype._routeDataChanged = function (ev) {
        this._routeData = ev.detail.value;
    };
    HUIRoot.prototype._handleRefresh = function () {
        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "config-refresh");
    };
    HUIRoot.prototype._handleUnusedEntities = function () {
        Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, "/lovelace/hass-unused-entities");
    };
    HUIRoot.prototype._deselect = function (ev) {
        ev.target.selected = null;
    };
    HUIRoot.prototype._handleHelp = function () {
        window.open("https://www.home-assistant.io/lovelace/", "_blank");
    };
    HUIRoot.prototype._editModeEnable = function () {
        if (this._yamlMode) {
            window.alert("The edit UI is not available when in YAML mode.");
            return;
        }
        this.lovelace.setEditMode(true);
        if (this.config.views.length < 2) {
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
        }
    };
    HUIRoot.prototype._editModeDisable = function () {
        this.lovelace.setEditMode(false);
        if (this.config.views.length < 2) {
            Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_23__["fireEvent"])(this, "iron-resize");
        }
    };
    HUIRoot.prototype._editLovelace = function () {
        Object(_editor_lovelace_editor_show_edit_lovelace_dialog__WEBPACK_IMPORTED_MODULE_28__["showEditLovelaceDialog"])(this, this.lovelace);
    };
    HUIRoot.prototype._editView = function () {
        Object(_editor_view_editor_show_edit_view_dialog__WEBPACK_IMPORTED_MODULE_27__["showEditViewDialog"])(this, {
            lovelace: this.lovelace,
            viewIndex: this._curView,
        });
    };
    HUIRoot.prototype._moveViewLeft = function () {
        var lovelace = this.lovelace;
        var oldIndex = this._curView;
        var newIndex = this._curView - 1;
        this._curView = newIndex;
        lovelace.saveConfig(Object(_editor_config_util__WEBPACK_IMPORTED_MODULE_24__["swapView"])(lovelace.config, oldIndex, newIndex));
    };
    HUIRoot.prototype._moveViewRight = function () {
        var lovelace = this.lovelace;
        var oldIndex = this._curView;
        var newIndex = this._curView + 1;
        this._curView = newIndex;
        lovelace.saveConfig(Object(_editor_config_util__WEBPACK_IMPORTED_MODULE_24__["swapView"])(lovelace.config, oldIndex, newIndex));
    };
    HUIRoot.prototype._addView = function () {
        Object(_editor_view_editor_show_edit_view_dialog__WEBPACK_IMPORTED_MODULE_27__["showEditViewDialog"])(this, {
            lovelace: this.lovelace,
        });
    };
    HUIRoot.prototype._handleViewSelected = function (ev) {
        var viewIndex = ev.detail.selected;
        if (viewIndex !== this._curView) {
            var path = this.config.views[viewIndex].path || viewIndex;
            Object(_common_navigate__WEBPACK_IMPORTED_MODULE_22__["navigate"])(this, "/lovelace/" + path);
        }
        Object(_common_dom_scroll_to_target__WEBPACK_IMPORTED_MODULE_15__["default"])(this, this._layout.header.scrollTarget);
    };
    HUIRoot.prototype._selectView = function (viewIndex, force) {
        var _this = this;
        if (!force && this._curView === viewIndex) {
            return;
        }
        viewIndex = viewIndex === undefined ? 0 : viewIndex;
        this._curView = viewIndex;
        if (force) {
            this._viewCache = {};
        }
        // Recreate a new element to clear the applied themes.
        var root = this._viewRoot;
        if (root.lastChild) {
            root.removeChild(root.lastChild);
        }
        if (viewIndex === "hass-unused-entities") {
            var unusedEntities_1 = document.createElement("hui-unused-entities");
            // Wait for promise to resolve so that the element has been upgraded.
            Promise.all(/*! import() | hui-unused-entities */[__webpack_require__.e("vendors~hui-unused-entities~hui-view-editable~panel-config-area-registry~panel-config-automation~pan~6ac00806"), __webpack_require__.e("vendors~hui-unused-entities~panel-config-devices~panel-config-entity-registry~panel-config-integrations"), __webpack_require__.e("hui-unused-entities~panel-config-devices~panel-config-entity-registry~panel-config-integrations"), __webpack_require__.e("hui-unused-entities")]).then(__webpack_require__.bind(null, /*! ./editor/unused-entities/hui-unused-entities */ "./src/panels/lovelace/editor/unused-entities/hui-unused-entities.ts")).then(function () {
                unusedEntities_1.hass = _this.hass;
                unusedEntities_1.lovelace = _this.lovelace;
                unusedEntities_1.narrow = _this.narrow;
            });
            if (this.config.background) {
                unusedEntities_1.style.setProperty("--lovelace-background", this.config.background);
            }
            root.append(unusedEntities_1);
            return;
        }
        var view;
        var viewConfig = this.config.views[viewIndex];
        if (!viewConfig) {
            this._editModeEnable();
            return;
        }
        if (!force && this._viewCache[viewIndex]) {
            view = this._viewCache[viewIndex];
        }
        else {
            if (viewConfig.panel && viewConfig.cards && viewConfig.cards.length > 0) {
                view = document.createElement("hui-panel-view");
                view.config = viewConfig;
            }
            else {
                view = document.createElement("hui-view");
                view.lovelace = this.lovelace;
                view.columns = this.columns;
                view.index = viewIndex;
            }
            this._viewCache[viewIndex] = view;
        }
        view.hass = this.hass;
        var configBackground = viewConfig.background || this.config.background;
        if (configBackground) {
            view.style.setProperty("--lovelace-background", configBackground);
        }
        root.append(view);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIRoot.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIRoot.prototype, "lovelace", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIRoot.prototype, "columns", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIRoot.prototype, "narrow", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIRoot.prototype, "route", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIRoot.prototype, "_routeData", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIRoot.prototype, "_curView", void 0);
    return HUIRoot;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
customElements.define("hui-root", HUIRoot);
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13;


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-call-service-row.ts":
/*!******************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-call-service-row.ts ***!
  \******************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _material_mwc_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material/mwc-button */ "./node_modules/@material/mwc-button/mwc-button.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _common_call_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/call-service */ "./src/panels/lovelace/common/call-service.ts");





var HuiCallServiceRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiCallServiceRow, _super);
    function HuiCallServiceRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiCallServiceRow.prototype.setConfig = function (config) {
        if (!config || !config.name || !config.service) {
            throw new Error("Error in card configuration.");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ icon: "hass:remote", action_name: "Run" }, config);
    };
    HuiCallServiceRow.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-icon .icon=\"", "\"></ha-icon>\n      <div class=\"flex\">\n        <div>", "</div>\n        <mwc-button @click=\"", "\"\n          >", "</mwc-button\n        >\n      </div>\n    "], ["\n      <ha-icon .icon=\"", "\"></ha-icon>\n      <div class=\"flex\">\n        <div>", "</div>\n        <mwc-button @click=\"", "\"\n          >", "</mwc-button\n        >\n      </div>\n    "])), this._config.icon, this._config.name, this._callService, this._config.action_name);
    };
    Object.defineProperty(HuiCallServiceRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      .flex {\n        flex: 1;\n        overflow: hidden;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .flex div {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "], ["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      .flex {\n        flex: 1;\n        overflow: hidden;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .flex div {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    HuiCallServiceRow.prototype._callService = function () {
        Object(_common_call_service__WEBPACK_IMPORTED_MODULE_4__["callService"])(this._config, this.hass);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiCallServiceRow.prototype, "_config", void 0);
    HuiCallServiceRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-call-service-row")
    ], HuiCallServiceRow);
    return HuiCallServiceRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-cast-row.ts":
/*!**********************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-cast-row.ts ***!
  \**********************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");
/* harmony import */ var _cast_receiver_messages__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../cast/receiver_messages */ "./src/cast/receiver_messages.ts");





var HuiCastRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiCastRow, _super);
    function HuiCastRow() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._noHTTPS = false;
        return _this;
    }
    HuiCastRow.prototype.setConfig = function (config) {
        if (!config || config.view === undefined || config.view === null) {
            throw new Error("Invalid Configuration: 'view' required");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ icon: "hass:television", name: "牧养犬 Cast" }, config);
    };
    HuiCastRow.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var active = this._castManager &&
            this._castManager.status &&
            this._config.view === this._castManager.status.lovelacePath;
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_7 || (templateObject_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <ha-icon .icon=\"", "\"></ha-icon>\n      <div class=\"flex\">\n        <div class=\"name\">", "</div>\n        ", "\n      </div>\n    "], ["\n      <ha-icon .icon=\"", "\"></ha-icon>\n      <div class=\"flex\">\n        <div class=\"name\">", "</div>\n        ",
            "\n      </div>\n    "])), this._config.icon, this._config.name, this._noHTTPS
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              Cast requires HTTPS\n            "], ["\n              Cast requires HTTPS\n            "]))) : this._castManager === undefined
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""]))) : this._castManager === null
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              Cast API unavailable\n            "], ["\n              Cast API unavailable\n            "]))) : this._castManager.castState === "NO_DEVICES_AVAILABLE"
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              No devices found\n            "], ["\n              No devices found\n            "]))) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_6 || (templateObject_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n              <div class=\"controls\">\n                <google-cast-launcher></google-cast-launcher>\n                <mwc-button\n                  @click=", "\n                  class=", "\n                  .unelevated=", "\n                  .disabled=", "\n                >\n                  SHOW\n                </mwc-button>\n              </div>\n            "], ["\n              <div class=\"controls\">\n                <google-cast-launcher></google-cast-launcher>\n                <mwc-button\n                  @click=", "\n                  class=", "\n                  .unelevated=", "\n                  .disabled=", "\n                >\n                  SHOW\n                </mwc-button>\n              </div>\n            "])), this._sendLovelace, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_2__["classMap"])({ inactive: !Boolean(active) }), active, !this._castManager.status));
    };
    HuiCastRow.prototype.firstUpdated = function (changedProps) {
        var _this = this;
        _super.prototype.firstUpdated.call(this, changedProps);
        if (location.protocol === "http:" && location.hostname !== "localhost") {
            this._noHTTPS = true;
        }
        __webpack_require__.e(/*! import() */ 21).then(__webpack_require__.bind(null, /*! ../../../cast/cast_manager */ "./src/cast/cast_manager.ts")).then(function (_a) {
            var getCastManager = _a.getCastManager;
            return getCastManager(_this.hass.auth).then(function (mgr) {
                _this._castManager = mgr;
                mgr.addEventListener("connection-changed", function () {
                    _this.requestUpdate();
                });
                mgr.addEventListener("state-changed", function () {
                    _this.requestUpdate();
                });
            }, function () {
                _this._castManager = null;
            });
        });
    };
    HuiCastRow.prototype.updated = function (changedProps) {
        _super.prototype.updated.call(this, changedProps);
        if (this._config && this._config.hide_if_unavailable) {
            this.style.display =
                !this._castManager ||
                    this._castManager.castState === "NO_DEVICES_AVAILABLE"
                    ? "none"
                    : "";
        }
    };
    HuiCastRow.prototype._sendLovelace = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Object(_cast_receiver_messages__WEBPACK_IMPORTED_MODULE_4__["ensureConnectedCastSession"])(this._castManager, this.hass.auth)];
                    case 1:
                        _a.sent();
                        Object(_cast_receiver_messages__WEBPACK_IMPORTED_MODULE_4__["castSendShowLovelaceView"])(this._castManager, this._config.view);
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(HuiCastRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_8 || (templateObject_8 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      .flex {\n        flex: 1;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .controls {\n        display: flex;\n        align-items: center;\n      }\n      google-cast-launcher {\n        margin-right: 0.57em;\n        cursor: pointer;\n        display: inline-block;\n        height: 24px;\n        width: 24px;\n      }\n      .inactive {\n        padding: 0 4px;\n      }\n    "], ["\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      .flex {\n        flex: 1;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .controls {\n        display: flex;\n        align-items: center;\n      }\n      google-cast-launcher {\n        margin-right: 0.57em;\n        cursor: pointer;\n        display: inline-block;\n        height: 24px;\n        width: 24px;\n      }\n      .inactive {\n        padding: 0 4px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiCastRow.prototype, "_config", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiCastRow.prototype, "_castManager", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiCastRow.prototype, "_noHTTPS", void 0);
    HuiCastRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-cast-row")
    ], HuiCastRow);
    return HuiCastRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-divider-row.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-divider-row.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");


var HuiDividerRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiDividerRow, _super);
    function HuiDividerRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiDividerRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Error in card configuration.");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ style: {
                height: "1px",
                "background-color": "var(--secondary-text-color)",
            } }, config);
    };
    HuiDividerRow.prototype.render = function () {
        var _this = this;
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        var el = document.createElement("div");
        Object.keys(this._config.style).forEach(function (prop) {
            el.style.setProperty(prop, _this._config.style[prop]);
        });
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ", "\n    "], ["\n      ", "\n    "])), el);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiDividerRow.prototype, "_config", void 0);
    HuiDividerRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-divider-row")
    ], HuiDividerRow);
    return HuiDividerRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-section-row.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-section-row.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");



var HuiSectionRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiSectionRow, _super);
    function HuiSectionRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiSectionRow.prototype.setConfig = function (config) {
        if (!config) {
            throw new Error("Error in card configuration.");
        }
        this._config = config;
    };
    HuiSectionRow.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_4 || (templateObject_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <div class=\"divider\"></div>\n      ", "\n    "], ["\n      <div class=\"divider\"></div>\n      ",
            "\n    "])), this._config.label
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n            <div class=\"label\">", "</div>\n          "], ["\n            <div class=\"label\">", "</div>\n          "])), this._config.label) : Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""]))));
    };
    Object.defineProperty(HuiSectionRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_5 || (templateObject_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      .label {\n        color: var(--primary-color);\n        margin-left: 8px;\n        margin-bottom: 16px;\n        margin-top: 16px;\n      }\n      .divider {\n        height: 1px;\n        background-color: var(--secondary-text-color);\n        opacity: 0.25;\n        margin-left: -16px;\n        margin-right: -16px;\n        margin-top: 8px;\n      }\n    "], ["\n      .label {\n        color: var(--primary-color);\n        margin-left: 8px;\n        margin-bottom: 16px;\n        margin-top: 16px;\n      }\n      .divider {\n        height: 1px;\n        background-color: var(--secondary-text-color);\n        opacity: 0.25;\n        margin-left: -16px;\n        margin-right: -16px;\n        margin-top: 8px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiSectionRow.prototype, "_config", void 0);
    HuiSectionRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-section-row")
    ], HuiSectionRow);
    return HuiSectionRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/panels/lovelace/special-rows/hui-weblink-row.ts":
/*!*************************************************************!*\
  !*** ./src/panels/lovelace/special-rows/hui-weblink-row.ts ***!
  \*************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_ha_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/ha-icon */ "./src/components/ha-icon.ts");



var HuiWeblinkRow = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HuiWeblinkRow, _super);
    function HuiWeblinkRow() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HuiWeblinkRow.prototype.setConfig = function (config) {
        if (!config || !config.url) {
            throw new Error("Invalid Configuration: 'url' required");
        }
        this._config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ icon: "hass:link", name: config.url }, config);
    };
    HuiWeblinkRow.prototype.render = function () {
        if (!this._config) {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])([""], [""])));
        }
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <a\n        href=", "\n        target=", "\n      >\n        <ha-icon .icon=\"", "\"></ha-icon>\n        <div>", "</div>\n      </a>\n    "], ["\n      <a\n        href=", "\n        target=", "\n      >\n        <ha-icon .icon=\"", "\"></ha-icon>\n        <div>", "</div>\n      </a>\n    "])), this._config.url, this._config.url.indexOf("://") !== -1 ? "_blank" : "", this._config.icon, this._config.name);
    };
    Object.defineProperty(HuiWeblinkRow, "styles", {
        get: function () {
            return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["css"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      a {\n        display: flex;\n        align-items: center;\n        color: var(--primary-color);\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      div {\n        flex: 1;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-left: 16px;\n      }\n    "], ["\n      a {\n        display: flex;\n        align-items: center;\n        color: var(--primary-color);\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      div {\n        flex: 1;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-left: 16px;\n      }\n    "])));
        },
        enumerable: true,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HuiWeblinkRow.prototype, "_config", void 0);
    HuiWeblinkRow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-weblink-row")
    ], HuiWeblinkRow);
    return HuiWeblinkRow;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/lovelace/views/hui-panel-view.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/views/hui-panel-view.ts ***!
  \*****************************************************/
/*! exports provided: HUIPanelView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HUIPanelView", function() { return HUIPanelView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");




var HUIPanelView = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HUIPanelView, _super);
    function HUIPanelView() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HUIPanelView.prototype.firstUpdated = function (changedProperties) {
        _super.prototype.firstUpdated.call(this, changedProperties);
        this.style.setProperty("background", "var(--lovelace-background)");
    };
    HUIPanelView.prototype.update = function (changedProperties) {
        _super.prototype.update.call(this, changedProperties);
        var hass = this.hass;
        var hassChanged = changedProperties.has("hass");
        var oldHass = changedProperties.get("hass");
        var configChanged = changedProperties.has("config");
        if (configChanged) {
            this._createCard();
        }
        else if (hassChanged) {
            this.lastChild.hass = this.hass;
        }
        if (configChanged ||
            (hassChanged &&
                oldHass &&
                (hass.themes !== oldHass.themes ||
                    hass.selectedTheme !== oldHass.selectedTheme))) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_2__["default"])(this, hass.themes, this.config.theme);
        }
    };
    HUIPanelView.prototype._createCard = function () {
        if (this.lastChild) {
            this.removeChild(this.lastChild);
        }
        var card = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_3__["createCardElement"])(this.config.cards[0]);
        card.hass = this.hass;
        card.isPanel = true;
        this.append(card);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIPanelView.prototype, "hass", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["property"])()
    ], HUIPanelView.prototype, "config", void 0);
    HUIPanelView = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["customElement"])("hui-panel-view")
    ], HUIPanelView);
    return HUIPanelView;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["UpdatingElement"]));



/***/ }),

/***/ "./src/panels/lovelace/views/hui-view.ts":
/*!***********************************************!*\
  !*** ./src/panels/lovelace/views/hui-view.ts ***!
  \***********************************************/
/*! exports provided: HUIView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HUIView", function() { return HUIView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-element */ "./node_modules/lit-element/lit-element.js");
/* harmony import */ var _components_entity_ha_state_label_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/entity/ha-state-label-badge */ "./src/components/entity/ha-state-label-badge.ts");
/* harmony import */ var _common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/dom/apply_themes_on_element */ "./src/common/dom/apply_themes_on_element.ts");
/* harmony import */ var lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit-html/directives/class-map */ "./node_modules/lit-html/directives/class-map.js");
/* harmony import */ var _common_create_card_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/create-card-element */ "./src/panels/lovelace/common/create-card-element.ts");
/* harmony import */ var _common_compute_card_size__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/compute-card-size */ "./src/panels/lovelace/common/compute-card-size.ts");
/* harmony import */ var _editor_card_editor_show_edit_card_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../editor/card-editor/show-edit-card-dialog */ "./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts");
/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/util/compute_rtl */ "./src/common/util/compute_rtl.ts");
/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/process-config-entities */ "./src/panels/lovelace/common/process-config-entities.ts");










var editCodeLoaded = false;
// Find column with < 5 entities, else column with lowest count
var getColumnIndex = function (columnEntityCount, size) {
    var minIndex = 0;
    for (var i = 0; i < columnEntityCount.length; i++) {
        if (columnEntityCount[i] < 5) {
            minIndex = i;
            break;
        }
        if (columnEntityCount[i] < columnEntityCount[minIndex]) {
            minIndex = i;
        }
    }
    columnEntityCount[minIndex] += size;
    return minIndex;
};
var HUIView = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(HUIView, _super);
    function HUIView() {
        var _this = _super.call(this) || this;
        _this._cards = [];
        _this._badges = [];
        return _this;
    }
    Object.defineProperty(HUIView, "properties", {
        get: function () {
            return {
                hass: {},
                lovelace: {},
                columns: { type: Number },
                index: { type: Number },
                _cards: {},
                _badges: {},
            };
        },
        enumerable: true,
        configurable: true
    });
    // Public to make demo happy
    HUIView.prototype.createCardElement = function (cardConfig) {
        var _this = this;
        var element = Object(_common_create_card_element__WEBPACK_IMPORTED_MODULE_5__["createCardElement"])(cardConfig);
        element.hass = this.hass;
        element.addEventListener("ll-rebuild", function (ev) {
            // In edit mode let it go to hui-root and rebuild whole view.
            if (!_this.lovelace.editMode) {
                ev.stopPropagation();
                _this._rebuildCard(element, cardConfig);
            }
        }, { once: true });
        return element;
    };
    HUIView.prototype.render = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_2 || (templateObject_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      ", "\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n      ", "\n    "], ["\n      ", "\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n      ",
            "\n    "])), this.renderStyles(), this.lovelace.editMode
            ? Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_1 || (templateObject_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n            <ha-fab\n              icon=\"hass:plus\"\n              title=\"", "\"\n              @click=\"", "\"\n              class=\"", "\"\n            ></ha-fab>\n          "], ["\n            <ha-fab\n              icon=\"hass:plus\"\n              title=\"",
                "\"\n              @click=\"", "\"\n              class=\"",
                "\"\n            ></ha-fab>\n          "])), this.hass.localize("ui.panel.lovelace.editor.edit_card.add"), this._addCard, Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_4__["classMap"])({
                rtl: Object(_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_8__["computeRTL"])(this.hass),
            })) : "");
    };
    HUIView.prototype.renderStyles = function () {
        return Object(lit_element__WEBPACK_IMPORTED_MODULE_1__["html"])(templateObject_3 || (templateObject_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"])(["\n      <style>\n        :host {\n          display: block;\n          box-sizing: border-box;\n          padding: 4px 4px 0;\n          transform: translateZ(0);\n          position: relative;\n          background: var(--lovelace-background);\n        }\n\n        #badges {\n          margin: 8px 16px;\n          font-size: 85%;\n          text-align: center;\n        }\n\n        #columns {\n          display: flex;\n          flex-direction: row;\n          justify-content: center;\n        }\n\n        .column {\n          flex-basis: 0;\n          flex-grow: 1;\n          max-width: 500px;\n        }\n\n        .column > * {\n          display: block;\n          margin: 4px 4px 8px;\n        }\n\n        ha-fab {\n          position: sticky;\n          float: right;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n\n        ha-fab.rtl {\n          float: left;\n          right: auto;\n          left: 16px;\n        }\n\n        @media (max-width: 500px) {\n          :host {\n            padding-left: 0;\n            padding-right: 0;\n          }\n\n          .column > * {\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        @media (max-width: 599px) {\n          .column {\n            max-width: 600px;\n          }\n        }\n      </style>\n    "], ["\n      <style>\n        :host {\n          display: block;\n          box-sizing: border-box;\n          padding: 4px 4px 0;\n          transform: translateZ(0);\n          position: relative;\n          background: var(--lovelace-background);\n        }\n\n        #badges {\n          margin: 8px 16px;\n          font-size: 85%;\n          text-align: center;\n        }\n\n        #columns {\n          display: flex;\n          flex-direction: row;\n          justify-content: center;\n        }\n\n        .column {\n          flex-basis: 0;\n          flex-grow: 1;\n          max-width: 500px;\n        }\n\n        .column > * {\n          display: block;\n          margin: 4px 4px 8px;\n        }\n\n        ha-fab {\n          position: sticky;\n          float: right;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n\n        ha-fab.rtl {\n          float: left;\n          right: auto;\n          left: 16px;\n        }\n\n        @media (max-width: 500px) {\n          :host {\n            padding-left: 0;\n            padding-right: 0;\n          }\n\n          .column > * {\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        @media (max-width: 599px) {\n          .column {\n            max-width: 600px;\n          }\n        }\n      </style>\n    "])));
    };
    HUIView.prototype.updated = function (changedProperties) {
        var _this = this;
        _super.prototype.updated.call(this, changedProperties);
        var hass = this.hass;
        var lovelace = this.lovelace;
        if (lovelace.editMode && !editCodeLoaded) {
            editCodeLoaded = true;
            Promise.all(/*! import() | hui-view-editable */[__webpack_require__.e("vendors~hui-unused-entities~hui-view-editable~panel-config-area-registry~panel-config-automation~pan~6ac00806"), __webpack_require__.e("hui-view-editable")]).then(__webpack_require__.bind(null, /*! ./hui-view-editable */ "./src/panels/lovelace/views/hui-view-editable.ts"));
        }
        var hassChanged = changedProperties.has("hass");
        var editModeChanged = false;
        var configChanged = false;
        if (changedProperties.has("index")) {
            configChanged = true;
        }
        else if (changedProperties.has("lovelace")) {
            var oldLovelace = changedProperties.get("lovelace");
            editModeChanged =
                !oldLovelace || lovelace.editMode !== oldLovelace.editMode;
            configChanged = !oldLovelace || lovelace.config !== oldLovelace.config;
        }
        if (configChanged) {
            this._createBadges(lovelace.config.views[this.index]);
        }
        else if (hassChanged) {
            this._badges.forEach(function (badge) {
                var element = badge.element, entityId = badge.entityId;
                element.hass = hass;
                element.state = hass.states[entityId];
            });
        }
        if (configChanged || editModeChanged || changedProperties.has("columns")) {
            this._createCards(lovelace.config.views[this.index]);
        }
        else if (hassChanged) {
            this._cards.forEach(function (element) {
                element.hass = _this.hass;
            });
        }
        var oldHass = changedProperties.get("hass");
        if (configChanged ||
            editModeChanged ||
            (hassChanged &&
                oldHass &&
                (hass.themes !== oldHass.themes ||
                    hass.selectedTheme !== oldHass.selectedTheme))) {
            Object(_common_dom_apply_themes_on_element__WEBPACK_IMPORTED_MODULE_3__["default"])(this, hass.themes, lovelace.config.views[this.index].theme);
        }
    };
    HUIView.prototype._addCard = function () {
        Object(_editor_card_editor_show_edit_card_dialog__WEBPACK_IMPORTED_MODULE_7__["showEditCardDialog"])(this, {
            lovelace: this.lovelace,
            path: [this.index],
        });
    };
    HUIView.prototype._createBadges = function (config) {
        var root = this.shadowRoot.getElementById("badges");
        while (root.lastChild) {
            root.removeChild(root.lastChild);
        }
        if (!config || !config.badges || !Array.isArray(config.badges)) {
            root.style.display = "none";
            this._badges = [];
            return;
        }
        var elements = [];
        var badges = Object(_common_process_config_entities__WEBPACK_IMPORTED_MODULE_9__["processConfigEntities"])(config.badges);
        for (var _i = 0, badges_1 = badges; _i < badges_1.length; _i++) {
            var badge = badges_1[_i];
            var element = document.createElement("ha-state-label-badge");
            var entityId = badge.entity;
            element.hass = this.hass;
            element.state = this.hass.states[entityId];
            element.name = badge.name;
            element.icon = badge.icon;
            element.image = badge.image;
            elements.push({ element: element, entityId: entityId });
            root.appendChild(element);
        }
        this._badges = elements;
        root.style.display = elements.length > 0 ? "block" : "none";
    };
    HUIView.prototype._createCards = function (config) {
        var _this = this;
        var root = this.shadowRoot.getElementById("columns");
        while (root.lastChild) {
            root.removeChild(root.lastChild);
        }
        if (!config || !config.cards || !Array.isArray(config.cards)) {
            this._cards = [];
            return;
        }
        var elements = [];
        var elementsToAppend = [];
        config.cards.forEach(function (cardConfig, cardIndex) {
            var element = _this.createCardElement(cardConfig);
            elements.push(element);
            if (!_this.lovelace.editMode) {
                elementsToAppend.push(element);
                return;
            }
            var wrapper = document.createElement("hui-card-options");
            wrapper.hass = _this.hass;
            wrapper.lovelace = _this.lovelace;
            wrapper.path = [_this.index, cardIndex];
            wrapper.appendChild(element);
            elementsToAppend.push(wrapper);
        });
        var columns = [];
        var columnEntityCount = [];
        for (var i = 0; i < this.columns; i++) {
            columns.push([]);
            columnEntityCount.push(0);
        }
        elements.forEach(function (el, index) {
            var cardSize = Object(_common_compute_card_size__WEBPACK_IMPORTED_MODULE_6__["computeCardSize"])(el);
            // Element to append might be the wrapped card when we're editing.
            columns[getColumnIndex(columnEntityCount, cardSize)].push(elementsToAppend[index]);
        });
        // Remove empty columns
        columns = columns.filter(function (val) { return val.length > 0; });
        columns.forEach(function (column) {
            var columnEl = document.createElement("div");
            columnEl.classList.add("column");
            column.forEach(function (el) { return columnEl.appendChild(el); });
            root.appendChild(columnEl);
        });
        this._cards = elements;
    };
    HUIView.prototype._rebuildCard = function (cardElToReplace, config) {
        var newCardEl = this.createCardElement(config);
        cardElToReplace.parentElement.replaceChild(newCardEl, cardElToReplace);
        this._cards = this._cards.map(function (curCardEl) {
            return curCardEl === cardElToReplace ? newCardEl : curCardEl;
        });
    };
    return HUIView;
}(lit_element__WEBPACK_IMPORTED_MODULE_1__["LitElement"]));

customElements.define("hui-view", HUIView);
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/panels/map/ha-entity-marker.js":
/*!********************************************!*\
  !*** ./src/panels/map/ha-entity-marker.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _polymer_iron_image_iron_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @polymer/iron-image/iron-image */ "./node_modules/@polymer/iron-image/iron-image.js");
/* harmony import */ var _polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @polymer/polymer/lib/utils/html-tag */ "./node_modules/@polymer/polymer/lib/utils/html-tag.js");
/* harmony import */ var _polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @polymer/polymer/polymer-element */ "./node_modules/@polymer/polymer/polymer-element.js");
/* harmony import */ var _mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../mixins/events-mixin */ "./src/mixins/events-mixin.js");
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _templateObject() {
  var data = _taggedTemplateLiteral(["\n      <style include=\"iron-positioning\"></style>\n      <style>\n        .marker {\n          vertical-align: top;\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: 2.5em;\n          text-align: center;\n          height: 2.5em;\n          line-height: 2.5em;\n          font-size: 1.5em;\n          border-radius: 50%;\n          border: 0.1em solid\n            var(--ha-marker-color, var(--default-primary-color));\n          color: rgb(76, 76, 76);\n          background-color: white;\n        }\n        iron-image {\n          border-radius: 50%;\n        }\n      </style>\n\n      <div class=\"marker\">\n        <template is=\"dom-if\" if=\"[[entityName]]\"\n          >[[entityName]]</template\n        >\n        <template is=\"dom-if\" if=\"[[entityPicture]]\">\n          <iron-image\n            sizing=\"cover\"\n            class=\"fit\"\n            src=\"[[entityPicture]]\"\n          ></iron-image>\n        </template>\n      </div>\n    "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





/*
 * @appliesMixin EventsMixin
 */

var HaEntityMarker =
/*#__PURE__*/
function (_EventsMixin) {
  _inherits(HaEntityMarker, _EventsMixin);

  function HaEntityMarker() {
    _classCallCheck(this, HaEntityMarker);

    return _possibleConstructorReturn(this, _getPrototypeOf(HaEntityMarker).apply(this, arguments));
  }

  _createClass(HaEntityMarker, [{
    key: "ready",
    value: function ready() {
      var _this = this;

      _get(_getPrototypeOf(HaEntityMarker.prototype), "ready", this).call(this);

      this.addEventListener("click", function (ev) {
        return _this.badgeTap(ev);
      });
    }
  }, {
    key: "badgeTap",
    value: function badgeTap(ev) {
      ev.stopPropagation();

      if (this.entityId) {
        this.fire("hass-more-info", {
          entityId: this.entityId
        });
      }
    }
  }], [{
    key: "template",
    get: function get() {
      return Object(_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_1__["html"])(_templateObject());
    }
  }, {
    key: "properties",
    get: function get() {
      return {
        hass: {
          type: Object
        },
        entityId: {
          type: String,
          value: ""
        },
        entityName: {
          type: String,
          value: null
        },
        entityPicture: {
          type: String,
          value: null
        }
      };
    }
  }]);

  return HaEntityMarker;
}(Object(_mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__["EventsMixin"])(_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_2__["PolymerElement"]));

customElements.define("ha-entity-marker", HaEntityMarker);

/***/ }),

/***/ "./src/resources/jquery.roundslider.ondemand.ts":
/*!******************************************************!*\
  !*** ./src/resources/jquery.roundslider.ondemand.ts ***!
  \******************************************************/
/*! exports provided: loadRoundslider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadRoundslider", function() { return loadRoundslider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var loaded;
var loadRoundslider = function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(void 0, void 0, void 0, function () {
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
        if (!loaded) {
            loaded = Promise.all(/*! import() | jquery-roundslider */[__webpack_require__.e("vendors~jquery-roundslider"), __webpack_require__.e("jquery-roundslider")]).then(__webpack_require__.bind(null, /*! ./jquery.roundslider */ "./src/resources/jquery.roundslider.js"));
        }
        return [2 /*return*/, loaded];
    });
}); };


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFuZWwtbG92ZWxhY2UuY2h1bmsuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY2FzdC9jb25zdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FzdC9kZXZfY29uc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nhc3QvcmVjZWl2ZXJfbWVzc2FnZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kYXRldGltZS9yZWxhdGl2ZV90aW1lLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZG9tL2xvYWRfcmVzb3VyY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kb20vc2Nyb2xsLXRvLXRhcmdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RvbS9zZXR1cC1sZWFmbGV0LW1hcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2VudGl0eS92YWxpZF9lbnRpdHlfaWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zdHJpbmcvY29tcGFyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9yZW5kZXItc3RhdHVzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9zdWJzY3JpYmUtb25lLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2J1dHRvbnMvaGEtY2FsbC1zZXJ2aWNlLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9oYS1kYXRlLWlucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2hhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LW5leHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvaGEtcmVsYXRpdmUtdGltZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9hbGFybV9jb250cm9sX3BhbmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2FyZWFfcmVnaXN0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEvZGV2aWNlX3JlZ2lzdHJ5LnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2VudGl0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9pbnB1dF9kYXRldGltZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9pbnB1dF90ZXh0LnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2xpZ2h0LnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2xvdmVsYWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9kYXRhL3Nob3BwaW5nLWxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEvd3MtdGVtcGxhdGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWFsYXJtLXBhbmVsLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktY29uZGl0aW9uYWwtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1lbnRpdGllcy1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWVudGl0eS1idXR0b24tY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1lbnRpdHktZmlsdGVyLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktZXJyb3ItY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1nYXVnZS1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWdsYW5jZS1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWhpc3RvcnktZ3JhcGgtY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1ob3Jpem9udGFsLXN0YWNrLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktaWZyYW1lLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktbGVnYWN5LXdyYXBwZXItY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1saWdodC1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLW1hcC1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLW1hcmtkb3duLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktbWVkaWEtY29udHJvbC1jYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXBpY3R1cmUtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1waWN0dXJlLWVsZW1lbnRzLWNhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktcGljdHVyZS1lbnRpdHktY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1waWN0dXJlLWdsYW5jZS1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXBsYW50LXN0YXR1cy1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXNlbnNvci1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXNob3BwaW5nLWxpc3QtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1zdGFjay1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXRoZXJtb3N0YXQtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS12ZXJ0aWNhbC1zdGFjay1jYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXdlYXRoZXItZm9yZWNhc3QtY2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL3BpY3R1cmUtZWxlbWVudHMvY3JlYXRlLXN0eWxlZC1odWktZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9jYWxsLXNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vY29tcHV0ZS1jYXJkLXNpemUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vY29tcHV0ZS10b29sdGlwLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2NyZWF0ZS1jYXJkLWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vY3JlYXRlLWh1aS1lbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2NyZWF0ZS1yb3ctZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9kaXJlY3RpdmVzL2xvbmctcHJlc3MtZGlyZWN0aXZlLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2VudGl0eS90b2dnbGUtZW50aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2VudGl0eS90dXJuLW9uLW9mZi1lbnRpdGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9lbnRpdHkvdHVybi1vbi1vZmYtZW50aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2V2YWx1YXRlLWZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9nZW5lcmF0ZS1sb3ZlbGFjZS1jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vaGFuZGxlLWNsaWNrLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2hhcy1jaGFuZ2VkLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL2xvYWQtcmVzb3VyY2VzLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tbW9uL3ZhbGlkYXRlLWNvbmRpdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWVudGl0aWVzLXRvZ2dsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWltYWdlLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY29tcG9uZW50cy9odWktdGltZXN0YW1wLWRpc3BsYXkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21wb25lbnRzL2h1aS11bmF2YWlsYWJsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLXdhcm5pbmctZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLXdhcm5pbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lZGl0b3IvY2FyZC1lZGl0b3Ivc2hvdy1lZGl0LWNhcmQtZGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL2NvbmZpZy11dGlsLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL2xvdmVsYWNlLWVkaXRvci9zaG93LWVkaXQtbG92ZWxhY2UtZGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL3Nob3ctc2F2ZS1jb25maWctZGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWRpdG9yL3ZpZXctZWRpdG9yL3Nob3ctZWRpdC12aWV3LWRpYWxvZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VsZW1lbnRzL2h1aS1jb25kaXRpb25hbC1lbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWxlbWVudHMvaHVpLWljb24tZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VsZW1lbnRzL2h1aS1pbWFnZS1lbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZWxlbWVudHMvaHVpLXNlcnZpY2UtYnV0dG9uLWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbGVtZW50cy9odWktc3RhdGUtYmFkZ2UtZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VsZW1lbnRzL2h1aS1zdGF0ZS1pY29uLWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbGVtZW50cy9odWktc3RhdGUtbGFiZWwtZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1jbGltYXRlLWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktY292ZXItZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1ncm91cC1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLWlucHV0LWRhdGV0aW1lLWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktaW5wdXQtbnVtYmVyLWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktaW5wdXQtc2VsZWN0LWVudGl0eS1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9lbnRpdHktcm93cy9odWktaW5wdXQtdGV4dC1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLWxvY2stZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1tZWRpYS1wbGF5ZXItZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS1zY2VuZS1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXNjcmlwdC1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXNlbnNvci1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXRleHQtZW50aXR5LXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2VudGl0eS1yb3dzL2h1aS10aW1lci1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvZW50aXR5LXJvd3MvaHVpLXRvZ2dsZS1lbnRpdHktcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvaGEtcGFuZWwtbG92ZWxhY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9odWktcm9vdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3NwZWNpYWwtcm93cy9odWktY2FsbC1zZXJ2aWNlLXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3NwZWNpYWwtcm93cy9odWktY2FzdC1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9zcGVjaWFsLXJvd3MvaHVpLWRpdmlkZXItcm93LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbG92ZWxhY2Uvc3BlY2lhbC1yb3dzL2h1aS1zZWN0aW9uLXJvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3NwZWNpYWwtcm93cy9odWktd2VibGluay1yb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS92aWV3cy9odWktcGFuZWwtdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFuZWxzL2xvdmVsYWNlL3ZpZXdzL2h1aS12aWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9wYW5lbHMvbWFwL2hhLWVudGl0eS1tYXJrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlcy9qcXVlcnkucm91bmRzbGlkZXIub25kZW1hbmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ0FTVF9ERVZfQVBQX0lEIH0gZnJvbSBcIi4vZGV2X2NvbnN0XCI7XG5cbi8vIEd1YXJkIGRldiBtb2RlIHdpdGggYF9fZGV2X19gIHNvIGl0IGNhbiBvbmx5IGV2ZXIgYmUgZW5hYmxlZCBpbiBkZXYgbW9kZS5cbmV4cG9ydCBjb25zdCBDQVNUX0RFViA9IF9fREVWX18gJiYgdHJ1ZTtcblxuZXhwb3J0IGNvbnN0IENBU1RfQVBQX0lEID0gQ0FTVF9ERVYgPyBDQVNUX0RFVl9BUFBfSUQgOiBcIkIxMkNFM0NBXCI7XG5leHBvcnQgY29uc3QgQ0FTVF9OUyA9IFwidXJuOngtY2FzdDpjb20ubmFidWNhc2EuaGFzdFwiO1xuIiwiLy8gUmVwbGFjZSB0aGlzIHdpdGggeW91ciBvd24gdW5wdWJsaXNoZWQgY2FzdCBhcHAgdGhhdCBwb2ludHMgYXQgeW91ciBsb2NhbCBkZXZcbmV4cG9ydCBjb25zdCBDQVNUX0RFVl9BUFBfSUQgPSBcIjVGRTQ0MzY3XCI7XG5cbi8vIENocm9tZWNhc3QgU0RLIHdpbGwgb25seSBsb2FkIG9uIGxvY2FsaG9zdCBhbmQgSFRUUFNcbi8vIFNvIGR1cmluZyBsb2NhbCBkZXZlbG9wbWVudCB3ZSBoYXZlIHRvIHNlbmQgb3VyIGRldiBJUCBhZGRyZXNzLFxuLy8gYnV0IHRoZW4gcnVuIHRoZSBVSSBvbiBsb2NhbGhvc3QuXG5leHBvcnQgY29uc3QgQ0FTVF9ERVZfSEFTU19VUkwgPSBcImh0dHA6Ly8xOTIuMTY4LjEuMjM0OjgxMjNcIjtcbiIsIi8vIE5lc3NhZ2VzIHRvIGJlIHByb2Nlc3NlZCBpbnNpZGUgdGhlIENhc3QgUmVjZWl2ZXIgYXBwXG5cbmltcG9ydCB7IEF1dGggfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBDYXN0TWFuYWdlciB9IGZyb20gXCIuL2Nhc3RfbWFuYWdlclwiO1xuXG5pbXBvcnQgeyBCYXNlQ2FzdE1lc3NhZ2UgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgQ0FTVF9ERVYgfSBmcm9tIFwiLi9jb25zdFwiO1xuaW1wb3J0IHsgQ0FTVF9ERVZfSEFTU19VUkwgfSBmcm9tIFwiLi9kZXZfY29uc3RcIjtcblxuZXhwb3J0IGludGVyZmFjZSBHZXRTdGF0dXNNZXNzYWdlIGV4dGVuZHMgQmFzZUNhc3RNZXNzYWdlIHtcbiAgdHlwZTogXCJnZXRfc3RhdHVzXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdE1lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2FzdE1lc3NhZ2Uge1xuICB0eXBlOiBcImNvbm5lY3RcIjtcbiAgcmVmcmVzaFRva2VuOiBzdHJpbmc7XG4gIGNsaWVudElkOiBzdHJpbmcgfCBudWxsO1xuICBoYXNzVXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hvd0xvdmVsYWNlVmlld01lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2FzdE1lc3NhZ2Uge1xuICB0eXBlOiBcInNob3dfbG92ZWxhY2Vfdmlld1wiO1xuICB2aWV3UGF0aDogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaG93RGVtb01lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2FzdE1lc3NhZ2Uge1xuICB0eXBlOiBcInNob3dfZGVtb1wiO1xufVxuXG5leHBvcnQgdHlwZSBIYXNzTWVzc2FnZSA9XG4gIHwgU2hvd0RlbW9NZXNzYWdlXG4gIHwgR2V0U3RhdHVzTWVzc2FnZVxuICB8IENvbm5lY3RNZXNzYWdlXG4gIHwgU2hvd0xvdmVsYWNlVmlld01lc3NhZ2U7XG5cbmV4cG9ydCBjb25zdCBjYXN0U2VuZEF1dGggPSAoY2FzdDogQ2FzdE1hbmFnZXIsIGF1dGg6IEF1dGgpID0+XG4gIGNhc3Quc2VuZE1lc3NhZ2Uoe1xuICAgIHR5cGU6IFwiY29ubmVjdFwiLFxuICAgIHJlZnJlc2hUb2tlbjogYXV0aC5kYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgY2xpZW50SWQ6IGF1dGguZGF0YS5jbGllbnRJZCxcbiAgICBoYXNzVXJsOiBDQVNUX0RFViA/IENBU1RfREVWX0hBU1NfVVJMIDogYXV0aC5kYXRhLmhhc3NVcmwsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY2FzdFNlbmRTaG93TG92ZWxhY2VWaWV3ID0gKFxuICBjYXN0OiBDYXN0TWFuYWdlcixcbiAgdmlld1BhdGg6IFNob3dMb3ZlbGFjZVZpZXdNZXNzYWdlW1widmlld1BhdGhcIl1cbikgPT5cbiAgY2FzdC5zZW5kTWVzc2FnZSh7XG4gICAgdHlwZTogXCJzaG93X2xvdmVsYWNlX3ZpZXdcIixcbiAgICB2aWV3UGF0aCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBjYXN0U2VuZFNob3dEZW1vID0gKGNhc3Q6IENhc3RNYW5hZ2VyKSA9PlxuICBjYXN0LnNlbmRNZXNzYWdlKHtcbiAgICB0eXBlOiBcInNob3dfZGVtb1wiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGVuc3VyZUNvbm5lY3RlZENhc3RTZXNzaW9uID0gKGNhc3Q6IENhc3RNYW5hZ2VyLCBhdXRoOiBBdXRoKSA9PiB7XG4gIGlmIChjYXN0LmNhc3RDb25uZWN0ZWRUb091ckhhc3MpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCB1bnN1YiA9IGNhc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb24tY2hhbmdlZFwiLCAoKSA9PiB7XG4gICAgICBpZiAoY2FzdC5jYXN0Q29ubmVjdGVkVG9PdXJIYXNzKSB7XG4gICAgICAgIHVuc3ViKCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNhc3RTZW5kQXV0aChjYXN0LCBhdXRoKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgTG9jYWxpemVGdW5jIH0gZnJvbSBcIi4uL3RyYW5zbGF0aW9ucy9sb2NhbGl6ZVwiO1xuXG4vKipcbiAqIENhbGN1bGF0ZSBhIHN0cmluZyByZXByZXNlbnRpbmcgYSBkYXRlIG9iamVjdCBhcyByZWxhdGl2ZSB0aW1lIGZyb20gbm93LlxuICpcbiAqIEV4YW1wbGUgb3V0cHV0OiA1IG1pbnV0ZXMgYWdvLCBpbiAzIGRheXMuXG4gKi9cbmNvbnN0IHRlc3RzID0gWzYwLCA2MCwgMjQsIDddO1xuY29uc3QgbGFuZ0tleSA9IFtcInNlY29uZFwiLCBcIm1pbnV0ZVwiLCBcImhvdXJcIiwgXCJkYXlcIl07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbGF0aXZlVGltZShcbiAgZGF0ZU9iajogRGF0ZSxcbiAgbG9jYWxpemU6IExvY2FsaXplRnVuYyxcbiAgb3B0aW9uczoge1xuICAgIGNvbXBhcmVUaW1lPzogRGF0ZTtcbiAgICBpbmNsdWRlVGVuc2U/OiBib29sZWFuO1xuICB9ID0ge31cbik6IHN0cmluZyB7XG4gIGNvbnN0IGNvbXBhcmVUaW1lID0gb3B0aW9ucy5jb21wYXJlVGltZSB8fCBuZXcgRGF0ZSgpO1xuICBsZXQgZGVsdGEgPSAoY29tcGFyZVRpbWUuZ2V0VGltZSgpIC0gZGF0ZU9iai5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgY29uc3QgdGVuc2UgPSBkZWx0YSA+PSAwID8gXCJwYXN0XCIgOiBcImZ1dHVyZVwiO1xuICBkZWx0YSA9IE1hdGguYWJzKGRlbHRhKTtcblxuICBsZXQgdGltZURlc2M7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXN0cy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChkZWx0YSA8IHRlc3RzW2ldKSB7XG4gICAgICBkZWx0YSA9IE1hdGguZmxvb3IoZGVsdGEpO1xuICAgICAgdGltZURlc2MgPSBsb2NhbGl6ZShcbiAgICAgICAgYHVpLmNvbXBvbmVudHMucmVsYXRpdmVfdGltZS5kdXJhdGlvbi4ke2xhbmdLZXlbaV19YCxcbiAgICAgICAgXCJjb3VudFwiLFxuICAgICAgICBkZWx0YVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGRlbHRhIC89IHRlc3RzW2ldO1xuICB9XG5cbiAgaWYgKHRpbWVEZXNjID09PSB1bmRlZmluZWQpIHtcbiAgICBkZWx0YSA9IE1hdGguZmxvb3IoZGVsdGEpO1xuICAgIHRpbWVEZXNjID0gbG9jYWxpemUoXG4gICAgICBcInVpLmNvbXBvbmVudHMucmVsYXRpdmVfdGltZS5kdXJhdGlvbi53ZWVrXCIsXG4gICAgICBcImNvdW50XCIsXG4gICAgICBkZWx0YVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gb3B0aW9ucy5pbmNsdWRlVGVuc2UgPT09IGZhbHNlXG4gICAgPyB0aW1lRGVzY1xuICAgIDogbG9jYWxpemUoYHVpLmNvbXBvbmVudHMucmVsYXRpdmVfdGltZS4ke3RlbnNlfWAsIFwidGltZVwiLCB0aW1lRGVzYyk7XG59XG4iLCIvLyBMb2FkIGEgcmVzb3VyY2UgYW5kIGdldCBhIHByb21pc2Ugd2hlbiBsb2FkaW5nIGRvbmUuXG4vLyBGcm9tOiBodHRwczovL2Rhdmlkd2Fsc2gubmFtZS9qYXZhc2NyaXB0LWxvYWRlclxuXG5jb25zdCBfbG9hZCA9IChcbiAgdGFnOiBcImxpbmtcIiB8IFwic2NyaXB0XCIgfCBcImltZ1wiLFxuICB1cmw6IHN0cmluZyxcbiAgdHlwZT86IFwibW9kdWxlXCJcbikgPT4ge1xuICAvLyBUaGlzIHByb21pc2Ugd2lsbCBiZSB1c2VkIGJ5IFByb21pc2UuYWxsIHRvIGRldGVybWluZSBzdWNjZXNzIG9yIGZhaWx1cmVcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGxldCBhdHRyID0gXCJzcmNcIjtcbiAgICBsZXQgcGFyZW50ID0gXCJib2R5XCI7XG5cbiAgICAvLyBJbXBvcnRhbnQgc3VjY2VzcyBhbmQgZXJyb3IgZm9yIHRoZSBwcm9taXNlXG4gICAgZWxlbWVudC5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHVybCk7XG4gICAgZWxlbWVudC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHVybCk7XG5cbiAgICAvLyBOZWVkIHRvIHNldCBkaWZmZXJlbnQgYXR0cmlidXRlcyBkZXBlbmRpbmcgb24gdGFnIHR5cGVcbiAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgY2FzZSBcInNjcmlwdFwiOlxuICAgICAgICAoZWxlbWVudCBhcyBIVE1MU2NyaXB0RWxlbWVudCkuYXN5bmMgPSB0cnVlO1xuICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgIChlbGVtZW50IGFzIEhUTUxTY3JpcHRFbGVtZW50KS50eXBlID0gdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJsaW5rXCI6XG4gICAgICAgIChlbGVtZW50IGFzIEhUTUxMaW5rRWxlbWVudCkudHlwZSA9IFwidGV4dC9jc3NcIjtcbiAgICAgICAgKGVsZW1lbnQgYXMgSFRNTExpbmtFbGVtZW50KS5yZWwgPSBcInN0eWxlc2hlZXRcIjtcbiAgICAgICAgYXR0ciA9IFwiaHJlZlwiO1xuICAgICAgICBwYXJlbnQgPSBcImhlYWRcIjtcbiAgICB9XG5cbiAgICAvLyBJbmplY3QgaW50byBkb2N1bWVudCB0byBraWNrIG9mZiBsb2FkaW5nXG4gICAgZWxlbWVudFthdHRyXSA9IHVybDtcbiAgICBkb2N1bWVudFtwYXJlbnRdLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2FkQ1NTID0gKHVybDogc3RyaW5nKSA9PiBfbG9hZChcImxpbmtcIiwgdXJsKTtcbmV4cG9ydCBjb25zdCBsb2FkSlMgPSAodXJsOiBzdHJpbmcpID0+IF9sb2FkKFwic2NyaXB0XCIsIHVybCk7XG5leHBvcnQgY29uc3QgbG9hZEltZyA9ICh1cmw6IHN0cmluZykgPT4gX2xvYWQoXCJpbWdcIiwgdXJsKTtcbmV4cG9ydCBjb25zdCBsb2FkTW9kdWxlID0gKHVybDogc3RyaW5nKSA9PiBfbG9hZChcInNjcmlwdFwiLCB1cmwsIFwibW9kdWxlXCIpO1xuIiwiLyoqXG4gKiBTY3JvbGwgdG8gYSBzcGVjaWZpYyB5IGNvb3JkaW5hdGUuXG4gKlxuICogQ29waWVkIGZyb20gcGFwZXItc2Nyb2xsLWhlYWRlci1wYW5lbC5cbiAqXG4gKiBAbWV0aG9kIHNjcm9sbFxuICogQHBhcmFtIHtudW1iZXJ9IHRvcCBUaGUgY29vcmRpbmF0ZSB0byBzY3JvbGwgdG8sIGFsb25nIHRoZSB5LWF4aXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNtb290aCB0cnVlIGlmIHRoZSBzY3JvbGwgcG9zaXRpb24gc2hvdWxkIGJlIHNtb290aGx5IGFkanVzdGVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzY3JvbGxUb1RhcmdldChlbGVtZW50LCB0YXJnZXQpIHtcbiAgLy8gdGhlIHNjcm9sbCBldmVudCB3aWxsIHRyaWdnZXIgX3VwZGF0ZVNjcm9sbFN0YXRlIGRpcmVjdGx5LFxuICAvLyBIb3dldmVyLCBfdXBkYXRlU2Nyb2xsU3RhdGUgcmVsaWVzIG9uIHRoZSBwcmV2aW91cyBgc2Nyb2xsVG9wYCB0byB1cGRhdGUgdGhlIHN0YXRlcy5cbiAgLy8gQ2FsbGluZyBfdXBkYXRlU2Nyb2xsU3RhdGUgd2lsbCBlbnN1cmUgdGhhdCB0aGUgc3RhdGVzIGFyZSBzeW5jZWQgY29ycmVjdGx5LlxuICBjb25zdCB0b3AgPSAwO1xuICBjb25zdCBzY3JvbGxlciA9IHRhcmdldDtcbiAgY29uc3QgZWFzaW5nRm4gPSBmdW5jdGlvbiBlYXNlT3V0UXVhZCh0LCBiLCBjLCBkKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24sIHNwYWNlLWluZml4LW9wcywgbm8tbWl4ZWQtb3BlcmF0b3JzICovXG4gICAgdCAvPSBkO1xuICAgIHJldHVybiAtYyAqIHQgKiAodCAtIDIpICsgYjtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXBhcmFtLXJlYXNzaWduLCBzcGFjZS1pbmZpeC1vcHMsIG5vLW1peGVkLW9wZXJhdG9ycyAqL1xuICB9O1xuICBjb25zdCBhbmltYXRpb25JZCA9IE1hdGgucmFuZG9tKCk7XG4gIGNvbnN0IGR1cmF0aW9uID0gMjAwO1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICBjb25zdCBjdXJyZW50U2Nyb2xsVG9wID0gc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICBjb25zdCBkZWx0YVNjcm9sbFRvcCA9IHRvcCAtIGN1cnJlbnRTY3JvbGxUb3A7XG4gIGVsZW1lbnQuX2N1cnJlbnRBbmltYXRpb25JZCA9IGFuaW1hdGlvbklkO1xuICAoZnVuY3Rpb24gdXBkYXRlRnJhbWUoKSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlbGFwc2VkVGltZSA9IG5vdyAtIHN0YXJ0VGltZTtcbiAgICBpZiAoZWxhcHNlZFRpbWUgPiBkdXJhdGlvbikge1xuICAgICAgc2Nyb2xsZXIuc2Nyb2xsVG9wID0gdG9wO1xuICAgIH0gZWxzZSBpZiAoZWxlbWVudC5fY3VycmVudEFuaW1hdGlvbklkID09PSBhbmltYXRpb25JZCkge1xuICAgICAgc2Nyb2xsZXIuc2Nyb2xsVG9wID0gZWFzaW5nRm4oXG4gICAgICAgIGVsYXBzZWRUaW1lLFxuICAgICAgICBjdXJyZW50U2Nyb2xsVG9wLFxuICAgICAgICBkZWx0YVNjcm9sbFRvcCxcbiAgICAgICAgZHVyYXRpb25cbiAgICAgICk7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlRnJhbWUuYmluZChlbGVtZW50KSk7XG4gICAgfVxuICB9LmNhbGwoZWxlbWVudCkpO1xufVxuIiwiaW1wb3J0IHsgTWFwIH0gZnJvbSBcImxlYWZsZXRcIjtcblxuLy8gU2V0cyB1cCBhIExlYWZsZXQgbWFwIG9uIHRoZSBwcm92aWRlZCBET00gZWxlbWVudFxuZXhwb3J0IHR5cGUgTGVhZmxldE1vZHVsZVR5cGUgPSB0eXBlb2YgaW1wb3J0KFwibGVhZmxldFwiKTtcblxuZXhwb3J0IGNvbnN0IHNldHVwTGVhZmxldE1hcCA9IGFzeW5jIChcbiAgbWFwRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIGRhcmtNb2RlID0gZmFsc2Vcbik6IFByb21pc2U8W01hcCwgTGVhZmxldE1vZHVsZVR5cGVdPiA9PiB7XG4gIGlmICghbWFwRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNldHVwIExlYWZsZXQgbWFwIG9uIGRpc2Nvbm5lY3RlZCBlbGVtZW50XCIpO1xuICB9XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICBjb25zdCBMZWFmbGV0ID0gKGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImxlYWZsZXRcIiAqLyBcImxlYWZsZXRcIikpIGFzIExlYWZsZXRNb2R1bGVUeXBlO1xuICBMZWFmbGV0Lkljb24uRGVmYXVsdC5pbWFnZVBhdGggPSBcIi9zdGF0aWMvaW1hZ2VzL2xlYWZsZXQvaW1hZ2VzL1wiO1xuXG4gIGNvbnN0IG1hcCA9IExlYWZsZXQubWFwKG1hcEVsZW1lbnQpO1xuICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICBzdHlsZS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiL3N0YXRpYy9pbWFnZXMvbGVhZmxldC9sZWFmbGV0LmNzc1wiKTtcbiAgc3R5bGUuc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgbWFwRWxlbWVudC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgbWFwLnNldFZpZXcoWzUyLjM3MzEzMzksIDQuODkwMzE0N10sIDEzKTtcbiAgY3JlYXRlVGlsZUxheWVyKExlYWZsZXQsIGRhcmtNb2RlKS5hZGRUbyhtYXApO1xuXG4gIHJldHVybiBbbWFwLCBMZWFmbGV0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVUaWxlTGF5ZXIgPSAoXG4gIGxlYWZsZXQ6IExlYWZsZXRNb2R1bGVUeXBlLFxuICBkYXJrTW9kZTogYm9vbGVhblxuKSA9PiB7XG4gIHJldHVybiBsZWFmbGV0LnRpbGVMYXllcihcbiAgICBgaHR0cHM6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tLyR7XG4gICAgICBkYXJrTW9kZSA/IFwiZGFya19hbGxcIiA6IFwibGlnaHRfYWxsXCJcbiAgICB9L3t6fS97eH0ve3l9JHtsZWFmbGV0LkJyb3dzZXIucmV0aW5hID8gXCJAMngucG5nXCIgOiBcIi5wbmdcIn1gLFxuICAgIHtcbiAgICAgIGF0dHJpYnV0aW9uOlxuICAgICAgICAnJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiwgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbnNcIj5DQVJUTzwvYT4nLFxuICAgICAgc3ViZG9tYWluczogXCJhYmNkXCIsXG4gICAgICBtaW5ab29tOiAwLFxuICAgICAgbWF4Wm9vbTogMjAsXG4gICAgfVxuICApO1xufTtcbiIsImNvbnN0IHZhbGlkRW50aXR5SWQgPSAvXihcXHcrKVxcLihcXHcrKSQvO1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZEVudGl0eUlkID0gKGVudGl0eUlkOiBzdHJpbmcpID0+XG4gIHZhbGlkRW50aXR5SWQudGVzdChlbnRpdHlJZCk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVWYWxpZEVudGl0eUlkID0gKGlucHV0OiBzdHJpbmcpID0+XG4gIGlucHV0XG4gICAgLnRvTG93ZXJDYXNlKClcbiAgICAucmVwbGFjZSgvXFxzfFxcJy9nLCBcIl9cIikgLy8gcmVwbGFjZSBzcGFjZXMgYW5kIHF1b3RlcyB3aXRoIHVuZGVyc2NvcmVcbiAgICAucmVwbGFjZSgvXFxXL2csIFwiXCIpIC8vIHJlbW92ZSBub3QgYWxsb3dlZCBjaGFyc1xuICAgIC5yZXBsYWNlKC9fezIsfS9nLCBcIl9cIikgLy8gcmVwbGFjZSBtdWx0aXBsZSB1bmRlcnNjb3JlcyB3aXRoIDFcbiAgICAucmVwbGFjZSgvXyQvLCBcIlwiKTsgLy8gcmVtb3ZlIHVuZGVyc2NvcmVzIGF0IHRoZSBlbmRcbiIsImV4cG9ydCBjb25zdCBjb21wYXJlID0gKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiB7XG4gIGlmIChhIDwgYikge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBpZiAoYSA+IGIpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIHJldHVybiAwO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhc2VJbnNlbnNpdGl2ZUNvbXBhcmUgPSAoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+XG4gIGNvbXBhcmUoYS50b0xvd2VyQ2FzZSgpLCBiLnRvTG93ZXJDYXNlKCkpO1xuIiwiLy8gSGFuZGxlIDE2eDksIDE2OjksIDEuNzh4MSwgMS43ODoxLCAxLjc4XG4vLyBJZ25vcmUgZXZlcnl0aGluZyBlbHNlXG5jb25zdCBwYXJzZU9yVGhyb3cgPSAobnVtKSA9PiB7XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlRmxvYXQobnVtKTtcbiAgaWYgKGlzTmFOKHBhcnNlZCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bnVtfSBpcyBub3QgYSBudW1iZXJgKTtcbiAgfVxuICByZXR1cm4gcGFyc2VkO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VBc3BlY3RSYXRpbyhpbnB1dDogc3RyaW5nKSB7XG4gIGlmICghaW5wdXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB0cnkge1xuICAgIGlmIChpbnB1dC5lbmRzV2l0aChcIiVcIikpIHtcbiAgICAgIHJldHVybiB7IHc6IDEwMCwgaDogcGFyc2VPclRocm93KGlucHV0LnN1YnN0cigwLCBpbnB1dC5sZW5ndGggLSAxKSkgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhcnIgPSBpbnB1dC5yZXBsYWNlKFwiOlwiLCBcInhcIikuc3BsaXQoXCJ4XCIpO1xuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyLmxlbmd0aCA9PT0gMVxuICAgICAgPyB7IHc6IHBhcnNlT3JUaHJvdyhhcnJbMF0pLCBoOiAxIH1cbiAgICAgIDogeyB3OiBwYXJzZU9yVGhyb3coYXJyWzBdKSwgaDogcGFyc2VPclRocm93KGFyclsxXSkgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gSWdub3JlIHRoZSBlcnJvclxuICB9XG4gIHJldHVybiBudWxsO1xufVxuIiwiZXhwb3J0IGNvbnN0IGFmdGVyTmV4dFJlbmRlciA9IChjYjogKCkgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gc2V0VGltZW91dChjYiwgMCkpO1xufTtcblxuZXhwb3J0IGNvbnN0IG5leHRSZW5kZXIgPSAoKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGFmdGVyTmV4dFJlbmRlcihyZXNvbHZlKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgVW5zdWJzY3JpYmVGdW5jLCBDb25uZWN0aW9uIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlT25lID0gYXN5bmMgPFQ+KFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBzdWJzY3JpYmU6IChjb25uOiBDb25uZWN0aW9uLCBvbkNoYW5nZTogKGl0ZW1zOiBUKSA9PiB2b2lkKSA9PiBVbnN1YnNjcmliZUZ1bmNcbikgPT5cbiAgbmV3IFByb21pc2U8VD4oKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCB1bnN1YiA9IHN1YnNjcmliZShjb25uLCAoaXRlbXMpID0+IHtcbiAgICAgIHVuc3ViKCk7XG4gICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICB9KTtcbiAgfSk7XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSBcIkBwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnXCI7XG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gXCJAcG9seW1lci9wb2x5bWVyL3BvbHltZXItZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuL2hhLXByb2dyZXNzLWJ1dHRvblwiO1xuaW1wb3J0IHsgRXZlbnRzTWl4aW4gfSBmcm9tIFwiLi4vLi4vbWl4aW5zL2V2ZW50cy1taXhpblwiO1xuXG4vKlxuICogQGFwcGxpZXNNaXhpbiBFdmVudHNNaXhpblxuICovXG5jbGFzcyBIYUNhbGxTZXJ2aWNlQnV0dG9uIGV4dGVuZHMgRXZlbnRzTWl4aW4oUG9seW1lckVsZW1lbnQpIHtcbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1wcm9ncmVzcy1idXR0b25cbiAgICAgICAgaWQ9XCJwcm9ncmVzc1wiXG4gICAgICAgIHByb2dyZXNzPVwiW1twcm9ncmVzc11dXCJcbiAgICAgICAgb24tY2xpY2s9XCJidXR0b25UYXBwZWRcIlxuICAgICAgICA+PHNsb3Q+PC9zbG90XG4gICAgICA+PC9oYS1wcm9ncmVzcy1idXR0b24+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzczoge1xuICAgICAgICB0eXBlOiBPYmplY3QsXG4gICAgICB9LFxuXG4gICAgICBwcm9ncmVzczoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICB9LFxuXG4gICAgICBkb21haW46IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgfSxcblxuICAgICAgc2VydmljZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB9LFxuXG4gICAgICBzZXJ2aWNlRGF0YToge1xuICAgICAgICB0eXBlOiBPYmplY3QsXG4gICAgICAgIHZhbHVlOiB7fSxcbiAgICAgIH0sXG5cbiAgICAgIGNvbmZpcm1hdGlvbjoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBidXR0b25UYXBwZWQoKSB7XG4gICAgaWYgKHRoaXMuY29uZmlybWF0aW9uICYmICF3aW5kb3cuY29uZmlybSh0aGlzLmNvbmZpcm1hdGlvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wcm9ncmVzcyA9IHRydWU7XG4gICAgdmFyIGVsID0gdGhpcztcbiAgICB2YXIgZXZlbnREYXRhID0ge1xuICAgICAgZG9tYWluOiB0aGlzLmRvbWFpbixcbiAgICAgIHNlcnZpY2U6IHRoaXMuc2VydmljZSxcbiAgICAgIHNlcnZpY2VEYXRhOiB0aGlzLnNlcnZpY2VEYXRhLFxuICAgIH07XG5cbiAgICB0aGlzLmhhc3NcbiAgICAgIC5jYWxsU2VydmljZSh0aGlzLmRvbWFpbiwgdGhpcy5zZXJ2aWNlLCB0aGlzLnNlcnZpY2VEYXRhKVxuICAgICAgLnRoZW4oXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsLnByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgZWwuJC5wcm9ncmVzcy5hY3Rpb25TdWNjZXNzKCk7XG4gICAgICAgICAgZXZlbnREYXRhLnN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbC5wcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgIGVsLiQucHJvZ3Jlc3MuYWN0aW9uRXJyb3IoKTtcbiAgICAgICAgICBldmVudERhdGEuc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICApXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgZWwuZmlyZShcImhhc3Mtc2VydmljZS1jYWxsZWRcIiwgZXZlbnREYXRhKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImhhLWNhbGwtc2VydmljZS1idXR0b25cIiwgSGFDYWxsU2VydmljZUJ1dHRvbik7XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBjc3MsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0XCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZHVwbGljYXRlLWltcG9ydHNcbmltcG9ydCB7IFBhcGVySW5wdXRFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0XCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaGEtZGF0ZS1pbnB1dFwiKVxuZXhwb3J0IGNsYXNzIEhhRGF0ZUlucHV0IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB5ZWFyPzogc3RyaW5nO1xuICBAcHJvcGVydHkoKSBwdWJsaWMgbW9udGg/OiBzdHJpbmc7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBkYXk/OiBzdHJpbmc7XG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSkgcHVibGljIGRpc2FibGVkID0gZmFsc2U7XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKSB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1wYXBlci1mb250LWNvbW1vbi1iYXNlXy1fZm9udC1mYW1pbHkpO1xuICAgICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiB2YXIoXG4gICAgICAgICAgLS1wYXBlci1mb250LWNvbW1vbi1iYXNlXy1fLXdlYmtpdC1mb250LXNtb290aGluZ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1pbnB1dCB7XG4gICAgICAgIHdpZHRoOiAzMHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXNoYXJlZC1pbnB1dC1zdHlsZV8tXy13ZWJraXQtYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dF8tXy1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1zaGFyZWQtaW5wdXQtc3R5bGVfLV9hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XG4gICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0LXdlYmtpdC1zcGlubmVyXy1fLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dC13ZWJraXQtc3Bpbm5lcl8tX21hcmdpbjogMDtcbiAgICAgICAgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LXNwaW5uZXJfLV9kaXNwbGF5OiBub25lO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1pbnB1dCN5ZWFyIHtcbiAgICAgICAgd2lkdGg6IDUwcHg7XG4gICAgICB9XG5cbiAgICAgIC5kYXRlLWlucHV0LXdyYXAge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLWlucHV0LXdyYXBcIj5cbiAgICAgICAgPHBhcGVyLWlucHV0XG4gICAgICAgICAgaWQ9XCJ5ZWFyXCJcbiAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAudmFsdWU9JHt0aGlzLnllYXJ9XG4gICAgICAgICAgQGNoYW5nZT0ke3RoaXMuX2Zvcm1hdFllYXJ9XG4gICAgICAgICAgbWF4bGVuZ3RoPVwiNFwiXG4gICAgICAgICAgbWF4PVwiOTk5OVwiXG4gICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgLmRpc2FibGVkPSR7dGhpcy5kaXNhYmxlZH1cbiAgICAgICAgICBuby1sYWJlbC1mbG9hdFxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gc3VmZml4PVwiXCIgc2xvdD1cInN1ZmZpeFwiPi08L3NwYW4+XG4gICAgICAgIDwvcGFwZXItaW5wdXQ+XG4gICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgIGlkPVwibW9udGhcIlxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIC52YWx1ZT0ke3RoaXMubW9udGh9XG4gICAgICAgICAgQGNoYW5nZT0ke3RoaXMuX2Zvcm1hdE1vbnRofVxuICAgICAgICAgIG1heGxlbmd0aD1cIjJcIlxuICAgICAgICAgIG1heD1cIjEyXCJcbiAgICAgICAgICBtaW49XCIxXCJcbiAgICAgICAgICAuZGlzYWJsZWQ9JHt0aGlzLmRpc2FibGVkfVxuICAgICAgICAgIG5vLWxhYmVsLWZsb2F0XG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBzdWZmaXg9XCJcIiBzbG90PVwic3VmZml4XCI+LTwvc3Bhbj5cbiAgICAgICAgPC9wYXBlci1pbnB1dD5cbiAgICAgICAgPHBhcGVyLWlucHV0XG4gICAgICAgICAgaWQ9XCJkYXlcIlxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIC52YWx1ZT0ke3RoaXMuZGF5fVxuICAgICAgICAgIEBjaGFuZ2U9JHt0aGlzLl9mb3JtYXREYXl9XG4gICAgICAgICAgbWF4bGVuZ3RoPVwiMlwiXG4gICAgICAgICAgbWF4PVwiMzFcIlxuICAgICAgICAgIG1pbj1cIjFcIlxuICAgICAgICAgIC5kaXNhYmxlZD0ke3RoaXMuZGlzYWJsZWR9XG4gICAgICAgICAgbm8tbGFiZWwtZmxvYXRcbiAgICAgICAgPlxuICAgICAgICA8L3BhcGVyLWlucHV0PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2Zvcm1hdFllYXIoKSB7XG4gICAgY29uc3QgeWVhckVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFxuICAgICAgXCJ5ZWFyXCJcbiAgICApIGFzIFBhcGVySW5wdXRFbGVtZW50O1xuICAgIHRoaXMueWVhciA9IHllYXJFbGVtZW50LnZhbHVlITtcbiAgfVxuXG4gIHByaXZhdGUgX2Zvcm1hdE1vbnRoKCkge1xuICAgIGNvbnN0IG1vbnRoRWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcIm1vbnRoXCJcbiAgICApIGFzIFBhcGVySW5wdXRFbGVtZW50O1xuICAgIHRoaXMubW9udGggPSAoXCIwXCIgKyBtb250aEVsZW1lbnQudmFsdWUhKS5zbGljZSgtMik7XG4gIH1cblxuICBwcml2YXRlIF9mb3JtYXREYXkoKSB7XG4gICAgY29uc3QgZGF5RWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcImRheVwiXG4gICAgKSBhcyBQYXBlcklucHV0RWxlbWVudDtcbiAgICB0aGlzLmRheSA9IChcIjBcIiArIGRheUVsZW1lbnQudmFsdWUhKS5zbGljZSgtMik7XG4gIH1cblxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMueWVhcn0tJHt0aGlzLm1vbnRofS0ke3RoaXMuZGF5fWA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImhhLWRhdGUtaW5wdXRcIjogSGFEYXRlSW5wdXQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbnN0cnVjdG9yIH0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1pY29uLWJ1dHRvbi9wYXBlci1pY29uLWJ1dHRvblwiO1xuLy8gTm90IGR1cGxpY2F0ZSwgdGhpcyBpcyBmb3IgdHlwaW5nLlxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG5pbXBvcnQgeyBQYXBlckljb25CdXR0b25FbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BhcGVyLWljb24tYnV0dG9uL3BhcGVyLWljb24tYnV0dG9uXCI7XG5cbmNvbnN0IHBhcGVySWNvbkJ1dHRvbkNsYXNzID0gY3VzdG9tRWxlbWVudHMuZ2V0KFxuICBcInBhcGVyLWljb24tYnV0dG9uXCJcbikgYXMgQ29uc3RydWN0b3I8UGFwZXJJY29uQnV0dG9uRWxlbWVudD47XG5cbmV4cG9ydCBjbGFzcyBIYVBhcGVySWNvbkJ1dHRvbkFycm93TmV4dCBleHRlbmRzIHBhcGVySWNvbkJ1dHRvbkNsYXNzIHtcbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG5cbiAgICAvLyB3YWl0IHRvIGNoZWNrIGZvciBkaXJlY3Rpb24gc2luY2Ugb3RoZXJ3aXNlIGRpcmVjdGlvbiBpcyB3cm9uZyBldmVuIHRob3VnaCB0b3AgbGV2ZWwgaXMgUlRMXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmljb24gPVxuICAgICAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKS5kaXJlY3Rpb24gPT09IFwibHRyXCJcbiAgICAgICAgICA/IFwiaGFzczphcnJvdy1yaWdodFwiXG4gICAgICAgICAgOiBcImhhc3M6YXJyb3ctbGVmdFwiO1xuICAgIH0sIDEwMCk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImhhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LW5leHRcIjogSGFQYXBlckljb25CdXR0b25BcnJvd05leHQ7XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFxuICBcImhhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LW5leHRcIixcbiAgSGFQYXBlckljb25CdXR0b25BcnJvd05leHRcbik7XG4iLCJpbXBvcnQgeyBkb20gfSBmcm9tIFwiQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3BvbHltZXIuZG9tXCI7XG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gXCJAcG9seW1lci9wb2x5bWVyL3BvbHltZXItZWxlbWVudFwiO1xuXG5pbXBvcnQgcmVsYXRpdmVUaW1lIGZyb20gXCIuLi9jb21tb24vZGF0ZXRpbWUvcmVsYXRpdmVfdGltZVwiO1xuXG5pbXBvcnQgTG9jYWxpemVNaXhpbiBmcm9tIFwiLi4vbWl4aW5zL2xvY2FsaXplLW1peGluXCI7XG5cbi8qXG4gKiBAYXBwbGllc01peGluIExvY2FsaXplTWl4aW5cbiAqL1xuY2xhc3MgSGFSZWxhdGl2ZVRpbWUgZXh0ZW5kcyBMb2NhbGl6ZU1peGluKFBvbHltZXJFbGVtZW50KSB7XG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzczogT2JqZWN0LFxuICAgICAgZGF0ZXRpbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBvYnNlcnZlcjogXCJkYXRldGltZUNoYW5nZWRcIixcbiAgICAgIH0sXG5cbiAgICAgIGRhdGV0aW1lT2JqOiB7XG4gICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgICAgb2JzZXJ2ZXI6IFwiZGF0ZXRpbWVPYmpDaGFuZ2VkXCIsXG4gICAgICB9LFxuXG4gICAgICBwYXJzZWREYXRlVGltZTogT2JqZWN0LFxuICAgIH07XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudXBkYXRlUmVsYXRpdmUgPSB0aGlzLnVwZGF0ZVJlbGF0aXZlLmJpbmQodGhpcyk7XG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIC8vIHVwZGF0ZSBldmVyeSA2MCBzZWNvbmRzXG4gICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMudXBkYXRlUmVsYXRpdmUsIDYwMDAwKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnVwZGF0ZUludGVydmFsKTtcbiAgfVxuXG4gIGRhdGV0aW1lQ2hhbmdlZChuZXdWYWwpIHtcbiAgICB0aGlzLnBhcnNlZERhdGVUaW1lID0gbmV3VmFsID8gbmV3IERhdGUobmV3VmFsKSA6IG51bGw7XG5cbiAgICB0aGlzLnVwZGF0ZVJlbGF0aXZlKCk7XG4gIH1cblxuICBkYXRldGltZU9iakNoYW5nZWQobmV3VmFsKSB7XG4gICAgdGhpcy5wYXJzZWREYXRlVGltZSA9IG5ld1ZhbDtcblxuICAgIHRoaXMudXBkYXRlUmVsYXRpdmUoKTtcbiAgfVxuXG4gIHVwZGF0ZVJlbGF0aXZlKCkge1xuICAgIGNvbnN0IHJvb3QgPSBkb20odGhpcyk7XG4gICAgaWYgKCF0aGlzLnBhcnNlZERhdGVUaW1lKSB7XG4gICAgICByb290LmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLnJlbGF0aXZlX3RpbWUubmV2ZXJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJvb3QuaW5uZXJIVE1MID0gcmVsYXRpdmVUaW1lKHRoaXMucGFyc2VkRGF0ZVRpbWUsIHRoaXMubG9jYWxpemUpO1xuICAgIH1cbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJoYS1yZWxhdGl2ZS10aW1lXCIsIEhhUmVsYXRpdmVUaW1lKTtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IEZPUk1BVF9URVhUID0gXCJ0ZXh0XCI7XG5leHBvcnQgY29uc3QgRk9STUFUX05VTUJFUiA9IFwibnVtYmVyXCI7XG5cbmV4cG9ydCBjb25zdCBjYWxsQWxhcm1BY3Rpb24gPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eTogc3RyaW5nLFxuICBhY3Rpb246XG4gICAgfCBcImFybV9hd2F5XCJcbiAgICB8IFwiYXJtX2hvbWVcIlxuICAgIHwgXCJhcm1fbmlnaHRcIlxuICAgIHwgXCJhcm1fY3VzdG9tX2J5cGFzc1wiXG4gICAgfCBcImRpc2FybVwiLFxuICBjb2RlOiBzdHJpbmdcbikgPT4ge1xuICBoYXNzIS5jYWxsU2VydmljZShcImFsYXJtX2NvbnRyb2xfcGFuZWxcIiwgXCJhbGFybV9cIiArIGFjdGlvbiwge1xuICAgIGVudGl0eV9pZDogZW50aXR5LFxuICAgIGNvZGUsXG4gIH0pO1xufTtcbiIsImltcG9ydCB7IGNyZWF0ZUNvbGxlY3Rpb24sIENvbm5lY3Rpb24gfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSBcIi4uL2NvbW1vbi9zdHJpbmcvY29tcGFyZVwiO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWwvZGVib3VuY2VcIjtcblxuZXhwb3J0IGludGVyZmFjZSBBcmVhUmVnaXN0cnlFbnRyeSB7XG4gIGFyZWFfaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFyZWFSZWdpc3RyeUVudHJ5TXV0YWJsZVBhcmFtcyB7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUFyZWFSZWdpc3RyeUVudHJ5ID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB2YWx1ZXM6IEFyZWFSZWdpc3RyeUVudHJ5TXV0YWJsZVBhcmFtc1xuKSA9PlxuICBoYXNzLmNhbGxXUzxBcmVhUmVnaXN0cnlFbnRyeT4oe1xuICAgIHR5cGU6IFwiY29uZmlnL2FyZWFfcmVnaXN0cnkvY3JlYXRlXCIsXG4gICAgLi4udmFsdWVzLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUFyZWFSZWdpc3RyeUVudHJ5ID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBhcmVhSWQ6IHN0cmluZyxcbiAgdXBkYXRlczogUGFydGlhbDxBcmVhUmVnaXN0cnlFbnRyeU11dGFibGVQYXJhbXM+XG4pID0+XG4gIGhhc3MuY2FsbFdTPEFyZWFSZWdpc3RyeUVudHJ5Pih7XG4gICAgdHlwZTogXCJjb25maWcvYXJlYV9yZWdpc3RyeS91cGRhdGVcIixcbiAgICBhcmVhX2lkOiBhcmVhSWQsXG4gICAgLi4udXBkYXRlcyxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBkZWxldGVBcmVhUmVnaXN0cnlFbnRyeSA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBhcmVhSWQ6IHN0cmluZykgPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwiY29uZmlnL2FyZWFfcmVnaXN0cnkvZGVsZXRlXCIsXG4gICAgYXJlYV9pZDogYXJlYUlkLFxuICB9KTtcblxuY29uc3QgZmV0Y2hBcmVhUmVnaXN0cnkgPSAoY29ubikgPT5cbiAgY29ublxuICAgIC5zZW5kTWVzc2FnZVByb21pc2Uoe1xuICAgICAgdHlwZTogXCJjb25maWcvYXJlYV9yZWdpc3RyeS9saXN0XCIsXG4gICAgfSlcbiAgICAudGhlbigoYXJlYXMpID0+IGFyZWFzLnNvcnQoKGVudDEsIGVudDIpID0+IGNvbXBhcmUoZW50MS5uYW1lLCBlbnQyLm5hbWUpKSk7XG5cbmNvbnN0IHN1YnNjcmliZUFyZWFSZWdpc3RyeVVwZGF0ZXMgPSAoY29ubiwgc3RvcmUpID0+XG4gIGNvbm4uc3Vic2NyaWJlRXZlbnRzKFxuICAgIGRlYm91bmNlKFxuICAgICAgKCkgPT5cbiAgICAgICAgZmV0Y2hBcmVhUmVnaXN0cnkoY29ubikudGhlbigoYXJlYXMpID0+IHN0b3JlLnNldFN0YXRlKGFyZWFzLCB0cnVlKSksXG4gICAgICA1MDAsXG4gICAgICB0cnVlXG4gICAgKSxcbiAgICBcImFyZWFfcmVnaXN0cnlfdXBkYXRlZFwiXG4gICk7XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVBcmVhUmVnaXN0cnkgPSAoXG4gIGNvbm46IENvbm5lY3Rpb24sXG4gIG9uQ2hhbmdlOiAoYXJlYXM6IEFyZWFSZWdpc3RyeUVudHJ5W10pID0+IHZvaWRcbikgPT5cbiAgY3JlYXRlQ29sbGVjdGlvbjxBcmVhUmVnaXN0cnlFbnRyeVtdPihcbiAgICBcIl9hcmVhUmVnaXN0cnlcIixcbiAgICBmZXRjaEFyZWFSZWdpc3RyeSxcbiAgICBzdWJzY3JpYmVBcmVhUmVnaXN0cnlVcGRhdGVzLFxuICAgIGNvbm4sXG4gICAgb25DaGFuZ2VcbiAgKTtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbGxlY3Rpb24sIENvbm5lY3Rpb24gfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gXCIuLi9jb21tb24vdXRpbC9kZWJvdW5jZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIERldmljZVJlZ2lzdHJ5RW50cnkge1xuICBpZDogc3RyaW5nO1xuICBjb25maWdfZW50cmllczogc3RyaW5nW107XG4gIGNvbm5lY3Rpb25zOiBBcnJheTxbc3RyaW5nLCBzdHJpbmddPjtcbiAgbWFudWZhY3R1cmVyOiBzdHJpbmc7XG4gIG1vZGVsPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBzd192ZXJzaW9uPzogc3RyaW5nO1xuICB2aWFfZGV2aWNlX2lkPzogc3RyaW5nO1xuICBhcmVhX2lkPzogc3RyaW5nO1xuICBuYW1lX2J5X3VzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlUmVnaXN0cnlFbnRyeU11dGFibGVQYXJhbXMge1xuICBhcmVhX2lkPzogc3RyaW5nIHwgbnVsbDtcbiAgbmFtZV9ieV91c2VyPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZURldmljZVJlZ2lzdHJ5RW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGRldmljZUlkOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8RGV2aWNlUmVnaXN0cnlFbnRyeU11dGFibGVQYXJhbXM+XG4pID0+XG4gIGhhc3MuY2FsbFdTPERldmljZVJlZ2lzdHJ5RW50cnk+KHtcbiAgICB0eXBlOiBcImNvbmZpZy9kZXZpY2VfcmVnaXN0cnkvdXBkYXRlXCIsXG4gICAgZGV2aWNlX2lkOiBkZXZpY2VJZCxcbiAgICAuLi51cGRhdGVzLFxuICB9KTtcblxuY29uc3QgZmV0Y2hEZXZpY2VSZWdpc3RyeSA9IChjb25uKSA9PlxuICBjb25uLnNlbmRNZXNzYWdlUHJvbWlzZSh7XG4gICAgdHlwZTogXCJjb25maWcvZGV2aWNlX3JlZ2lzdHJ5L2xpc3RcIixcbiAgfSk7XG5cbmNvbnN0IHN1YnNjcmliZURldmljZVJlZ2lzdHJ5VXBkYXRlcyA9IChjb25uLCBzdG9yZSkgPT5cbiAgY29ubi5zdWJzY3JpYmVFdmVudHMoXG4gICAgZGVib3VuY2UoXG4gICAgICAoKSA9PlxuICAgICAgICBmZXRjaERldmljZVJlZ2lzdHJ5KGNvbm4pLnRoZW4oKGRldmljZXMpID0+XG4gICAgICAgICAgc3RvcmUuc2V0U3RhdGUoZGV2aWNlcywgdHJ1ZSlcbiAgICAgICAgKSxcbiAgICAgIDUwMCxcbiAgICAgIHRydWVcbiAgICApLFxuICAgIFwiZGV2aWNlX3JlZ2lzdHJ5X3VwZGF0ZWRcIlxuICApO1xuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlRGV2aWNlUmVnaXN0cnkgPSAoXG4gIGNvbm46IENvbm5lY3Rpb24sXG4gIG9uQ2hhbmdlOiAoZGV2aWNlczogRGV2aWNlUmVnaXN0cnlFbnRyeVtdKSA9PiB2b2lkXG4pID0+XG4gIGNyZWF0ZUNvbGxlY3Rpb248RGV2aWNlUmVnaXN0cnlFbnRyeVtdPihcbiAgICBcIl9kclwiLFxuICAgIGZldGNoRGV2aWNlUmVnaXN0cnksXG4gICAgc3Vic2NyaWJlRGV2aWNlUmVnaXN0cnlVcGRhdGVzLFxuICAgIGNvbm4sXG4gICAgb25DaGFuZ2VcbiAgKTtcbiIsImV4cG9ydCBjb25zdCBVTkFWQUlMQUJMRSA9IFwidW5hdmFpbGFibGVcIjtcblxuZXhwb3J0IGNvbnN0IEVOVElUWV9DT01QT05FTlRfRE9NQUlOUyA9IFtcbiAgXCJhaXJfcXVhbGl0eVwiLFxuICBcImFsYXJtX2NvbnRyb2xfcGFuZWxcIixcbiAgXCJhbGVydFwiLFxuICBcImF1dG9tYXRpb25cIixcbiAgXCJiaW5hcnlfc2Vuc29yXCIsXG4gIFwiY2FsZW5kYXJcIixcbiAgXCJjYW1lcmFcIixcbiAgXCJjb3VudGVyXCIsXG4gIFwiY292ZXJcIixcbiAgXCJkb21pbm9zXCIsXG4gIFwiZmFuXCIsXG4gIFwiZ2VvX2xvY2F0aW9uXCIsXG4gIFwiZ3JvdXBcIixcbiAgXCJoaXN0b3J5X2dyYXBoXCIsXG4gIFwiaW1hZ2VfcHJvY2Vzc2luZ1wiLFxuICBcImlucHV0X2Jvb2xlYW5cIixcbiAgXCJpbnB1dF9kYXRldGltZVwiLFxuICBcImlucHV0X251bWJlclwiLFxuICBcImlucHV0X3NlbGVjdFwiLFxuICBcImlucHV0X3RleHRcIixcbiAgXCJsaWdodFwiLFxuICBcImxvY2tcIixcbiAgXCJtYWlsYm94XCIsXG4gIFwibWVkaWFfcGxheWVyXCIsXG4gIFwicGVyc29uXCIsXG4gIFwicGxhbnRcIixcbiAgXCJyZW1lbWJlcl90aGVfbWlsa1wiLFxuICBcInJlbW90ZVwiLFxuICBcInNjZW5lXCIsXG4gIFwic2NyaXB0XCIsXG4gIFwic2Vuc29yXCIsXG4gIFwic3dpdGNoXCIsXG4gIFwidGltZXJcIixcbiAgXCJ1dGlsaXR5X21ldGVyXCIsXG4gIFwidmFjdXVtXCIsXG4gIFwid2VhdGhlclwiLFxuICBcIndpbmtcIixcbiAgXCJ6aGFcIixcbiAgXCJ6d2F2ZVwiLFxuXTtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IHNldElucHV0RGF0ZVRpbWVWYWx1ZSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZyxcbiAgdGltZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBkYXRlOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbikgPT4ge1xuICBjb25zdCBwYXJhbSA9IHsgZW50aXR5X2lkOiBlbnRpdHlJZCwgdGltZSwgZGF0ZSB9O1xuICBoYXNzLmNhbGxTZXJ2aWNlKGVudGl0eUlkLnNwbGl0KFwiLlwiLCAxKVswXSwgXCJzZXRfZGF0ZXRpbWVcIiwgcGFyYW0pO1xufTtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IHNldFZhbHVlID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQsIGVudGl0eTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxTZXJ2aWNlKGVudGl0eS5zcGxpdChcIi5cIiwgMSlbMF0sIFwic2V0X3ZhbHVlXCIsIHtcbiAgICB2YWx1ZSxcbiAgICBlbnRpdHlfaWQ6IGVudGl0eSxcbiAgfSk7XG4iLCJleHBvcnQgY29uc3QgU1VQUE9SVF9CUklHSFRORVNTID0gMTtcbmV4cG9ydCBjb25zdCBTVVBQT1JUX0NPTE9SX1RFTVAgPSAyO1xuZXhwb3J0IGNvbnN0IFNVUFBPUlRfRUZGRUNUID0gNDtcbmV4cG9ydCBjb25zdCBTVVBQT1JUX0ZMQVNIID0gODtcbmV4cG9ydCBjb25zdCBTVVBQT1JUX0NPTE9SID0gMTY7XG5leHBvcnQgY29uc3QgU1VQUE9SVF9UUkFOU0lUSU9OID0gMzI7XG5leHBvcnQgY29uc3QgU1VQUE9SVF9XSElURV9WQUxVRSA9IDEyODtcbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb24sIGdldENvbGxlY3Rpb24gfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VDb25maWcge1xuICB0aXRsZT86IHN0cmluZztcbiAgdmlld3M6IExvdmVsYWNlVmlld0NvbmZpZ1tdO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICByZXNvdXJjZXM/OiBBcnJheTx7IHR5cGU6IFwiY3NzXCIgfCBcImpzXCIgfCBcIm1vZHVsZVwiIHwgXCJodG1sXCI7IHVybDogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvdmVsYWNlVmlld0NvbmZpZyB7XG4gIGluZGV4PzogbnVtYmVyO1xuICB0aXRsZT86IHN0cmluZztcbiAgYmFkZ2VzPzogc3RyaW5nW107XG4gIGNhcmRzPzogTG92ZWxhY2VDYXJkQ29uZmlnW107XG4gIHBhdGg/OiBzdHJpbmc7XG4gIGljb24/OiBzdHJpbmc7XG4gIHRoZW1lPzogc3RyaW5nO1xuICBwYW5lbD86IGJvb2xlYW47XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIHZpc2libGU/OiBib29sZWFuIHwgU2hvd1ZpZXdDb25maWdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaG93Vmlld0NvbmZpZyB7XG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VDYXJkQ29uZmlnIHtcbiAgaW5kZXg/OiBudW1iZXI7XG4gIHZpZXdfaW5kZXg/OiBudW1iZXI7XG4gIHR5cGU6IHN0cmluZztcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvZ2dsZUFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJ0b2dnbGVcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYWxsU2VydmljZUFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJjYWxsLXNlcnZpY2VcIjtcbiAgc2VydmljZTogc3RyaW5nO1xuICBzZXJ2aWNlX2RhdGE/OiB7XG4gICAgZW50aXR5X2lkPzogc3RyaW5nIHwgW3N0cmluZ107XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5hdmlnYXRlQWN0aW9uQ29uZmlnIHtcbiAgYWN0aW9uOiBcIm5hdmlnYXRlXCI7XG4gIG5hdmlnYXRpb25fcGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVybEFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJ1cmxcIjtcbiAgdXJsX3BhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb3JlSW5mb0FjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJtb3JlLWluZm9cIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb0FjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJub25lXCI7XG59XG5cbmV4cG9ydCB0eXBlIEFjdGlvbkNvbmZpZyA9XG4gIHwgVG9nZ2xlQWN0aW9uQ29uZmlnXG4gIHwgQ2FsbFNlcnZpY2VBY3Rpb25Db25maWdcbiAgfCBOYXZpZ2F0ZUFjdGlvbkNvbmZpZ1xuICB8IFVybEFjdGlvbkNvbmZpZ1xuICB8IE1vcmVJbmZvQWN0aW9uQ29uZmlnXG4gIHwgTm9BY3Rpb25Db25maWc7XG5cbmV4cG9ydCBjb25zdCBmZXRjaENvbmZpZyA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgZm9yY2U6IGJvb2xlYW5cbik6IFByb21pc2U8TG92ZWxhY2VDb25maWc+ID0+XG4gIGNvbm4uc2VuZE1lc3NhZ2VQcm9taXNlKHtcbiAgICB0eXBlOiBcImxvdmVsYWNlL2NvbmZpZ1wiLFxuICAgIGZvcmNlLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHNhdmVDb25maWcgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWdcbik6IFByb21pc2U8dm9pZD4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwibG92ZWxhY2UvY29uZmlnL3NhdmVcIixcbiAgICBjb25maWcsXG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlTG92ZWxhY2VVcGRhdGVzID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBvbkNoYW5nZTogKCkgPT4gdm9pZFxuKSA9PiBjb25uLnN1YnNjcmliZUV2ZW50cyhvbkNoYW5nZSwgXCJsb3ZlbGFjZV91cGRhdGVkXCIpO1xuXG5leHBvcnQgY29uc3QgZ2V0TG92ZWxhY2VDb2xsZWN0aW9uID0gKGNvbm46IENvbm5lY3Rpb24pID0+XG4gIGdldENvbGxlY3Rpb24oXG4gICAgY29ubixcbiAgICBcIl9sb3ZlbGFjZVwiLFxuICAgIChjb25uMikgPT4gZmV0Y2hDb25maWcoY29ubjIsIGZhbHNlKSxcbiAgICAoX2Nvbm4sIHN0b3JlKSA9PlxuICAgICAgc3Vic2NyaWJlTG92ZWxhY2VVcGRhdGVzKGNvbm4sICgpID0+XG4gICAgICAgIGZldGNoQ29uZmlnKGNvbm4sIGZhbHNlKS50aGVuKChjb25maWcpID0+IHN0b3JlLnNldFN0YXRlKGNvbmZpZywgdHJ1ZSkpXG4gICAgICApXG4gICk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2luZG93V2l0aExvdmVsYWNlUHJvbSBleHRlbmRzIFdpbmRvdyB7XG4gIGxsQ29uZlByb20/OiBQcm9taXNlPExvdmVsYWNlQ29uZmlnPjtcbn1cbiIsImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTaG9wcGluZ0xpc3RJdGVtIHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBjb21wbGV0ZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGZldGNoSXRlbXMgPSAoaGFzczogSG9tZUFzc2lzdGFudCk6IFByb21pc2U8U2hvcHBpbmdMaXN0SXRlbVtdPiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJzaG9wcGluZ19saXN0L2l0ZW1zXCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlSXRlbSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgaXRlbUlkOiBudW1iZXIsXG4gIGl0ZW06IHtcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGNvbXBsZXRlPzogYm9vbGVhbjtcbiAgfVxuKTogUHJvbWlzZTxTaG9wcGluZ0xpc3RJdGVtPiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJzaG9wcGluZ19saXN0L2l0ZW1zL3VwZGF0ZVwiLFxuICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAuLi5pdGVtLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGNsZWFySXRlbXMgPSAoaGFzczogSG9tZUFzc2lzdGFudCk6IFByb21pc2U8dm9pZD4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwic2hvcHBpbmdfbGlzdC9pdGVtcy9jbGVhclwiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGFkZEl0ZW0gPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIG5hbWU6IHN0cmluZ1xuKTogUHJvbWlzZTxTaG9wcGluZ0xpc3RJdGVtPiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJzaG9wcGluZ19saXN0L2l0ZW1zL2FkZFwiLFxuICAgIG5hbWUsXG4gIH0pO1xuIiwiaW1wb3J0IHsgQ29ubmVjdGlvbiwgVW5zdWJzY3JpYmVGdW5jIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5pbnRlcmZhY2UgUmVuZGVyVGVtcGxhdGVSZXN1bHQge1xuICByZXN1bHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZVJlbmRlclRlbXBsYXRlID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBvbkNoYW5nZTogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkLFxuICBwYXJhbXM6IHtcbiAgICB0ZW1wbGF0ZTogc3RyaW5nO1xuICAgIGVudGl0eV9pZHM/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICB2YXJpYWJsZXM/OiBvYmplY3Q7XG4gIH1cbik6IFByb21pc2U8VW5zdWJzY3JpYmVGdW5jPiA9PiB7XG4gIHJldHVybiBjb25uLnN1YnNjcmliZU1lc3NhZ2UoXG4gICAgKG1zZzogUmVuZGVyVGVtcGxhdGVSZXN1bHQpID0+IG9uQ2hhbmdlKG1zZy5yZXN1bHQpLFxuICAgIHsgdHlwZTogXCJyZW5kZXJfdGVtcGxhdGVcIiwgLi4ucGFyYW1zIH1cbiAgKTtcbn07XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIENTU1Jlc3VsdCxcbiAgY3NzLFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtbGFiZWwtYmFkZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQge1xuICBjYWxsQWxhcm1BY3Rpb24sXG4gIEZPUk1BVF9OVU1CRVIsXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2FsYXJtX2NvbnRyb2xfcGFuZWxcIjtcbmltcG9ydCB7IEFsYXJtUGFuZWxDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IFBhcGVySW5wdXRFbGVtZW50IH0gZnJvbSBcIkBwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0XCI7XG5cbmNvbnN0IElDT05TID0ge1xuICBhcm1lZF9hd2F5OiBcImhhc3M6c2hpZWxkLWxvY2tcIixcbiAgYXJtZWRfY3VzdG9tX2J5cGFzczogXCJoYXNzOnNlY3VyaXR5XCIsXG4gIGFybWVkX2hvbWU6IFwiaGFzczpzaGllbGQtaG9tZVwiLFxuICBhcm1lZF9uaWdodDogXCJoYXNzOnNoaWVsZC1ob21lXCIsXG4gIGRpc2FybWVkOiBcImhhc3M6c2hpZWxkLWNoZWNrXCIsXG4gIHBlbmRpbmc6IFwiaGFzczpzaGllbGQtb3V0bGluZVwiLFxuICB0cmlnZ2VyZWQ6IFwiaGFzczpiZWxsLXJpbmdcIixcbn07XG5cbmNvbnN0IEJVVFRPTlMgPSBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCJcIiwgXCIwXCIsIFwiY2xlYXJcIl07XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWFsYXJtLXBhbmVsLWNhcmRcIilcbmNsYXNzIEh1aUFsYXJtUGFuZWxDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpIHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktYWxhcm0tcGFuZWwtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLWFsYXJtLXBhbmVsLWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLWFsYXJtLXBhbmVsLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCkge1xuICAgIHJldHVybiB7IHN0YXRlczogW1wiYXJtX2hvbWVcIiwgXCJhcm1fYXdheVwiXSwgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogQWxhcm1QYW5lbENhcmRDb25maWc7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29kZT86IHN0cmluZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICByZXR1cm4gIXN0YXRlT2JqIHx8IHN0YXRlT2JqLmF0dHJpYnV0ZXMuY29kZV9mb3JtYXQgIT09IEZPUk1BVF9OVU1CRVJcbiAgICAgID8gM1xuICAgICAgOiA4O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEFsYXJtUGFuZWxDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKFxuICAgICAgIWNvbmZpZyB8fFxuICAgICAgIWNvbmZpZy5lbnRpdHkgfHxcbiAgICAgIGNvbmZpZy5lbnRpdHkuc3BsaXQoXCIuXCIpWzBdICE9PSBcImFsYXJtX2NvbnRyb2xfcGFuZWxcIlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjYXJkIGNvbmZpZ3VyYXRpb25cIik7XG4gICAgfVxuXG4gICAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgICBzdGF0ZXM6IFtcImFybV9hd2F5XCIsIFwiYXJtX2hvbWVcIl0sXG4gICAgfTtcblxuICAgIHRoaXMuX2NvbmZpZyA9IHsgLi4uZGVmYXVsdHMsIC4uLmNvbmZpZyB9O1xuICAgIHRoaXMuX2NvZGUgPSBcIlwiO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpIHx8IGNoYW5nZWRQcm9wcy5oYXMoXCJfY29kZVwiKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG4gICAgaWYgKG9sZEhhc3MpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIG9sZEhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XSAhPT1cbiAgICAgICAgdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZFxuICAgICAgICAuaGVhZGVyPVwiJHt0aGlzLl9jb25maWcubmFtZSB8fFxuICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMuZnJpZW5kbHlfbmFtZSB8fFxuICAgICAgICAgIHRoaXMuX2xhYmVsKHN0YXRlT2JqLnN0YXRlKX1cIlxuICAgICAgPlxuICAgICAgICA8aGEtbGFiZWwtYmFkZ2VcbiAgICAgICAgICBjbGFzcz1cIiR7Y2xhc3NNYXAoeyBbc3RhdGVPYmouc3RhdGVdOiB0cnVlIH0pfVwiXG4gICAgICAgICAgLmljb249XCIke0lDT05TW3N0YXRlT2JqLnN0YXRlXSB8fCBcImhhc3M6c2hpZWxkLW91dGxpbmVcIn1cIlxuICAgICAgICAgIC5sYWJlbD1cIiR7dGhpcy5fc3RhdGVJY29uTGFiZWwoc3RhdGVPYmouc3RhdGUpfVwiXG4gICAgICAgID48L2hhLWxhYmVsLWJhZGdlPlxuICAgICAgICA8ZGl2IGlkPVwiYXJtQWN0aW9uc1wiIGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICAgICR7KHN0YXRlT2JqLnN0YXRlID09PSBcImRpc2FybWVkXCJcbiAgICAgICAgICAgID8gdGhpcy5fY29uZmlnLnN0YXRlcyFcbiAgICAgICAgICAgIDogW1wiZGlzYXJtXCJdXG4gICAgICAgICAgKS5tYXAoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgICAgPG13Yy1idXR0b25cbiAgICAgICAgICAgICAgICAuYWN0aW9uPVwiJHtzdGF0ZX1cIlxuICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5faGFuZGxlQWN0aW9uQ2xpY2t9XCJcbiAgICAgICAgICAgICAgICBvdXRsaW5lZFxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgJHt0aGlzLl9sYWJlbChzdGF0ZSl9XG4gICAgICAgICAgICAgIDwvbXdjLWJ1dHRvbj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICAkeyFzdGF0ZU9iai5hdHRyaWJ1dGVzLmNvZGVfZm9ybWF0XG4gICAgICAgICAgPyBodG1sYGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwiYWxhcm1Db2RlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD1cIkFsYXJtIENvZGVcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgLnZhbHVlPVwiJHt0aGlzLl9jb2RlfVwiXG4gICAgICAgICAgICAgID48L3BhcGVyLWlucHV0PlxuICAgICAgICAgICAgYH1cbiAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmNvZGVfZm9ybWF0ICE9PSBGT1JNQVRfTlVNQkVSXG4gICAgICAgICAgPyBodG1sYGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgaWQ9XCJrZXlwYWRcIj5cbiAgICAgICAgICAgICAgICAke0JVVFRPTlMubWFwKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxtd2MtYnV0dG9uIGRpc2FibGVkPjwvbXdjLWJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxtd2MtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7dmFsdWV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVQYWRDbGlja31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZW5zZVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAke3ZhbHVlID09PSBcImNsZWFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2xhYmVsKFwiY2xlYXJfY29kZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgfVxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9zdGF0ZUljb25MYWJlbChzdGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGF0ZUxhYmVsID0gc3RhdGUuc3BsaXQoXCJfXCIpLnBvcCgpO1xuICAgIHJldHVybiBzdGF0ZUxhYmVsID09PSBcImRpc2FybWVkXCIgfHxcbiAgICAgIHN0YXRlTGFiZWwgPT09IFwidHJpZ2dlcmVkXCIgfHxcbiAgICAgICFzdGF0ZUxhYmVsXG4gICAgICA/IFwiXCJcbiAgICAgIDogc3RhdGVMYWJlbDtcbiAgfVxuXG4gIHByaXZhdGUgX2xhYmVsKHN0YXRlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmhhc3MhLmxvY2FsaXplKGBzdGF0ZS5hbGFybV9jb250cm9sX3BhbmVsLiR7c3RhdGV9YCkgfHxcbiAgICAgIHRoaXMuaGFzcyEubG9jYWxpemUoYHVpLmNhcmQuYWxhcm1fY29udHJvbF9wYW5lbC4ke3N0YXRlfWApXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVBhZENsaWNrKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB2YWwgPSAoZS5jdXJyZW50VGFyZ2V0ISBhcyBhbnkpLnZhbHVlO1xuICAgIHRoaXMuX2NvZGUgPSB2YWwgPT09IFwiY2xlYXJcIiA/IFwiXCIgOiB0aGlzLl9jb2RlICsgdmFsO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlQWN0aW9uQ2xpY2soZTogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjYWxhcm1Db2RlXCJcbiAgICApIGFzIFBhcGVySW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGNvZGUgPVxuICAgICAgdGhpcy5fY29kZSB8fFxuICAgICAgKGlucHV0ICYmIGlucHV0LnZhbHVlICYmIGlucHV0LnZhbHVlLmxlbmd0aCA+IDAgPyBpbnB1dC52YWx1ZSA6IFwiXCIpO1xuICAgIGNhbGxBbGFybUFjdGlvbihcbiAgICAgIHRoaXMuaGFzcyEsXG4gICAgICB0aGlzLl9jb25maWchLmVudGl0eSxcbiAgICAgIChlLmN1cnJlbnRUYXJnZXQhIGFzIGFueSkuYWN0aW9uLFxuICAgICAgY29kZVxuICAgICk7XG4gICAgdGhpcy5fY29kZSA9IFwiXCI7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDE2cHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgLS1hbGFybS1jb2xvci1kaXNhcm1lZDogdmFyKC0tbGFiZWwtYmFkZ2UtZ3JlZW4pO1xuICAgICAgICAtLWFsYXJtLWNvbG9yLXBlbmRpbmc6IHZhcigtLWxhYmVsLWJhZGdlLXllbGxvdyk7XG4gICAgICAgIC0tYWxhcm0tY29sb3ItdHJpZ2dlcmVkOiB2YXIoLS1sYWJlbC1iYWRnZS1yZWQpO1xuICAgICAgICAtLWFsYXJtLWNvbG9yLWFybWVkOiB2YXIoLS1sYWJlbC1iYWRnZS1yZWQpO1xuICAgICAgICAtLWFsYXJtLWNvbG9yLWF1dG9hcm06IHJnYmEoMCwgMTUzLCAyNTUsIDAuMSk7XG4gICAgICAgIC0tYWxhcm0tc3RhdGUtY29sb3I6IHZhcigtLWFsYXJtLWNvbG9yLWFybWVkKTtcbiAgICAgICAgLS1iYXNlLXVuaXQ6IDE1cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogY2FsYyh2YXIoLS1iYXNlLXVuaXQpKTtcbiAgICAgIH1cblxuICAgICAgaGEtbGFiZWwtYmFkZ2Uge1xuICAgICAgICAtLWhhLWxhYmVsLWJhZGdlLWNvbG9yOiB2YXIoLS1hbGFybS1zdGF0ZS1jb2xvcik7XG4gICAgICAgIC0tbGFiZWwtYmFkZ2UtdGV4dC1jb2xvcjogdmFyKC0tYWxhcm0tc3RhdGUtY29sb3IpO1xuICAgICAgICAtLWxhYmVsLWJhZGdlLWJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhcGVyLWNhcmQtYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1hbGFybS1zdGF0ZS1jb2xvcik7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcmlnaHQ6IDEycHg7XG4gICAgICAgIHRvcDogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmRpc2FybWVkIHtcbiAgICAgICAgLS1hbGFybS1zdGF0ZS1jb2xvcjogdmFyKC0tYWxhcm0tY29sb3ItZGlzYXJtZWQpO1xuICAgICAgfVxuXG4gICAgICAudHJpZ2dlcmVkIHtcbiAgICAgICAgLS1hbGFybS1zdGF0ZS1jb2xvcjogdmFyKC0tYWxhcm0tY29sb3ItdHJpZ2dlcmVkKTtcbiAgICAgICAgYW5pbWF0aW9uOiBwdWxzZSAxcyBpbmZpbml0ZTtcbiAgICAgIH1cblxuICAgICAgLmFybWluZyB7XG4gICAgICAgIC0tYWxhcm0tc3RhdGUtY29sb3I6IHZhcigtLWFsYXJtLWNvbG9yLXBlbmRpbmcpO1xuICAgICAgICBhbmltYXRpb246IHB1bHNlIDFzIGluZmluaXRlO1xuICAgICAgfVxuXG4gICAgICAucGVuZGluZyB7XG4gICAgICAgIC0tYWxhcm0tc3RhdGUtY29sb3I6IHZhcigtLWFsYXJtLWNvbG9yLXBlbmRpbmcpO1xuICAgICAgICBhbmltYXRpb246IHB1bHNlIDFzIGluZmluaXRlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHB1bHNlIHtcbiAgICAgICAgMCUge1xuICAgICAgICAgIC0taGEtbGFiZWwtYmFkZ2UtY29sb3I6IHZhcigtLWFsYXJtLXN0YXRlLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAxMDAlIHtcbiAgICAgICAgICAtLWhhLWxhYmVsLWJhZGdlLWNvbG9yOiByZ2JhKDI1NSwgMTUzLCAwLCAwLjMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhcGVyLWlucHV0IHtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG8gOHB4O1xuICAgICAgICBtYXgtd2lkdGg6IDE1MHB4O1xuICAgICAgICBmb250LXNpemU6IGNhbGModmFyKC0tYmFzZS11bml0KSk7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnN0YXRlIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMC45KTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBib3R0b206IDE2cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1hbGFybS1zdGF0ZS1jb2xvcik7XG4gICAgICAgIGFuaW1hdGlvbjogbm9uZTtcbiAgICAgIH1cblxuICAgICAgI2tleXBhZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIG1hcmdpbjogYXV0bztcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgfVxuXG4gICAgICAja2V5cGFkIG13Yy1idXR0b24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA1JTtcbiAgICAgICAgd2lkdGg6IDMwJTtcbiAgICAgICAgcGFkZGluZzogY2FsYyh2YXIoLS1iYXNlLXVuaXQpKTtcbiAgICAgICAgZm9udC1zaXplOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAxLjEpO1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgfVxuXG4gICAgICAuYWN0aW9ucyB7XG4gICAgICAgIG1hcmdpbjogMCA4cHg7XG4gICAgICAgIHBhZGRpbmctdG9wOiAyMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBmb250LXNpemU6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDEpO1xuICAgICAgfVxuXG4gICAgICAuYWN0aW9ucyBtd2MtYnV0dG9uIHtcbiAgICAgICAgbWluLXdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA5KTtcbiAgICAgICAgbWFyZ2luOiAwIDRweCA0cHg7XG4gICAgICB9XG5cbiAgICAgIG13Yy1idXR0b24jZGlzYXJtIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWdvb2dsZS1yZWQtNTAwKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktYWxhcm0tcGFuZWwtY2FyZFwiOiBIdWlBbGFybVBhbmVsQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQ2FyZEVsZW1lbnQgfSBmcm9tIFwiLi4vY29tbW9uL2NyZWF0ZS1jYXJkLWVsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVDYXJkU2l6ZSB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS1jYXJkLXNpemVcIjtcbmltcG9ydCB7XG4gIGNoZWNrQ29uZGl0aW9uc01ldCxcbiAgdmFsaWRhdGVDb25kaXRpb25hbENvbmZpZyxcbn0gZnJvbSBcIi4uLy4uL2xvdmVsYWNlL2NvbW1vbi92YWxpZGF0ZS1jb25kaXRpb25cIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgQ29uZGl0aW9uYWxDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuY2xhc3MgSHVpQ29uZGl0aW9uYWxDYXJkIGV4dGVuZHMgSFRNTEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwcml2YXRlIF9oYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHJpdmF0ZSBfY29uZmlnPzogQ29uZGl0aW9uYWxDYXJkQ29uZmlnO1xuICBwcml2YXRlIF9jYXJkPzogTG92ZWxhY2VDYXJkO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnKSB7XG4gICAgaWYgKFxuICAgICAgIWNvbmZpZy5jYXJkIHx8XG4gICAgICAhY29uZmlnLmNvbmRpdGlvbnMgfHxcbiAgICAgICFBcnJheS5pc0FycmF5KGNvbmZpZy5jb25kaXRpb25zKSB8fFxuICAgICAgIXZhbGlkYXRlQ29uZGl0aW9uYWxDb25maWcoY29uZmlnLmNvbmRpdGlvbnMpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBpbiBjYXJkIGNvbmZpZ3VyYXRpb24uXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jYXJkICYmIHRoaXMuX2NhcmQucGFyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLl9jYXJkKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fY2FyZCA9IGNyZWF0ZUNhcmRFbGVtZW50KGNvbmZpZy5jYXJkKTtcblxuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBzZXQgaGFzcyhoYXNzOiBIb21lQXNzaXN0YW50KSB7XG4gICAgdGhpcy5faGFzcyA9IGhhc3M7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCkge1xuICAgIHJldHVybiBjb21wdXRlQ2FyZFNpemUodGhpcy5fY2FyZCEpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9jYXJkIHx8ICF0aGlzLl9oYXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdmlzaWJsZSA9XG4gICAgICB0aGlzLl9jb25maWcgJiYgY2hlY2tDb25kaXRpb25zTWV0KHRoaXMuX2NvbmZpZy5jb25kaXRpb25zLCB0aGlzLl9oYXNzKTtcblxuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICB0aGlzLl9jYXJkLmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgICAgaWYgKCF0aGlzLl9jYXJkLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl9jYXJkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2NhcmQucGFyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLl9jYXJkKTtcbiAgICB9XG4gICAgLy8gVGhpcyB3aWxsIGhpZGUgdGhlIGNvbXBsZXRlIGNhcmQgc28gaXQgd29uJ3QgZ2V0IHN0eWxlZCBieSBwYXJlbnRcbiAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCB2aXNpYmxlID8gXCJcIiA6IFwibm9uZVwiKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWNvbmRpdGlvbmFsLWNhcmRcIjogSHVpQ29uZGl0aW9uYWxDYXJkO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1jb25kaXRpb25hbC1jYXJkXCIsIEh1aUNvbmRpdGlvbmFsQ2FyZCk7XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZW50aXRpZXMtdG9nZ2xlXCI7XG5cbmltcG9ydCB7IGZpcmVFdmVudCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2ZpcmVfZXZlbnRcIjtcbmltcG9ydCB7IERPTUFJTlNfSElERV9NT1JFX0lORk8gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3cgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBwcm9jZXNzQ29uZmlnRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBjcmVhdGVSb3dFbGVtZW50IH0gZnJvbSBcIi4uL2NvbW1vbi9jcmVhdGUtcm93LWVsZW1lbnRcIjtcbmltcG9ydCB7IEVudGl0aWVzQ2FyZENvbmZpZywgRW50aXRpZXNDYXJkRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZW50aXRpZXMtY2FyZFwiKVxuY2xhc3MgSHVpRW50aXRpZXNDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1lbnRpdGllcy1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktZW50aXRpZXMtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZW50aXRpZXMtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4geyBlbnRpdGllczogW10gfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHByb3RlY3RlZCBfY29uZmlnPzogRW50aXRpZXNDYXJkQ29uZmlnO1xuXG4gIHByb3RlY3RlZCBfaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgcHJvdGVjdGVkIF9jb25maWdFbnRpdGllcz86IEVudGl0aWVzQ2FyZEVudGl0eUNvbmZpZ1tdO1xuXG4gIHNldCBoYXNzKGhhc3M6IEhvbWVBc3Npc3RhbnQpIHtcbiAgICB0aGlzLl9oYXNzID0gaGFzcztcbiAgICB0aGlzLnNoYWRvd1Jvb3QhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIjc3RhdGVzID4gZGl2ID4gKlwiKS5mb3JFYWNoKFxuICAgICAgKGVsZW1lbnQ6IHVua25vd24pID0+IHtcbiAgICAgICAgKGVsZW1lbnQgYXMgRW50aXR5Um93KS5oYXNzID0gaGFzcztcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IGVudGl0aWVzVG9nZ2xlID0gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCJodWktZW50aXRpZXMtdG9nZ2xlXCJcbiAgICApO1xuICAgIGlmIChlbnRpdGllc1RvZ2dsZSkge1xuICAgICAgKGVudGl0aWVzVG9nZ2xlIGFzIGFueSkuaGFzcyA9IGhhc3M7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICAvLyArMSBmb3IgdGhlIGhlYWRlclxuICAgIHJldHVybiAodGhpcy5fY29uZmlnLnRpdGxlID8gMSA6IDApICsgdGhpcy5fY29uZmlnLmVudGl0aWVzLmxlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdGllc0NhcmRDb25maWcpOiB2b2lkIHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpO1xuXG4gICAgdGhpcy5fY29uZmlnID0geyB0aGVtZTogXCJkZWZhdWx0XCIsIC4uLmNvbmZpZyB9O1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gZW50aXRpZXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAodGhpcy5faGFzcyAmJiB0aGlzLl9jb25maWcpIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KHRoaXMsIHRoaXMuX2hhc3MudGhlbWVzLCB0aGlzLl9jb25maWcudGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5faGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG4gICAgY29uc3QgeyBzaG93X2hlYWRlcl90b2dnbGUsIHRpdGxlIH0gPSB0aGlzLl9jb25maWc7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICAkeyF0aXRsZSAmJiAhc2hvd19oZWFkZXJfdG9nZ2xlXG4gICAgICAgICAgPyBodG1sYGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuYW1lXCI+JHt0aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAke3Nob3dfaGVhZGVyX3RvZ2dsZSA9PT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgID8gaHRtbGBgXG4gICAgICAgICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgPGh1aS1lbnRpdGllcy10b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLl9oYXNzfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAuZW50aXRpZXM9XCIke3RoaXMuX2NvbmZpZ0VudGl0aWVzIS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChjb25mKSA9PiBjb25mLmVudGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cIlxuICAgICAgICAgICAgICAgICAgICAgID48L2h1aS1lbnRpdGllcy10b2dnbGU+XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYH1cbiAgICAgICAgPGRpdiBpZD1cInN0YXRlc1wiIGNsYXNzPVwiY2FyZC1jb250ZW50XCI+XG4gICAgICAgICAgJHt0aGlzLl9jb25maWdFbnRpdGllcyEubWFwKChlbnRpdHlDb25mKSA9PlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJFbnRpdHkoZW50aXR5Q29uZilcbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmNhcmQtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1oZWFkZXIgLm5hbWUge1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIH1cblxuICAgICAgLmNhcmQtaGVhZGVyIGh1aS1lbnRpdGllcy10b2dnbGUge1xuICAgICAgICBtYXJnaW46IC00cHggMDtcbiAgICAgIH1cblxuICAgICAgI3N0YXRlcyA+ICoge1xuICAgICAgICBtYXJnaW46IDhweCAwO1xuICAgICAgfVxuXG4gICAgICAjc3RhdGVzID4gZGl2ID4gKiB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5zdGF0ZS1jYXJkLWRpYWxvZyB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnRpdHkoZW50aXR5Q29uZjogRW50aXRpZXNDYXJkRW50aXR5Q29uZmlnKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVSb3dFbGVtZW50KGVudGl0eUNvbmYpO1xuICAgIGlmICh0aGlzLl9oYXNzKSB7XG4gICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBlbnRpdHlDb25mLmVudGl0eSAmJlxuICAgICAgIURPTUFJTlNfSElERV9NT1JFX0lORk8uaW5jbHVkZXMoY29tcHV0ZURvbWFpbihlbnRpdHlDb25mLmVudGl0eSkpXG4gICAgKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzdGF0ZS1jYXJkLWRpYWxvZ1wiKTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUNsaWNrKGVudGl0eUNvbmYpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXY+JHtlbGVtZW50fTwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVDbGljayhlbnRpdHlDb25mOiBFbnRpdGllc0NhcmRFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBjb25zdCBlbnRpdHlJZCA9IGVudGl0eUNvbmYuZW50aXR5O1xuICAgIGZpcmVFdmVudCh0aGlzLCBcImhhc3MtbW9yZS1pbmZvXCIsIHsgZW50aXR5SWQgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1lbnRpdGllcy1jYXJkXCI6IEh1aUVudGl0aWVzQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgSGFzc0VudGl0eSB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IHN0eWxlTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvc3R5bGUtbWFwXCI7XG5pbXBvcnQgXCJAbWF0ZXJpYWwvbXdjLXJpcHBsZVwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgaXNWYWxpZEVudGl0eUlkIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvdmFsaWRfZW50aXR5X2lkXCI7XG5pbXBvcnQgeyBzdGF0ZUljb24gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9zdGF0ZV9pY29uXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IGFwcGx5VGhlbWVzT25FbGVtZW50IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2FwcGx5X3RoZW1lc19vbl9lbGVtZW50XCI7XG5pbXBvcnQgeyBjb21wdXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9kb21haW5cIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCwgTGlnaHRFbnRpdHkgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IERPTUFJTlNfVE9HR0xFIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgRW50aXR5QnV0dG9uQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWVudGl0eS1idXR0b24tY2FyZFwiKVxuY2xhc3MgSHVpRW50aXR5QnV0dG9uQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktZW50aXR5LWJ1dHRvbi1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktZW50aXR5LWJ1dHRvbi1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1lbnRpdHktYnV0dG9uLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhcF9hY3Rpb246IHsgYWN0aW9uOiBcInRvZ2dsZVwiIH0sXG4gICAgICBob2xkX2FjdGlvbjogeyBhY3Rpb246IFwibW9yZS1pbmZvXCIgfSxcbiAgICAgIHNob3dfaWNvbjogdHJ1ZSxcbiAgICAgIHNob3dfbmFtZTogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUJ1dHRvbkNhcmRDb25maWc7XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDI7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5QnV0dG9uQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghaXNWYWxpZEVudGl0eUlkKGNvbmZpZy5lbnRpdHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEVudGl0eVwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSB7XG4gICAgICB0aGVtZTogXCJkZWZhdWx0XCIsXG4gICAgICBob2xkX2FjdGlvbjogeyBhY3Rpb246IFwibW9yZS1pbmZvXCIgfSxcbiAgICAgIHNob3dfaWNvbjogdHJ1ZSxcbiAgICAgIHNob3dfbmFtZTogdHJ1ZSxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9O1xuXG4gICAgaWYgKERPTUFJTlNfVE9HR0xFLmhhcyhjb21wdXRlRG9tYWluKGNvbmZpZy5lbnRpdHkpKSkge1xuICAgICAgdGhpcy5fY29uZmlnID0ge1xuICAgICAgICB0YXBfYWN0aW9uOiB7XG4gICAgICAgICAgYWN0aW9uOiBcInRvZ2dsZVwiLFxuICAgICAgICB9LFxuICAgICAgICAuLi50aGlzLl9jb25maWcsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jb25maWcgPSB7XG4gICAgICAgIHRhcF9hY3Rpb246IHtcbiAgICAgICAgICBhY3Rpb246IFwibW9yZS1pbmZvXCIsXG4gICAgICAgIH0sXG4gICAgICAgIC4uLnRoaXMuX2NvbmZpZyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcbiAgICBpZiAob2xkSGFzcykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgb2xkSGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldICE9PVxuICAgICAgICB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkXG4gICAgICAgIEBoYS1jbGljaz1cIiR7dGhpcy5faGFuZGxlVGFwfVwiXG4gICAgICAgIEBoYS1ob2xkPVwiJHt0aGlzLl9oYW5kbGVIb2xkfVwiXG4gICAgICAgIC5sb25nUHJlc3M9XCIke2xvbmdQcmVzcygpfVwiXG4gICAgICA+XG4gICAgICAgICR7dGhpcy5fY29uZmlnLnNob3dfaWNvblxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWljb25cbiAgICAgICAgICAgICAgICBkYXRhLWRvbWFpbj1cIiR7Y29tcHV0ZVN0YXRlRG9tYWluKHN0YXRlT2JqKX1cIlxuICAgICAgICAgICAgICAgIGRhdGEtc3RhdGU9XCIke3N0YXRlT2JqLnN0YXRlfVwiXG4gICAgICAgICAgICAgICAgLmljb249XCIke3RoaXMuX2NvbmZpZy5pY29uIHx8IHN0YXRlSWNvbihzdGF0ZU9iail9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIiR7c3R5bGVNYXAoe1xuICAgICAgICAgICAgICAgICAgZmlsdGVyOiB0aGlzLl9jb21wdXRlQnJpZ2h0bmVzcyhzdGF0ZU9iaiksXG4gICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5fY29tcHV0ZUNvbG9yKHN0YXRlT2JqKSxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5fY29uZmlnLmljb25faGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5fY29uZmlnLmljb25faGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIDogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgfSl9XCJcbiAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICR7dGhpcy5fY29uZmlnLnNob3dfbmFtZVxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgPG13Yy1yaXBwbGU+PC9td2MtcmlwcGxlPlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG4gICAgaWYgKCFvbGRIYXNzIHx8IG9sZEhhc3MudGhlbWVzICE9PSB0aGlzLmhhc3MudGhlbWVzKSB7XG4gICAgICBhcHBseVRoZW1lc09uRWxlbWVudCh0aGlzLCB0aGlzLmhhc3MudGhlbWVzLCB0aGlzLl9jb25maWcudGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNCUgMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjJyZW07XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24ge1xuICAgICAgICB3aWR0aDogNDAlO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pdGVtLWljb24tY29sb3IsICM0NDczOWUpO1xuICAgICAgfVxuXG4gICAgICBoYS1pY29uW2RhdGEtZG9tYWluPVwibGlnaHRcIl1bZGF0YS1zdGF0ZT1cIm9uXCJdLFxuICAgICAgaGEtaWNvbltkYXRhLWRvbWFpbj1cInN3aXRjaFwiXVtkYXRhLXN0YXRlPVwib25cIl0sXG4gICAgICBoYS1pY29uW2RhdGEtZG9tYWluPVwiYmluYXJ5X3NlbnNvclwiXVtkYXRhLXN0YXRlPVwib25cIl0sXG4gICAgICBoYS1pY29uW2RhdGEtZG9tYWluPVwiZmFuXCJdW2RhdGEtc3RhdGU9XCJvblwiXSxcbiAgICAgIGhhLWljb25bZGF0YS1kb21haW49XCJzdW5cIl1bZGF0YS1zdGF0ZT1cImFib3ZlX2hvcml6b25cIl0ge1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWFjdGl2ZS1jb2xvciwgI2ZkZDgzNSk7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb25bZGF0YS1zdGF0ZT1cInVuYXZhaWxhYmxlXCJdIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXN0YXRlLWljb24tdW5hdmFpbGFibGUtY29sb3IpO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlQnJpZ2h0bmVzcyhzdGF0ZU9iajogSGFzc0VudGl0eSB8IExpZ2h0RW50aXR5KTogc3RyaW5nIHtcbiAgICBpZiAoIXN0YXRlT2JqLmF0dHJpYnV0ZXMuYnJpZ2h0bmVzcykge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGNvbnN0IGJyaWdodG5lc3MgPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmJyaWdodG5lc3M7XG4gICAgcmV0dXJuIGBicmlnaHRuZXNzKCR7KGJyaWdodG5lc3MgKyAyNDUpIC8gNX0lKWA7XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlQ29sb3Ioc3RhdGVPYmo6IEhhc3NFbnRpdHkgfCBMaWdodEVudGl0eSk6IHN0cmluZyB7XG4gICAgaWYgKCFzdGF0ZU9iai5hdHRyaWJ1dGVzLmhzX2NvbG9yKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgY29uc3QgW2h1ZSwgc2F0XSA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuaHNfY29sb3I7XG4gICAgaWYgKHNhdCA8PSAxMCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIHJldHVybiBgaHNsKCR7aHVlfSwgMTAwJSwgJHsxMDAgLSBzYXQgLyAyfSUpYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVRhcCgpIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKCkge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIHRydWUpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktZW50aXR5LWJ1dHRvbi1jYXJkXCI6IEh1aUVudGl0eUJ1dHRvbkNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUNhcmRFbGVtZW50IH0gZnJvbSBcIi4uL2NvbW1vbi9jcmVhdGUtY2FyZC1lbGVtZW50XCI7XG5pbXBvcnQgeyBwcm9jZXNzQ29uZmlnRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZENvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2xvdmVsYWNlXCI7XG5pbXBvcnQgeyBFbnRpdHlGaWx0ZXJFbnRpdHlDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eUZpbHRlckNhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgZXZhbHVhdGVGaWx0ZXIgfSBmcm9tIFwiLi4vY29tbW9uL2V2YWx1YXRlLWZpbHRlclwiO1xuXG5jbGFzcyBFbnRpdHlGaWx0ZXJDYXJkIGV4dGVuZHMgSFRNTEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgaXNQYW5lbD86IGJvb2xlYW47XG4gIHByaXZhdGUgX2VsZW1lbnQ/OiBMb3ZlbGFjZUNhcmQ7XG4gIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUZpbHRlckNhcmRDb25maWc7XG4gIHByaXZhdGUgX2NvbmZpZ0VudGl0aWVzPzogRW50aXR5RmlsdGVyRW50aXR5Q29uZmlnW107XG4gIHByaXZhdGUgX2Jhc2VDYXJkQ29uZmlnPzogTG92ZWxhY2VDYXJkQ29uZmlnO1xuICBwcml2YXRlIF9oYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHJpdmF0ZSBfb2xkRW50aXRpZXM/OiBFbnRpdHlGaWx0ZXJFbnRpdHlDb25maWdbXTtcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudCA/IHRoaXMuX2VsZW1lbnQuZ2V0Q2FyZFNpemUoKSA6IDE7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5RmlsdGVyQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0aWVzIHx8ICFBcnJheS5pc0FycmF5KGNvbmZpZy5lbnRpdGllcykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImVudGl0aWVzIG11c3QgYmUgc3BlY2lmaWVkLlwiKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhKGNvbmZpZy5zdGF0ZV9maWx0ZXIgJiYgQXJyYXkuaXNBcnJheShjb25maWcuc3RhdGVfZmlsdGVyKSkgJiZcbiAgICAgICFjb25maWcuZW50aXRpZXMuZXZlcnkoXG4gICAgICAgIChlbnRpdHkpID0+XG4gICAgICAgICAgdHlwZW9mIGVudGl0eSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgIGVudGl0eS5zdGF0ZV9maWx0ZXIgJiZcbiAgICAgICAgICBBcnJheS5pc0FycmF5KGVudGl0eS5zdGF0ZV9maWx0ZXIpXG4gICAgICApXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3QgZmlsdGVyIGNvbmZpZy5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2Jhc2VDYXJkQ29uZmlnID0ge1xuICAgICAgdHlwZTogXCJlbnRpdGllc1wiLFxuICAgICAgZW50aXRpZXM6IFtdLFxuICAgICAgLi4udGhpcy5fY29uZmlnLmNhcmQsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmxhc3RDaGlsZCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLmxhc3RDaGlsZCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNldCBoYXNzKGhhc3M6IEhvbWVBc3Npc3RhbnQpIHtcbiAgICBpZiAoIWhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5oYXZlRW50aXRpZXNDaGFuZ2VkKGhhc3MpKSB7XG4gICAgICB0aGlzLl9oYXNzID0gaGFzcztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9oYXNzID0gaGFzcztcblxuICAgIGlmICghdGhpcy5fY29uZmlnRW50aXRpZXMpIHtcbiAgICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gcHJvY2Vzc0NvbmZpZ0VudGl0aWVzKHRoaXMuX2NvbmZpZy5lbnRpdGllcyk7XG4gICAgfVxuXG4gICAgY29uc3QgZW50aXRpZXNMaXN0ID0gdGhpcy5fY29uZmlnRW50aXRpZXMuZmlsdGVyKChlbnRpdHlDb25mKSA9PiB7XG4gICAgICBjb25zdCBzdGF0ZU9iaiA9IGhhc3Muc3RhdGVzW2VudGl0eUNvbmYuZW50aXR5XTtcblxuICAgICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnRpdHlDb25mLnN0YXRlX2ZpbHRlcikge1xuICAgICAgICBmb3IgKGNvbnN0IGZpbHRlciBvZiBlbnRpdHlDb25mLnN0YXRlX2ZpbHRlcikge1xuICAgICAgICAgIGlmIChldmFsdWF0ZUZpbHRlcihzdGF0ZU9iaiwgZmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGZpbHRlciBvZiB0aGlzLl9jb25maWchLnN0YXRlX2ZpbHRlcikge1xuICAgICAgICAgIGlmIChldmFsdWF0ZUZpbHRlcihzdGF0ZU9iaiwgZmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGlmIChlbnRpdGllc0xpc3QubGVuZ3RoID09PSAwICYmIHRoaXMuX2NvbmZpZy5zaG93X2VtcHR5ID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50KCk7XG5cbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZWxlbWVudC50YWdOYW1lICE9PSBcIkhVSS1FUlJPUi1DQVJEXCIpIHtcbiAgICAgIGNvbnN0IGlzU2FtZSA9XG4gICAgICAgIHRoaXMuX29sZEVudGl0aWVzICYmXG4gICAgICAgIGVudGl0aWVzTGlzdC5sZW5ndGggPT09IHRoaXMuX29sZEVudGl0aWVzLmxlbmd0aCAmJlxuICAgICAgICBlbnRpdGllc0xpc3QuZXZlcnkoKGVudGl0eSwgaWR4KSA9PiBlbnRpdHkgPT09IHRoaXMuX29sZEVudGl0aWVzIVtpZHhdKTtcblxuICAgICAgaWYgKCFpc1NhbWUpIHtcbiAgICAgICAgdGhpcy5fb2xkRW50aXRpZXMgPSBlbnRpdGllc0xpc3Q7XG4gICAgICAgIGVsZW1lbnQuc2V0Q29uZmlnKHsgLi4udGhpcy5fYmFzZUNhcmRDb25maWchLCBlbnRpdGllczogZW50aXRpZXNMaXN0IH0pO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50LmlzUGFuZWwgPSB0aGlzLmlzUGFuZWw7XG4gICAgICBlbGVtZW50Lmhhc3MgPSBoYXNzO1xuICAgIH1cblxuICAgIC8vIEF0dGFjaCBlbGVtZW50IGlmIGl0IGhhcyBuZXZlciBiZWVuIGF0dGFjaGVkLlxuICAgIGlmICghdGhpcy5sYXN0Q2hpbGQpIHtcbiAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9XG5cbiAgcHJpdmF0ZSBoYXZlRW50aXRpZXNDaGFuZ2VkKGhhc3M6IEhvbWVBc3Npc3RhbnQpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuX2hhc3MpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fY29uZmlnRW50aXRpZXMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgY29uZmlnIG9mIHRoaXMuX2NvbmZpZ0VudGl0aWVzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2hhc3Muc3RhdGVzW2NvbmZpZy5lbnRpdHldICE9PSBoYXNzLnN0YXRlc1tjb25maWcuZW50aXR5XSB8fFxuICAgICAgICB0aGlzLl9oYXNzLmxvY2FsaXplICE9PSBoYXNzLmxvY2FsaXplXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2FyZEVsZW1lbnQoKTogTG92ZWxhY2VDYXJkIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuX2VsZW1lbnQgJiYgdGhpcy5fY29uZmlnKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZEVsZW1lbnQodGhpcy5fYmFzZUNhcmRDb25maWchKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktZW50aXR5LWZpbHRlci1jYXJkXCIsIEVudGl0eUZpbHRlckNhcmQpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCB7IExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkQ29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVycm9yQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFcnJvckNhcmRFbGVtZW50ID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZXJyb3ItY2FyZFwiKTtcbiAgZWwuc2V0Q29uZmlnKGNvbmZpZyk7XG4gIHJldHVybiBlbDtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFcnJvckNhcmRDb25maWcgPSAoZXJyb3IsIG9yaWdDb25maWcpID0+ICh7XG4gIHR5cGU6IFwiZXJyb3JcIixcbiAgZXJyb3IsXG4gIG9yaWdDb25maWcsXG59KTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZXJyb3ItY2FyZFwiKVxuZXhwb3J0IGNsYXNzIEh1aUVycm9yQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRXJyb3JDYXJkQ29uZmlnO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiA0O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVycm9yQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5fY29uZmlnLmVycm9yfVxuICAgICAgPHByZT4ke3RoaXMuX3RvU3RyKHRoaXMuX2NvbmZpZy5vcmlnQ29uZmlnKX08L3ByZT5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VmNTM1MDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIHVzZXItc2VsZWN0OiB0ZXh0O1xuICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX3RvU3RyKGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29uZmlnLCBudWxsLCAyKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWVycm9yLWNhcmRcIjogSHVpRXJyb3JDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgaXNWYWxpZEVudGl0eUlkIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvdmFsaWRfZW50aXR5X2lkXCI7XG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IEdhdWdlQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBzZXZlcml0eU1hcCA9IHtcbiAgcmVkOiBcInZhcigtLWxhYmVsLWJhZGdlLXJlZClcIixcbiAgZ3JlZW46IFwidmFyKC0tbGFiZWwtYmFkZ2UtZ3JlZW4pXCIsXG4gIHllbGxvdzogXCJ2YXIoLS1sYWJlbC1iYWRnZS15ZWxsb3cpXCIsXG4gIG5vcm1hbDogXCJ2YXIoLS1sYWJlbC1iYWRnZS1ibHVlKVwiLFxufTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZ2F1Z2UtY2FyZFwiKVxuY2xhc3MgSHVpR2F1Z2VDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1nYXVnZS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktZ2F1Z2UtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZ2F1Z2UtY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfYmFzZVVuaXQgPSBcIjUwcHhcIjtcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogR2F1Z2VDYXJkQ29uZmlnO1xuXG4gIHByaXZhdGUgX3VwZGF0ZWQ/OiBib29sZWFuO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAyO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEdhdWdlQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNhcmQgY29uZmlndXJhdGlvblwiKTtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkRW50aXR5SWQoY29uZmlnLmVudGl0eSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgRW50aXR5XCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSB7IG1pbjogMCwgbWF4OiAxMDAsIHRoZW1lOiBcImRlZmF1bHRcIiwgLi4uY29uZmlnIH07XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9zZXRCYXNlVW5pdCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlID0gTnVtYmVyKHN0YXRlT2JqLnN0YXRlKTtcblxuICAgIGlmIChpc05hTihzdGF0ZSkpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vbl9udW1lcmljXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVDbGlja31cIlxuICAgICAgICBzdHlsZT0ke3N0eWxlTWFwKHtcbiAgICAgICAgICBcIi0tYmFzZS11bml0XCI6IHRoaXMuX2Jhc2VVbml0LFxuICAgICAgICB9KX1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJnYXVnZS1hXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhdWdlLWJcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImdhdWdlLWNcIlxuICAgICAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogYHJvdGF0ZSgke3RoaXMuX3RyYW5zbGF0ZVR1cm4oc3RhdGUpfXR1cm4pYCxcbiAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IHRoaXMuX2NvbXB1dGVTZXZlcml0eShzdGF0ZSksXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdhdWdlLWRhdGFcIj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJwZXJjZW50XCI+XG4gICAgICAgICAgICAgICR7c3RhdGVPYmouc3RhdGV9XG4gICAgICAgICAgICAgICR7dGhpcy5fY29uZmlnLnVuaXQgfHxcbiAgICAgICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLnVuaXRfb2ZfbWVhc3VyZW1lbnQgfHxcbiAgICAgICAgICAgICAgICBcIlwifVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwibmFtZVwiPlxuICAgICAgICAgICAgICAke3RoaXMuX2NvbmZpZy5uYW1lIHx8IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKCk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZWQgPSB0cnVlO1xuICAgIHRoaXMuX3NldEJhc2VVbml0KCk7XG4gICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiaW5pdFwiKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFvbGRIYXNzIHx8IG9sZEhhc3MudGhlbWVzICE9PSB0aGlzLmhhc3MudGhlbWVzKSB7XG4gICAgICBhcHBseVRoZW1lc09uRWxlbWVudCh0aGlzLCB0aGlzLmhhc3MudGhlbWVzLCB0aGlzLl9jb25maWcudGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3NldEJhc2VVbml0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCB8fCAhdGhpcy5fdXBkYXRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBiYXNlVW5pdCA9IHRoaXMuX2NvbXB1dGVCYXNlVW5pdCgpO1xuICAgIGlmIChiYXNlVW5pdCAhPT0gXCIwcHhcIikge1xuICAgICAgdGhpcy5fYmFzZVVuaXQgPSBiYXNlVW5pdDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlU2V2ZXJpdHkobnVtYmVyVmFsdWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3Qgc2VjdGlvbnMgPSB0aGlzLl9jb25maWchLnNldmVyaXR5O1xuXG4gICAgaWYgKCFzZWN0aW9ucykge1xuICAgICAgcmV0dXJuIHNldmVyaXR5TWFwLm5vcm1hbDtcbiAgICB9XG5cbiAgICBjb25zdCBzZWN0aW9uc0FycmF5ID0gT2JqZWN0LmtleXMoc2VjdGlvbnMpO1xuICAgIGNvbnN0IHNvcnRhYmxlID0gc2VjdGlvbnNBcnJheS5tYXAoKHNldmVyaXR5KSA9PiBbXG4gICAgICBzZXZlcml0eSxcbiAgICAgIHNlY3Rpb25zW3NldmVyaXR5XSxcbiAgICBdKTtcblxuICAgIGZvciAoY29uc3Qgc2V2ZXJpdHkgb2Ygc29ydGFibGUpIHtcbiAgICAgIGlmIChzZXZlcml0eU1hcFtzZXZlcml0eVswXV0gPT0gbnVsbCB8fCBpc05hTihzZXZlcml0eVsxXSkpIHtcbiAgICAgICAgcmV0dXJuIHNldmVyaXR5TWFwLm5vcm1hbDtcbiAgICAgIH1cbiAgICB9XG4gICAgc29ydGFibGUuc29ydCgoYSwgYikgPT4gYVsxXSAtIGJbMV0pO1xuXG4gICAgaWYgKG51bWJlclZhbHVlID49IHNvcnRhYmxlWzBdWzFdICYmIG51bWJlclZhbHVlIDwgc29ydGFibGVbMV1bMV0pIHtcbiAgICAgIHJldHVybiBzZXZlcml0eU1hcFtzb3J0YWJsZVswXVswXV07XG4gICAgfVxuICAgIGlmIChudW1iZXJWYWx1ZSA+PSBzb3J0YWJsZVsxXVsxXSAmJiBudW1iZXJWYWx1ZSA8IHNvcnRhYmxlWzJdWzFdKSB7XG4gICAgICByZXR1cm4gc2V2ZXJpdHlNYXBbc29ydGFibGVbMV1bMF1dO1xuICAgIH1cbiAgICBpZiAobnVtYmVyVmFsdWUgPj0gc29ydGFibGVbMl1bMV0pIHtcbiAgICAgIHJldHVybiBzZXZlcml0eU1hcFtzb3J0YWJsZVsyXVswXV07XG4gICAgfVxuICAgIHJldHVybiBzZXZlcml0eU1hcC5ub3JtYWw7XG4gIH1cblxuICBwcml2YXRlIF90cmFuc2xhdGVUdXJuKHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMuX2NvbmZpZyE7XG4gICAgY29uc3QgbWF4VHVyblZhbHVlID0gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiEpLCBtYXghKTtcbiAgICByZXR1cm4gKDUgKiAobWF4VHVyblZhbHVlIC0gbWluISkpIC8gKG1heCEgLSBtaW4hKSAvIDEwO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZUJhc2VVbml0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50V2lkdGggPCAyMDAgPyB0aGlzLmNsaWVudFdpZHRoIC8gNSArIFwicHhcIiA6IFwiNTBweFwiO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgZmlyZUV2ZW50KHRoaXMsIFwiaGFzcy1tb3JlLWluZm9cIiwgeyBlbnRpdHlJZDogdGhpcy5fY29uZmlnIS5lbnRpdHkgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAzKTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgd2lkdGg6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDQpO1xuICAgICAgICBoZWlnaHQ6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDIpO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMS41KTtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgfVxuICAgICAgLmdhdWdlLWEge1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICAgIHdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA0KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKTtcbiAgICAgICAgdG9wOiAwJTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMi41KSBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyLjUpXG4gICAgICAgICAgMHB4IDBweDtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1iIHtcbiAgICAgICAgei1pbmRleDogMztcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYXBlci1jYXJkLWJhY2tncm91bmQtY29sb3IpO1xuICAgICAgICB3aWR0aDogY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMi41KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAxLjI1KTtcbiAgICAgICAgdG9wOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAwLjc1KTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDAuNzUpO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDIuNSkgY2FsYyh2YXIoLS1iYXNlLXVuaXQpICogMi41KVxuICAgICAgICAgIDBweCAwcHg7XG4gICAgICB9XG4gICAgICAuZ2F1Z2UtYyB7XG4gICAgICAgIHotaW5kZXg6IDI7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGFiZWwtYmFkZ2UtYmx1ZSk7XG4gICAgICAgIHdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA0KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKTtcbiAgICAgICAgdG9wOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMHB4IDBweCBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyKVxuICAgICAgICAgIGNhbGModmFyKC0tYmFzZS11bml0KSAqIDIpO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgdG9wO1xuICAgICAgfVxuICAgICAgLmluaXQgLmdhdWdlLWMge1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMS4zcyBlYXNlLWluLW91dDtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1kYXRhIHtcbiAgICAgICAgei1pbmRleDogNDtcbiAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktdGV4dC1jb2xvcik7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAwLjMpO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiA0KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAyLjEpO1xuICAgICAgICB0b3A6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDEuMik7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICB9XG4gICAgICAuaW5pdCAuZ2F1Z2UtZGF0YSB7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAxcyBlYXNlLW91dDtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1kYXRhICNwZXJjZW50IHtcbiAgICAgICAgZm9udC1zaXplOiBjYWxjKHZhcigtLWJhc2UtdW5pdCkgKiAwLjU1KTtcbiAgICAgIH1cbiAgICAgIC5nYXVnZS1kYXRhICNuYW1lIHtcbiAgICAgICAgcGFkZGluZy10b3A6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDAuMTUpO1xuICAgICAgICBmb250LXNpemU6IGNhbGModmFyKC0tYmFzZS11bml0KSAqIDAuMyk7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWdhdWdlLWNhcmRcIjogSHVpR2F1Z2VDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuXG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcbmltcG9ydCByZWxhdGl2ZVRpbWUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9yZWxhdGl2ZV90aW1lXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvZW50aXR5L3N0YXRlLWJhZGdlXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZy1lbGVtZW50XCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IEdsYW5jZUNhcmRDb25maWcsIEdsYW5jZUNvbmZpZ0VudGl0eSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWdsYW5jZS1jYXJkXCIpXG5leHBvcnQgY2xhc3MgSHVpR2xhbmNlQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktZ2xhbmNlLWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS1nbGFuY2UtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktZ2xhbmNlLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXRpZXM6IFtdIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogR2xhbmNlQ2FyZENvbmZpZztcblxuICBwcml2YXRlIF9jb25maWdFbnRpdGllcz86IEdsYW5jZUNvbmZpZ0VudGl0eVtdO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAoXG4gICAgICAodGhpcy5fY29uZmlnIS50aXRsZSA/IDEgOiAwKSArXG4gICAgICBNYXRoLmNlaWwodGhpcy5fY29uZmlnRW50aXRpZXMhLmxlbmd0aCAvIDUpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBHbGFuY2VDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgdGhpcy5fY29uZmlnID0geyB0aGVtZTogXCJkZWZhdWx0XCIsIC4uLmNvbmZpZyB9O1xuICAgIGNvbnN0IGVudGl0aWVzID0gcHJvY2Vzc0NvbmZpZ0VudGl0aWVzPEdsYW5jZUNvbmZpZ0VudGl0eT4oY29uZmlnLmVudGl0aWVzKTtcblxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIChlbnRpdHkudGFwX2FjdGlvbiAmJlxuICAgICAgICAgIGVudGl0eS50YXBfYWN0aW9uLmFjdGlvbiA9PT0gXCJjYWxsLXNlcnZpY2VcIiAmJlxuICAgICAgICAgICFlbnRpdHkudGFwX2FjdGlvbi5zZXJ2aWNlKSB8fFxuICAgICAgICAoZW50aXR5LmhvbGRfYWN0aW9uICYmXG4gICAgICAgICAgZW50aXR5LmhvbGRfYWN0aW9uLmFjdGlvbiA9PT0gXCJjYWxsLXNlcnZpY2VcIiAmJlxuICAgICAgICAgICFlbnRpdHkuaG9sZF9hY3Rpb24uc2VydmljZSlcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgXCJzZXJ2aWNlXCIgd2hlbiB0YXBfYWN0aW9uIG9yIGhvbGRfYWN0aW9uIGlzIGNhbGwtc2VydmljZSdcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjb2x1bW5zID0gY29uZmlnLmNvbHVtbnMgfHwgTWF0aC5taW4oY29uZmlnLmVudGl0aWVzLmxlbmd0aCwgNSk7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZ2xhbmNlLWNvbHVtbi13aWR0aFwiLCBgJHsxMDAgLyBjb2x1bW5zfSVgKTtcblxuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gZW50aXRpZXM7XG5cbiAgICBpZiAodGhpcy5oYXNzKSB7XG4gICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9jb25maWdcIikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuICAgIGlmIChvbGRIYXNzICYmIHRoaXMuX2NvbmZpZ0VudGl0aWVzKSB7XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLl9jb25maWdFbnRpdGllcykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgb2xkSGFzcy5zdGF0ZXNbZW50aXR5LmVudGl0eV0gIT09IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eS5lbnRpdHldXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIGNvbnN0IHsgdGl0bGUgfSA9IHRoaXMuX2NvbmZpZztcblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQgLmhlYWRlcj1cIiR7dGl0bGV9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCIke2NsYXNzTWFwKHsgZW50aXRpZXM6IHRydWUsIFwibm8taGVhZGVyXCI6ICF0aXRsZSB9KX1cIj5cbiAgICAgICAgICAke3RoaXMuX2NvbmZpZ0VudGl0aWVzIS5tYXAoKGVudGl0eUNvbmYpID0+XG4gICAgICAgICAgICB0aGlzLnJlbmRlckVudGl0eShlbnRpdHlDb25mKVxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wZXJ0aWVzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcbiAgICBpZiAoIW9sZEhhc3MgfHwgb2xkSGFzcy50aGVtZXMgIT09IHRoaXMuaGFzcy50aGVtZXMpIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KHRoaXMsIHRoaXMuaGFzcy50aGVtZXMsIHRoaXMuX2NvbmZpZy50aGVtZSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmVudGl0aWVzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgcGFkZGluZzogMCAxNnB4IDRweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuICAgICAgLmVudGl0aWVzLm5vLWhlYWRlciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgICAgfVxuICAgICAgLmVudGl0eSB7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIHBhZGRpbmc6IDAgNHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgIHdpZHRoOiB2YXIoLS1nbGFuY2UtY29sdW1uLXdpZHRoLCAyMCUpO1xuICAgICAgfVxuICAgICAgLmVudGl0eSBkaXYge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIH1cbiAgICAgIC5uYW1lIHtcbiAgICAgICAgbWluLWhlaWdodDogdmFyKC0tcGFwZXItZm9udC1ib2R5MV8tX2xpbmUtaGVpZ2h0LCAyMHB4KTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLWJhZGdlIHtcbiAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnRpdHkoZW50aXR5Q29uZik6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eUNvbmYuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmctZWxlbWVudFxuICAgICAgICAgIGxhYmVsPSR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgZW50aXR5Q29uZi5lbnRpdHlcbiAgICAgICAgICApfVxuICAgICAgICA+PC9odWktd2FybmluZy1lbGVtZW50PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJlbnRpdHlcIlxuICAgICAgICAuZW50aXR5Q29uZj1cIiR7ZW50aXR5Q29uZn1cIlxuICAgICAgICBAaGEtY2xpY2s9XCIke3RoaXMuX2hhbmRsZVRhcH1cIlxuICAgICAgICBAaGEtaG9sZD1cIiR7dGhpcy5faGFuZGxlSG9sZH1cIlxuICAgICAgICAubG9uZ1ByZXNzPVwiJHtsb25nUHJlc3MoKX1cIlxuICAgICAgPlxuICAgICAgICAke3RoaXMuX2NvbmZpZyEuc2hvd19uYW1lICE9PSBmYWxzZVxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5hbWVcIj5cbiAgICAgICAgICAgICAgICAke1wibmFtZVwiIGluIGVudGl0eUNvbmZcbiAgICAgICAgICAgICAgICAgID8gZW50aXR5Q29uZi5uYW1lXG4gICAgICAgICAgICAgICAgICA6IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICR7dGhpcy5fY29uZmlnIS5zaG93X2ljb24gIT09IGZhbHNlXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8c3RhdGUtYmFkZ2VcbiAgICAgICAgICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgICAgICAgICAuc3RhdGVPYmo9JHtzdGF0ZU9ian1cbiAgICAgICAgICAgICAgICAub3ZlcnJpZGVJY29uPSR7ZW50aXR5Q29uZi5pY29ufVxuICAgICAgICAgICAgICAgIC5vdmVycmlkZUltYWdlPSR7ZW50aXR5Q29uZi5pbWFnZX1cbiAgICAgICAgICAgICAgPjwvc3RhdGUtYmFkZ2U+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBcIlwifVxuICAgICAgICAke3RoaXMuX2NvbmZpZyEuc2hvd19zdGF0ZSAhPT0gZmFsc2VcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgJHtlbnRpdHlDb25mLnNob3dfbGFzdF9jaGFuZ2VkXG4gICAgICAgICAgICAgICAgICA/IHJlbGF0aXZlVGltZShcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShzdGF0ZU9iai5sYXN0X2NoYW5nZWQpLFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcyEubG9jYWxpemVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgOiBjb21wdXRlU3RhdGVEaXNwbGF5KFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcyEubG9jYWxpemUsXG4gICAgICAgICAgICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sYW5ndWFnZVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVGFwKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29uZmlnID0gKGV2LmN1cnJlbnRUYXJnZXQgYXMgYW55KS5lbnRpdHlDb25mIGFzIEdsYW5jZUNvbmZpZ0VudGl0eTtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCBjb25maWcsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhvbGQoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWcgPSAoZXYuY3VycmVudFRhcmdldCBhcyBhbnkpLmVudGl0eUNvbmYgYXMgR2xhbmNlQ29uZmlnRW50aXR5O1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIGNvbmZpZywgdHJ1ZSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1nbGFuY2UtY2FyZFwiOiBIdWlHbGFuY2VDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSBcIkBwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnXCI7XG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gXCJAcG9seW1lci9wb2x5bWVyL3BvbHltZXItZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvc3RhdGUtaGlzdG9yeS1jaGFydHNcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2RhdGEvaGEtc3RhdGUtaGlzdG9yeS1kYXRhXCI7XG5cbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcblxuY2xhc3MgSHVpSGlzdG9yeUdyYXBoQ2FyZCBleHRlbmRzIFBvbHltZXJFbGVtZW50IHtcbiAgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKSB7XG4gICAgYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLWhpc3RvcnktZ3JhcGgtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLWhpc3RvcnktZ3JhcGgtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktaGlzdG9yeS1ncmFwaC1jYXJkLWVkaXRvclwiKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRTdHViQ29uZmlnKCkge1xuICAgIHJldHVybiB7IGVudGl0aWVzOiBbXSB9O1xuICB9XG5cbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgLmNvbnRlbnQge1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgW2hlYWRlcl0gLmNvbnRlbnQge1xuICAgICAgICAgIHBhZGRpbmctdG9wOiAwO1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuXG4gICAgICA8aGEtY2FyZCBoZWFkZXIkPVwiW1tfY29uZmlnLnRpdGxlXV1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgICAgICA8aGEtc3RhdGUtaGlzdG9yeS1kYXRhXG4gICAgICAgICAgICBoYXNzPVwiW1toYXNzXV1cIlxuICAgICAgICAgICAgZmlsdGVyLXR5cGU9XCJyZWNlbnQtZW50aXR5XCJcbiAgICAgICAgICAgIGVudGl0eS1pZD1cIltbX2VudGl0aWVzXV1cIlxuICAgICAgICAgICAgZGF0YT1cInt7X3N0YXRlSGlzdG9yeX19XCJcbiAgICAgICAgICAgIGlzLWxvYWRpbmc9XCJ7e19zdGF0ZUhpc3RvcnlMb2FkaW5nfX1cIlxuICAgICAgICAgICAgY2FjaGUtY29uZmlnPVwiW1tfY2FjaGVDb25maWddXVwiXG4gICAgICAgICAgPjwvaGEtc3RhdGUtaGlzdG9yeS1kYXRhPlxuICAgICAgICAgIDxzdGF0ZS1oaXN0b3J5LWNoYXJ0c1xuICAgICAgICAgICAgaGFzcz1cIltbaGFzc11dXCJcbiAgICAgICAgICAgIGhpc3RvcnktZGF0YT1cIltbX3N0YXRlSGlzdG9yeV1dXCJcbiAgICAgICAgICAgIGlzLWxvYWRpbmctZGF0YT1cIltbX3N0YXRlSGlzdG9yeUxvYWRpbmddXVwiXG4gICAgICAgICAgICBuYW1lcz1cIltbX25hbWVzXV1cIlxuICAgICAgICAgICAgdXAtdG8tbm93XG4gICAgICAgICAgICBuby1zaW5nbGVcbiAgICAgICAgICA+PC9zdGF0ZS1oaXN0b3J5LWNoYXJ0cz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzczogT2JqZWN0LFxuICAgICAgX2NvbmZpZzogT2JqZWN0LFxuICAgICAgX25hbWVzOiBPYmplY3QsXG4gICAgICBfZW50aXRpZXM6IEFycmF5LFxuXG4gICAgICBfc3RhdGVIaXN0b3J5OiBPYmplY3QsXG4gICAgICBfc3RhdGVIaXN0b3J5TG9hZGluZzogQm9vbGVhbixcbiAgICAgIF9jYWNoZUNvbmZpZzogT2JqZWN0LFxuICAgIH07XG4gIH1cblxuICBnZXRDYXJkU2l6ZSgpIHtcbiAgICByZXR1cm4gNDtcbiAgfVxuXG4gIHNldENvbmZpZyhjb25maWcpIHtcbiAgICBjb25zdCBlbnRpdGllcyA9IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpO1xuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuXG4gICAgY29uc3QgX2VudGl0aWVzID0gW107XG4gICAgY29uc3QgX25hbWVzID0ge307XG4gICAgZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICBfZW50aXRpZXMucHVzaChlbnRpdHkuZW50aXR5KTtcbiAgICAgIGlmIChlbnRpdHkubmFtZSkge1xuICAgICAgICBfbmFtZXNbZW50aXR5LmVudGl0eV0gPSBlbnRpdHkubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc2V0UHJvcGVydGllcyh7XG4gICAgICBfY2FjaGVDb25maWc6IHtcbiAgICAgICAgY2FjaGVLZXk6IF9lbnRpdGllcy5qb2luKCksXG4gICAgICAgIGhvdXJzVG9TaG93OiBjb25maWcuaG91cnNfdG9fc2hvdyB8fCAyNCxcbiAgICAgICAgcmVmcmVzaDogY29uZmlnLnJlZnJlc2hfaW50ZXJ2YWwgfHwgMCxcbiAgICAgIH0sXG4gICAgICBfZW50aXRpZXMsXG4gICAgICBfbmFtZXMsXG4gICAgfSk7XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwiaHVpLWhpc3RvcnktZ3JhcGgtY2FyZFwiLCBIdWlIaXN0b3J5R3JhcGhDYXJkKTtcbiIsImltcG9ydCB7IGh0bWwsIFRlbXBsYXRlUmVzdWx0IH0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCB7IGNvbXB1dGVDYXJkU2l6ZSB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS1jYXJkLXNpemVcIjtcbmltcG9ydCB7IEh1aVN0YWNrQ2FyZCB9IGZyb20gXCIuL2h1aS1zdGFjay1jYXJkXCI7XG5cbmNsYXNzIEh1aUhvcml6b250YWxTdGFja0NhcmQgZXh0ZW5kcyBIdWlTdGFja0NhcmQge1xuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICBsZXQgdG90YWxTaXplID0gMDtcblxuICAgIGlmICh0aGlzLl9jYXJkcykge1xuICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuX2NhcmRzKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gY29tcHV0ZUNhcmRTaXplKGVsZW1lbnQpO1xuICAgICAgICB0b3RhbFNpemUgPSBlbGVtZW50U2l6ZSA+IHRvdGFsU2l6ZSA/IGVsZW1lbnRTaXplIDogdG90YWxTaXplO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b3RhbFNpemU7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyU3R5bGUoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPHN0eWxlPlxuICAgICAgICAjcm9vdCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgfVxuICAgICAgICAjcm9vdCA+ICoge1xuICAgICAgICAgIGZsZXg6IDEgMSAwO1xuICAgICAgICAgIG1hcmdpbjogMCA0cHg7XG4gICAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICB9XG4gICAgICAgICNyb290ID4gKjpmaXJzdC1jaGlsZCB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgI3Jvb3QgPiAqOmxhc3QtY2hpbGQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaG9yaXR6b250YWwtc3RhY2stY2FyZFwiOiBIdWlIb3Jpem9udGFsU3RhY2tDYXJkO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1ob3Jpem9udGFsLXN0YWNrLWNhcmRcIiwgSHVpSG9yaXpvbnRhbFN0YWNrQ2FyZCk7XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jYXJkXCI7XG5cbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuaW1wb3J0IHsgSWZyYW1lQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWlmcmFtZS1jYXJkXCIpXG5leHBvcnQgY2xhc3MgSHVpSWZyYW1lQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktaWZyYW1lLWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS1pZnJhbWUtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktaWZyYW1lLWNhcmQtZWRpdG9yXCIpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7IHVybDogXCJodHRwczovL3d3dy5ob21lLWFzc2lzdGFudC5pb1wiLCBhc3BlY3RfcmF0aW86IFwiNTAlXCIgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHByb3RlY3RlZCBfY29uZmlnPzogSWZyYW1lQ2FyZENvbmZpZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIDM7XG4gICAgfVxuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gdGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpb1xuICAgICAgPyBOdW1iZXIodGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpby5yZXBsYWNlKFwiJVwiLCBcIlwiKSlcbiAgICAgIDogNTA7XG4gICAgcmV0dXJuIDEgKyBhc3BlY3RSYXRpbyAvIDI1O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IElmcmFtZUNhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy51cmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVSTCByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3QgYXNwZWN0UmF0aW8gPSB0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvIHx8IFwiNTAlXCI7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIC5oZWFkZXI9XCIke3RoaXMuX2NvbmZpZy50aXRsZX1cIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGlkPVwicm9vdFwiXG4gICAgICAgICAgc3R5bGU9XCIke3N0eWxlTWFwKHtcbiAgICAgICAgICAgIFwicGFkZGluZy10b3BcIjogYXNwZWN0UmF0aW8sXG4gICAgICAgICAgfSl9XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxpZnJhbWUgc3JjPVwiJHt0aGlzLl9jb25maWcudXJsfVwiPjwvaWZyYW1lPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGEtY2FyZCB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgICNyb290IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgaWZyYW1lIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaWZyYW1lLWNhcmRcIjogSHVpSWZyYW1lQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRXJyb3JDYXJkQ29uZmlnIH0gZnJvbSBcIi4vaHVpLWVycm9yLWNhcmRcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMZWdhY3lXcmFwcGVyQ2FyZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IodGFnLCBkb21haW4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3RhZyA9IHRhZy50b1VwcGVyQ2FzZSgpO1xuICAgIHRoaXMuX2RvbWFpbiA9IGRvbWFpbjtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldENhcmRTaXplKCkge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgc2V0Q29uZmlnKGNvbmZpZykge1xuICAgIGlmICghY29uZmlnLmVudGl0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZW50aXR5IHNwZWNpZmllZFwiKTtcbiAgICB9XG5cbiAgICBpZiAoY29tcHV0ZURvbWFpbihjb25maWcuZW50aXR5KSAhPT0gdGhpcy5fZG9tYWluKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBTcGVjaWZpZWQgZW50aXR5IG5lZWRzIHRvIGJlIG9mIGRvbWFpbiAke3RoaXMuX2RvbWFpbn0uYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBzZXQgaGFzcyhoYXNzKSB7XG4gICAgY29uc3QgZW50aXR5SWQgPSB0aGlzLl9jb25maWcuZW50aXR5O1xuXG4gICAgaWYgKGVudGl0eUlkIGluIGhhc3Muc3RhdGVzKSB7XG4gICAgICB0aGlzLl9lbnN1cmVFbGVtZW50KHRoaXMuX3RhZyk7XG4gICAgICB0aGlzLmxhc3RDaGlsZC5oYXNzID0gaGFzcztcbiAgICAgIHRoaXMubGFzdENoaWxkLnN0YXRlT2JqID0gaGFzcy5zdGF0ZXNbZW50aXR5SWRdO1xuICAgICAgdGhpcy5sYXN0Q2hpbGQuY29uZmlnID0gdGhpcy5fY29uZmlnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbnN1cmVFbGVtZW50KFwiSFVJLUVSUk9SLUNBUkRcIik7XG4gICAgICB0aGlzLmxhc3RDaGlsZC5zZXRDb25maWcoXG4gICAgICAgIGNyZWF0ZUVycm9yQ2FyZENvbmZpZyhcbiAgICAgICAgICBgTm8gc3RhdGUgYXZhaWxhYmxlIGZvciAke2VudGl0eUlkfWAsXG4gICAgICAgICAgdGhpcy5fY29uZmlnXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgX2Vuc3VyZUVsZW1lbnQodGFnKSB7XG4gICAgaWYgKHRoaXMubGFzdENoaWxkICYmIHRoaXMubGFzdENoaWxkLnRhZ05hbWUgPT09IHRhZykgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMubGFzdENoaWxkKSB7XG4gICAgICB0aGlzLnJlbW92ZUNoaWxkKHRoaXMubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICB0aGlzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKSk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgcHJvcGVydHksXG4gIGN1c3RvbUVsZW1lbnQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaWNvbi1idXR0b24vcGFwZXItaWNvbi1idXR0b25cIjtcbmltcG9ydCBcIkB0aG9tYXNsb3Zlbi9yb3VuZC1zbGlkZXJcIjtcblxuaW1wb3J0IHsgc3RhdGVJY29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3RhdGVfaWNvblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IGFwcGx5VGhlbWVzT25FbGVtZW50IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2FwcGx5X3RoZW1lc19vbl9lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS11bmF2YWlsYWJsZVwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCwgTGlnaHRFbnRpdHkgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyB0b2dnbGVFbnRpdHkgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS90b2dnbGUtZW50aXR5XCI7XG5pbXBvcnQgeyBMaWdodENhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgc3VwcG9ydHNGZWF0dXJlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3VwcG9ydHMtZmVhdHVyZVwiO1xuaW1wb3J0IHsgU1VQUE9SVF9CUklHSFRORVNTIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbGlnaHRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktbGlnaHQtY2FyZFwiKVxuZXhwb3J0IGNsYXNzIEh1aUxpZ2h0Q2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktbGlnaHQtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLWxpZ2h0LWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLWxpZ2h0LWNhcmQtZWRpdG9yXCIpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7IGVudGl0eTogXCJcIiB9O1xuICB9XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IExpZ2h0Q2FyZENvbmZpZztcblxuICBwcml2YXRlIF9icmlnaHRuZXNzVGltb3V0PzogbnVtYmVyO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAyO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IExpZ2h0Q2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0eSB8fCBjb25maWcuZW50aXR5LnNwbGl0KFwiLlwiKVswXSAhPT0gXCJsaWdodFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTcGVjaWZ5IGFuIGVudGl0eSBmcm9tIHdpdGhpbiB0aGUgbGlnaHQgZG9tYWluLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSB7IHRoZW1lOiBcImRlZmF1bHRcIiwgLi4uY29uZmlnIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldIGFzIExpZ2h0RW50aXR5O1xuICAgIGNvbnN0IGJyaWdodG5lc3MgPVxuICAgICAgTWF0aC5yb3VuZCgoc3RhdGVPYmouYXR0cmlidXRlcy5icmlnaHRuZXNzIC8gMjU0KSAqIDEwMCkgfHwgMDtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5yZW5kZXJTdHlsZSgpfVxuICAgICAgPGhhLWNhcmQ+XG4gICAgICAgICR7c3RhdGVPYmouc3RhdGUgPT09IFwidW5hdmFpbGFibGVcIlxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGh1aS11bmF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIC50ZXh0PVwiJHt0aGlzLmhhc3MubG9jYWxpemUoXCJzdGF0ZS5kZWZhdWx0LnVuYXZhaWxhYmxlXCIpfVwiXG4gICAgICAgICAgICAgID48L2h1aS11bmF2YWlsYWJsZT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgIDxwYXBlci1pY29uLWJ1dHRvblxuICAgICAgICAgIGljb249XCJoYXNzOmRvdHMtdmVydGljYWxcIlxuICAgICAgICAgIGNsYXNzPVwibW9yZS1pbmZvXCJcbiAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2hhbmRsZU1vcmVJbmZvfVwiXG4gICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuXG4gICAgICAgIDxkaXYgaWQ9XCJsaWdodFwiPlxuICAgICAgICAgICR7c3VwcG9ydHNGZWF0dXJlKHN0YXRlT2JqLCBTVVBQT1JUX0JSSUdIVE5FU1MpXG4gICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgPHJvdW5kLXNsaWRlclxuICAgICAgICAgICAgICAgICAgbWluPVwiMVwiXG4gICAgICAgICAgICAgICAgICAudmFsdWU9JHticmlnaHRuZXNzfVxuICAgICAgICAgICAgICAgICAgQHZhbHVlLWNoYW5naW5nPSR7dGhpcy5fZHJhZ0V2ZW50fVxuICAgICAgICAgICAgICAgICAgQHZhbHVlLWNoYW5nZWQ9JHt0aGlzLl9zZXRCcmlnaHRuZXNzfVxuICAgICAgICAgICAgICAgID48L3JvdW5kLXNsaWRlcj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICBjbGFzcz1cImxpZ2h0LWljb25cIlxuICAgICAgICAgICAgZGF0YS1zdGF0ZT1cIiR7c3RhdGVPYmouc3RhdGV9XCJcbiAgICAgICAgICAgIC5pY29uPVwiJHt0aGlzLl9jb25maWcuaWNvbiB8fCBzdGF0ZUljb24oc3RhdGVPYmopfVwiXG4gICAgICAgICAgICBzdHlsZT1cIiR7c3R5bGVNYXAoe1xuICAgICAgICAgICAgICBmaWx0ZXI6IHRoaXMuX2NvbXB1dGVCcmlnaHRuZXNzKHN0YXRlT2JqKSxcbiAgICAgICAgICAgICAgY29sb3I6IHRoaXMuX2NvbXB1dGVDb2xvcihzdGF0ZU9iaiksXG4gICAgICAgICAgICB9KX1cIlxuICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGlkPVwidG9vbHRpcFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJicmlnaHRuZXNzXCIgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCI+XG4gICAgICAgICAgICAke2JyaWdodG5lc3N9ICVcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZVwiPlxuICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wcyk7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuICAgIGlmICghb2xkSGFzcyB8fCBvbGRIYXNzLnRoZW1lcyAhPT0gdGhpcy5oYXNzLnRoZW1lcykge1xuICAgICAgYXBwbHlUaGVtZXNPbkVsZW1lbnQodGhpcywgdGhpcy5oYXNzLnRoZW1lcywgdGhpcy5fY29uZmlnLnRoZW1lKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0eWxlKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgOmhvc3Qge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB9XG5cbiAgICAgICAgaGEtY2FyZCB7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgLS1uYW1lLWZvbnQtc2l6ZTogMS4ycmVtO1xuICAgICAgICAgIC0tYnJpZ2h0bmVzcy1mb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgICAtLXJhaWwtYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgfVxuXG4gICAgICAgICN0b29sdGlwIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgICNsaWdodCB7XG4gICAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmctdG9wOiAwO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAzMnB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBoZWlnaHQ6IDE2MHB4O1xuICAgICAgICAgIHdpZHRoOiAxNjBweDtcbiAgICAgICAgfVxuICAgICAgICAjbGlnaHQgcm91bmQtc2xpZGVyIHtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgLS1yb3VuZC1zbGlkZXItcGF0aC1jb2xvcjogdmFyKC0tZGlzYWJsZWQtdGV4dC1jb2xvcik7XG4gICAgICAgICAgLS1yb3VuZC1zbGlkZXItYmFyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgICB6LWluZGV4OiAyMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5saWdodC1pY29uIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgd2lkdGg6IDc2cHg7XG4gICAgICAgICAgaGVpZ2h0OiA3NnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pdGVtLWljb24tY29sb3IsICM0NDczOWUpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB6LWluZGV4OiAyMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5saWdodC1pY29uW2RhdGEtc3RhdGU9XCJvblwiXSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWl0ZW0taWNvbi1hY3RpdmUtY29sb3IsICNmZGQ4MzUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLmxpZ2h0LWljb25bZGF0YS1zdGF0ZT1cInVuYXZhaWxhYmxlXCJdIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tc3RhdGUtaWNvbi11bmF2YWlsYWJsZS1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICAubmFtZSB7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHRvcDogMTYwcHg7XG4gICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tbmFtZS1mb250LXNpemUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJyaWdodG5lc3Mge1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tYnJpZ2h0bmVzcy1mb250LXNpemUpO1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICB0b3A6IDEzNXB4O1xuICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlKTtcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlLWluLW91dDtcbiAgICAgICAgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlLWluLW91dDtcbiAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlLWluLW91dDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuc2hvd19icmlnaHRuZXNzIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLm1vcmUtaW5mbyB7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgei1pbmRleDogMjU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfZHJhZ0V2ZW50KGU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcIi5icmlnaHRuZXNzXCIpIS5pbm5lckhUTUwgPVxuICAgICAgZS5kZXRhaWwudmFsdWUgKyBcIiVcIjtcbiAgICB0aGlzLl9zaG93QnJpZ2h0bmVzcygpO1xuICAgIHRoaXMuX2hpZGVCcmlnaHRuZXNzKCk7XG4gIH1cblxuICBwcml2YXRlIF9zaG93QnJpZ2h0bmVzcygpOiB2b2lkIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fYnJpZ2h0bmVzc1RpbW91dCk7XG4gICAgdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwiLmJyaWdodG5lc3NcIikhLmNsYXNzTGlzdC5hZGQoXG4gICAgICBcInNob3dfYnJpZ2h0bmVzc1wiXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hpZGVCcmlnaHRuZXNzKCk6IHZvaWQge1xuICAgIHRoaXMuX2JyaWdodG5lc3NUaW1vdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnNoYWRvd1Jvb3QhLnF1ZXJ5U2VsZWN0b3IoXCIuYnJpZ2h0bmVzc1wiKSEuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgICAgXCJzaG93X2JyaWdodG5lc3NcIlxuICAgICAgKTtcbiAgICB9LCA1MDApO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0QnJpZ2h0bmVzcyhlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwibGlnaHRcIiwgXCJ0dXJuX29uXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICBicmlnaHRuZXNzX3BjdDogZS5kZXRhaWwudmFsdWUsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlQnJpZ2h0bmVzcyhzdGF0ZU9iajogTGlnaHRFbnRpdHkpOiBzdHJpbmcge1xuICAgIGlmICghc3RhdGVPYmouYXR0cmlidXRlcy5icmlnaHRuZXNzKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgY29uc3QgYnJpZ2h0bmVzcyA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuYnJpZ2h0bmVzcztcbiAgICByZXR1cm4gYGJyaWdodG5lc3MoJHsoYnJpZ2h0bmVzcyArIDI0NSkgLyA1fSUpYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbXB1dGVDb2xvcihzdGF0ZU9iajogTGlnaHRFbnRpdHkpOiBzdHJpbmcge1xuICAgIGlmICghc3RhdGVPYmouYXR0cmlidXRlcy5oc19jb2xvcikge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGNvbnN0IFtodWUsIHNhdF0gPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmhzX2NvbG9yO1xuICAgIGlmIChzYXQgPD0gMTApIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gYGhzbCgke2h1ZX0sIDEwMCUsICR7MTAwIC0gc2F0IC8gMn0lKWA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVUYXAoKSB7XG4gICAgdG9nZ2xlRW50aXR5KHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEuZW50aXR5ISk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVNb3JlSW5mbygpIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJoYXNzLW1vcmUtaW5mb1wiLCB7XG4gICAgICBlbnRpdHlJZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1saWdodC1jYXJkXCI6IEh1aUxpZ2h0Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaWNvbi1idXR0b24vcGFwZXItaWNvbi1idXR0b25cIjtcbmltcG9ydCB7IExheWVyLCBNYXJrZXIsIENpcmNsZSwgTWFwIH0gZnJvbSBcImxlYWZsZXRcIjtcbmltcG9ydCB7XG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjc3MsXG4gIGh0bWwsXG4gIHByb3BlcnR5LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgQ1NTUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vbWFwL2hhLWVudGl0eS1tYXJrZXJcIjtcblxuaW1wb3J0IHtcbiAgc2V0dXBMZWFmbGV0TWFwLFxuICBjcmVhdGVUaWxlTGF5ZXIsXG4gIExlYWZsZXRNb2R1bGVUeXBlLFxufSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9zZXR1cC1sZWFmbGV0LW1hcFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kb21haW5cIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL2RlYm91bmNlXCI7XG5pbXBvcnQgcGFyc2VBc3BlY3RSYXRpbyBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvXCI7XG5pbXBvcnQgeyBjb21wdXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9kb21haW5cIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IE1hcENhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktbWFwLWNhcmRcIilcbmNsYXNzIEh1aU1hcENhcmQgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VDYXJkIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRDb25maWdFbGVtZW50KCkge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1tYXAtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLW1hcC1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1tYXAtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKSB7XG4gICAgcmV0dXJuIHsgZW50aXRpZXM6IFtdIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgcmVmbGVjdDogdHJ1ZSB9KVxuICBwdWJsaWMgaXNQYW5lbCA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSgpXG4gIHByaXZhdGUgX2NvbmZpZz86IE1hcENhcmRDb25maWc7XG4gIHByaXZhdGUgX2NvbmZpZ0VudGl0aWVzPzogRW50aXR5Q29uZmlnW107XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICBwcml2YXRlIExlYWZsZXQ/OiBMZWFmbGV0TW9kdWxlVHlwZTtcbiAgcHJpdmF0ZSBfbGVhZmxldE1hcD86IE1hcDtcbiAgLy8gQHRzLWlnbm9yZVxuICBwcml2YXRlIF9yZXNpemVPYnNlcnZlcj86IFJlc2l6ZU9ic2VydmVyO1xuICBwcml2YXRlIF9kZWJvdW5jZWRSZXNpemVMaXN0ZW5lciA9IGRlYm91bmNlKFxuICAgICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fbGVhZmxldE1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9sZWFmbGV0TWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgfSxcbiAgICAxMDAsXG4gICAgZmFsc2VcbiAgKTtcbiAgcHJpdmF0ZSBfbWFwSXRlbXM6IEFycmF5PE1hcmtlciB8IENpcmNsZT4gPSBbXTtcbiAgcHJpdmF0ZSBfY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IE1hcENhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgaW4gY2FyZCBjb25maWd1cmF0aW9uLlwiKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5lbnRpdGllcyAmJiAhY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRWl0aGVyIGVudGl0aWVzIG9yIGdlb19sb2NhdGlvbl9zb3VyY2VzIG11c3QgYmUgZGVmaW5lZFwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmVudGl0aWVzICYmICFBcnJheS5pc0FycmF5KGNvbmZpZy5lbnRpdGllcykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVudGl0aWVzIG5lZWQgdG8gYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcyAmJlxuICAgICAgIUFycmF5LmlzQXJyYXkoY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VvX2xvY2F0aW9uX3NvdXJjZXMgbmVlZHMgdG8gYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gY29uZmlnLmVudGl0aWVzXG4gICAgICA/IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpXG4gICAgICA6IFtdO1xuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiAzO1xuICAgIH1cbiAgICBjb25zdCByYXRpbyA9IHBhcnNlQXNwZWN0UmF0aW8odGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpbyk7XG4gICAgY29uc3QgYXIgPVxuICAgICAgcmF0aW8gJiYgcmF0aW8udyA+IDAgJiYgcmF0aW8uaCA+IDBcbiAgICAgICAgPyBgJHsoKDEwMCAqIHJhdGlvLmgpIC8gcmF0aW8udykudG9GaXhlZCgyKX1gXG4gICAgICAgIDogXCIxMDBcIjtcbiAgICByZXR1cm4gMSArIE1hdGguZmxvb3IoTnVtYmVyKGFyKSAvIDI1KSB8fCAzO1xuICB9XG5cbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLmxvYWRNYXAoKTtcbiAgICAgIHRoaXMuX2F0dGFjaE9ic2VydmVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5fbGVhZmxldE1hcCkge1xuICAgICAgdGhpcy5fbGVhZmxldE1hcC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2xlYWZsZXRNYXAgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLkxlYWZsZXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Jlc2l6ZU9ic2VydmVyKSB7XG4gICAgICB0aGlzLl9yZXNpemVPYnNlcnZlci51bm9ic2VydmUodGhpcy5fbWFwRWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLl9kZWJvdW5jZWRSZXNpemVMaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIGlkPVwiY2FyZFwiIC5oZWFkZXI9JHt0aGlzLl9jb25maWcudGl0bGV9PlxuICAgICAgICA8ZGl2IGlkPVwicm9vdFwiPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGlkPVwibWFwXCJcbiAgICAgICAgICAgIGNsYXNzPSR7Y2xhc3NNYXAoeyBkYXJrOiB0aGlzLl9jb25maWcuZGFya19tb2RlID09PSB0cnVlIH0pfVxuICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgIEBjbGljaz0ke3RoaXMuX2ZpdE1hcH1cbiAgICAgICAgICAgIGljb249XCJoYXNzOmltYWdlLWZpbHRlci1jZW50ZXItZm9jdXNcIlxuICAgICAgICAgICAgdGl0bGU9XCJSZXNldCBmb2N1c1wiXG4gICAgICAgICAgPjwvcGFwZXItaWNvbi1idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wcykge1xuICAgIGlmICghY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikgfHwgY2hhbmdlZFByb3BzLnNpemUgPiAxKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcblxuICAgIGlmICghb2xkSGFzcyB8fCAhdGhpcy5fY29uZmlnRW50aXRpZXMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGFueSBzdGF0ZSBoYXMgY2hhbmdlZFxuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMuX2NvbmZpZ0VudGl0aWVzKSB7XG4gICAgICBpZiAob2xkSGFzcy5zdGF0ZXNbZW50aXR5LmVudGl0eV0gIT09IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eS5lbnRpdHldKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIHRoaXMubG9hZE1hcCgpO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKTtcblxuICAgIGlmICghdGhpcy5fY29uZmlnIHx8IHRoaXMuaXNQYW5lbCB8fCAhcm9vdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuX2F0dGFjaE9ic2VydmVyKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmF0aW8gPSBwYXJzZUFzcGVjdFJhdGlvKHRoaXMuX2NvbmZpZy5hc3BlY3RfcmF0aW8pO1xuXG4gICAgcm9vdC5zdHlsZS5wYWRkaW5nQm90dG9tID1cbiAgICAgIHJhdGlvICYmIHJhdGlvLncgPiAwICYmIHJhdGlvLmggPiAwXG4gICAgICAgID8gYCR7KCgxMDAgKiByYXRpby5oKSAvIHJhdGlvLncpLnRvRml4ZWQoMil9JWBcbiAgICAgICAgOiAocm9vdC5zdHlsZS5wYWRkaW5nQm90dG9tID0gXCIxMDAlXCIpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiaGFzc1wiKSkge1xuICAgICAgdGhpcy5fZHJhd0VudGl0aWVzKCk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpICYmXG4gICAgICBjaGFuZ2VkUHJvcHMuZ2V0KFwiX2NvbmZpZ1wiKSAhPT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICB0aGlzLnVwZGF0ZU1hcChjaGFuZ2VkUHJvcHMuZ2V0KFwiX2NvbmZpZ1wiKSBhcyBNYXBDYXJkQ29uZmlnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBfbWFwRWwoKTogSFRNTERpdkVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwibWFwXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkTWFwKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFt0aGlzLl9sZWFmbGV0TWFwLCB0aGlzLkxlYWZsZXRdID0gYXdhaXQgc2V0dXBMZWFmbGV0TWFwKFxuICAgICAgdGhpcy5fbWFwRWwsXG4gICAgICB0aGlzLl9jb25maWcgIT09IHVuZGVmaW5lZCA/IHRoaXMuX2NvbmZpZy5kYXJrX21vZGUgPT09IHRydWUgOiBmYWxzZVxuICAgICk7XG4gICAgdGhpcy5fZHJhd0VudGl0aWVzKCk7XG4gICAgdGhpcy5fbGVhZmxldE1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuICAgIHRoaXMuX2ZpdE1hcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVNYXAob2xkQ29uZmlnOiBNYXBDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5fbGVhZmxldE1hcDtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLl9jb25maWc7XG4gICAgY29uc3QgTGVhZmxldCA9IHRoaXMuTGVhZmxldDtcbiAgICBpZiAoIW1hcCB8fCAhY29uZmlnIHx8ICFMZWFmbGV0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb25maWcuZGFya19tb2RlICE9PSBvbGRDb25maWcuZGFya19tb2RlKSB7XG4gICAgICBjcmVhdGVUaWxlTGF5ZXIoTGVhZmxldCwgY29uZmlnLmRhcmtfbW9kZSA9PT0gdHJ1ZSkuYWRkVG8obWFwKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY29uZmlnLmVudGl0aWVzICE9PSBvbGRDb25maWcuZW50aXRpZXMgfHxcbiAgICAgIGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcyAhPT0gb2xkQ29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzXG4gICAgKSB7XG4gICAgICB0aGlzLl9kcmF3RW50aXRpZXMoKTtcbiAgICB9XG4gICAgbWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgdGhpcy5fZml0TWFwKCk7XG4gIH1cblxuICBwcml2YXRlIF9maXRNYXAoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9sZWFmbGV0TWFwIHx8ICF0aGlzLkxlYWZsZXQgfHwgIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHpvb20gPSB0aGlzLl9jb25maWcuZGVmYXVsdF96b29tO1xuICAgIGlmICh0aGlzLl9tYXBJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2xlYWZsZXRNYXAuc2V0VmlldyhcbiAgICAgICAgbmV3IHRoaXMuTGVhZmxldC5MYXRMbmcoXG4gICAgICAgICAgdGhpcy5oYXNzLmNvbmZpZy5sYXRpdHVkZSxcbiAgICAgICAgICB0aGlzLmhhc3MuY29uZmlnLmxvbmdpdHVkZVxuICAgICAgICApLFxuICAgICAgICB6b29tIHx8IDE0XG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuTGVhZmxldC5sYXRMbmdCb3VuZHMoXG4gICAgICB0aGlzLl9tYXBJdGVtcyA/IHRoaXMuX21hcEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5nZXRMYXRMbmcoKSkgOiBbXVxuICAgICk7XG4gICAgdGhpcy5fbGVhZmxldE1hcC5maXRCb3VuZHMoYm91bmRzLnBhZCgwLjUpKTtcblxuICAgIGlmICh6b29tICYmIHRoaXMuX2xlYWZsZXRNYXAuZ2V0Wm9vbSgpID4gem9vbSkge1xuICAgICAgdGhpcy5fbGVhZmxldE1hcC5zZXRab29tKHpvb20pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2RyYXdFbnRpdGllcygpOiB2b2lkIHtcbiAgICBjb25zdCBoYXNzID0gdGhpcy5oYXNzO1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuX2xlYWZsZXRNYXA7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5fY29uZmlnO1xuICAgIGNvbnN0IExlYWZsZXQgPSB0aGlzLkxlYWZsZXQ7XG4gICAgaWYgKCFoYXNzIHx8ICFtYXAgfHwgIWNvbmZpZyB8fCAhTGVhZmxldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9tYXBJdGVtcykge1xuICAgICAgdGhpcy5fbWFwSXRlbXMuZm9yRWFjaCgobWFya2VyKSA9PiBtYXJrZXIucmVtb3ZlKCkpO1xuICAgIH1cbiAgICBjb25zdCBtYXBJdGVtczogTGF5ZXJbXSA9ICh0aGlzLl9tYXBJdGVtcyA9IFtdKTtcblxuICAgIGNvbnN0IGFsbEVudGl0aWVzID0gdGhpcy5fY29uZmlnRW50aXRpZXMhLmNvbmNhdCgpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHZpc2libGUgZ2VvIGxvY2F0aW9uIHNvdXJjZXNcbiAgICBpZiAoY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICBjb25zdCBpbmNsdWRlc0FsbCA9IGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcy5pbmNsdWRlcyhcImFsbFwiKTtcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgT2JqZWN0LmtleXMoaGFzcy5zdGF0ZXMpKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlT2JqID0gaGFzcy5zdGF0ZXNbZW50aXR5SWRdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY29tcHV0ZURvbWFpbihlbnRpdHlJZCkgPT09IFwiZ2VvX2xvY2F0aW9uXCIgJiZcbiAgICAgICAgICAoaW5jbHVkZXNBbGwgfHxcbiAgICAgICAgICAgIGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcy5pbmNsdWRlcyhzdGF0ZU9iai5hdHRyaWJ1dGVzLnNvdXJjZSkpXG4gICAgICAgICkge1xuICAgICAgICAgIGFsbEVudGl0aWVzLnB1c2goeyBlbnRpdHk6IGVudGl0eUlkIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgYWxsRW50aXRpZXMpIHtcbiAgICAgIGNvbnN0IGVudGl0eUlkID0gZW50aXR5LmVudGl0eTtcbiAgICAgIGNvbnN0IHN0YXRlT2JqID0gaGFzcy5zdGF0ZXNbZW50aXR5SWRdO1xuICAgICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRpdGxlID0gY29tcHV0ZVN0YXRlTmFtZShzdGF0ZU9iaik7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGxhdGl0dWRlLFxuICAgICAgICBsb25naXR1ZGUsXG4gICAgICAgIHBhc3NpdmUsXG4gICAgICAgIGljb24sXG4gICAgICAgIHJhZGl1cyxcbiAgICAgICAgZW50aXR5X3BpY3R1cmU6IGVudGl0eVBpY3R1cmUsXG4gICAgICAgIGdwc19hY2N1cmFjeTogZ3BzQWNjdXJhY3ksXG4gICAgICB9ID0gc3RhdGVPYmouYXR0cmlidXRlcztcblxuICAgICAgaWYgKCEobGF0aXR1ZGUgJiYgbG9uZ2l0dWRlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXB1dGVTdGF0ZURvbWFpbihzdGF0ZU9iaikgPT09IFwiem9uZVwiKSB7XG4gICAgICAgIC8vIERSQVcgWk9ORVxuICAgICAgICBpZiAocGFzc2l2ZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3JlYXRlIG1hcmtlciB3aXRoIHRoZSBpY29uXG4gICAgICAgIG1hcEl0ZW1zLnB1c2goXG4gICAgICAgICAgTGVhZmxldC5tYXJrZXIoW2xhdGl0dWRlLCBsb25naXR1ZGVdLCB7XG4gICAgICAgICAgICBpY29uOiBMZWFmbGV0LmRpdkljb24oe1xuICAgICAgICAgICAgICBodG1sOiBpY29uID8gYDxoYS1pY29uIGljb249XCIke2ljb259XCI+PC9oYS1pY29uPmAgOiB0aXRsZSxcbiAgICAgICAgICAgICAgaWNvblNpemU6IFsyNCwgMjRdLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGludGVyYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gY3JlYXRlIGNpcmNsZSBhcm91bmQgaXRcbiAgICAgICAgbWFwSXRlbXMucHVzaChcbiAgICAgICAgICBMZWFmbGV0LmNpcmNsZShbbGF0aXR1ZGUsIGxvbmdpdHVkZV0sIHtcbiAgICAgICAgICAgIGludGVyYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbG9yOiBcIiNGRjk4MDBcIixcbiAgICAgICAgICAgIHJhZGl1cyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBEUkFXIEVOVElUWVxuICAgICAgLy8gY3JlYXRlIGljb25cbiAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSB0aXRsZVxuICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgIC5tYXAoKHBhcnQpID0+IHBhcnRbMF0pXG4gICAgICAgIC5qb2luKFwiXCIpXG4gICAgICAgIC5zdWJzdHIoMCwgMyk7XG5cbiAgICAgIC8vIGNyZWF0ZSBtYXJrZXQgd2l0aCB0aGUgaWNvblxuICAgICAgbWFwSXRlbXMucHVzaChcbiAgICAgICAgTGVhZmxldC5tYXJrZXIoW2xhdGl0dWRlLCBsb25naXR1ZGVdLCB7XG4gICAgICAgICAgaWNvbjogTGVhZmxldC5kaXZJY29uKHtcbiAgICAgICAgICAgIC8vIExlYWZsZXQgY2xvbmVzIHRoaXMgZWxlbWVudCBiZWZvcmUgYWRkaW5nIGl0IHRvIHRoZSBtYXAuIFRoaXMgbWVzc2VzIHVwXG4gICAgICAgICAgICAvLyBvdXIgUG9seW1lciBvYmplY3QgYW5kIHdlIGNhbid0IHBhc3MgZGF0YSB0aHJvdWdoLiBUaHVzIHdlIGhhY2sgbGlrZSB0aGlzLlxuICAgICAgICAgICAgaHRtbDogYFxuICAgICAgICAgICAgICA8aGEtZW50aXR5LW1hcmtlclxuICAgICAgICAgICAgICAgIGVudGl0eS1pZD1cIiR7ZW50aXR5SWR9XCJcbiAgICAgICAgICAgICAgICBlbnRpdHktbmFtZT1cIiR7ZW50aXR5TmFtZX1cIlxuICAgICAgICAgICAgICAgIGVudGl0eS1waWN0dXJlPVwiJHtlbnRpdHlQaWN0dXJlIHx8IFwiXCJ9XCJcbiAgICAgICAgICAgICAgPjwvaGEtZW50aXR5LW1hcmtlcj5cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICBpY29uU2l6ZTogWzQ4LCA0OF0sXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiXCIsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGl0bGU6IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgLy8gY3JlYXRlIGNpcmNsZSBhcm91bmQgaWYgZW50aXR5IGhhcyBhY2N1cmFjeVxuICAgICAgaWYgKGdwc0FjY3VyYWN5KSB7XG4gICAgICAgIG1hcEl0ZW1zLnB1c2goXG4gICAgICAgICAgTGVhZmxldC5jaXJjbGUoW2xhdGl0dWRlLCBsb25naXR1ZGVdLCB7XG4gICAgICAgICAgICBpbnRlcmFjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBjb2xvcjogXCIjMDI4OEQxXCIsXG4gICAgICAgICAgICByYWRpdXM6IGdwc0FjY3VyYWN5LFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbWFwSXRlbXMuZm9yRWFjaCgobWFya2VyKSA9PiBtYXAuYWRkTGF5ZXIobWFya2VyKSk7XG4gIH1cblxuICBwcml2YXRlIF9hdHRhY2hPYnNlcnZlcigpOiB2b2lkIHtcbiAgICAvLyBPYnNlcnZlIGNoYW5nZXMgdG8gbWFwIHNpemUgYW5kIGludmFsaWRhdGUgdG8gcHJldmVudCBicm9rZW4gcmVuZGVyaW5nXG4gICAgLy8gVXNlcyBSZXNpemVPYnNlcnZlciBpbiBDaHJvbWUsIG90aGVyd2lzZSB3aW5kb3cgcmVzaXplIGV2ZW50XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKHR5cGVvZiBSZXNpemVPYnNlcnZlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0aGlzLl9yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PlxuICAgICAgICB0aGlzLl9kZWJvdW5jZWRSZXNpemVMaXN0ZW5lcigpXG4gICAgICApO1xuICAgICAgdGhpcy5fcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLl9tYXBFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuX2RlYm91bmNlZFJlc2l6ZUxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdChbaXNwYW5lbF0pIGhhLWNhcmQge1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAvKipcbiAgICAgICAqIEluIHBhbmVsIG1vZGUgd2Ugd2FudCBhIGZ1bGwgaGVpZ2h0IG1hcC4gU2luY2UgcGFyZW50ICN2aWV3XG4gICAgICAgKiBvbmx5IHNldHMgbWluLWhlaWdodCwgd2UgbmVlZCBhYnNvbHV0ZSBwb3NpdGlvbmluZyBoZXJlXG4gICAgICAgKi9cbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB9XG5cbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICAjbWFwIHtcbiAgICAgICAgei1pbmRleDogMDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogI2ZhZmFmODtcbiAgICAgIH1cblxuICAgICAgI21hcC5kYXJrIHtcbiAgICAgICAgYmFja2dyb3VuZDogIzA5MDkwOTtcbiAgICAgIH1cblxuICAgICAgcGFwZXItaWNvbi1idXR0b24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogNzVweDtcbiAgICAgICAgbGVmdDogN3B4O1xuICAgICAgfVxuXG4gICAgICAjcm9vdCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2lzcGFuZWxdKSAjcm9vdCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktbWFwLWNhcmRcIjogSHVpTWFwQ2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuaW1wb3J0IHsgVW5zdWJzY3JpYmVGdW5jIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtbWFya2Rvd25cIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IE1hcmtkb3duQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBzdWJzY3JpYmVSZW5kZXJUZW1wbGF0ZSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3dzLXRlbXBsYXRlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1tYXJrZG93bi1jYXJkXCIpXG5leHBvcnQgY2xhc3MgSHVpTWFya2Rvd25DYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1tYXJrZG93bi1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktbWFya2Rvd24tY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktbWFya2Rvd24tY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudDpcbiAgICAgICAgXCJUaGUgKipNYXJrZG93bioqIGNhcmQgYWxsb3dzIHlvdSB0byB3cml0ZSBhbnkgdGV4dC4gWW91IGNhbiBzdHlsZSBpdCAqKmJvbGQqKiwgKml0YWxpY2l6ZWQqLCB+c3RyaWtldGhyb3VnaH4gZXRjLiBZb3UgY2FuIGRvIGltYWdlcywgbGlua3MsIGFuZCBtb3JlLlxcblxcbkZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSB0aGUgW01hcmtkb3duIENoZWF0c2hlZXRdKGh0dHBzOi8vY29tbW9ubWFyay5vcmcvaGVscCkuXCIsXG4gICAgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IE1hcmtkb3duQ2FyZENvbmZpZztcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29udGVudD86IHN0cmluZyA9IFwiXCI7XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX3Vuc3ViUmVuZGVyVGVtcGxhdGU/OiBQcm9taXNlPFVuc3Vic2NyaWJlRnVuYz47XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2hhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jb25maWcgPT09IHVuZGVmaW5lZFxuICAgICAgPyAzXG4gICAgICA6IHRoaXMuX2NvbmZpZy5jYXJkX3NpemUgPT09IHVuZGVmaW5lZFxuICAgICAgPyB0aGlzLl9jb25maWcuY29udGVudC5zcGxpdChcIlxcblwiKS5sZW5ndGggKyAodGhpcy5fY29uZmlnLnRpdGxlID8gMSA6IDApXG4gICAgICA6IHRoaXMuX2NvbmZpZy5jYXJkX3NpemU7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogTWFya2Rvd25DYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcuY29udGVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiBDb250ZW50IFJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9kaXNjb25uZWN0KCkudGhlbigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5faGFzcykge1xuICAgICAgICB0aGlzLl9jb25uZWN0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5fZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgcHVibGljIHNldCBoYXNzKGhhc3MpIHtcbiAgICB0aGlzLl9oYXNzID0gaGFzcztcbiAgICB0aGlzLl9jb25uZWN0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZCAuaGVhZGVyPVwiJHt0aGlzLl9jb25maWcudGl0bGV9XCI+XG4gICAgICAgIDxoYS1tYXJrZG93blxuICAgICAgICAgIGNsYXNzPVwibWFya2Rvd24gJHtjbGFzc01hcCh7XG4gICAgICAgICAgICBcIm5vLWhlYWRlclwiOiAhdGhpcy5fY29uZmlnLnRpdGxlLFxuICAgICAgICAgIH0pfVwiXG4gICAgICAgICAgLmNvbnRlbnQ9XCIke3RoaXMuX2NvbnRlbnR9XCJcbiAgICAgICAgPjwvaGEtbWFya2Rvd24+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2Nvbm5lY3QoKSB7XG4gICAgaWYgKCF0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlICYmIHRoaXMuX2hhc3MgJiYgdGhpcy5fY29uZmlnKSB7XG4gICAgICB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlID0gc3Vic2NyaWJlUmVuZGVyVGVtcGxhdGUoXG4gICAgICAgIHRoaXMuX2hhc3MuY29ubmVjdGlvbixcbiAgICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NvbnRlbnQgPSByZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy5fY29uZmlnLmNvbnRlbnQsXG4gICAgICAgICAgZW50aXR5X2lkczogdGhpcy5fY29uZmlnLmVudGl0eV9pZCxcbiAgICAgICAgICB2YXJpYWJsZXM6IHsgY29uZmlnOiB0aGlzLl9jb25maWcgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHRoaXMuX3Vuc3ViUmVuZGVyVGVtcGxhdGUuY2F0Y2goKCkgPT4ge1xuICAgICAgICB0aGlzLl9jb250ZW50ID0gdGhpcy5fY29uZmlnIS5jb250ZW50O1xuICAgICAgICB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZGlzY29ubmVjdCgpIHtcbiAgICBpZiAodGhpcy5fdW5zdWJSZW5kZXJUZW1wbGF0ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdW5zdWIgPSBhd2FpdCB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlO1xuICAgICAgICB0aGlzLl91bnN1YlJlbmRlclRlbXBsYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICBhd2FpdCB1bnN1YigpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZS5jb2RlID09PSBcIm5vdF9mb3VuZFwiKSB7XG4gICAgICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHRoZSBjb25uZWN0aW9uIHdhcyBwcm9iYWJseSBhbHJlYWR5IGNsb3NlZC4gSWdub3JlLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1tYXJrZG93biB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBwYWRkaW5nOiAwIDE2cHggMTZweDtcbiAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBpbml0aWFsO1xuICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBpbml0aWFsO1xuICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBpbml0aWFsO1xuICAgICAgfVxuICAgICAgLm1hcmtkb3duLm5vLWhlYWRlciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgICAgfVxuICAgICAgaGEtbWFya2Rvd24gPiAqOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgIH1cbiAgICAgIGhhLW1hcmtkb3duID4gKjpsYXN0LWNoaWxkIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgIH1cbiAgICAgIGhhLW1hcmtkb3duIGEge1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICB9XG4gICAgICBoYS1tYXJrZG93biBpbWcge1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLW1hcmtkb3duLWNhcmRcIjogSHVpTWFya2Rvd25DYXJkO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuLi8uLi8uLi9jYXJkcy9oYS1tZWRpYV9wbGF5ZXItY2FyZFwiO1xuXG5pbXBvcnQgTGVnYWN5V3JhcHBlckNhcmQgZnJvbSBcIi4vaHVpLWxlZ2FjeS13cmFwcGVyLWNhcmRcIjtcblxuY2xhc3MgSHVpTWVkaWFDb250cm9sQ2FyZCBleHRlbmRzIExlZ2FjeVdyYXBwZXJDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKSB7XG4gICAgYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLW1lZGlhLWNvbnRyb2wtY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLW1lZGlhLWNvbnRyb2wtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktbWVkaWEtY29udHJvbC1jYXJkLWVkaXRvclwiKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRTdHViQ29uZmlnKCkge1xuICAgIHJldHVybiB7IGVudGl0eTogXCJcIiB9O1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJoYS1tZWRpYV9wbGF5ZXItY2FyZFwiLCBcIm1lZGlhX3BsYXllclwiKTtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktbWVkaWEtY29udHJvbC1jYXJkXCIsIEh1aU1lZGlhQ29udHJvbENhcmQpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuXG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQsIExvdmVsYWNlQ2FyZEVkaXRvciB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IGxvbmdQcmVzcyB9IGZyb20gXCIuLi9jb21tb24vZGlyZWN0aXZlcy9sb25nLXByZXNzLWRpcmVjdGl2ZVwiO1xuaW1wb3J0IHsgUGljdHVyZUNhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1waWN0dXJlLWNhcmRcIilcbmV4cG9ydCBjbGFzcyBIdWlQaWN0dXJlQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktcGljdHVyZS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktcGljdHVyZS1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1waWN0dXJlLWNhcmQtZWRpdG9yXCIpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICBpbWFnZTpcbiAgICAgICAgXCJodHRwczovL3d3dy5ob21lLWFzc2lzdGFudC5pby9pbWFnZXMvbWVyY2hhbmRpc2Uvc2hpcnQtZnJvbnRwYWdlLnBuZ1wiLFxuICAgICAgdGFwX2FjdGlvbjogeyBhY3Rpb246IFwibm9uZVwiIH0sXG4gICAgICBob2xkX2FjdGlvbjogeyBhY3Rpb246IFwibm9uZVwiIH0sXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcm90ZWN0ZWQgX2NvbmZpZz86IFBpY3R1cmVDYXJkQ29uZmlnO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFBpY3R1cmVDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5pbWFnZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnaW1hZ2UnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgQGhhLWhvbGQ9XCIke3RoaXMuX2hhbmRsZUhvbGR9XCJcbiAgICAgICAgLmxvbmdQcmVzcz1cIiR7bG9uZ1ByZXNzKCl9XCJcbiAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHtcbiAgICAgICAgICBjbGlja2FibGU6IEJvb2xlYW4oXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGFwX2FjdGlvbiB8fCB0aGlzLl9jb25maWcuaG9sZF9hY3Rpb25cbiAgICAgICAgICApLFxuICAgICAgICB9KX1cIlxuICAgICAgPlxuICAgICAgICA8aW1nIHNyYz1cIiR7dGhpcy5oYXNzLmhhc3NVcmwodGhpcy5fY29uZmlnLmltYWdlKX1cIiAvPlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgaGEtY2FyZC5jbGlja2FibGUge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIGltZyB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVGFwKCkge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhvbGQoKSB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgdHJ1ZSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1waWN0dXJlLWNhcmRcIjogSHVpUGljdHVyZUNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVTdHlsZWRIdWlFbGVtZW50IH0gZnJvbSBcIi4vcGljdHVyZS1lbGVtZW50cy9jcmVhdGUtc3R5bGVkLWh1aS1lbGVtZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudENvbmZpZywgTG92ZWxhY2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnRzL3R5cGVzXCI7XG5pbXBvcnQgeyBQaWN0dXJlRWxlbWVudHNDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktcGljdHVyZS1lbGVtZW50cy1jYXJkXCIpXG5jbGFzcyBIdWlQaWN0dXJlRWxlbWVudHNDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IFBpY3R1cmVFbGVtZW50c0NhcmRDb25maWc7XG5cbiAgcHJpdmF0ZSBfaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgc2V0IGhhc3MoaGFzczogSG9tZUFzc2lzdGFudCkge1xuICAgIHRoaXMuX2hhc3MgPSBoYXNzO1xuICAgIGZvciAoY29uc3QgZWwgb2YgQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvckFsbChcIiNyb290ID4gKlwiKVxuICAgICkpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbCBhcyBMb3ZlbGFjZUVsZW1lbnQ7XG4gICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiA0O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFBpY3R1cmVFbGVtZW50c0NhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uXCIpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAhKGNvbmZpZy5pbWFnZSB8fCBjb25maWcuY2FtZXJhX2ltYWdlIHx8IGNvbmZpZy5zdGF0ZV9pbWFnZSkgfHxcbiAgICAgIChjb25maWcuc3RhdGVfaW1hZ2UgJiYgIWNvbmZpZy5lbnRpdHkpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246IGltYWdlIHJlcXVpcmVkXCIpO1xuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoY29uZmlnLmVsZW1lbnRzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiBlbGVtZW50cyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZCAuaGVhZGVyPVwiJHt0aGlzLl9jb25maWcudGl0bGV9XCI+XG4gICAgICAgIDxkaXYgaWQ9XCJyb290XCI+XG4gICAgICAgICAgPGh1aS1pbWFnZVxuICAgICAgICAgICAgLmhhc3M9JHt0aGlzLl9oYXNzfVxuICAgICAgICAgICAgLmltYWdlPSR7dGhpcy5fY29uZmlnLmltYWdlfVxuICAgICAgICAgICAgLnN0YXRlSW1hZ2U9JHt0aGlzLl9jb25maWcuc3RhdGVfaW1hZ2V9XG4gICAgICAgICAgICAuc3RhdGVGaWx0ZXI9JHt0aGlzLl9jb25maWcuc3RhdGVfZmlsdGVyfVxuICAgICAgICAgICAgLmNhbWVyYUltYWdlPSR7dGhpcy5fY29uZmlnLmNhbWVyYV9pbWFnZX1cbiAgICAgICAgICAgIC5jYW1lcmFWaWV3PSR7dGhpcy5fY29uZmlnLmNhbWVyYV92aWV3fVxuICAgICAgICAgICAgLmVudGl0eT0ke3RoaXMuX2NvbmZpZy5lbnRpdHl9XG4gICAgICAgICAgICAuYXNwZWN0UmF0aW89JHt0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvfVxuICAgICAgICAgID48L2h1aS1pbWFnZT5cbiAgICAgICAgICAke3RoaXMuX2NvbmZpZy5lbGVtZW50cy5tYXAoXG4gICAgICAgICAgICAoZWxlbWVudENvbmZpZzogTG92ZWxhY2VFbGVtZW50Q29uZmlnKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVTdHlsZWRIdWlFbGVtZW50KGVsZW1lbnRDb25maWcpO1xuICAgICAgICAgICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuXG4gICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAjcm9vdCB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgLmVsZW1lbnQge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgfVxuXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktcGljdHVyZS1lbGVtZW50cy1jYXJkXCI6IEh1aVBpY3R1cmVFbGVtZW50c0NhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktaW1hZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IGxvbmdQcmVzcyB9IGZyb20gXCIuLi9jb21tb24vZGlyZWN0aXZlcy9sb25nLXByZXNzLWRpcmVjdGl2ZVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IFVOQVZBSUxBQkxFIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZW50aXR5XCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBQaWN0dXJlRW50aXR5Q2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXBpY3R1cmUtZW50aXR5LWNhcmRcIilcbmNsYXNzIEh1aVBpY3R1cmVFbnRpdHlDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1waWN0dXJlLWVudGl0eS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktcGljdHVyZS1lbnRpdHktY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktcGljdHVyZS1lbnRpdHktY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVudGl0eTogXCJcIixcbiAgICAgIGltYWdlOlxuICAgICAgICBcImh0dHBzOi8vd3d3LmhvbWUtYXNzaXN0YW50LmlvL2ltYWdlcy9tZXJjaGFuZGlzZS9zaGlydC1mcm9udHBhZ2UucG5nXCIsXG4gICAgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBQaWN0dXJlRW50aXR5Q2FyZENvbmZpZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMztcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBQaWN0dXJlRW50aXR5Q2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246ICdlbnRpdHknIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGNvbXB1dGVEb21haW4oY29uZmlnLmVudGl0eSkgIT09IFwiY2FtZXJhXCIgJiZcbiAgICAgICghY29uZmlnLmltYWdlICYmICFjb25maWcuc3RhdGVfaW1hZ2UgJiYgIWNvbmZpZy5jYW1lcmFfaW1hZ2UpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBpbWFnZSBzb3VyY2UgY29uZmlndXJlZC5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0geyBzaG93X25hbWU6IHRydWUsIHNob3dfc3RhdGU6IHRydWUsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKTtcbiAgICBjb25zdCBzdGF0ZSA9IGNvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgc3RhdGVPYmosXG4gICAgICB0aGlzLmhhc3MubGFuZ3VhZ2VcbiAgICApO1xuXG4gICAgbGV0IGZvb3RlcjogVGVtcGxhdGVSZXN1bHQgfCBzdHJpbmcgPSBcIlwiO1xuICAgIGlmICh0aGlzLl9jb25maWcuc2hvd19uYW1lICYmIHRoaXMuX2NvbmZpZy5zaG93X3N0YXRlKSB7XG4gICAgICBmb290ZXIgPSBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyIGJvdGhcIj5cbiAgICAgICAgICA8ZGl2PiR7bmFtZX08L2Rpdj5cbiAgICAgICAgICA8ZGl2PiR7c3RhdGV9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2NvbmZpZy5zaG93X25hbWUpIHtcbiAgICAgIGZvb3RlciA9IGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj4ke25hbWV9PC9kaXY+XG4gICAgICBgO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fY29uZmlnLnNob3dfc3RhdGUpIHtcbiAgICAgIGZvb3RlciA9IGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXIgc3RhdGVcIj4ke3N0YXRlfTwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICA8aHVpLWltYWdlXG4gICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgLmltYWdlPSR7dGhpcy5fY29uZmlnLmltYWdlfVxuICAgICAgICAgIC5zdGF0ZUltYWdlPSR7dGhpcy5fY29uZmlnLnN0YXRlX2ltYWdlfVxuICAgICAgICAgIC5zdGF0ZUZpbHRlcj0ke3RoaXMuX2NvbmZpZy5zdGF0ZV9maWx0ZXJ9XG4gICAgICAgICAgLmNhbWVyYUltYWdlPSR7Y29tcHV0ZURvbWFpbih0aGlzLl9jb25maWcuZW50aXR5KSA9PT0gXCJjYW1lcmFcIlxuICAgICAgICAgICAgPyB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgICA6IHRoaXMuX2NvbmZpZy5jYW1lcmFfaW1hZ2V9XG4gICAgICAgICAgLmNhbWVyYVZpZXc9JHt0aGlzLl9jb25maWcuY2FtZXJhX3ZpZXd9XG4gICAgICAgICAgLmVudGl0eT0ke3RoaXMuX2NvbmZpZy5lbnRpdHl9XG4gICAgICAgICAgLmFzcGVjdFJhdGlvPSR7dGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpb31cbiAgICAgICAgICBAaGEtY2xpY2s9JHt0aGlzLl9oYW5kbGVUYXB9XG4gICAgICAgICAgQGhhLWhvbGQ9JHt0aGlzLl9oYW5kbGVIb2xkfVxuICAgICAgICAgIC5sb25nUHJlc3M9JHtsb25nUHJlc3MoKX1cbiAgICAgICAgICBjbGFzcz0ke2NsYXNzTWFwKHtcbiAgICAgICAgICAgIGNsaWNrYWJsZTogc3RhdGVPYmouc3RhdGUgIT09IFVOQVZBSUxBQkxFLFxuICAgICAgICAgIH0pfVxuICAgICAgICA+PC9odWktaW1hZ2U+XG4gICAgICAgICR7Zm9vdGVyfVxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgbWluLWhlaWdodDogNzVweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICBodWktaW1hZ2UuY2xpY2thYmxlIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuZm9vdGVyIHtcbiAgICAgICAgLyogc3RhcnQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAvKiBlbmQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG5cbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJvdGgge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICB9XG5cbiAgICAgIC5zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVUYXAoKSB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlSG9sZCgpIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCB0cnVlKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXBpY3R1cmUtZW50aXR5LWNhcmRcIjogSHVpUGljdHVyZUVudGl0eUNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgc3RhdGVJY29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3RhdGVfaWNvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktaW1hZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmctZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEaXNwbGF5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kaXNwbGF5XCI7XG5pbXBvcnQgeyBET01BSU5TX1RPR0dMRSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vY29uc3RcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IFBpY3R1cmVHbGFuY2VDYXJkQ29uZmlnLCBDb25maWdFbnRpdHkgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5jb25zdCBTVEFURVNfT0ZGID0gbmV3IFNldChbXCJjbG9zZWRcIiwgXCJsb2NrZWRcIiwgXCJub3RfaG9tZVwiLCBcIm9mZlwiXSk7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXBpY3R1cmUtZ2xhbmNlLWNhcmRcIilcbmNsYXNzIEh1aVBpY3R1cmVHbGFuY2VDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1waWN0dXJlLWdsYW5jZS1jYXJkLWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktcGljdHVyZS1nbGFuY2UtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktcGljdHVyZS1nbGFuY2UtY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGltYWdlOlxuICAgICAgICBcImh0dHBzOi8vd3d3LmhvbWUtYXNzaXN0YW50LmlvL2ltYWdlcy9tZXJjaGFuZGlzZS9zaGlydC1mcm9udHBhZ2UucG5nXCIsXG4gICAgICBlbnRpdGllczogW10sXG4gICAgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBQaWN0dXJlR2xhbmNlQ2FyZENvbmZpZztcblxuICBwcml2YXRlIF9lbnRpdGllc0RpYWxvZz86IENvbmZpZ0VudGl0eVtdO1xuXG4gIHByaXZhdGUgX2VudGl0aWVzVG9nZ2xlPzogQ29uZmlnRW50aXR5W107XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDM7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogUGljdHVyZUdsYW5jZUNhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICAhY29uZmlnIHx8XG4gICAgICAhY29uZmlnLmVudGl0aWVzIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShjb25maWcuZW50aXRpZXMpIHx8XG4gICAgICAhKGNvbmZpZy5pbWFnZSB8fCBjb25maWcuY2FtZXJhX2ltYWdlIHx8IGNvbmZpZy5zdGF0ZV9pbWFnZSkgfHxcbiAgICAgIChjb25maWcuc3RhdGVfaW1hZ2UgJiYgIWNvbmZpZy5lbnRpdHkpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNhcmQgY29uZmlndXJhdGlvblwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBlbnRpdGllcyA9IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMpO1xuICAgIHRoaXMuX2VudGl0aWVzRGlhbG9nID0gW107XG4gICAgdGhpcy5fZW50aXRpZXNUb2dnbGUgPSBbXTtcblxuICAgIGVudGl0aWVzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgY29uZmlnLmZvcmNlX2RpYWxvZyB8fFxuICAgICAgICAhRE9NQUlOU19UT0dHTEUuaGFzKGNvbXB1dGVEb21haW4oaXRlbS5lbnRpdHkpKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2VudGl0aWVzRGlhbG9nIS5wdXNoKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW50aXRpZXNUb2dnbGUhLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRoaXMuX2VudGl0aWVzRGlhbG9nKSB7XG4gICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLl9lbnRpdGllc0RpYWxvZykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgb2xkSGFzcyEuc3RhdGVzW2VudGl0eS5lbnRpdHldICE9PSB0aGlzLmhhc3MhLnN0YXRlc1tlbnRpdHkuZW50aXR5XVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9lbnRpdGllc1RvZ2dsZSkge1xuICAgICAgZm9yIChjb25zdCBlbnRpdHkgb2YgdGhpcy5fZW50aXRpZXNUb2dnbGUpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG9sZEhhc3MhLnN0YXRlc1tlbnRpdHkuZW50aXR5XSAhPT0gdGhpcy5oYXNzIS5zdGF0ZXNbZW50aXR5LmVudGl0eV1cbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkPlxuICAgICAgICA8aHVpLWltYWdlXG4gICAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgICBjbGlja2FibGU6IEJvb2xlYW4oXG4gICAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50YXBfYWN0aW9uIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnLmhvbGRfYWN0aW9uIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnLmNhbWVyYV9pbWFnZVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9KX1cbiAgICAgICAgICBAaGEtY2xpY2s9JHt0aGlzLl9oYW5kbGVUYXB9XG4gICAgICAgICAgQGhhLWhvbGQ9JHt0aGlzLl9oYW5kbGVIb2xkfVxuICAgICAgICAgIC5sb25nUHJlc3M9JHtsb25nUHJlc3MoKX1cbiAgICAgICAgICAuY29uZmlnPSR7dGhpcy5fY29uZmlnfVxuICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgIC5pbWFnZT0ke3RoaXMuX2NvbmZpZy5pbWFnZX1cbiAgICAgICAgICAuc3RhdGVJbWFnZT0ke3RoaXMuX2NvbmZpZy5zdGF0ZV9pbWFnZX1cbiAgICAgICAgICAuc3RhdGVGaWx0ZXI9JHt0aGlzLl9jb25maWcuc3RhdGVfZmlsdGVyfVxuICAgICAgICAgIC5jYW1lcmFJbWFnZT0ke3RoaXMuX2NvbmZpZy5jYW1lcmFfaW1hZ2V9XG4gICAgICAgICAgLmNhbWVyYVZpZXc9JHt0aGlzLl9jb25maWcuY2FtZXJhX3ZpZXd9XG4gICAgICAgICAgLmVudGl0eT0ke3RoaXMuX2NvbmZpZy5lbnRpdHl9XG4gICAgICAgICAgLmFzcGVjdFJhdGlvPSR7dGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpb31cbiAgICAgICAgPjwvaHVpLWltYWdlPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYm94XCI+XG4gICAgICAgICAgJHt0aGlzLl9jb25maWcudGl0bGVcbiAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj4ke3RoaXMuX2NvbmZpZy50aXRsZSArIFwiaGhhXCJ9PC9kaXY+XG4gICAgICAgICAgICAgIGBcbiAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgJHt0aGlzLl9lbnRpdGllc0RpYWxvZyEubWFwKChlbnRpdHlDb25mKSA9PlxuICAgICAgICAgICAgICB0aGlzLnJlbmRlckVudGl0eShlbnRpdHlDb25mLCB0cnVlKVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgJHt0aGlzLl9lbnRpdGllc1RvZ2dsZSEubWFwKChlbnRpdHlDb25mKSA9PlxuICAgICAgICAgICAgICB0aGlzLnJlbmRlckVudGl0eShlbnRpdHlDb25mLCBmYWxzZSlcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckVudGl0eShcbiAgICBlbnRpdHlDb25mOiBDb25maWdFbnRpdHksXG4gICAgZGlhbG9nOiBib29sZWFuXG4gICk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW2VudGl0eUNvbmYuZW50aXR5XTtcblxuICAgIGVudGl0eUNvbmYgPSB7XG4gICAgICB0YXBfYWN0aW9uOiB7IGFjdGlvbjogZGlhbG9nID8gXCJtb3JlLWluZm9cIiA6IFwidG9nZ2xlXCIgfSxcbiAgICAgIC4uLmVudGl0eUNvbmYsXG4gICAgfTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmctZWxlbWVudFxuICAgICAgICAgIGxhYmVsPSR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgZW50aXR5Q29uZi5lbnRpdHlcbiAgICAgICAgICApfVxuICAgICAgICA+PC9odWktd2FybmluZy1lbGVtZW50PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1pY29uXG4gICAgICAgIEBoYS1jbGljaz0ke3RoaXMuX2hhbmRsZVRhcH1cbiAgICAgICAgQGhhLWhvbGQ9JHt0aGlzLl9oYW5kbGVIb2xkfVxuICAgICAgICAubG9uZ1ByZXNzPSR7bG9uZ1ByZXNzKCl9XG4gICAgICAgIC5jb25maWc9JHtlbnRpdHlDb25mfVxuICAgICAgICBjbGFzcz1cIiR7Y2xhc3NNYXAoe1xuICAgICAgICAgIFwic3RhdGUtb25cIjogIVNUQVRFU19PRkYuaGFzKHN0YXRlT2JqLnN0YXRlKSxcbiAgICAgICAgfSl9XCJcbiAgICAgICAgLmljb249XCIke2VudGl0eUNvbmYuaWNvbiB8fCBzdGF0ZUljb24oc3RhdGVPYmopfVwiXG4gICAgICAgIHRpdGxlPVwiJHtgXG4gICAgICAgICAgICAke2NvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfSA6ICR7Y29tcHV0ZVN0YXRlRGlzcGxheShcbiAgICAgICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgICAgIHN0YXRlT2JqLFxuICAgICAgICAgIHRoaXMuaGFzcyEubGFuZ3VhZ2VcbiAgICAgICAgKX1cbiAgICAgICAgICBgfVwiXG4gICAgICA+PC9oYS1pY29uPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVUYXAoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWcgPSAoZXYuY3VycmVudFRhcmdldCBhcyBhbnkpLmNvbmZpZyBhcyBhbnk7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgY29uZmlnLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29uZmlnID0gKGV2LmN1cnJlbnRUYXJnZXQgYXMgYW55KS5jb25maWcgYXMgYW55O1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIGNvbmZpZywgdHJ1ZSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBtaW4taGVpZ2h0OiA0OHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICBodWktaW1hZ2UuY2xpY2thYmxlIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuYm94IHtcbiAgICAgICAgLyogc3RhcnQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAvKiBlbmQgcGFwZXItZm9udC1jb21tb24tbm93cmFwIHN0eWxlICovXG5cbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDQwcHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfVxuXG4gICAgICAuYm94IC50aXRsZSB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24ge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgY29sb3I6ICNhOWE5YTk7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24uc3RhdGUtb24ge1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXBpY3R1cmUtZ2xhbmNlLWNhcmRcIjogSHVpUGljdHVyZUdsYW5jZUNhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgcHJvcGVydHksXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEhhc3NFbnRpdHkgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcblxuaW1wb3J0IHsgTG92ZWxhY2VDYXJkRWRpdG9yLCBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZpcmVFdmVudCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2ZpcmVfZXZlbnRcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcbmltcG9ydCB7IFBsYW50U3RhdHVzQ2FyZENvbmZpZywgUGxhbnRBdHRyaWJ1dGVUYXJnZXQgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5jb25zdCBTRU5TT1JTID0ge1xuICBtb2lzdHVyZTogXCJoYXNzOndhdGVyXCIsXG4gIHRlbXBlcmF0dXJlOiBcImhhc3M6dGhlcm1vbWV0ZXJcIixcbiAgYnJpZ2h0bmVzczogXCJoYXNzOndoaXRlLWJhbGFuY2Utc3VubnlcIixcbiAgY29uZHVjdGl2aXR5OiBcImhhc3M6ZW1vdGljb24tcG9vcFwiLFxuICBiYXR0ZXJ5OiBcImhhc3M6YmF0dGVyeVwiLFxufTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktcGxhbnQtc3RhdHVzLWNhcmRcIilcbmNsYXNzIEh1aVBsYW50U3RhdHVzQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKTogUHJvbWlzZTxMb3ZlbGFjZUNhcmRFZGl0b3I+IHtcbiAgICBhd2FpdCBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktcGxhbnQtc3RhdHVzLWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS1wbGFudC1zdGF0dXMtY2FyZC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktcGxhbnQtc3RhdHVzLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogUGxhbnRTdGF0dXNDYXJkQ29uZmlnO1xuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFBsYW50U3RhdHVzQ2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0eSB8fCBjb25maWcuZW50aXR5LnNwbGl0KFwiLlwiKVswXSAhPT0gXCJwbGFudFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTcGVjaWZ5IGFuIGVudGl0eSBmcm9tIHdpdGhpbiB0aGUgcGxhbnQgZG9tYWluLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgY2xhc3M9XCIke3N0YXRlT2JqLmF0dHJpYnV0ZXMuZW50aXR5X3BpY3R1cmUgPyBcImhhcy1wbGFudC1pbWFnZVwiIDogXCJcIn1cIlxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJiYW5uZXJcIlxuICAgICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTp1cmwoJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmVudGl0eV9waWN0dXJlfSlcIlxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgJHt0aGlzLmNvbXB1dGVBdHRyaWJ1dGVzKHN0YXRlT2JqKS5tYXAoXG4gICAgICAgICAgICAoaXRlbSkgPT4gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYXR0cmlidXRlc1wiXG4gICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVNb3JlSW5mb31cIlxuICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7aXRlbX1cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICAgICAgICAgIGljb249XCIke3RoaXMuY29tcHV0ZUljb24oXG4gICAgICAgICAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLmJhdHRlcnlcbiAgICAgICAgICAgICAgICAgICAgKX1cIlxuICAgICAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzcz1cIiR7c3RhdGVPYmouYXR0cmlidXRlcy5wcm9ibGVtLmluZGV4T2YoaXRlbSkgPT09IC0xXG4gICAgICAgICAgICAgICAgICAgID8gXCJcIlxuICAgICAgICAgICAgICAgICAgICA6IFwicHJvYmxlbVwifVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzW2l0ZW1dfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1b21cIj5cbiAgICAgICAgICAgICAgICAgICR7c3RhdGVPYmouYXR0cmlidXRlcy51bml0X29mX21lYXN1cmVtZW50X2RpY3RbaXRlbV0gfHwgXCJcIn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIC5iYW5uZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZy10b3A6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5oYXMtcGxhbnQtaW1hZ2UgLmJhbm5lciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAzMCU7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIge1xuICAgICAgICAvKiBzdGFydCBwYXBlci1mb250LWhlYWRsaW5lIHN0eWxlICovXG4gICAgICAgIGZvbnQtZmFtaWx5OiBcIlJvYm90b1wiLCBcIk5vdG9cIiwgc2Fucy1zZXJpZjtcbiAgICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7IC8qIE9TIFggc3VicGl4ZWwgQUEgYmxlZWQgYnVnICovXG4gICAgICAgIHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7XG4gICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IC0wLjAxMmVtO1xuICAgICAgICAvKiBlbmQgcGFwZXItZm9udC1oZWFkbGluZSBzdHlsZSAqL1xuXG4gICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgIH1cblxuICAgICAgLmhhcy1wbGFudC1pbWFnZSAuaGVhZGVyIHtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCB2YXIoLS1kYXJrLXNlY29uZGFyeS1vcGFjaXR5KSk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBwYWRkaW5nOiAxNnB4IDMycHggMjRweCAzMnB4O1xuICAgICAgfVxuXG4gICAgICAuaGFzLXBsYW50LWltYWdlIC5jb250ZW50IHtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24ge1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWNvbG9yKTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuYXR0cmlidXRlcyB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgLmF0dHJpYnV0ZXMgZGl2IHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAucHJvYmxlbSB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1nb29nbGUtcmVkLTUwMCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgfVxuXG4gICAgICAudW9tIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBjb21wdXRlQXR0cmlidXRlcyhzdGF0ZU9iajogSGFzc0VudGl0eSk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoU0VOU09SUykuZmlsdGVyKChrZXkpID0+IGtleSBpbiBzdGF0ZU9iai5hdHRyaWJ1dGVzKTtcbiAgfVxuXG4gIHByaXZhdGUgY29tcHV0ZUljb24oYXR0cjogc3RyaW5nLCBiYXRMdmw6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgaWNvbiA9IFNFTlNPUlNbYXR0cl07XG4gICAgaWYgKGF0dHIgPT09IFwiYmF0dGVyeVwiKSB7XG4gICAgICBpZiAoYmF0THZsIDw9IDUpIHtcbiAgICAgICAgcmV0dXJuIGAke2ljb259LWFsZXJ0YDtcbiAgICAgIH1cbiAgICAgIGlmIChiYXRMdmwgPCA5NSkge1xuICAgICAgICByZXR1cm4gYCR7aWNvbn0tJHtNYXRoLnJvdW5kKGJhdEx2bCAvIDEwIC0gMC4wMSkgKiAxMH1gO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU1vcmVJbmZvKGV2OiBFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2LmN1cnJlbnRUYXJnZXQhIGFzIFBsYW50QXR0cmlidXRlVGFyZ2V0O1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKHRhcmdldC52YWx1ZSkge1xuICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaGFzcy1tb3JlLWluZm9cIiwge1xuICAgICAgICBlbnRpdHlJZDogc3RhdGVPYmouYXR0cmlidXRlcy5zZW5zb3JzW3RhcmdldC52YWx1ZV0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1wbGFudC1zdGF0dXMtY2FyZFwiOiBIdWlQbGFudFN0YXR1c0NhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIHN2ZyxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItc3Bpbm5lci9wYXBlci1zcGlubmVyXCI7XG5cbmltcG9ydCBhcHBseVRoZW1lc09uRWxlbWVudCBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9hcHBseV90aGVtZXNfb25fZWxlbWVudFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IHsgc3RhdGVJY29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3RhdGVfaWNvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQsIExvdmVsYWNlQ2FyZEVkaXRvciB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgZmV0Y2hSZWNlbnQgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9oaXN0b3J5XCI7XG5pbXBvcnQgeyBTZW5zb3JDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuY29uc3QgbWlkUG9pbnQgPSAoXG4gIF9BeDogbnVtYmVyLFxuICBfQXk6IG51bWJlcixcbiAgX0J4OiBudW1iZXIsXG4gIF9CeTogbnVtYmVyXG4pOiBudW1iZXJbXSA9PiB7XG4gIGNvbnN0IF9aeCA9IChfQXggLSBfQngpIC8gMiArIF9CeDtcbiAgY29uc3QgX1p5ID0gKF9BeSAtIF9CeSkgLyAyICsgX0J5O1xuICByZXR1cm4gW19aeCwgX1p5XTtcbn07XG5cbmNvbnN0IGdldFBhdGggPSAoY29vcmRzOiBudW1iZXJbXVtdKTogc3RyaW5nID0+IHtcbiAgbGV0IG5leHQ7XG4gIGxldCBaO1xuICBjb25zdCBYID0gMDtcbiAgY29uc3QgWSA9IDE7XG4gIGxldCBwYXRoID0gXCJcIjtcbiAgbGV0IGxhc3QgPSBjb29yZHMuZmlsdGVyKEJvb2xlYW4pWzBdO1xuXG4gIHBhdGggKz0gYE0gJHtsYXN0W1hdfSwke2xhc3RbWV19YDtcblxuICBmb3IgKGNvbnN0IGNvb3JkIG9mIGNvb3Jkcykge1xuICAgIG5leHQgPSBjb29yZDtcbiAgICBaID0gbWlkUG9pbnQobGFzdFtYXSwgbGFzdFtZXSwgbmV4dFtYXSwgbmV4dFtZXSk7XG4gICAgcGF0aCArPSBgICR7WltYXX0sJHtaW1ldfWA7XG4gICAgcGF0aCArPSBgIFEke25leHRbWF19LCR7bmV4dFtZXX1gO1xuICAgIGxhc3QgPSBuZXh0O1xuICB9XG5cbiAgcGF0aCArPSBgICR7bmV4dFtYXX0sJHtuZXh0W1ldfWA7XG4gIHJldHVybiBwYXRoO1xufTtcblxuY29uc3QgY2FsY1BvaW50cyA9IChcbiAgaGlzdG9yeTogYW55LFxuICBob3VyczogbnVtYmVyLFxuICB3aWR0aDogbnVtYmVyLFxuICBkZXRhaWw6IG51bWJlcixcbiAgbWluOiBudW1iZXIsXG4gIG1heDogbnVtYmVyXG4pOiBudW1iZXJbXVtdID0+IHtcbiAgY29uc3QgY29vcmRzID0gW10gYXMgbnVtYmVyW11bXTtcbiAgY29uc3QgbWFyZ2luID0gNTtcbiAgY29uc3QgaGVpZ2h0ID0gODA7XG4gIHdpZHRoIC09IDEwO1xuICBsZXQgeVJhdGlvID0gKG1heCAtIG1pbikgLyBoZWlnaHQ7XG4gIHlSYXRpbyA9IHlSYXRpbyAhPT0gMCA/IHlSYXRpbyA6IGhlaWdodDtcbiAgbGV0IHhSYXRpbyA9IHdpZHRoIC8gKGhvdXJzIC0gKGRldGFpbCA9PT0gMSA/IDEgOiAwKSk7XG4gIHhSYXRpbyA9IGlzRmluaXRlKHhSYXRpbykgPyB4UmF0aW8gOiB3aWR0aDtcbiAgY29uc3QgZ2V0Q29vcmRzID0gKGl0ZW0sIGksIG9mZnNldCA9IDAsIGRlcHRoID0gMSkgPT4ge1xuICAgIGlmIChkZXB0aCA+IDEpIHtcbiAgICAgIHJldHVybiBpdGVtLmZvckVhY2goKHN1Ykl0ZW0sIGluZGV4KSA9PlxuICAgICAgICBnZXRDb29yZHMoc3ViSXRlbSwgaSwgaW5kZXgsIGRlcHRoIC0gMSlcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGF2ZXJhZ2UgPVxuICAgICAgaXRlbS5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIHBhcnNlRmxvYXQoZW50cnkuc3RhdGUpLCAwKSAvXG4gICAgICBpdGVtLmxlbmd0aDtcblxuICAgIGNvbnN0IHggPSB4UmF0aW8gKiAoaSArIG9mZnNldCAvIDYpICsgbWFyZ2luO1xuICAgIGNvbnN0IHkgPSBoZWlnaHQgLSAoYXZlcmFnZSAtIG1pbikgLyB5UmF0aW8gKyBtYXJnaW4gKiAyO1xuICAgIHJldHVybiBjb29yZHMucHVzaChbeCwgeV0pO1xuICB9O1xuXG4gIGhpc3RvcnkuZm9yRWFjaCgoaXRlbSwgaSkgPT4gZ2V0Q29vcmRzKGl0ZW0sIGksIDAsIGRldGFpbCkpO1xuICBpZiAoY29vcmRzLmxlbmd0aCA9PT0gMSkge1xuICAgIGNvb3Jkc1sxXSA9IFt3aWR0aCArIG1hcmdpbiwgY29vcmRzWzBdWzFdXTtcbiAgfVxuXG4gIGNvb3Jkcy5wdXNoKFt3aWR0aCArIG1hcmdpbiwgY29vcmRzW2Nvb3Jkcy5sZW5ndGggLSAxXVsxXV0pO1xuICByZXR1cm4gY29vcmRzO1xufTtcblxuY29uc3QgY29vcmRpbmF0ZXMgPSAoXG4gIGhpc3Rvcnk6IGFueSxcbiAgaG91cnM6IG51bWJlcixcbiAgd2lkdGg6IG51bWJlcixcbiAgZGV0YWlsOiBudW1iZXJcbik6IG51bWJlcltdW10gPT4ge1xuICBoaXN0b3J5LmZvckVhY2goKGl0ZW0pID0+IChpdGVtLnN0YXRlID0gTnVtYmVyKGl0ZW0uc3RhdGUpKSk7XG4gIGhpc3RvcnkgPSBoaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIU51bWJlci5pc05hTihpdGVtLnN0YXRlKSk7XG5cbiAgY29uc3QgbWluID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgaGlzdG9yeS5tYXAoKGl0ZW0pID0+IGl0ZW0uc3RhdGUpKTtcbiAgY29uc3QgbWF4ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgaGlzdG9yeS5tYXAoKGl0ZW0pID0+IGl0ZW0uc3RhdGUpKTtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgY29uc3QgcmVkdWNlID0gKHJlcywgaXRlbSwgcG9pbnQpID0+IHtcbiAgICBjb25zdCBhZ2UgPSBub3cgLSBuZXcgRGF0ZShpdGVtLmxhc3RfY2hhbmdlZCkuZ2V0VGltZSgpO1xuXG4gICAgbGV0IGtleSA9IE1hdGguYWJzKGFnZSAvICgxMDAwICogMzYwMCkgLSBob3Vycyk7XG4gICAgaWYgKHBvaW50KSB7XG4gICAgICBrZXkgPSAoa2V5IC0gTWF0aC5mbG9vcihrZXkpKSAqIDYwO1xuICAgICAga2V5ID0gTnVtYmVyKChNYXRoLnJvdW5kKGtleSAvIDEwKSAqIDEwKS50b1N0cmluZygpWzBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gTWF0aC5mbG9vcihrZXkpO1xuICAgIH1cbiAgICBpZiAoIXJlc1trZXldKSB7XG4gICAgICByZXNba2V5XSA9IFtdO1xuICAgIH1cbiAgICByZXNba2V5XS5wdXNoKGl0ZW0pO1xuICAgIHJldHVybiByZXM7XG4gIH07XG5cbiAgaGlzdG9yeSA9IGhpc3RvcnkucmVkdWNlKChyZXMsIGl0ZW0pID0+IHJlZHVjZShyZXMsIGl0ZW0sIGZhbHNlKSwgW10pO1xuICBpZiAoZGV0YWlsID4gMSkge1xuICAgIGhpc3RvcnkgPSBoaXN0b3J5Lm1hcCgoZW50cnkpID0+XG4gICAgICBlbnRyeS5yZWR1Y2UoKHJlcywgaXRlbSkgPT4gcmVkdWNlKHJlcywgaXRlbSwgdHJ1ZSksIFtdKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGNhbGNQb2ludHMoaGlzdG9yeSwgaG91cnMsIHdpZHRoLCBkZXRhaWwsIG1pbiwgbWF4KTtcbn07XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXNlbnNvci1jYXJkXCIpXG5jbGFzcyBIdWlTZW5zb3JDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1zZW5zb3ItY2FyZC1lZGl0b3JcIiAqLyBcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLXNlbnNvci1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1zZW5zb3ItY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4geyBlbnRpdHk6IFwiXCIgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTZW5zb3JDYXJkQ29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2hpc3Rvcnk/OiBhbnk7XG5cbiAgcHJpdmF0ZSBfZGF0ZT86IERhdGU7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNlbnNvckNhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy5lbnRpdHkgfHwgY29uZmlnLmVudGl0eS5zcGxpdChcIi5cIilbMF0gIT09IFwic2Vuc29yXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNwZWNpZnkgYW4gZW50aXR5IGZyb20gd2l0aGluIHRoZSBzZW5zb3IgZG9tYWluLlwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkQ29uZmlnID0ge1xuICAgICAgZGV0YWlsOiAxLFxuICAgICAgdGhlbWU6IFwiZGVmYXVsdFwiLFxuICAgICAgaG91cnNfdG9fc2hvdzogMjQsXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcblxuICAgIGNhcmRDb25maWcuaG91cnNfdG9fc2hvdyA9IE51bWJlcihjYXJkQ29uZmlnLmhvdXJzX3RvX3Nob3cpO1xuICAgIGNhcmRDb25maWcuZGV0YWlsID1cbiAgICAgIGNhcmRDb25maWcuZGV0YWlsID09PSAxIHx8IGNhcmRDb25maWcuZGV0YWlsID09PSAyXG4gICAgICAgID8gY2FyZENvbmZpZy5kZXRhaWxcbiAgICAgICAgOiAxO1xuXG4gICAgdGhpcy5fY29uZmlnID0gY2FyZENvbmZpZztcbiAgfVxuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAzO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGxldCBncmFwaDtcblxuICAgIGlmIChzdGF0ZU9iaiAmJiB0aGlzLl9jb25maWcuZ3JhcGggPT09IFwibGluZVwiKSB7XG4gICAgICBpZiAoIXN0YXRlT2JqLmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudCkge1xuICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICAgID5FbnRpdHk6ICR7dGhpcy5fY29uZmlnLmVudGl0eX0gLSBIYXMgbm8gVW5pdCBvZiBNZWFzdXJlbWVudCBhbmRcbiAgICAgICAgICAgIHRoZXJlZm9yZSBjYW4gbm90IGRpc3BsYXkgYSBsaW5lIGdyYXBoLjwvaHVpLXdhcm5pbmdcbiAgICAgICAgICA+XG4gICAgICAgIGA7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9oaXN0b3J5KSB7XG4gICAgICAgIGdyYXBoID0gc3ZnYFxuICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgNTAwIDEwMFwiPjwvc3ZnPlxuICAgICAgICBgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ3JhcGggPSBzdmdgXG4gICAgICAgICAgPHN2ZyB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCA1MDAgMTAwXCI+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICBkPVwiJHt0aGlzLl9oaXN0b3J5fVwiXG4gICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgc3Ryb2tlPVwidmFyKC0tYWNjZW50LWNvbG9yKVwiXG4gICAgICAgICAgICAgIHN0cm9rZS13aWR0aD1cIjVcIlxuICAgICAgICAgICAgICBzdHJva2UtbGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgYDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZ3JhcGggPSBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIEBjbGljaz1cIiR7dGhpcy5faGFuZGxlQ2xpY2t9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICAgIC5pY29uPVwiJHt0aGlzLl9jb25maWcuaWNvbiB8fCBzdGF0ZUljb24oc3RhdGVPYmopfVwiXG4gICAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmFtZVwiXG4gICAgICAgICAgICAgID4ke3RoaXMuX2NvbmZpZy5uYW1lIHx8IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfTwvc3BhblxuICAgICAgICAgICAgPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaW5mb1wiPlxuICAgICAgICAgIDxzcGFuIGlkPVwidmFsdWVcIj4ke3N0YXRlT2JqLnN0YXRlfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBpZD1cIm1lYXN1cmVtZW50XCJcbiAgICAgICAgICAgID4ke3RoaXMuX2NvbmZpZy51bml0IHx8XG4gICAgICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudH08L3NwYW5cbiAgICAgICAgICA+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JhcGhcIj48ZGl2PiR7Z3JhcGh9PC9kaXY+PC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9oaXN0b3J5XCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8IHRoaXMuX2NvbmZpZy5ncmFwaCAhPT0gXCJsaW5lXCIgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuICAgIGlmICghb2xkSGFzcyB8fCBvbGRIYXNzLnRoZW1lcyAhPT0gdGhpcy5oYXNzLnRoZW1lcykge1xuICAgICAgYXBwbHlUaGVtZXNPbkVsZW1lbnQodGhpcywgdGhpcy5oYXNzLnRoZW1lcywgdGhpcy5fY29uZmlnIS50aGVtZSk7XG4gICAgfVxuXG4gICAgY29uc3QgbWludXRlID0gNjAwMDA7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpKSB7XG4gICAgICB0aGlzLl9nZXRIaXN0b3J5KCk7XG4gICAgfSBlbHNlIGlmIChEYXRlLm5vdygpIC0gdGhpcy5fZGF0ZSEuZ2V0VGltZSgpID49IG1pbnV0ZSkge1xuICAgICAgdGhpcy5fZ2V0SGlzdG9yeSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIGZpcmVFdmVudCh0aGlzLCBcImhhc3MtbW9yZS1pbmZvXCIsIHsgZW50aXR5SWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5IH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0SGlzdG9yeSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIHN0YXJ0VGltZS5zZXRIb3VycyhlbmRUaW1lLmdldEhvdXJzKCkgLSB0aGlzLl9jb25maWchLmhvdXJzX3RvX3Nob3chKTtcblxuICAgIGNvbnN0IHN0YXRlSGlzdG9yeSA9IGF3YWl0IGZldGNoUmVjZW50KFxuICAgICAgdGhpcy5oYXNzLFxuICAgICAgdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lXG4gICAgKTtcblxuICAgIGlmIChzdGF0ZUhpc3RvcnkubGVuZ3RoIDwgMSB8fCBzdGF0ZUhpc3RvcnlbMF0ubGVuZ3RoIDwgMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvb3JkcyA9IGNvb3JkaW5hdGVzKFxuICAgICAgc3RhdGVIaXN0b3J5WzBdLFxuICAgICAgdGhpcy5fY29uZmlnIS5ob3Vyc190b19zaG93ISxcbiAgICAgIDUwMCxcbiAgICAgIHRoaXMuX2NvbmZpZyEuZGV0YWlsIVxuICAgICk7XG5cbiAgICB0aGlzLl9oaXN0b3J5ID0gZ2V0UGF0aChjb29yZHMpO1xuICAgIHRoaXMuX2RhdGUgPSBuZXcgRGF0ZSgpO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICBoYS1jYXJkIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5mbGV4IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlciB7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC5uYW1lIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgICAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbWF4LWhlaWdodDogMS40cmVtO1xuICAgICAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMTtcbiAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XG4gICAgICB9XG5cbiAgICAgIC5pY29uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWl0ZW0taWNvbi1jb2xvciwgIzQ0NzM5ZSk7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgZmxleDogMCAwIDQwcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICB9XG5cbiAgICAgIC5pbmZvIHtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBtYXJnaW46IDE2cHggMCAxNnB4IDhweDtcbiAgICAgIH1cblxuICAgICAgI3ZhbHVlIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxZW07XG4gICAgICAgIG1hcmdpbi1yaWdodDogNHB4O1xuICAgICAgfVxuXG4gICAgICAjbWVhc3VyZW1lbnQge1xuICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBmb250LXNpemU6IDEuM3JlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuMmVtO1xuICAgICAgICBtYXJnaW4tdG9wOiAwLjFlbTtcbiAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICAgICAgfVxuXG4gICAgICAuZ3JhcGgge1xuICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIC5ncmFwaCA+IGRpdiB7XG4gICAgICAgIGFsaWduLXNlbGY6IGZsZXgtZW5kO1xuICAgICAgICBtYXJnaW46IGF1dG8gOHB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zZW5zb3ItY2FyZFwiOiBIdWlTZW5zb3JDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IHJlcGVhdCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3JlcGVhdFwiO1xuaW1wb3J0IHsgUGFwZXJJbnB1dEVsZW1lbnQgfSBmcm9tIFwiQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWNoZWNrYm94L3BhcGVyLWNoZWNrYm94XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCwgTG92ZWxhY2VDYXJkRWRpdG9yIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQge1xuICBmZXRjaEl0ZW1zLFxuICB1cGRhdGVJdGVtLFxuICBTaG9wcGluZ0xpc3RJdGVtLFxuICBjbGVhckl0ZW1zLFxuICBhZGRJdGVtLFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9zaG9wcGluZy1saXN0XCI7XG5pbXBvcnQgeyBTaG9wcGluZ0xpc3RDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktc2hvcHBpbmctbGlzdC1jYXJkXCIpXG5jbGFzcyBIdWlTaG9wcGluZ0xpc3RDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1zaG9wcGluZy1saXN0LWVkaXRvclwiICovIFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktc2hvcHBpbmctbGlzdC1lZGl0b3JcIik7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJodWktc2hvcHBpbmctbGlzdC1jYXJkLWVkaXRvclwiKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZygpOiBvYmplY3Qge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTaG9wcGluZ0xpc3RDYXJkQ29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX3VuY2hlY2tlZEl0ZW1zPzogU2hvcHBpbmdMaXN0SXRlbVtdO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NoZWNrZWRJdGVtcz86IFNob3BwaW5nTGlzdEl0ZW1bXTtcblxuICBwcml2YXRlIF91bnN1YkV2ZW50cz86IFByb21pc2U8KCkgPT4gUHJvbWlzZTx2b2lkPj47XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLl9jb25maWcgPyAodGhpcy5fY29uZmlnLnRpdGxlID8gMSA6IDApIDogMCkgKyAzO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNob3BwaW5nTGlzdENhcmRDb25maWcpOiB2b2lkIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fdW5jaGVja2VkSXRlbXMgPSBbXTtcbiAgICB0aGlzLl9jaGVja2VkSXRlbXMgPSBbXTtcbiAgICB0aGlzLl9mZXRjaERhdGEoKTtcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuXG4gICAgaWYgKHRoaXMuaGFzcykge1xuICAgICAgdGhpcy5fdW5zdWJFdmVudHMgPSB0aGlzLmhhc3MuY29ubmVjdGlvbi5zdWJzY3JpYmVFdmVudHMoXG4gICAgICAgICgpID0+IHRoaXMuX2ZldGNoRGF0YSgpLFxuICAgICAgICBcInNob3BwaW5nX2xpc3RfdXBkYXRlZFwiXG4gICAgICApO1xuICAgICAgdGhpcy5fZmV0Y2hEYXRhKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG5cbiAgICBpZiAodGhpcy5fdW5zdWJFdmVudHMpIHtcbiAgICAgIHRoaXMuX3Vuc3ViRXZlbnRzLnRoZW4oKHVuc3ViKSA9PiB1bnN1YigpKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIC5oZWFkZXI9XCIke3RoaXMuX2NvbmZpZy50aXRsZX1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFkZFJvd1wiPlxuICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICBjbGFzcz1cImFkZEJ1dHRvblwiXG4gICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2FkZEl0ZW19XCJcbiAgICAgICAgICAgIGljb249XCJoYXNzOnBsdXNcIlxuICAgICAgICAgICAgLnRpdGxlPVwiJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnNob3BwaW5nLWxpc3QuYWRkX2l0ZW1cIlxuICAgICAgICAgICAgKX1cIlxuICAgICAgICAgID5cbiAgICAgICAgICA8L2hhLWljb24+XG4gICAgICAgICAgPHBhcGVyLWl0ZW0tYm9keT5cbiAgICAgICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgICAgICBuby1sYWJlbC1mbG9hdFxuICAgICAgICAgICAgICBjbGFzcz1cImFkZEJveFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuY2FyZHMuc2hvcHBpbmctbGlzdC5hZGRfaXRlbVwiXG4gICAgICAgICAgICAgICl9XCJcbiAgICAgICAgICAgICAgQGtleWRvd249XCIke3RoaXMuX2FkZEtleVByZXNzfVwiXG4gICAgICAgICAgICA+PC9wYXBlci1pbnB1dD5cbiAgICAgICAgICA8L3BhcGVyLWl0ZW0tYm9keT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICR7cmVwZWF0KFxuICAgICAgICAgIHRoaXMuX3VuY2hlY2tlZEl0ZW1zISxcbiAgICAgICAgICAoaXRlbSkgPT4gaXRlbS5pZCxcbiAgICAgICAgICAoaXRlbSwgaW5kZXgpID0+XG4gICAgICAgICAgICBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdFJvd1wiPlxuICAgICAgICAgICAgICAgIDxwYXBlci1jaGVja2JveFxuICAgICAgICAgICAgICAgICAgc2xvdD1cIml0ZW0taWNvblwiXG4gICAgICAgICAgICAgICAgICBpZD1cIiR7aW5kZXh9XCJcbiAgICAgICAgICAgICAgICAgID9jaGVja2VkPVwiJHtpdGVtLmNvbXBsZXRlfVwiXG4gICAgICAgICAgICAgICAgICAuaXRlbUlkPVwiJHtpdGVtLmlkfVwiXG4gICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2NvbXBsZXRlSXRlbX1cIlxuICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICA+PC9wYXBlci1jaGVja2JveD5cbiAgICAgICAgICAgICAgICA8cGFwZXItaXRlbS1ib2R5PlxuICAgICAgICAgICAgICAgICAgPHBhcGVyLWlucHV0XG4gICAgICAgICAgICAgICAgICAgIG5vLWxhYmVsLWZsb2F0XG4gICAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7aXRlbS5uYW1lfVwiXG4gICAgICAgICAgICAgICAgICAgIC5pdGVtSWQ9XCIke2l0ZW0uaWR9XCJcbiAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT1cIiR7dGhpcy5fc2F2ZUVkaXR9XCJcbiAgICAgICAgICAgICAgICAgID48L3BhcGVyLWlucHV0PlxuICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbS1ib2R5PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgKX1cbiAgICAgICAgJHt0aGlzLl9jaGVja2VkSXRlbXMhLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2VkXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnNob3BwaW5nLWxpc3QuY2hlY2tlZF9pdGVtc1wiXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjbGVhcmFsbFwiXG4gICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2NsZWFySXRlbXN9XCJcbiAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOm5vdGlmaWNhdGlvbi1jbGVhci1hbGxcIlxuICAgICAgICAgICAgICAgICAgLnRpdGxlPVwiJHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnNob3BwaW5nLWxpc3QuY2xlYXJfaXRlbXNcIlxuICAgICAgICAgICAgICAgICAgKX1cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2hhLWljb24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAke3JlcGVhdChcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja2VkSXRlbXMhLFxuICAgICAgICAgICAgICAgIChpdGVtKSA9PiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgIChpdGVtLCBpbmRleCkgPT5cbiAgICAgICAgICAgICAgICAgIGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlZGl0Um93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWNoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICBzbG90PVwiaXRlbS1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiJHtpbmRleH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgP2NoZWNrZWQ9XCIke2l0ZW0uY29tcGxldGV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pdGVtSWQ9XCIke2l0ZW0uaWR9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fY29tcGxldGVJdGVtfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWNoZWNrYm94PlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXBlci1pdGVtLWJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm8tbGFiZWwtZmxvYXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnZhbHVlPVwiJHtpdGVtLm5hbWV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLml0ZW1JZD1cIiR7aXRlbS5pZH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBAY2hhbmdlPVwiJHt0aGlzLl9zYXZlRWRpdH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvcGFwZXItaW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9wYXBlci1pdGVtLWJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogXCJcIn1cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmVkaXRSb3csXG4gICAgICAuYWRkUm93IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgIH1cblxuICAgICAgLmFkZEJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDlweCAxNXB4IDExcHggMTVweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1pdGVtLWJvZHkge1xuICAgICAgICB3aWR0aDogNzUlO1xuICAgICAgfVxuXG4gICAgICBwYXBlci1jaGVja2JveCB7XG4gICAgICAgIHBhZGRpbmc6IDExcHggMTFweCAxMXB4IDE4cHg7XG4gICAgICB9XG5cbiAgICAgIHBhcGVyLWlucHV0IHtcbiAgICAgICAgLS1wYXBlci1pbnB1dC1jb250YWluZXItdW5kZXJsaW5lOiB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci11bmRlcmxpbmUtZm9jdXM6IHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICAgIC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXVuZGVybGluZS1kaXNhYmxlZDoge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB0b3A6IDFweDtcbiAgICAgIH1cblxuICAgICAgLmNoZWNrZWQge1xuICAgICAgICBtYXJnaW4tbGVmdDogMTdweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTFweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTFweDtcbiAgICAgIH1cblxuICAgICAgLmxhYmVsIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuZGl2aWRlciB7XG4gICAgICAgIGhlaWdodDogMXB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kaXZpZGVyLWNvbG9yKTtcbiAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuY2xlYXJhbGwge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDNweDtcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYWRkUm93ID4gaGEtaWNvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2ZldGNoRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5oYXNzKSB7XG4gICAgICBjb25zdCBjaGVja2VkSXRlbXM6IFNob3BwaW5nTGlzdEl0ZW1bXSA9IFtdO1xuICAgICAgY29uc3QgdW5jaGVja2VkSXRlbXM6IFNob3BwaW5nTGlzdEl0ZW1bXSA9IFtdO1xuICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBmZXRjaEl0ZW1zKHRoaXMuaGFzcyk7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBpdGVtcykge1xuICAgICAgICBpZiAoaXRlbXNba2V5XS5jb21wbGV0ZSkge1xuICAgICAgICAgIGNoZWNrZWRJdGVtcy5wdXNoKGl0ZW1zW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVuY2hlY2tlZEl0ZW1zLnB1c2goaXRlbXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2NoZWNrZWRJdGVtcyA9IGNoZWNrZWRJdGVtcztcbiAgICAgIHRoaXMuX3VuY2hlY2tlZEl0ZW1zID0gdW5jaGVja2VkSXRlbXM7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY29tcGxldGVJdGVtKGV2KTogdm9pZCB7XG4gICAgdXBkYXRlSXRlbSh0aGlzLmhhc3MhLCBldi50YXJnZXQuaXRlbUlkLCB7XG4gICAgICBjb21wbGV0ZTogZXYudGFyZ2V0LmNoZWNrZWQsXG4gICAgfSkuY2F0Y2goKCkgPT4gdGhpcy5fZmV0Y2hEYXRhKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2F2ZUVkaXQoZXYpOiB2b2lkIHtcbiAgICB1cGRhdGVJdGVtKHRoaXMuaGFzcyEsIGV2LnRhcmdldC5pdGVtSWQsIHtcbiAgICAgIG5hbWU6IGV2LnRhcmdldC52YWx1ZSxcbiAgICB9KS5jYXRjaCgoKSA9PiB0aGlzLl9mZXRjaERhdGEoKSk7XG5cbiAgICBldi50YXJnZXQuYmx1cigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJJdGVtcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNzKSB7XG4gICAgICBjbGVhckl0ZW1zKHRoaXMuaGFzcykuY2F0Y2goKCkgPT4gdGhpcy5fZmV0Y2hEYXRhKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9uZXdJdGVtKCk6IFBhcGVySW5wdXRFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwiLmFkZEJveFwiKSBhcyBQYXBlcklucHV0RWxlbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZEl0ZW0oZXYpOiB2b2lkIHtcbiAgICBjb25zdCBuZXdJdGVtID0gdGhpcy5fbmV3SXRlbTtcblxuICAgIGlmIChuZXdJdGVtLnZhbHVlIS5sZW5ndGggPiAwKSB7XG4gICAgICBhZGRJdGVtKHRoaXMuaGFzcyEsIG5ld0l0ZW0udmFsdWUhKS5jYXRjaCgoKSA9PiB0aGlzLl9mZXRjaERhdGEoKSk7XG4gICAgfVxuXG4gICAgbmV3SXRlbS52YWx1ZSA9IFwiXCI7XG4gICAgaWYgKGV2KSB7XG4gICAgICBuZXdJdGVtLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfYWRkS2V5UHJlc3MoZXYpOiB2b2lkIHtcbiAgICBpZiAoZXYua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIHRoaXMuX2FkZEl0ZW0obnVsbCk7XG4gICAgfVxuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktc2hvcHBpbmctbGlzdC1jYXJkXCI6IEh1aVNob3BwaW5nTGlzdENhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IGh0bWwsIExpdEVsZW1lbnQsIFRlbXBsYXRlUmVzdWx0LCBDU1NSZXN1bHQsIGNzcyB9IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVDYXJkRWxlbWVudCB9IGZyb20gXCIuLi9jb21tb24vY3JlYXRlLWNhcmQtZWxlbWVudFwiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmRDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgU3RhY2tDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEh1aVN0YWNrQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF9jb25maWc6IHt9LFxuICAgIH07XG4gIH1cblxuICBzZXQgaGFzcyhoYXNzOiBIb21lQXNzaXN0YW50KSB7XG4gICAgdGhpcy5faGFzcyA9IGhhc3M7XG5cbiAgICBpZiAoIXRoaXMuX2NhcmRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuX2NhcmRzKSB7XG4gICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLl9oYXNzO1xuICAgIH1cbiAgfVxuICBwcm90ZWN0ZWQgX2NhcmRzPzogTG92ZWxhY2VDYXJkW107XG4gIHByaXZhdGUgX2NvbmZpZz86IFN0YWNrQ2FyZENvbmZpZztcbiAgcHJpdmF0ZSBfaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgcHVibGljIGFic3RyYWN0IGdldENhcmRTaXplKCk6IG51bWJlcjtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU3RhY2tDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5jYXJkcyB8fCAhQXJyYXkuaXNBcnJheShjb25maWcuY2FyZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYXJkIGNvbmZpZyBpbmNvcnJlY3RcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9jYXJkcyA9IGNvbmZpZy5jYXJkcy5tYXAoKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9jcmVhdGVDYXJkRWxlbWVudChjYXJkKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5yZW5kZXJTdHlsZSgpfVxuICAgICAgJHt0aGlzLl9jb25maWcudGl0bGVcbiAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+JHt0aGlzLl9jb25maWcudGl0bGV9PC9kaXY+XG4gICAgICAgICAgYFxuICAgICAgICA6IFwiXCJ9XG4gICAgICA8ZGl2IGlkPVwicm9vdFwiPiR7dGhpcy5fY2FyZHN9PC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXJTdHlsZSgpOiBUZW1wbGF0ZVJlc3VsdDtcblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAuY2FyZC1oZWFkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0taGEtY2FyZC1oZWFkZXItY29sb3IsIC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWhhLWNhcmQtaGVhZGVyLWZvbnQtZmFtaWx5LCBpbmhlcml0KTtcbiAgICAgICAgZm9udC1zaXplOiB2YXIoLS1oYS1jYXJkLWhlYWRlci1mb250LXNpemUsIDI0cHgpO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogLTAuMDEyZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAzMnB4O1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgcGFkZGluZzogMjRweCAxNnB4IDE2cHg7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUNhcmRFbGVtZW50KGNhcmRDb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkRWxlbWVudChjYXJkQ29uZmlnKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gICAgaWYgKHRoaXMuX2hhc3MpIHtcbiAgICAgIGVsZW1lbnQuaGFzcyA9IHRoaXMuX2hhc3M7XG4gICAgfVxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibGwtcmVidWlsZFwiLFxuICAgICAgKGV2KSA9PiB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLl9yZWJ1aWxkQ2FyZChlbGVtZW50LCBjYXJkQ29uZmlnKTtcbiAgICAgIH0sXG4gICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9yZWJ1aWxkQ2FyZChcbiAgICBjYXJkRWxUb1JlcGxhY2U6IExvdmVsYWNlQ2FyZCxcbiAgICBjb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZ1xuICApOiB2b2lkIHtcbiAgICBjb25zdCBuZXdDYXJkRWwgPSB0aGlzLl9jcmVhdGVDYXJkRWxlbWVudChjb25maWcpO1xuICAgIGNhcmRFbFRvUmVwbGFjZS5wYXJlbnRFbGVtZW50IS5yZXBsYWNlQ2hpbGQobmV3Q2FyZEVsLCBjYXJkRWxUb1JlcGxhY2UpO1xuICAgIHRoaXMuX2NhcmRzID0gdGhpcy5fY2FyZHMhLm1hcCgoY3VyQ2FyZEVsKSA9PlxuICAgICAgY3VyQ2FyZEVsID09PSBjYXJkRWxUb1JlcGxhY2UgPyBuZXdDYXJkRWwgOiBjdXJDYXJkRWxcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvY2xhc3MtbWFwXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1pY29uLWJ1dHRvbi9wYXBlci1pY29uLWJ1dHRvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcblxuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkLCBMb3ZlbGFjZUNhcmRFZGl0b3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGxvYWRSb3VuZHNsaWRlciB9IGZyb20gXCIuLi8uLi8uLi9yZXNvdXJjZXMvanF1ZXJ5LnJvdW5kc2xpZGVyLm9uZGVtYW5kXCI7XG5pbXBvcnQgeyBVTklUX0YgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBUaGVybW9zdGF0Q2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQge1xuICBDbGltYXRlRW50aXR5LFxuICBIdmFjTW9kZSxcbiAgY29tcGFyZUNsaW1hdGVIdmFjTW9kZXMsXG4gIENMSU1BVEVfUFJFU0VUX05PTkUsXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2NsaW1hdGVcIjtcblxuY29uc3QgdGhlcm1vc3RhdENvbmZpZyA9IHtcbiAgcmFkaXVzOiAxNTAsXG4gIGNpcmNsZVNoYXBlOiBcInBpZVwiLFxuICBzdGFydEFuZ2xlOiAzMTUsXG4gIHdpZHRoOiA1LFxuICBsaW5lQ2FwOiBcInJvdW5kXCIsXG4gIGhhbmRsZVNpemU6IFwiKzEwXCIsXG4gIHNob3dUb29sdGlwOiBmYWxzZSxcbiAgYW5pbWF0aW9uOiBmYWxzZSxcbn07XG5cbmNvbnN0IG1vZGVJY29uczogeyBbbW9kZSBpbiBIdmFjTW9kZV06IHN0cmluZyB9ID0ge1xuICBhdXRvOiBcImhhc3M6Y2FsZW5kYXItcmVwZWF0XCIsXG4gIGhlYXRfY29vbDogXCJoYXNzOmF1dG9yZW5ld1wiLFxuICBoZWF0OiBcImhhc3M6ZmlyZVwiLFxuICBjb29sOiBcImhhc3M6c25vd2ZsYWtlXCIsXG4gIG9mZjogXCJoYXNzOnBvd2VyXCIsXG4gIGZhbl9vbmx5OiBcImhhc3M6ZmFuXCIsXG4gIGRyeTogXCJoYXNzOndhdGVyLXBlcmNlbnRcIixcbn07XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXRoZXJtb3N0YXQtY2FyZFwiKVxuZXhwb3J0IGNsYXNzIEh1aVRoZXJtb3N0YXRDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS10aGVybW9zdGF0LWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS10aGVybW9zdGF0LWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXRoZXJtb3N0YXQtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoKTogb2JqZWN0IHtcbiAgICByZXR1cm4geyBlbnRpdHk6IFwiXCIgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBUaGVybW9zdGF0Q2FyZENvbmZpZztcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9yb3VuZFNsaWRlclN0eWxlPzogVGVtcGxhdGVSZXN1bHQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfalF1ZXJ5PzogYW55O1xuXG4gIHByaXZhdGUgX2Jyb2FkQ2FyZD86IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBfbG9hZGVkPzogYm9vbGVhbjtcblxuICBwcml2YXRlIF91cGRhdGVkPzogYm9vbGVhbjtcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gNDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBUaGVybW9zdGF0Q2FyZENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmVudGl0eSB8fCBjb25maWcuZW50aXR5LnNwbGl0KFwiLlwiKVswXSAhPT0gXCJjbGltYXRlXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNwZWNpZnkgYW4gZW50aXR5IGZyb20gd2l0aGluIHRoZSBjbGltYXRlIGRvbWFpbi5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0geyB0aGVtZTogXCJkZWZhdWx0XCIsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgaWYgKHRoaXMuX3VwZGF0ZWQgJiYgIXRoaXMuX2xvYWRlZCkge1xuICAgICAgdGhpcy5faW5pdGlhbExvYWQoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZSA9IHN0YXRlT2JqLnN0YXRlIGluIG1vZGVJY29ucyA/IHN0YXRlT2JqLnN0YXRlIDogXCJ1bmtub3duLW1vZGVcIjtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5yZW5kZXJTdHlsZSgpfVxuICAgICAgPGhhLWNhcmRcbiAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHtcbiAgICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgICAgbGFyZ2U6IHRoaXMuX2Jyb2FkQ2FyZCEsXG4gICAgICAgICAgc21hbGw6ICF0aGlzLl9icm9hZENhcmQsXG4gICAgICAgIH0pfVwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgaWQ9XCJyb290XCI+XG4gICAgICAgICAgPHBhcGVyLWljb24tYnV0dG9uXG4gICAgICAgICAgICBpY29uPVwiaGFzczpkb3RzLXZlcnRpY2FsXCJcbiAgICAgICAgICAgIGNsYXNzPVwibW9yZS1pbmZvXCJcbiAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5faGFuZGxlTW9yZUluZm99XCJcbiAgICAgICAgICA+PC9wYXBlci1pY29uLWJ1dHRvbj5cbiAgICAgICAgICA8ZGl2IGlkPVwidGhlcm1vc3RhdFwiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgaWQ9XCJ0b29sdGlwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj5cbiAgICAgICAgICAgICAgJHt0aGlzLl9jb25maWcubmFtZSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN1cnJlbnQtdGVtcGVyYXR1cmVcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjdXJyZW50LXRlbXBlcmF0dXJlLXRleHRcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuY3VycmVudF90ZW1wZXJhdHVyZX1cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuY3VycmVudF90ZW1wZXJhdHVyZVxuICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidW9tXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID4ke3RoaXMuaGFzcy5jb25maWcudW5pdF9zeXN0ZW0udGVtcGVyYXR1cmV9PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNsaW1hdGUtaW5mb1wiPlxuICAgICAgICAgICAgICA8ZGl2IGlkPVwic2V0LXRlbXBlcmF0dXJlXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXJyZW50LW1vZGVcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuaHZhY19hY3Rpb25cbiAgICAgICAgICAgICAgICAgID8gdGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICBgc3RhdGVfYXR0cmlidXRlcy5jbGltYXRlLmh2YWNfYWN0aW9uLiR7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLmh2YWNfYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgfWBcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgOiB0aGlzLmhhc3MhLmxvY2FsaXplKGBzdGF0ZS5jbGltYXRlLiR7c3RhdGVPYmouc3RhdGV9YCl9XG4gICAgICAgICAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLnByZXNldF9tb2RlICYmXG4gICAgICAgICAgICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy5wcmVzZXRfbW9kZSAhPT0gQ0xJTUFURV9QUkVTRVRfTk9ORVxuICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgIC1cbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICBgc3RhdGVfYXR0cmlidXRlcy5jbGltYXRlLnByZXNldF9tb2RlLiR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMucHJlc2V0X21vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gXG4gICAgICAgICAgICAgICAgICAgICAgKSB8fCBzdGF0ZU9iai5hdHRyaWJ1dGVzLnByZXNldF9tb2RlfVxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kZXNcIj5cbiAgICAgICAgICAgICAgICAkeyhzdGF0ZU9iai5hdHRyaWJ1dGVzLmh2YWNfbW9kZXMgfHwgW10pXG4gICAgICAgICAgICAgICAgICAuY29uY2F0KClcbiAgICAgICAgICAgICAgICAgIC5zb3J0KGNvbXBhcmVDbGltYXRlSHZhY01vZGVzKVxuICAgICAgICAgICAgICAgICAgLm1hcCgobW9kZUl0ZW0pID0+IHRoaXMuX3JlbmRlckljb24obW9kZUl0ZW0sIG1vZGUpKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hhLWNhcmQ+XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlZCA9IHRydWU7XG4gICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQgJiYgIXRoaXMuX2xvYWRlZCkge1xuICAgICAgdGhpcy5faW5pdGlhbExvYWQoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MgfHwgIWNoYW5nZWRQcm9wcy5oYXMoXCJoYXNzXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIW9sZEhhc3MgfHwgb2xkSGFzcy50aGVtZXMgIT09IHRoaXMuaGFzcy50aGVtZXMpIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KHRoaXMsIHRoaXMuaGFzcy50aGVtZXMsIHRoaXMuX2NvbmZpZy50aGVtZSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5falF1ZXJ5ICYmXG4gICAgICAvLyBJZiBqUXVlcnkgY2hhbmdlZCwgd2UganVzdCByZW5kZXJlZCBpbiBmaXJzdFVwZGF0ZWRcbiAgICAgICFjaGFuZ2VkUHJvcHMuaGFzKFwiX2pRdWVyeVwiKSAmJlxuICAgICAgKCFvbGRIYXNzIHx8IG9sZEhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldICE9PSBzdGF0ZU9iailcbiAgICApIHtcbiAgICAgIGNvbnN0IFtzbGlkZXJWYWx1ZSwgdWlWYWx1ZSwgc2xpZGVyVHlwZV0gPSB0aGlzLl9nZW5TbGlkZXJWYWx1ZShzdGF0ZU9iaik7XG5cbiAgICAgIHRoaXMuX2pRdWVyeShcIiN0aGVybW9zdGF0XCIsIHRoaXMuc2hhZG93Um9vdCkucm91bmRTbGlkZXIoe1xuICAgICAgICBzbGlkZXJUeXBlLFxuICAgICAgICB2YWx1ZTogc2xpZGVyVmFsdWUsXG4gICAgICAgIGRpc2FibGVkOiBzbGlkZXJWYWx1ZSA9PT0gbnVsbCxcbiAgICAgICAgbWluOiBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1pbl90ZW1wLFxuICAgICAgICBtYXg6IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWF4X3RlbXAsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3VwZGF0ZVNldFRlbXAodWlWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX3N0ZXBTaXplKCk6IG51bWJlciB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV0gYXMgQ2xpbWF0ZUVudGl0eTtcblxuICAgIGlmIChzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX3N0ZXApIHtcbiAgICAgIHJldHVybiBzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX3N0ZXA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmhhc3MhLmNvbmZpZy51bml0X3N5c3RlbS50ZW1wZXJhdHVyZSA9PT0gVU5JVF9GID8gMSA6IDAuNTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2luaXRpYWxMb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICAvLyBDYXJkIHdpbGwgcmVxdWlyZSByZWZyZXNoIHRvIHdvcmsgYWdhaW5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9sb2FkZWQgPSB0cnVlO1xuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDb21wbGV0ZTtcblxuICAgIGxldCByYWRpdXMgPSB0aGlzLmNsaWVudFdpZHRoIC8gMy4yO1xuICAgIHRoaXMuX2Jyb2FkQ2FyZCA9IHRoaXMuY2xpZW50V2lkdGggPiAzOTA7XG5cbiAgICBpZiAocmFkaXVzID09PSAwKSB7XG4gICAgICByYWRpdXMgPSAxMDA7XG4gICAgfVxuXG4gICAgKHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI3RoZXJtb3N0YXRcIlxuICAgICkgYXMgSFRNTEVsZW1lbnQpIS5zdHlsZS5oZWlnaHQgPSByYWRpdXMgKiAyICsgXCJweFwiO1xuXG4gICAgY29uc3QgbG9hZGVkID0gYXdhaXQgbG9hZFJvdW5kc2xpZGVyKCk7XG5cbiAgICB0aGlzLl9yb3VuZFNsaWRlclN0eWxlID0gbG9hZGVkLnJvdW5kU2xpZGVyU3R5bGU7XG4gICAgdGhpcy5falF1ZXJ5ID0gbG9hZGVkLmpRdWVyeTtcblxuICAgIGNvbnN0IFtzbGlkZXJWYWx1ZSwgdWlWYWx1ZSwgc2xpZGVyVHlwZV0gPSB0aGlzLl9nZW5TbGlkZXJWYWx1ZShzdGF0ZU9iaik7XG5cbiAgICB0aGlzLl9qUXVlcnkoXCIjdGhlcm1vc3RhdFwiLCB0aGlzLnNoYWRvd1Jvb3QpLnJvdW5kU2xpZGVyKHtcbiAgICAgIC4uLnRoZXJtb3N0YXRDb25maWcsXG4gICAgICByYWRpdXMsXG4gICAgICBtaW46IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWluX3RlbXAsXG4gICAgICBtYXg6IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWF4X3RlbXAsXG4gICAgICBzbGlkZXJUeXBlLFxuICAgICAgY2hhbmdlOiAodmFsdWUpID0+IHRoaXMuX3NldFRlbXBlcmF0dXJlKHZhbHVlKSxcbiAgICAgIGRyYWc6ICh2YWx1ZSkgPT4gdGhpcy5fZHJhZ0V2ZW50KHZhbHVlKSxcbiAgICAgIHZhbHVlOiBzbGlkZXJWYWx1ZSxcbiAgICAgIGRpc2FibGVkOiBzbGlkZXJWYWx1ZSA9PT0gbnVsbCxcbiAgICAgIHN0ZXA6IHRoaXMuX3N0ZXBTaXplLFxuICAgIH0pO1xuICAgIHRoaXMuX3VwZGF0ZVNldFRlbXAodWlWYWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9nZW5TbGlkZXJWYWx1ZShcbiAgICBzdGF0ZU9iajogQ2xpbWF0ZUVudGl0eVxuICApOiBbc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCwgc3RyaW5nLCBzdHJpbmddIHtcbiAgICBsZXQgc2xpZGVyVHlwZTogc3RyaW5nO1xuICAgIGxldCBzbGlkZXJWYWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbDtcbiAgICBsZXQgdWlWYWx1ZTogc3RyaW5nO1xuXG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlID09PSBcInVuYXZhaWxhYmxlXCIpIHtcbiAgICAgIHNsaWRlclR5cGUgPSBcIm1pbi1yYW5nZVwiO1xuICAgICAgc2xpZGVyVmFsdWUgPSBudWxsO1xuICAgICAgdWlWYWx1ZSA9IHRoaXMuaGFzcyEubG9jYWxpemUoXCJzdGF0ZS5kZWZhdWx0LnVuYXZhaWxhYmxlXCIpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2xvdyAmJlxuICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoXG4gICAgKSB7XG4gICAgICBzbGlkZXJUeXBlID0gXCJyYW5nZVwiO1xuICAgICAgc2xpZGVyVmFsdWUgPSBgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2xvd30sICR7XG4gICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfaGlnaFxuICAgICAgfWA7XG4gICAgICB1aVZhbHVlID0gdGhpcy5mb3JtYXRUZW1wKFxuICAgICAgICBbXG4gICAgICAgICAgU3RyaW5nKHN0YXRlT2JqLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfbG93KSxcbiAgICAgICAgICBTdHJpbmcoc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoKSxcbiAgICAgICAgXSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNsaWRlclR5cGUgPSBcIm1pbi1yYW5nZVwiO1xuICAgICAgc2xpZGVyVmFsdWUgPSBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMudGVtcGVyYXR1cmUpKVxuICAgICAgICA/IHN0YXRlT2JqLmF0dHJpYnV0ZXMudGVtcGVyYXR1cmVcbiAgICAgICAgOiBudWxsO1xuICAgICAgdWlWYWx1ZSA9IHNsaWRlclZhbHVlICE9PSBudWxsID8gU3RyaW5nKHNsaWRlclZhbHVlKSA6IFwiXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtzbGlkZXJWYWx1ZSwgdWlWYWx1ZSwgc2xpZGVyVHlwZV07XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVTZXRUZW1wKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnNoYWRvd1Jvb3QhLnF1ZXJ5U2VsZWN0b3IoXCIjc2V0LXRlbXBlcmF0dXJlXCIpIS5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2RyYWdFdmVudChlKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlU2V0VGVtcCh0aGlzLmZvcm1hdFRlbXAoU3RyaW5nKGUudmFsdWUpLnNwbGl0KFwiLFwiKSwgdHJ1ZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0VGVtcGVyYXR1cmUoZSk6IHZvaWQge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldIGFzIENsaW1hdGVFbnRpdHk7XG4gICAgaWYgKFxuICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9sb3cgJiZcbiAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfaGlnaFxuICAgICkge1xuICAgICAgaWYgKGUuaGFuZGxlLmluZGV4ID09PSAxKSB7XG4gICAgICAgIHRoaXMuaGFzcyEuY2FsbFNlcnZpY2UoXCJjbGltYXRlXCIsIFwic2V0X3RlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICBlbnRpdHlfaWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5LFxuICAgICAgICAgIHRhcmdldF90ZW1wX2xvdzogZS5oYW5kbGUudmFsdWUsXG4gICAgICAgICAgdGFyZ2V0X3RlbXBfaGlnaDogc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGFzcyEuY2FsbFNlcnZpY2UoXCJjbGltYXRlXCIsIFwic2V0X3RlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICBlbnRpdHlfaWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5LFxuICAgICAgICAgIHRhcmdldF90ZW1wX2xvdzogc3RhdGVPYmouYXR0cmlidXRlcy50YXJnZXRfdGVtcF9sb3csXG4gICAgICAgICAgdGFyZ2V0X3RlbXBfaGlnaDogZS5oYW5kbGUudmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwiY2xpbWF0ZVwiLCBcInNldF90ZW1wZXJhdHVyZVwiLCB7XG4gICAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICAgIHRlbXBlcmF0dXJlOiBlLnZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVySWNvbihtb2RlOiBzdHJpbmcsIGN1cnJlbnRNb2RlOiBzdHJpbmcpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKCFtb2RlSWNvbnNbbW9kZV0pIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWljb25cbiAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHsgXCJzZWxlY3RlZC1pY29uXCI6IGN1cnJlbnRNb2RlID09PSBtb2RlIH0pfVwiXG4gICAgICAgIC5tb2RlPVwiJHttb2RlfVwiXG4gICAgICAgIC5pY29uPVwiJHttb2RlSWNvbnNbbW9kZV19XCJcbiAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9oYW5kbGVNb2RlQ2xpY2t9XCJcbiAgICAgID48L2hhLWljb24+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU1vcmVJbmZvKCkge1xuICAgIGZpcmVFdmVudCh0aGlzLCBcImhhc3MtbW9yZS1pbmZvXCIsIHtcbiAgICAgIGVudGl0eUlkOiB0aGlzLl9jb25maWchLmVudGl0eSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU1vZGVDbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5oYXNzIS5jYWxsU2VydmljZShcImNsaW1hdGVcIiwgXCJzZXRfaHZhY19tb2RlXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgICBodmFjX21vZGU6IChlLmN1cnJlbnRUYXJnZXQgYXMgYW55KS5tb2RlLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRUZW1wKHRlbXBzOiBzdHJpbmdbXSwgc3BhY2VTdGVwU2l6ZTogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgdGVtcHMgPSB0ZW1wcy5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAvLyBJZiB3ZSBhcmUgc2xpZGluZyB0aGUgc2xpZGVyLCBhcHBlbmQgMCB0byB0aGUgdGVtcGVyYXR1cmVzIGlmIHdlJ3JlXG4gICAgLy8gaGF2aW5nIGEgMC41IHN0ZXAgc2l6ZSwgc28gdGhhdCB0aGUgdGV4dCBkb2Vzbid0IGp1bXAgd2hpbGUgc2xpZGluZ1xuICAgIGlmIChzcGFjZVN0ZXBTaXplKSB7XG4gICAgICBjb25zdCBzdGVwU2l6ZSA9IHRoaXMuX3N0ZXBTaXplO1xuICAgICAgdGVtcHMgPSB0ZW1wcy5tYXAoKHZhbCkgPT5cbiAgICAgICAgdmFsLmluY2x1ZGVzKFwiLlwiKSB8fCBzdGVwU2l6ZSA9PT0gMSA/IHZhbCA6IGAke3ZhbH0uMGBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRlbXBzLmpvaW4oXCItXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdHlsZSgpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICAke3RoaXMuX3JvdW5kU2xpZGVyU3R5bGV9XG4gICAgICA8c3R5bGU+XG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgfVxuICAgICAgICBoYS1jYXJkIHtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIC0tcmFpbC1ib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgIC0tYXV0by1jb2xvcjogZ3JlZW47XG4gICAgICAgICAgLS1lY28tY29sb3I6IHNwcmluZ2dyZWVuO1xuICAgICAgICAgIC0tY29vbC1jb2xvcjogIzJiOWFmOTtcbiAgICAgICAgICAtLWhlYXQtY29sb3I6ICNmZjgxMDA7XG4gICAgICAgICAgLS1tYW51YWwtY29sb3I6ICM0NDczOWU7XG4gICAgICAgICAgLS1vZmYtY29sb3I6ICM4YThhOGE7XG4gICAgICAgICAgLS1mYW5fb25seS1jb2xvcjogIzhhOGE4YTtcbiAgICAgICAgICAtLWRyeS1jb2xvcjogI2VmYmQwNztcbiAgICAgICAgICAtLWlkbGUtY29sb3I6ICM4YThhOGE7XG4gICAgICAgICAgLS11bmtub3duLWNvbG9yOiAjYmFjO1xuICAgICAgICB9XG4gICAgICAgICNyb290IHtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgfVxuICAgICAgICAuYXV0byxcbiAgICAgICAgLmhlYXRfY29vbCB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1hdXRvLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAuY29vbCB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1jb29sLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAuaGVhdCB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1oZWF0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAubWFudWFsIHtcbiAgICAgICAgICAtLW1vZGUtY29sb3I6IHZhcigtLW1hbnVhbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgLm9mZiB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1vZmYtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5mYW5fb25seSB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1mYW5fb25seS1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgLmVjbyB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1lY28tY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5kcnkge1xuICAgICAgICAgIC0tbW9kZS1jb2xvcjogdmFyKC0tZHJ5LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAuaWRsZSB7XG4gICAgICAgICAgLS1tb2RlLWNvbG9yOiB2YXIoLS1pZGxlLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAudW5rbm93bi1tb2RlIHtcbiAgICAgICAgICAtLW1vZGUtY29sb3I6IHZhcigtLXVua25vd24tY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5uby10aXRsZSB7XG4gICAgICAgICAgLS10aXRsZS1wb3NpdGlvbi10b3A6IDMzJSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIC5sYXJnZSB7XG4gICAgICAgICAgLS10aGVybW9zdGF0LXBhZGRpbmctdG9wOiAyNXB4O1xuICAgICAgICAgIC0tdGhlcm1vc3RhdC1tYXJnaW4tYm90dG9tOiAyNXB4O1xuICAgICAgICAgIC0tdGl0bGUtZm9udC1zaXplOiAyOHB4O1xuICAgICAgICAgIC0tdGl0bGUtcG9zaXRpb24tdG9wOiAyNyU7XG4gICAgICAgICAgLS1jbGltYXRlLWluZm8tcG9zaXRpb24tdG9wOiA4MSU7XG4gICAgICAgICAgLS1zZXQtdGVtcGVyYXR1cmUtZm9udC1zaXplOiAyNXB4O1xuICAgICAgICAgIC0tY3VycmVudC10ZW1wZXJhdHVyZS1mb250LXNpemU6IDcxcHg7XG4gICAgICAgICAgLS1jdXJyZW50LXRlbXBlcmF0dXJlLXBvc2l0aW9uLXRvcDogMTAlO1xuICAgICAgICAgIC0tY3VycmVudC10ZW1wZXJhdHVyZS10ZXh0LXBhZGRpbmctbGVmdDogMTVweDtcbiAgICAgICAgICAtLXVvbS1mb250LXNpemU6IDIwcHg7XG4gICAgICAgICAgLS11b20tbWFyZ2luLWxlZnQ6IC0xOHB4O1xuICAgICAgICAgIC0tY3VycmVudC1tb2RlLWZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgICAtLXNldC10ZW1wZXJhdHVyZS1tYXJnaW4tYm90dG9tOiAtNXB4O1xuICAgICAgICB9XG4gICAgICAgIC5zbWFsbCB7XG4gICAgICAgICAgLS10aGVybW9zdGF0LXBhZGRpbmctdG9wOiAxNXB4O1xuICAgICAgICAgIC0tdGhlcm1vc3RhdC1tYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIC0tdGl0bGUtZm9udC1zaXplOiAxOHB4O1xuICAgICAgICAgIC0tdGl0bGUtcG9zaXRpb24tdG9wOiAyOCU7XG4gICAgICAgICAgLS1jbGltYXRlLWluZm8tcG9zaXRpb24tdG9wOiA3OSU7XG4gICAgICAgICAgLS1zZXQtdGVtcGVyYXR1cmUtZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgIC0tY3VycmVudC10ZW1wZXJhdHVyZS1mb250LXNpemU6IDI1cHg7XG4gICAgICAgICAgLS1jdXJyZW50LXRlbXBlcmF0dXJlLXBvc2l0aW9uLXRvcDogNSU7XG4gICAgICAgICAgLS1jdXJyZW50LXRlbXBlcmF0dXJlLXRleHQtcGFkZGluZy1sZWZ0OiA3cHg7XG4gICAgICAgICAgLS11b20tZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIC0tdW9tLW1hcmdpbi1sZWZ0OiAtNXB4O1xuICAgICAgICAgIC0tY3VycmVudC1tb2RlLWZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAtLXNldC10ZW1wZXJhdHVyZS1tYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgI3RoZXJtb3N0YXQge1xuICAgICAgICAgIG1hcmdpbjogMCBhdXRvIHZhcigtLXRoZXJtb3N0YXQtbWFyZ2luLWJvdHRvbSk7XG4gICAgICAgICAgcGFkZGluZy10b3A6IHZhcigtLXRoZXJtb3N0YXQtcGFkZGluZy10b3ApO1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1yYW5nZS1jb2xvciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbW9kZS1jb2xvciwgdmFyKC0tZGlzYWJsZWQtdGV4dC1jb2xvcikpO1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1wYXRoLWNvbG9yIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAjdGhlcm1vc3RhdCAucnMtaGFuZGxlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYXBlci1jYXJkLWJhY2tncm91bmQtY29sb3IsIHdoaXRlKTtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIG1hcmdpbjogLTEwcHggMCAwIC04cHggIWltcG9ydGFudDtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAjdGhlcm1vc3RhdCAucnMtaGFuZGxlLnJzLWZvY3VzIHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLW1vZGUtY29sb3IsIHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpKTtcbiAgICAgICAgfVxuICAgICAgICAjdGhlcm1vc3RhdCAucnMtaGFuZGxlOmFmdGVyIHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLW1vZGUtY29sb3IsIHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpKTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tb2RlLWNvbG9yLCB2YXIoLS1kaXNhYmxlZC10ZXh0LWNvbG9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgI3RoZXJtb3N0YXQgLnJzLWJvcmRlciB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1yYWlsLWJvcmRlci1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgI3RoZXJtb3N0YXQgLnJzLWJhci5ycy10cmFuc2l0aW9uLnJzLWZpcnN0LFxuICAgICAgICAucnMtYmFyLnJzLXRyYW5zaXRpb24ucnMtc2Vjb25kIHtcbiAgICAgICAgICB6LWluZGV4OiAyMCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1yZWFkb25seSB7XG4gICAgICAgICAgei1pbmRleDogMTA7XG4gICAgICAgICAgdG9wOiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1pbm5lci5ycy1iZy1jb2xvci5ycy1ib3JkZXIsXG4gICAgICAgICN0aGVybW9zdGF0IC5ycy1vdmVybGF5LnJzLXRyYW5zaXRpb24ucnMtYmctY29sb3Ige1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhcGVyLWNhcmQtYmFja2dyb3VuZC1jb2xvciwgd2hpdGUpO1xuICAgICAgICB9XG4gICAgICAgICN0b29sdGlwIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICB6LWluZGV4OiAxNTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAjc2V0LXRlbXBlcmF0dXJlIHtcbiAgICAgICAgICBmb250LXNpemU6IHZhcigtLXNldC10ZW1wZXJhdHVyZS1mb250LXNpemUpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IHZhcigtLXNldC10ZW1wZXJhdHVyZS1tYXJnaW4tYm90dG9tKTtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAxLjJlbTtcbiAgICAgICAgfVxuICAgICAgICAudGl0bGUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tdGl0bGUtZm9udC1zaXplKTtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiB2YXIoLS10aXRsZS1wb3NpdGlvbi10b3ApO1xuICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgfVxuICAgICAgICAuY2xpbWF0ZS1pbmZvIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiB2YXIoLS1jbGltYXRlLWluZm8tcG9zaXRpb24tdG9wKTtcbiAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgLmN1cnJlbnQtbW9kZSB7XG4gICAgICAgICAgZm9udC1zaXplOiB2YXIoLS1jdXJyZW50LW1vZGUtZm9udC1zaXplKTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5tb2RlcyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAubW9kZXMgaGEtaWNvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgbWFyZ2luOiAwIDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLm1vZGVzIGhhLWljb24uc2VsZWN0ZWQtaWNvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLW1vZGUtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5jdXJyZW50LXRlbXBlcmF0dXJlIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tY3VycmVudC10ZW1wZXJhdHVyZS1mb250LXNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC5jdXJyZW50LXRlbXBlcmF0dXJlLXRleHQge1xuICAgICAgICAgIHBhZGRpbmctbGVmdDogdmFyKC0tY3VycmVudC10ZW1wZXJhdHVyZS10ZXh0LXBhZGRpbmctbGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgLnVvbSB7XG4gICAgICAgICAgZm9udC1zaXplOiB2YXIoLS11b20tZm9udC1zaXplKTtcbiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiB2YXIoLS11b20tbWFyZ2luLWxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIC5tb3JlLWluZm8ge1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgIHotaW5kZXg6IDI1O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIDwvc3R5bGU+XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXRoZXJtb3N0YXQtY2FyZFwiOiBIdWlUaGVybW9zdGF0Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgaHRtbCwgVGVtcGxhdGVSZXN1bHQgfSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgY29tcHV0ZUNhcmRTaXplIH0gZnJvbSBcIi4uL2NvbW1vbi9jb21wdXRlLWNhcmQtc2l6ZVwiO1xuaW1wb3J0IHsgSHVpU3RhY2tDYXJkIH0gZnJvbSBcIi4vaHVpLXN0YWNrLWNhcmRcIjtcblxuY2xhc3MgSHVpVmVydGljYWxTdGFja0NhcmQgZXh0ZW5kcyBIdWlTdGFja0NhcmQge1xuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKSB7XG4gICAgbGV0IHRvdGFsU2l6ZSA9IDA7XG5cbiAgICBpZiAoIXRoaXMuX2NhcmRzKSB7XG4gICAgICByZXR1cm4gdG90YWxTaXplO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLl9jYXJkcykge1xuICAgICAgdG90YWxTaXplICs9IGNvbXB1dGVDYXJkU2l6ZShlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdG90YWxTaXplO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlclN0eWxlKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgI3Jvb3Qge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICAjcm9vdCA+ICoge1xuICAgICAgICAgIG1hcmdpbjogNHB4IDAgNHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgI3Jvb3QgPiAqOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICB9XG4gICAgICAgICNyb290ID4gKjpsYXN0LWNoaWxkIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS12ZXJ0aWNhbC1zdGFjay1jYXJkXCI6IEh1aVZlcnRpY2FsU3RhY2tDYXJkO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS12ZXJ0aWNhbC1zdGFjay1jYXJkXCIsIEh1aVZlcnRpY2FsU3RhY2tDYXJkKTtcbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IGlzVmFsaWRFbnRpdHlJZCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3ZhbGlkX2VudGl0eV9pZFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQsIExvdmVsYWNlQ2FyZEVkaXRvciB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgV2VhdGhlckZvcmVjYXN0Q2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBjb21wdXRlUlRMIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyB0b2dnbGVBdHRyaWJ1dGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS90b2dnbGVfYXR0cmlidXRlXCI7XG5cbmNvbnN0IGNhcmRpbmFsRGlyZWN0aW9ucyA9IFtcbiAgXCJOXCIsXG4gIFwiTk5FXCIsXG4gIFwiTkVcIixcbiAgXCJFTkVcIixcbiAgXCJFXCIsXG4gIFwiRVNFXCIsXG4gIFwiU0VcIixcbiAgXCJTU0VcIixcbiAgXCJTXCIsXG4gIFwiU1NXXCIsXG4gIFwiU1dcIixcbiAgXCJXU1dcIixcbiAgXCJXXCIsXG4gIFwiV05XXCIsXG4gIFwiTldcIixcbiAgXCJOTldcIixcbiAgXCJOXCIsXG5dO1xuXG5jb25zdCB3ZWF0aGVySWNvbnMgPSB7XG4gIFwiY2xlYXItbmlnaHRcIjogXCJoYXNzOndlYXRoZXItbmlnaHRcIixcbiAgY2xvdWR5OiBcImhhc3M6d2VhdGhlci1jbG91ZHlcIixcbiAgZXhjZXB0aW9uYWw6IFwiaGFzczphbGVydC1jaXJjbGUtb3V0bGluZVwiLFxuICBmb2c6IFwiaGFzczp3ZWF0aGVyLWZvZ1wiLFxuICBoYWlsOiBcImhhc3M6d2VhdGhlci1oYWlsXCIsXG4gIGxpZ2h0bmluZzogXCJoYXNzOndlYXRoZXItbGlnaHRuaW5nXCIsXG4gIFwibGlnaHRuaW5nLXJhaW55XCI6IFwiaGFzczp3ZWF0aGVyLWxpZ2h0bmluZy1yYWlueVwiLFxuICBwYXJ0bHljbG91ZHk6IFwiaGFzczp3ZWF0aGVyLXBhcnRseS1jbG91ZHlcIixcbiAgcG91cmluZzogXCJoYXNzOndlYXRoZXItcG91cmluZ1wiLFxuICByYWlueTogXCJoYXNzOndlYXRoZXItcmFpbnlcIixcbiAgc25vd3k6IFwiaGFzczp3ZWF0aGVyLXNub3d5XCIsXG4gIFwic25vd3ktcmFpbnlcIjogXCJoYXNzOndlYXRoZXItc25vd3ktcmFpbnlcIixcbiAgc3Vubnk6IFwiaGFzczp3ZWF0aGVyLXN1bm55XCIsXG4gIHdpbmR5OiBcImhhc3M6d2VhdGhlci13aW5keVwiLFxuICBcIndpbmR5LXZhcmlhbnRcIjogXCJoYXNzOndlYXRoZXItd2luZHktdmFyaWFudFwiLFxufTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktd2VhdGhlci1mb3JlY2FzdC1jYXJkXCIpXG5jbGFzcyBIdWlXZWF0aGVyRm9yZWNhc3RDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpOiBQcm9taXNlPExvdmVsYWNlQ2FyZEVkaXRvcj4ge1xuICAgIGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmQtZWRpdG9yXCIgKi8gXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXdlYXRoZXItZm9yZWNhc3QtY2FyZC1lZGl0b3JcIik7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHsgZW50aXR5OiBcIlwiIH07XG4gIH1cblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogV2VhdGhlckZvcmVjYXN0Q2FyZENvbmZpZztcblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gNDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBXZWF0aGVyRm9yZWNhc3RDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2FyZCBjb25maWd1cmF0aW9uXCIpO1xuICAgIH1cbiAgICBpZiAoIWlzVmFsaWRFbnRpdHlJZChjb25maWcuZW50aXR5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBFbnRpdHlcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikpIHtcbiAgICAgIHRvZ2dsZUF0dHJpYnV0ZSh0aGlzLCBcInJ0bFwiLCBjb21wdXRlUlRMKHRoaXMuaGFzcyEpKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgY29uc3QgZm9yZWNhc3QgPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmZvcmVjYXN0XG4gICAgICA/IHN0YXRlT2JqLmF0dHJpYnV0ZXMuZm9yZWNhc3Quc2xpY2UoMCwgNSlcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtY2FyZCBAY2xpY2s9XCIke3RoaXMuaGFuZGxlQ2xpY2t9XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAke3RoaXMuaGFzcy5sb2NhbGl6ZShgc3RhdGUud2VhdGhlci4ke3N0YXRlT2JqLnN0YXRlfWApIHx8XG4gICAgICAgICAgICBzdGF0ZU9iai5zdGF0ZX1cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZVwiPlxuICAgICAgICAgICAgJHsodGhpcy5fY29uZmlnICYmIHRoaXMuX2NvbmZpZy5uYW1lKSB8fCBjb21wdXRlU3RhdGVOYW1lKHN0YXRlT2JqKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm5vd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW5cIj5cbiAgICAgICAgICAgICAgJHtzdGF0ZU9iai5zdGF0ZSBpbiB3ZWF0aGVySWNvbnNcbiAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxoYS1pY29uIGljb249XCIke3dlYXRoZXJJY29uc1tzdGF0ZU9iai5zdGF0ZV19XCI+PC9oYS1pY29uPlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlbXBcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMudGVtcGVyYXR1cmV9PHNwYW5cbiAgICAgICAgICAgICAgICAgID4ke3RoaXMuZ2V0VW5pdChcInRlbXBlcmF0dXJlXCIpfTwvc3BhblxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdHRyaWJ1dGVzXCI+XG4gICAgICAgICAgICAgICR7dGhpcy5fc2hvd1ZhbHVlKHN0YXRlT2JqLmF0dHJpYnV0ZXMucHJlc3N1cmUpXG4gICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5jYXJkLndlYXRoZXIuYXR0cmlidXRlcy5haXJfcHJlc3N1cmVcIlxuICAgICAgICAgICAgICAgICAgICAgICl9OlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVhc3VyYW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMucHJlc3N1cmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuZ2V0VW5pdChcImFpcl9wcmVzc3VyZVwiKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgJHt0aGlzLl9zaG93VmFsdWUoc3RhdGVPYmouYXR0cmlidXRlcy5odW1pZGl0eSlcbiAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVpLmNhcmQud2VhdGhlci5hdHRyaWJ1dGVzLmh1bWlkaXR5XCJcbiAgICAgICAgICAgICAgICAgICAgICApfTpcbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lYXN1cmFuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+JHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmh1bWlkaXR5fSAlPC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICR7dGhpcy5fc2hvd1ZhbHVlKHN0YXRlT2JqLmF0dHJpYnV0ZXMud2luZF9zcGVlZClcbiAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVpLmNhcmQud2VhdGhlci5hdHRyaWJ1dGVzLndpbmRfc3BlZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICl9OlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWVhc3VyYW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMud2luZF9zcGVlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5nZXRVbml0KFwibGVuZ3RoXCIpfS9oXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5nZXRXaW5kQmVhcmluZyhzdGF0ZU9iai5hdHRyaWJ1dGVzLndpbmRfYmVhcmluZyl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICR7Zm9yZWNhc3RcbiAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9yZWNhc3RcIj5cbiAgICAgICAgICAgICAgICAgICR7Zm9yZWNhc3QubWFwKFxuICAgICAgICAgICAgICAgICAgICAoaXRlbSkgPT4gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIndlZWtkYXlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHtuZXcgRGF0ZShpdGVtLmRhdGV0aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sYW5ndWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHdlZWtkYXk6IFwic2hvcnRcIiB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9PGJyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7IXRoaXMuX3Nob3dWYWx1ZShpdGVtLnRlbXBsb3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke25ldyBEYXRlKGl0ZW0uZGF0ZXRpbWUpLnRvTG9jYWxlVGltZVN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc3MhLmxhbmd1YWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaG91cjogXCJudW1lcmljXCIgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLl9zaG93VmFsdWUoaXRlbS5jb25kaXRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoYS1pY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmljb249XCIke3dlYXRoZXJJY29uc1tpdGVtLmNvbmRpdGlvbl19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLl9zaG93VmFsdWUoaXRlbS50ZW1wZXJhdHVyZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRlbXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLnRlbXBlcmF0dXJlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuZ2V0VW5pdChcInRlbXBlcmF0dXJlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX3Nob3dWYWx1ZShpdGVtLnRlbXBsb3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW1wbG93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXRlbS50ZW1wbG93fSAke3RoaXMuZ2V0VW5pdChcInRlbXBlcmF0dXJlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX3Nob3dWYWx1ZShpdGVtLnByZWNpcGl0YXRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmVjaXBpdGF0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXRlbS5wcmVjaXBpdGF0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuZ2V0VW5pdChcInByZWNpcGl0YXRpb25cIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJoYXNzLW1vcmUtaW5mb1wiLCB7IGVudGl0eUlkOiB0aGlzLl9jb25maWchLmVudGl0eSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VW5pdChtZWFzdXJlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxlbmd0aFVuaXQgPSB0aGlzLmhhc3MhLmNvbmZpZy51bml0X3N5c3RlbS5sZW5ndGggfHwgXCJcIjtcbiAgICBzd2l0Y2ggKG1lYXN1cmUpIHtcbiAgICAgIGNhc2UgXCJhaXJfcHJlc3N1cmVcIjpcbiAgICAgICAgcmV0dXJuIGxlbmd0aFVuaXQgPT09IFwia21cIiA/IFwiaFBhXCIgOiBcImluSGdcIjtcbiAgICAgIGNhc2UgXCJsZW5ndGhcIjpcbiAgICAgICAgcmV0dXJuIGxlbmd0aFVuaXQ7XG4gICAgICBjYXNlIFwicHJlY2lwaXRhdGlvblwiOlxuICAgICAgICByZXR1cm4gbGVuZ3RoVW5pdCA9PT0gXCJrbVwiID8gXCJtbVwiIDogXCJpblwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzcyEuY29uZmlnLnVuaXRfc3lzdGVtW21lYXN1cmVdIHx8IFwiXCI7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3aW5kQmVhcmluZ1RvVGV4dChkZWdyZWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVncmVlbnVtID0gcGFyc2VJbnQoZGVncmVlLCAxMCk7XG4gICAgaWYgKGlzRmluaXRlKGRlZ3JlZW51bSkpIHtcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tYml0d2lzZVxuICAgICAgcmV0dXJuIGNhcmRpbmFsRGlyZWN0aW9uc1soKChkZWdyZWVudW0gKyAxMS4yNSkgLyAyMi41KSB8IDApICUgMTZdO1xuICAgIH1cbiAgICByZXR1cm4gZGVncmVlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRXaW5kQmVhcmluZyhiZWFyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChiZWFyaW5nICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGNhcmRpbmFsRGlyZWN0aW9uID0gdGhpcy53aW5kQmVhcmluZ1RvVGV4dChiZWFyaW5nKTtcbiAgICAgIHJldHVybiBgKCR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgYHVpLmNhcmQud2VhdGhlci5jYXJkaW5hbF9kaXJlY3Rpb24uJHtjYXJkaW5hbERpcmVjdGlvbi50b0xvd2VyQ2FzZSgpfWBcbiAgICAgICkgfHwgY2FyZGluYWxEaXJlY3Rpb259KWA7XG4gICAgfVxuICAgIHJldHVybiBgYDtcbiAgfVxuXG4gIHByaXZhdGUgX3Nob3dWYWx1ZShpdGVtOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHlwZW9mIGl0ZW0gIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlbSAhPT0gbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDAgMjBweCAyMHB4O1xuICAgICAgfVxuXG4gICAgICBoYS1pY29uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWl0ZW0taWNvbi1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIC5oZWFkZXIge1xuICAgICAgICBmb250LWZhbWlseTogdmFyKC0tcGFwZXItZm9udC1oZWFkbGluZV8tX2ZvbnQtZmFtaWx5KTtcbiAgICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogdmFyKFxuICAgICAgICAgIC0tcGFwZXItZm9udC1oZWFkbGluZV8tXy13ZWJraXQtZm9udC1zbW9vdGhpbmdcbiAgICAgICAgKTtcbiAgICAgICAgZm9udC1zaXplOiB2YXIoLS1wYXBlci1mb250LWhlYWRsaW5lXy1fZm9udC1zaXplKTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLXBhcGVyLWZvbnQtaGVhZGxpbmVfLV9mb250LXdlaWdodCk7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiB2YXIoLS1wYXBlci1mb250LWhlYWRsaW5lXy1fbGV0dGVyLXNwYWNpbmcpO1xuICAgICAgICBsaW5lLWhlaWdodDogdmFyKC0tcGFwZXItZm9udC1oZWFkbGluZV8tX2xpbmUtaGVpZ2h0KTtcbiAgICAgICAgdGV4dC1yZW5kZXJpbmc6IHZhcihcbiAgICAgICAgICAtLXBhcGVyLWZvbnQtY29tbW9uLWV4cGVuc2l2ZS1rZXJuaW5nXy1fdGV4dC1yZW5kZXJpbmdcbiAgICAgICAgKTtcbiAgICAgICAgb3BhY2l0eTogdmFyKC0tZGFyay1wcmltYXJ5LW9wYWNpdHkpO1xuICAgICAgICBwYWRkaW5nOiAyNHB4IDE2cHggMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xuICAgICAgfVxuXG4gICAgICAubmFtZSB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtydGxdKSAubmFtZSB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwcHg7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTZweDtcbiAgICAgIH1cblxuICAgICAgLm5vdyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAubWFpbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMzJweDtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tYWluIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tYWluIGhhLWljb24ge1xuICAgICAgICAtLWlyb24taWNvbi1oZWlnaHQ6IDcycHg7XG4gICAgICAgIC0taXJvbi1pY29uLXdpZHRoOiA3MnB4O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tYWluIGhhLWljb24ge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDBweDtcbiAgICAgIH1cblxuICAgICAgLm1haW4gLnRlbXAge1xuICAgICAgICBmb250LXNpemU6IDUycHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxZW07XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tYWluIC50ZW1wIHtcbiAgICAgICAgZGlyZWN0aW9uOiBsdHI7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMjhweDtcbiAgICAgIH1cblxuICAgICAgLm1haW4gLnRlbXAgc3BhbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDFlbTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDRweDtcbiAgICAgIH1cblxuICAgICAgLm1lYXN1cmFuZCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3J0bF0pIC5tZWFzdXJhbmQge1xuICAgICAgICBkaXJlY3Rpb246IGx0cjtcbiAgICAgIH1cblxuICAgICAgLmZvcmVjYXN0IHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfVxuXG4gICAgICAuZm9yZWNhc3QgZGl2IHtcbiAgICAgICAgZmxleDogMCAwIGF1dG87XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLmZvcmVjYXN0IC5pY29uIHtcbiAgICAgICAgbWFyZ2luOiA0cHggMDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbcnRsXSkgLmZvcmVjYXN0IC50ZW1wIHtcbiAgICAgICAgZGlyZWN0aW9uOiBsdHI7XG4gICAgICB9XG5cbiAgICAgIC53ZWVrZGF5IHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICB9XG5cbiAgICAgIC5hdHRyaWJ1dGVzLFxuICAgICAgLnRlbXBsb3csXG4gICAgICAucHJlY2lwaXRhdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtydGxdKSAucHJlY2lwaXRhdGlvbiB7XG4gICAgICAgIGRpcmVjdGlvbjogbHRyO1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmRcIjogSHVpV2VhdGhlckZvcmVjYXN0Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTG92ZWxhY2VFbGVtZW50LCBMb3ZlbGFjZUVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi4vLi4vZWxlbWVudHMvdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUh1aUVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2NyZWF0ZS1odWktZWxlbWVudFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3R5bGVkSHVpRWxlbWVudChcbiAgZWxlbWVudENvbmZpZzogTG92ZWxhY2VFbGVtZW50Q29uZmlnXG4pOiBMb3ZlbGFjZUVsZW1lbnQge1xuICBjb25zdCBlbGVtZW50ID0gY3JlYXRlSHVpRWxlbWVudChlbGVtZW50Q29uZmlnKSBhcyBMb3ZlbGFjZUVsZW1lbnQ7XG4gIC8vIGtlZXAgY29uZGl0aW9uYWwgY2FyZCBhcyBhIHRyYW5zcGFyZW50IGNvbnRhaW5lciBzbyBsZXQgaXRzIHBvc2l0aW9uIHJlbWFpbiBzdGF0aWNcbiAgaWYgKGVsZW1lbnQudGFnTmFtZSAhPT0gXCJIVUktQ09ORElUSU9OQUwtRUxFTUVOVFwiKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudFwiKTtcbiAgfVxuXG4gIGlmIChlbGVtZW50Q29uZmlnLnN0eWxlKSB7XG4gICAgT2JqZWN0LmtleXMoZWxlbWVudENvbmZpZy5zdHlsZSkuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLCBlbGVtZW50Q29uZmlnLnN0eWxlW3Byb3BdKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuIiwiaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgQ2FsbFNlcnZpY2VDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IGNhbGxTZXJ2aWNlID0gKFxuICBjb25maWc6IENhbGxTZXJ2aWNlQ29uZmlnLFxuICBoYXNzOiBIb21lQXNzaXN0YW50XG4pOiB2b2lkID0+IHtcbiAgY29uc3QgZW50aXR5SWQgPSBjb25maWcuZW50aXR5O1xuICBjb25zdCBbZG9tYWluLCBzZXJ2aWNlXSA9IGNvbmZpZy5zZXJ2aWNlLnNwbGl0KFwiLlwiLCAyKTtcbiAgY29uc3Qgc2VydmljZURhdGEgPSB7IGVudGl0eV9pZDogZW50aXR5SWQsIC4uLmNvbmZpZy5zZXJ2aWNlX2RhdGEgfTtcbiAgaGFzcy5jYWxsU2VydmljZShkb21haW4sIHNlcnZpY2UsIHNlcnZpY2VEYXRhKTtcbn07XG4iLCJpbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVDYXJkU2l6ZSA9IChjYXJkOiBMb3ZlbGFjZUNhcmQpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gdHlwZW9mIGNhcmQuZ2V0Q2FyZFNpemUgPT09IFwiZnVuY3Rpb25cIiA/IGNhcmQuZ2V0Q2FyZFNpemUoKSA6IDE7XG59O1xuIiwiaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VFbGVtZW50Q29uZmlnIH0gZnJvbSBcIi4uL2VsZW1lbnRzL3R5cGVzXCI7XG5pbXBvcnQgeyBBY3Rpb25Db25maWcgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuXG5pbnRlcmZhY2UgQ29uZmlnIGV4dGVuZHMgTG92ZWxhY2VFbGVtZW50Q29uZmlnIHtcbiAgZW50aXR5Pzogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgdGFwX2FjdGlvbj86IEFjdGlvbkNvbmZpZztcbiAgaG9sZF9hY3Rpb24/OiBBY3Rpb25Db25maWc7XG59XG5cbmV4cG9ydCBjb25zdCBjb21wdXRlVG9vbHRpcCA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBjb25maWc6IENvbmZpZyk6IHN0cmluZyA9PiB7XG4gIGlmIChjb25maWcudGl0bGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIGlmIChjb25maWcudGl0bGUpIHtcbiAgICByZXR1cm4gY29uZmlnLnRpdGxlO1xuICB9XG5cbiAgbGV0IHN0YXRlTmFtZSA9IFwiXCI7XG4gIGxldCB0b29sdGlwID0gXCJcIjtcblxuICBpZiAoY29uZmlnLmVudGl0eSkge1xuICAgIHN0YXRlTmFtZSA9XG4gICAgICBjb25maWcuZW50aXR5IGluIGhhc3Muc3RhdGVzXG4gICAgICAgID8gY29tcHV0ZVN0YXRlTmFtZShoYXNzLnN0YXRlc1tjb25maWcuZW50aXR5XSlcbiAgICAgICAgOiBjb25maWcuZW50aXR5O1xuICB9XG5cbiAgY29uc3QgdGFwVG9vbHRpcCA9IGNvbmZpZy50YXBfYWN0aW9uXG4gICAgPyBjb21wdXRlQWN0aW9uVG9vbHRpcChoYXNzLCBzdGF0ZU5hbWUsIGNvbmZpZy50YXBfYWN0aW9uLCBmYWxzZSlcbiAgICA6IFwiXCI7XG4gIGNvbnN0IGhvbGRUb29sdGlwID0gY29uZmlnLmhvbGRfYWN0aW9uXG4gICAgPyBjb21wdXRlQWN0aW9uVG9vbHRpcChoYXNzLCBzdGF0ZU5hbWUsIGNvbmZpZy5ob2xkX2FjdGlvbiwgdHJ1ZSlcbiAgICA6IFwiXCI7XG5cbiAgY29uc3QgbmV3bGluZSA9IHRhcFRvb2x0aXAgJiYgaG9sZFRvb2x0aXAgPyBcIlxcblwiIDogXCJcIjtcblxuICB0b29sdGlwID0gdGFwVG9vbHRpcCArIG5ld2xpbmUgKyBob2xkVG9vbHRpcDtcblxuICByZXR1cm4gdG9vbHRpcDtcbn07XG5cbmZ1bmN0aW9uIGNvbXB1dGVBY3Rpb25Ub29sdGlwKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBzdGF0ZTogc3RyaW5nLFxuICBjb25maWc6IEFjdGlvbkNvbmZpZyxcbiAgaXNIb2xkOiBib29sZWFuXG4pIHtcbiAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5hY3Rpb24gfHwgY29uZmlnLmFjdGlvbiA9PT0gXCJub25lXCIpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIGxldCB0b29sdGlwID1cbiAgICAoaXNIb2xkXG4gICAgICA/IGhhc3MubG9jYWxpemUoXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLmhvbGRcIilcbiAgICAgIDogaGFzcy5sb2NhbGl6ZShcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnBpY3R1cmUtZWxlbWVudHMudGFwXCIpKSArIFwiIFwiO1xuXG4gIHN3aXRjaCAoY29uZmlnLmFjdGlvbikge1xuICAgIGNhc2UgXCJuYXZpZ2F0ZVwiOlxuICAgICAgdG9vbHRpcCArPSBgJHtoYXNzLmxvY2FsaXplKFxuICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLnBpY3R1cmUtZWxlbWVudHMubmF2aWdhdGVfdG9cIixcbiAgICAgICAgXCJsb2NhdGlvblwiLFxuICAgICAgICBjb25maWcubmF2aWdhdGlvbl9wYXRoXG4gICAgICApfWA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwidXJsXCI6XG4gICAgICB0b29sdGlwICs9IGAke2hhc3MubG9jYWxpemUoXG4gICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuY2FyZHMucGljdHVyZS1lbGVtZW50cy51cmxcIixcbiAgICAgICAgXCJ1cmxfcGF0aFwiLFxuICAgICAgICBjb25maWcudXJsX3BhdGhcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJ0b2dnbGVcIjpcbiAgICAgIHRvb2x0aXAgKz0gYCR7aGFzcy5sb2NhbGl6ZShcbiAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLnRvZ2dsZVwiLFxuICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgc3RhdGVcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxsLXNlcnZpY2VcIjpcbiAgICAgIHRvb2x0aXAgKz0gYCR7aGFzcy5sb2NhbGl6ZShcbiAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLmNhbGxfc2VydmljZVwiLFxuICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgY29uZmlnLnNlcnZpY2VcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJtb3JlLWluZm9cIjpcbiAgICAgIHRvb2x0aXAgKz0gYCR7aGFzcy5sb2NhbGl6ZShcbiAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5waWN0dXJlLWVsZW1lbnRzLm1vcmVfaW5mb1wiLFxuICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgc3RhdGVcbiAgICAgICl9YDtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHRvb2x0aXA7XG59XG4iLCJpbXBvcnQgZGVlcENsb25lIGZyb20gXCJkZWVwLWNsb25lLXNpbXBsZVwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5cbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1hbGFybS1wYW5lbC1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktY29uZGl0aW9uYWwtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWVudGl0aWVzLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1lbnRpdHktYnV0dG9uLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1lbnRpdHktZmlsdGVyLWNhcmRcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUVycm9yQ2FyZEVsZW1lbnQsXG4gIGNyZWF0ZUVycm9yQ2FyZENvbmZpZyxcbiAgSHVpRXJyb3JDYXJkLFxufSBmcm9tIFwiLi4vY2FyZHMvaHVpLWVycm9yLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1nbGFuY2UtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWhpc3RvcnktZ3JhcGgtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWhvcml6b250YWwtc3RhY2stY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLWlmcmFtZS1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktbGlnaHQtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLW1hcC1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktbWFya2Rvd24tY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLW1lZGlhLWNvbnRyb2wtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXBpY3R1cmUtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXBpY3R1cmUtZWxlbWVudHMtY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXBpY3R1cmUtZW50aXR5LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1waWN0dXJlLWdsYW5jZS1jYXJkXCI7XG5pbXBvcnQgXCIuLi9jYXJkcy9odWktcGxhbnQtc3RhdHVzLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1zZW5zb3ItY2FyZFwiO1xuaW1wb3J0IFwiLi4vY2FyZHMvaHVpLXZlcnRpY2FsLXN0YWNrLWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1zaG9wcGluZy1saXN0LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS10aGVybW9zdGF0LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS13ZWF0aGVyLWZvcmVjYXN0LWNhcmRcIjtcbmltcG9ydCBcIi4uL2NhcmRzL2h1aS1nYXVnZS1jYXJkXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZENvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2xvdmVsYWNlXCI7XG5cbmNvbnN0IENBUkRfVFlQRVMgPSBuZXcgU2V0KFtcbiAgXCJhbGFybS1wYW5lbFwiLFxuICBcImNvbmRpdGlvbmFsXCIsXG4gIFwiZW50aXRpZXNcIixcbiAgXCJlbnRpdHktYnV0dG9uXCIsXG4gIFwiZW50aXR5LWZpbHRlclwiLFxuICBcImVycm9yXCIsXG4gIFwiZ2F1Z2VcIixcbiAgXCJnbGFuY2VcIixcbiAgXCJoaXN0b3J5LWdyYXBoXCIsXG4gIFwiaG9yaXpvbnRhbC1zdGFja1wiLFxuICBcImlmcmFtZVwiLFxuICBcImxpZ2h0XCIsXG4gIFwibWFwXCIsXG4gIFwibWFya2Rvd25cIixcbiAgXCJtZWRpYS1jb250cm9sXCIsXG4gIFwicGljdHVyZVwiLFxuICBcInBpY3R1cmUtZWxlbWVudHNcIixcbiAgXCJwaWN0dXJlLWVudGl0eVwiLFxuICBcInBpY3R1cmUtZ2xhbmNlXCIsXG4gIFwicGxhbnQtc3RhdHVzXCIsXG4gIFwic2Vuc29yXCIsXG4gIFwic2hvcHBpbmctbGlzdFwiLFxuICBcInRoZXJtb3N0YXRcIixcbiAgXCJ2ZXJ0aWNhbC1zdGFja1wiLFxuICBcIndlYXRoZXItZm9yZWNhc3RcIixcbl0pO1xuY29uc3QgQ1VTVE9NX1RZUEVfUFJFRklYID0gXCJjdXN0b206XCI7XG5jb25zdCBUSU1FT1VUID0gMjAwMDtcblxuY29uc3QgX2NyZWF0ZUVsZW1lbnQgPSAoXG4gIHRhZzogc3RyaW5nLFxuICBjb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZ1xuKTogTG92ZWxhY2VDYXJkIHwgSHVpRXJyb3JDYXJkID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gIHRyeSB7XG4gICAgZWxlbWVudC5zZXRDb25maWcoZGVlcENsb25lKGNvbmZpZykpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBjb25zb2xlLmVycm9yKHRhZywgZXJyKTtcbiAgICByZXR1cm4gX2NyZWF0ZUVycm9yRWxlbWVudChlcnIubWVzc2FnZSwgY29uZmlnKTtcbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbmNvbnN0IF9jcmVhdGVFcnJvckVsZW1lbnQgPSAoXG4gIGVycm9yOiBzdHJpbmcsXG4gIGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnXG4pOiBIdWlFcnJvckNhcmQgPT4gY3JlYXRlRXJyb3JDYXJkRWxlbWVudChjcmVhdGVFcnJvckNhcmRDb25maWcoZXJyb3IsIGNvbmZpZykpO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ2FyZEVsZW1lbnQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnXG4pOiBMb3ZlbGFjZUNhcmQgfCBIdWlFcnJvckNhcmQgPT4ge1xuICBpZiAoIWNvbmZpZyB8fCB0eXBlb2YgY29uZmlnICE9PSBcIm9iamVjdFwiIHx8ICFjb25maWcudHlwZSkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFwiTm8gY2FyZCB0eXBlIGNvbmZpZ3VyZWQuXCIsIGNvbmZpZyk7XG4gIH1cblxuICBpZiAoY29uZmlnLnR5cGUuc3RhcnRzV2l0aChDVVNUT01fVFlQRV9QUkVGSVgpKSB7XG4gICAgY29uc3QgdGFnID0gY29uZmlnLnR5cGUuc3Vic3RyKENVU1RPTV9UWVBFX1BSRUZJWC5sZW5ndGgpO1xuXG4gICAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldCh0YWcpKSB7XG4gICAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBDdXN0b20gZWxlbWVudCBkb2Vzbid0IGV4aXN0OiAke3RhZ30uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJOb25lXCI7XG4gICAgY29uc3QgdGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgIH0sIFRJTUVPVVQpO1xuXG4gICAgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQodGFnKS50aGVuKCgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICBmaXJlRXZlbnQoZWxlbWVudCwgXCJsbC1yZWJ1aWxkXCIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBpZiAoIUNBUkRfVFlQRVMuaGFzKGNvbmZpZy50eXBlKSkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFxuICAgICAgYFVua25vd24gY2FyZCB0eXBlIGVuY291bnRlcmVkOiAke2NvbmZpZy50eXBlfS5gLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBfY3JlYXRlRWxlbWVudChgaHVpLSR7Y29uZmlnLnR5cGV9LWNhcmRgLCBjb25maWcpO1xufTtcbiIsImltcG9ydCBkZWVwQ2xvbmUgZnJvbSBcImRlZXAtY2xvbmUtc2ltcGxlXCI7XG5cbmltcG9ydCBcIi4uL2VsZW1lbnRzL2h1aS1jb25kaXRpb25hbC1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktaWNvbi1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktaW1hZ2UtZWxlbWVudFwiO1xuaW1wb3J0IFwiLi4vZWxlbWVudHMvaHVpLXNlcnZpY2UtYnV0dG9uLWVsZW1lbnRcIjtcbmltcG9ydCBcIi4uL2VsZW1lbnRzL2h1aS1zdGF0ZS1iYWRnZS1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktc3RhdGUtaWNvbi1lbGVtZW50XCI7XG5pbXBvcnQgXCIuLi9lbGVtZW50cy9odWktc3RhdGUtbGFiZWwtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQge1xuICBjcmVhdGVFcnJvckNhcmRFbGVtZW50LFxuICBjcmVhdGVFcnJvckNhcmRDb25maWcsXG4gIEh1aUVycm9yQ2FyZCxcbn0gZnJvbSBcIi4uL2NhcmRzL2h1aS1lcnJvci1jYXJkXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUVsZW1lbnRDb25maWcsIExvdmVsYWNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50cy90eXBlc1wiO1xuXG5jb25zdCBDVVNUT01fVFlQRV9QUkVGSVggPSBcImN1c3RvbTpcIjtcbmNvbnN0IEVMRU1FTlRfVFlQRVMgPSBuZXcgU2V0KFtcbiAgXCJjb25kaXRpb25hbFwiLFxuICBcImljb25cIixcbiAgXCJpbWFnZVwiLFxuICBcInNlcnZpY2UtYnV0dG9uXCIsXG4gIFwic3RhdGUtYmFkZ2VcIixcbiAgXCJzdGF0ZS1pY29uXCIsXG4gIFwic3RhdGUtbGFiZWxcIixcbl0pO1xuY29uc3QgVElNRU9VVCA9IDIwMDA7XG5cbmNvbnN0IF9jcmVhdGVFbGVtZW50ID0gKFxuICB0YWc6IHN0cmluZyxcbiAgY29uZmlnOiBMb3ZlbGFjZUVsZW1lbnRDb25maWdcbik6IExvdmVsYWNlRWxlbWVudCB8IEh1aUVycm9yQ2FyZCA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZykgYXMgTG92ZWxhY2VFbGVtZW50O1xuICB0cnkge1xuICAgIGVsZW1lbnQuc2V0Q29uZmlnKGRlZXBDbG9uZShjb25maWcpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc29sZS5lcnJvcih0YWcsIGVycik7XG4gICAgcmV0dXJuIF9jcmVhdGVFcnJvckVsZW1lbnQoZXJyLm1lc3NhZ2UsIGNvbmZpZyk7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5jb25zdCBfY3JlYXRlRXJyb3JFbGVtZW50ID0gKFxuICBlcnJvcjogc3RyaW5nLFxuICBjb25maWc6IExvdmVsYWNlRWxlbWVudENvbmZpZ1xuKTogSHVpRXJyb3JDYXJkID0+IGNyZWF0ZUVycm9yQ2FyZEVsZW1lbnQoY3JlYXRlRXJyb3JDYXJkQ29uZmlnKGVycm9yLCBjb25maWcpKTtcblxuZnVuY3Rpb24gX2hpZGVFcnJvckVsZW1lbnQoZWxlbWVudCkge1xuICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIk5vbmVcIjtcbiAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICB9LCBUSU1FT1VUKTtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUh1aUVsZW1lbnQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VFbGVtZW50Q29uZmlnXG4pOiBMb3ZlbGFjZUVsZW1lbnQgfCBIdWlFcnJvckNhcmQgPT4ge1xuICBpZiAoIWNvbmZpZyB8fCB0eXBlb2YgY29uZmlnICE9PSBcIm9iamVjdFwiIHx8ICFjb25maWcudHlwZSkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFwiTm8gZWxlbWVudCB0eXBlIGNvbmZpZ3VyZWQuXCIsIGNvbmZpZyk7XG4gIH1cblxuICBpZiAoY29uZmlnLnR5cGUuc3RhcnRzV2l0aChDVVNUT01fVFlQRV9QUkVGSVgpKSB7XG4gICAgY29uc3QgdGFnID0gY29uZmlnLnR5cGUuc3Vic3RyKENVU1RPTV9UWVBFX1BSRUZJWC5sZW5ndGgpO1xuXG4gICAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldCh0YWcpKSB7XG4gICAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBDdXN0b20gZWxlbWVudCBkb2Vzbid0IGV4aXN0OiAke3RhZ30uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgdGltZXIgPSBfaGlkZUVycm9yRWxlbWVudChlbGVtZW50KTtcblxuICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKHRhZykudGhlbigoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgZmlyZUV2ZW50KGVsZW1lbnQsIFwibGwtcmVidWlsZFwiKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgaWYgKCFFTEVNRU5UX1RZUEVTLmhhcyhjb25maWcudHlwZSkpIHtcbiAgICByZXR1cm4gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBVbmtub3duIGVsZW1lbnQgdHlwZSBlbmNvdW50ZXJlZDogJHtjb25maWcudHlwZX0uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQoYGh1aS0ke2NvbmZpZy50eXBlfS1lbGVtZW50YCwgY29uZmlnKTtcbn07XG4iLCJpbXBvcnQgZGVlcENsb25lIGZyb20gXCJkZWVwLWNsb25lLXNpbXBsZVwiO1xuXG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZUVycm9yQ2FyZEVsZW1lbnQsXG4gIGNyZWF0ZUVycm9yQ2FyZENvbmZpZyxcbiAgSHVpRXJyb3JDYXJkLFxufSBmcm9tIFwiLi4vY2FyZHMvaHVpLWVycm9yLWNhcmRcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1jbGltYXRlLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1jb3Zlci1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktZ3JvdXAtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLWlucHV0LWRhdGV0aW1lLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1pbnB1dC1udW1iZXItZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLWlucHV0LXNlbGVjdC1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktaW5wdXQtdGV4dC1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktbG9jay1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktbWVkaWEtcGxheWVyLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1zY2VuZS1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9lbnRpdHktcm93cy9odWktc2NyaXB0LWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS1zZW5zb3ItZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLXRleHQtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vZW50aXR5LXJvd3MvaHVpLXRpbWVyLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2VudGl0eS1yb3dzL2h1aS10b2dnbGUtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vc3BlY2lhbC1yb3dzL2h1aS1jYWxsLXNlcnZpY2Utcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLWRpdmlkZXItcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLXNlY3Rpb24tcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLXdlYmxpbmstcm93XCI7XG5pbXBvcnQgXCIuLi9zcGVjaWFsLXJvd3MvaHVpLWNhc3Qtcm93XCI7XG5pbXBvcnQgeyBFbnRpdHlDb25maWcsIEVudGl0eVJvdyB9IGZyb20gXCIuLi9lbnRpdHktcm93cy90eXBlc1wiO1xuXG5jb25zdCBDVVNUT01fVFlQRV9QUkVGSVggPSBcImN1c3RvbTpcIjtcbmNvbnN0IFNQRUNJQUxfVFlQRVMgPSBuZXcgU2V0KFtcbiAgXCJjYWxsLXNlcnZpY2VcIixcbiAgXCJkaXZpZGVyXCIsXG4gIFwic2VjdGlvblwiLFxuICBcIndlYmxpbmtcIixcbiAgXCJjYXN0XCIsXG4gIFwic2VsZWN0XCIsXG5dKTtcbmNvbnN0IERPTUFJTl9UT19FTEVNRU5UX1RZUEUgPSB7XG4gIGFsZXJ0OiBcInRvZ2dsZVwiLFxuICBhdXRvbWF0aW9uOiBcInRvZ2dsZVwiLFxuICBjbGltYXRlOiBcImNsaW1hdGVcIixcbiAgY292ZXI6IFwiY292ZXJcIixcbiAgZmFuOiBcInRvZ2dsZVwiLFxuICBncm91cDogXCJncm91cFwiLFxuICBpbnB1dF9ib29sZWFuOiBcInRvZ2dsZVwiLFxuICBpbnB1dF9udW1iZXI6IFwiaW5wdXQtbnVtYmVyXCIsXG4gIGlucHV0X3NlbGVjdDogXCJpbnB1dC1zZWxlY3RcIixcbiAgaW5wdXRfdGV4dDogXCJpbnB1dC10ZXh0XCIsXG4gIGxpZ2h0OiBcInRvZ2dsZVwiLFxuICBsb2NrOiBcImxvY2tcIixcbiAgbWVkaWFfcGxheWVyOiBcIm1lZGlhLXBsYXllclwiLFxuICByZW1vdGU6IFwidG9nZ2xlXCIsXG4gIHNjZW5lOiBcInNjZW5lXCIsXG4gIHNjcmlwdDogXCJzY3JpcHRcIixcbiAgc2Vuc29yOiBcInNlbnNvclwiLFxuICB0aW1lcjogXCJ0aW1lclwiLFxuICBzd2l0Y2g6IFwidG9nZ2xlXCIsXG4gIHZhY3V1bTogXCJ0b2dnbGVcIixcbiAgLy8gVGVtcG9yYXJ5LiBPbmNlIGNsaW1hdGUgaXMgcmV3cml0dGVuLFxuICAvLyB3YXRlciBoZWF0ZXIgc2hvdWxkIGdldCBpdCdzIG93biByb3cuXG4gIHdhdGVyX2hlYXRlcjogXCJjbGltYXRlXCIsXG4gIGlucHV0X2RhdGV0aW1lOiBcImlucHV0LWRhdGV0aW1lXCIsXG59O1xuY29uc3QgVElNRU9VVCA9IDIwMDA7XG5cbmNvbnN0IF9jcmVhdGVFbGVtZW50ID0gKFxuICB0YWc6IHN0cmluZyxcbiAgY29uZmlnOiBFbnRpdHlDb25maWdcbik6IEVudGl0eVJvdyB8IEh1aUVycm9yQ2FyZCA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZykgYXMgRW50aXR5Um93O1xuICB0cnkge1xuICAgIGVsZW1lbnQuc2V0Q29uZmlnKGRlZXBDbG9uZShjb25maWcpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc29sZS5lcnJvcih0YWcsIGVycik7XG4gICAgcmV0dXJuIF9jcmVhdGVFcnJvckVsZW1lbnQoZXJyLm1lc3NhZ2UsIGNvbmZpZyk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cbmNvbnN0IF9jcmVhdGVFcnJvckVsZW1lbnQgPSAoXG4gIGVycm9yOiBzdHJpbmcsXG4gIGNvbmZpZzogRW50aXR5Q29uZmlnXG4pOiBIdWlFcnJvckNhcmQgPT4gY3JlYXRlRXJyb3JDYXJkRWxlbWVudChjcmVhdGVFcnJvckNhcmRDb25maWcoZXJyb3IsIGNvbmZpZykpO1xuXG5jb25zdCBfaGlkZUVycm9yRWxlbWVudCA9IChlbGVtZW50KSA9PiB7XG4gIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiTm9uZVwiO1xuICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gIH0sIFRJTUVPVVQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJvd0VsZW1lbnQgPSAoXG4gIGNvbmZpZzogRW50aXR5Q29uZmlnXG4pOiBFbnRpdHlSb3cgfCBIdWlFcnJvckNhcmQgPT4ge1xuICBsZXQgdGFnO1xuXG4gIGlmIChcbiAgICAhY29uZmlnIHx8XG4gICAgdHlwZW9mIGNvbmZpZyAhPT0gXCJvYmplY3RcIiB8fFxuICAgICghY29uZmlnLmVudGl0eSAmJiAhY29uZmlnLnR5cGUpXG4gICkge1xuICAgIHJldHVybiBfY3JlYXRlRXJyb3JFbGVtZW50KFwiSW52YWxpZCBjb25maWcgZ2l2ZW4uXCIsIGNvbmZpZyk7XG4gIH1cblxuICBjb25zdCB0eXBlID0gY29uZmlnLnR5cGUgfHwgXCJkZWZhdWx0XCI7XG4gIGlmIChTUEVDSUFMX1RZUEVTLmhhcyh0eXBlKSkge1xuICAgIHJldHVybiBfY3JlYXRlRWxlbWVudChgaHVpLSR7dHlwZX0tcm93YCwgY29uZmlnKTtcbiAgfVxuXG4gIGlmICh0eXBlLnN0YXJ0c1dpdGgoQ1VTVE9NX1RZUEVfUFJFRklYKSkge1xuICAgIHRhZyA9IHR5cGUuc3Vic3RyKENVU1RPTV9UWVBFX1BSRUZJWC5sZW5ndGgpO1xuXG4gICAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldCh0YWcpKSB7XG4gICAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gX2NyZWF0ZUVycm9yRWxlbWVudChcbiAgICAgIGBDdXN0b20gZWxlbWVudCBkb2Vzbid0IGV4aXN0OiAke3RhZ30uYCxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgdGltZXIgPSBfaGlkZUVycm9yRWxlbWVudChlbGVtZW50KTtcblxuICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKHRhZykudGhlbigoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgZmlyZUV2ZW50KGVsZW1lbnQsIFwibGwtcmVidWlsZFwiKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgaWYgKCFjb25maWcuZW50aXR5KSB7XG4gICAgcmV0dXJuIF9jcmVhdGVFcnJvckVsZW1lbnQoXCJJbnZhbGlkIGNvbmZpZyBnaXZlbi5cIiwgY29uZmlnKTtcbiAgfVxuXG4gIGNvbnN0IGRvbWFpbiA9IGNvbmZpZy5lbnRpdHkuc3BsaXQoXCIuXCIsIDEpWzBdO1xuICB0YWcgPSBgaHVpLSR7RE9NQUlOX1RPX0VMRU1FTlRfVFlQRVtkb21haW5dIHx8IFwidGV4dFwifS1lbnRpdHktcm93YDtcblxuICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQodGFnLCBjb25maWcpO1xufTtcbiIsImltcG9ydCB7IGRpcmVjdGl2ZSwgUHJvcGVydHlQYXJ0IH0gZnJvbSBcImxpdC1odG1sXCI7XG5pbXBvcnQgXCJAbWF0ZXJpYWwvbXdjLXJpcHBsZVwiO1xuXG5jb25zdCBpc1RvdWNoID1cbiAgXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cgfHxcbiAgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCB8fFxuICBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDA7XG5cbmludGVyZmFjZSBMb25nUHJlc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGhvbGRUaW1lOiBudW1iZXI7XG4gIGJpbmQoZWxlbWVudDogRWxlbWVudCk6IHZvaWQ7XG59XG5pbnRlcmZhY2UgTG9uZ1ByZXNzRWxlbWVudCBleHRlbmRzIEVsZW1lbnQge1xuICBsb25nUHJlc3M/OiBib29sZWFuO1xufVxuXG5jbGFzcyBMb25nUHJlc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCBpbXBsZW1lbnRzIExvbmdQcmVzcyB7XG4gIHB1YmxpYyBob2xkVGltZTogbnVtYmVyO1xuICBwdWJsaWMgcmlwcGxlOiBhbnk7XG4gIHByb3RlY3RlZCB0aW1lcjogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcm90ZWN0ZWQgaGVsZDogYm9vbGVhbjtcbiAgcHJvdGVjdGVkIGNvb2xkb3duU3RhcnQ6IGJvb2xlYW47XG4gIHByb3RlY3RlZCBjb29sZG93bkVuZDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaG9sZFRpbWUgPSA1MDA7XG4gICAgdGhpcy5yaXBwbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibXdjLXJpcHBsZVwiKTtcbiAgICB0aGlzLnRpbWVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGVsZCA9IGZhbHNlO1xuICAgIHRoaXMuY29vbGRvd25TdGFydCA9IGZhbHNlO1xuICAgIHRoaXMuY29vbGRvd25FbmQgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuc3R5bGUsIHtcbiAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICB3aWR0aDogaXNUb3VjaCA/IFwiMTAwcHhcIiA6IFwiNTBweFwiLFxuICAgICAgaGVpZ2h0OiBpc1RvdWNoID8gXCIxMDBweFwiIDogXCI1MHB4XCIsXG4gICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC01MCUsIC01MCUpXCIsXG4gICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIixcbiAgICB9KTtcblxuICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5yaXBwbGUpO1xuICAgIHRoaXMucmlwcGxlLnByaW1hcnkgPSB0cnVlO1xuXG4gICAgW1xuICAgICAgXCJ0b3VjaGNhbmNlbFwiLFxuICAgICAgXCJtb3VzZW91dFwiLFxuICAgICAgXCJtb3VzZXVwXCIsXG4gICAgICBcInRvdWNobW92ZVwiLFxuICAgICAgXCJtb3VzZXdoZWVsXCIsXG4gICAgICBcIndoZWVsXCIsXG4gICAgICBcInNjcm9sbFwiLFxuICAgIF0uZm9yRWFjaCgoZXYpID0+IHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIGV2LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuICAgICAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgICAgIHRoaXMudGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9XG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGJpbmQoZWxlbWVudDogTG9uZ1ByZXNzRWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LmxvbmdQcmVzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbGVtZW50LmxvbmdQcmVzcyA9IHRydWU7XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCAoZXY6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBlID0gZXYgfHwgd2luZG93LmV2ZW50O1xuICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjbGlja1N0YXJ0ID0gKGV2OiBFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMuY29vbGRvd25TdGFydCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmhlbGQgPSBmYWxzZTtcbiAgICAgIGxldCB4O1xuICAgICAgbGV0IHk7XG4gICAgICBpZiAoKGV2IGFzIFRvdWNoRXZlbnQpLnRvdWNoZXMpIHtcbiAgICAgICAgeCA9IChldiBhcyBUb3VjaEV2ZW50KS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICB5ID0gKGV2IGFzIFRvdWNoRXZlbnQpLnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gKGV2IGFzIE1vdXNlRXZlbnQpLnBhZ2VYO1xuICAgICAgICB5ID0gKGV2IGFzIE1vdXNlRXZlbnQpLnBhZ2VZO1xuICAgICAgfVxuICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zdGFydEFuaW1hdGlvbih4LCB5KTtcbiAgICAgICAgdGhpcy5oZWxkID0gdHJ1ZTtcbiAgICAgIH0sIHRoaXMuaG9sZFRpbWUpO1xuXG4gICAgICB0aGlzLmNvb2xkb3duU3RhcnQgPSB0cnVlO1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gKHRoaXMuY29vbGRvd25TdGFydCA9IGZhbHNlKSwgMTAwKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xpY2tFbmQgPSAoZXY6IEV2ZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuY29vbGRvd25FbmQgfHxcbiAgICAgICAgKFtcInRvdWNoZW5kXCIsIFwidG91Y2hjYW5jZWxcIl0uaW5jbHVkZXMoZXYudHlwZSkgJiZcbiAgICAgICAgICB0aGlzLnRpbWVyID09PSB1bmRlZmluZWQpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB0aGlzLnRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKHRoaXMuaGVsZCkge1xuICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaGEtaG9sZFwiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaGEtY2xpY2tcIikpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb29sZG93bkVuZCA9IHRydWU7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiAodGhpcy5jb29sZG93bkVuZCA9IGZhbHNlKSwgMTAwKTtcbiAgICB9O1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBjbGlja1N0YXJ0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgY2xpY2tFbmQpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIGNsaWNrRW5kKTtcblxuICAgIC8vIGlPUyAxMyBzZW5kcyBhIGNvbXBsZXRlIG5vcm1hbCB0b3VjaHN0YXJ0LXRvdWNoZW5kIHNlcmllcyBvZiBldmVudHMgZm9sbG93ZWQgYnkgYSBtb3VzZWRvd24tY2xpY2sgc2VyaWVzLlxuICAgIC8vIFRoYXQgbWlnaHQgYmUgYSBidWcsIGJ1dCB1bnRpbCBpdCdzIGZpeGVkLCB0aGlzIHNob3VsZCBtYWtlIGxvbmctcHJlc3Mgd29yay5cbiAgICAvLyBJZiBpdCdzIG5vdCBhIGJ1ZyB0aGF0IGlzIGZpeGVkLCB0aGlzIG1pZ2h0IG5lZWQgdXBkYXRpbmcgd2l0aCB0aGUgbmV4dCBpT1MgdmVyc2lvbi5cbiAgICAvLyBOb3RlIHRoYXQgYWxsIGV2ZW50cyAoYm90aCB0b3VjaCBhbmQgbW91c2UpIG11c3QgYmUgbGlzdGVuZWQgZm9yIGluIG9yZGVyIHRvIHdvcmsgb24gY29tcHV0ZXJzIHdpdGggYm90aCBtb3VzZSBhbmQgdG91Y2hzY3JlZW4uXG4gICAgY29uc3QgaXNJT1MxMyA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUgT1MgMTNfLyk7XG4gICAgaWYgKCFpc0lPUzEzKSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgY2xpY2tTdGFydCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tFbmQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRBbmltYXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuc3R5bGUsIHtcbiAgICAgIGxlZnQ6IGAke3h9cHhgLFxuICAgICAgdG9wOiBgJHt5fXB4YCxcbiAgICAgIGRpc3BsYXk6IG51bGwsXG4gICAgfSk7XG4gICAgdGhpcy5yaXBwbGUuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnJpcHBsZS5hY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMucmlwcGxlLnVuYm91bmRlZCA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIHN0b3BBbmltYXRpb24oKSB7XG4gICAgdGhpcy5yaXBwbGUuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5yaXBwbGUuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImxvbmctcHJlc3NcIiwgTG9uZ1ByZXNzKTtcblxuY29uc3QgZ2V0TG9uZ1ByZXNzID0gKCk6IExvbmdQcmVzcyA9PiB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICBpZiAoYm9keS5xdWVyeVNlbGVjdG9yKFwibG9uZy1wcmVzc1wiKSkge1xuICAgIHJldHVybiBib2R5LnF1ZXJ5U2VsZWN0b3IoXCJsb25nLXByZXNzXCIpIGFzIExvbmdQcmVzcztcbiAgfVxuXG4gIGNvbnN0IGxvbmdwcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsb25nLXByZXNzXCIpO1xuICBib2R5LmFwcGVuZENoaWxkKGxvbmdwcmVzcyk7XG5cbiAgcmV0dXJuIGxvbmdwcmVzcyBhcyBMb25nUHJlc3M7XG59O1xuXG5leHBvcnQgY29uc3QgbG9uZ1ByZXNzQmluZCA9IChlbGVtZW50OiBMb25nUHJlc3NFbGVtZW50KSA9PiB7XG4gIGNvbnN0IGxvbmdwcmVzczogTG9uZ1ByZXNzID0gZ2V0TG9uZ1ByZXNzKCk7XG4gIGlmICghbG9uZ3ByZXNzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvbmdwcmVzcy5iaW5kKGVsZW1lbnQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvbmdQcmVzcyA9IGRpcmVjdGl2ZSgoKSA9PiAocGFydDogUHJvcGVydHlQYXJ0KSA9PiB7XG4gIGxvbmdQcmVzc0JpbmQocGFydC5jb21taXR0ZXIuZWxlbWVudCk7XG59KTtcbiIsImltcG9ydCB7IFNUQVRFU19PRkYgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgeyB0dXJuT25PZmZFbnRpdHkgfSBmcm9tIFwiLi90dXJuLW9uLW9mZi1lbnRpdHlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdHlwZXNcIjtcbmV4cG9ydCBjb25zdCB0b2dnbGVFbnRpdHkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBjb25zdCB0dXJuT24gPSBTVEFURVNfT0ZGLmluY2x1ZGVzKGhhc3Muc3RhdGVzW2VudGl0eUlkXS5zdGF0ZSk7XG4gIHJldHVybiB0dXJuT25PZmZFbnRpdHkoaGFzcywgZW50aXR5SWQsIHR1cm5Pbik7XG59O1xuIiwiaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBTVEFURVNfT0ZGIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgdHVybk9uT2ZmRW50aXRpZXMgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkczogc3RyaW5nW10sXG4gIHR1cm5PbiA9IHRydWVcbik6IHZvaWQgPT4ge1xuICBjb25zdCBkb21haW5zVG9DYWxsID0ge307XG4gIGVudGl0eUlkcy5mb3JFYWNoKChlbnRpdHlJZCkgPT4ge1xuICAgIGlmIChTVEFURVNfT0ZGLmluY2x1ZGVzKGhhc3Muc3RhdGVzW2VudGl0eUlkXS5zdGF0ZSkgPT09IHR1cm5Pbikge1xuICAgICAgY29uc3Qgc3RhdGVEb21haW4gPSBjb21wdXRlRG9tYWluKGVudGl0eUlkKTtcbiAgICAgIGNvbnN0IHNlcnZpY2VEb21haW4gPSBbXCJjb3ZlclwiLCBcImxvY2tcIl0uaW5jbHVkZXMoc3RhdGVEb21haW4pXG4gICAgICAgID8gc3RhdGVEb21haW5cbiAgICAgICAgOiBcImhvbWVhc3Npc3RhbnRcIjtcblxuICAgICAgaWYgKCEoc2VydmljZURvbWFpbiBpbiBkb21haW5zVG9DYWxsKSkge1xuICAgICAgICBkb21haW5zVG9DYWxsW3NlcnZpY2VEb21haW5dID0gW107XG4gICAgICB9XG4gICAgICBkb21haW5zVG9DYWxsW3NlcnZpY2VEb21haW5dLnB1c2goZW50aXR5SWQpO1xuICAgIH1cbiAgfSk7XG5cbiAgT2JqZWN0LmtleXMoZG9tYWluc1RvQ2FsbCkuZm9yRWFjaCgoZG9tYWluKSA9PiB7XG4gICAgbGV0IHNlcnZpY2U7XG4gICAgc3dpdGNoIChkb21haW4pIHtcbiAgICAgIGNhc2UgXCJsb2NrXCI6XG4gICAgICAgIHNlcnZpY2UgPSB0dXJuT24gPyBcInVubG9ja1wiIDogXCJsb2NrXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImNvdmVyXCI6XG4gICAgICAgIHNlcnZpY2UgPSB0dXJuT24gPyBcIm9wZW5fY292ZXJcIiA6IFwiY2xvc2VfY292ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZXJ2aWNlID0gdHVybk9uID8gXCJ0dXJuX29uXCIgOiBcInR1cm5fb2ZmXCI7XG4gICAgfVxuXG4gICAgY29uc3QgZW50aXRpZXMgPSBkb21haW5zVG9DYWxsW2RvbWFpbl07XG4gICAgaGFzcy5jYWxsU2VydmljZShkb21haW4sIHNlcnZpY2UsIHsgZW50aXR5X2lkOiBlbnRpdGllcyB9KTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCB0dXJuT25PZmZFbnRpdHkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIHR1cm5PbiA9IHRydWVcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBjb25zdCBzdGF0ZURvbWFpbiA9IGNvbXB1dGVEb21haW4oZW50aXR5SWQpO1xuICBjb25zdCBzZXJ2aWNlRG9tYWluID0gc3RhdGVEb21haW4gPT09IFwiZ3JvdXBcIiA/IFwiaG9tZWFzc2lzdGFudFwiIDogc3RhdGVEb21haW47XG5cbiAgbGV0IHNlcnZpY2U7XG4gIHN3aXRjaCAoc3RhdGVEb21haW4pIHtcbiAgICBjYXNlIFwibG9ja1wiOlxuICAgICAgc2VydmljZSA9IHR1cm5PbiA/IFwidW5sb2NrXCIgOiBcImxvY2tcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjb3ZlclwiOlxuICAgICAgc2VydmljZSA9IHR1cm5PbiA/IFwib3Blbl9jb3ZlclwiIDogXCJjbG9zZV9jb3ZlclwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHNlcnZpY2UgPSB0dXJuT24gPyBcInR1cm5fb25cIiA6IFwidHVybl9vZmZcIjtcbiAgfVxuXG4gIHJldHVybiBoYXNzLmNhbGxTZXJ2aWNlKHNlcnZpY2VEb21haW4sIHNlcnZpY2UsIHsgZW50aXR5X2lkOiBlbnRpdHlJZCB9KTtcbn07XG4iLCJpbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5leHBvcnQgY29uc3QgZXZhbHVhdGVGaWx0ZXIgPSAoc3RhdGVPYmo6IEhhc3NFbnRpdHksIGZpbHRlcjogYW55KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IG9wZXJhdG9yID0gZmlsdGVyLm9wZXJhdG9yIHx8IFwiPT1cIjtcbiAgY29uc3QgdmFsdWUgPSBmaWx0ZXIudmFsdWUgfHwgZmlsdGVyO1xuICBjb25zdCBzdGF0ZSA9IGZpbHRlci5hdHRyaWJ1dGVcbiAgICA/IHN0YXRlT2JqLmF0dHJpYnV0ZXNbZmlsdGVyLmF0dHJpYnV0ZV1cbiAgICA6IHN0YXRlT2JqLnN0YXRlO1xuXG4gIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICBjYXNlIFwiPT1cIjpcbiAgICAgIHJldHVybiBzdGF0ZSA9PT0gdmFsdWU7XG4gICAgY2FzZSBcIjw9XCI6XG4gICAgICByZXR1cm4gc3RhdGUgPD0gdmFsdWU7XG4gICAgY2FzZSBcIjxcIjpcbiAgICAgIHJldHVybiBzdGF0ZSA8IHZhbHVlO1xuICAgIGNhc2UgXCI+PVwiOlxuICAgICAgcmV0dXJuIHN0YXRlID49IHZhbHVlO1xuICAgIGNhc2UgXCI+XCI6XG4gICAgICByZXR1cm4gc3RhdGUgPiB2YWx1ZTtcbiAgICBjYXNlIFwiIT1cIjpcbiAgICAgIHJldHVybiBzdGF0ZSAhPT0gdmFsdWU7XG4gICAgY2FzZSBcInJlZ2V4XCI6IHtcbiAgICAgIHJldHVybiBzdGF0ZS5tYXRjaCh2YWx1ZSk7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50LCBHcm91cEVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHtcbiAgTG92ZWxhY2VDb25maWcsXG4gIExvdmVsYWNlQ2FyZENvbmZpZyxcbiAgTG92ZWxhY2VWaWV3Q29uZmlnLFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuaW1wb3J0IHtcbiAgSGFzc0VudGl0eSxcbiAgSGFzc0VudGl0aWVzLFxuICBIYXNzQ29uZmlnLFxufSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmltcG9ydCB7IGV4dHJhY3RWaWV3cyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2V4dHJhY3Rfdmlld3NcIjtcbmltcG9ydCB7IGdldFZpZXdFbnRpdGllcyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2dldF92aWV3X2VudGl0aWVzXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5pbXBvcnQgeyBzcGxpdEJ5R3JvdXBzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3BsaXRfYnlfZ3JvdXBzXCI7XG5pbXBvcnQgeyBjb21wdXRlT2JqZWN0SWQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX29iamVjdF9pZFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kb21haW5cIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuXG5pbXBvcnQgeyBFbnRpdHlSb3dDb25maWcsIFdlYmxpbmtDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IExvY2FsaXplRnVuYyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vdHJhbnNsYXRpb25zL2xvY2FsaXplXCI7XG5pbXBvcnQgeyBFbnRpdGllc0NhcmRDb25maWcgfSBmcm9tIFwiLi4vY2FyZHMvdHlwZXNcIjtcbmltcG9ydCB7XG4gIHN1YnNjcmliZUFyZWFSZWdpc3RyeSxcbiAgQXJlYVJlZ2lzdHJ5RW50cnksXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2FyZWFfcmVnaXN0cnlcIjtcbmltcG9ydCB7IHN1YnNjcmliZU9uZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vdXRpbC9zdWJzY3JpYmUtb25lXCI7XG5pbXBvcnQge1xuICBzdWJzY3JpYmVEZXZpY2VSZWdpc3RyeSxcbiAgRGV2aWNlUmVnaXN0cnlFbnRyeSxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZGV2aWNlX3JlZ2lzdHJ5XCI7XG5pbXBvcnQge1xuICBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeSxcbiAgRW50aXR5UmVnaXN0cnlFbnRyeSxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZW50aXR5X3JlZ2lzdHJ5XCI7XG5cbmNvbnN0IERFRkFVTFRfVklFV19FTlRJVFlfSUQgPSBcImdyb3VwLmRlZmF1bHRfdmlld1wiO1xuY29uc3QgRE9NQUlOU19CQURHRVMgPSBbXG4gIFwiYmluYXJ5X3NlbnNvclwiLFxuICBcInBlcnNvblwiLFxuICBcImRldmljZV90cmFja2VyXCIsXG4gIFwibWFpbGJveFwiLFxuICBcInNlbnNvclwiLFxuICBcInN1blwiLFxuICBcInRpbWVyXCIsXG5dO1xuY29uc3QgSElERV9ET01BSU4gPSBuZXcgU2V0KFtcbiAgXCJwZXJzaXN0ZW50X25vdGlmaWNhdGlvblwiLFxuICBcImNvbmZpZ3VyYXRvclwiLFxuICBcImdlb19sb2NhdGlvblwiLFxuXSk7XG5cbmxldCBzdWJzY3JpYmVkUmVnaXN0cmllcyA9IGZhbHNlO1xuXG5pbnRlcmZhY2UgU3BsaXR0ZWRCeUFyZWFzIHtcbiAgYXJlYXNXaXRoRW50aXRpZXM6IEFycmF5PFtBcmVhUmVnaXN0cnlFbnRyeSwgSGFzc0VudGl0eVtdXT47XG4gIG90aGVyRW50aXRpZXM6IEhhc3NFbnRpdGllcztcbn1cblxuY29uc3Qgc3BsaXRCeUFyZWFzID0gKFxuICBhcmVhRW50cmllczogQXJlYVJlZ2lzdHJ5RW50cnlbXSxcbiAgZGV2aWNlRW50cmllczogRGV2aWNlUmVnaXN0cnlFbnRyeVtdLFxuICBlbnRpdHlFbnRyaWVzOiBFbnRpdHlSZWdpc3RyeUVudHJ5W10sXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXNcbik6IFNwbGl0dGVkQnlBcmVhcyA9PiB7XG4gIGNvbnN0IGFsbEVudGl0aWVzID0geyAuLi5lbnRpdGllcyB9O1xuICBjb25zdCBhcmVhc1dpdGhFbnRpdGllczogU3BsaXR0ZWRCeUFyZWFzW1wiYXJlYXNXaXRoRW50aXRpZXNcIl0gPSBbXTtcblxuICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYUVudHJpZXMpIHtcbiAgICBjb25zdCBhcmVhRW50aXRpZXM6IEhhc3NFbnRpdHlbXSA9IFtdO1xuICAgIGNvbnN0IGFyZWFEZXZpY2VzID0gbmV3IFNldChcbiAgICAgIGRldmljZUVudHJpZXNcbiAgICAgICAgLmZpbHRlcigoZGV2aWNlKSA9PiBkZXZpY2UuYXJlYV9pZCA9PT0gYXJlYS5hcmVhX2lkKVxuICAgICAgICAubWFwKChkZXZpY2UpID0+IGRldmljZS5pZClcbiAgICApO1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0eUVudHJpZXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYXJlYURldmljZXMuaGFzKFxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBlbnRpdHkuZGV2aWNlX2lkXG4gICAgICAgICkgJiZcbiAgICAgICAgZW50aXR5LmVudGl0eV9pZCBpbiBhbGxFbnRpdGllc1xuICAgICAgKSB7XG4gICAgICAgIGFyZWFFbnRpdGllcy5wdXNoKGFsbEVudGl0aWVzW2VudGl0eS5lbnRpdHlfaWRdKTtcbiAgICAgICAgZGVsZXRlIGFsbEVudGl0aWVzW2VudGl0eS5lbnRpdHlfaWRdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYXJlYUVudGl0aWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFyZWFzV2l0aEVudGl0aWVzLnB1c2goW2FyZWEsIGFyZWFFbnRpdGllc10pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGFyZWFzV2l0aEVudGl0aWVzLFxuICAgIG90aGVyRW50aXRpZXM6IGFsbEVudGl0aWVzLFxuICB9O1xufTtcblxuY29uc3QgY29tcHV0ZUNhcmRzID0gKFxuICBzdGF0ZXM6IEFycmF5PFtzdHJpbmcsIEhhc3NFbnRpdHldPixcbiAgZW50aXR5Q2FyZE9wdGlvbnM6IFBhcnRpYWw8RW50aXRpZXNDYXJkQ29uZmlnPlxuKTogTG92ZWxhY2VDYXJkQ29uZmlnW10gPT4ge1xuICBjb25zdCBjYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICAvLyBGb3IgZW50aXR5IGNhcmRcbiAgY29uc3QgZW50aXRpZXM6IEFycmF5PHN0cmluZyB8IEVudGl0eVJvd0NvbmZpZz4gPSBbXTtcblxuICBmb3IgKGNvbnN0IFtlbnRpdHlJZCwgc3RhdGVPYmpdIG9mIHN0YXRlcykge1xuICAgIGNvbnN0IGRvbWFpbiA9IGNvbXB1dGVEb21haW4oZW50aXR5SWQpO1xuXG4gICAgaWYgKGRvbWFpbiA9PT0gXCJhbGFybV9jb250cm9sX3BhbmVsXCIpIHtcbiAgICAgIGNhcmRzLnB1c2goe1xuICAgICAgICB0eXBlOiBcImFsYXJtLXBhbmVsXCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJjYW1lcmFcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwicGljdHVyZS1lbnRpdHlcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcImNsaW1hdGVcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidGhlcm1vc3RhdFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwiaGlzdG9yeV9ncmFwaFwiICYmIHN0YXRlT2JqKSB7XG4gICAgICBjYXJkcy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJoaXN0b3J5LWdyYXBoXCIsXG4gICAgICAgIGVudGl0aWVzOiBzdGF0ZU9iai5hdHRyaWJ1dGVzLmVudGl0eV9pZCxcbiAgICAgICAgaG91cnNfdG9fc2hvdzogc3RhdGVPYmouYXR0cmlidXRlcy5ob3Vyc190b19zaG93LFxuICAgICAgICB0aXRsZTogc3RhdGVPYmouYXR0cmlidXRlcy5mcmllbmRseV9uYW1lLFxuICAgICAgICByZWZyZXNoX2ludGVydmFsOiBzdGF0ZU9iai5hdHRyaWJ1dGVzLnJlZnJlc2gsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJtZWRpYV9wbGF5ZXJcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwibWVkaWEtY29udHJvbFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwicGxhbnRcIikge1xuICAgICAgY2FyZHMucHVzaCh7XG4gICAgICAgIHR5cGU6IFwicGxhbnQtc3RhdHVzXCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJ3ZWF0aGVyXCIpIHtcbiAgICAgIGNhcmRzLnB1c2goe1xuICAgICAgICB0eXBlOiBcIndlYXRoZXItZm9yZWNhc3RcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcIndlYmxpbmtcIiAmJiBzdGF0ZU9iaikge1xuICAgICAgY29uc3QgY29uZjogV2VibGlua0NvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJ3ZWJsaW5rXCIsXG4gICAgICAgIHVybDogc3RhdGVPYmouc3RhdGUsXG4gICAgICAgIG5hbWU6IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopLFxuICAgICAgfTtcbiAgICAgIGlmIChcImljb25cIiBpbiBzdGF0ZU9iai5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNvbmYuaWNvbiA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuaWNvbjtcbiAgICAgIH1cbiAgICAgIGVudGl0aWVzLnB1c2goY29uZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGl0aWVzLnB1c2goZW50aXR5SWQpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgY2FyZHMudW5zaGlmdCh7XG4gICAgICB0eXBlOiBcImVudGl0aWVzXCIsXG4gICAgICBlbnRpdGllcyxcbiAgICAgIC4uLmVudGl0eUNhcmRPcHRpb25zLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGNhcmRzO1xufTtcblxuY29uc3QgY29tcHV0ZURlZmF1bHRWaWV3U3RhdGVzID0gKGVudGl0aWVzOiBIYXNzRW50aXRpZXMpOiBIYXNzRW50aXRpZXMgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSB7fTtcbiAgT2JqZWN0LmtleXMoZW50aXRpZXMpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSBlbnRpdGllc1tlbnRpdHlJZF07XG4gICAgaWYgKFxuICAgICAgIXN0YXRlT2JqLmF0dHJpYnV0ZXMuaGlkZGVuICYmXG4gICAgICAhSElERV9ET01BSU4uaGFzKGNvbXB1dGVTdGF0ZURvbWFpbihzdGF0ZU9iaikpXG4gICAgKSB7XG4gICAgICBzdGF0ZXNbZW50aXR5SWRdID0gZW50aXRpZXNbZW50aXR5SWRdO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzdGF0ZXM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVEZWZhdWx0Vmlld0NvbmZpZyA9IChcbiAgYXJlYUVudHJpZXM6IEFyZWFSZWdpc3RyeUVudHJ5W10sXG4gIGRldmljZUVudHJpZXM6IERldmljZVJlZ2lzdHJ5RW50cnlbXSxcbiAgZW50aXR5RW50cmllczogRW50aXR5UmVnaXN0cnlFbnRyeVtdLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzLFxuICBsb2NhbGl6ZTogTG9jYWxpemVGdW5jXG4pOiBMb3ZlbGFjZVZpZXdDb25maWcgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSBjb21wdXRlRGVmYXVsdFZpZXdTdGF0ZXMoZW50aXRpZXMpO1xuICBjb25zdCBwYXRoID0gXCJkZWZhdWx0X3ZpZXdcIjtcbiAgY29uc3QgdGl0bGUgPSBcIkhvbWVcIjtcbiAgY29uc3QgaWNvbiA9IHVuZGVmaW5lZDtcblxuICAvLyBJbiB0aGUgY2FzZSBvZiBhIGRlZmF1bHQgdmlldywgd2Ugd2FudCB0byB1c2UgdGhlIGdyb3VwIG9yZGVyIGF0dHJpYnV0ZVxuICBjb25zdCBncm91cE9yZGVycyA9IHt9O1xuICBPYmplY3Qua2V5cyhzdGF0ZXMpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSBzdGF0ZXNbZW50aXR5SWRdO1xuICAgIGlmIChzdGF0ZU9iai5hdHRyaWJ1dGVzLm9yZGVyKSB7XG4gICAgICBncm91cE9yZGVyc1tlbnRpdHlJZF0gPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLm9yZGVyO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc3BsaXR0ZWRCeUFyZWFzID0gc3BsaXRCeUFyZWFzKFxuICAgIGFyZWFFbnRyaWVzLFxuICAgIGRldmljZUVudHJpZXMsXG4gICAgZW50aXR5RW50cmllcyxcbiAgICBzdGF0ZXNcbiAgKTtcblxuICBjb25zdCBjb25maWcgPSBnZW5lcmF0ZVZpZXdDb25maWcoXG4gICAgbG9jYWxpemUsXG4gICAgcGF0aCxcbiAgICB0aXRsZSxcbiAgICBpY29uLFxuICAgIHNwbGl0dGVkQnlBcmVhcy5vdGhlckVudGl0aWVzLFxuICAgIGdyb3VwT3JkZXJzXG4gICk7XG5cbiAgY29uc3QgYXJlYUNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gIHNwbGl0dGVkQnlBcmVhcy5hcmVhc1dpdGhFbnRpdGllcy5mb3JFYWNoKChbYXJlYSwgYXJlYUVudGl0aWVzXSkgPT4ge1xuICAgIGFyZWFDYXJkcy5wdXNoKFxuICAgICAgLi4uY29tcHV0ZUNhcmRzKFxuICAgICAgICBhcmVhRW50aXRpZXMubWFwKChlbnRpdHkpID0+IFtlbnRpdHkuZW50aXR5X2lkLCBlbnRpdHldKSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBhcmVhLm5hbWUsXG4gICAgICAgICAgc2hvd19oZWFkZXJfdG9nZ2xlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcbiAgfSk7XG5cbiAgY29uZmlnLmNhcmRzIS51bnNoaWZ0KC4uLmFyZWFDYXJkcyk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG5cbmNvbnN0IGdlbmVyYXRlVmlld0NvbmZpZyA9IChcbiAgbG9jYWxpemU6IExvY2FsaXplRnVuYyxcbiAgcGF0aDogc3RyaW5nLFxuICB0aXRsZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBpY29uOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXMsXG4gIGdyb3VwT3JkZXJzOiB7IFtlbnRpdHlJZDogc3RyaW5nXTogbnVtYmVyIH1cbik6IExvdmVsYWNlVmlld0NvbmZpZyA9PiB7XG4gIGNvbnN0IHNwbGl0dGVkID0gc3BsaXRCeUdyb3VwcyhlbnRpdGllcyk7XG4gIHNwbGl0dGVkLmdyb3Vwcy5zb3J0KFxuICAgIChncjEsIGdyMikgPT4gZ3JvdXBPcmRlcnNbZ3IxLmVudGl0eV9pZF0gLSBncm91cE9yZGVyc1tncjIuZW50aXR5X2lkXVxuICApO1xuXG4gIGNvbnN0IGJhZGdlRW50aXRpZXM6IHsgW2RvbWFpbjogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xuICBjb25zdCB1bmdyb3VwZWRFbnRpdGl0ZXM6IHsgW2RvbWFpbjogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xuXG4gIC8vIE9yZ2FuaXplIHVuZ3JvdXBlZCBlbnRpdGllcyBpbiBiYWRnZXMvdW5ncm91cGVkIHRoaW5nc1xuICBPYmplY3Qua2V5cyhzcGxpdHRlZC51bmdyb3VwZWQpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBzcGxpdHRlZC51bmdyb3VwZWRbZW50aXR5SWRdO1xuICAgIGNvbnN0IGRvbWFpbiA9IGNvbXB1dGVTdGF0ZURvbWFpbihzdGF0ZSk7XG5cbiAgICBjb25zdCBjb2xsID0gRE9NQUlOU19CQURHRVMuaW5jbHVkZXMoZG9tYWluKVxuICAgICAgPyBiYWRnZUVudGl0aWVzXG4gICAgICA6IHVuZ3JvdXBlZEVudGl0aXRlcztcblxuICAgIGlmICghKGRvbWFpbiBpbiBjb2xsKSkge1xuICAgICAgY29sbFtkb21haW5dID0gW107XG4gICAgfVxuXG4gICAgY29sbFtkb21haW5dLnB1c2goc3RhdGUuZW50aXR5X2lkKTtcbiAgfSk7XG5cbiAgbGV0IGJhZGdlczogc3RyaW5nW10gPSBbXTtcbiAgRE9NQUlOU19CQURHRVMuZm9yRWFjaCgoZG9tYWluKSA9PiB7XG4gICAgaWYgKGRvbWFpbiBpbiBiYWRnZUVudGl0aWVzKSB7XG4gICAgICBiYWRnZXMgPSBiYWRnZXMuY29uY2F0KGJhZGdlRW50aXRpZXNbZG9tYWluXSk7XG4gICAgfVxuICB9KTtcblxuICBsZXQgY2FyZHM6IExvdmVsYWNlQ2FyZENvbmZpZ1tdID0gW107XG5cbiAgc3BsaXR0ZWQuZ3JvdXBzLmZvckVhY2goKGdyb3VwRW50aXR5KSA9PiB7XG4gICAgY2FyZHMgPSBjYXJkcy5jb25jYXQoXG4gICAgICBjb21wdXRlQ2FyZHMoXG4gICAgICAgIGdyb3VwRW50aXR5LmF0dHJpYnV0ZXMuZW50aXR5X2lkLm1hcChcbiAgICAgICAgICAoZW50aXR5SWQpOiBbc3RyaW5nLCBIYXNzRW50aXR5XSA9PiBbZW50aXR5SWQsIGVudGl0aWVzW2VudGl0eUlkXV1cbiAgICAgICAgKSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBjb21wdXRlU3RhdGVOYW1lKGdyb3VwRW50aXR5KSxcbiAgICAgICAgICBzaG93X2hlYWRlcl90b2dnbGU6IGdyb3VwRW50aXR5LmF0dHJpYnV0ZXMuY29udHJvbCAhPT0gXCJoaWRkZW5cIixcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH0pO1xuXG4gIE9iamVjdC5rZXlzKHVuZ3JvdXBlZEVudGl0aXRlcylcbiAgICAuc29ydCgpXG4gICAgLmZvckVhY2goKGRvbWFpbikgPT4ge1xuICAgICAgY2FyZHMgPSBjYXJkcy5jb25jYXQoXG4gICAgICAgIGNvbXB1dGVDYXJkcyhcbiAgICAgICAgICB1bmdyb3VwZWRFbnRpdGl0ZXNbZG9tYWluXS5tYXAoXG4gICAgICAgICAgICAoZW50aXR5SWQpOiBbc3RyaW5nLCBIYXNzRW50aXR5XSA9PiBbZW50aXR5SWQsIGVudGl0aWVzW2VudGl0eUlkXV1cbiAgICAgICAgICApLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZShgZG9tYWluLiR7ZG9tYWlufWApLFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KTtcblxuICBjb25zdCB2aWV3OiBMb3ZlbGFjZVZpZXdDb25maWcgPSB7XG4gICAgcGF0aCxcbiAgICB0aXRsZSxcbiAgICBiYWRnZXMsXG4gICAgY2FyZHMsXG4gIH07XG5cbiAgaWYgKGljb24pIHtcbiAgICB2aWV3Lmljb24gPSBpY29uO1xuICB9XG5cbiAgcmV0dXJuIHZpZXc7XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVMb3ZlbGFjZUNvbmZpZ0Zyb21IYXNzID0gYXN5bmMgKGhhc3M6IEhvbWVBc3Npc3RhbnQpID0+IHtcbiAgLy8gV2Ugd2FudCB0byBrZWVwIHRoZSByZWdpc3RyeSBzdWJzY3JpcHRpb25zIGFsaXZlIGFmdGVyIGdlbmVyYXRpbmcgdGhlIFVJXG4gIC8vIHNvIHRoYXQgd2UgZG9uJ3Qgc2VydmUgdXAgc3RhbGUgZGF0YSBhZnRlciBjaGFuZ2luZyBhcmVhcy5cbiAgaWYgKCFzdWJzY3JpYmVkUmVnaXN0cmllcykge1xuICAgIHN1YnNjcmliZWRSZWdpc3RyaWVzID0gdHJ1ZTtcbiAgICBzdWJzY3JpYmVBcmVhUmVnaXN0cnkoaGFzcy5jb25uZWN0aW9uLCAoKSA9PiB1bmRlZmluZWQpO1xuICAgIHN1YnNjcmliZURldmljZVJlZ2lzdHJ5KGhhc3MuY29ubmVjdGlvbiwgKCkgPT4gdW5kZWZpbmVkKTtcbiAgICBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeShoYXNzLmNvbm5lY3Rpb24sICgpID0+IHVuZGVmaW5lZCk7XG4gIH1cblxuICBjb25zdCBbYXJlYUVudHJpZXMsIGRldmljZUVudHJpZXMsIGVudGl0eUVudHJpZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHN1YnNjcmliZU9uZShoYXNzLmNvbm5lY3Rpb24sIHN1YnNjcmliZUFyZWFSZWdpc3RyeSksXG4gICAgc3Vic2NyaWJlT25lKGhhc3MuY29ubmVjdGlvbiwgc3Vic2NyaWJlRGV2aWNlUmVnaXN0cnkpLFxuICAgIHN1YnNjcmliZU9uZShoYXNzLmNvbm5lY3Rpb24sIHN1YnNjcmliZUVudGl0eVJlZ2lzdHJ5KSxcbiAgXSk7XG5cbiAgcmV0dXJuIGdlbmVyYXRlTG92ZWxhY2VDb25maWdGcm9tRGF0YShcbiAgICBoYXNzLmNvbmZpZyxcbiAgICBhcmVhRW50cmllcyxcbiAgICBkZXZpY2VFbnRyaWVzLFxuICAgIGVudGl0eUVudHJpZXMsXG4gICAgaGFzcy5zdGF0ZXMsXG4gICAgaGFzcy5sb2NhbGl6ZVxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlTG92ZWxhY2VDb25maWdGcm9tRGF0YSA9IGFzeW5jIChcbiAgY29uZmlnOiBIYXNzQ29uZmlnLFxuICBhcmVhRW50cmllczogQXJlYVJlZ2lzdHJ5RW50cnlbXSxcbiAgZGV2aWNlRW50cmllczogRGV2aWNlUmVnaXN0cnlFbnRyeVtdLFxuICBlbnRpdHlFbnRyaWVzOiBFbnRpdHlSZWdpc3RyeUVudHJ5W10sXG4gIGVudGl0aWVzOiBIYXNzRW50aXRpZXMsXG4gIGxvY2FsaXplOiBMb2NhbGl6ZUZ1bmNcbik6IFByb21pc2U8TG92ZWxhY2VDb25maWc+ID0+IHtcbiAgY29uc3Qgdmlld0VudGl0aWVzID0gZXh0cmFjdFZpZXdzKGVudGl0aWVzKTtcblxuICBjb25zdCB2aWV3cyA9IHZpZXdFbnRpdGllcy5tYXAoKHZpZXdFbnRpdHk6IEdyb3VwRW50aXR5KSA9PiB7XG4gICAgY29uc3Qgc3RhdGVzID0gZ2V0Vmlld0VudGl0aWVzKGVudGl0aWVzLCB2aWV3RW50aXR5KTtcblxuICAgIC8vIEluIHRoZSBjYXNlIG9mIGEgbm9ybWFsIHZpZXcsIHdlIHVzZSBncm91cCBvcmRlciBhcyBzcGVjaWZpZWQgaW4gdmlld1xuICAgIGNvbnN0IGdyb3VwT3JkZXJzID0ge307XG4gICAgT2JqZWN0LmtleXMoc3RhdGVzKS5mb3JFYWNoKChlbnRpdHlJZCwgaWR4KSA9PiB7XG4gICAgICBncm91cE9yZGVyc1tlbnRpdHlJZF0gPSBpZHg7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdGVWaWV3Q29uZmlnKFxuICAgICAgbG9jYWxpemUsXG4gICAgICBjb21wdXRlT2JqZWN0SWQodmlld0VudGl0eS5lbnRpdHlfaWQpLFxuICAgICAgY29tcHV0ZVN0YXRlTmFtZSh2aWV3RW50aXR5KSxcbiAgICAgIHZpZXdFbnRpdHkuYXR0cmlidXRlcy5pY29uLFxuICAgICAgc3RhdGVzLFxuICAgICAgZ3JvdXBPcmRlcnNcbiAgICApO1xuICB9KTtcblxuICBsZXQgdGl0bGUgPSBjb25maWcubG9jYXRpb25fbmFtZTtcblxuICAvLyBVc2VyIGNhbiBvdmVycmlkZSBkZWZhdWx0IHZpZXcuIElmIHRoZXkgZGlkbid0LCB3ZSB3aWxsIGFkZCBvbmVcbiAgLy8gdGhhdCBjb250YWlucyBhbGwgZW50aXRpZXMuXG4gIGlmIChcbiAgICB2aWV3RW50aXRpZXMubGVuZ3RoID09PSAwIHx8XG4gICAgdmlld0VudGl0aWVzWzBdLmVudGl0eV9pZCAhPT0gREVGQVVMVF9WSUVXX0VOVElUWV9JRFxuICApIHtcbiAgICB2aWV3cy51bnNoaWZ0KFxuICAgICAgZ2VuZXJhdGVEZWZhdWx0Vmlld0NvbmZpZyhcbiAgICAgICAgYXJlYUVudHJpZXMsXG4gICAgICAgIGRldmljZUVudHJpZXMsXG4gICAgICAgIGVudGl0eUVudHJpZXMsXG4gICAgICAgIGVudGl0aWVzLFxuICAgICAgICBsb2NhbGl6ZVxuICAgICAgKVxuICAgICk7XG5cbiAgICAvLyBBZGQgbWFwIG9mIGdlbyBsb2NhdGlvbnMgdG8gZGVmYXVsdCB2aWV3IGlmIGxvYWRlZFxuICAgIGlmIChjb25maWcuY29tcG9uZW50cy5pbmNsdWRlcyhcImdlb19sb2NhdGlvblwiKSkge1xuICAgICAgaWYgKHZpZXdzWzBdICYmIHZpZXdzWzBdLmNhcmRzKSB7XG4gICAgICAgIHZpZXdzWzBdLmNhcmRzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwibWFwXCIsXG4gICAgICAgICAgZ2VvX2xvY2F0aW9uX3NvdXJjZXM6IFtcImFsbFwiXSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGhhdmUgSG9tZSBhcyB0aXRsZSBhbmQgZmlyc3QgdGFiLlxuICAgIGlmICh2aWV3cy5sZW5ndGggPiAxICYmIHRpdGxlID09PSBcIkhvbWVcIikge1xuICAgICAgdGl0bGUgPSBcIueJp+WFu+eKrFwiO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVzZXIgaGFzIG5vIGVudGl0aWVzXG4gIGlmICh2aWV3cy5sZW5ndGggPT09IDEgJiYgdmlld3NbMF0uY2FyZHMhLmxlbmd0aCA9PT0gMCkge1xuICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1lbXB0eS1zdGF0ZS1jYXJkXCIgKi8gXCIuLi9jYXJkcy9odWktZW1wdHktc3RhdGUtY2FyZFwiKTtcbiAgICB2aWV3c1swXS5jYXJkcyEucHVzaCh7XG4gICAgICB0eXBlOiBcImN1c3RvbTpodWktZW1wdHktc3RhdGUtY2FyZFwiLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0aXRsZSxcbiAgICB2aWV3cyxcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBuYXZpZ2F0ZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vbmF2aWdhdGVcIjtcbmltcG9ydCB7IHRvZ2dsZUVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9lbnRpdHkvdG9nZ2xlLWVudGl0eVwiO1xuaW1wb3J0IHsgQWN0aW9uQ29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IGZvcndhcmRIYXB0aWMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9oYXB0aWNzXCI7XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVDbGljayA9IChcbiAgbm9kZTogSFRNTEVsZW1lbnQsXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNvbmZpZzoge1xuICAgIGVudGl0eT86IHN0cmluZztcbiAgICBjYW1lcmFfaW1hZ2U/OiBzdHJpbmc7XG4gICAgaG9sZF9hY3Rpb24/OiBBY3Rpb25Db25maWc7XG4gICAgdGFwX2FjdGlvbj86IEFjdGlvbkNvbmZpZztcbiAgfSxcbiAgaG9sZDogYm9vbGVhblxuKTogdm9pZCA9PiB7XG4gIGxldCBhY3Rpb25Db25maWc6IEFjdGlvbkNvbmZpZyB8IHVuZGVmaW5lZDtcblxuICBpZiAoaG9sZCAmJiBjb25maWcuaG9sZF9hY3Rpb24pIHtcbiAgICBhY3Rpb25Db25maWcgPSBjb25maWcuaG9sZF9hY3Rpb247XG4gIH0gZWxzZSBpZiAoIWhvbGQgJiYgY29uZmlnLnRhcF9hY3Rpb24pIHtcbiAgICBhY3Rpb25Db25maWcgPSBjb25maWcudGFwX2FjdGlvbjtcbiAgfVxuXG4gIGlmICghYWN0aW9uQ29uZmlnKSB7XG4gICAgYWN0aW9uQ29uZmlnID0ge1xuICAgICAgYWN0aW9uOiBcIm1vcmUtaW5mb1wiLFxuICAgIH07XG4gIH1cblxuICBzd2l0Y2ggKGFjdGlvbkNvbmZpZy5hY3Rpb24pIHtcbiAgICBjYXNlIFwibW9yZS1pbmZvXCI6XG4gICAgICBpZiAoY29uZmlnLmVudGl0eSB8fCBjb25maWcuY2FtZXJhX2ltYWdlKSB7XG4gICAgICAgIGZpcmVFdmVudChub2RlLCBcImhhc3MtbW9yZS1pbmZvXCIsIHtcbiAgICAgICAgICBlbnRpdHlJZDogY29uZmlnLmVudGl0eSA/IGNvbmZpZy5lbnRpdHkgOiBjb25maWcuY2FtZXJhX2ltYWdlISxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwibmF2aWdhdGVcIjpcbiAgICAgIGlmIChhY3Rpb25Db25maWcubmF2aWdhdGlvbl9wYXRoKSB7XG4gICAgICAgIG5hdmlnYXRlKG5vZGUsIGFjdGlvbkNvbmZpZy5uYXZpZ2F0aW9uX3BhdGgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInVybFwiOlxuICAgICAgaWYgKGFjdGlvbkNvbmZpZy51cmxfcGF0aCkge1xuICAgICAgICB3aW5kb3cub3BlbihhY3Rpb25Db25maWcudXJsX3BhdGgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInRvZ2dsZVwiOlxuICAgICAgaWYgKGNvbmZpZy5lbnRpdHkpIHtcbiAgICAgICAgdG9nZ2xlRW50aXR5KGhhc3MsIGNvbmZpZy5lbnRpdHkhKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxsLXNlcnZpY2VcIjoge1xuICAgICAgaWYgKCFhY3Rpb25Db25maWcuc2VydmljZSkge1xuICAgICAgICBmb3J3YXJkSGFwdGljKFwiZmFpbHVyZVwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgW2RvbWFpbiwgc2VydmljZV0gPSBhY3Rpb25Db25maWcuc2VydmljZS5zcGxpdChcIi5cIiwgMik7XG4gICAgICBoYXNzLmNhbGxTZXJ2aWNlKGRvbWFpbiwgc2VydmljZSwgYWN0aW9uQ29uZmlnLnNlcnZpY2VfZGF0YSk7XG4gICAgfVxuICB9XG4gIGZvcndhcmRIYXB0aWMoXCJsaWdodFwiKTtcbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eVZhbHVlcyB9IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG4vLyBDaGVjayBpZiBjb25maWcgb3IgRW50aXR5IGNoYW5nZWRcbmV4cG9ydCBmdW5jdGlvbiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQoXG4gIGVsZW1lbnQ6IGFueSxcbiAgY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlc1xuKTogYm9vbGVhbiB7XG4gIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiX2NvbmZpZ1wiKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG4gIGlmICghb2xkSGFzcykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICBvbGRIYXNzLnN0YXRlc1tlbGVtZW50Ll9jb25maWchLmVudGl0eV0gIT09XG4gICAgICBlbGVtZW50Lmhhc3MhLnN0YXRlc1tlbGVtZW50Ll9jb25maWchLmVudGl0eV0gfHxcbiAgICBvbGRIYXNzLmxvY2FsaXplICE9PSBlbGVtZW50Lmhhc3MubG9jYWxpemVcbiAgKTtcbn1cbiIsImltcG9ydCB7IGxvYWRNb2R1bGUsIGxvYWRDU1MsIGxvYWRKUyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZG9tL2xvYWRfcmVzb3VyY2VcIjtcblxuaW1wb3J0IHsgTG92ZWxhY2VDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuXG4vLyBDU1MgYW5kIEpTIHNob3VsZCBvbmx5IGJlIGltcG9ydGVkIG9uY2UuIE1vZHVsZXMgYW5kIEhUTUwgYXJlIHNhZmUuXG5jb25zdCBDU1NfQ0FDSEUgPSB7fTtcbmNvbnN0IEpTX0NBQ0hFID0ge307XG5cbmV4cG9ydCBjb25zdCBsb2FkTG92ZWxhY2VSZXNvdXJjZXMgPSAoXG4gIHJlc291cmNlczogTm9uTnVsbGFibGU8TG92ZWxhY2VDb25maWdbXCJyZXNvdXJjZXNcIl0+LFxuICBoYXNzVXJsOiBzdHJpbmdcbikgPT5cbiAgcmVzb3VyY2VzLmZvckVhY2goKHJlc291cmNlKSA9PiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFVybCA9IG5ldyBVUkwocmVzb3VyY2UudXJsLCBoYXNzVXJsKS50b1N0cmluZygpO1xuICAgIHN3aXRjaCAocmVzb3VyY2UudHlwZSkge1xuICAgICAgY2FzZSBcImNzc1wiOlxuICAgICAgICBpZiAobm9ybWFsaXplZFVybCBpbiBDU1NfQ0FDSEUpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBDU1NfQ0FDSEVbbm9ybWFsaXplZFVybF0gPSBsb2FkQ1NTKG5vcm1hbGl6ZWRVcmwpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcImpzXCI6XG4gICAgICAgIGlmIChub3JtYWxpemVkVXJsIGluIEpTX0NBQ0hFKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgSlNfQ0FDSEVbbm9ybWFsaXplZFVybF0gPSBsb2FkSlMobm9ybWFsaXplZFVybCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwibW9kdWxlXCI6XG4gICAgICAgIGxvYWRNb2R1bGUobm9ybWFsaXplZFVybCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiaHRtbFwiOlxuICAgICAgICBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJpbXBvcnQtaHJlZi1wb2x5ZmlsbFwiICovIFwiLi4vLi4vLi4vcmVzb3VyY2VzL2h0bWwtaW1wb3J0L2ltcG9ydC1ocmVmXCIpLnRoZW4oXG4gICAgICAgICAgKHsgaW1wb3J0SHJlZiB9KSA9PiBpbXBvcnRIcmVmKG5vcm1hbGl6ZWRVcmwpXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIHJlc291cmNlIHR5cGUgc3BlY2lmaWVkOiAke3Jlc291cmNlLnR5cGV9YCk7XG4gICAgfVxuICB9KTtcbiIsIi8vIFBhcnNlIGFycmF5IG9mIGVudGl0eSBvYmplY3RzIGZyb20gY29uZmlnXG5pbXBvcnQgeyBpc1ZhbGlkRW50aXR5SWQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS92YWxpZF9lbnRpdHlfaWRcIjtcbmltcG9ydCB7IEVudGl0eUNvbmZpZyB9IGZyb20gXCIuLi9lbnRpdHktcm93cy90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0NvbmZpZ0VudGl0aWVzID0gPFQgZXh0ZW5kcyBFbnRpdHlDb25maWc+KFxuICBlbnRpdGllczogQXJyYXk8VCB8IHN0cmluZz5cbik6IFRbXSA9PiB7XG4gIGlmICghZW50aXRpZXMgfHwgIUFycmF5LmlzQXJyYXkoZW50aXRpZXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRW50aXRpZXMgbmVlZCB0byBiZSBhbiBhcnJheVwiKTtcbiAgfVxuXG4gIHJldHVybiBlbnRpdGllcy5tYXAoXG4gICAgKGVudGl0eUNvbmYsIGluZGV4KTogVCA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBlbnRpdHlDb25mID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICFBcnJheS5pc0FycmF5KGVudGl0eUNvbmYpICYmXG4gICAgICAgIGVudGl0eUNvbmYudHlwZVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHlDb25mO1xuICAgICAgfVxuXG4gICAgICBsZXQgY29uZmlnOiBUO1xuXG4gICAgICBpZiAodHlwZW9mIGVudGl0eUNvbmYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLW9iamVjdC1saXRlcmFsLXR5cGUtYXNzZXJ0aW9uXG4gICAgICAgIGNvbmZpZyA9IHsgZW50aXR5OiBlbnRpdHlDb25mIH0gYXMgVDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVudGl0eUNvbmYgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoZW50aXR5Q29uZikpIHtcbiAgICAgICAgaWYgKCFlbnRpdHlDb25mLmVudGl0eSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBFbnRpdHkgb2JqZWN0IGF0IHBvc2l0aW9uICR7aW5kZXh9IGlzIG1pc3NpbmcgZW50aXR5IGZpZWxkLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZyA9IGVudGl0eUNvbmYgYXMgVDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBlbnRpdHkgc3BlY2lmaWVkIGF0IHBvc2l0aW9uICR7aW5kZXh9LmApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzVmFsaWRFbnRpdHlJZChjb25maWcuZW50aXR5KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgZW50aXR5IElEIGF0IHBvc2l0aW9uICR7aW5kZXh9OiAke2NvbmZpZy5lbnRpdHl9YFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cbiAgKTtcbn07XG4iLCJpbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZGl0aW9uIHtcbiAgZW50aXR5OiBzdHJpbmc7XG4gIHN0YXRlPzogc3RyaW5nO1xuICBzdGF0ZV9ub3Q/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvbmRpdGlvbnNNZXQoXG4gIGNvbmRpdGlvbnM6IENvbmRpdGlvbltdLFxuICBoYXNzOiBIb21lQXNzaXN0YW50XG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIGNvbmRpdGlvbnMuZXZlcnkoKGMpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGhhc3Muc3RhdGVzW2MuZW50aXR5XVxuICAgICAgPyBoYXNzIS5zdGF0ZXNbYy5lbnRpdHldLnN0YXRlXG4gICAgICA6IFwidW5hdmFpbGFibGVcIjtcblxuICAgIHJldHVybiBjLnN0YXRlID8gc3RhdGUgPT09IGMuc3RhdGUgOiBzdGF0ZSAhPT0gYy5zdGF0ZV9ub3Q7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDb25kaXRpb25hbENvbmZpZyhjb25kaXRpb25zOiBDb25kaXRpb25bXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29uZGl0aW9ucy5ldmVyeShcbiAgICAoYykgPT4gKChjLmVudGl0eSAmJiAoYy5zdGF0ZSB8fCBjLnN0YXRlX25vdCkpIGFzIHVua25vd24pIGFzIGJvb2xlYW5cbiAgKTtcbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1zd2l0Y2hcIjtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1kdXBsaWNhdGUtaW1wb3J0c1xuaW1wb3J0IHsgSGFTd2l0Y2ggfSBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1zd2l0Y2hcIjtcbmltcG9ydCB7IERPTUFJTlNfVE9HR0xFIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgdHVybk9uT2ZmRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS90dXJuLW9uLW9mZi1lbnRpdGllc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZm9yd2FyZEhhcHRpYyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2hhcHRpY3NcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZW50aXRpZXMtdG9nZ2xlXCIpXG5jbGFzcyBIdWlFbnRpdGllc1RvZ2dsZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgZW50aXRpZXM/OiBzdHJpbmdbXTtcblxuICBAcHJvcGVydHkoKSBwcm90ZWN0ZWQgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfdG9nZ2xlRW50aXRpZXM/OiBzdHJpbmdbXTtcblxuICBwdWJsaWMgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiZW50aXRpZXNcIikpIHtcbiAgICAgIHRoaXMuX3RvZ2dsZUVudGl0aWVzID0gdGhpcy5lbnRpdGllcyEuZmlsdGVyKFxuICAgICAgICAoZW50aXR5SWQpID0+XG4gICAgICAgICAgZW50aXR5SWQgaW4gdGhpcy5oYXNzIS5zdGF0ZXMgJiZcbiAgICAgICAgICBET01BSU5TX1RPR0dMRS5oYXMoZW50aXR5SWQuc3BsaXQoXCIuXCIsIDEpWzBdKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl90b2dnbGVFbnRpdGllcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1zd2l0Y2hcbiAgICAgICAgYXJpYS1sYWJlbD1cIlRvZ2dsZSBlbnRpdGllcy5cIlxuICAgICAgICA/Y2hlY2tlZD1cIiR7dGhpcy5fdG9nZ2xlRW50aXRpZXMhLnNvbWUoKGVudGl0eUlkKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1tlbnRpdHlJZF07XG4gICAgICAgICAgcmV0dXJuIHN0YXRlT2JqICYmIHN0YXRlT2JqLnN0YXRlID09PSBcIm9uXCI7XG4gICAgICAgIH0pfVwiXG4gICAgICAgIEBjaGFuZ2U9XCIke3RoaXMuX2NhbGxTZXJ2aWNlfVwiXG4gICAgICA+PC9oYS1zd2l0Y2g+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgd2lkdGg6IDM4cHg7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuICAgICAgaGEtc3dpdGNoIHtcbiAgICAgICAgcGFkZGluZzogMTNweCA1cHg7XG4gICAgICAgIG1hcmdpbjogLTRweCAtNXB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jYWxsU2VydmljZShldjogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGZvcndhcmRIYXB0aWMoXCJsaWdodFwiKTtcbiAgICBjb25zdCB0dXJuT24gPSAoZXYudGFyZ2V0IGFzIEhhU3dpdGNoKS5jaGVja2VkO1xuICAgIHR1cm5Pbk9mZkVudGl0aWVzKHRoaXMuaGFzcyEsIHRoaXMuX3RvZ2dsZUVudGl0aWVzISwgdHVybk9uISk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1lbnRpdGllcy10b2dnbGVcIjogSHVpRW50aXRpZXNUb2dnbGU7XG4gIH1cbn1cbiIsImltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7XG4gIExpdEVsZW1lbnQsXG4gIGh0bWwsXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgcHJvcGVydHksXG4gIFRlbXBsYXRlUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvc3RhdGUtYmFkZ2VcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtcmVsYXRpdmUtdGltZVwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1pY29uXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNvbXB1dGVSVEwgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvY29tcHV0ZV9ydGxcIjtcbmltcG9ydCB7IEVudGl0aWVzQ2FyZEVudGl0eUNvbmZpZyB9IGZyb20gXCIuLi9jYXJkcy90eXBlc1wiO1xuaW1wb3J0IHsgdG9nZ2xlQXR0cmlidXRlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vdG9nZ2xlX2F0dHJpYnV0ZVwiO1xuXG5jbGFzcyBIdWlHZW5lcmljRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgY29uZmlnPzogRW50aXRpZXNDYXJkRW50aXR5Q29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBzaG93U2Vjb25kYXJ5OiBib29sZWFuID0gdHJ1ZTtcblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuY29uZmlnLmVudGl0eVxuICAgICAgPyB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuY29uZmlnLmVudGl0eV1cbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c3RhdGUtYmFkZ2VcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5zdGF0ZU9iaj0ke3N0YXRlT2JqfVxuICAgICAgICAub3ZlcnJpZGVJY29uPSR7dGhpcy5jb25maWcuaWNvbn1cbiAgICAgICAgLm92ZXJyaWRlSW1hZ2U9JHt0aGlzLmNvbmZpZy5pbWFnZX1cbiAgICAgID48L3N0YXRlLWJhZGdlPlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXhcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgICAke3RoaXMuY29uZmlnLm5hbWUgfHwgY29tcHV0ZVN0YXRlTmFtZShzdGF0ZU9iail9XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNlY29uZGFyeVwiPlxuICAgICAgICAgICAgJHshdGhpcy5zaG93U2Vjb25kYXJ5XG4gICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJzZWNvbmRhcnlcIj48L3Nsb3Q+XG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLnNlY29uZGFyeV9pbmZvID09PSBcImVudGl0eS1pZFwiXG4gICAgICAgICAgICAgID8gc3RhdGVPYmouZW50aXR5X2lkXG4gICAgICAgICAgICAgIDogdGhpcy5jb25maWcuc2Vjb25kYXJ5X2luZm8gPT09IFwibGFzdC1jaGFuZ2VkXCJcbiAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgPGhhLXJlbGF0aXZlLXRpbWVcbiAgICAgICAgICAgICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgICAgICAgICAgIC5kYXRldGltZT0ke3N0YXRlT2JqLmxhc3RfY2hhbmdlZH1cbiAgICAgICAgICAgICAgICAgID48L2hhLXJlbGF0aXZlLXRpbWU+XG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiaGFzc1wiKSkge1xuICAgICAgdG9nZ2xlQXR0cmlidXRlKHRoaXMsIFwicnRsXCIsIGNvbXB1dGVSVEwodGhpcy5oYXNzISkpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIC5mbGV4IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgfVxuICAgICAgLmluZm8ge1xuICAgICAgICBmbGV4OiAxIDAgNjBweDtcbiAgICAgIH1cbiAgICAgIC5pbmZvLFxuICAgICAgLmluZm8gPiAqIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgICAuZmxleCA6OnNsb3R0ZWQoKikge1xuICAgICAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgICAgICBtaW4td2lkdGg6IDA7XG4gICAgICB9XG4gICAgICAuZmxleCA6OnNsb3R0ZWQoW3Nsb3Q9XCJzZWNvbmRhcnlcIl0pIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICB9XG4gICAgICAuc2Vjb25kYXJ5LFxuICAgICAgaGEtcmVsYXRpdmUtdGltZSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuICAgICAgc3RhdGUtYmFkZ2Uge1xuICAgICAgICBmbGV4OiAwIDAgNDBweDtcbiAgICAgIH1cbiAgICAgIDpob3N0KFtydGxdKSAuZmxleCB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gICAgICB9XG4gICAgICA6aG9zdChbcnRsXSkgLmZsZXggOjpzbG90dGVkKCopIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1nZW5lcmljLWVudGl0eS1yb3dcIiwgSHVpR2VuZXJpY0VudGl0eVJvdyk7XG4iLCJpbXBvcnQgeyBTVEFURVNfT0ZGIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuXG5pbXBvcnQgcGFyc2VBc3BlY3RSYXRpbyBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvXCI7XG5pbXBvcnQge1xuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgaHRtbCxcbiAgcHJvcGVydHksXG4gIENTU1Jlc3VsdCxcbiAgY3NzLFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgcXVlcnksXG4gIGN1c3RvbUVsZW1lbnQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCwgQ2FtZXJhRW50aXR5IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBzdHlsZU1hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3N0eWxlLW1hcFwiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcbmltcG9ydCB7IGZldGNoVGh1bWJuYWlsVXJsV2l0aENhY2hlIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvY2FtZXJhXCI7XG5cbmNvbnN0IFVQREFURV9JTlRFUlZBTCA9IDEwMDAwO1xuY29uc3QgREVGQVVMVF9GSUxURVIgPSBcImdyYXlzY2FsZSgxMDAlKVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlU3BlY2lmaWNDb25maWcge1xuICBbc3RhdGU6IHN0cmluZ106IHN0cmluZztcbn1cblxuQGN1c3RvbUVsZW1lbnQoXCJodWktaW1hZ2VcIilcbmV4cG9ydCBjbGFzcyBIdWlJbWFnZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGVudGl0eT86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaW1hZ2U/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIHN0YXRlSW1hZ2U/OiBTdGF0ZVNwZWNpZmljQ29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBjYW1lcmFJbWFnZT86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgY2FtZXJhVmlldz86IFwibGl2ZVwiIHwgXCJhdXRvXCI7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGFzcGVjdFJhdGlvPzogc3RyaW5nO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBmaWx0ZXI/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIHN0YXRlRmlsdGVyPzogU3RhdGVTcGVjaWZpY0NvbmZpZztcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9sb2FkRXJyb3I/OiBib29sZWFuO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NhbWVyYUltYWdlU3JjPzogc3RyaW5nO1xuXG4gIEBxdWVyeShcImltZ1wiKSBwcml2YXRlIF9pbWFnZSE6IEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBfbGFzdEltYWdlSGVpZ2h0PzogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2NhbWVyYVVwZGF0ZXI/OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfYXR0YWNoZWQ/OiBib29sZWFuO1xuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2F0dGFjaGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5jYW1lcmFJbWFnZSAmJiB0aGlzLmNhbWVyYVZpZXcgIT09IFwibGl2ZVwiKSB7XG4gICAgICB0aGlzLl9zdGFydFVwZGF0ZUNhbWVyYUludGVydmFsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fYXR0YWNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBjb25zdCByYXRpbyA9IHRoaXMuYXNwZWN0UmF0aW8gPyBwYXJzZUFzcGVjdFJhdGlvKHRoaXMuYXNwZWN0UmF0aW8pIDogbnVsbDtcbiAgICBjb25zdCBzdGF0ZU9iaiA9XG4gICAgICB0aGlzLmhhc3MgJiYgdGhpcy5lbnRpdHkgPyB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuZW50aXR5XSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzdGF0ZSA9IHN0YXRlT2JqID8gc3RhdGVPYmouc3RhdGUgOiBcInVuYXZhaWxhYmxlXCI7XG5cbiAgICAvLyBGaWd1cmUgb3V0IGltYWdlIHNvdXJjZSB0byB1c2VcbiAgICBsZXQgaW1hZ2VTcmM6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgY2FtZXJhT2JqOiBDYW1lcmFFbnRpdHkgfCB1bmRlZmluZWQ7XG4gICAgLy8gVHJhY2sgaWYgd2UgYXJlIHdlIHVzaW5nIGEgZmFsbGJhY2sgaW1hZ2UsIHVzZWQgZm9yIGZpbHRlci5cbiAgICBsZXQgaW1hZ2VGYWxsYmFjayA9ICF0aGlzLnN0YXRlSW1hZ2U7XG5cbiAgICBpZiAodGhpcy5jYW1lcmFJbWFnZSkge1xuICAgICAgaWYgKHRoaXMuY2FtZXJhVmlldyA9PT0gXCJsaXZlXCIpIHtcbiAgICAgICAgY2FtZXJhT2JqID1cbiAgICAgICAgICB0aGlzLmhhc3MgJiYgKHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5jYW1lcmFJbWFnZV0gYXMgQ2FtZXJhRW50aXR5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlU3JjID0gdGhpcy5fY2FtZXJhSW1hZ2VTcmM7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlSW1hZ2UpIHtcbiAgICAgIGNvbnN0IHN0YXRlSW1hZ2UgPSB0aGlzLnN0YXRlSW1hZ2Vbc3RhdGVdO1xuXG4gICAgICBpZiAoc3RhdGVJbWFnZSkge1xuICAgICAgICBpbWFnZVNyYyA9IHN0YXRlSW1hZ2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbWFnZVNyYyA9IHRoaXMuaW1hZ2U7XG4gICAgICAgIGltYWdlRmFsbGJhY2sgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbWFnZVNyYyA9IHRoaXMuaW1hZ2U7XG4gICAgfVxuXG4gICAgaWYgKGltYWdlU3JjKSB7XG4gICAgICBpbWFnZVNyYyA9IHRoaXMuaGFzcyEuaGFzc1VybChpbWFnZVNyYyk7XG4gICAgfVxuXG4gICAgLy8gRmlndXJlIG91dCBmaWx0ZXIgdG8gdXNlXG4gICAgbGV0IGZpbHRlciA9IHRoaXMuZmlsdGVyIHx8IFwiXCI7XG5cbiAgICBpZiAodGhpcy5zdGF0ZUZpbHRlciAmJiB0aGlzLnN0YXRlRmlsdGVyW3N0YXRlXSkge1xuICAgICAgZmlsdGVyID0gdGhpcy5zdGF0ZUZpbHRlcltzdGF0ZV07XG4gICAgfVxuXG4gICAgaWYgKCFmaWx0ZXIgJiYgdGhpcy5lbnRpdHkpIHtcbiAgICAgIGNvbnN0IGlzT2ZmID0gIXN0YXRlT2JqIHx8IFNUQVRFU19PRkYuaW5jbHVkZXMoc3RhdGUpO1xuICAgICAgZmlsdGVyID0gaXNPZmYgJiYgaW1hZ2VGYWxsYmFjayA/IERFRkFVTFRfRklMVEVSIDogXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgcGFkZGluZ0JvdHRvbTpcbiAgICAgICAgICAgIHJhdGlvICYmIHJhdGlvLncgPiAwICYmIHJhdGlvLmggPiAwXG4gICAgICAgICAgICAgID8gYCR7KCgxMDAgKiByYXRpby5oKSAvIHJhdGlvLncpLnRvRml4ZWQoMil9JWBcbiAgICAgICAgICAgICAgOiBcIlwiLFxuICAgICAgICB9KX1cbiAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7XG4gICAgICAgICAgcmF0aW86IEJvb2xlYW4ocmF0aW8gJiYgcmF0aW8udyA+IDAgJiYgcmF0aW8uaCA+IDApLFxuICAgICAgICB9KX1cbiAgICAgID5cbiAgICAgICAgJHt0aGlzLmNhbWVyYUltYWdlICYmIHRoaXMuY2FtZXJhVmlldyA9PT0gXCJsaXZlXCJcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxoYS1jYW1lcmEtc3RyZWFtXG4gICAgICAgICAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAgICAgICAgIC5zdGF0ZU9iaj1cIiR7Y2FtZXJhT2JqfVwiXG4gICAgICAgICAgICAgID48L2hhLWNhbWVyYS1zdHJlYW0+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgaWQ9XCJpbWFnZVwiXG4gICAgICAgICAgICAgICAgc3JjPSR7aW1hZ2VTcmN9XG4gICAgICAgICAgICAgICAgQGVycm9yPSR7dGhpcy5fb25JbWFnZUVycm9yfVxuICAgICAgICAgICAgICAgIEBsb2FkPSR7dGhpcy5fb25JbWFnZUxvYWR9XG4gICAgICAgICAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0aGlzLl9sb2FkRXJyb3IgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIixcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGB9XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBpZD1cImJyb2tlbkltYWdlXCJcbiAgICAgICAgICBzdHlsZT0ke3N0eWxlTWFwKHtcbiAgICAgICAgICAgIGhlaWdodDogYCR7dGhpcy5fbGFzdEltYWdlSGVpZ2h0IHx8IFwiMTAwXCJ9cHhgLFxuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5fbG9hZEVycm9yID8gXCJibG9ja1wiIDogXCJub25lXCIsXG4gICAgICAgICAgfSl9XG4gICAgICAgID48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJjYW1lcmFJbWFnZVwiKSAmJiB0aGlzLmNhbWVyYVZpZXcgIT09IFwibGl2ZVwiKSB7XG4gICAgICB0aGlzLl91cGRhdGVDYW1lcmFJbWFnZVNyYygpO1xuICAgICAgdGhpcy5fc3RhcnRVcGRhdGVDYW1lcmFJbnRlcnZhbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3N0YXJ0VXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgdGhpcy5fc3RvcFVwZGF0ZUNhbWVyYUludGVydmFsKCk7XG4gICAgaWYgKHRoaXMuY2FtZXJhSW1hZ2UgJiYgdGhpcy5fYXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2NhbWVyYVVwZGF0ZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoXG4gICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZUNhbWVyYUltYWdlU3JjKCksXG4gICAgICAgIFVQREFURV9JTlRFUlZBTFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NhbWVyYVVwZGF0ZXIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fY2FtZXJhVXBkYXRlcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25JbWFnZUVycm9yKCk6IHZvaWQge1xuICAgIHRoaXMuX2xvYWRFcnJvciA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9vbkltYWdlTG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9sb2FkRXJyb3IgPSBmYWxzZTtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNvbXBsZXRlO1xuICAgIHRoaXMuX2xhc3RJbWFnZUhlaWdodCA9IHRoaXMuX2ltYWdlLm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX3VwZGF0ZUNhbWVyYUltYWdlU3JjKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5oYXNzIHx8ICF0aGlzLmNhbWVyYUltYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2FtZXJhU3RhdGUgPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuY2FtZXJhSW1hZ2VdIGFzXG4gICAgICB8IENhbWVyYUVudGl0eVxuICAgICAgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIWNhbWVyYVN0YXRlKSB7XG4gICAgICB0aGlzLl9vbkltYWdlRXJyb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jYW1lcmFJbWFnZVNyYyA9IGF3YWl0IGZldGNoVGh1bWJuYWlsVXJsV2l0aENhY2hlKFxuICAgICAgdGhpcy5oYXNzLFxuICAgICAgdGhpcy5jYW1lcmFJbWFnZVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBpbWcge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICB0cmFuc2l0aW9uOiBmaWx0ZXIgMC4ycyBsaW5lYXI7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucmF0aW8ge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDA7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbyBpbWcsXG4gICAgICAucmF0aW8gZGl2IHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgICNicm9rZW5JbWFnZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IGdyZXkgdXJsKFwiL3N0YXRpYy9pbWFnZXMvaW1hZ2UtYnJva2VuLnN2Z1wiKSBjZW50ZXIvMzZweFxuICAgICAgICAgIG5vLXJlcGVhdDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW1hZ2VcIjogSHVpSW1hZ2U7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgZm9ybWF0X2RhdGUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfZGF0ZVwiO1xuaW1wb3J0IGZvcm1hdF9kYXRlX3RpbWUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfZGF0ZV90aW1lXCI7XG5pbXBvcnQgZm9ybWF0X3RpbWUgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfdGltZVwiO1xuaW1wb3J0IHJlbGF0aXZlVGltZSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RhdGV0aW1lL3JlbGF0aXZlX3RpbWVcIjtcblxuY29uc3QgRk9STUFUUzogeyBba2V5OiBzdHJpbmddOiAodHM6IERhdGUsIGxhbmc6IHN0cmluZykgPT4gc3RyaW5nIH0gPSB7XG4gIGRhdGU6IGZvcm1hdF9kYXRlLFxuICBkYXRldGltZTogZm9ybWF0X2RhdGVfdGltZSxcbiAgdGltZTogZm9ybWF0X3RpbWUsXG59O1xuY29uc3QgSU5URVJWQUxfRk9STUFUID0gW1wicmVsYXRpdmVcIiwgXCJ0b3RhbFwiXTtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktdGltZXN0YW1wLWRpc3BsYXlcIilcbmNsYXNzIEh1aVRpbWVzdGFtcERpc3BsYXkgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB0cz86IERhdGU7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGZvcm1hdD86XG4gICAgfCBcInJlbGF0aXZlXCJcbiAgICB8IFwidG90YWxcIlxuICAgIHwgXCJkYXRlXCJcbiAgICB8IFwiZGF0ZXRpbWVcIlxuICAgIHwgXCJ0aW1lXCI7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfcmVsYXRpdmU/OiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfY29ubmVjdGVkPzogYm9vbGVhbjtcblxuICBwcml2YXRlIF9pbnRlcnZhbD86IG51bWJlcjtcblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMuX3N0YXJ0SW50ZXJ2YWwoKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMudHMgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBpZiAoaXNOYU4odGhpcy50cy5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgSW52YWxpZCBkYXRlXG4gICAgICBgO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMuX2Zvcm1hdDtcblxuICAgIGlmIChJTlRFUlZBTF9GT1JNQVQuaW5jbHVkZXMoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgICR7dGhpcy5fcmVsYXRpdmV9XG4gICAgICBgO1xuICAgIH1cbiAgICBpZiAoZm9ybWF0IGluIEZPUk1BVFMpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAke0ZPUk1BVFNbZm9ybWF0XSh0aGlzLnRzLCB0aGlzLmhhc3MubGFuZ3VhZ2UpfVxuICAgICAgYDtcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICBJbnZhbGlkIGZvcm1hdFxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoIWNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImZvcm1hdFwiKSB8fCAhdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKElOVEVSVkFMX0ZPUk1BVC5pbmNsdWRlcyhcInJlbGF0aXZlXCIpKSB7XG4gICAgICB0aGlzLl9zdGFydEludGVydmFsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBfZm9ybWF0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0IHx8IFwicmVsYXRpdmVcIjtcbiAgfVxuXG4gIHByaXZhdGUgX3N0YXJ0SW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJJbnRlcnZhbCgpO1xuICAgIGlmICh0aGlzLl9jb25uZWN0ZWQgJiYgSU5URVJWQUxfRk9STUFULmluY2x1ZGVzKHRoaXMuX2Zvcm1hdCkpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZVJlbGF0aXZlKCk7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB0aGlzLl91cGRhdGVSZWxhdGl2ZSgpLCAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckludGVydmFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVSZWxhdGl2ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50cyAmJiB0aGlzLmhhc3MhLmxvY2FsaXplKSB7XG4gICAgICB0aGlzLl9yZWxhdGl2ZSA9XG4gICAgICAgIHRoaXMuX2Zvcm1hdCA9PT0gXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgPyByZWxhdGl2ZVRpbWUodGhpcy50cywgdGhpcy5oYXNzIS5sb2NhbGl6ZSlcbiAgICAgICAgICA6ICh0aGlzLl9yZWxhdGl2ZSA9IHJlbGF0aXZlVGltZShuZXcgRGF0ZSgpLCB0aGlzLmhhc3MhLmxvY2FsaXplLCB7XG4gICAgICAgICAgICAgIGNvbXBhcmVUaW1lOiB0aGlzLnRzLFxuICAgICAgICAgICAgICBpbmNsdWRlVGVuc2U6IGZhbHNlLFxuICAgICAgICAgICAgfSkpO1xuICAgIH1cbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXRpbWVzdGFtcC1kaXNwbGF5XCI6IEh1aVRpbWVzdGFtcERpc3BsYXk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS11bmF2YWlsYWJsZVwiKVxuZXhwb3J0IGNsYXNzIEh1aVVuYXZhaWxhYmxlIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB0ZXh0Pzogc3RyaW5nO1xuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkaXNhYmxlZC1vdmVybGF5XCI+XG4gICAgICAgIDxkaXY+JHt0aGlzLnRleHR9PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmRpc2FibGVkLW92ZXJsYXkge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3RhdGUtaWNvbi11bmF2YWlsYWJsZS1jb2xvcik7XG4gICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgei1pbmRleDogNTA7XG4gICAgICB9XG5cbiAgICAgIC5kaXNhYmxlZC1vdmVybGF5IGRpdiB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktdW5hdmFpbGFibGVcIjogSHVpVW5hdmFpbGFibGU7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWljb25cIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktd2FybmluZy1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpV2FybmluZ0VsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGxhYmVsPzogc3RyaW5nO1xuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1pY29uIGljb249XCJoYXNzOmFsZXJ0XCIgLnRpdGxlPVwiJHt0aGlzLmxhYmVsfVwiPjwvaGEtaWNvbj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGEtaWNvbiB7XG4gICAgICAgIGNvbG9yOiAjZmNlNTg4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS13YXJuaW5nLWVsZW1lbnRcIjogSHVpV2FybmluZ0VsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXdhcm5pbmdcIilcbmV4cG9ydCBjbGFzcyBIdWlXYXJuaW5nIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzbG90Pjwvc2xvdD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNlNTg4O1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXdhcm5pbmdcIjogSHVpV2FybmluZztcbiAgfVxufVxuIiwiaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgTG92ZWxhY2UgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBmb3IgZmlyZSBldmVudFxuICBpbnRlcmZhY2UgSEFTU0RvbUV2ZW50cyB7XG4gICAgXCJzaG93LWVkaXQtY2FyZFwiOiBFZGl0Q2FyZERpYWxvZ1BhcmFtcztcbiAgfVxufVxuXG5sZXQgcmVnaXN0ZXJlZERpYWxvZyA9IGZhbHNlO1xuY29uc3QgZGlhbG9nU2hvd0V2ZW50ID0gXCJzaG93LWVkaXQtY2FyZFwiO1xuY29uc3QgZGlhbG9nVGFnID0gXCJodWktZGlhbG9nLWVkaXQtY2FyZFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRDYXJkRGlhbG9nUGFyYW1zIHtcbiAgbG92ZWxhY2U6IExvdmVsYWNlO1xuICBwYXRoOiBbbnVtYmVyXSB8IFtudW1iZXIsIG51bWJlcl07XG4gIGVudGl0aWVzPzogc3RyaW5nW107IC8vIFdlIGNhbiBwYXNzIGVudGl0eSBpZCdzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgY29uZmlnIHdoZW4gYSBjYXJkIGlzIHBpY2tlZFxufVxuXG5jb25zdCByZWdpc3RlckVkaXRDYXJkRGlhbG9nID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogRXZlbnQgPT5cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIFwicmVnaXN0ZXItZGlhbG9nXCIsIHtcbiAgICBkaWFsb2dTaG93RXZlbnQsXG4gICAgZGlhbG9nVGFnLFxuICAgIGRpYWxvZ0ltcG9ydDogKCkgPT5cbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1kaWFsb2ctZWRpdC1jYXJkXCIgKi8gXCIuL2h1aS1kaWFsb2ctZWRpdC1jYXJkXCIpLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHNob3dFZGl0Q2FyZERpYWxvZyA9IChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIGVkaXRDYXJkRGlhbG9nUGFyYW1zOiBFZGl0Q2FyZERpYWxvZ1BhcmFtc1xuKTogdm9pZCA9PiB7XG4gIGlmICghcmVnaXN0ZXJlZERpYWxvZykge1xuICAgIHJlZ2lzdGVyZWREaWFsb2cgPSB0cnVlO1xuICAgIHJlZ2lzdGVyRWRpdENhcmREaWFsb2coZWxlbWVudCk7XG4gIH1cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIGRpYWxvZ1Nob3dFdmVudCwgZWRpdENhcmREaWFsb2dQYXJhbXMpO1xufTtcbiIsImltcG9ydCB7XG4gIExvdmVsYWNlQ29uZmlnLFxuICBMb3ZlbGFjZUNhcmRDb25maWcsXG4gIExvdmVsYWNlVmlld0NvbmZpZyxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcblxuZXhwb3J0IGNvbnN0IGFkZENhcmQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGg6IFtudW1iZXJdLFxuICBjYXJkQ29uZmlnOiBMb3ZlbGFjZUNhcmRDb25maWdcbik6IExvdmVsYWNlQ29uZmlnID0+IHtcbiAgY29uc3QgW3ZpZXdJbmRleF0gPSBwYXRoO1xuICBjb25zdCB2aWV3czogTG92ZWxhY2VWaWV3Q29uZmlnW10gPSBbXTtcblxuICBjb25maWcudmlld3MuZm9yRWFjaCgodmlld0NvbmYsIGluZGV4KSA9PiB7XG4gICAgaWYgKGluZGV4ICE9PSB2aWV3SW5kZXgpIHtcbiAgICAgIHZpZXdzLnB1c2goY29uZmlnLnZpZXdzW2luZGV4XSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2FyZHMgPSB2aWV3Q29uZi5jYXJkc1xuICAgICAgPyBbLi4udmlld0NvbmYuY2FyZHMsIGNhcmRDb25maWddXG4gICAgICA6IFtjYXJkQ29uZmlnXTtcblxuICAgIHZpZXdzLnB1c2goe1xuICAgICAgLi4udmlld0NvbmYsXG4gICAgICBjYXJkcyxcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jb25maWcsXG4gICAgdmlld3MsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgcmVwbGFjZUNhcmQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGg6IFtudW1iZXIsIG51bWJlcl0sXG4gIGNhcmRDb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZ1xuKTogTG92ZWxhY2VDb25maWcgPT4ge1xuICBjb25zdCBbdmlld0luZGV4LCBjYXJkSW5kZXhdID0gcGF0aDtcbiAgY29uc3Qgdmlld3M6IExvdmVsYWNlVmlld0NvbmZpZ1tdID0gW107XG5cbiAgY29uZmlnLnZpZXdzLmZvckVhY2goKHZpZXdDb25mLCBpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCAhPT0gdmlld0luZGV4KSB7XG4gICAgICB2aWV3cy5wdXNoKGNvbmZpZy52aWV3c1tpbmRleF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZpZXdzLnB1c2goe1xuICAgICAgLi4udmlld0NvbmYsXG4gICAgICBjYXJkczogKHZpZXdDb25mLmNhcmRzIHx8IFtdKS5tYXAoKG9yaWdDb25mLCBpbmQpID0+XG4gICAgICAgIGluZCA9PT0gY2FyZEluZGV4ID8gY2FyZENvbmZpZyA6IG9yaWdDb25mXG4gICAgICApLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIC4uLmNvbmZpZyxcbiAgICB2aWV3cyxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkID0gKFxuICBjb25maWc6IExvdmVsYWNlQ29uZmlnLFxuICBwYXRoOiBbbnVtYmVyLCBudW1iZXJdXG4pOiBMb3ZlbGFjZUNvbmZpZyA9PiB7XG4gIGNvbnN0IFt2aWV3SW5kZXgsIGNhcmRJbmRleF0gPSBwYXRoO1xuICBjb25zdCB2aWV3czogTG92ZWxhY2VWaWV3Q29uZmlnW10gPSBbXTtcblxuICBjb25maWcudmlld3MuZm9yRWFjaCgodmlld0NvbmYsIGluZGV4KSA9PiB7XG4gICAgaWYgKGluZGV4ICE9PSB2aWV3SW5kZXgpIHtcbiAgICAgIHZpZXdzLnB1c2goY29uZmlnLnZpZXdzW2luZGV4XSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmlld3MucHVzaCh7XG4gICAgICAuLi52aWV3Q29uZixcbiAgICAgIGNhcmRzOiAodmlld0NvbmYuY2FyZHMgfHwgW10pLmZpbHRlcihcbiAgICAgICAgKF9vcmlnQ29uZiwgaW5kKSA9PiBpbmQgIT09IGNhcmRJbmRleFxuICAgICAgKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jb25maWcsXG4gICAgdmlld3MsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3Qgc3dhcENhcmQgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGgxOiBbbnVtYmVyLCBudW1iZXJdLFxuICBwYXRoMjogW251bWJlciwgbnVtYmVyXVxuKTogTG92ZWxhY2VDb25maWcgPT4ge1xuICBjb25zdCBjYXJkMSA9IGNvbmZpZy52aWV3c1twYXRoMVswXV0uY2FyZHMhW3BhdGgxWzFdXTtcbiAgY29uc3QgY2FyZDIgPSBjb25maWcudmlld3NbcGF0aDJbMF1dLmNhcmRzIVtwYXRoMlsxXV07XG5cbiAgY29uc3Qgb3JpZ1ZpZXcxID0gY29uZmlnLnZpZXdzW3BhdGgxWzBdXTtcbiAgY29uc3QgbmV3VmlldzEgPSB7XG4gICAgLi4ub3JpZ1ZpZXcxLFxuICAgIGNhcmRzOiBvcmlnVmlldzEuY2FyZHMhLm1hcCgob3JpZ0NhcmQsIGluZGV4KSA9PlxuICAgICAgaW5kZXggPT09IHBhdGgxWzFdID8gY2FyZDIgOiBvcmlnQ2FyZFxuICAgICksXG4gIH07XG5cbiAgY29uc3Qgb3JpZ1ZpZXcyID0gcGF0aDFbMF0gPT09IHBhdGgyWzBdID8gbmV3VmlldzEgOiBjb25maWcudmlld3NbcGF0aDJbMF1dO1xuICBjb25zdCBuZXdWaWV3MiA9IHtcbiAgICAuLi5vcmlnVmlldzIsXG4gICAgY2FyZHM6IG9yaWdWaWV3Mi5jYXJkcyEubWFwKChvcmlnQ2FyZCwgaW5kZXgpID0+XG4gICAgICBpbmRleCA9PT0gcGF0aDJbMV0gPyBjYXJkMSA6IG9yaWdDYXJkXG4gICAgKSxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIC4uLmNvbmZpZyxcbiAgICB2aWV3czogY29uZmlnLnZpZXdzLm1hcCgob3JpZ1ZpZXcsIGluZGV4KSA9PlxuICAgICAgaW5kZXggPT09IHBhdGgyWzBdID8gbmV3VmlldzIgOiBpbmRleCA9PT0gcGF0aDFbMF0gPyBuZXdWaWV3MSA6IG9yaWdWaWV3XG4gICAgKSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb3ZlQ2FyZCA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgZnJvbVBhdGg6IFtudW1iZXIsIG51bWJlcl0sXG4gIHRvUGF0aDogW251bWJlcl1cbik6IExvdmVsYWNlQ29uZmlnID0+IHtcbiAgaWYgKGZyb21QYXRoWzBdID09PSB0b1BhdGhbMF0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgY2FuIG5vdCBtb3ZlIGEgY2FyZCB0byB0aGUgdmlldyBpdCBpcyBpbi5cIik7XG4gIH1cbiAgY29uc3QgZnJvbVZpZXcgPSBjb25maWcudmlld3NbZnJvbVBhdGhbMF1dO1xuICBjb25zdCBjYXJkID0gZnJvbVZpZXcuY2FyZHMhW2Zyb21QYXRoWzFdXTtcblxuICBjb25zdCBuZXdWaWV3MSA9IHtcbiAgICAuLi5mcm9tVmlldyxcbiAgICBjYXJkczogKGZyb21WaWV3LmNhcmRzIHx8IFtdKS5maWx0ZXIoXG4gICAgICAoX29yaWdDb25mLCBpbmQpID0+IGluZCAhPT0gZnJvbVBhdGhbMV1cbiAgICApLFxuICB9O1xuXG4gIGNvbnN0IHRvVmlldyA9IGNvbmZpZy52aWV3c1t0b1BhdGhbMF1dO1xuICBjb25zdCBjYXJkcyA9IHRvVmlldy5jYXJkcyA/IFsuLi50b1ZpZXcuY2FyZHMsIGNhcmRdIDogW2NhcmRdO1xuXG4gIGNvbnN0IG5ld1ZpZXcyID0ge1xuICAgIC4uLnRvVmlldyxcbiAgICBjYXJkcyxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIC4uLmNvbmZpZyxcbiAgICB2aWV3czogY29uZmlnLnZpZXdzLm1hcCgob3JpZ1ZpZXcsIGluZGV4KSA9PlxuICAgICAgaW5kZXggPT09IHRvUGF0aFswXVxuICAgICAgICA/IG5ld1ZpZXcyXG4gICAgICAgIDogaW5kZXggPT09IGZyb21QYXRoWzBdXG4gICAgICAgID8gbmV3VmlldzFcbiAgICAgICAgOiBvcmlnVmlld1xuICAgICksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgYWRkVmlldyA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgdmlld0NvbmZpZzogTG92ZWxhY2VWaWV3Q29uZmlnXG4pOiBMb3ZlbGFjZUNvbmZpZyA9PiAoe1xuICAuLi5jb25maWcsXG4gIHZpZXdzOiBjb25maWcudmlld3MuY29uY2F0KHZpZXdDb25maWcpLFxufSk7XG5cbmV4cG9ydCBjb25zdCByZXBsYWNlVmlldyA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgdmlld0luZGV4OiBudW1iZXIsXG4gIHZpZXdDb25maWc6IExvdmVsYWNlVmlld0NvbmZpZ1xuKTogTG92ZWxhY2VDb25maWcgPT4gKHtcbiAgLi4uY29uZmlnLFxuICB2aWV3czogY29uZmlnLnZpZXdzLm1hcCgob3JpZ1ZpZXcsIGluZGV4KSA9PlxuICAgIGluZGV4ID09PSB2aWV3SW5kZXggPyB2aWV3Q29uZmlnIDogb3JpZ1ZpZXdcbiAgKSxcbn0pO1xuXG5leHBvcnQgY29uc3Qgc3dhcFZpZXcgPSAoXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWcsXG4gIHBhdGgxOiBudW1iZXIsXG4gIHBhdGgyOiBudW1iZXJcbik6IExvdmVsYWNlQ29uZmlnID0+IHtcbiAgY29uc3QgdmlldzEgPSBjb25maWcudmlld3NbcGF0aDFdO1xuICBjb25zdCB2aWV3MiA9IGNvbmZpZy52aWV3c1twYXRoMl07XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5jb25maWcsXG4gICAgdmlld3M6IGNvbmZpZy52aWV3cy5tYXAoKG9yaWdWaWV3LCBpbmRleCkgPT5cbiAgICAgIGluZGV4ID09PSBwYXRoMiA/IHZpZXcxIDogaW5kZXggPT09IHBhdGgxID8gdmlldzIgOiBvcmlnVmlld1xuICAgICksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZGVsZXRlVmlldyA9IChcbiAgY29uZmlnOiBMb3ZlbGFjZUNvbmZpZyxcbiAgdmlld0luZGV4OiBudW1iZXJcbik6IExvdmVsYWNlQ29uZmlnID0+ICh7XG4gIC4uLmNvbmZpZyxcbiAgdmlld3M6IGNvbmZpZy52aWV3cy5maWx0ZXIoKF9vcmlnVmlldywgaW5kZXgpID0+IGluZGV4ICE9PSB2aWV3SW5kZXgpLFxufSk7XG4iLCJpbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIGZvciBmaXJlIGV2ZW50XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcInNob3ctZWRpdC1sb3ZlbGFjZVwiOiBMb3ZlbGFjZTtcbiAgfVxufVxuXG5sZXQgcmVnaXN0ZXJlZERpYWxvZyA9IGZhbHNlO1xuY29uc3QgZGlhbG9nU2hvd0V2ZW50ID0gXCJzaG93LWVkaXQtbG92ZWxhY2VcIjtcbmNvbnN0IGRpYWxvZ1RhZyA9IFwiaHVpLWRpYWxvZy1lZGl0LWxvdmVsYWNlXCI7XG5cbmNvbnN0IHJlZ2lzdGVyRWRpdExvdmVsYWNlRGlhbG9nID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogRXZlbnQgPT5cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIFwicmVnaXN0ZXItZGlhbG9nXCIsIHtcbiAgICBkaWFsb2dTaG93RXZlbnQsXG4gICAgZGlhbG9nVGFnLFxuICAgIGRpYWxvZ0ltcG9ydDogKCkgPT5cbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS1kaWFsb2ctZWRpdC1sb3ZlbGFjZVwiICovIFwiLi9odWktZGlhbG9nLWVkaXQtbG92ZWxhY2VcIiksXG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2hvd0VkaXRMb3ZlbGFjZURpYWxvZyA9IChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIGxvdmVsYWNlOiBMb3ZlbGFjZVxuKTogdm9pZCA9PiB7XG4gIGlmICghcmVnaXN0ZXJlZERpYWxvZykge1xuICAgIHJlZ2lzdGVyZWREaWFsb2cgPSB0cnVlO1xuICAgIHJlZ2lzdGVyRWRpdExvdmVsYWNlRGlhbG9nKGVsZW1lbnQpO1xuICB9XG4gIGZpcmVFdmVudChlbGVtZW50LCBkaWFsb2dTaG93RXZlbnQsIGxvdmVsYWNlKTtcbn07XG4iLCJpbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIGZvciBmaXJlIGV2ZW50XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcInNob3ctc2F2ZS1jb25maWdcIjogU2F2ZURpYWxvZ1BhcmFtcztcbiAgfVxufVxuXG5jb25zdCBkaWFsb2dTaG93RXZlbnQgPSBcInNob3ctc2F2ZS1jb25maWdcIjtcbmNvbnN0IGRpYWxvZ1RhZyA9IFwiaHVpLWRpYWxvZy1zYXZlLWNvbmZpZ1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNhdmVEaWFsb2dQYXJhbXMge1xuICBsb3ZlbGFjZTogTG92ZWxhY2U7XG59XG5cbmxldCByZWdpc3RlcmVkRGlhbG9nID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBzaG93U2F2ZURpYWxvZyA9IChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIHNhdmVEaWFsb2dQYXJhbXM6IFNhdmVEaWFsb2dQYXJhbXNcbikgPT4ge1xuICBpZiAoIXJlZ2lzdGVyZWREaWFsb2cpIHtcbiAgICByZWdpc3RlcmVkRGlhbG9nID0gdHJ1ZTtcbiAgICBmaXJlRXZlbnQoZWxlbWVudCwgXCJyZWdpc3Rlci1kaWFsb2dcIiwge1xuICAgICAgZGlhbG9nU2hvd0V2ZW50LFxuICAgICAgZGlhbG9nVGFnLFxuICAgICAgZGlhbG9nSW1wb3J0OiAoKSA9PlxuICAgICAgICBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJodWktZGlhbG9nLXNhdmUtY29uZmlnXCIgKi8gXCIuL2h1aS1kaWFsb2ctc2F2ZS1jb25maWdcIiksXG4gICAgfSk7XG4gIH1cbiAgZmlyZUV2ZW50KGVsZW1lbnQsIGRpYWxvZ1Nob3dFdmVudCwgc2F2ZURpYWxvZ1BhcmFtcyk7XG59O1xuIiwiaW1wb3J0IHsgSEFTU0RvbUV2ZW50LCBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIGZvciBmaXJlIGV2ZW50XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcInJlbG9hZC1sb3ZlbGFjZVwiOiB1bmRlZmluZWQ7XG4gICAgXCJzaG93LWVkaXQtdmlld1wiOiBFZGl0Vmlld0RpYWxvZ1BhcmFtcztcbiAgfVxuICAvLyBmb3IgYWRkIGV2ZW50IGxpc3RlbmVyXG4gIGludGVyZmFjZSBIVE1MRWxlbWVudEV2ZW50TWFwIHtcbiAgICBcInJlbG9hZC1sb3ZlbGFjZVwiOiBIQVNTRG9tRXZlbnQ8dW5kZWZpbmVkPjtcbiAgfVxufVxuXG5sZXQgcmVnaXN0ZXJlZERpYWxvZyA9IGZhbHNlO1xuY29uc3QgZGlhbG9nU2hvd0V2ZW50ID0gXCJzaG93LWVkaXQtdmlld1wiO1xuY29uc3QgZGlhbG9nVGFnID0gXCJodWktZGlhbG9nLWVkaXQtdmlld1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRWaWV3RGlhbG9nUGFyYW1zIHtcbiAgbG92ZWxhY2U6IExvdmVsYWNlO1xuICB2aWV3SW5kZXg/OiBudW1iZXI7XG59XG5cbmNvbnN0IHJlZ2lzdGVyRWRpdFZpZXdEaWFsb2cgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBFdmVudCA9PlxuICBmaXJlRXZlbnQoZWxlbWVudCwgXCJyZWdpc3Rlci1kaWFsb2dcIiwge1xuICAgIGRpYWxvZ1Nob3dFdmVudCxcbiAgICBkaWFsb2dUYWcsXG4gICAgZGlhbG9nSW1wb3J0OiAoKSA9PlxuICAgICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLWRpYWxvZy1lZGl0LXZpZXdcIiAqLyBcIi4vaHVpLWRpYWxvZy1lZGl0LXZpZXdcIiksXG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2hvd0VkaXRWaWV3RGlhbG9nID0gKFxuICBlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgZWRpdFZpZXdEaWFsb2dQYXJhbXM6IEVkaXRWaWV3RGlhbG9nUGFyYW1zXG4pOiB2b2lkID0+IHtcbiAgaWYgKCFyZWdpc3RlcmVkRGlhbG9nKSB7XG4gICAgcmVnaXN0ZXJlZERpYWxvZyA9IHRydWU7XG4gICAgcmVnaXN0ZXJFZGl0Vmlld0RpYWxvZyhlbGVtZW50KTtcbiAgfVxuICBmaXJlRXZlbnQoZWxlbWVudCwgZGlhbG9nU2hvd0V2ZW50LCBlZGl0Vmlld0RpYWxvZ1BhcmFtcyk7XG59O1xuIiwiaW1wb3J0IHtcbiAgY2hlY2tDb25kaXRpb25zTWV0LFxuICB2YWxpZGF0ZUNvbmRpdGlvbmFsQ29uZmlnLFxufSBmcm9tIFwiLi4vLi4vbG92ZWxhY2UvY29tbW9uL3ZhbGlkYXRlLWNvbmRpdGlvblwiO1xuaW1wb3J0IHsgY3JlYXRlU3R5bGVkSHVpRWxlbWVudCB9IGZyb20gXCIuLi9jYXJkcy9waWN0dXJlLWVsZW1lbnRzL2NyZWF0ZS1zdHlsZWQtaHVpLWVsZW1lbnRcIjtcbmltcG9ydCB7XG4gIExvdmVsYWNlRWxlbWVudCxcbiAgTG92ZWxhY2VFbGVtZW50Q29uZmlnLFxuICBDb25kaXRpb25hbEVsZW1lbnRDb25maWcsXG59IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmNsYXNzIEh1aUNvbmRpdGlvbmFsRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgcHVibGljIF9oYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHJpdmF0ZSBfY29uZmlnPzogQ29uZGl0aW9uYWxFbGVtZW50Q29uZmlnO1xuICBwcml2YXRlIF9lbGVtZW50czogTG92ZWxhY2VFbGVtZW50W10gPSBbXTtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogQ29uZGl0aW9uYWxFbGVtZW50Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKFxuICAgICAgIWNvbmZpZy5jb25kaXRpb25zIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShjb25maWcuY29uZGl0aW9ucykgfHxcbiAgICAgICFjb25maWcuZWxlbWVudHMgfHxcbiAgICAgICFBcnJheS5pc0FycmF5KGNvbmZpZy5lbGVtZW50cykgfHxcbiAgICAgICF2YWxpZGF0ZUNvbmRpdGlvbmFsQ29uZmlnKGNvbmZpZy5jb25kaXRpb25zKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgaW4gY2FyZCBjb25maWd1cmF0aW9uLlwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5fZWxlbWVudHMubWFwKChlbDogTG92ZWxhY2VFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmIChlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9lbGVtZW50cyA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcblxuICAgIHRoaXMuX2NvbmZpZy5lbGVtZW50cy5tYXAoKGVsZW1lbnRDb25maWc6IExvdmVsYWNlRWxlbWVudENvbmZpZykgPT4ge1xuICAgICAgdGhpcy5fZWxlbWVudHMucHVzaChjcmVhdGVTdHlsZWRIdWlFbGVtZW50KGVsZW1lbnRDb25maWcpKTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlRWxlbWVudHMoKTtcbiAgfVxuXG4gIHNldCBoYXNzKGhhc3M6IEhvbWVBc3Npc3RhbnQpIHtcbiAgICB0aGlzLl9oYXNzID0gaGFzcztcblxuICAgIHRoaXMudXBkYXRlRWxlbWVudHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRWxlbWVudHMoKSB7XG4gICAgaWYgKCF0aGlzLl9oYXNzIHx8ICF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2aXNpYmxlID0gY2hlY2tDb25kaXRpb25zTWV0KHRoaXMuX2NvbmZpZy5jb25kaXRpb25zLCB0aGlzLl9oYXNzKTtcblxuICAgIHRoaXMuX2VsZW1lbnRzLm1hcCgoZWw6IExvdmVsYWNlRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgZWwuaGFzcyA9IHRoaXMuX2hhc3M7XG4gICAgICAgIGlmICghZWwucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1jb25kaXRpb25hbC1lbGVtZW50XCI6IEh1aUNvbmRpdGlvbmFsRWxlbWVudDtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktY29uZGl0aW9uYWwtZWxlbWVudFwiLCBIdWlDb25kaXRpb25hbEVsZW1lbnQpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuXG5pbXBvcnQgeyBjb21wdXRlVG9vbHRpcCB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS10b29sdGlwXCI7XG5pbXBvcnQgeyBoYW5kbGVDbGljayB9IGZyb20gXCIuLi9jb21tb24vaGFuZGxlLWNsaWNrXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgSWNvbkVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pY29uLWVsZW1lbnRcIilcbmV4cG9ydCBjbGFzcyBIdWlJY29uRWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUVsZW1lbnQge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEljb25FbGVtZW50Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBJY29uRWxlbWVudENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnLmljb24pIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnaWNvbicgcmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtaWNvblxuICAgICAgICAuaWNvbj1cIiR7dGhpcy5fY29uZmlnLmljb259XCJcbiAgICAgICAgLnRpdGxlPVwiJHtjb21wdXRlVG9vbHRpcCh0aGlzLmhhc3MsIHRoaXMuX2NvbmZpZyl9XCJcbiAgICAgICAgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgQGhhLWhvbGQ9XCIke3RoaXMuX2hhbmRsZUhvbGR9XCJcbiAgICAgICAgLmxvbmdQcmVzcz1cIiR7bG9uZ1ByZXNzKCl9XCJcbiAgICAgID48L2hhLWljb24+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVRhcCgpOiB2b2lkIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKCk6IHZvaWQge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIHRydWUpO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWljb24tZWxlbWVudFwiOiBIdWlJY29uRWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWltYWdlXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVUb29sdGlwIH0gZnJvbSBcIi4uL2NvbW1vbi9jb21wdXRlLXRvb2x0aXBcIjtcbmltcG9ydCB7IGhhbmRsZUNsaWNrIH0gZnJvbSBcIi4uL2NvbW1vbi9oYW5kbGUtY2xpY2tcIjtcbmltcG9ydCB7IGxvbmdQcmVzcyB9IGZyb20gXCIuLi9jb21tb24vZGlyZWN0aXZlcy9sb25nLXByZXNzLWRpcmVjdGl2ZVwiO1xuaW1wb3J0IHsgTG92ZWxhY2VFbGVtZW50LCBJbWFnZUVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pbWFnZS1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpSW1hZ2VFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlRWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogSW1hZ2VFbGVtZW50Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBJbWFnZUVsZW1lbnRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgRXJyb3IoXCJFcnJvciBpbiBlbGVtZW50IGNvbmZpZ3VyYXRpb25cIik7XG4gICAgfVxuXG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFxuICAgICAgXCJjbGlja2FibGVcIixcbiAgICAgIGNvbmZpZy50YXBfYWN0aW9uICYmIGNvbmZpZy50YXBfYWN0aW9uLmFjdGlvbiAhPT0gXCJub25lXCJcbiAgICApO1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1pbWFnZVxuICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgIC5lbnRpdHk9XCIke3RoaXMuX2NvbmZpZy5lbnRpdHl9XCJcbiAgICAgICAgLmltYWdlPVwiJHt0aGlzLl9jb25maWcuaW1hZ2V9XCJcbiAgICAgICAgLnN0YXRlSW1hZ2U9XCIke3RoaXMuX2NvbmZpZy5zdGF0ZV9pbWFnZX1cIlxuICAgICAgICAuY2FtZXJhSW1hZ2U9XCIke3RoaXMuX2NvbmZpZy5jYW1lcmFfaW1hZ2V9XCJcbiAgICAgICAgLmZpbHRlcj1cIiR7dGhpcy5fY29uZmlnLmZpbHRlcn1cIlxuICAgICAgICAuc3RhdGVGaWx0ZXI9XCIke3RoaXMuX2NvbmZpZy5zdGF0ZV9maWx0ZXJ9XCJcbiAgICAgICAgLnRpdGxlPVwiJHtjb21wdXRlVG9vbHRpcCh0aGlzLmhhc3MsIHRoaXMuX2NvbmZpZyl9XCJcbiAgICAgICAgLmFzcGVjdFJhdGlvPVwiJHt0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvfVwiXG4gICAgICAgIEBoYS1jbGljaz1cIiR7dGhpcy5faGFuZGxlVGFwfVwiXG4gICAgICAgIEBoYS1ob2xkPVwiJHt0aGlzLl9oYW5kbGVIb2xkfVwiXG4gICAgICAgIC5sb25nUHJlc3M9XCIke2xvbmdQcmVzcygpfVwiXG4gICAgICA+PC9odWktaW1hZ2U+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0KC5jbGlja2FibGUpIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIGh1aS1pbWFnZSB7XG4gICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVGFwKCk6IHZvaWQge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhvbGQoKTogdm9pZCB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgdHJ1ZSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1pbWFnZS1lbGVtZW50XCI6IEh1aUltYWdlRWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9ucy9oYS1jYWxsLXNlcnZpY2UtYnV0dG9uXCI7XG5cbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgU2VydmljZUJ1dHRvbkVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zZXJ2aWNlLWJ1dHRvbi1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpU2VydmljZUJ1dHRvbkVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50XG4gIGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTZXJ2aWNlQnV0dG9uRWxlbWVudENvbmZpZztcbiAgcHJpdmF0ZSBfZG9tYWluPzogc3RyaW5nO1xuICBwcml2YXRlIF9zZXJ2aWNlPzogc3RyaW5nO1xuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICByZXR1cm4geyBfY29uZmlnOiB7fSB9O1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNlcnZpY2VCdXR0b25FbGVtZW50Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5zZXJ2aWNlKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ3NlcnZpY2UnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIFt0aGlzLl9kb21haW4sIHRoaXMuX3NlcnZpY2VdID0gY29uZmlnLnNlcnZpY2Uuc3BsaXQoXCIuXCIsIDIpO1xuXG4gICAgaWYgKCF0aGlzLl9kb21haW4pIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnc2VydmljZScgZG9lcyBub3QgaGF2ZSBhIGRvbWFpblwiKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3NlcnZpY2UpIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICBcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ3NlcnZpY2UnIGRvZXMgbm90IGhhdmUgYSBzZXJ2aWNlIG5hbWVcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYWxsLXNlcnZpY2UtYnV0dG9uXG4gICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgLmRvbWFpbj1cIiR7dGhpcy5fZG9tYWlufVwiXG4gICAgICAgIC5zZXJ2aWNlPVwiJHt0aGlzLl9zZXJ2aWNlfVwiXG4gICAgICAgIC5zZXJ2aWNlRGF0YT1cIiR7dGhpcy5fY29uZmlnLnNlcnZpY2VfZGF0YX1cIlxuICAgICAgICA+JHt0aGlzLl9jb25maWcudGl0bGV9PC9oYS1jYWxsLXNlcnZpY2UtYnV0dG9uXG4gICAgICA+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNhbGwtc2VydmljZS1idXR0b24ge1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXNlcnZpY2UtYnV0dG9uLWVsZW1lbnRcIjogSHVpU2VydmljZUJ1dHRvbkVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2VudGl0eS9oYS1zdGF0ZS1sYWJlbC1iYWRnZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZy1lbGVtZW50XCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgU3RhdGVCYWRnZUVsZW1lbnRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zdGF0ZS1iYWRnZS1lbGVtZW50XCIpXG5leHBvcnQgY2xhc3MgSHVpU3RhdGVCYWRnZUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50XG4gIGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTdGF0ZUJhZGdlRWxlbWVudENvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU3RhdGVCYWRnZUVsZW1lbnRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnZW50aXR5JyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eSFdO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZy1lbGVtZW50XG4gICAgICAgICAgbGFiZWw9XCIke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9XCJcbiAgICAgICAgPjwvaHVpLXdhcm5pbmctZWxlbWVudD5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGEtc3RhdGUtbGFiZWwtYmFkZ2VcbiAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAuc3RhdGU9XCIke3N0YXRlT2JqfVwiXG4gICAgICAgIC50aXRsZT1cIiR7dGhpcy5fY29uZmlnLnRpdGxlID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopXG4gICAgICAgICAgOiB0aGlzLl9jb25maWcudGl0bGUgPT09IG51bGxcbiAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICA6IHRoaXMuX2NvbmZpZy50aXRsZX1cIlxuICAgICAgPjwvaGEtc3RhdGUtbGFiZWwtYmFkZ2U+XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXN0YXRlLWJhZGdlLWVsZW1lbnRcIjogSHVpU3RhdGVCYWRnZUVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvc3RhdGUtYmFkZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmctZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBjb21wdXRlVG9vbHRpcCB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS10b29sdGlwXCI7XG5pbXBvcnQgeyBoYW5kbGVDbGljayB9IGZyb20gXCIuLi9jb21tb24vaGFuZGxlLWNsaWNrXCI7XG5pbXBvcnQgeyBsb25nUHJlc3MgfSBmcm9tIFwiLi4vY29tbW9uL2RpcmVjdGl2ZXMvbG9uZy1wcmVzcy1kaXJlY3RpdmVcIjtcbmltcG9ydCB7IExvdmVsYWNlRWxlbWVudCwgU3RhdGVJY29uRWxlbWVudENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXN0YXRlLWljb24tZWxlbWVudFwiKVxuZXhwb3J0IGNsYXNzIEh1aVN0YXRlSWNvbkVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTdGF0ZUljb25FbGVtZW50Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBTdGF0ZUljb25FbGVtZW50Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ2VudGl0eScgcmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHkhXTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmctZWxlbWVudFxuICAgICAgICAgIGxhYmVsPSR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX1cbiAgICAgICAgPjwvaHVpLXdhcm5pbmctZWxlbWVudD5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c3RhdGUtYmFkZ2VcbiAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAudGl0bGU9XCIke2NvbXB1dGVUb29sdGlwKHRoaXMuaGFzcywgdGhpcy5fY29uZmlnKX1cIlxuICAgICAgICBAaGEtY2xpY2s9XCIke3RoaXMuX2hhbmRsZUNsaWNrfVwiXG4gICAgICAgIEBoYS1ob2xkPVwiJHt0aGlzLl9oYW5kbGVIb2xkfVwiXG4gICAgICAgIC5sb25nUHJlc3M9XCIke2xvbmdQcmVzcygpfVwiXG4gICAgICAgIC5vdmVycmlkZUljb249JHt0aGlzLl9jb25maWcuaWNvbn1cbiAgICAgID48L3N0YXRlLWJhZGdlPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgaGFuZGxlQ2xpY2sodGhpcywgdGhpcy5oYXNzISwgdGhpcy5fY29uZmlnISwgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlSG9sZCgpOiB2b2lkIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCB0cnVlKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXN0YXRlLWljb24tZWxlbWVudFwiOiBIdWlTdGF0ZUljb25FbGVtZW50O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvZW50aXR5L2hhLXN0YXRlLWxhYmVsLWJhZGdlXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nLWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRGlzcGxheSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfZGlzcGxheVwiO1xuaW1wb3J0IHsgY29tcHV0ZVRvb2x0aXAgfSBmcm9tIFwiLi4vY29tbW9uL2NvbXB1dGUtdG9vbHRpcFwiO1xuaW1wb3J0IHsgaGFuZGxlQ2xpY2sgfSBmcm9tIFwiLi4vY29tbW9uL2hhbmRsZS1jbGlja1wiO1xuaW1wb3J0IHsgbG9uZ1ByZXNzIH0gZnJvbSBcIi4uL2NvbW1vbi9kaXJlY3RpdmVzL2xvbmctcHJlc3MtZGlyZWN0aXZlXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUVsZW1lbnQsIFN0YXRlTGFiZWxFbGVtZW50Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktc3RhdGUtbGFiZWwtZWxlbWVudFwiKVxuY2xhc3MgSHVpU3RhdGVMYWJlbEVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VFbGVtZW50IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTdGF0ZUxhYmVsRWxlbWVudENvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU3RhdGVMYWJlbEVsZW1lbnRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnZW50aXR5JyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eSFdO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZy1lbGVtZW50XG4gICAgICAgICAgbGFiZWw9JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfVxuICAgICAgICA+PC9odWktd2FybmluZy1lbGVtZW50PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXZcbiAgICAgICAgLnRpdGxlPVwiJHtjb21wdXRlVG9vbHRpcCh0aGlzLmhhc3MsIHRoaXMuX2NvbmZpZyl9XCJcbiAgICAgICAgQGhhLWNsaWNrPVwiJHt0aGlzLl9oYW5kbGVUYXB9XCJcbiAgICAgICAgQGhhLWhvbGQ9XCIke3RoaXMuX2hhbmRsZUhvbGR9XCJcbiAgICAgICAgLmxvbmdQcmVzcz1cIiR7bG9uZ1ByZXNzKCl9XCJcbiAgICAgID5cbiAgICAgICAgJHt0aGlzLl9jb25maWcucHJlZml4fSR7c3RhdGVPYmpcbiAgICAgICAgICA/IGNvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICAgIHRoaXMuaGFzcy5sb2NhbGl6ZSxcbiAgICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICAgIHRoaXMuaGFzcy5sYW5ndWFnZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogXCItXCJ9JHt0aGlzLl9jb25maWcuc3VmZml4fVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVRhcCgpOiB2b2lkIHtcbiAgICBoYW5kbGVDbGljayh0aGlzLCB0aGlzLmhhc3MhLCB0aGlzLl9jb25maWchLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb2xkKCk6IHZvaWQge1xuICAgIGhhbmRsZUNsaWNrKHRoaXMsIHRoaXMuaGFzcyEsIHRoaXMuX2NvbmZpZyEsIHRydWUpO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgICBkaXYge1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXN0YXRlLWxhYmVsLWVsZW1lbnRcIjogSHVpU3RhdGVMYWJlbEVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jbGltYXRlLXN0YXRlXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS1nZW5lcmljLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1jbGltYXRlLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUNsaW1hdGVFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5lbnRpdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ2VudGl0eScgcmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNzIHx8ICF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgIDxoYS1jbGltYXRlLXN0YXRlXG4gICAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAgIC5zdGF0ZU9iaj1cIiR7c3RhdGVPYmp9XCJcbiAgICAgICAgPjwvaGEtY2xpbWF0ZS1zdGF0ZT5cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGEtY2xpbWF0ZS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1jbGltYXRlLWVudGl0eS1yb3dcIjogSHVpQ2xpbWF0ZUVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS1nZW5lcmljLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY292ZXItY29udHJvbHNcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY292ZXItdGlsdC1jb250cm9sc1wiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBpc1RpbHRPbmx5IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY292ZXItbW9kZWxcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktY292ZXItZW50aXR5LXJvd1wiKVxuY2xhc3MgSHVpQ292ZXJFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICAke2lzVGlsdE9ubHkoc3RhdGVPYmopXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8aGEtY292ZXItdGlsdC1jb250cm9sc1xuICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAuc3RhdGVPYmo9XCIke3N0YXRlT2JqfVwiXG4gICAgICAgICAgICAgID48L2hhLWNvdmVyLXRpbHQtY29udHJvbHM+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8aGEtY292ZXItY29udHJvbHNcbiAgICAgICAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAgICAgICA+PC9oYS1jb3Zlci1jb250cm9scz5cbiAgICAgICAgICAgIGB9XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNvdmVyLWNvbnRyb2xzLFxuICAgICAgaGEtY292ZXItdGlsdC1jb250cm9scyB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogLTAuNTdlbTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktY292ZXItZW50aXR5LXJvd1wiOiBIdWlDb3ZlckVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvaGEtZW50aXR5LXRvZ2dsZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEaXNwbGF5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kaXNwbGF5XCI7XG5pbXBvcnQgeyBET01BSU5TX1RPR0dMRSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vY29uc3RcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktZ3JvdXAtZW50aXR5LXJvd1wiKVxuY2xhc3MgSHVpR3JvdXBFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICAke3RoaXMuX2NvbXB1dGVDYW5Ub2dnbGUoc3RhdGVPYmouYXR0cmlidXRlcy5lbnRpdHlfaWQpXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8aGEtZW50aXR5LXRvZ2dsZVxuICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAuc3RhdGVPYmo9XCIke3N0YXRlT2JqfVwiXG4gICAgICAgICAgICAgID48L2hhLWVudGl0eS10b2dnbGU+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICR7Y29tcHV0ZVN0YXRlRGlzcGxheShcbiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcyEubG9jYWxpemUsXG4gICAgICAgICAgICAgICAgICBzdGF0ZU9iaixcbiAgICAgICAgICAgICAgICAgIHRoaXMuaGFzcy5sYW5ndWFnZVxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYH1cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZUNhblRvZ2dsZShlbnRpdHlJZHMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZW50aXR5SWRzLnNvbWUoKGVudGl0eUlkKSA9PlxuICAgICAgRE9NQUlOU19UT0dHTEUuaGFzKGVudGl0eUlkLnNwbGl0KFwiLlwiLCAxKVswXSlcbiAgICApO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktZ3JvdXAtZW50aXR5LXJvd1wiOiBIdWlHcm91cEVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgY3VzdG9tRWxlbWVudCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9wYXBlci10aW1lLWlucHV0LmpzXCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZHVwbGljYXRlLWltcG9ydHNcbmltcG9ydCB7IFBhcGVyVGltZUlucHV0IH0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvcGFwZXItdGltZS1pbnB1dC5qc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1kYXRlLWlucHV0XCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZHVwbGljYXRlLWltcG9ydHNcbmltcG9ydCB7IEhhRGF0ZUlucHV0IH0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtZGF0ZS1pbnB1dFwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBzZXRJbnB1dERhdGVUaW1lVmFsdWUgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dF9kYXRldGltZVwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pbnB1dC1kYXRldGltZS1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlJbnB1dERhdGV0aW1lRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBlcnJvclwiKTtcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgICR7c3RhdGVPYmouYXR0cmlidXRlcy5oYXNfZGF0ZVxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWRhdGUtaW5wdXRcbiAgICAgICAgICAgICAgICAueWVhcj0ke3N0YXRlT2JqLmF0dHJpYnV0ZXMueWVhcn1cbiAgICAgICAgICAgICAgICAubW9udGg9JHsoXCIwXCIgKyBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1vbnRoKS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgLmRheT0keyhcIjBcIiArIHN0YXRlT2JqLmF0dHJpYnV0ZXMuZGF5KS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgQGNoYW5nZT0ke3RoaXMuX3NlbGVjdGVkVmFsdWVDaGFuZ2VkfVxuICAgICAgICAgICAgICAgIEBjbGljaz0ke3RoaXMuX3N0b3BFdmVudFByb3BhZ2F0aW9ufVxuICAgICAgICAgICAgICA+PC9oYS1kYXRlLWlucHV0PlxuICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuaGFzX3RpbWUgPyBcIixcIiA6IFwiXCJ9XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBgYH1cbiAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmhhc190aW1lXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8cGFwZXItdGltZS1pbnB1dFxuICAgICAgICAgICAgICAgIC5ob3VyPSR7c3RhdGVPYmouc3RhdGUgPT09IFwidW5rbm93blwiXG4gICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgIDogKFwiMFwiICsgc3RhdGVPYmouYXR0cmlidXRlcy5ob3VyKS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgLm1pbj0ke3N0YXRlT2JqLnN0YXRlID09PSBcInVua25vd25cIlxuICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICA6IChcIjBcIiArIHN0YXRlT2JqLmF0dHJpYnV0ZXMubWludXRlKS5zbGljZSgtMil9XG4gICAgICAgICAgICAgICAgLmFtUG09JHtmYWxzZX1cbiAgICAgICAgICAgICAgICBAY2hhbmdlPSR7dGhpcy5fc2VsZWN0ZWRWYWx1ZUNoYW5nZWR9XG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5fc3RvcEV2ZW50UHJvcGFnYXRpb259XG4gICAgICAgICAgICAgICAgaGlkZS1sYWJlbFxuICAgICAgICAgICAgICAgIGZvcm1hdD1cIjI0XCJcbiAgICAgICAgICAgICAgPjwvcGFwZXItdGltZS1pbnB1dD5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IGBgfVxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9zdG9wRXZlbnRQcm9wYWdhdGlvbihldjogRXZlbnQpOiB2b2lkIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF90aW1lSW5wdXRFbCgpOiBQYXBlclRpbWVJbnB1dCB7XG4gICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcInBhcGVyLXRpbWUtaW5wdXRcIikhO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2RhdGVJbnB1dEVsKCk6IEhhRGF0ZUlucHV0IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwiaGEtZGF0ZS1pbnB1dFwiKSE7XG4gIH1cblxuICBwcml2YXRlIF9zZWxlY3RlZFZhbHVlQ2hhbmdlZChldik6IHZvaWQge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgY29uc3QgdGltZSA9XG4gICAgICB0aGlzLl90aW1lSW5wdXRFbCAhPT0gbnVsbFxuICAgICAgICA/IHRoaXMuX3RpbWVJbnB1dEVsLnZhbHVlLnRyaW0oKSArIFwiOjAwXCJcbiAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBkYXRlID1cbiAgICAgIHRoaXMuX2RhdGVJbnB1dEVsICE9PSBudWxsID8gdGhpcy5fZGF0ZUlucHV0RWwudmFsdWUgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAodGltZSAhPT0gc3RhdGVPYmouc3RhdGUpIHtcbiAgICAgIHNldElucHV0RGF0ZVRpbWVWYWx1ZSh0aGlzLmhhc3MhLCBzdGF0ZU9iai5lbnRpdHlfaWQsIHRpbWUsIGRhdGUpO1xuICAgIH1cblxuICAgIGV2LnRhcmdldC5ibHVyKCk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1pbnB1dC1kYXRldGltZS1lbnRpdHktcm93XCI6IEh1aUlucHV0RGF0ZXRpbWVFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLXNsaWRlclwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBjb21wdXRlUlRMRGlyZWN0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBzZXRWYWx1ZSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X3RleHRcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktaW5wdXQtbnVtYmVyLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUlucHV0TnVtYmVyRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHJpdmF0ZSBfbG9hZGVkPzogYm9vbGVhbjtcblxuICBwcml2YXRlIF91cGRhdGVkPzogYm9vbGVhbjtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICh0aGlzLl91cGRhdGVkICYmICF0aGlzLl9sb2FkZWQpIHtcbiAgICAgIHRoaXMuX2luaXRpYWxMb2FkKCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGZpcnN0VXBkYXRlZCgpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCAmJiAhdGhpcy5fbG9hZGVkKSB7XG4gICAgICB0aGlzLl9pbml0aWFsTG9hZCgpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICR7c3RhdGVPYmouYXR0cmlidXRlcy5tb2RlID09PSBcInNsaWRlclwiXG4gICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXhcIj5cbiAgICAgICAgICAgICAgICAgIDxoYS1zbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgLmRpcj1cIiR7Y29tcHV0ZVJUTERpcmVjdGlvbih0aGlzLmhhc3MhKX1cIlxuICAgICAgICAgICAgICAgICAgICAuc3RlcD1cIiR7TnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMuc3RlcCl9XCJcbiAgICAgICAgICAgICAgICAgICAgLm1pbj1cIiR7TnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMubWluKX1cIlxuICAgICAgICAgICAgICAgICAgICAubWF4PVwiJHtOdW1iZXIoc3RhdGVPYmouYXR0cmlidXRlcy5tYXgpfVwiXG4gICAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7TnVtYmVyKHN0YXRlT2JqLnN0YXRlKX1cIlxuICAgICAgICAgICAgICAgICAgICBwaW5cbiAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT1cIiR7dGhpcy5fc2VsZWN0ZWRWYWx1ZUNoYW5nZWR9XCJcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlLWJhci10b3VjaFxuICAgICAgICAgICAgICAgICAgICBpZD1cImlucHV0XCJcbiAgICAgICAgICAgICAgICAgID48L2hhLXNsaWRlcj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgJHtOdW1iZXIoc3RhdGVPYmouc3RhdGUpfVxuICAgICAgICAgICAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudH1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgICAgICAgICAgbm8tbGFiZWwtZmxvYXRcbiAgICAgICAgICAgICAgICAgIGF1dG8tdmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgIC5wYXR0ZXJuPVwiWzAtOV0rKFtcXFxcLl1bMC05XSspP1wiXG4gICAgICAgICAgICAgICAgICAuc3RlcD1cIiR7TnVtYmVyKHN0YXRlT2JqLmF0dHJpYnV0ZXMuc3RlcCl9XCJcbiAgICAgICAgICAgICAgICAgIC5taW49XCIke051bWJlcihzdGF0ZU9iai5hdHRyaWJ1dGVzLm1pbil9XCJcbiAgICAgICAgICAgICAgICAgIC5tYXg9XCIke051bWJlcihzdGF0ZU9iai5hdHRyaWJ1dGVzLm1heCl9XCJcbiAgICAgICAgICAgICAgICAgIC52YWx1ZT1cIiR7TnVtYmVyKHN0YXRlT2JqLnN0YXRlKX1cIlxuICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICBAY2hhbmdlPVwiJHt0aGlzLl9zZWxlY3RlZFZhbHVlQ2hhbmdlZH1cIlxuICAgICAgICAgICAgICAgICAgaWQ9XCJpbnB1dFwiXG4gICAgICAgICAgICAgICAgPjwvcGFwZXItaW5wdXQ+XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAuZmxleCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICAuc3RhdGUge1xuICAgICAgICBtaW4td2lkdGg6IDQ1cHg7XG4gICAgICAgIHRleHQtYWxpZ246IGVuZDtcbiAgICAgIH1cbiAgICAgIHBhcGVyLWlucHV0IHtcbiAgICAgICAgdGV4dC1hbGlnbjogZW5kO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9pbml0aWFsTG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9sb2FkZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdCEucXVlcnlTZWxlY3RvcihcIi5zdGF0ZVwiKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIGlmICghZWxlbWVudCB8fCAhdGhpcy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWxlbWVudC5oaWRkZW4gPSB0aGlzLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGggPD0gMzUwO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2lucHV0RWxlbWVudCgpOiB7IHZhbHVlOiBzdHJpbmcgfSB7XG4gICAgLy8gbGludGVyIHJlY29tbWVuZGVkIHRoZSBmb2xsb3dpbmcgc3ludGF4XG4gICAgcmV0dXJuICh0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwiaW5wdXRcIikgYXMgdW5rbm93bikgYXMge1xuICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfc2VsZWN0ZWRWYWx1ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2lucHV0RWxlbWVudDtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XTtcblxuICAgIGlmIChlbGVtZW50LnZhbHVlICE9PSBzdGF0ZU9iai5zdGF0ZSkge1xuICAgICAgc2V0VmFsdWUodGhpcy5oYXNzISwgc3RhdGVPYmouZW50aXR5X2lkLCBlbGVtZW50LnZhbHVlISk7XG4gICAgfVxuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW5wdXQtbnVtYmVyLWVudGl0eS1yb3dcIjogSHVpSW5wdXROdW1iZXJFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWl0ZW0vcGFwZXItaXRlbVwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItbGlzdGJveC9wYXBlci1saXN0Ym94XCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtcGFwZXItZHJvcGRvd24tbWVudVwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvc3RhdGUtYmFkZ2VcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50LCBJbnB1dFNlbGVjdEVudGl0eSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgc2V0SW5wdXRTZWxlY3RPcHRpb24gfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dC1zZWxlY3RcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcbmltcG9ydCB7IGZvcndhcmRIYXB0aWMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9oYXB0aWNzXCI7XG5pbXBvcnQgeyBzdG9wUHJvcGFnYXRpb24gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9zdG9wX3Byb3BhZ2F0aW9uXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWlucHV0LXNlbGVjdC1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlJbnB1dFNlbGVjdEVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmVudGl0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb25maWd1cmF0aW9uOiAnZW50aXR5JyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV0gYXNcbiAgICAgIHwgSW5wdXRTZWxlY3RFbnRpdHlcbiAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPHN0YXRlLWJhZGdlIC5zdGF0ZU9iaj1cIiR7c3RhdGVPYmp9XCI+PC9zdGF0ZS1iYWRnZT5cbiAgICAgIDxoYS1wYXBlci1kcm9wZG93bi1tZW51XG4gICAgICAgIC5sYWJlbD0ke3RoaXMuX2NvbmZpZy5uYW1lIHx8IGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopfVxuICAgICAgICAudmFsdWU9JHtzdGF0ZU9iai5zdGF0ZX1cbiAgICAgICAgQGlyb24tc2VsZWN0PSR7dGhpcy5fc2VsZWN0ZWRDaGFuZ2VkfVxuICAgICAgICBAY2xpY2s9JHtzdG9wUHJvcGFnYXRpb259XG4gICAgICA+XG4gICAgICAgIDxwYXBlci1saXN0Ym94IHNsb3Q9XCJkcm9wZG93bi1jb250ZW50XCI+XG4gICAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLm9wdGlvbnMubWFwKFxuICAgICAgICAgICAgKG9wdGlvbikgPT4gaHRtbGBcbiAgICAgICAgICAgICAgPHBhcGVyLWl0ZW0+JHtvcHRpb259PC9wYXBlci1pdGVtPlxuICAgICAgICAgICAgYFxuICAgICAgICAgICl9XG4gICAgICAgIDwvcGFwZXItbGlzdGJveD5cbiAgICAgIDwvaGEtcGFwZXItZHJvcGRvd24tbWVudT5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcblxuICAgIGlmICghdGhpcy5oYXNzIHx8ICF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV0gYXNcbiAgICAgIHwgSW5wdXRTZWxlY3RFbnRpdHlcbiAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCBhZnRlciByZW5kZXJpbmcgdGhlIGl0ZW1zIG9yIGVsc2UgaXQgd29uJ3Qgd29yayBpbiBGaXJlZm94XG4gICAgdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCJwYXBlci1saXN0Ym94XCJcbiAgICApIS5zZWxlY3RlZCA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMub3B0aW9ucy5pbmRleE9mKHN0YXRlT2JqLnN0YXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIGhhLXBhcGVyLWRyb3Bkb3duLW1lbnUge1xuICAgICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgcGFwZXItaXRlbSB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2VsZWN0ZWRDaGFuZ2VkKGV2KTogdm9pZCB7XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV07XG4gICAgY29uc3Qgb3B0aW9uID0gZXYudGFyZ2V0LnNlbGVjdGVkSXRlbS5pbm5lclRleHQudHJpbSgpO1xuICAgIGlmIChvcHRpb24gPT09IHN0YXRlT2JqLnN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yd2FyZEhhcHRpYyhcImxpZ2h0XCIpO1xuXG4gICAgc2V0SW5wdXRTZWxlY3RPcHRpb24odGhpcy5oYXNzISwgc3RhdGVPYmouZW50aXR5X2lkLCBvcHRpb24pO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW5wdXQtc2VsZWN0LWVudGl0eS1yb3dcIjogSHVpSW5wdXRTZWxlY3RFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgY3VzdG9tRWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgUGFwZXJJbnB1dEVsZW1lbnQgfSBmcm9tIFwiQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHNldFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfdGV4dFwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1pbnB1dC10ZXh0LWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUlucHV0VGV4dEVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBlcnJvclwiKTtcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgIDxwYXBlci1pbnB1dFxuICAgICAgICAgIG5vLWxhYmVsLWZsb2F0XG4gICAgICAgICAgLnZhbHVlPVwiJHtzdGF0ZU9iai5zdGF0ZX1cIlxuICAgICAgICAgIC5taW5sZW5ndGg9XCIke3N0YXRlT2JqLmF0dHJpYnV0ZXMubWlufVwiXG4gICAgICAgICAgLm1heGxlbmd0aD1cIiR7c3RhdGVPYmouYXR0cmlidXRlcy5tYXh9XCJcbiAgICAgICAgICAuYXV0b1ZhbGlkYXRlPVwiJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLnBhdHRlcm59XCJcbiAgICAgICAgICAucGF0dGVybj1cIiR7c3RhdGVPYmouYXR0cmlidXRlcy5wYXR0ZXJufVwiXG4gICAgICAgICAgLnR5cGU9XCIke3N0YXRlT2JqLmF0dHJpYnV0ZXMubW9kZX1cIlxuICAgICAgICAgIEBjaGFuZ2U9XCIke3RoaXMuX3NlbGVjdGVkVmFsdWVDaGFuZ2VkfVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCIoZW1wdHkgdmFsdWUpXCJcbiAgICAgICAgPjwvcGFwZXItaW5wdXQ+XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9pbnB1dEVsKCk6IFBhcGVySW5wdXRFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwicGFwZXItaW5wdXRcIikgYXMgUGFwZXJJbnB1dEVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9zZWxlY3RlZFZhbHVlQ2hhbmdlZChldik6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9pbnB1dEVsO1xuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuXG4gICAgaWYgKGVsZW1lbnQudmFsdWUgIT09IHN0YXRlT2JqLnN0YXRlKSB7XG4gICAgICBzZXRWYWx1ZSh0aGlzLmhhc3MhLCBzdGF0ZU9iai5lbnRpdHlfaWQsIGVsZW1lbnQudmFsdWUhKTtcbiAgICB9XG5cbiAgICBldi50YXJnZXQuYmx1cigpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktaW5wdXQtdGV4dC1lbnRpdHktcm93XCI6IEh1aUlucHV0VGV4dEVudGl0eVJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS1nZW5lcmljLWVudGl0eS1yb3dcIjtcbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLXdhcm5pbmdcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1sb2NrLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aUxvY2tFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICA8bXdjLWJ1dHRvbiBAY2xpY2s9XCIke3RoaXMuX2NhbGxTZXJ2aWNlfVwiPlxuICAgICAgICAgICR7c3RhdGVPYmouc3RhdGUgPT09IFwibG9ja2VkXCJcbiAgICAgICAgICAgID8gdGhpcy5oYXNzIS5sb2NhbGl6ZShcInVpLmNhcmQubG9jay51bmxvY2tcIilcbiAgICAgICAgICAgIDogdGhpcy5oYXNzIS5sb2NhbGl6ZShcInVpLmNhcmQubG9jay5sb2NrXCIpfVxuICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIG13Yy1idXR0b24ge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IC0wLjU3ZW07XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NhbGxTZXJ2aWNlKGV2KTogdm9pZCB7XG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3MhLnN0YXRlc1t0aGlzLl9jb25maWchLmVudGl0eV07XG4gICAgdGhpcy5oYXNzIS5jYWxsU2VydmljZShcbiAgICAgIFwibG9ja1wiLFxuICAgICAgc3RhdGVPYmouc3RhdGUgPT09IFwibG9ja2VkXCIgPyBcInVubG9ja1wiIDogXCJsb2NrXCIsXG4gICAgICB7IGVudGl0eV9pZDogc3RhdGVPYmouZW50aXR5X2lkIH1cbiAgICApO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktbG9jay1lbnRpdHktcm93XCI6IEh1aUxvY2tFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbiAgcHJvcGVydHksXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWljb24tYnV0dG9uL3BhcGVyLWljb24tYnV0dG9uXCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgc3VwcG9ydHNGZWF0dXJlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvc3VwcG9ydHMtZmVhdHVyZVwiO1xuaW1wb3J0IHtcbiAgU1VQUE9SVFNfUExBWSxcbiAgU1VQUE9SVF9ORVhUX1RSQUNLLFxuICBPRkZfU1RBVEVTLFxuICBTVVBQT1JUX1BBVVNFLFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9tZWRpYS1wbGF5ZXJcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktbWVkaWEtcGxheWVyLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aU1lZGlhUGxheWVyRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcuZW50aXR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246ICdlbnRpdHknIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaGFzcyB8fCAhdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93XG4gICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiXG4gICAgICAgIC5zaG93U2Vjb25kYXJ5PSR7ZmFsc2V9XG4gICAgICA+XG4gICAgICAgICR7T0ZGX1NUQVRFUy5pbmNsdWRlcyhzdGF0ZU9iai5zdGF0ZSlcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKGBzdGF0ZS5tZWRpYV9wbGF5ZXIuJHtzdGF0ZU9iai5zdGF0ZX1gKSB8fFxuICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sb2NhbGl6ZShgc3RhdGUuZGVmYXVsdC4ke3N0YXRlT2JqLnN0YXRlfWApIHx8XG4gICAgICAgICAgICAgICAgICBzdGF0ZU9iai5zdGF0ZX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICAke3N0YXRlT2JqLnN0YXRlICE9PSBcInBsYXlpbmdcIiAmJlxuICAgICAgICAgICAgICAgICFzdXBwb3J0c0ZlYXR1cmUoc3RhdGVPYmosIFNVUFBPUlRTX1BMQVkpXG4gICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGljb249XCIke3RoaXMuX2NvbXB1dGVDb250cm9sSWNvbihzdGF0ZU9iail9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fcGxheVBhdXNlfVwiXG4gICAgICAgICAgICAgICAgICAgICAgPjwvcGFwZXItaWNvbi1idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgJHtzdXBwb3J0c0ZlYXR1cmUoc3RhdGVPYmosIFNVUFBPUlRfTkVYVF9UUkFDSylcbiAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOnNraXAtbmV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX25leHRUcmFja31cIlxuICAgICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IHNsb3Q9XCJzZWNvbmRhcnlcIj4ke3RoaXMuX2NvbXB1dGVNZWRpYVRpdGxlKHN0YXRlT2JqKX08L2Rpdj5cbiAgICAgICAgICAgIGB9XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIC5jb250cm9scyB7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbXB1dGVDb250cm9sSWNvbihzdGF0ZU9iajogSGFzc0VudGl0eSk6IHN0cmluZyB7XG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlICE9PSBcInBsYXlpbmdcIikge1xuICAgICAgcmV0dXJuIFwiaGFzczpwbGF5XCI7XG4gICAgfVxuXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWJpdHdpc2VcbiAgICByZXR1cm4gc3VwcG9ydHNGZWF0dXJlKHN0YXRlT2JqLCBTVVBQT1JUX1BBVVNFKVxuICAgICAgPyBcImhhc3M6cGF1c2VcIlxuICAgICAgOiBcImhhc3M6c3RvcFwiO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZU1lZGlhVGl0bGUoc3RhdGVPYmo6IEhhc3NFbnRpdHkpOiBzdHJpbmcge1xuICAgIGxldCBwcmVmaXg7XG4gICAgbGV0IHN1ZmZpeDtcblxuICAgIHN3aXRjaCAoc3RhdGVPYmouYXR0cmlidXRlcy5tZWRpYV9jb250ZW50X3R5cGUpIHtcbiAgICAgIGNhc2UgXCJtdXNpY1wiOlxuICAgICAgICBwcmVmaXggPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1lZGlhX2FydGlzdDtcbiAgICAgICAgc3VmZml4ID0gc3RhdGVPYmouYXR0cmlidXRlcy5tZWRpYV90aXRsZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidHZzaG93XCI6XG4gICAgICAgIHByZWZpeCA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMubWVkaWFfc2VyaWVzX3RpdGxlO1xuICAgICAgICBzdWZmaXggPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLm1lZGlhX3RpdGxlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHByZWZpeCA9XG4gICAgICAgICAgc3RhdGVPYmouYXR0cmlidXRlcy5tZWRpYV90aXRsZSB8fFxuICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMuYXBwX25hbWUgfHxcbiAgICAgICAgICBzdGF0ZU9iai5zdGF0ZTtcbiAgICAgICAgc3VmZml4ID0gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJlZml4ICYmIHN1ZmZpeCA/IGAke3ByZWZpeH06ICR7c3VmZml4fWAgOiBwcmVmaXggfHwgc3VmZml4IHx8IFwiXCI7XG4gIH1cblxuICBwcml2YXRlIF9wbGF5UGF1c2UoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwibWVkaWFfcGxheWVyXCIsIFwibWVkaWFfcGxheV9wYXVzZVwiLCB7XG4gICAgICBlbnRpdHlfaWQ6IHRoaXMuX2NvbmZpZyEuZW50aXR5LFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfbmV4dFRyYWNrKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5oYXNzIS5jYWxsU2VydmljZShcIm1lZGlhX3BsYXllclwiLCBcIm1lZGlhX25leHRfdHJhY2tcIiwge1xuICAgICAgZW50aXR5X2lkOiB0aGlzLl9jb25maWchLmVudGl0eSxcbiAgICB9KTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLW1lZGlhLXBsYXllci1lbnRpdHktcm93XCI6IEh1aU1lZGlhUGxheWVyRW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgQ1NTUmVzdWx0LFxuICBjc3MsXG4gIHByb3BlcnR5LFxuICBjdXN0b21FbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvaGEtZW50aXR5LXRvZ2dsZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXNjZW5lLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aVNjZW5lRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aHVpLWdlbmVyaWMtZW50aXR5LXJvdyAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiIC5jb25maWc9XCIke3RoaXMuX2NvbmZpZ31cIj5cbiAgICAgICAgJHtzdGF0ZU9iai5hdHRyaWJ1dGVzLmNhbl9jYW5jZWxcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxoYS1lbnRpdHktdG9nZ2xlXG4gICAgICAgICAgICAgICAgLmhhc3M9XCIke3RoaXMuaGFzc31cIlxuICAgICAgICAgICAgICAgIC5zdGF0ZU9iaj1cIiR7c3RhdGVPYmp9XCJcbiAgICAgICAgICAgICAgPjwvaGEtZW50aXR5LXRvZ2dsZT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxtd2MtYnV0dG9uIEBjbGljaz1cIiR7dGhpcy5fY2FsbFNlcnZpY2V9XCI+XG4gICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKFwidWkuY2FyZC5zY2VuZS5hY3RpdmF0ZVwiKX1cbiAgICAgICAgICAgICAgPC9td2MtYnV0dG9uPlxuICAgICAgICAgICAgYH1cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgbXdjLWJ1dHRvbiB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogLTAuNTdlbTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2FsbFNlcnZpY2UoZXYpOiB2b2lkIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmhhc3MhLmNhbGxTZXJ2aWNlKFwic2NlbmVcIiwgXCJ0dXJuX29uXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zY2VuZS1lbnRpdHktcm93XCI6IEh1aVNjZW5lRW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgcHJvcGVydHksXG4gIENTU1Jlc3VsdCxcbiAgY3NzLFxuICBjdXN0b21FbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5cbmltcG9ydCBcIi4uL2NvbXBvbmVudHMvaHVpLWdlbmVyaWMtZW50aXR5LXJvd1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9lbnRpdHkvaGEtZW50aXR5LXRvZ2dsZVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLXNjcmlwdC1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlTY3JpcHRFbnRpdHlSb3cgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgRW50aXR5Um93IHtcbiAgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbmZpZz86IEVudGl0eUNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogRW50aXR5Q29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXRpb24gZXJyb3JcIik7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNDb25maWdPckVudGl0eUNoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuY2FuX2NhbmNlbFxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWVudGl0eS10b2dnbGVcbiAgICAgICAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAgICAgICA+PC9oYS1lbnRpdHktdG9nZ2xlPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgPG13Yy1idXR0b24gQGNsaWNrPVwiJHt0aGlzLl9jYWxsU2VydmljZX1cIj5cbiAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXCJ1aS5jYXJkLnNjcmlwdC5leGVjdXRlXCIpfVxuICAgICAgICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgICAgICBgfVxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBtd2MtYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAtMC41N2VtO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jYWxsU2VydmljZShldik6IHZvaWQge1xuICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuaGFzcyEuY2FsbFNlcnZpY2UoXCJzY3JpcHRcIiwgXCJ0dXJuX29uXCIsIHtcbiAgICAgIGVudGl0eV9pZDogdGhpcy5fY29uZmlnIS5lbnRpdHksXG4gICAgfSk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zY3JpcHQtZW50aXR5LXJvd1wiOiBIdWlTY3JpcHRFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgQ1NTUmVzdWx0LFxuICBjc3MsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS10aW1lc3RhbXAtZGlzcGxheVwiO1xuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktd2FybmluZ1wiO1xuXG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlSb3csIEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0eUNoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEaXNwbGF5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kaXNwbGF5XCI7XG5cbmludGVyZmFjZSBTZW5zb3JFbnRpdHlDb25maWcgZXh0ZW5kcyBFbnRpdHlDb25maWcge1xuICBmb3JtYXQ/OiBcInJlbGF0aXZlXCIgfCBcImRhdGVcIiB8IFwidGltZVwiIHwgXCJkYXRldGltZVwiO1xufVxuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zZW5zb3ItZW50aXR5LXJvd1wiKVxuY2xhc3MgSHVpU2Vuc29yRW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBTZW5zb3JFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFNlbnNvckVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aHVpLWdlbmVyaWMtZW50aXR5LXJvdyAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiIC5jb25maWc9XCIke3RoaXMuX2NvbmZpZ31cIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAke3N0YXRlT2JqLmF0dHJpYnV0ZXMuZGV2aWNlX2NsYXNzID09PSBcInRpbWVzdGFtcFwiICYmXG4gICAgICAgICAgc3RhdGVPYmouc3RhdGUgIT09IFwidW5hdmFpbGFibGVcIlxuICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgIDxodWktdGltZXN0YW1wLWRpc3BsYXlcbiAgICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAgIC50cz1cIiR7bmV3IERhdGUoc3RhdGVPYmouc3RhdGUpfVwiXG4gICAgICAgICAgICAgICAgICAuZm9ybWF0PVwiJHt0aGlzLl9jb25maWcuZm9ybWF0fVwiXG4gICAgICAgICAgICAgICAgPjwvaHVpLXRpbWVzdGFtcC1kaXNwbGF5PlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICA6IGNvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sb2NhbGl6ZSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9iaixcbiAgICAgICAgICAgICAgICB0aGlzLmhhc3MubGFuZ3VhZ2VcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2h1aS1nZW5lcmljLWVudGl0eS1yb3c+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGRpdiB7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zZW5zb3ItZW50aXR5LXJvd1wiOiBIdWlTZW5zb3JFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBwcm9wZXJ0eSxcbiAgQ1NTUmVzdWx0LFxuICBjc3MsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktdGV4dC1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlUZXh0RW50aXR5Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBFbnRpdHlDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIXRoaXMuaGFzcykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5fY29uZmlnLmVudGl0eV07XG5cbiAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS13YXJuaW5nXG4gICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS53YXJuaW5nLmVudGl0eV9ub3RfZm91bmRcIixcbiAgICAgICAgICAgIFwiZW50aXR5XCIsXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuZW50aXR5XG4gICAgICAgICAgKX08L2h1aS13YXJuaW5nXG4gICAgICAgID5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aHVpLWdlbmVyaWMtZW50aXR5LXJvdyAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiIC5jb25maWc9XCIke3RoaXMuX2NvbmZpZ31cIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAke2NvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICB0aGlzLmhhc3MubGFuZ3VhZ2VcbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaHVpLWdlbmVyaWMtZW50aXR5LXJvdz5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0IHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgZGl2IHtcbiAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXRleHQtZW50aXR5LXJvd1wiOiBIdWlUZXh0RW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgcHJvcGVydHksXG4gIFByb3BlcnR5VmFsdWVzLFxuICBjdXN0b21FbGVtZW50LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IHRpbWVyVGltZVJlbWFpbmluZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3RpbWVyX3RpbWVfcmVtYWluaW5nXCI7XG5pbXBvcnQgc2Vjb25kc1RvRHVyYXRpb24gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9zZWNvbmRzX3RvX2R1cmF0aW9uXCI7XG5cbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eUNvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkIH0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS10aW1lci1lbnRpdHktcm93XCIpXG5jbGFzcyBIdWlUaW1lckVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX3RpbWVSZW1haW5pbmc/OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfaW50ZXJ2YWw/OiBudW1iZXI7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IEVudGl0eUNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF0aW9uIGVycm9yXCIpO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9jbGVhckludGVydmFsKCk7XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5fY29uZmlnICYmIHRoaXMuX2NvbmZpZy5lbnRpdHkpIHtcbiAgICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzIS5zdGF0ZXNbdGhpcy5fY29uZmlnIS5lbnRpdHldO1xuICAgICAgaWYgKHN0YXRlT2JqKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0SW50ZXJ2YWwoc3RhdGVPYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZyB8fCAhdGhpcy5oYXNzKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRlT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLl9jb25maWcuZW50aXR5XTtcblxuICAgIGlmICghc3RhdGVPYmopIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8aHVpLXdhcm5pbmdcbiAgICAgICAgICA+JHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLndhcm5pbmcuZW50aXR5X25vdF9mb3VuZFwiLFxuICAgICAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5lbnRpdHlcbiAgICAgICAgICApfTwvaHVpLXdhcm5pbmdcbiAgICAgICAgPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxodWktZ2VuZXJpYy1lbnRpdHktcm93IC5oYXNzPVwiJHt0aGlzLmhhc3N9XCIgLmNvbmZpZz1cIiR7dGhpcy5fY29uZmlnfVwiPlxuICAgICAgICA8ZGl2PiR7dGhpcy5fY29tcHV0ZURpc3BsYXkoc3RhdGVPYmopfTwvZGl2PlxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl90aW1lUmVtYWluaW5nXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFzQ29uZmlnT3JFbnRpdHlDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuXG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJoYXNzXCIpKSB7XG4gICAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuaGFzcyEuc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XTtcbiAgICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyB0aGlzW1wiaGFzc1wiXTtcbiAgICAgIGNvbnN0IG9sZFN0YXRlT2JqID0gb2xkSGFzc1xuICAgICAgICA/IG9sZEhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZyEuZW50aXR5XVxuICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKG9sZFN0YXRlT2JqICE9PSBzdGF0ZU9iaikge1xuICAgICAgICB0aGlzLl9zdGFydEludGVydmFsKHN0YXRlT2JqKTtcbiAgICAgIH0gZWxzZSBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckludGVydmFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdGhpcy5faW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnRJbnRlcnZhbChzdGF0ZU9iajogSGFzc0VudGl0eSk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFySW50ZXJ2YWwoKTtcbiAgICB0aGlzLl9jYWxjdWxhdGVSZW1haW5pbmcoc3RhdGVPYmopO1xuXG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlID09PSBcImFjdGl2ZVwiKSB7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbChcbiAgICAgICAgKCkgPT4gdGhpcy5fY2FsY3VsYXRlUmVtYWluaW5nKHN0YXRlT2JqKSxcbiAgICAgICAgMTAwMFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jYWxjdWxhdGVSZW1haW5pbmcoc3RhdGVPYmo6IEhhc3NFbnRpdHkpOiB2b2lkIHtcbiAgICB0aGlzLl90aW1lUmVtYWluaW5nID0gdGltZXJUaW1lUmVtYWluaW5nKHN0YXRlT2JqKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbXB1dGVEaXNwbGF5KHN0YXRlT2JqOiBIYXNzRW50aXR5KTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlT2JqLnN0YXRlID09PSBcImlkbGVcIiB8fCB0aGlzLl90aW1lUmVtYWluaW5nID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYXNzIS5sb2NhbGl6ZShcInN0YXRlLnRpbWVyLlwiICsgc3RhdGVPYmouc3RhdGUpO1xuICAgIH1cblxuICAgIGxldCBkaXNwbGF5ID0gc2Vjb25kc1RvRHVyYXRpb24odGhpcy5fdGltZVJlbWFpbmluZyB8fCAwKTtcblxuICAgIGlmIChzdGF0ZU9iai5zdGF0ZSA9PT0gXCJwYXVzZWRcIikge1xuICAgICAgZGlzcGxheSArPSBgICgke3RoaXMuaGFzcyEubG9jYWxpemUoXCJzdGF0ZS50aW1lci5wYXVzZWRcIil9KWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpc3BsYXk7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS10aW1lci1lbnRpdHktcm93XCI6IEh1aVRpbWVyRW50aXR5Um93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIFByb3BlcnR5VmFsdWVzLFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IFwiLi4vY29tcG9uZW50cy9odWktZ2VuZXJpYy1lbnRpdHktcm93XCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2VudGl0eS9oYS1lbnRpdHktdG9nZ2xlXCI7XG5pbXBvcnQgXCIuLi9jb21wb25lbnRzL2h1aS13YXJuaW5nXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IEVudGl0eVJvdywgRW50aXR5Q29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktdG9nZ2xlLWVudGl0eS1yb3dcIilcbmNsYXNzIEh1aVRvZ2dsZUVudGl0eVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogRW50aXR5Q29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBFbnRpdHlDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlndXJhdGlvbiBlcnJvclwiKTtcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXR5Q2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGVPYmogPSB0aGlzLmhhc3Muc3RhdGVzW3RoaXMuX2NvbmZpZy5lbnRpdHldO1xuXG4gICAgaWYgKCFzdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktd2FybmluZ1xuICAgICAgICAgID4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uud2FybmluZy5lbnRpdHlfbm90X2ZvdW5kXCIsXG4gICAgICAgICAgICBcImVudGl0eVwiLFxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmVudGl0eVxuICAgICAgICAgICl9PC9odWktd2FybmluZ1xuICAgICAgICA+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGh1aS1nZW5lcmljLWVudGl0eS1yb3cgLmhhc3M9XCIke3RoaXMuaGFzc31cIiAuY29uZmlnPVwiJHt0aGlzLl9jb25maWd9XCI+XG4gICAgICAgICR7c3RhdGVPYmouc3RhdGUgPT09IFwib25cIiB8fCBzdGF0ZU9iai5zdGF0ZSA9PT0gXCJvZmZcIlxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGhhLWVudGl0eS10b2dnbGVcbiAgICAgICAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgICAgICAgLnN0YXRlT2JqPVwiJHtzdGF0ZU9ian1cIlxuICAgICAgICAgICAgICA+PC9oYS1lbnRpdHktdG9nZ2xlPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAke2NvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgICAgICAgICB0aGlzLmhhc3MhLmxvY2FsaXplLFxuICAgICAgICAgICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgICAgICAgICB0aGlzLmhhc3MhLmxhbmd1YWdlXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgfVxuICAgICAgPC9odWktZ2VuZXJpYy1lbnRpdHktcm93PlxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS10b2dnbGUtZW50aXR5LXJvd1wiOiBIdWlUb2dnbGVFbnRpdHlSb3c7XG4gIH1cbn1cbiIsImltcG9ydCBcIkBtYXRlcmlhbC9td2MtYnV0dG9uXCI7XG5cbmltcG9ydCB7XG4gIGZldGNoQ29uZmlnLFxuICBMb3ZlbGFjZUNvbmZpZyxcbiAgc2F2ZUNvbmZpZyxcbiAgc3Vic2NyaWJlTG92ZWxhY2VVcGRhdGVzLFxuICBXaW5kb3dXaXRoTG92ZWxhY2VQcm9tLFxufSBmcm9tIFwiLi4vLi4vZGF0YS9sb3ZlbGFjZVwiO1xuaW1wb3J0IFwiLi4vLi4vbGF5b3V0cy9oYXNzLWxvYWRpbmctc2NyZWVuXCI7XG5pbXBvcnQgXCIuLi8uLi9sYXlvdXRzL2hhc3MtZXJyb3Itc2NyZWVuXCI7XG5pbXBvcnQgXCIuL2h1aS1yb290XCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50LCBQYW5lbEluZm8sIFJvdXRlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQge1xuICBMaXRFbGVtZW50LFxuICBodG1sLFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIHByb3BlcnR5LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IHNob3dTYXZlRGlhbG9nIH0gZnJvbSBcIi4vZWRpdG9yL3Nob3ctc2F2ZS1jb25maWctZGlhbG9nXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUxvdmVsYWNlQ29uZmlnRnJvbUhhc3MgfSBmcm9tIFwiLi9jb21tb24vZ2VuZXJhdGUtbG92ZWxhY2UtY29uZmlnXCI7XG5pbXBvcnQgeyBzaG93VG9hc3QgfSBmcm9tIFwiLi4vLi4vdXRpbC90b2FzdFwiO1xuXG5pbnRlcmZhY2UgTG92ZWxhY2VQYW5lbENvbmZpZyB7XG4gIG1vZGU6IFwieWFtbFwiIHwgXCJzdG9yYWdlXCI7XG59XG5cbmxldCBlZGl0b3JMb2FkZWQgPSBmYWxzZTtcblxuY2xhc3MgTG92ZWxhY2VQYW5lbCBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgcGFuZWw/OiBQYW5lbEluZm88TG92ZWxhY2VQYW5lbENvbmZpZz47XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBuYXJyb3c/OiBib29sZWFuO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyByb3V0ZT86IFJvdXRlO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2NvbHVtbnM/OiBudW1iZXI7XG5cbiAgQHByb3BlcnR5KClcbiAgcHJpdmF0ZSBfc3RhdGU/OiBcImxvYWRpbmdcIiB8IFwibG9hZGVkXCIgfCBcImVycm9yXCIgfCBcInlhbWwtZWRpdG9yXCIgPSBcImxvYWRpbmdcIjtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9lcnJvck1zZz86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIGxvdmVsYWNlPzogTG92ZWxhY2U7XG5cbiAgcHJpdmF0ZSBtcWxzPzogTWVkaWFRdWVyeUxpc3RbXTtcblxuICBwcml2YXRlIF9pZ25vcmVOZXh0VXBkYXRlRXZlbnQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2Nsb3NlRWRpdG9yID0gdGhpcy5fY2xvc2VFZGl0b3IuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3N0YXRlITtcblxuICAgIGlmIChzdGF0ZSA9PT0gXCJsb2FkZWRcIikge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxodWktcm9vdFxuICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAubG92ZWxhY2U9XCIke3RoaXMubG92ZWxhY2V9XCJcbiAgICAgICAgICAucm91dGU9XCIke3RoaXMucm91dGV9XCJcbiAgICAgICAgICAuY29sdW1ucz1cIiR7dGhpcy5fY29sdW1uc31cIlxuICAgICAgICAgIC5uYXJyb3c9JHt0aGlzLm5hcnJvd31cbiAgICAgICAgICBAY29uZmlnLXJlZnJlc2g9XCIke3RoaXMuX2ZvcmNlRmV0Y2hDb25maWd9XCJcbiAgICAgICAgPjwvaHVpLXJvb3Q+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGhhc3MtZXJyb3Itc2NyZWVuIHRpdGxlPVwiTG92ZWxhY2VcIiAuZXJyb3I9XCIke3RoaXMuX2Vycm9yTXNnfVwiPlxuICAgICAgICAgIDxtd2MtYnV0dG9uIG9uLWNsaWNrPVwiX2ZvcmNlRmV0Y2hDb25maWdcIlxuICAgICAgICAgICAgPiR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5yZWxvYWRfbG92ZWxhY2VcIlxuICAgICAgICAgICAgKX08L213Yy1idXR0b25cbiAgICAgICAgICA+XG4gICAgICAgIDwvaGFzcy1lcnJvci1zY3JlZW4+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZSA9PT0gXCJ5YW1sLWVkaXRvclwiKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGh1aS1lZGl0b3JcbiAgICAgICAgICAuaGFzcz1cIiR7dGhpcy5oYXNzfVwiXG4gICAgICAgICAgLmxvdmVsYWNlPVwiJHt0aGlzLmxvdmVsYWNlfVwiXG4gICAgICAgICAgLmNsb3NlRWRpdG9yPVwiJHt0aGlzLl9jbG9zZUVkaXRvcn1cIlxuICAgICAgICA+PC9odWktZWRpdG9yPlxuICAgICAgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYXNzLWxvYWRpbmctc2NyZWVuXG4gICAgICAgIHJvb3RuYXZcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5uYXJyb3c9JHt0aGlzLm5hcnJvd31cbiAgICAgID48L2hhc3MtbG9hZGluZy1zY3JlZW4+XG4gICAgYDtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wcyk7XG5cbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIm5hcnJvd1wiKSkge1xuICAgICAgdGhpcy5fdXBkYXRlQ29sdW1ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgdGhpc1tcImhhc3NcIl07XG5cbiAgICBpZiAob2xkSGFzcyAmJiB0aGlzLmhhc3MhLmRvY2tlZFNpZGViYXIgIT09IG9sZEhhc3MuZG9ja2VkU2lkZWJhcikge1xuICAgICAgdGhpcy5fdXBkYXRlQ29sdW1ucygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBmaXJzdFVwZGF0ZWQoKSB7XG4gICAgdGhpcy5fZmV0Y2hDb25maWcoZmFsc2UpO1xuICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gdW5zdWIgYXMgd2Ugd2FudCB0byBzdGF5IGluZm9ybWVkIG9mIHVwZGF0ZXNcbiAgICBzdWJzY3JpYmVMb3ZlbGFjZVVwZGF0ZXModGhpcy5oYXNzIS5jb25uZWN0aW9uLCAoKSA9PlxuICAgICAgdGhpcy5fbG92ZWxhY2VDaGFuZ2VkKClcbiAgICApO1xuICAgIC8vIHJlbG9hZCBsb3ZlbGFjZSBvbiByZWNvbm5lY3Qgc28gd2UgYXJlIHN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IGNvbmZpZ1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbi1zdGF0dXNcIiwgKGV2KSA9PiB7XG4gICAgICBpZiAoZXYuZGV0YWlsID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICAgIHRoaXMuX2ZldGNoQ29uZmlnKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl91cGRhdGVDb2x1bW5zID0gdGhpcy5fdXBkYXRlQ29sdW1ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMubXFscyA9IFszMDAsIDYwMCwgOTAwLCAxMjAwXS5tYXAoKHdpZHRoKSA9PiB7XG4gICAgICBjb25zdCBtcWwgPSBtYXRjaE1lZGlhKGAobWluLXdpZHRoOiAke3dpZHRofXB4KWApO1xuICAgICAgbXFsLmFkZExpc3RlbmVyKHRoaXMuX3VwZGF0ZUNvbHVtbnMpO1xuICAgICAgcmV0dXJuIG1xbDtcbiAgICB9KTtcbiAgICB0aGlzLl91cGRhdGVDb2x1bW5zKCk7XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAoXG4gICAgICB0aGlzLmxvdmVsYWNlICYmXG4gICAgICB0aGlzLmhhc3MgJiZcbiAgICAgIHRoaXMubG92ZWxhY2UubGFuZ3VhZ2UgIT09IHRoaXMuaGFzcy5sYW5ndWFnZVxuICAgICkge1xuICAgICAgLy8gbGFuZ3VhZ2UgaGFzIGJlZW4gY2hhbmdlZCwgcmVidWlsZCBVSVxuICAgICAgdGhpcy5fc2V0TG92ZWxhY2VDb25maWcodGhpcy5sb3ZlbGFjZS5jb25maWcsIHRoaXMubG92ZWxhY2UubW9kZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmxvdmVsYWNlICYmIHRoaXMubG92ZWxhY2UubW9kZSA9PT0gXCJnZW5lcmF0ZWRcIikge1xuICAgICAgLy8gV2hlbiBsb3ZlbGFjZSBpcyBnZW5lcmF0ZWQsIHdlIHJlLWdlbmVyYXRlIGVhY2ggdGltZSBhIHVzZXIgZ29lc1xuICAgICAgLy8gdG8gdGhlIHN0YXRlcyBwYW5lbCB0byBtYWtlIHN1cmUgbmV3IGVudGl0aWVzIGFyZSBzaG93bi5cbiAgICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkaW5nXCI7XG4gICAgICB0aGlzLl9yZWdlbmVyYXRlQ29uZmlnKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfcmVnZW5lcmF0ZUNvbmZpZygpIHtcbiAgICBjb25zdCBjb25mID0gYXdhaXQgZ2VuZXJhdGVMb3ZlbGFjZUNvbmZpZ0Zyb21IYXNzKHRoaXMuaGFzcyEpO1xuICAgIHRoaXMuX3NldExvdmVsYWNlQ29uZmlnKGNvbmYsIFwiZ2VuZXJhdGVkXCIpO1xuICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkZWRcIjtcbiAgfVxuXG4gIHByaXZhdGUgX2Nsb3NlRWRpdG9yKCkge1xuICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkZWRcIjtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUNvbHVtbnMoKSB7XG4gICAgY29uc3QgbWF0Y2hDb2x1bW5zID0gdGhpcy5tcWxzIS5yZWR1Y2UoXG4gICAgICAoY29scywgbXFsKSA9PiBjb2xzICsgTnVtYmVyKG1xbC5tYXRjaGVzKSxcbiAgICAgIDBcbiAgICApO1xuICAgIC8vIERvIC0xIGNvbHVtbiBpZiB0aGUgbWVudSBpcyBkb2NrZWQgYW5kIG9wZW5cbiAgICB0aGlzLl9jb2x1bW5zID0gTWF0aC5tYXgoXG4gICAgICAxLFxuICAgICAgbWF0Y2hDb2x1bW5zIC1cbiAgICAgICAgTnVtYmVyKCF0aGlzLm5hcnJvdyAmJiB0aGlzLmhhc3MhLmRvY2tlZFNpZGViYXIgPT09IFwiZG9ja2VkXCIpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2xvdmVsYWNlQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5faWdub3JlTmV4dFVwZGF0ZUV2ZW50KSB7XG4gICAgICB0aGlzLl9pZ25vcmVOZXh0VXBkYXRlRXZlbnQgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2hvd1RvYXN0KHRoaXMsIHtcbiAgICAgIG1lc3NhZ2U6IHRoaXMuaGFzcyEubG9jYWxpemUoXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jaGFuZ2VkX3RvYXN0Lm1lc3NhZ2VcIiksXG4gICAgICBhY3Rpb246IHtcbiAgICAgICAgYWN0aW9uOiAoKSA9PiB0aGlzLl9mZXRjaENvbmZpZyhmYWxzZSksXG4gICAgICAgIHRleHQ6IHRoaXMuaGFzcyEubG9jYWxpemUoXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jaGFuZ2VkX3RvYXN0LnJlZnJlc2hcIiksXG4gICAgICB9LFxuICAgICAgZHVyYXRpb246IDAsXG4gICAgICBkaXNtaXNzYWJsZTogZmFsc2UsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9mb3JjZUZldGNoQ29uZmlnKCkge1xuICAgIHRoaXMuX2ZldGNoQ29uZmlnKHRydWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZmV0Y2hDb25maWcoZm9yY2VEaXNrUmVmcmVzaCkge1xuICAgIGxldCBjb25mOiBMb3ZlbGFjZUNvbmZpZztcbiAgICBsZXQgY29uZk1vZGU6IExvdmVsYWNlW1wibW9kZVwiXSA9IHRoaXMucGFuZWwhLmNvbmZpZy5tb2RlO1xuICAgIGxldCBjb25mUHJvbTogUHJvbWlzZTxMb3ZlbGFjZUNvbmZpZz47XG4gICAgY29uc3QgbGxXaW5kb3cgPSB3aW5kb3cgYXMgV2luZG93V2l0aExvdmVsYWNlUHJvbTtcblxuICAgIC8vIE9uIGZpcnN0IGxvYWQsIHdlIHNwZWVkIHVwIGxvYWRpbmcgcGFnZSBieSBoYXZpbmcgTEwgcHJvbWlzZSByZWFkeVxuICAgIGlmIChsbFdpbmRvdy5sbENvbmZQcm9tKSB7XG4gICAgICBjb25mUHJvbSA9IGxsV2luZG93LmxsQ29uZlByb207XG4gICAgICBsbFdpbmRvdy5sbENvbmZQcm9tID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZWZyZXNoaW5nIGEgWUFNTCBjb25maWcgY2FuIHRyaWdnZXIgYW4gdXBkYXRlIGV2ZW50LiBXZSB3aWxsIGlnbm9yZVxuICAgICAgLy8gYWxsIHVwZGF0ZSBldmVudHMgd2hpbGUgZmV0Y2hpbmcgdGhlIGNvbmZpZyBhbmQgZm9yIDIgc2Vjb25kcyBhZnRlciB0aGUgY25vZmlnIGlzIGJhY2suXG4gICAgICAvLyBXZSBpZ25vcmUgYmVjYXVzZSB3ZSBhbHJlYWR5IGhhdmUgdGhlIGxhdGVzdCBjb25maWcuXG4gICAgICBpZiAodGhpcy5sb3ZlbGFjZSAmJiB0aGlzLmxvdmVsYWNlLm1vZGUgPT09IFwieWFtbFwiKSB7XG4gICAgICAgIHRoaXMuX2lnbm9yZU5leHRVcGRhdGVFdmVudCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbmZQcm9tID0gZmV0Y2hDb25maWcodGhpcy5oYXNzIS5jb25uZWN0aW9uLCBmb3JjZURpc2tSZWZyZXNoKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uZiA9IGF3YWl0IGNvbmZQcm9tO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyci5jb2RlICE9PSBcImNvbmZpZ19ub3RfZm91bmRcIikge1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBcImVycm9yXCI7XG4gICAgICAgIHRoaXMuX2Vycm9yTXNnID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbmYgPSBhd2FpdCBnZW5lcmF0ZUxvdmVsYWNlQ29uZmlnRnJvbUhhc3ModGhpcy5oYXNzISk7XG4gICAgICBjb25mTW9kZSA9IFwiZ2VuZXJhdGVkXCI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIElnbm9yZSB1cGRhdGVzIGZvciBhbm90aGVyIDIgc2Vjb25kcy5cbiAgICAgIGlmICh0aGlzLmxvdmVsYWNlICYmIHRoaXMubG92ZWxhY2UubW9kZSA9PT0gXCJ5YW1sXCIpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5faWdub3JlTmV4dFVwZGF0ZUV2ZW50ID0gZmFsc2U7XG4gICAgICAgIH0sIDIwMDApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3N0YXRlID0gXCJsb2FkZWRcIjtcbiAgICB0aGlzLl9zZXRMb3ZlbGFjZUNvbmZpZyhjb25mLCBjb25mTW9kZSk7XG4gIH1cblxuICBwcml2YXRlIF9jaGVja0xvdmVsYWNlQ29uZmlnKGNvbmZpZzogTG92ZWxhY2VDb25maWcpIHtcbiAgICAvLyBTb21laG93IHRoZXJlIGNhbiBiZSBiYWRnZXMgd2l0aCB2YWx1ZSBudWxsLCB3ZSByZW1vdmUgdGhvc2VcbiAgICBjb25maWcudmlld3MuZm9yRWFjaCgodmlldykgPT4ge1xuICAgICAgaWYgKHZpZXcuYmFkZ2VzKSB7XG4gICAgICAgIHZpZXcuYmFkZ2VzID0gdmlldy5iYWRnZXMuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0TG92ZWxhY2VDb25maWcoY29uZmlnOiBMb3ZlbGFjZUNvbmZpZywgbW9kZTogTG92ZWxhY2VbXCJtb2RlXCJdKSB7XG4gICAgdGhpcy5fY2hlY2tMb3ZlbGFjZUNvbmZpZyhjb25maWcpO1xuICAgIHRoaXMubG92ZWxhY2UgPSB7XG4gICAgICBjb25maWcsXG4gICAgICBtb2RlLFxuICAgICAgZWRpdE1vZGU6IHRoaXMubG92ZWxhY2UgPyB0aGlzLmxvdmVsYWNlLmVkaXRNb2RlIDogZmFsc2UsXG4gICAgICBsYW5ndWFnZTogdGhpcy5oYXNzIS5sYW5ndWFnZSxcbiAgICAgIGVuYWJsZUZ1bGxFZGl0TW9kZTogKCkgPT4ge1xuICAgICAgICBpZiAoIWVkaXRvckxvYWRlZCkge1xuICAgICAgICAgIGVkaXRvckxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwibG92ZWxhY2UteWFtbC1lZGl0b3JcIiAqLyBcIi4vaHVpLWVkaXRvclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdGF0ZSA9IFwieWFtbC1lZGl0b3JcIjtcbiAgICAgIH0sXG4gICAgICBzZXRFZGl0TW9kZTogKGVkaXRNb2RlOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGlmICghZWRpdE1vZGUgfHwgdGhpcy5sb3ZlbGFjZSEubW9kZSAhPT0gXCJnZW5lcmF0ZWRcIikge1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUxvdmVsYWNlKHsgZWRpdE1vZGUgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNob3dTYXZlRGlhbG9nKHRoaXMsIHtcbiAgICAgICAgICBsb3ZlbGFjZTogdGhpcy5sb3ZlbGFjZSEsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHNhdmVDb25maWc6IGFzeW5jIChuZXdDb25maWc6IExvdmVsYWNlQ29uZmlnKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnOiBwcmV2aW91c0NvbmZpZywgbW9kZTogcHJldmlvdXNNb2RlIH0gPSB0aGlzLmxvdmVsYWNlITtcbiAgICAgICAgdGhpcy5fY2hlY2tMb3ZlbGFjZUNvbmZpZyhuZXdDb25maWcpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIE9wdGltaXN0aWMgdXBkYXRlXG4gICAgICAgICAgdGhpcy5fdXBkYXRlTG92ZWxhY2Uoe1xuICAgICAgICAgICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgICAgICAgICBtb2RlOiBcInN0b3JhZ2VcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLl9pZ25vcmVOZXh0VXBkYXRlRXZlbnQgPSB0cnVlO1xuICAgICAgICAgIGF3YWl0IHNhdmVDb25maWcodGhpcy5oYXNzISwgbmV3Q29uZmlnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIC8vIFJvbGxiYWNrIHRoZSBvcHRpbWlzdGljIHVwZGF0ZVxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUxvdmVsYWNlKHtcbiAgICAgICAgICAgIGNvbmZpZzogcHJldmlvdXNDb25maWcsXG4gICAgICAgICAgICBtb2RlOiBwcmV2aW91c01vZGUsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVMb3ZlbGFjZShwcm9wczogUGFydGlhbDxMb3ZlbGFjZT4pIHtcbiAgICB0aGlzLmxvdmVsYWNlID0ge1xuICAgICAgLi4udGhpcy5sb3ZlbGFjZSEsXG4gICAgICAuLi5wcm9wcyxcbiAgICB9O1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImhhLXBhbmVsLWxvdmVsYWNlXCIsIExvdmVsYWNlUGFuZWwpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBDU1NSZXN1bHQsXG4gIGNzcyxcbiAgcHJvcGVydHksXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcbmltcG9ydCBcIkBwb2x5bWVyL2FwcC1sYXlvdXQvYXBwLWhlYWRlci1sYXlvdXQvYXBwLWhlYWRlci1sYXlvdXRcIjtcbmltcG9ydCBcIkBwb2x5bWVyL2FwcC1sYXlvdXQvYXBwLWhlYWRlci9hcHAtaGVhZGVyXCI7XG5pbXBvcnQgXCJAcG9seW1lci9hcHAtbGF5b3V0L2FwcC1zY3JvbGwtZWZmZWN0cy9lZmZlY3RzL3dhdGVyZmFsbFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvYXBwLWxheW91dC9hcHAtdG9vbGJhci9hcHAtdG9vbGJhclwiO1xuaW1wb3J0IFwiQHBvbHltZXIvYXBwLXJvdXRlL2FwcC1yb3V0ZVwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItaWNvbi1idXR0b24vcGFwZXItaWNvbi1idXR0b25cIjtcbmltcG9ydCBcIkBtYXRlcmlhbC9td2MtYnV0dG9uXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci1pdGVtL3BhcGVyLWl0ZW1cIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLWxpc3Rib3gvcGFwZXItbGlzdGJveFwiO1xuaW1wb3J0IFwiQHBvbHltZXIvcGFwZXItbWVudS1idXR0b24vcGFwZXItbWVudS1idXR0b25cIjtcbmltcG9ydCBcIkBwb2x5bWVyL3BhcGVyLXRhYnMvcGFwZXItdGFiXCI7XG5pbXBvcnQgXCJAcG9seW1lci9wYXBlci10YWJzL3BhcGVyLXRhYnNcIjtcblxuaW1wb3J0IHNjcm9sbFRvVGFyZ2V0IGZyb20gXCIuLi8uLi9jb21tb24vZG9tL3Njcm9sbC10by10YXJnZXRcIjtcblxuaW1wb3J0IFwiLi4vLi4vbGF5b3V0cy9oYS1hcHAtbGF5b3V0XCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLXN0YXJ0LXZvaWNlLWJ1dHRvblwiO1xuaW1wb3J0IFwiLi4vLi4vY29tcG9uZW50cy9oYS1wYXBlci1pY29uLWJ1dHRvbi1hcnJvdy1uZXh0XCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LXByZXZcIjtcbmltcG9ydCBcIi4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3V0aWwvZGVib3VuY2VcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IG5hdmlnYXRlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9uYXZpZ2F0ZVwiO1xuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgc3dhcFZpZXcgfSBmcm9tIFwiLi9lZGl0b3IvY29uZmlnLXV0aWxcIjtcblxuaW1wb3J0IFwiLi92aWV3cy9odWktdmlld1wiO1xuLy8gTm90IGEgZHVwbGljYXRlIGltcG9ydCwgdGhpcyBvbmUgaXMgZm9yIHR5cGVcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuaW1wb3J0IHsgSFVJVmlldyB9IGZyb20gXCIuL3ZpZXdzL2h1aS12aWV3XCI7XG5pbXBvcnQgXCIuL3ZpZXdzL2h1aS1wYW5lbC12aWV3XCI7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbmltcG9ydCB7IEhVSVBhbmVsVmlldyB9IGZyb20gXCIuL3ZpZXdzL2h1aS1wYW5lbC12aWV3XCI7XG5pbXBvcnQgeyBzaG93RWRpdFZpZXdEaWFsb2cgfSBmcm9tIFwiLi9lZGl0b3Ivdmlldy1lZGl0b3Ivc2hvdy1lZGl0LXZpZXctZGlhbG9nXCI7XG5pbXBvcnQgeyBzaG93RWRpdExvdmVsYWNlRGlhbG9nIH0gZnJvbSBcIi4vZWRpdG9yL2xvdmVsYWNlLWVkaXRvci9zaG93LWVkaXQtbG92ZWxhY2UtZGlhbG9nXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBhZnRlck5leHRSZW5kZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3V0aWwvcmVuZGVyLXN0YXR1c1wiO1xuaW1wb3J0IHsgaGFTdHlsZSB9IGZyb20gXCIuLi8uLi9yZXNvdXJjZXMvc3R5bGVzXCI7XG5pbXBvcnQgeyBjb21wdXRlUlRMRGlyZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBsb2FkTG92ZWxhY2VSZXNvdXJjZXMgfSBmcm9tIFwiLi9jb21tb24vbG9hZC1yZXNvdXJjZXNcIjtcblxuY2xhc3MgSFVJUm9vdCBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoKSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBsb3ZlbGFjZT86IExvdmVsYWNlO1xuICBAcHJvcGVydHkoKSBwdWJsaWMgY29sdW1ucz86IG51bWJlcjtcbiAgQHByb3BlcnR5KCkgcHVibGljIG5hcnJvdz86IGJvb2xlYW47XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyByb3V0ZT86IHsgcGF0aDogc3RyaW5nOyBwcmVmaXg6IHN0cmluZyB9O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9yb3V0ZURhdGE/OiB7IHZpZXc6IHN0cmluZyB9O1xuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jdXJWaWV3PzogbnVtYmVyIHwgXCJoYXNzLXVudXNlZC1lbnRpdGllc1wiO1xuICBwcml2YXRlIF92aWV3Q2FjaGU/OiB7IFt2aWV3SWQ6IHN0cmluZ106IEhVSVZpZXcgfTtcblxuICBwcml2YXRlIF9kZWJvdW5jZWRDb25maWdDaGFuZ2VkOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgLy8gVGhlIHZpZXcgY2FuIHRyaWdnZXIgYSByZS1yZW5kZXIgd2hlbiBpdCBrbm93cyB0aGF0IGNlcnRhaW5cbiAgICAvLyB3ZWIgY29tcG9uZW50cyBoYXZlIGJlZW4gbG9hZGVkLlxuICAgIHRoaXMuX2RlYm91bmNlZENvbmZpZ0NoYW5nZWQgPSBkZWJvdW5jZShcbiAgICAgICgpID0+IHRoaXMuX3NlbGVjdFZpZXcodGhpcy5fY3VyVmlldywgdHJ1ZSksXG4gICAgICAxMDAsXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFxuICAgICAgXCJkaXNhYmxlLXRleHQtc2VsZWN0XCIsXG4gICAgICAvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9BbmRyb2lkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICA8YXBwLXJvdXRlIC5yb3V0ZT1cIiR7dGhpcy5yb3V0ZX1cIiBwYXR0ZXJuPVwiLzp2aWV3XCIgZGF0YT1cIiR7XG4gICAgICB0aGlzLl9yb3V0ZURhdGFcbiAgICB9XCIgQGRhdGEtY2hhbmdlZD1cIiR7dGhpcy5fcm91dGVEYXRhQ2hhbmdlZH1cIj48L2FwcC1yb3V0ZT5cbiAgICA8aGEtYXBwLWxheW91dCBpZD1cImxheW91dFwiPlxuICAgICAgPGFwcC1oZWFkZXIgc2xvdD1cImhlYWRlclwiIGVmZmVjdHM9XCJ3YXRlcmZhbGxcIiBjbGFzcz1cIiR7Y2xhc3NNYXAoe1xuICAgICAgICBcImVkaXQtbW9kZVwiOiB0aGlzLl9lZGl0TW9kZSxcbiAgICAgIH0pfVwiIGZpeGVkIGNvbmRlbnNlcz5cbiAgICAgICAgJHtcbiAgICAgICAgICB0aGlzLl9lZGl0TW9kZVxuICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgIDxhcHAtdG9vbGJhciBjbGFzcz1cImVkaXQtbW9kZVwiPlxuICAgICAgICAgICAgICAgICAgPHBhcGVyLWljb24tYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOmNsb3NlXCJcbiAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9lZGl0TW9kZURpc2FibGV9XCJcbiAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGRpdiBtYWluLXRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMuY29uZmlnLnRpdGxlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNzIS5sb2NhbGl6ZShcInVpLnBhbmVsLmxvdmVsYWNlLmVkaXRvci5oZWFkZXJcIil9XG4gICAgICAgICAgICAgICAgICAgIDxwYXBlci1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOnBlbmNpbFwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJlZGl0LWljb25cIlxuICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fZWRpdExvdmVsYWNlfVwiXG4gICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgaWNvbj1cImhhc3M6aGVscC1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkhlbHBcIlxuICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCIke3RoaXMuX2hhbmRsZUhlbHB9XCJcbiAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPHBhcGVyLW1lbnUtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG5vLWFuaW1hdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbC1hbGlnbj1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbC1vZmZzZXQ9XCItNVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwYXBlci1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJPcGVuIExvdmVsYWNlIG1lbnVcIlxuICAgICAgICAgICAgICAgICAgICAgIGljb249XCJoYXNzOmRvdHMtdmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgICAgIHNsb3Q9XCJkcm9wZG93bi10cmlnZ2VyXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvcGFwZXItaWNvbi1idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxwYXBlci1saXN0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgQGlyb24tc2VsZWN0PVwiJHt0aGlzLl9kZXNlbGVjdH1cIlxuICAgICAgICAgICAgICAgICAgICAgIHNsb3Q9XCJkcm9wZG93bi1jb250ZW50XCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICR7X19ERU1PX18gLyogTm8gdW51c2VkIGVudGl0aWVzIGF2YWlsYWJsZSBpbiB0aGUgZGVtbyAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9JHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLm1lbnUudW51c2VkX2VudGl0aWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAdGFwPVwiJHt0aGlzLl9oYW5kbGVVbnVzZWRFbnRpdGllc31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LnVudXNlZF9lbnRpdGllc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaXRlbSBAdGFwPVwiJHt0aGlzLmxvdmVsYWNlIS5lbmFibGVGdWxsRWRpdE1vZGV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuZWRpdG9yLm1lbnUucmF3X2VkaXRvclwiXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPC9wYXBlci1saXN0Ym94PlxuICAgICAgICAgICAgICAgICAgPC9wYXBlci1tZW51LWJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2FwcC10b29sYmFyPlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgICAgPGFwcC10b29sYmFyPlxuICAgICAgICAgICAgICAgICAgPGhhLW1lbnUtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgICAgICAgICAubmFycm93PSR7dGhpcy5uYXJyb3d9XG4gICAgICAgICAgICAgICAgICA+PC9oYS1tZW51LWJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgbWFpbi10aXRsZT4ke3RoaXMuY29uZmlnLnRpdGxlIHx8IFwi54mn5YW754qsXCJ9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8aGEtc3RhcnQtdm9pY2UtYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5oYXNzPVwiJHt0aGlzLmhhc3N9XCJcbiAgICAgICAgICAgICAgICAgID48L2hhLXN0YXJ0LXZvaWNlLWJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxwYXBlci1tZW51LWJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBuby1hbmltYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWwtYWxpZ249XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWwtb2Zmc2V0PVwiLTVcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cGFwZXItaWNvbi1idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBpY29uPVwiaGFzczpkb3RzLXZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICAgICAgICBzbG90PVwiZHJvcGRvd24tdHJpZ2dlclwiXG4gICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8cGFwZXItbGlzdGJveFxuICAgICAgICAgICAgICAgICAgICAgIEBpcm9uLXNlbGVjdD1cIiR7dGhpcy5fZGVzZWxlY3R9XCJcbiAgICAgICAgICAgICAgICAgICAgICBzbG90PVwiZHJvcGRvd24tY29udGVudFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX3lhbWxNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9JHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLm1lbnUucmVmcmVzaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHRhcD1cIiR7dGhpcy5faGFuZGxlUmVmcmVzaH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LnJlZnJlc2hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3BhcGVyLWl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9JHt0aGlzLmhhc3MhLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLm1lbnUudW51c2VkX2VudGl0aWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAdGFwPVwiJHt0aGlzLl9oYW5kbGVVbnVzZWRFbnRpdGllc31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LnVudXNlZF9lbnRpdGllc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5oYXNzIS51c2VyIS5pc19hZG1pblxuICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXBlci1pdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5tZW51LmNvbmZpZ3VyZV91aVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHRhcD1cIiR7dGhpcy5fZWRpdE1vZGVFbmFibGV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UubWVudS5jb25maWd1cmVfdWlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3BhcGVyLWl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0ke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UubWVudS5oZWxwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICBAdGFwPVwiJHt0aGlzLl9oYW5kbGVIZWxwfVwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MhLmxvY2FsaXplKFwidWkucGFuZWwubG92ZWxhY2UubWVudS5oZWxwXCIpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItaXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPC9wYXBlci1saXN0Ym94PlxuICAgICAgICAgICAgICAgICAgPC9wYXBlci1tZW51LWJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2FwcC10b29sYmFyPlxuICAgICAgICAgICAgICBgXG4gICAgICAgIH1cblxuICAgICAgICAke1xuICAgICAgICAgIHRoaXMubG92ZWxhY2UhLmNvbmZpZy52aWV3cy5sZW5ndGggPiAxIHx8IHRoaXMuX2VkaXRNb2RlXG4gICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgPGRpdiBzdGlja3k+XG4gICAgICAgICAgICAgICAgICA8cGFwZXItdGFic1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxhYmxlXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RlZD1cIiR7dGhpcy5fY3VyVmlld31cIlxuICAgICAgICAgICAgICAgICAgICBAaXJvbi1hY3RpdmF0ZT1cIiR7dGhpcy5faGFuZGxlVmlld1NlbGVjdGVkfVwiXG4gICAgICAgICAgICAgICAgICAgIGRpcj1cIiR7Y29tcHV0ZVJUTERpcmVjdGlvbih0aGlzLmhhc3MhKX1cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMubG92ZWxhY2UhLmNvbmZpZy52aWV3cy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHZpZXcpID0+IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICA8cGFwZXItdGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCIke3ZpZXcudGl0bGV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCIke2NsYXNzTWFwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImhpZGUtdGFiXCI6IEJvb2xlYW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5fZWRpdE1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy52aXNpYmxlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChBcnJheS5pc0FycmF5KHZpZXcudmlzaWJsZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdmlldy52aXNpYmxlLnNvbWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSkgPT4gZS51c2VyID09PSB0aGlzLmhhc3MhLnVzZXIhLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnZpc2libGUgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5fZWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoYS1wYXBlci1pY29uLWJ1dHRvbi1hcnJvdy1wcmV2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJNb3ZlIHZpZXcgbGVmdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJlZGl0LWljb24gdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9tb3ZlVmlld0xlZnR9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ZGlzYWJsZWQ9XCIke3RoaXMuX2N1clZpZXcgPT09IDB9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvaGEtcGFwZXItaWNvbi1idXR0b24tYXJyb3ctcHJldj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7dmlldy5pY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiJHt2aWV3LnRpdGxlfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmljb249XCIke3ZpZXcuaWNvbn1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9oYS1pY29uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmlldy50aXRsZSB8fCBcIlVubmFtZWQgdmlld1wifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuX2VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGEtaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRWRpdCB2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImVkaXQtaWNvbiB2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uPVwiaGFzczpwZW5jaWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cIiR7dGhpcy5fZWRpdFZpZXd9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvaGEtaWNvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhhLXBhcGVyLWljb24tYnV0dG9uLWFycm93LW5leHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vdmUgdmlldyByaWdodFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJlZGl0LWljb24gdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9tb3ZlVmlld1JpZ2h0fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2Rpc2FibGVkPVwiJHsodGhpcy5fY3VyVmlldyEgYXMgbnVtYmVyKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb3ZlbGFjZSEuY29uZmlnLnZpZXdzLmxlbmd0aH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9oYS1wYXBlci1pY29uLWJ1dHRvbi1hcnJvdy1uZXh0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcGFwZXItdGFiPlxuICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLl9lZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhcGVyLWljb24tYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJhZGQtdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9hZGRWaWV3fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCIke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmVkaXRvci5lZGl0X3ZpZXcuYWRkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj1cImhhc3M6cGx1c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgIDwvcGFwZXItdGFicz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgOiBcIlwiXG4gICAgICAgIH1cbiAgICAgIDwvYXBwLWhlYWRlcj5cbiAgICAgIDxkaXYgaWQ9J3ZpZXcnIGNsYXNzPVwiJHtjbGFzc01hcCh7XG4gICAgICAgIFwidGFicy1oaWRkZW5cIjogdGhpcy5sb3ZlbGFjZSEuY29uZmlnLnZpZXdzLmxlbmd0aCA8IDIsXG4gICAgICB9KX1cIiBAbGwtcmVidWlsZD0nJHt0aGlzLl9kZWJvdW5jZWRDb25maWdDaGFuZ2VkfSc+PC9kaXY+XG4gICAgPC9hcHAtaGVhZGVyLWxheW91dD5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0W10ge1xuICAgIHJldHVybiBbXG4gICAgICBoYVN0eWxlLFxuICAgICAgY3NzYFxuICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgLS1kYXJrLWNvbG9yOiAjNDU1YTY0O1xuICAgICAgICAgIC0tdGV4dC1kYXJrLWNvbG9yOiAjZmZmO1xuICAgICAgICB9XG5cbiAgICAgICAgOmhvc3QoLmRpc2FibGUtdGV4dC1zZWxlY3QpIHtcbiAgICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgaGEtYXBwLWxheW91dCB7XG4gICAgICAgICAgbWluLWhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICBwYXBlci1tZW51LWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgfVxuICAgICAgICBwYXBlci10YWJzIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMTJweDtcbiAgICAgICAgICAtLXBhcGVyLXRhYnMtc2VsZWN0aW9uLWJhci1jb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCAjZmZmKTtcbiAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICB9XG4gICAgICAgIC5lZGl0LW1vZGUge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcmstY29sb3IsICM0NTVhNjQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWRhcmstY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5lZGl0LW1vZGUgZGl2W21haW4tdGl0bGVdIHtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgfVxuICAgICAgICBwYXBlci10YWIuaXJvbi1zZWxlY3RlZCAuZWRpdC1pY29uIHtcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgfVxuICAgICAgICAuZWRpdC1pY29uIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tYWNjZW50LWNvbG9yKTtcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAuZWRpdC1pY29uW2Rpc2FibGVkXSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWRpc2FibGVkLXRleHQtY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIC5lZGl0LWljb24udmlldyB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICAjYWRkLXZpZXcge1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBoZWlnaHQ6IDQ0cHg7XG4gICAgICAgIH1cbiAgICAgICAgI2FkZC12aWV3IGhhLWljb24ge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWFjY2VudC1jb2xvcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICAgICAgfVxuICAgICAgICBhcHAtdG9vbGJhciBhIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCB3aGl0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbXdjLWJ1dHRvbi53YXJuaW5nOm5vdChbZGlzYWJsZWRdKSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWdvb2dsZS1yZWQtNTAwKTtcbiAgICAgICAgfVxuICAgICAgICAjdmlldyB7XG4gICAgICAgICAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDExMnB4KTtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAqIFNpbmNlIHdlIG9ubHkgc2V0IG1pbi1oZWlnaHQsIGlmIGNoaWxkIG5vZGVzIG5lZWQgcGVyY2VudGFnZVxuICAgICAgICAgICogaGVpZ2h0cyB0aGV5IG11c3QgdXNlIGFic29sdXRlIHBvc2l0aW9uaW5nIHNvIHdlIG5lZWQgcmVsYXRpdmVcbiAgICAgICAgICAqIHBvc2l0aW9uaW5nIGhlcmUuXG4gICAgICAgICAgKlxuICAgICAgICAgICogaHR0cHM6Ly93d3cudzMub3JnL1RSL0NTUzIvdmlzdWRldC5odG1sI3RoZS1oZWlnaHQtcHJvcGVydHlcbiAgICAgICAgICAqL1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICB9XG4gICAgICAgICN2aWV3ID4gKiB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgKiBUaGUgdmlldyBjb3VsZCBnZXQgbGFyZ2VyIHRoYW4gdGhlIHdpbmRvdyBpbiBGaXJlZm94XG4gICAgICAgICAgKiB0byBwcmV2ZW50IHRoYXQgd2Ugc2V0IHRoZSBtYXgtd2lkdGggdG8gMTAwJVxuICAgICAgICAgICogZmxleC1ncm93OiAxIGFuZCBmbGV4LWJhc2lzOiAxMDAlIHNob3VsZCBtYWtlIHN1cmUgdGhlIHZpZXdcbiAgICAgICAgICAqIHN0YXlzIGZ1bGwgd2lkdGguXG4gICAgICAgICAgKlxuICAgICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL2hvbWUtYXNzaXN0YW50L2hvbWUtYXNzaXN0YW50LXBvbHltZXIvcHVsbC8zODA2XG4gICAgICAgICAgKi9cbiAgICAgICAgICBmbGV4OiAxIDEgMTAwJTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgI3ZpZXcudGFicy1oaWRkZW4ge1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSA2NHB4KTtcbiAgICAgICAgfVxuICAgICAgICBwYXBlci1pdGVtIHtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLmhpZGUtdGFiIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICBgLFxuICAgIF07XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLl92aWV3Um9vdDtcbiAgICBjb25zdCBodWlWaWV3ID0gdmlldy5sYXN0Q2hpbGQgYXMgSFVJVmlldyB8IEhVSVBhbmVsVmlldztcblxuICAgIGlmIChcbiAgICAgIGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImNvbHVtbnNcIikgJiZcbiAgICAgIGh1aVZpZXcgJiZcbiAgICAgIGh1aVZpZXcgaW5zdGFuY2VvZiBIVUlWaWV3XG4gICAgKSB7XG4gICAgICBodWlWaWV3LmNvbHVtbnMgPSB0aGlzLmNvbHVtbnM7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImhhc3NcIikgJiYgaHVpVmlldykge1xuICAgICAgaHVpVmlldy5oYXNzID0gdGhpcy5oYXNzO1xuICAgIH1cblxuICAgIGxldCBuZXdTZWxlY3RWaWV3O1xuICAgIGxldCBmb3JjZSA9IGZhbHNlO1xuXG4gICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcInJvdXRlXCIpKSB7XG4gICAgICBjb25zdCB2aWV3cyA9IHRoaXMuY29uZmlnICYmIHRoaXMuY29uZmlnLnZpZXdzO1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnJvdXRlIS5wYXRoID09PSBcIlwiICYmXG4gICAgICAgIHRoaXMucm91dGUhLnByZWZpeCA9PT0gXCIvbG92ZWxhY2VcIiAmJlxuICAgICAgICB2aWV3c1xuICAgICAgKSB7XG4gICAgICAgIG5hdmlnYXRlKHRoaXMsIGAvbG92ZWxhY2UvJHt2aWV3c1swXS5wYXRoIHx8IDB9YCwgdHJ1ZSk7XG4gICAgICAgIG5ld1NlbGVjdFZpZXcgPSAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9yb3V0ZURhdGEhLnZpZXcgPT09IFwiaGFzcy11bnVzZWQtZW50aXRpZXNcIikge1xuICAgICAgICBuZXdTZWxlY3RWaWV3ID0gXCJoYXNzLXVudXNlZC1lbnRpdGllc1wiO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9yb3V0ZURhdGEhLnZpZXcpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRWaWV3ID0gdGhpcy5fcm91dGVEYXRhIS52aWV3O1xuICAgICAgICBjb25zdCBzZWxlY3RlZFZpZXdJbnQgPSBwYXJzZUludChzZWxlY3RlZFZpZXcsIDEwKTtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aWV3cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh2aWV3c1tpXS5wYXRoID09PSBzZWxlY3RlZFZpZXcgfHwgaSA9PT0gc2VsZWN0ZWRWaWV3SW50KSB7XG4gICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3U2VsZWN0VmlldyA9IGluZGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoXCJsb3ZlbGFjZVwiKSkge1xuICAgICAgY29uc3Qgb2xkTG92ZWxhY2UgPSBjaGFuZ2VkUHJvcGVydGllcy5nZXQoXCJsb3ZlbGFjZVwiKSBhc1xuICAgICAgICB8IExvdmVsYWNlXG4gICAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoIW9sZExvdmVsYWNlIHx8IG9sZExvdmVsYWNlLmNvbmZpZyAhPT0gdGhpcy5sb3ZlbGFjZSEuY29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLmxvdmVsYWNlIS5jb25maWcucmVzb3VyY2VzKSB7XG4gICAgICAgICAgbG9hZExvdmVsYWNlUmVzb3VyY2VzKFxuICAgICAgICAgICAgdGhpcy5sb3ZlbGFjZSEuY29uZmlnLnJlc291cmNlcyxcbiAgICAgICAgICAgIHRoaXMuaGFzcyEuYXV0aC5kYXRhLmhhc3NVcmxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIC8vIE9uIGNvbmZpZyBjaGFuZ2UsIHJlY3JlYXRlIHRoZSBjdXJyZW50IHZpZXcgZnJvbSBzY3JhdGNoLlxuICAgICAgICBmb3JjZSA9IHRydWU7XG4gICAgICAgIC8vIFJlY2FsY3VsYXRlIHRvIHNlZSBpZiB3ZSBuZWVkIHRvIGFkanVzdCBjb250ZW50IGFyZWEgZm9yIHRhYiBiYXJcbiAgICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghb2xkTG92ZWxhY2UgfHwgb2xkTG92ZWxhY2UuZWRpdE1vZGUgIT09IHRoaXMubG92ZWxhY2UhLmVkaXRNb2RlKSB7XG4gICAgICAgIC8vIExlYXZlIHVudXNlZCBlbnRpdGllcyB3aGVuIGxlYXZpbmcgZWRpdCBtb2RlXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmxvdmVsYWNlIS5tb2RlID09PSBcInN0b3JhZ2VcIiAmJlxuICAgICAgICAgIHRoaXMuX3JvdXRlRGF0YSEudmlldyA9PT0gXCJoYXNzLXVudXNlZC1lbnRpdGllc1wiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHZpZXdzID0gdGhpcy5jb25maWcgJiYgdGhpcy5jb25maWcudmlld3M7XG4gICAgICAgICAgbmF2aWdhdGUodGhpcywgYC9sb3ZlbGFjZS8ke3ZpZXdzWzBdLnBhdGggfHwgMH1gKTtcbiAgICAgICAgICBuZXdTZWxlY3RWaWV3ID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBPbiBlZGl0IG1vZGUgY2hhbmdlLCByZWNyZWF0ZSB0aGUgY3VycmVudCB2aWV3IGZyb20gc2NyYXRjaFxuICAgICAgICBmb3JjZSA9IHRydWU7XG4gICAgICAgIC8vIFJlY2FsY3VsYXRlIHRvIHNlZSBpZiB3ZSBuZWVkIHRvIGFkanVzdCBjb250ZW50IGFyZWEgZm9yIHRhYiBiYXJcbiAgICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5ld1NlbGVjdFZpZXcgIT09IHVuZGVmaW5lZCB8fCBmb3JjZSkge1xuICAgICAgaWYgKGZvcmNlICYmIG5ld1NlbGVjdFZpZXcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdTZWxlY3RWaWV3ID0gdGhpcy5fY3VyVmlldztcbiAgICAgIH1cbiAgICAgIC8vIFdpbGwgYWxsb3cgZm9yIHJpcHBsZXMgdG8gc3RhcnQgcmVuZGVyaW5nXG4gICAgICBhZnRlck5leHRSZW5kZXIoKCkgPT4gdGhpcy5fc2VsZWN0VmlldyhuZXdTZWxlY3RWaWV3LCBmb3JjZSkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGNvbmZpZygpOiBMb3ZlbGFjZUNvbmZpZyB7XG4gICAgcmV0dXJuIHRoaXMubG92ZWxhY2UhLmNvbmZpZztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF95YW1sTW9kZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5sb3ZlbGFjZSEubW9kZSA9PT0gXCJ5YW1sXCI7XG4gIH1cblxuICBwcml2YXRlIGdldCBfZWRpdE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubG92ZWxhY2UhLmVkaXRNb2RlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2xheW91dCgpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QhLmdldEVsZW1lbnRCeUlkKFwibGF5b3V0XCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX3ZpZXdSb290KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5nZXRFbGVtZW50QnlJZChcInZpZXdcIikgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9yb3V0ZURhdGFDaGFuZ2VkKGV2KTogdm9pZCB7XG4gICAgdGhpcy5fcm91dGVEYXRhID0gZXYuZGV0YWlsLnZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlUmVmcmVzaCgpOiB2b2lkIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJjb25maWctcmVmcmVzaFwiKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVVudXNlZEVudGl0aWVzKCk6IHZvaWQge1xuICAgIG5hdmlnYXRlKHRoaXMsIGAvbG92ZWxhY2UvaGFzcy11bnVzZWQtZW50aXRpZXNgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2Rlc2VsZWN0KGV2KTogdm9pZCB7XG4gICAgZXYudGFyZ2V0LnNlbGVjdGVkID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUhlbHAoKTogdm9pZCB7XG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5ob21lLWFzc2lzdGFudC5pby9sb3ZlbGFjZS9cIiwgXCJfYmxhbmtcIik7XG4gIH1cblxuICBwcml2YXRlIF9lZGl0TW9kZUVuYWJsZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5feWFtbE1vZGUpIHtcbiAgICAgIHdpbmRvdy5hbGVydChcIlRoZSBlZGl0IFVJIGlzIG5vdCBhdmFpbGFibGUgd2hlbiBpbiBZQU1MIG1vZGUuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxvdmVsYWNlIS5zZXRFZGl0TW9kZSh0cnVlKTtcbiAgICBpZiAodGhpcy5jb25maWcudmlld3MubGVuZ3RoIDwgMikge1xuICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZWRpdE1vZGVEaXNhYmxlKCk6IHZvaWQge1xuICAgIHRoaXMubG92ZWxhY2UhLnNldEVkaXRNb2RlKGZhbHNlKTtcbiAgICBpZiAodGhpcy5jb25maWcudmlld3MubGVuZ3RoIDwgMikge1xuICAgICAgZmlyZUV2ZW50KHRoaXMsIFwiaXJvbi1yZXNpemVcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZWRpdExvdmVsYWNlKCkge1xuICAgIHNob3dFZGl0TG92ZWxhY2VEaWFsb2codGhpcywgdGhpcy5sb3ZlbGFjZSEpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZWRpdFZpZXcoKSB7XG4gICAgc2hvd0VkaXRWaWV3RGlhbG9nKHRoaXMsIHtcbiAgICAgIGxvdmVsYWNlOiB0aGlzLmxvdmVsYWNlISxcbiAgICAgIHZpZXdJbmRleDogdGhpcy5fY3VyVmlldyBhcyBudW1iZXIsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9tb3ZlVmlld0xlZnQoKSB7XG4gICAgY29uc3QgbG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlITtcbiAgICBjb25zdCBvbGRJbmRleCA9IHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyO1xuICAgIGNvbnN0IG5ld0luZGV4ID0gKHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyKSAtIDE7XG4gICAgdGhpcy5fY3VyVmlldyA9IG5ld0luZGV4O1xuICAgIGxvdmVsYWNlLnNhdmVDb25maWcoc3dhcFZpZXcobG92ZWxhY2UuY29uZmlnLCBvbGRJbmRleCwgbmV3SW5kZXgpKTtcbiAgfVxuXG4gIHByaXZhdGUgX21vdmVWaWV3UmlnaHQoKSB7XG4gICAgY29uc3QgbG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlITtcbiAgICBjb25zdCBvbGRJbmRleCA9IHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyO1xuICAgIGNvbnN0IG5ld0luZGV4ID0gKHRoaXMuX2N1clZpZXcgYXMgbnVtYmVyKSArIDE7XG4gICAgdGhpcy5fY3VyVmlldyA9IG5ld0luZGV4O1xuICAgIGxvdmVsYWNlLnNhdmVDb25maWcoc3dhcFZpZXcobG92ZWxhY2UuY29uZmlnLCBvbGRJbmRleCwgbmV3SW5kZXgpKTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZFZpZXcoKSB7XG4gICAgc2hvd0VkaXRWaWV3RGlhbG9nKHRoaXMsIHtcbiAgICAgIGxvdmVsYWNlOiB0aGlzLmxvdmVsYWNlISxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVZpZXdTZWxlY3RlZChldikge1xuICAgIGNvbnN0IHZpZXdJbmRleCA9IGV2LmRldGFpbC5zZWxlY3RlZCBhcyBudW1iZXI7XG5cbiAgICBpZiAodmlld0luZGV4ICE9PSB0aGlzLl9jdXJWaWV3KSB7XG4gICAgICBjb25zdCBwYXRoID0gdGhpcy5jb25maWcudmlld3Nbdmlld0luZGV4XS5wYXRoIHx8IHZpZXdJbmRleDtcbiAgICAgIG5hdmlnYXRlKHRoaXMsIGAvbG92ZWxhY2UvJHtwYXRofWApO1xuICAgIH1cbiAgICBzY3JvbGxUb1RhcmdldCh0aGlzLCB0aGlzLl9sYXlvdXQuaGVhZGVyLnNjcm9sbFRhcmdldCk7XG4gIH1cblxuICBwcml2YXRlIF9zZWxlY3RWaWV3KHZpZXdJbmRleDogSFVJUm9vdFtcIl9jdXJWaWV3XCJdLCBmb3JjZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghZm9yY2UgJiYgdGhpcy5fY3VyVmlldyA9PT0gdmlld0luZGV4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmlld0luZGV4ID0gdmlld0luZGV4ID09PSB1bmRlZmluZWQgPyAwIDogdmlld0luZGV4O1xuXG4gICAgdGhpcy5fY3VyVmlldyA9IHZpZXdJbmRleDtcblxuICAgIGlmIChmb3JjZSkge1xuICAgICAgdGhpcy5fdmlld0NhY2hlID0ge307XG4gICAgfVxuXG4gICAgLy8gUmVjcmVhdGUgYSBuZXcgZWxlbWVudCB0byBjbGVhciB0aGUgYXBwbGllZCB0aGVtZXMuXG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuX3ZpZXdSb290O1xuXG4gICAgaWYgKHJvb3QubGFzdENoaWxkKSB7XG4gICAgICByb290LnJlbW92ZUNoaWxkKHJvb3QubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICBpZiAodmlld0luZGV4ID09PSBcImhhc3MtdW51c2VkLWVudGl0aWVzXCIpIHtcbiAgICAgIGNvbnN0IHVudXNlZEVudGl0aWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS11bnVzZWQtZW50aXRpZXNcIik7XG4gICAgICAvLyBXYWl0IGZvciBwcm9taXNlIHRvIHJlc29sdmUgc28gdGhhdCB0aGUgZWxlbWVudCBoYXMgYmVlbiB1cGdyYWRlZC5cbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImh1aS11bnVzZWQtZW50aXRpZXNcIiAqLyBcIi4vZWRpdG9yL3VudXNlZC1lbnRpdGllcy9odWktdW51c2VkLWVudGl0aWVzXCIpLnRoZW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB1bnVzZWRFbnRpdGllcy5oYXNzID0gdGhpcy5oYXNzITtcbiAgICAgICAgICB1bnVzZWRFbnRpdGllcy5sb3ZlbGFjZSA9IHRoaXMubG92ZWxhY2UhO1xuICAgICAgICAgIHVudXNlZEVudGl0aWVzLm5hcnJvdyA9IHRoaXMubmFycm93O1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmJhY2tncm91bmQpIHtcbiAgICAgICAgdW51c2VkRW50aXRpZXMuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgXCItLWxvdmVsYWNlLWJhY2tncm91bmRcIixcbiAgICAgICAgICB0aGlzLmNvbmZpZy5iYWNrZ3JvdW5kXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByb290LmFwcGVuZCh1bnVzZWRFbnRpdGllcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHZpZXc7XG4gICAgY29uc3Qgdmlld0NvbmZpZyA9IHRoaXMuY29uZmlnLnZpZXdzW3ZpZXdJbmRleF07XG5cbiAgICBpZiAoIXZpZXdDb25maWcpIHtcbiAgICAgIHRoaXMuX2VkaXRNb2RlRW5hYmxlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFmb3JjZSAmJiB0aGlzLl92aWV3Q2FjaGUhW3ZpZXdJbmRleF0pIHtcbiAgICAgIHZpZXcgPSB0aGlzLl92aWV3Q2FjaGUhW3ZpZXdJbmRleF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2aWV3Q29uZmlnLnBhbmVsICYmIHZpZXdDb25maWcuY2FyZHMgJiYgdmlld0NvbmZpZy5jYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXBhbmVsLXZpZXdcIik7XG4gICAgICAgIHZpZXcuY29uZmlnID0gdmlld0NvbmZpZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXZpZXdcIik7XG4gICAgICAgIHZpZXcubG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlO1xuICAgICAgICB2aWV3LmNvbHVtbnMgPSB0aGlzLmNvbHVtbnM7XG4gICAgICAgIHZpZXcuaW5kZXggPSB2aWV3SW5kZXg7XG4gICAgICB9XG4gICAgICB0aGlzLl92aWV3Q2FjaGUhW3ZpZXdJbmRleF0gPSB2aWV3O1xuICAgIH1cblxuICAgIHZpZXcuaGFzcyA9IHRoaXMuaGFzcztcblxuICAgIGNvbnN0IGNvbmZpZ0JhY2tncm91bmQgPSB2aWV3Q29uZmlnLmJhY2tncm91bmQgfHwgdGhpcy5jb25maWcuYmFja2dyb3VuZDtcblxuICAgIGlmIChjb25maWdCYWNrZ3JvdW5kKSB7XG4gICAgICB2aWV3LnN0eWxlLnNldFByb3BlcnR5KFwiLS1sb3ZlbGFjZS1iYWNrZ3JvdW5kXCIsIGNvbmZpZ0JhY2tncm91bmQpO1xuICAgIH1cblxuICAgIHJvb3QuYXBwZW5kKHZpZXcpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktcm9vdFwiOiBIVUlSb290O1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImh1aS1yb290XCIsIEhVSVJvb3QpO1xuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxuICBjc3MsXG4gIENTU1Jlc3VsdCxcbn0gZnJvbSBcImxpdC1lbGVtZW50XCI7XG5pbXBvcnQgXCJAbWF0ZXJpYWwvbXdjLWJ1dHRvblwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWljb25cIjtcblxuaW1wb3J0IHsgY2FsbFNlcnZpY2UgfSBmcm9tIFwiLi4vY29tbW9uL2NhbGwtc2VydmljZVwiO1xuaW1wb3J0IHsgRW50aXR5Um93LCBDYWxsU2VydmljZUNvbmZpZyB9IGZyb20gXCIuLi9lbnRpdHktcm93cy90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1jYWxsLXNlcnZpY2Utcm93XCIpXG5jbGFzcyBIdWlDYWxsU2VydmljZVJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogQ2FsbFNlcnZpY2VDb25maWc7XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IENhbGxTZXJ2aWNlQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5uYW1lIHx8ICFjb25maWcuc2VydmljZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgaW4gY2FyZCBjb25maWd1cmF0aW9uLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSB7IGljb246IFwiaGFzczpyZW1vdGVcIiwgYWN0aW9uX25hbWU6IFwiUnVuXCIsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWljb24gLmljb249XCIke3RoaXMuX2NvbmZpZy5pY29ufVwiPjwvaGEtaWNvbj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4XCI+XG4gICAgICAgIDxkaXY+JHt0aGlzLl9jb25maWcubmFtZX08L2Rpdj5cbiAgICAgICAgPG13Yy1idXR0b24gQGNsaWNrPVwiJHt0aGlzLl9jYWxsU2VydmljZX1cIlxuICAgICAgICAgID4ke3RoaXMuX2NvbmZpZy5hY3Rpb25fbmFtZX08L213Yy1idXR0b25cbiAgICAgICAgPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIGhhLWljb24ge1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pdGVtLWljb24tY29sb3IpO1xuICAgICAgfVxuICAgICAgLmZsZXgge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuICAgICAgLmZsZXggZGl2IHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgICBtd2MtYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAtMC41N2VtO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIF9jYWxsU2VydmljZSgpIHtcbiAgICBjYWxsU2VydmljZSh0aGlzLl9jb25maWchLCB0aGlzLmhhc3MhKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWNhbGwtc2VydmljZS1yb3dcIjogSHVpQ2FsbFNlcnZpY2VSb3c7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFRlbXBsYXRlUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgY3NzLFxuICBDU1NSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuaW1wb3J0IHsgY2xhc3NNYXAgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBDYXN0Q29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuaW1wb3J0IHsgQ2FzdE1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vLi4vY2FzdC9jYXN0X21hbmFnZXJcIjtcbmltcG9ydCB7XG4gIGVuc3VyZUNvbm5lY3RlZENhc3RTZXNzaW9uLFxuICBjYXN0U2VuZFNob3dMb3ZlbGFjZVZpZXcsXG59IGZyb20gXCIuLi8uLi8uLi9jYXN0L3JlY2VpdmVyX21lc3NhZ2VzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWNhc3Qtcm93XCIpXG5jbGFzcyBIdWlDYXN0Um93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIHB1YmxpYyBoYXNzITogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBDYXN0Q29uZmlnO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2Nhc3RNYW5hZ2VyPzogQ2FzdE1hbmFnZXIgfCBudWxsO1xuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX25vSFRUUFMgPSBmYWxzZTtcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogQ2FzdENvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8IGNvbmZpZy52aWV3ID09PSB1bmRlZmluZWQgfHwgY29uZmlnLnZpZXcgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQ29uZmlndXJhdGlvbjogJ3ZpZXcnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgIGljb246IFwiaGFzczp0ZWxldmlzaW9uXCIsXG4gICAgICBuYW1lOiBcIueJp+WFu+eKrCBDYXN0XCIsXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmUgPVxuICAgICAgdGhpcy5fY2FzdE1hbmFnZXIgJiZcbiAgICAgIHRoaXMuX2Nhc3RNYW5hZ2VyLnN0YXR1cyAmJlxuICAgICAgdGhpcy5fY29uZmlnLnZpZXcgPT09IHRoaXMuX2Nhc3RNYW5hZ2VyLnN0YXR1cy5sb3ZlbGFjZVBhdGg7XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1pY29uIC5pY29uPVwiJHt0aGlzLl9jb25maWcuaWNvbn1cIj48L2hhLWljb24+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZVwiPiR7dGhpcy5fY29uZmlnLm5hbWV9PC9kaXY+XG4gICAgICAgICR7dGhpcy5fbm9IVFRQU1xuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgQ2FzdCByZXF1aXJlcyBIVFRQU1xuICAgICAgICAgICAgYFxuICAgICAgICAgIDogdGhpcy5fY2FzdE1hbmFnZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gaHRtbGBgXG4gICAgICAgICAgOiB0aGlzLl9jYXN0TWFuYWdlciA9PT0gbnVsbFxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgQ2FzdCBBUEkgdW5hdmFpbGFibGVcbiAgICAgICAgICAgIGBcbiAgICAgICAgICA6IHRoaXMuX2Nhc3RNYW5hZ2VyLmNhc3RTdGF0ZSA9PT0gXCJOT19ERVZJQ0VTX0FWQUlMQUJMRVwiXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICBObyBkZXZpY2VzIGZvdW5kXG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICA8Z29vZ2xlLWNhc3QtbGF1bmNoZXI+PC9nb29nbGUtY2FzdC1sYXVuY2hlcj5cbiAgICAgICAgICAgICAgICA8bXdjLWJ1dHRvblxuICAgICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5fc2VuZExvdmVsYWNlfVxuICAgICAgICAgICAgICAgICAgY2xhc3M9JHtjbGFzc01hcCh7IGluYWN0aXZlOiAhQm9vbGVhbihhY3RpdmUpIH0pfVxuICAgICAgICAgICAgICAgICAgLnVuZWxldmF0ZWQ9JHthY3RpdmV9XG4gICAgICAgICAgICAgICAgICAuZGlzYWJsZWQ9JHshdGhpcy5fY2FzdE1hbmFnZXIuc3RhdHVzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFNIT1dcbiAgICAgICAgICAgICAgICA8L213Yy1idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYH1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wcykge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmIChsb2NhdGlvbi5wcm90b2NvbCA9PT0gXCJodHRwOlwiICYmIGxvY2F0aW9uLmhvc3RuYW1lICE9PSBcImxvY2FsaG9zdFwiKSB7XG4gICAgICB0aGlzLl9ub0hUVFBTID0gdHJ1ZTtcbiAgICB9XG4gICAgaW1wb3J0KFwiLi4vLi4vLi4vY2FzdC9jYXN0X21hbmFnZXJcIikudGhlbigoeyBnZXRDYXN0TWFuYWdlciB9KSA9PlxuICAgICAgZ2V0Q2FzdE1hbmFnZXIodGhpcy5oYXNzLmF1dGgpLnRoZW4oXG4gICAgICAgIChtZ3IpID0+IHtcbiAgICAgICAgICB0aGlzLl9jYXN0TWFuYWdlciA9IG1ncjtcbiAgICAgICAgICBtZ3IuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb24tY2hhbmdlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBtZ3IuYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlLWNoYW5nZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9jYXN0TWFuYWdlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzKSB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICh0aGlzLl9jb25maWcgJiYgdGhpcy5fY29uZmlnLmhpZGVfaWZfdW5hdmFpbGFibGUpIHtcbiAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgICF0aGlzLl9jYXN0TWFuYWdlciB8fFxuICAgICAgICB0aGlzLl9jYXN0TWFuYWdlci5jYXN0U3RhdGUgPT09IFwiTk9fREVWSUNFU19BVkFJTEFCTEVcIlxuICAgICAgICAgID8gXCJub25lXCJcbiAgICAgICAgICA6IFwiXCI7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfc2VuZExvdmVsYWNlKCkge1xuICAgIGF3YWl0IGVuc3VyZUNvbm5lY3RlZENhc3RTZXNzaW9uKHRoaXMuX2Nhc3RNYW5hZ2VyISwgdGhpcy5oYXNzLmF1dGgpO1xuICAgIGNhc3RTZW5kU2hvd0xvdmVsYWNlVmlldyh0aGlzLl9jYXN0TWFuYWdlciEsIHRoaXMuX2NvbmZpZyEudmlldyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICBoYS1pY29uIHtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWNvbG9yKTtcbiAgICAgIH1cbiAgICAgIC5mbGV4IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIC5uYW1lIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgICAuY29udHJvbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuICAgICAgZ29vZ2xlLWNhc3QtbGF1bmNoZXIge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNTdlbTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIGhlaWdodDogMjRweDtcbiAgICAgICAgd2lkdGg6IDI0cHg7XG4gICAgICB9XG4gICAgICAuaW5hY3RpdmUge1xuICAgICAgICBwYWRkaW5nOiAwIDRweDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktY2FzdC1yb3dcIjogSHVpQ2FzdFJvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgVGVtcGxhdGVSZXN1bHQsXG4gIGN1c3RvbUVsZW1lbnQsXG4gIHByb3BlcnR5LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBEaXZpZGVyQ29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWRpdmlkZXItcm93XCIpXG5jbGFzcyBIdWlEaXZpZGVyUm93IGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIEVudGl0eVJvdyB7XG4gIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwcml2YXRlIF9jb25maWc/OiBEaXZpZGVyQ29uZmlnO1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGluIGNhcmQgY29uZmlndXJhdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0ge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgaGVpZ2h0OiBcIjFweFwiLFxuICAgICAgICBcImJhY2tncm91bmQtY29sb3JcIjogXCJ2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcilcIixcbiAgICAgIH0sXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLl9jb25maWcuc3R5bGUpLmZvckVhY2goKHByb3ApID0+IHtcbiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KHByb3AsIHRoaXMuX2NvbmZpZyEuc3R5bGVbcHJvcF0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICAke2VsfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1kaXZpZGVyLXJvd1wiOiBIdWlEaXZpZGVyUm93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBTZWN0aW9uQ29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zZWN0aW9uLXJvd1wiKVxuY2xhc3MgSHVpU2VjdGlvblJvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogU2VjdGlvbkNvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogU2VjdGlvbkNvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBpbiBjYXJkIGNvbmZpZ3VyYXRpb24uXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQgfCB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZykge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XG4gICAgICAke3RoaXMuX2NvbmZpZy5sYWJlbFxuICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFiZWxcIj4ke3RoaXMuX2NvbmZpZy5sYWJlbH08L2Rpdj5cbiAgICAgICAgICBgXG4gICAgICAgIDogaHRtbGBgfVxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHQge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAubGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDE2cHg7XG4gICAgICB9XG4gICAgICAuZGl2aWRlciB7XG4gICAgICAgIGhlaWdodDogMXB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIG9wYWNpdHk6IDAuMjU7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAtMTZweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAtMTZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zZWN0aW9uLXJvd1wiOiBIdWlTZWN0aW9uUm93O1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBUZW1wbGF0ZVJlc3VsdCxcbiAgY3VzdG9tRWxlbWVudCxcbiAgcHJvcGVydHksXG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRW50aXR5Um93LCBXZWJsaW5rQ29uZmlnIH0gZnJvbSBcIi4uL2VudGl0eS1yb3dzL3R5cGVzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvblwiO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS13ZWJsaW5rLXJvd1wiKVxuY2xhc3MgSHVpV2VibGlua1JvdyBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBFbnRpdHlSb3cge1xuICBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfY29uZmlnPzogV2VibGlua0NvbmZpZztcblxuICBwdWJsaWMgc2V0Q29uZmlnKGNvbmZpZzogV2VibGlua0NvbmZpZyk6IHZvaWQge1xuICAgIGlmICghY29uZmlnIHx8ICFjb25maWcudXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbmZpZ3VyYXRpb246ICd1cmwnIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgIGljb246IFwiaGFzczpsaW5rXCIsXG4gICAgICBuYW1lOiBjb25maWcudXJsLFxuICAgICAgLi4uY29uZmlnLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHwgdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8YVxuICAgICAgICBocmVmPSR7dGhpcy5fY29uZmlnLnVybH1cbiAgICAgICAgdGFyZ2V0PSR7dGhpcy5fY29uZmlnLnVybC5pbmRleE9mKFwiOi8vXCIpICE9PSAtMSA/IFwiX2JsYW5rXCIgOiBcIlwifVxuICAgICAgPlxuICAgICAgICA8aGEtaWNvbiAuaWNvbj1cIiR7dGhpcy5fY29uZmlnLmljb259XCI+PC9oYS1pY29uPlxuICAgICAgICA8ZGl2PiR7dGhpcy5fY29uZmlnLm5hbWV9PC9kaXY+XG4gICAgICA8L2E+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICB9XG4gICAgICBoYS1pY29uIHtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaXRlbS1pY29uLWNvbG9yKTtcbiAgICAgIH1cbiAgICAgIGRpdiB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktd2VibGluay1yb3dcIjogSHVpV2VibGlua1JvdztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgcHJvcGVydHksXG4gIFByb3BlcnR5VmFsdWVzLFxuICBjdXN0b21FbGVtZW50LFxuICBVcGRhdGluZ0VsZW1lbnQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgYXBwbHlUaGVtZXNPbkVsZW1lbnQgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kb20vYXBwbHlfdGhlbWVzX29uX2VsZW1lbnRcIjtcblxuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVDYXJkRWxlbWVudCB9IGZyb20gXCIuLi9jb21tb24vY3JlYXRlLWNhcmQtZWxlbWVudFwiO1xuaW1wb3J0IHsgTG92ZWxhY2VWaWV3Q29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktcGFuZWwtdmlld1wiKVxuZXhwb3J0IGNsYXNzIEhVSVBhbmVsVmlldyBleHRlbmRzIFVwZGF0aW5nRWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgQHByb3BlcnR5KCkgcHVibGljIGNvbmZpZz86IExvdmVsYWNlVmlld0NvbmZpZztcblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmRcIiwgXCJ2YXIoLS1sb3ZlbGFjZS1iYWNrZ3JvdW5kKVwiKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGUoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuICAgIGNvbnN0IGhhc3MgPSB0aGlzLmhhc3MhO1xuICAgIGNvbnN0IGhhc3NDaGFuZ2VkID0gY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiaGFzc1wiKTtcbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BlcnRpZXMuZ2V0KFwiaGFzc1wiKSBhcyB0aGlzW1wiaGFzc1wiXSB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjb25maWdDaGFuZ2VkID0gY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiY29uZmlnXCIpO1xuXG4gICAgaWYgKGNvbmZpZ0NoYW5nZWQpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZUNhcmQoKTtcbiAgICB9IGVsc2UgaWYgKGhhc3NDaGFuZ2VkKSB7XG4gICAgICAodGhpcy5sYXN0Q2hpbGQhIGFzIExvdmVsYWNlQ2FyZCkuaGFzcyA9IHRoaXMuaGFzcztcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBjb25maWdDaGFuZ2VkIHx8XG4gICAgICAoaGFzc0NoYW5nZWQgJiZcbiAgICAgICAgb2xkSGFzcyAmJlxuICAgICAgICAoaGFzcy50aGVtZXMgIT09IG9sZEhhc3MudGhlbWVzIHx8XG4gICAgICAgICAgaGFzcy5zZWxlY3RlZFRoZW1lICE9PSBvbGRIYXNzLnNlbGVjdGVkVGhlbWUpKVxuICAgICkge1xuICAgICAgYXBwbHlUaGVtZXNPbkVsZW1lbnQodGhpcywgaGFzcy50aGVtZXMsIHRoaXMuY29uZmlnIS50aGVtZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlQ2FyZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sYXN0Q2hpbGQpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQodGhpcy5sYXN0Q2hpbGQpO1xuICAgIH1cblxuICAgIGNvbnN0IGNhcmQ6IExvdmVsYWNlQ2FyZCA9IGNyZWF0ZUNhcmRFbGVtZW50KHRoaXMuY29uZmlnIS5jYXJkcyFbMF0pO1xuICAgIGNhcmQuaGFzcyA9IHRoaXMuaGFzcztcbiAgICBjYXJkLmlzUGFuZWwgPSB0cnVlO1xuICAgIHRoaXMuYXBwZW5kKGNhcmQpO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktcGFuZWwtdmlld1wiOiBIVUlQYW5lbFZpZXc7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBQcm9wZXJ0eURlY2xhcmF0aW9ucyxcbiAgVGVtcGxhdGVSZXN1bHQsXG59IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2VudGl0eS9oYS1zdGF0ZS1sYWJlbC1iYWRnZVwiO1xuLy8gVGhpcyBvbmUgaXMgZm9yIHR5cGVzXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbmltcG9ydCB7IEhhU3RhdGVMYWJlbEJhZGdlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvZW50aXR5L2hhLXN0YXRlLWxhYmVsLWJhZGdlXCI7XG5cbmltcG9ydCBhcHBseVRoZW1lc09uRWxlbWVudCBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RvbS9hcHBseV90aGVtZXNfb25fZWxlbWVudFwiO1xuXG5pbXBvcnQgeyBMb3ZlbGFjZVZpZXdDb25maWcsIExvdmVsYWNlQ2FyZENvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2xvdmVsYWNlXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuaW1wb3J0IHsgTG92ZWxhY2UsIExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ2FyZEVsZW1lbnQgfSBmcm9tIFwiLi4vY29tbW9uL2NyZWF0ZS1jYXJkLWVsZW1lbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVDYXJkU2l6ZSB9IGZyb20gXCIuLi9jb21tb24vY29tcHV0ZS1jYXJkLXNpemVcIjtcbmltcG9ydCB7IHNob3dFZGl0Q2FyZERpYWxvZyB9IGZyb20gXCIuLi9lZGl0b3IvY2FyZC1lZGl0b3Ivc2hvdy1lZGl0LWNhcmQtZGlhbG9nXCI7XG5pbXBvcnQgeyBIdWlFcnJvckNhcmQgfSBmcm9tIFwiLi4vY2FyZHMvaHVpLWVycm9yLWNhcmRcIjtcblxuaW1wb3J0IHsgY29tcHV0ZVJUTCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vdXRpbC9jb21wdXRlX3J0bFwiO1xuaW1wb3J0IHsgcHJvY2Vzc0NvbmZpZ0VudGl0aWVzIH0gZnJvbSBcIi4uL2NvbW1vbi9wcm9jZXNzLWNvbmZpZy1lbnRpdGllc1wiO1xuXG5sZXQgZWRpdENvZGVMb2FkZWQgPSBmYWxzZTtcblxuLy8gRmluZCBjb2x1bW4gd2l0aCA8IDUgZW50aXRpZXMsIGVsc2UgY29sdW1uIHdpdGggbG93ZXN0IGNvdW50XG5jb25zdCBnZXRDb2x1bW5JbmRleCA9IChjb2x1bW5FbnRpdHlDb3VudDogbnVtYmVyW10sIHNpemU6IG51bWJlcikgPT4ge1xuICBsZXQgbWluSW5kZXggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbkVudGl0eUNvdW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGNvbHVtbkVudGl0eUNvdW50W2ldIDwgNSkge1xuICAgICAgbWluSW5kZXggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChjb2x1bW5FbnRpdHlDb3VudFtpXSA8IGNvbHVtbkVudGl0eUNvdW50W21pbkluZGV4XSkge1xuICAgICAgbWluSW5kZXggPSBpO1xuICAgIH1cbiAgfVxuXG4gIGNvbHVtbkVudGl0eUNvdW50W21pbkluZGV4XSArPSBzaXplO1xuXG4gIHJldHVybiBtaW5JbmRleDtcbn07XG5cbmV4cG9ydCBjbGFzcyBIVUlWaWV3IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcbiAgcHVibGljIGxvdmVsYWNlPzogTG92ZWxhY2U7XG4gIHB1YmxpYyBjb2x1bW5zPzogbnVtYmVyO1xuICBwdWJsaWMgaW5kZXg/OiBudW1iZXI7XG4gIHByaXZhdGUgX2NhcmRzOiBBcnJheTxMb3ZlbGFjZUNhcmQgfCBIdWlFcnJvckNhcmQ+O1xuICBwcml2YXRlIF9iYWRnZXM6IEFycmF5PHsgZWxlbWVudDogSGFTdGF0ZUxhYmVsQmFkZ2U7IGVudGl0eUlkOiBzdHJpbmcgfT47XG5cbiAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCk6IFByb3BlcnR5RGVjbGFyYXRpb25zIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzczoge30sXG4gICAgICBsb3ZlbGFjZToge30sXG4gICAgICBjb2x1bW5zOiB7IHR5cGU6IE51bWJlciB9LFxuICAgICAgaW5kZXg6IHsgdHlwZTogTnVtYmVyIH0sXG4gICAgICBfY2FyZHM6IHt9LFxuICAgICAgX2JhZGdlczoge30sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fY2FyZHMgPSBbXTtcbiAgICB0aGlzLl9iYWRnZXMgPSBbXTtcbiAgfVxuXG4gIC8vIFB1YmxpYyB0byBtYWtlIGRlbW8gaGFwcHlcbiAgcHVibGljIGNyZWF0ZUNhcmRFbGVtZW50KGNhcmRDb25maWc6IExvdmVsYWNlQ2FyZENvbmZpZykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkRWxlbWVudChjYXJkQ29uZmlnKSBhcyBMb3ZlbGFjZUNhcmQ7XG4gICAgZWxlbWVudC5oYXNzID0gdGhpcy5oYXNzO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibGwtcmVidWlsZFwiLFxuICAgICAgKGV2KSA9PiB7XG4gICAgICAgIC8vIEluIGVkaXQgbW9kZSBsZXQgaXQgZ28gdG8gaHVpLXJvb3QgYW5kIHJlYnVpbGQgd2hvbGUgdmlldy5cbiAgICAgICAgaWYgKCF0aGlzLmxvdmVsYWNlIS5lZGl0TW9kZSkge1xuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRoaXMuX3JlYnVpbGRDYXJkKGVsZW1lbnQsIGNhcmRDb25maWcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICApO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB8IHZvaWQge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgJHt0aGlzLnJlbmRlclN0eWxlcygpfVxuICAgICAgPGRpdiBpZD1cImJhZGdlc1wiPjwvZGl2PlxuICAgICAgPGRpdiBpZD1cImNvbHVtbnNcIj48L2Rpdj5cbiAgICAgICR7dGhpcy5sb3ZlbGFjZSEuZWRpdE1vZGVcbiAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgPGhhLWZhYlxuICAgICAgICAgICAgICBpY29uPVwiaGFzczpwbHVzXCJcbiAgICAgICAgICAgICAgdGl0bGU9XCIke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5lZGl0b3IuZWRpdF9jYXJkLmFkZFwiXG4gICAgICAgICAgICAgICl9XCJcbiAgICAgICAgICAgICAgQGNsaWNrPVwiJHt0aGlzLl9hZGRDYXJkfVwiXG4gICAgICAgICAgICAgIGNsYXNzPVwiJHtjbGFzc01hcCh7XG4gICAgICAgICAgICAgICAgcnRsOiBjb21wdXRlUlRMKHRoaXMuaGFzcyEpLFxuICAgICAgICAgICAgICB9KX1cIlxuICAgICAgICAgICAgPjwvaGEtZmFiPlxuICAgICAgICAgIGBcbiAgICAgICAgOiBcIlwifVxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyU3R5bGVzKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxzdHlsZT5cbiAgICAgICAgOmhvc3Qge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDRweCAwO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbG92ZWxhY2UtYmFja2dyb3VuZCk7XG4gICAgICAgIH1cblxuICAgICAgICAjYmFkZ2VzIHtcbiAgICAgICAgICBtYXJnaW46IDhweCAxNnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogODUlO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgICNjb2x1bW5zIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuY29sdW1uIHtcbiAgICAgICAgICBmbGV4LWJhc2lzOiAwO1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDUwMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbHVtbiA+ICoge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbjogNHB4IDRweCA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICBoYS1mYWIge1xuICAgICAgICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICAgIGJvdHRvbTogMTZweDtcbiAgICAgICAgICByaWdodDogMTZweDtcbiAgICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaGEtZmFiLnJ0bCB7XG4gICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgcmlnaHQ6IGF1dG87XG4gICAgICAgICAgbGVmdDogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA1MDBweCkge1xuICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMDtcbiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmNvbHVtbiA+ICoge1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDU5OXB4KSB7XG4gICAgICAgICAgLmNvbHVtbiB7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDYwMHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgPC9zdHlsZT5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG5cbiAgICBjb25zdCBoYXNzID0gdGhpcy5oYXNzITtcbiAgICBjb25zdCBsb3ZlbGFjZSA9IHRoaXMubG92ZWxhY2UhO1xuXG4gICAgaWYgKGxvdmVsYWNlLmVkaXRNb2RlICYmICFlZGl0Q29kZUxvYWRlZCkge1xuICAgICAgZWRpdENvZGVMb2FkZWQgPSB0cnVlO1xuICAgICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwiaHVpLXZpZXctZWRpdGFibGVcIiAqLyBcIi4vaHVpLXZpZXctZWRpdGFibGVcIik7XG4gICAgfVxuXG4gICAgY29uc3QgaGFzc0NoYW5nZWQgPSBjaGFuZ2VkUHJvcGVydGllcy5oYXMoXCJoYXNzXCIpO1xuICAgIGxldCBlZGl0TW9kZUNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgY29uZmlnQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImluZGV4XCIpKSB7XG4gICAgICBjb25maWdDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcyhcImxvdmVsYWNlXCIpKSB7XG4gICAgICBjb25zdCBvbGRMb3ZlbGFjZSA9IGNoYW5nZWRQcm9wZXJ0aWVzLmdldChcImxvdmVsYWNlXCIpIGFzIExvdmVsYWNlO1xuICAgICAgZWRpdE1vZGVDaGFuZ2VkID1cbiAgICAgICAgIW9sZExvdmVsYWNlIHx8IGxvdmVsYWNlLmVkaXRNb2RlICE9PSBvbGRMb3ZlbGFjZS5lZGl0TW9kZTtcbiAgICAgIGNvbmZpZ0NoYW5nZWQgPSAhb2xkTG92ZWxhY2UgfHwgbG92ZWxhY2UuY29uZmlnICE9PSBvbGRMb3ZlbGFjZS5jb25maWc7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ0NoYW5nZWQpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZUJhZGdlcyhsb3ZlbGFjZS5jb25maWcudmlld3NbdGhpcy5pbmRleCFdKTtcbiAgICB9IGVsc2UgaWYgKGhhc3NDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9iYWRnZXMuZm9yRWFjaCgoYmFkZ2UpID0+IHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50LCBlbnRpdHlJZCB9ID0gYmFkZ2U7XG4gICAgICAgIGVsZW1lbnQuaGFzcyA9IGhhc3M7XG4gICAgICAgIGVsZW1lbnQuc3RhdGUgPSBoYXNzLnN0YXRlc1tlbnRpdHlJZF07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnQ2hhbmdlZCB8fCBlZGl0TW9kZUNoYW5nZWQgfHwgY2hhbmdlZFByb3BlcnRpZXMuaGFzKFwiY29sdW1uc1wiKSkge1xuICAgICAgdGhpcy5fY3JlYXRlQ2FyZHMobG92ZWxhY2UuY29uZmlnLnZpZXdzW3RoaXMuaW5kZXghXSk7XG4gICAgfSBlbHNlIGlmIChoYXNzQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fY2FyZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50Lmhhc3MgPSB0aGlzLmhhc3M7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BlcnRpZXMuZ2V0KFwiaGFzc1wiKSBhcyB0aGlzW1wiaGFzc1wiXSB8IHVuZGVmaW5lZDtcblxuICAgIGlmIChcbiAgICAgIGNvbmZpZ0NoYW5nZWQgfHxcbiAgICAgIGVkaXRNb2RlQ2hhbmdlZCB8fFxuICAgICAgKGhhc3NDaGFuZ2VkICYmXG4gICAgICAgIG9sZEhhc3MgJiZcbiAgICAgICAgKGhhc3MudGhlbWVzICE9PSBvbGRIYXNzLnRoZW1lcyB8fFxuICAgICAgICAgIGhhc3Muc2VsZWN0ZWRUaGVtZSAhPT0gb2xkSGFzcy5zZWxlY3RlZFRoZW1lKSlcbiAgICApIHtcbiAgICAgIGFwcGx5VGhlbWVzT25FbGVtZW50KFxuICAgICAgICB0aGlzLFxuICAgICAgICBoYXNzLnRoZW1lcyxcbiAgICAgICAgbG92ZWxhY2UuY29uZmlnLnZpZXdzW3RoaXMuaW5kZXghXS50aGVtZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hZGRDYXJkKCk6IHZvaWQge1xuICAgIHNob3dFZGl0Q2FyZERpYWxvZyh0aGlzLCB7XG4gICAgICBsb3ZlbGFjZTogdGhpcy5sb3ZlbGFjZSEsXG4gICAgICBwYXRoOiBbdGhpcy5pbmRleCFdLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlQmFkZ2VzKGNvbmZpZzogTG92ZWxhY2VWaWV3Q29uZmlnKTogdm9pZCB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXCJiYWRnZXNcIikhO1xuXG4gICAgd2hpbGUgKHJvb3QubGFzdENoaWxkKSB7XG4gICAgICByb290LnJlbW92ZUNoaWxkKHJvb3QubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmJhZGdlcyB8fCAhQXJyYXkuaXNBcnJheShjb25maWcuYmFkZ2VzKSkge1xuICAgICAgcm9vdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB0aGlzLl9iYWRnZXMgPSBbXTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtZW50czogSFVJVmlld1tcIl9iYWRnZXNcIl0gPSBbXTtcbiAgICBjb25zdCBiYWRnZXMgPSBwcm9jZXNzQ29uZmlnRW50aXRpZXMoY29uZmlnLmJhZGdlcyk7XG4gICAgZm9yIChjb25zdCBiYWRnZSBvZiBiYWRnZXMpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaGEtc3RhdGUtbGFiZWwtYmFkZ2VcIik7XG4gICAgICBjb25zdCBlbnRpdHlJZCA9IGJhZGdlLmVudGl0eTtcbiAgICAgIGVsZW1lbnQuaGFzcyA9IHRoaXMuaGFzcztcbiAgICAgIGVsZW1lbnQuc3RhdGUgPSB0aGlzLmhhc3MhLnN0YXRlc1tlbnRpdHlJZF07XG4gICAgICBlbGVtZW50Lm5hbWUgPSBiYWRnZS5uYW1lO1xuICAgICAgZWxlbWVudC5pY29uID0gYmFkZ2UuaWNvbjtcbiAgICAgIGVsZW1lbnQuaW1hZ2UgPSBiYWRnZS5pbWFnZTtcbiAgICAgIGVsZW1lbnRzLnB1c2goeyBlbGVtZW50LCBlbnRpdHlJZCB9KTtcbiAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICAgIHRoaXMuX2JhZGdlcyA9IGVsZW1lbnRzO1xuICAgIHJvb3Quc3R5bGUuZGlzcGxheSA9IGVsZW1lbnRzLmxlbmd0aCA+IDAgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUNhcmRzKGNvbmZpZzogTG92ZWxhY2VWaWV3Q29uZmlnKTogdm9pZCB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXCJjb2x1bW5zXCIpITtcblxuICAgIHdoaWxlIChyb290Lmxhc3RDaGlsZCkge1xuICAgICAgcm9vdC5yZW1vdmVDaGlsZChyb290Lmxhc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcgfHwgIWNvbmZpZy5jYXJkcyB8fCAhQXJyYXkuaXNBcnJheShjb25maWcuY2FyZHMpKSB7XG4gICAgICB0aGlzLl9jYXJkcyA9IFtdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRzOiBMb3ZlbGFjZUNhcmRbXSA9IFtdO1xuICAgIGNvbnN0IGVsZW1lbnRzVG9BcHBlbmQ6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgICBjb25maWcuY2FyZHMuZm9yRWFjaCgoY2FyZENvbmZpZywgY2FyZEluZGV4KSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5jcmVhdGVDYXJkRWxlbWVudChjYXJkQ29uZmlnKTtcbiAgICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG5cbiAgICAgIGlmICghdGhpcy5sb3ZlbGFjZSEuZWRpdE1vZGUpIHtcbiAgICAgICAgZWxlbWVudHNUb0FwcGVuZC5wdXNoKGVsZW1lbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLWNhcmQtb3B0aW9uc1wiKTtcbiAgICAgIHdyYXBwZXIuaGFzcyA9IHRoaXMuaGFzcztcbiAgICAgIHdyYXBwZXIubG92ZWxhY2UgPSB0aGlzLmxvdmVsYWNlO1xuICAgICAgd3JhcHBlci5wYXRoID0gW3RoaXMuaW5kZXghLCBjYXJkSW5kZXhdO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgIGVsZW1lbnRzVG9BcHBlbmQucHVzaCh3cmFwcGVyKTtcbiAgICB9KTtcblxuICAgIGxldCBjb2x1bW5zOiBIVE1MRWxlbWVudFtdW10gPSBbXTtcbiAgICBjb25zdCBjb2x1bW5FbnRpdHlDb3VudDogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucyE7IGkrKykge1xuICAgICAgY29sdW1ucy5wdXNoKFtdKTtcbiAgICAgIGNvbHVtbkVudGl0eUNvdW50LnB1c2goMCk7XG4gICAgfVxuXG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjYXJkU2l6ZSA9IGNvbXB1dGVDYXJkU2l6ZShlbCk7XG4gICAgICAvLyBFbGVtZW50IHRvIGFwcGVuZCBtaWdodCBiZSB0aGUgd3JhcHBlZCBjYXJkIHdoZW4gd2UncmUgZWRpdGluZy5cbiAgICAgIGNvbHVtbnNbZ2V0Q29sdW1uSW5kZXgoY29sdW1uRW50aXR5Q291bnQsIGNhcmRTaXplKV0ucHVzaChcbiAgICAgICAgZWxlbWVudHNUb0FwcGVuZFtpbmRleF1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgZW1wdHkgY29sdW1uc1xuICAgIGNvbHVtbnMgPSBjb2x1bW5zLmZpbHRlcigodmFsKSA9PiB2YWwubGVuZ3RoID4gMCk7XG5cbiAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgY29uc3QgY29sdW1uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29sdW1uRWwuY2xhc3NMaXN0LmFkZChcImNvbHVtblwiKTtcbiAgICAgIGNvbHVtbi5mb3JFYWNoKChlbCkgPT4gY29sdW1uRWwuYXBwZW5kQ2hpbGQoZWwpKTtcbiAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29sdW1uRWwpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZHMgPSBlbGVtZW50cztcbiAgfVxuXG4gIHByaXZhdGUgX3JlYnVpbGRDYXJkKFxuICAgIGNhcmRFbFRvUmVwbGFjZTogTG92ZWxhY2VDYXJkLFxuICAgIGNvbmZpZzogTG92ZWxhY2VDYXJkQ29uZmlnXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG5ld0NhcmRFbCA9IHRoaXMuY3JlYXRlQ2FyZEVsZW1lbnQoY29uZmlnKTtcbiAgICBjYXJkRWxUb1JlcGxhY2UucGFyZW50RWxlbWVudCEucmVwbGFjZUNoaWxkKG5ld0NhcmRFbCwgY2FyZEVsVG9SZXBsYWNlKTtcbiAgICB0aGlzLl9jYXJkcyA9IHRoaXMuX2NhcmRzIS5tYXAoKGN1ckNhcmRFbCkgPT5cbiAgICAgIGN1ckNhcmRFbCA9PT0gY2FyZEVsVG9SZXBsYWNlID8gbmV3Q2FyZEVsIDogY3VyQ2FyZEVsXG4gICAgKTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLXZpZXdcIjogSFVJVmlldztcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJodWktdmlld1wiLCBIVUlWaWV3KTtcbiIsImltcG9ydCBcIkBwb2x5bWVyL2lyb24taW1hZ2UvaXJvbi1pbWFnZVwiO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9odG1sLXRhZ1wiO1xuaW1wb3J0IHsgUG9seW1lckVsZW1lbnQgfSBmcm9tIFwiQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWVsZW1lbnRcIjtcblxuaW1wb3J0IHsgRXZlbnRzTWl4aW4gfSBmcm9tIFwiLi4vLi4vbWl4aW5zL2V2ZW50cy1taXhpblwiO1xuXG4vKlxuICogQGFwcGxpZXNNaXhpbiBFdmVudHNNaXhpblxuICovXG5jbGFzcyBIYUVudGl0eU1hcmtlciBleHRlbmRzIEV2ZW50c01peGluKFBvbHltZXJFbGVtZW50KSB7XG4gIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8c3R5bGUgaW5jbHVkZT1cImlyb24tcG9zaXRpb25pbmdcIj48L3N0eWxlPlxuICAgICAgPHN0eWxlPlxuICAgICAgICAubWFya2VyIHtcbiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICB3aWR0aDogMi41ZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGhlaWdodDogMi41ZW07XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDIuNWVtO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGJvcmRlcjogMC4xZW0gc29saWRcbiAgICAgICAgICAgIHZhcigtLWhhLW1hcmtlci1jb2xvciwgdmFyKC0tZGVmYXVsdC1wcmltYXJ5LWNvbG9yKSk7XG4gICAgICAgICAgY29sb3I6IHJnYig3NiwgNzYsIDc2KTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuICAgICAgICBpcm9uLWltYWdlIHtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIH1cbiAgICAgIDwvc3R5bGU+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJtYXJrZXJcIj5cbiAgICAgICAgPHRlbXBsYXRlIGlzPVwiZG9tLWlmXCIgaWY9XCJbW2VudGl0eU5hbWVdXVwiXG4gICAgICAgICAgPltbZW50aXR5TmFtZV1dPC90ZW1wbGF0ZVxuICAgICAgICA+XG4gICAgICAgIDx0ZW1wbGF0ZSBpcz1cImRvbS1pZlwiIGlmPVwiW1tlbnRpdHlQaWN0dXJlXV1cIj5cbiAgICAgICAgICA8aXJvbi1pbWFnZVxuICAgICAgICAgICAgc2l6aW5nPVwiY292ZXJcIlxuICAgICAgICAgICAgY2xhc3M9XCJmaXRcIlxuICAgICAgICAgICAgc3JjPVwiW1tlbnRpdHlQaWN0dXJlXV1cIlxuICAgICAgICAgID48L2lyb24taW1hZ2U+XG4gICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBoYXNzOiB7XG4gICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgIH0sXG5cbiAgICAgIGVudGl0eUlkOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICB9LFxuXG4gICAgICBlbnRpdHlOYW1lOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICB9LFxuXG4gICAgICBlbnRpdHlQaWN0dXJlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICByZWFkeSgpIHtcbiAgICBzdXBlci5yZWFkeSgpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldikgPT4gdGhpcy5iYWRnZVRhcChldikpO1xuICB9XG5cbiAgYmFkZ2VUYXAoZXYpIHtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAodGhpcy5lbnRpdHlJZCkge1xuICAgICAgdGhpcy5maXJlKFwiaGFzcy1tb3JlLWluZm9cIiwgeyBlbnRpdHlJZDogdGhpcy5lbnRpdHlJZCB9KTtcbiAgICB9XG4gIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwiaGEtZW50aXR5LW1hcmtlclwiLCBIYUVudGl0eU1hcmtlcik7XG4iLCJpbXBvcnQgeyBUZW1wbGF0ZVJlc3VsdCB9IGZyb20gXCJsaXQtZWxlbWVudFwiO1xuXG5pbnRlcmZhY2UgTG9hZGVkUm91bmRTbGlkZXIge1xuICByb3VuZFNsaWRlclN0eWxlOiBUZW1wbGF0ZVJlc3VsdDtcbiAgalF1ZXJ5OiBhbnk7XG59XG5cbmxldCBsb2FkZWQ6IFByb21pc2U8TG9hZGVkUm91bmRTbGlkZXI+O1xuXG5leHBvcnQgY29uc3QgbG9hZFJvdW5kc2xpZGVyID0gYXN5bmMgKCk6IFByb21pc2U8TG9hZGVkUm91bmRTbGlkZXI+ID0+IHtcbiAgaWYgKCFsb2FkZWQpIHtcbiAgICBsb2FkZWQgPSBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJqcXVlcnktcm91bmRzbGlkZXJcIiAqLyBcIi4vanF1ZXJ5LnJvdW5kc2xpZGVyXCIpO1xuICB9XG4gIHJldHVybiBsb2FkZWQ7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQTRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN0RUE7QUFBQTtBQUFBOzs7O0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ25EQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMxQ0E7QUFBQTtBQUFBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyQ0E7QUFFQTs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFDQTtBQUVBO0FBSUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBOzs7Ozs7Ozs7Ozs7O0FDTkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBOzs7Ozs7Ozs7Ozs7O0FDWkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQy9CQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ05BOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWEE7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7OztBQUdBOzs7Ozs7Ozs7Ozs7O0FBMENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7O0FBdEVBO0FBQ0E7QUFRQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBREE7QUF2QkE7QUEyQkE7Ozs7QUF4Q0E7QUFDQTtBQXlFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkZBO0FBU0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUlBOztBQXVHQTtBQXJHQTtBQUFBO0FBQ0E7QUE2QkE7OztBQUFBO0FBRUE7QUFDQTtBQTBDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQXpHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFKQTtBQURBO0FBQ0E7QUEyR0E7QUFBQTtBQTNHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2JBO0FBS0E7QUFJQTtBQUFBO0FBQUE7O0FBWUE7QUFYQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFRQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlCQTtBQUNBO0FBRUE7QUFFQTtBQUVBOzs7O0FBR0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFaQTtBQWNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQXJEQTtBQUNBO0FBdURBOzs7Ozs7Ozs7Ozs7QUNoRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCQTtBQUVBO0FBQ0E7QUFXQTtBQUlBO0FBQUE7QUFLQTtBQUtBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFHQTtBQUFBO0FBSEE7QUFVQTtBQUlBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0RBO0FBQ0E7QUFvQkE7QUFLQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFEQTtBQUhBO0FBWUE7QUFJQTtBQUFBOzs7Ozs7Ozs7Ozs7O0FDdkRBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3hDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTs7Ozs7Ozs7Ozs7OztBQ0hBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ0xBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBd0VBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBS0E7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQURBO0FBTEE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBOzs7Ozs7Ozs7Ozs7Ozs7OztBQzlCQTtBQVNBO0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuQkE7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQUE7O0FBMlJBO0FBMVJBOzs7O0FBQ0E7O0FBQUE7QUFDQTs7OztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBSUE7QUFxQkE7QUFXQTtBQXVCQTtBQXhEQTtBQUNBO0FBU0E7QUFDQTtBQUVBO0FBU0E7QUFHQTtBQVVBO0FBbUJBO0FBZkE7QUFDQTtBQVdBO0FBREE7QUFDQTtBQUdBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBc0dBOzs7QUFBQTtBQWhSQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFkQTtBQURBO0FBQ0E7QUEyUkE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqVUE7QUFDQTtBQUNBO0FBUUE7QUFBQTtBQUFBOztBQXNEQTtBQWpEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDeEVBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQUE7QUFBQTs7QUE0SUE7QUEzSUE7Ozs7QUFDQTs7QUFBQTtBQUNBOzs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBa0JBO0FBSUE7QUFuQkE7QUFhQTtBQVJBO0FBTUE7QUFPQTtBQUFBO0FBS0E7QUFFQTtBQUFBO0FBQ0E7QUE0QkE7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWpJQTtBQUFBO0FBQUE7QUFWQTtBQURBO0FBQ0E7QUE0SUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZLQTtBQVdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUFBOztBQTZMQTtBQTVMQTs7OztBQUNBOztBQUFBO0FBQ0E7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQXFCQTtBQU9BO0FBckJBO0FBV0E7QUFMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUE2QkE7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQTdLQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFqQkE7QUFEQTtBQUNBO0FBNkxBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN05BO0FBQ0E7QUFNQTtBQUVBO0FBQUE7QUFBQTs7QUFtSkE7QUExSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3SkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTs7QUF5Q0E7QUFwQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFBQTtBQUNBO0FBV0E7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBckNBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQXlDQTtBQUFBO0FBekNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1QkE7QUFVQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFXQTs7QUF1UEE7QUFqUUE7Ozs7QUFDQTs7QUFBQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQUtBO0FBVUE7QUFPQTtBQWxCQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBNEVBOzs7QUFBQTtBQXhQQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFaQTtBQURBO0FBQ0E7QUFrUUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25TQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFBQTs7QUErTUE7QUE5TUE7Ozs7QUFDQTs7QUFBQTtBQUNBOzs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQURBO0FBQUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBaUNBOzs7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBZ0JBO0FBVUE7QUFnQkE7QUFqQ0E7QUFJQTtBQURBO0FBQ0E7QUFLQTtBQVVBO0FBV0E7QUFSQTtBQUlBO0FBVUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBcE1BO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQVpBO0FBREE7QUFDQTtBQStNQTtBQUFBO0FBL01BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDOUJBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUF5REE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBUEE7QUFTQTs7Ozs7Ozs7Ozs7O0FBbEZBO0FBQ0E7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBK0JBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFSQTtBQVVBOzs7O0FBdkRBO0FBQ0E7QUFzRkE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hHQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7O0FBa0NBO0FBakNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBa0JBO0FBQ0E7QUFBQTtBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQ0E7QUFVQTtBQUdBO0FBSUE7QUFBQTtBQUFBOztBQXVFQTtBQXRFQTs7OztBQUNBOztBQUFBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQU1BO0FBREE7QUFDQTtBQU1BO0FBRUE7QUFBQTtBQUNBO0FBbUJBOzs7QUFBQTtBQTdEQTtBQUFBO0FBQUE7QUFUQTtBQURBO0FBQ0E7QUF1RUE7QUFBQTtBQXZFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQTNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBQ0E7Ozs7QUEzQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSkE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7O0FBcVJBO0FBcFJBOzs7O0FBQ0E7O0FBQUE7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQVNBO0FBaUJBO0FBUUE7QUE5QkE7QUFjQTtBQWNBO0FBQ0E7QUFDQTtBQWVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFnR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM1FBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQVhBO0FBREE7QUFDQTtBQXFSQTtBQUFBO0FBclJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0JBO0FBRUE7QUFXQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQWFBO0FBVUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTs7QUF1WUE7QUF4YUE7Ozs7QUFDQTs7QUFBQTtBQUNBOzs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTs7Ozs7QUFDQTs7QUFBQTtBQUlBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQThDQTs7O0FBQUE7QUE5WkE7QUFBQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBR0E7QUFEQTtBQUNBO0FBaEJBO0FBREE7QUFDQTtBQXlhQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNjQTtBQVNBO0FBR0E7QUFDQTtBQUtBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFjQTs7QUFpSEE7QUE5SEE7Ozs7QUFDQTs7QUFBQTtBQUNBOzs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQURBO0FBQ0E7QUFLQTtBQUVBOzs7O0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUVBOzs7Ozs7QUFDQTs7OztBQUVBOztBQUFBO0FBQ0E7QUFDQTs7QUFBQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUF3QkE7OztBQUFBO0FBakhBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQWhCQTtBQURBO0FBQ0E7QUErSEE7QUFBQTtBQS9IQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckJBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTs7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTs7QUFiQTtBQUNBO0FBY0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25CQTtBQVVBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUFBOztBQTJFQTtBQTFFQTs7OztBQUNBOztBQUFBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVNBO0FBSEE7QUFHQTtBQUtBO0FBRUE7QUFBQTtBQUNBO0FBY0E7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBMURBO0FBQUE7QUFBQTtBQWhCQTtBQURBO0FBQ0E7QUEyRUE7QUFBQTtBQTNFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCQTtBQVVBO0FBT0E7QUFBQTtBQUFBOztBQWlGQTtBQTVFQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFvQkE7QUFMQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBRUE7QUFBQTtBQUNBO0FBY0E7OztBQUFBO0FBL0VBO0FBQUE7QUFBQTtBQURBO0FBREE7QUFDQTtBQWlGQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xHQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7O0FBNkpBO0FBNUpBOzs7O0FBQ0E7O0FBQUE7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQVNBO0FBU0E7QUFWQTtBQUNBO0FBUUE7QUFDQTtBQUtBO0FBRUE7QUFBQTtBQUNBO0FBc0NBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQS9JQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFmQTtBQURBO0FBQ0E7QUE2SkE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxTEE7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBQUE7O0FBMk9BO0FBMU9BOzs7O0FBQ0E7O0FBQUE7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFTQTtBQW1CQTtBQUlBO0FBS0E7QUFqQ0E7QUFFQTtBQUNBO0FBRUE7QUFnQkE7QUFNQTtBQUFBO0FBS0E7QUFBQTtBQU1BO0FBRUE7QUFJQTtBQUVBO0FBS0E7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQVFBO0FBUUE7QUFUQTtBQUNBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBOENBOzs7QUFBQTtBQTdOQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFmQTtBQURBO0FBQ0E7QUEyT0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3UUE7QUFZQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7O0FBbU1BO0FBbE1BOzs7O0FBQ0E7O0FBQUE7QUFDQTs7OztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQXdDQTtBQWZBO0FBTUE7QUFEQTtBQUNBO0FBYUE7QUFFQTtBQUFBO0FBQ0E7QUFzRUE7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeExBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQVpBO0FBREE7QUFDQTtBQW1NQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbk9BO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7O0FBZ1JBO0FBL1FBOzs7O0FBQ0E7O0FBQUE7QUFDQTs7OztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFrQkE7QUFBQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTs7Ozs7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQXlGQTs7O0FBQUE7QUFyUUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBZEE7QUFEQTtBQUNBO0FBZ1JBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN1pBO0FBU0E7QUFFQTtBQUVBO0FBQ0E7QUFJQTtBQVVBO0FBQUE7QUFBQTs7QUFxUkE7QUFwUkE7Ozs7QUFDQTs7QUFBQTtBQUNBOzs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBU0E7QUFTQTtBQTZCQTtBQThDQTtBQWxFQTtBQUFBO0FBc0JBO0FBTUE7QUFRQTtBQTRCQTtBQXBCQTtBQUFBO0FBeUJBO0FBRUE7QUFBQTtBQUNBO0FBNkRBOzs7QUFBQTtBQUVBOzs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExUUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBaEJBO0FBREE7QUFDQTtBQXFSQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pUQTtBQUVBO0FBTUE7QUFBQTtBQUFBOztBQTZGQTtBQTVGQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFPQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBSEE7QUFNQTtBQUlBO0FBQUE7QUFDQTtBQVdBOzs7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyR0E7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTs7QUEraEJBO0FBOWhCQTs7OztBQUNBOztBQUFBO0FBQ0E7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQWdCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQUNBO0FBT0E7QUFzQkE7QUFZQTtBQVdBO0FBTUE7QUF0REE7QUFDQTtBQUNBO0FBQ0E7QUFpQkE7QUFZQTtBQUtBO0FBRUE7QUFDQTtBQU1BO0FBTUE7QUFDQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7Ozs7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTs7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUlBOztBQUFBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFZQTs7Ozs7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQW9NQTtBQXBoQkE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBaEJBO0FBREE7QUFDQTtBQStoQkE7QUFBQTtBQS9oQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdERBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTs7QUFrQ0E7QUFqQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFpQkE7QUFDQTtBQUFBO0FBUUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0NBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTs7QUEwV0E7QUF6V0E7Ozs7QUFDQTs7QUFBQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFZQTtBQW9CQTtBQVlBO0FBY0E7QUE0REE7QUF0SEE7QUFTQTtBQVlBO0FBSUE7QUFTQTtBQUlBO0FBUUE7QUFJQTtBQVlBO0FBcURBO0FBNUNBO0FBUUE7QUFVQTtBQVFBO0FBT0E7QUFRQTtBQXZDQTtBQUlBO0FBS0E7QUFTQTtBQVFBO0FBT0E7QUFnQkE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQWlJQTs7O0FBQUE7QUFoV0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBWEE7QUFEQTtBQUNBO0FBMFdBO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0FDemFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaEJBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ1RBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNKQTtBQUFBO0FBQUE7QUFBQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7OztBQ25HQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM1SEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7OztBQzVGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlJQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBVUE7QUFBQTtBQVFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMxTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNUQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3hDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN0QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSUE7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBckJBO0FBQUE7QUFBQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQVNBO0FBRUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFKQTtBQU1BOzs7QUFRQTtBQUVBOzs7QUFRQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFRQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7O0FDNWFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFXQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzlEQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7QUN0QkE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvQkE7Ozs7Ozs7Ozs7Ozs7QUNaQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7O0FDdENBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pCQTtBQVdBO0FBSUE7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUFBOztBQXFEQTtBQTlDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBRkE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFVQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkRBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUxBO0FBREE7QUFDQTtBQXFEQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUVBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUtBOztBQThHQTtBQTVHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUF3QkE7QUFaQTtBQUlBO0FBQ0E7QUFDQTtBQWFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBOENBOzs7QUFBQTtBQWpIQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUE4R0E7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6SUE7QUFFQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBQUE7QUFBQTs7QUEyTkE7QUE1TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBR0E7QUFvQkE7QUFNQTtBQWpDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQWVBO0FBRkE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUNBO0FBQ0E7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUVBOzs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTs7QUFBQTs7Ozs7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQTRCQTs7O0FBQUE7QUF6TkE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBdkJBO0FBREE7QUFDQTtBQTJOQTtBQUFBO0FBM05BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM0JBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7O0FBcUdBO0FBbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5HQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBS0E7QUFFQTtBQUFBO0FBQUE7QUFaQTtBQURBO0FBQ0E7QUFxR0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVIQTtBQVdBO0FBQUE7QUFBQTs7QUFxQ0E7QUFsQ0E7QUFDQTtBQUtBO0FBRUE7QUFBQTtBQUNBO0FBd0JBOzs7QUFBQTtBQW5DQTtBQUFBO0FBQUE7QUFEQTtBQURBO0FBQ0E7QUFxQ0E7QUFBQTtBQXJDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYQTtBQVVBO0FBR0E7QUFBQTtBQUFBOztBQWdCQTtBQWJBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUtBOzs7QUFBQTtBQWRBO0FBQUE7QUFBQTtBQURBO0FBREE7QUFDQTtBQWdCQTtBQUFBO0FBaEJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDYkE7QUFVQTtBQUFBO0FBQUE7O0FBaUJBO0FBaEJBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQVFBOzs7QUFBQTtBQWhCQTtBQURBO0FBQ0E7QUFpQkE7QUFBQTtBQWpCQTs7Ozs7Ozs7Ozs7Ozs7QUNWQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFMQTtBQU9BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0JBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFJQTtBQUVBO0FBSUE7QUFFQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBR0E7QUFFQTtBQUlBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFFQTtBQUlBO0FBRUE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQUE7QUFJQTtBQUNBO0FBR0E7QUFBQTtBQUlBO0FBR0E7QUFBQTtBQUdBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBRUE7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFRQTtBQU9BO0FBQUE7QUFJQTtBQUtBO0FBQ0E7QUFFQTtBQUdBO0FBQUE7QUFHQTtBQUVBOzs7Ozs7Ozs7Ozs7O0FDcE1BO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUxBO0FBT0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMvQkE7QUFBQTtBQUFBO0FBQUE7QUFVQTtBQUNBO0FBTUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2pDQTtBQUFBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFMQTtBQU9BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6Q0E7QUFJQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7O0FBd0RBO0FBdERBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBOzs7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFRQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9FQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBOztBQTJDQTtBQXZDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBU0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFLQTs7O0FBQUE7QUF4Q0E7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQUNBO0FBMkNBO0FBQUE7QUEzQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkJBO0FBVUE7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7O0FBMkRBO0FBdkRBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQWdCQTtBQUVBO0FBQUE7QUFDQTtBQVVBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXpEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUEyREE7QUFBQTtBQTNEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuQkE7QUFVQTtBQU1BO0FBQUE7QUFBQTs7QUF1REE7QUFoREE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVNBO0FBRUE7QUFBQTtBQUNBO0FBTUE7OztBQUFBO0FBbkRBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQXVEQTtBQUFBO0FBdkRBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hCQTtBQVNBO0FBQ0E7QUFFQTtBQUdBO0FBR0E7QUFBQTtBQUFBOztBQWdEQTtBQTNDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQVFBO0FBSEE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQTdDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQURBO0FBQ0E7QUFnREE7QUFBQTtBQWhEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCQTtBQVdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFBQTs7QUE4REE7QUExREE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFVQTtBQUVBO0FBQUE7QUFDQTtBQUtBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQTVEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUE4REE7QUFBQTtBQTlEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RCQTtBQVdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFBQTtBQUFBOztBQXdFQTtBQXBFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQWFBO0FBTEE7QUFLQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBU0E7OztBQUFBO0FBdEVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTtBQXdFQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0ZBO0FBV0E7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUFBO0FBQUE7O0FBcURBO0FBaERBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBUUE7QUFFQTtBQUFBO0FBQ0E7QUFLQTs7O0FBQUE7QUFuREE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBcURBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pFQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBQUE7QUFBQTs7QUE4REE7QUF6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFjQTtBQVhBO0FBY0E7QUFFQTtBQUFBO0FBQ0E7QUFNQTs7O0FBQUE7QUE1REE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBOERBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BGQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFBQTs7QUE4REE7QUF6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFpQkE7QUFkQTtBQVlBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBNURBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQThEQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xGQTtBQVNBO0FBQ0E7QUFHQTtBQU1BO0FBQ0E7QUFHQTtBQUFBO0FBQUE7O0FBa0dBO0FBOUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBYUE7QUFpQkE7QUEzQkE7QUFZQTtBQUlBO0FBR0E7QUFKQTtBQUNBO0FBRUE7QUFDQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQWhHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUFrR0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDekhBO0FBV0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFBQTtBQUFBOztBQTBJQTtBQWpJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBR0E7QUFFQTtBQW9DQTtBQWhDQTtBQW9DQTtBQUVBO0FBQUE7QUFDQTtBQWFBOzs7QUFBQTtBQUVBOzs7Ozs7QUFDQTtBQUNBOztBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBR0E7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF4SUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBMElBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoS0E7QUFVQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTs7QUEyR0E7QUF0R0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFhQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBZUE7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBekdBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQTJHQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdElBO0FBVUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7O0FBa0VBO0FBN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBZUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBaEVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQWtFQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyRkE7QUFXQTtBQUNBO0FBSUE7QUFHQTtBQUFBO0FBQUE7O0FBK0RBO0FBMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBS0E7QUFEQTtBQUNBO0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFLQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBN0RBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQStEQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsRkE7QUFVQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBTUE7QUFHQTtBQUFBO0FBQUE7O0FBb0lBO0FBL0hBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBbUNBO0FBNUJBO0FBSUE7QUFEQTtBQUNBO0FBYUE7QUFRQTtBQWZBO0FBQ0E7QUFDQTtBQU9BO0FBWUE7QUFFQTtBQUFBO0FBQ0E7QUFLQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsSUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBb0lBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoS0E7QUFXQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQUE7QUFBQTs7QUFtRUE7QUE5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFhQTtBQVZBO0FBYUE7QUFFQTtBQUFBO0FBQ0E7QUFLQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBbUVBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN2RkE7QUFXQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQUE7QUFBQTs7QUFtRUE7QUE5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFhQTtBQVZBO0FBYUE7QUFFQTtBQUFBO0FBQ0E7QUFLQTs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvREE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBbUVBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkZBO0FBV0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQU9BO0FBQUE7QUFBQTs7QUFnRUE7QUEzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFnQkE7QUFaQTtBQUNBO0FBZUE7QUFFQTtBQUFBO0FBQ0E7QUFLQTs7O0FBQUE7QUE5REE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBZ0VBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6RkE7QUFXQTtBQUNBO0FBRUE7QUFHQTtBQUdBO0FBQUE7QUFBQTs7QUF1REE7QUFsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFPQTtBQUlBO0FBRUE7QUFBQTtBQUNBO0FBS0E7OztBQUFBO0FBckRBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQXVEQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNFQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFHQTtBQUFBO0FBQUE7O0FBMkhBO0FBbEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFNQTtBQUdBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBekhBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUxBO0FBREE7QUFDQTtBQTJIQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2hKQTtBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUFBO0FBQUE7O0FBd0RBO0FBbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBTUE7QUFHQTtBQUVBO0FBaUJBO0FBZEE7QUFZQTtBQUtBO0FBdERBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQXdEQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNFQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBR0E7QUFPQTtBQUNBO0FBQ0E7QUFNQTtBQUVBO0FBQUE7QUFzQkE7QUFBQTtBQVZBO0FBUUE7QUFJQTs7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBVUE7QUFFQTtBQUNBO0FBS0E7QUFJQTtBQUVBO0FBQ0E7QUFPQTtBQUVBO0FBT0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBQ0E7O0FBQUE7QUFDQTtBQUNBOzs7OztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7O0FBR0E7O0FBQUE7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQUE7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBelJBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQTJRQTtBQUFBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1VEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFZQTtBQUFBO0FBRUE7QUFDQTtBQUNBOztBQUtBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUlBO0FBcUlBO0FBbUZBO0FBSUE7QUE3TkE7QUFDQTtBQUdBO0FBUUE7QUF1Q0E7QUFJQTtBQTNDQTtBQTJCQTtBQUNBO0FBSUE7QUFLQTtBQTBEQTtBQWNBO0FBSUE7QUF4Q0E7QUFJQTtBQUtBO0FBS0E7QUFLQTtBQUtBO0FBSUE7QUFLQTtBQW9CQTtBQThEQTtBQVlBO0FBcERBO0FBV0E7QUFRQTtBQWtCQTtBQTlDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFHQTtBQVVBO0FBUUE7QUFhQTtBQURBO0FBQ0E7QUFRQTtBQU1BO0FBWUE7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQTRGQTtBQUNBOzs7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFobkJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQTJtQkE7QUFBQTtBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5cUJBO0FBU0E7QUFFQTtBQUVBO0FBS0E7QUFBQTtBQUFBOztBQTZEQTtBQXhEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBU0E7QUFFQTtBQUFBO0FBQ0E7QUEwQkE7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBekRBO0FBQUE7QUFBQTtBQUhBO0FBREE7QUFDQTtBQTZEQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvRUE7QUFTQTtBQUtBO0FBRUE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQU9BOztBQXdJQTtBQXRJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBOEJBO0FBekJBO0FBSUE7QUFFQTtBQUlBO0FBa0JBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFaQTtBQWVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUNBOztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFvQ0E7OztBQUFBO0FBM0lBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQVBBO0FBREE7QUFDQTtBQStJQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyS0E7QUFZQTtBQUFBO0FBQUE7O0FBa0NBO0FBN0JBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUE5QkE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBa0NBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5Q0E7QUFhQTtBQUdBO0FBQUE7QUFBQTs7QUE4Q0E7QUF6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBSEE7QUFLQTtBQUVBO0FBQUE7QUFDQTtBQWdCQTs7O0FBQUE7QUExQ0E7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQUNBO0FBOENBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5REE7QUFhQTtBQUdBO0FBQUE7QUFBQTs7QUFxREE7QUFoREE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVNBO0FBRUE7QUFBQTtBQUNBO0FBa0JBOzs7QUFBQTtBQWpEQTtBQUFBO0FBQUE7QUFIQTtBQURBO0FBQ0E7QUFxREE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckVBO0FBT0E7QUFJQTtBQUlBO0FBQUE7QUFBQTs7QUE0Q0E7QUF4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTtBQTRDQTtBQUFBO0FBNUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2ZBO0FBUUE7QUFLQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQW1CQTtBQUFBO0FBRUE7QUFDQTs7QUFDQTtBQWZBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFpQkE7QUFaQTtBQUtBO0FBSUE7QUFEQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBbUVBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBOztBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BXQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOzs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7QUFnRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQXpFQTtBQUNBO0FBcUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBZkE7QUFvQkE7Ozs7QUE5REE7QUFDQTtBQTRFQTs7Ozs7Ozs7Ozs7Ozs7OztBQy9FQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOzs7OztBIiwic291cmNlUm9vdCI6IiJ9